require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"./config/asset_config.json":[function(require,module,exports){
module.exports={assetHost:"/public/"};
},{}],"./config/binary_assets.json":[function(require,module,exports){
module.exports={"/img/account_sources.png":"/img/account_sources_so8IU9X0GxD6z5OEDbCztd79yUJ3eKJ5GOIFdAIZLok.png","/img/accounts.png":"/img/accounts_Cs-ywDiua_rc8x0vLLYFfoVdHlsBD4-TCczC2Gg6rjI.png","/img/banner_bg.jpg":"/img/banner_bg_1BrbO1OZZZk003OVCMDNIjd4K5RerViUUTtv2PidecI.jpg","/img/browser_icons.png":"/img/browser_icons_JGlKq6fqVFehBFrii4ajqMeuZ0jWogFh4hPxA3jWQks.png","/img/favicon.ico":"/img/favicon_LFWFGUw4cMt2cbVGy0T6xBqoJ4BBr2VKY56xSLK4IX0.ico","/img/filters.png":"/img/filters_0u6CYHHJmwnZMIQx9NoiHc3vxErAuFClP76R9_qyo-U.png","/img/icon_alert.png":"/img/icon_alert_E5klZRTEMRkrdl0A7toExqAV0iFqtCjfkjGV6L4TjyU.png","/img/imapin_providers.png":"/img/imapin_providers_MPg5bCUtIAWVjxNS9KtTmO1AdJQcaggezCx7btcX7-w.png","/img/logo_yahoo.png":"/img/logo_yahoo_AJRB1GXcHOIDKrn0wtXWBOnMGsi2ZX7BNupiOyABDvc.png","/img/mail_onboarding.png":"/img/mail_onboarding_IQyY3QR4_HG0Mr8FoaJa2RETBp9xX0eBTZyzSaMR7bM.png","/img/notification.gif":"/img/notification_pOWVzY321boQcw4nzccTe8RXo__CPkQ-ZsoZT1ENSmc.gif","/img/onboarding_cue_imap_2x.png":"/img/onboarding_cue_imap_2x_2G6BRLkapkmI7oQqDHPFWdgV1B6l1eMMhrYHgtsvMjQ.png","/img/onboarding_cue_imap.png":"/img/onboarding_cue_imap_e74ef96YCOHMGQ9xsSYVqYmIJVViWIHEVyd5Op_iEMA.png","/img/onboarding_cue_notification_2x.png":"/img/onboarding_cue_notification_2x_SZ_WMk7hGzHou752pw9e1w26WixTOAXA31Ghh4dER-E.png","/img/onboarding_cue_notification.png":"/img/onboarding_cue_notification_RztqMC_KilNV6XXVVAw1WfOwK9TfM1NHisK7eCLtYyE.png","/img/onboarding_cue_themes_2x.png":"/img/onboarding_cue_themes_2x_zmaSn3YgfOqjfmU7GjWB7p23T9vDfs6BgpoaTPjjUEc.png","/img/onboarding_cue_themes.png":"/img/onboarding_cue_themes_nMlg-lEOt2iP1NFaqXWqNCdcGeobHXuNu54Z0h9bl9E.png","/img/onboarding_cue_top_2x.png":"/img/onboarding_cue_top_2x_8mKJdjAMnJ0ebN6mi-ixUSdrdgJ__k1Jm46pdKp8uJE.png","/img/onboarding_cue_top.png":"/img/onboarding_cue_top_eGmJbJgssf-yc1pCfQzDjnkRz0ap56WYfhgwHFEVJVM.png","/img/search_onboarding.jpg":"/img/search_onboarding_xOu3i1r7yGrVW2-S4olC0QsUgKo4p0DwRYAU5m0aYVk.jpg","/img/sent_airplane.png":"/img/sent_airplane_1p3xNqUuPs3YNvhvhelGRdEW1s6HLHk0laFrnO-DoFM.png","/img/social_accounts.png":"/img/social_accounts_tj3Bs3dUTMGWP7XaPpYU-IBoQwDJW7u6dvBX2TlfZiw.png","/img/themes_cue_bottom.png":"/img/themes_cue_bottom_piO5ZBb5RlYkWfaR0BMoxxhjnVL3lhgOvOpFZfyZzuY.png","/img/themes_cue_top.png":"/img/themes_cue_top_rTxS502EWgKjdqYk6pf04TH4NvWEDm6b1hmUaHOi7qw.png","/img/vacation_response.png":"/img/vacation_response_qwVL91OMzF7xQz7f9w9IRIWOhTYXJ0Xm_HAvhWgc9cA.png","/img/viewing_email.png":"/img/viewing_email_ND9JGlmiyTk-4K1rjA_WwMqoD1rhvjIVWJzH_84F_-I.png","/html/status.html":"/html/status_NsIMApfRFdB9nTk9uhk8xFAt08_hm8m9QjmR2g0Vl9Y.html"};
},{}],1:[function(require,module,exports){
module.exports=[{sequence:"mail",order:["ssaBreachSecurityAlert","aptSecurityCue","newUserOnboardingCue","HSPreTourCue","HSDocumentsBadge","HSComposeBadge","HSSearchBadge","HSSettingsBadge","mailOnboardingCue","themesCue","photosCue","stationeryCue","searchCue","starredCue","settingsCue"]}];
},{}],2:[function(require,module,exports){
"use strict";function getListIdForSavedMessages(e,t){return e.name===_mail_constants.RouteNames.EDIT_DRAFT||e.name===_mail_constants.RouteNames.NEW_DRAFT?(0,_list.getListIdFromFolderId)(t):(0,_list.getListIdFromRoute)(e)}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},_react_action_constants=require("../platform/react_action_constants"),_mail_constants=require("../platform/mail_constants"),_list=require("../platform/utils/list"),_reducers_selectors=require("../reducers_selectors"),deleteDraftEnhancer=function(e,t){var s=t.type,r=t.csid,a=t.messageId,n=(0,_reducers_selectors.selectors)(e),o=n.getMessagesSelectors,c=n.getFeaturesSelectors,i=c(),_=i.getSetting,l=o(),d=l.getConversationId,u=l.getFolderId;switch(s){case _react_action_constants.mail.DELETE_DRAFT_REQUESTED:return _extends({},t,{itemId:_("conversations")?d(r):a});case _react_action_constants.mail.SEND_SUCCESS:return _extends({},t,{itemId:_("conversations")?d(r):a,listId:getListIdForSavedMessages(t.currentRoute,u(r))});default:return t}};exports.default=deleteDraftEnhancer,module.exports=exports.default;
},{"../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/list":"./platform/utils/list","../reducers_selectors":"./reducers_selectors"}],3:[function(require,module,exports){
"use strict";function _objectWithoutProperties(t,e){var _={};for(var a in t)e.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(_[a]=t[a]);return _}exports.__esModule=!0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var _=arguments[e];for(var a in _)Object.prototype.hasOwnProperty.call(_,a)&&(t[a]=_[a])}return t},_react_action_constants=require("../platform/react_action_constants"),_constants=require("../platform/rapid_client/constants.js"),_action=require("../platform/utils/action"),_route=require("../platform/utils/route"),_reducers_selectors=require("../reducers_selectors"),actionEnhancer=function(t,e){var _=e.listId;if(!_)return e;var a=(0,_reducers_selectors.selectors)(t).getListsSelectors(),E=a.doesListExist,s=a.getItemIdsSelectors,c=a.getCursorSelectors,r=E(_)?c(_).getCursor():{},n=void 0;switch(e.type){case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_SELECT_CURSOR_MOVED:case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_CURSOR_MOVED:var o=e.movement,S=_objectWithoutProperties(e,["movement"]);return _extends({},S,{cursorPayload:{movement:o,itemIds:s(_).getItemIds()},selectionPayload:{oldCursor:r}});case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_SELECTED:return n=(e.messageGroupIds||[])[0],_extends({},e,{cursorPayload:{itemId:n,itemIds:s(_).getItemIds()}});case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_RANGE_SELECTED:return n=e.targetGroupId,_extends({},e,{cursorPayload:{itemId:n,itemIds:s(_).getItemIds()},selectionPayload:{oldCursor:r}});case _react_action_constants.mail.OPEN_PAGE_REQUESTED:var i=[_constants.MKEYS.OPEN_MSG,_constants.MKEYS.DOC_READ_MSG,_constants.MKEYS.PHOTO_READ_MSG],M=(0,_action.getUIContextFromAction)(e)||{};if(i.indexOf(M.mKey)!==-1){var l=(0,_route.getUnsavedDataFromRoute)(e.currentRoute);return _extends({},e,{cursorPayload:{itemId:l.activeItemId,itemIds:s(_).getItemIds()}})}return e;case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_ALL_SELECTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.DELETE_DRAFT_REQUESTED:case _react_action_constants.mail.SEND_SUCCESS:return _extends({},e,{cursorPayload:{itemIds:s(_).getItemIds()}})}return e};exports.default=actionEnhancer,module.exports=exports.default;
},{"../platform/rapid_client/constants.js":"./platform/rapid_client/constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/action":"./platform/utils/action","../platform/utils/route":"./platform/utils/route","../reducers_selectors":"./reducers_selectors"}],4:[function(require,module,exports){
"use strict";function _objectWithoutProperties(t,e){var n={};for(var a in t)e.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n}exports.__esModule=!0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_react_action_constants=require("../platform/react_action_constants"),_reducers_selectors=require("../reducers_selectors"),_mail_constants=require("../platform/mail_constants"),getSettingsFromAttributes=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length?(t={},t[_mail_constants.Settings.THEME]=e[_mail_constants.MailboxAttributes.THEME].value,t[_mail_constants.Settings.THEME_MODE]=e[_mail_constants.MailboxAttributes.THEME_MODE].value,t[_mail_constants.Settings.MSG_LIST_DENSITY]=e[_mail_constants.MailboxAttributes.MSG_LIST_DENSITY].value,t[_mail_constants.Settings.PREVIEW_PANE]=e[_mail_constants.MailboxAttributes.PREVIEW_PANE].value,t[_mail_constants.Settings.SNIPPETS]=e[_mail_constants.MailboxAttributes.SNIPPETS].value,t[_mail_constants.Settings.COMPOSE_FONT_FAMILY]=e[_mail_constants.MailboxAttributes.COMPOSE_FONT_FAMILY].value,t[_mail_constants.Settings.COMPOSE_FONT_SIZE]=e[_mail_constants.MailboxAttributes.COMPOSE_FONT_SIZE].value,t[_mail_constants.Settings.DESKTOP_NOTIFICATION]=!!e[_mail_constants.MailboxAttributes.DESKTOP_NOTIFICATION].value,t):{}},actionEnhancer=function(t){var e=t.__initializeFeatures__,n=t.featureSequence,a=void 0===n?{}:n,s=t.config,r=void 0===s?{}:s,i=t.queryStringOverrides,o=void 0===i?{}:i;return function(t,n){var s=n.type,i=n.name,_=n.fromFeature,c=n.mailboxAttributes,u=_objectWithoutProperties(n,["type","name","fromFeature","mailboxAttributes"]),l=a[s]||[];switch(s){case _react_action_constants.mail.INITIAL_STATE:var E=l[0],m=getSettingsFromAttributes(c);return o!=={}&&Object.assign(m,o),_extends({},n,{features:Object.assign({},Object.keys(e).reduce(function(t,n){var a;return _extends({},t,(a={},a[n]=n===E||!!e[n].enabled,a))},{}),Object.keys(r).filter(function(t){return"boolean"!=typeof r[t]&&!(t in m)}).reduce(function(t,e){var n;return _extends({},t,(n={},n[e]=r[e],n))},m))});case _react_action_constants.mail.FEATURE_TRY_NOW_REQUESTED:case _react_action_constants.mail.FEATURE_CLOSED:if(!_&&!i)return n;var S=e[_||i].nextFeatureCues,b=void 0===S?{}:S;return _extends({},u,{type:s,nextFeatureCues:[b[s]]},_?{fromFeature:_}:{name:i});default:var O=l.filter((0,_reducers_selectors.selectors)(t).getFeatureCueSelectors().isNotSeenBefore),f=O[0];return f?_extends({},n,{name:f}):n}}};exports.default=actionEnhancer,module.exports=exports.default;
},{"../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../reducers_selectors":"./reducers_selectors"}],5:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_react_action_constants=require("../platform/react_action_constants"),_folder=require("../platform/utils/folder"),folderEnhancer=function(e,t){var a,r,_=t.type,n=t.folders,o=void 0===n?[]:n;switch(_){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:return o.length?_extends({},t,{folderMap:(0,_folder.flattenFolderTree)(o)}):t;case _react_action_constants.mail.CREATE_FOLDER_SUCCEEDED:return _extends({},t,{folderMap:(a={},a[t.folder.id]=t.folder,a)});case _react_action_constants.mail.RENAME_FOLDER_SUCCEEDED:return _extends({},t,{folderMap:(r={},r[t.folderId]={name:t.newFolderName},r)});default:return t}};exports.default=folderEnhancer,module.exports=exports.default;
},{"../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/folder":"./platform/utils/folder"}],6:[function(require,module,exports){
"use strict";function shouldMoveMessage(e,s){var t=s.folder,r=s.destinationFolder,a=(0,_folder.getPrimaryFolderType)(r),n=(0,_folder.getPrimaryFolderType)(t),o=getLeastDangerousListIdFolderType(e);if(o||(o=KEYWORD_SEARCH_TYPE),!areAccountsEqual(t,r))return!1;if(t.id===r.id&&a!==_mail_constants.FolderTypes.TRASH)return!1;switch(o){case _mail_constants.FolderTypes.INBOX:case _mail_constants.FolderTypes.USER:case _mail_constants.FolderTypes.ARCHIVE:return!isDraftOrSent(n)&&!isDraftOrSent(a);case _mail_constants.FolderTypes.SENT:return n!==_mail_constants.FolderTypes.DRAFT&&a!==_mail_constants.FolderTypes.DRAFT;case _mail_constants.FolderTypes.DRAFT:return n===_mail_constants.FolderTypes.DRAFT&&a===_mail_constants.FolderTypes.TRASH;case _mail_constants.FolderTypes.TRASH:case _mail_constants.FolderTypes.BULK:return!isDraftOrSent(a);case KEYWORD_SEARCH_TYPE:return isDraftOrSent(n)?a===_mail_constants.FolderTypes.TRASH:!isDraftOrSent(a);default:return!1}}function getLeastDangerousListIdFolderType(e){var s,t=100,r=(s={},s[_mail_constants.FolderTypes.INBOX]=1,s[_mail_constants.FolderTypes.USER]=1,s[_mail_constants.FolderTypes.ARCHIVE]=1,s[_mail_constants.FolderTypes.BULK]=2,s[_mail_constants.FolderTypes.TRASH]=2,s[_mail_constants.FolderTypes.SENT]=3,s[_mail_constants.FolderTypes.DRAFT]=4,s);return e.reduce(function(e,s){var a=r[e]||t,n=r[s]||t;return a<n?a:s},"")}function isDraftOrSent(e){return e===_mail_constants.FolderTypes.DRAFT||e===_mail_constants.FolderTypes.SENT}function areAccountsEqual(e,s){return e.accountId===s.accountId}exports.__esModule=!0;var _mail_constants=require("../../platform/mail_constants"),_folder=require("../../platform/utils/folder"),rulePredicates={isReadMessage:function(e){return e.flags.read},isUnreadMessage:function(e){return!e.flags.read},isStarredMessage:function(e){return e.flags.flagged},isUnstarredMessage:function(e){return!e.flags.flagged},isMoveableMessage:function(e){return function(s){return shouldMoveMessage(e,s)}},default:function(){return!1}},KEYWORD_SEARCH_TYPE="KEYWORD";exports.default=rulePredicates,module.exports=exports.default;
},{"../../platform/mail_constants":"./platform/mail_constants","../../platform/utils/folder":"./platform/utils/folder"}],7:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _list=require("./list"),_list2=_interopRequireDefault(_list),_folder=require("./folder"),_folder2=_interopRequireDefault(_folder),_cursor=require("./cursor"),_cursor2=_interopRequireDefault(_cursor),_features=require("./features"),_features2=_interopRequireDefault(_features),_items_to_update=require("./items_to_update"),_items_to_update2=_interopRequireDefault(_items_to_update),_message_body=require("./message_body"),_message_body2=_interopRequireDefault(_message_body),_compose=require("./compose"),_compose2=_interopRequireDefault(_compose),actionEnhancers=function(e){return[_list2.default,_cursor2.default,_folder2.default,_compose2.default,_items_to_update2.default,(0,_features2.default)(e),_message_body2.default]};exports.default=actionEnhancers,module.exports=exports.default;
},{"./compose":2,"./cursor":3,"./features":4,"./folder":5,"./items_to_update":8,"./list":9,"./message_body":10}],8:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function shouldPermanentDelete(e,t){var a=t(e.folder.id);return e.isAffected&&(a===TRASH||a===BULK||a===DRAFT)}function getMinimalFolderInfo(e,t,a){return{id:e,types:[t],accountId:a}}function getRule(e,t){var a=t.type,s=t.listId,_=(0,_reducers_selectors.selectors)(e),r=_.getFoldersSelectors,n=r(),E=n.doesFolderIdExist,o=n.getPrimaryFolderTypeByFolderId,c=n.getFolderIdsByName;switch(a){case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED:var i=(0,_list.getFolderIdNamesFromListId)(s),S=i.folderIds,l=void 0===S?[]:S,d=i.folderNames,u=void 0===d?[]:d,M=u.reduce(function(e,t){return e.concat(c(t))},[]).concat(l).filter(E),R=M.map(o);return _update_rules2.default.isMoveableMessage(R);case _react_action_constants.mail.MESSAGES_MARK_READ_REQUESTED:return _update_rules2.default.isUnreadMessage;case _react_action_constants.mail.MESSAGES_MARK_UNREAD_REQUESTED:return _update_rules2.default.isReadMessage;case _react_action_constants.mail.MESSAGES_MARK_STARRED_REQUESTED:return _update_rules2.default.isUnstarredMessage;case _react_action_constants.mail.MESSAGES_MARK_UNSTARRED_REQUESTED:return _update_rules2.default.isStarredMessage;default:(0,_invariant2.default)(!1,"Action "+a+" does not have an associated rule with it.")}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},_react_action_constants=require("../platform/react_action_constants"),_mail_constants=require("../platform/mail_constants"),_list=require("../platform/utils/list"),_invariant=require("../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_reducers_selectors=require("../reducers_selectors"),_update_rules=require("./helpers/update_rules.js"),_update_rules2=_interopRequireDefault(_update_rules),TRASH=_mail_constants.FolderTypes.TRASH,BULK=_mail_constants.FolderTypes.BULK,DRAFT=_mail_constants.FolderTypes.DRAFT,buildItemsToUpdate=function(e,t){var a=t.listId,s=t.itemId,_=t.destinationFolderType,r=(0,_reducers_selectors.selectors)(e),n=r.getFoldersSelectors,E=r.getListsSelectors,o=r.getMessageGroupsSelectors,c=r.getMessagesSelectors,i=r.getFeaturesSelectors,S=n(),l=S.getAccountIdByFolderId,d=S.getFolderIdsFromFolderType,u=S.getPrimaryFolderTypeByFolderId,M=o(),R=M.doesMessageGroupIdExist,A=M.getCsmIdsFromMessageGroupId,m=c(),T=m.doesCsmIdExist,I=m.getConversationId,f=m.getFlags,p=m.getFolderId,F=m.getCsid,D=E(),g=D.getSelectedItemIdsSelectors,U=D.getCursorSelectors,G=D.doesListExist,Q=i(),v=Q.getSetting,y=G(a)&&g(a),O=y.getSelectedItemIds,V=G(a)&&U(a),K=V.getCursor,L=K&&K()||{},N=O?Object.keys(O()):[],x=s?[s]:N;return!x.length&&L.itemId&&(x=[L.itemId]),x.filter(R).reduce(function(e,t){return e.concat(A(t))},[]).filter(T).map(function(e){var a=p(e),s=F(e),r=l(a),n=_?d(_,r)[0]:t.destinationFolderId,E=n?getMinimalFolderInfo(n,u(n),l(n)):void 0;return{csmId:s||e,groupId:v("conversations")?I(e):e,folder:getMinimalFolderInfo(a,u(a),r),destinationFolder:E,flags:f(e)}})},buildListsToUpdate=function(e){var t=(0,_reducers_selectors.selectors)(e),a=t.getFoldersSelectors,s=t.getListsSelectors,_=a(),r=_.getFolderIdsByName,n=_.doesFolderIdExist,E=s(),o=E.getListIdsByContentType;return o(_mail_constants.ListContentTypes.MESSAGES).map(function(e){var t=(0,_list.getFolderIdNamesFromListId)(e),a=t.folderIds,s=void 0===a?[]:a,_=t.folderNames,E=void 0===_?[]:_,o=E.reduce(function(e,t){return e.concat(r(t))},[]).concat(s).filter(n);return{listId:e,folderIds:o}})},actionEnhancer=function(e,t){var a=t.type,s=t.listId,_=(0,_reducers_selectors.selectors)(e),r=_.getFoldersSelectors,n=r(),E=n.getPrimaryFolderTypeByFolderId,o=!1,c=[];if(!s)return t;switch(a){case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED:t.destinationFolderType=_mail_constants.FolderTypes.TRASH,o=!0;case _react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_READ_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_UNREAD_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_STARRED_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_UNSTARRED_REQUESTED:var i=getRule(e,t);c=buildItemsToUpdate(e,t).map(function(e){var t=_extends({},e,{isAffected:i(e)});return o&&shouldPermanentDelete(t,E)&&delete t.destinationFolder,t});break;case _react_action_constants.mail.DELETE_DRAFT_REQUESTED:c=buildItemsToUpdate(e,t).map(function(e){var a=!1;return e.csmId===t.csid&&(a=!0,delete e.destinationFolder),_extends({},e,{isAffected:a})});break;case _react_action_constants.mail.SEND_SUCCESS:c=buildItemsToUpdate(e,_extends({},t,{destinationFolderType:_mail_constants.FolderTypes.SENT})).map(function(e){var a=!1;return e.csmId===t.csid&&(a=!0),_extends({},e,{isAffected:a})})}return c.length?_extends({},t,{itemsToUpdate:c,listsToUpdate:buildListsToUpdate(e,t)}):t};exports.default=actionEnhancer,module.exports=exports.default;
},{"../platform/invariant":"./platform/invariant","../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/list":"./platform/utils/list","../reducers_selectors":"./reducers_selectors","./helpers/update_rules.js":6}],9:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},_react_action_constants=require("../platform/react_action_constants"),_mail_constants=require("../platform/mail_constants"),_list=require("../platform/utils/list"),_message2=require("../platform/utils/message"),_omit=require("lodash/omit"),_omit2=_interopRequireDefault(_omit),getListFromListItems=function(t,e,s,n,a){var i,r,c,o=(0,_list.getListContentTypeFromListId)(t);switch(o){case _mail_constants.ListContentTypes.MESSAGES:return i={},i[t]={itemIds:e.map(function(t){return t.id}),nextItemsUrl:s,offset:n,totalHits:a},i;case _mail_constants.ListContentTypes.DOCUMENTS:case _mail_constants.ListContentTypes.IMAGES:return r={},r[t]={itemIds:e.map(function(t){var e=t.attachment;return e.csid?(0,_message2.generateAttachmentId)(e):e.id}),nextItemsUrl:s,offset:n,totalHits:a},r;case _mail_constants.ListContentTypes.GIFS:return c={},c[t]={itemIds:e.map(function(t){return t.id}),nextItemsUrl:s,offset:n},c}return{}},getGifItemsFromListItems=function(t,e){var s=(0,_list.getListContentTypeFromListId)(t);switch(s){case _mail_constants.ListContentTypes.GIFS:return e.reduce(function(t,e){var s;return _extends({},t,(s={},s[e.id]=e,s))},{})}return{}},getMessageGroupsFromListItems=function(t,e){var s=(0,_list.getListContentTypeFromListId)(t);switch(s){case _mail_constants.ListContentTypes.MESSAGES:return e.reduce(function(t,e){var s;return _extends({},t,(s={},s[e.id]=e.messages.map(function(t){return t.csid||t.id}),s))},{})}return{}},getMessageMetadataFromListItems=function(t,e){var s=(0,_list.getListContentTypeFromListId)(t);switch(s){case _mail_constants.ListContentTypes.MESSAGES:return e.reduce(function(t,e){return _extends({},t,e.messages.reduce(function(t,e){var s;return _extends({},t,(s={},s[e.csid||e.id]=_extends({},(0,_omit2.default)(e,["snippet","attachments","headers"]),{headers:(0,_omit2.default)(e.headers,["subject"])}),s))},{}))},{})}return{}},getAttachmentsFromListItems=function(t,e){var s=(0,_list.getListContentTypeFromListId)(t);switch(s){case _mail_constants.ListContentTypes.MESSAGES:return e.reduce(function(t,e){return _extends({},t,e.messages.reduce(function(t,e){return _extends({},t,(e.attachments||[]).reduce(function(t,e){var s;return _extends({},t,(s={},s[e.csid?(0,_message2.generateAttachmentId)(e):e.id]=e,s))},{}))},{}))},{});case _mail_constants.ListContentTypes.DOCUMENTS:case _mail_constants.ListContentTypes.IMAGES:return e.reduce(function(t,e){var s,n=e.attachment;return _extends({},t,(s={},s[n.csid?(0,_message2.generateAttachmentId)(n):n.id]=n,s))},{})}return{}},getMessageAttachmentsFromListItems=function(t,e){var s=(0,_list.getListContentTypeFromListId)(t);switch(s){case _mail_constants.ListContentTypes.MESSAGES:return e.reduce(function(t,e){return _extends({},t,e.messages.reduce(function(t,e){var s;return _extends({},t,(s={},s[e.csid||e.id]=(e.attachments||[]).map(function(t){return t.csid?(0,_message2.generateAttachmentId)(t):t.id}),s))},{}))},{});case _mail_constants.ListContentTypes.DOCUMENTS:case _mail_constants.ListContentTypes.IMAGES:return e.reduce(function(t,e){var s,n=e.attachment,a=e.message;return _extends({},t,(s={},s[n.csid||a.id]=[].concat(t[n.csid||a.id]||[],[n.csid?(0,_message2.generateAttachmentId)(n):n.id]),s))},{})}return{}},getSubjectsFromListItems=function(t,e){var s=(0,_list.getListContentTypeFromListId)(t);switch(s){case _mail_constants.ListContentTypes.MESSAGES:return e.reduce(function(e,s){return _extends({},e,s.messages.reduce(function(e,s){var n,a,i=s.csid,r=s.id,c=s.headers,o=void 0===c?{}:c;return _extends({},e,(a={},a[i||r]=(n={},n[t]=o.subject,n),a))},{}))},{});case _mail_constants.ListContentTypes.DOCUMENTS:case _mail_constants.ListContentTypes.IMAGES:return e.reduce(function(e,s){var n,a;return _extends({},e,(a={},a[s.csid||s.message.id]=(n={},n[t]=s.message.subject,n),a))},{})}return{}},getSnippetsFromListItems=function(t,e){var s=(0,_list.getListContentTypeFromListId)(t);switch(s){case _mail_constants.ListContentTypes.MESSAGES:return e.reduce(function(e,s){return _extends({},e,s.messages.reduce(function(e,s){var n,a;return _extends({},e,(a={},a[s.csid||s.id]=(n={},n[t]=s.snippet,n),a))},{}))},{})}return{}},buildListData=function(t,e,s,n,a){return{lists:getListFromListItems(t,e,s,n,a),groupIdToCsmIdsMap:getMessageGroupsFromListItems(t,e),messages:getMessageMetadataFromListItems(t,e),attachments:getAttachmentsFromListItems(t,e),csmIdToAttachmentIdsMap:getMessageAttachmentsFromListItems(t,e),subjects:getSubjectsFromListItems(t,e),snippets:getSnippetsFromListItems(t,e),gifItems:getGifItemsFromListItems(t,e)}},flattenListData=function(t){return t.reduce(function(t,e){return Object.keys(e).reduce(function(t,s){var n;return _extends({},t,(n={},n[s]=_extends({},t[s],e[s]),n))},t)},{})},actionEnhancer=function(t,e){var s=[];switch(e.type){case _react_action_constants.mail.OPEN_PAGE_REQUESTED:return _extends({},e,{listId:(0,_list.getListIdFromRoute)(e.route)});case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:var n=e.groupId,a=e.message,i=e.listId;n&&a&&i&&s.push(buildListData(e.listId,[{id:n,messages:[a]}]));break;case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:var r=e.groupId,c=e.message,o=e.listId,_=e.csid;r&&c&&o&&s.push(buildListData(e.listId,[{id:r,messages:[_extends({},c,{csid:_})]}]));break;case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED:e.messageGroupList&&s.push(buildListData(e.listId,e.messageGroupList,e.nextItemsUrl,e.offset,e.count)),e.messageGroups&&s.push(buildListData(e.listId,e.messageGroups,e.nextItemsUrl,e.offset,e.count));break;case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:var u=e.listId,m=e.listContentBlock,d=void 0===m?{}:m;u&&d&&s.push(buildListData(u,d.items,d.nextItemsUrl,d.offset,d.totalHits));break;case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.GIF_FETCH_SUCCEEDED:Object.keys(e.response||{}).forEach(function(t){Object.keys(e.response[t]).forEach(function(n){var a=(0,_list.recreateListId)(e.listId,{listContentType:t,listFilter:n}),i=e.response[t][n];i&&s.push(buildListData(a,i.items,i.nextItemsUrl,i.offset,i.totalHits))})});break;default:return e}return _extends({},e,{listData:flattenListData(s)})};exports.default=actionEnhancer,module.exports=exports.default;
},{"../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/list":"./platform/utils/list","../platform/utils/message":"./platform/utils/message","lodash/omit":"./node_modules/lodash/omit.js"}],10:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},_react_action_constants=require("../platform/react_action_constants"),messageBodyEnhancer=function(){var e,t,a,s=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1]),_=s.type,n=s.simpleBody,c=s.messageIds,o=void 0===c?[]:c,r=s.messageBodiesMap,E=void 0===r?{}:r,i=s.messageMetadataMap,d=void 0===i?{}:i;switch(_){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.MESSAGE_BODIES_RECEIVED:case _react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED:case _react_action_constants.mail.MESSAGE_BODIES_OPEN_GROUP_RECEIVED:var S=Object.keys(E);return S.length?_extends({},s,{messageBodiesMap:S.reduce(function(e,t){var a,s,_=d[t]||{},n=_.csid;return _extends({},e,(a={},a[t]={body:E[t]},a),n?(s={},s[n]={body:E[t]},s):{})},{})}):s;case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.SPONSORED_SAVE_TO_INBOX_SUCCEEDED:return _extends({},s,{messageBodiesMap:_extends((e={},e[s.message.id]={body:n},e),s.csid?(t={},t[s.csid]={body:n},t):{})});case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:return _extends({},s,{messageBodiesMap:_extends({},s.csid?(a={},a[s.csid]={body:s.message.body},a):{})});case _react_action_constants.mail.MESSAGE_BODIES_FAILED:return o.length?_extends({},s,{messageBodiesMap:o.reduce(function(e,t){var a;return _extends({},e,(a={},a[t]={},a))},{})}):s;default:return s}};exports.default=messageBodyEnhancer,module.exports=exports.default;
},{"../platform/react_action_constants":"./platform/react_action_constants"}],"./actions/ads":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getPencilAd(e){var t=(0,_list.getListIdFromRoute)(e.getStore(_pages2.default).getActivePageRoute()),a=(0,_list.getSearchAdKeywordFromListId)(t);if(!a){var s=e.config.geminiForceFilter,i={adCount:e.config.geminiRequestParams.adCount,sectionId:e.config.geminiRequestParams.sectionId};s&&(i.forceFilter=s),e.geminiAPIClient.request(i,{adPosition:"messagelist"}).then(function(t){return e.dispatch(_react_action_constants.mail.AD_RECEIVED,t)}).catch(function(t){return e.dispatch(_react_action_constants.mail.AD_FAILED,{err:t})})}}function startAdFeedback(e){e.dispatch(_react_action_constants.mail.AD_FEEDBACK_STARTED)}function submitAdFeedback(e){e.dispatch(_react_action_constants.mail.AD_FEEDBACK_SUBMITTED)}function closeAdFeedback(e){e.dispatch(_react_action_constants.mail.AD_FEEDBACK_CLOSED)}function darlaAdHandler(e,t){t.error?e.dispatch(_react_action_constants.mail.DARLA_ADS_FAILED,t):e.dispatch(_react_action_constants.mail.DARLA_ADS_RECEIVED,t)}function prefetchedAdRendered(e,t){e.dispatch(_react_action_constants.mail.PREFETCHED_AD_RENDERED,t)}function prefetchedAdsRendered(e,t){e.dispatch(_react_action_constants.mail.PREFETCHED_ADS_RENDERED,t)}function lookAheadAdsParsed(e,t){e.dispatch(_react_action_constants.mail.LOOK_AHEAD_ADS_PARSED,t)}function lookAheadAdsRendered(e){e.dispatch(_react_action_constants.mail.LOOK_AHEAD_ADS_RENDERED)}function getGeminiSponsoredAsset(e){var t=e.getStore(_ads2.default),a=t.getAdData(),s=a.nativeAd,i=_logger2.default.feature("gemini_sponsored_asset_call");if(!t.isNativeAdCached()){var n=new _http_transport2.default("GET",s.url,{timeout:1e3});n.setHeader("Accept","text/html"),n.send().then(i.logSuccessAndLatency,i.logFailure).then(function(t){e.dispatch(_react_action_constants.mail.GEMINI_SPONSORED_ASSET_RECEIVED,{asset:t.text})}).catch(function(t){e.dispatch(_react_action_constants.mail.GEMINI_SPONSORED_ASSET_FAILED,{error:t,url:s.url})})}}function messageReadAdRotationTimer(e){e.dispatch(_react_action_constants.mail.MESSAGE_READ_AD_ROTATION_TIMER)}function forwardSponsoredMessage(e){var t=e.getStore(_ads2.default),a=t.getPencilAdData(),s=t.getNativeAdData(),i={initialSubject:a.adHeadline,initialBody:s.geminiSponsoredAsset};e.executeAction(_navigation.navigateToNewSponsoredCompose,i)}function saveSponsoredMessage(e){var t=e.getStore(_user_preferences2.default).getMailboxes()[0].id,a=e.getStore(_mail2.default),s=a.getActiveAccount(),i=a.getActiveAccountId(),n=a.getFolderIdForAccount(_mail_constants.FolderTypes.INBOX,i),r=e.getStore(_ads2.default),o=r.getPencilAdData(),_=r.getNativeAdData(),d=(0,_utils.generateUID)(),c={csid:d,mailboxId:t,subject:o.adHeadline,html:_.geminiSponsoredAsset,from:[s],folderId:n};e.mailAPIClient.request("messages.save",c,{strategy:_mail_api_client2.default.STRATEGIES.BROWSER_TO_JEDI,timeout:_actions.SAVE_REQUEST_TIMEOUT_BASE}).then(function(t){var a=t.message;e.dispatch(_react_action_constants.mail.SPONSORED_SAVE_TO_INBOX_SUCCEEDED,{message:a,simpleBody:{html:c.html,htmlAnnotations:[]}})}).catch(function(){e.dispatch(_react_action_constants.mail.SPONSORED_SAVE_TO_INBOX_FAILED)})}function disableWiderMailExtension(e){e.dispatch(_react_action_constants.mail.FEATURE_DISABLED,{name:_mail_constants.Features.IS_WIDER_MAIL_EXTN_ENABLED})}exports.__esModule=!0,exports.getPencilAd=getPencilAd,exports.startAdFeedback=startAdFeedback,exports.submitAdFeedback=submitAdFeedback,exports.closeAdFeedback=closeAdFeedback,exports.darlaAdHandler=darlaAdHandler,exports.prefetchedAdRendered=prefetchedAdRendered,exports.prefetchedAdsRendered=prefetchedAdsRendered,exports.lookAheadAdsParsed=lookAheadAdsParsed,exports.lookAheadAdsRendered=lookAheadAdsRendered,exports.getGeminiSponsoredAsset=getGeminiSponsoredAsset,exports.messageReadAdRotationTimer=messageReadAdRotationTimer,exports.forwardSponsoredMessage=forwardSponsoredMessage,exports.saveSponsoredMessage=saveSponsoredMessage,exports.disableWiderMailExtension=disableWiderMailExtension;var _react_action_constants=require("../platform/react_action_constants"),_mail_constants=require("../platform/mail_constants"),_list=require("../platform/utils/list"),_pages=require("../stores/pages"),_pages2=_interopRequireDefault(_pages),_ads=require("../stores/ads"),_ads2=_interopRequireDefault(_ads),_mail=require("../stores/mail"),_mail2=_interopRequireDefault(_mail),_user_preferences=require("../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_http_transport=require("../platform/http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_mail_api_client=require("../platform/mail_api_client"),_mail_api_client2=_interopRequireDefault(_mail_api_client),_logger=require("../platform/logger"),_logger2=_interopRequireDefault(_logger),_navigation=require("./navigation"),_utils=require("../platform/utils"),_actions=require("../molecules/compose/actions.js");
},{"../molecules/compose/actions.js":"./molecules/compose/actions","../platform/http_transport":"./platform/http_transport","../platform/logger":"./platform/logger","../platform/mail_api_client":"./platform/mail_api_client","../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils":"./platform/utils","../platform/utils/list":"./platform/utils/list","../stores/ads":"./stores/ads","../stores/mail":"./stores/mail","../stores/pages":"./stores/pages","../stores/user_preferences":"./stores/user_preferences","./navigation":"./actions/navigation"}],"./actions/application":[function(require,module,exports){
"use strict";function convertToRoute(e,t){var a=e.getStore(_fluxibleRouter.RouteStore);return a.getRoute(t)}function closePage(e,t){var a=t.route,o=t.url;o&&(a=convertToRoute(e,o)),e.dispatch(_react_action_constants.mail.CLOSE_PAGE_REQUESTED,{route:a})}function makePageRecent(e,t){var a=t.url,o=convertToRoute(e,a);e.dispatch(_react_action_constants.mail.REORDER_PAGE_REQUESTED,{route:o})}function closeAllPages(e){e.dispatch(_react_action_constants.mail.CLOSE_ALL_PAGES_REQUESTED)}function closeCurrentPage(e){e.dispatch(_react_action_constants.mail.CLOSE_PAGE_REQUESTED)}function cancelReload(e){e.dispatch(_react_action_constants.mail.CANCEL_APP_RELOAD)}function reloadApp(e){e.dispatch(_react_action_constants.mail.CONFIRM_APP_RELOAD),window.location.reload()}function discardResolutionChangeWarning(e){e.dispatch(_react_action_constants.mail.RESOLUTION_CHANGE)}exports.__esModule=!0,exports.closePage=closePage,exports.makePageRecent=makePageRecent,exports.closeAllPages=closeAllPages,exports.closeCurrentPage=closeCurrentPage,exports.cancelReload=cancelReload,exports.reloadApp=reloadApp,exports.discardResolutionChangeWarning=discardResolutionChangeWarning;var _react_action_constants=require("../platform/react_action_constants"),_fluxibleRouter=require("fluxible-router");
},{"../platform/react_action_constants":"./platform/react_action_constants","fluxible-router":"./node_modules/fluxible-router/index.js"}],"./actions/attachment":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function previewNextAttachment(t,e){var a=e.nextAttachmentId,n=e.fullScreenMode,c=t.getStore(_pages2.default).getActivePageRoute(),r=c.params.mid||c.params.groupId;return previewAttachment(t,{attachmentId:a,messageGroupId:r,fullScreenMode:n})}function previewPreviousAttachment(t,e){var a=e.previousAttachmentId,n=e.fullScreenMode,c=t.getStore(_pages2.default).getActivePageRoute(),r=c.params.mid||c.params.groupId;return previewAttachment(t,{attachmentId:a,messageGroupId:r,fullScreenMode:n})}function previewAttachment(t,e){var a=e.attachmentId,n=e.messageGroupId,c=void 0===n?(0,_message.getMessageIdFromAttachmentId)(a):n,r=e.fullScreenMode,s=void 0===r||r,o=(0,_reducers_selectors.selectors)(t.store.getState()),i=o.getDocumentSelectors,_=i(),m=t.getStore(_mail2.default),u=t.getStore(_pages2.default).getActivePageRoute(),d=(0,_list.getListIdFromRoute)(u),l=m.getAttachment(a),E=l||{},g=E.documentId;if(t.dispatch(_react_action_constants.mail.ATTACHMENT_PREVIEW_OPENED,{attachmentId:a,documentId:g,groupId:c,listId:d,fullScreenMode:s}),g&&l.type!==_mail_constants.Attachments.Types.IMAGE&&!_.isDocumentLoaded(g)){var p=1,h=_mail_constants.AttachmentPreview.PAGES_CHUNK_SIZE;return getDocument(t,{success:_react_action_constants.mail.DOCUMENT_FETCH_SUCCEEDED,failure:_react_action_constants.mail.DOCUMENT_FETCH_FAILED},{documentId:g,startPage:p,endPage:h})}}function zoomAttachment(t){t.dispatch(_react_action_constants.mail.ATTACHMENT_ZOOMED)}function openAttachmentLink(t){t.dispatch(_react_action_constants.mail.ATTACHMENT_OPENED)}function downloadAttachment(t){t.dispatch(_react_action_constants.mail.ATTACHMENT_DOWNLOADED)}function fetchDocumentPages(t,e){var a=e.documentId,n=e.pageNumber,c=(0,_reducers_selectors.selectors)(t.store.getState()),r=c.getDocumentSelectors,s=r();if(!s.isPageFetched(a,n)){var o=s.getNumberOfPages(a),i=(0,_attachments.getPageRangeForDocument)(n,o,_mail_constants.AttachmentPreview.PAGES_CHUNK_SIZE),_=i.startPage,m=i.endPage;return t.dispatch(_react_action_constants.mail.DOCUMENT_PAGE_FETCH_REQUESTED,{documentId:a,startPage:_,endPage:m}),getDocument(t,{success:_react_action_constants.mail.DOCUMENT_PAGE_FETCH_SUCCEEDED,failure:_react_action_constants.mail.DOCUMENT_PAGE_FETCH_FAILED},{documentId:a,startPage:_,endPage:m})}}function refreshDocumentPage(t,e){var a=e.documentId,n=e.pageNumber;return t.dispatch(_react_action_constants.mail.DOCUMENT_PAGE_FETCH_REQUESTED,{documentId:a,startPage:n,endPage:n}),getDocument(t,{success:_react_action_constants.mail.DOCUMENT_PAGE_FETCH_SUCCEEDED,failure:_react_action_constants.mail.DOCUMENT_PAGE_FETCH_FAILED},{documentId:a,startPage:n,endPage:n})}function retryFetchDocument(t,e){var a=e.documentId;t.dispatch(_react_action_constants.mail.DOCUMENT_FETCH_REQUESTED,{documentId:a});var n=1,c=_mail_constants.AttachmentPreview.PAGES_CHUNK_SIZE;return getDocument(t,{success:_react_action_constants.mail.DOCUMENT_FETCH_SUCCEEDED,failure:_react_action_constants.mail.DOCUMENT_FETCH_FAILED},{documentId:a,startPage:n,endPage:c})}function getDocument(t,e,a){var n=e.success,c=e.failure,r=a.documentId,s=a.startPage,o=a.endPage;return t.mailAPIClient.request("document.fetch",{documentId:r,startPage:s,endPage:o},{strategy:_mail_api_client2.default.STRATEGIES.BROWSER_TO_JEDI}).then(function(e){t.dispatch(n,{response:e,documentId:r})}).catch(function(e){t.dispatch(c,{documentId:r,error:e,startPage:s,endPage:o})})}function saveAttachmentPreviewUiState(t,e){var a=e.attachmentId,n=e.uiState;t.dispatch(_react_action_constants.mail.ATTACHMENT_PREVIEW_STATE_SAVE_REQUESTED,{attachmentId:a,uiState:n})}function closeAttachmentPreview(t,e){var a=e.attachmentId,n=t.getStore(_pages2.default).getActivePageRoute(),c=(0,_list.getListIdFromRoute)(n),r=n.params.mid||n.params.groupId||(0,_message.getMessageIdFromAttachmentId)(a);t.dispatch(_react_action_constants.mail.ATTACHMENT_PREVIEW_CLOSED,{groupId:r,listId:c})}function switchAttachmentPreviewToFullScreen(t){t.dispatch(_react_action_constants.mail.ATTACHMENT_PREVIEW_SWITCH_TO_FULL_SCREEN)}function downloadAttachmentFromPreview(t,e){var a=e.attachment;t.dispatch(_react_action_constants.mail.ATTACHMENT_PREVIEW_DOWNLOADED,{attachment:a})}exports.__esModule=!0,exports.previewNextAttachment=previewNextAttachment,exports.previewPreviousAttachment=previewPreviousAttachment,exports.previewAttachment=previewAttachment,exports.zoomAttachment=zoomAttachment,exports.openAttachmentLink=openAttachmentLink,exports.downloadAttachment=downloadAttachment,exports.fetchDocumentPages=fetchDocumentPages,exports.refreshDocumentPage=refreshDocumentPage,exports.retryFetchDocument=retryFetchDocument,exports.saveAttachmentPreviewUiState=saveAttachmentPreviewUiState,exports.closeAttachmentPreview=closeAttachmentPreview,exports.switchAttachmentPreviewToFullScreen=switchAttachmentPreviewToFullScreen,exports.downloadAttachmentFromPreview=downloadAttachmentFromPreview;var _react_action_constants=require("../platform/react_action_constants"),_mail_api_client=require("../platform/mail_api_client"),_mail_api_client2=_interopRequireDefault(_mail_api_client),_mail_constants=require("../platform/mail_constants"),_mail=require("../stores/mail"),_mail2=_interopRequireDefault(_mail),_message=require("../platform/utils/message"),_attachments=require("../platform/utils/attachments"),_pages=require("../stores/pages"),_pages2=_interopRequireDefault(_pages),_list=require("../platform/utils/list"),_reducers_selectors=require("../reducers_selectors");
},{"../platform/mail_api_client":"./platform/mail_api_client","../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/attachments":"./platform/utils/attachments","../platform/utils/list":"./platform/utils/list","../platform/utils/message":"./platform/utils/message","../reducers_selectors":"./reducers_selectors","../stores/mail":"./stores/mail","../stores/pages":"./stores/pages"}],"./actions/folder":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _shouldPerformAsync(e,t){var a=e.config.bulkActionDialogThreshold;return t>=a}function getFolderListUpdateQuery(e,t){var a=t.folderId,o="folderId:"+a+" count:"+BULK_LIMIT;return e===_mail_constants.BulkActionTypes.MARK_READ&&(o+=" is:unread"),o}function createFolder(e,t){var a=e.getStore(_user_preferences2.default).getMailboxes()[0].id,o=t.accountId,r=t.folderName;return e.dispatch(_react_action_constants.mail.CREATE_FOLDER_REQUESTED,t),e.mailAPIClient.request("folders.create",{mailboxId:a,folderName:r,accountId:o}).then(function(t){e.dispatch(_react_action_constants.mail.CREATE_FOLDER_SUCCEEDED,{folder:t.folder})}).catch(function(t){e.dispatch(_react_action_constants.mail.CREATE_FOLDER_FAILED,{folder:{name:r},error:t})})}function deleteFolder(e,t){var a=e.getStore(_pages2.default).getActivePageRoute(),o=(0,_list.getListIdFromRoute)(a),r=e.getStore(_user_preferences2.default).getMailboxes()[0].id,s=t.folder;if((0,_list.listIdContainsFolderId)(o,s.id)){var n=e.getStore(_mail2.default);e.dispatch(_react_action_constants.mail.DELETE_ACTIVE_FOLDER_REQUESTED,{defaultFolderId:n.getDefaultFolderForAccount(n.getActiveAccountId()).id})}else e.dispatch(_react_action_constants.mail.DELETE_FOLDER_REQUESTED,t);return e.mailAPIClient.request("folders.delete",{mailboxId:r,folderId:s.id}).then(function(){e.dispatch(_react_action_constants.mail.DELETE_FOLDER_SUCCEEDED,t)}).catch(function(a){e.dispatch(_react_action_constants.mail.DELETE_FOLDER_FAILED,Object.assign({},t,{error:a}))})}function renameFolder(e,t){var a=t.folderId,o=t.folderName,r=e.getStore(_user_preferences2.default).getMailboxes()[0].id,s=e.getStore(_mail2.default).getFolder(a).name,n=o.substr(o.lastIndexOf("/")+1);return e.dispatch(_react_action_constants.mail.RENAME_FOLDER_REQUESTED,{folderId:a,folderName:o}),e.mailAPIClient.request("folders.rename",{mailboxId:r,folderId:a,folderName:o}).then(function(t){e.dispatch(_react_action_constants.mail.RENAME_FOLDER_SUCCEEDED,{newFolderName:n,folderId:t.folder.id,originalFolderName:s})}).catch(function(t){e.dispatch(_react_action_constants.mail.RENAME_FOLDER_FAILED,{newFolderName:n,originalFolderName:s,error:t})})}function markFolderAsRead(e,t){var a=e.getStore(_user_preferences2.default).getMailboxes()[0].id,o=t.folder,r=o.id,s=o.unread,n=(0,_list.getListIdFromFolderId)(r),i=Math.min(s,BULK_LIMIT),c=_shouldPerformAsync(e,i),_=Object.assign({},t,{mailboxId:a,listId:n,async:c,count:i,actionType:_mail_constants.BulkActionTypes.MARK_READ,successActionType:_react_action_constants.mail.MARK_READ_FOLDER_SUCCEEDED,failureActionType:_react_action_constants.mail.MARK_READ_FOLDER_FAILED});return e.dispatch(_react_action_constants.mail.MARK_READ_FOLDER_REQUESTED,_),e.mailAPIClient.request("folderList.update",[{mailboxId:a,query:getFolderListUpdateQuery(_mail_constants.BulkActionTypes.MARK_READ,{folderId:r}),flags:{read:!0},async:c}]).then(function(t){c?e.dispatch(_react_action_constants.mail.BULK_PROGRESS_RECEIVED,{task:t.task}):e.dispatch(_react_action_constants.mail.MARK_READ_FOLDER_SUCCEEDED,_)}).catch(function(t){e.dispatch(_react_action_constants.mail.MARK_READ_FOLDER_FAILED,Object.assign({},_,{error:t}))})}function archiveAllMessages(e,t){var a=e.getStore(_user_preferences2.default).getMailboxes()[0].id,o=e.getStore(_mail2.default),r=t.folder,s=r.id,n=r.accountId,i=r.total,c=(0,_list.getListIdFromFolderId)(s),_=_mail_constants.FolderTypes.ARCHIVE,l=Math.min(i,BULK_LIMIT),d=_shouldPerformAsync(e,l),E=Object.assign({},t,{mailboxId:a,listId:c,destinationFolderType:_,async:d,count:l,actionType:_mail_constants.BulkActionTypes.ARCHIVE,successActionType:_react_action_constants.mail.ARCHIVE_FOLDER_SUCCEEDED,failureActionType:_react_action_constants.mail.ARCHIVE_FOLDER_FAILED}),u={mailboxId:a,query:getFolderListUpdateQuery(_mail_constants.BulkActionTypes.ARCHIVE,{folderId:s}),destinationFolderId:o.getFolderIdForAccount(_,n),async:d};return e.dispatch(_react_action_constants.mail.ARCHIVE_FOLDER_REQUESTED,E),e.mailAPIClient.request("folderList.update",[u]).then(function(t){d?e.dispatch(_react_action_constants.mail.BULK_PROGRESS_RECEIVED,{task:t.task}):e.dispatch(_react_action_constants.mail.ARCHIVE_FOLDER_SUCCEEDED,E)}).catch(function(t){e.dispatch(_react_action_constants.mail.ARCHIVE_FOLDER_FAILED,Object.assign({},E,{error:t}))})}function deleteAllMessages(e,t){var a=e.getStore(_user_preferences2.default).getMailboxes()[0].id,o=e.getStore(_mail2.default),r=t.folder,s=r.id,n=r.accountId,i=r.total,c=(0,_list.getListIdFromFolderId)(s),_=(0,_folder.getPrimaryFolderType)(r),l=(0,_folder.isPermDeleteFolderType)(_),d=Math.min(i,BULK_LIMIT),E=_shouldPerformAsync(e,d),u=Object.assign({},t,{mailboxId:a,listId:c,permanent:l,async:E,count:d,actionType:_mail_constants.BulkActionTypes.DELETE,successActionType:_react_action_constants.mail.CLEAR_FOLDER_SUCCEEDED,failureActionType:_react_action_constants.mail.CLEAR_FOLDER_FAILED}),f={mailboxId:a,folderId:s,async:E,isConversation:!1},m=void 0;return l?m="folderList.delete":(m="folderList.update",f.query=getFolderListUpdateQuery(_mail_constants.BulkActionTypes.DELETE,{folderId:s}),f.destinationFolderId=o.getFolderIdForAccount(_mail_constants.FolderTypes.TRASH,n)),e.dispatch(_react_action_constants.mail.CLEAR_FOLDER_REQUESTED,u),e.mailAPIClient.request(m,[f]).then(function(t){E?e.dispatch(_react_action_constants.mail.BULK_PROGRESS_RECEIVED,{task:t.task}):e.dispatch(_react_action_constants.mail.CLEAR_FOLDER_SUCCEEDED,u)}).catch(function(t){e.dispatch(_react_action_constants.mail.CLEAR_FOLDER_FAILED,Object.assign({},u,{error:t}))})}function showFolderMenu(e){e.dispatch(_react_action_constants.mail.FOLDER_CONTEXT_MENU_REQUESTED)}function toggleAccountsList(e){e.dispatch(_react_action_constants.mail.EXPAND_ACCOUNT_LIST)}exports.__esModule=!0,exports.BULK_LIMIT=void 0,exports.getFolderListUpdateQuery=getFolderListUpdateQuery,exports.createFolder=createFolder,exports.deleteFolder=deleteFolder,exports.renameFolder=renameFolder,exports.markFolderAsRead=markFolderAsRead,exports.archiveAllMessages=archiveAllMessages,exports.deleteAllMessages=deleteAllMessages,exports.showFolderMenu=showFolderMenu,exports.toggleAccountsList=toggleAccountsList;var _user_preferences=require("../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_mail=require("../stores/mail"),_mail2=_interopRequireDefault(_mail),_react_action_constants=require("../platform/react_action_constants"),_pages=require("../stores/pages"),_pages2=_interopRequireDefault(_pages),_list=require("../platform/utils/list"),_mail_constants=require("../platform/mail_constants"),_folder=require("../platform/utils/folder"),BULK_LIMIT=exports.BULK_LIMIT=1e4;
},{"../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/folder":"./platform/utils/folder","../platform/utils/list":"./platform/utils/list","../stores/mail":"./stores/mail","../stores/pages":"./stores/pages","../stores/user_preferences":"./stores/user_preferences"}],"./actions/folder_message_list":[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s.default=e,s}exports.__esModule=!0,exports.ListActions=void 0;var _message_group=require("./message_group"),MessageGroupActions=_interopRequireWildcard(_message_group),_actions=require("../molecules/message_list/actions"),MessageListActions=_interopRequireWildcard(_actions),ListActions=exports.ListActions={retryLoading:MessageListActions.retryLoading,archiveMessageGroups:MessageGroupActions.archiveMessageGroups,restoreMessageGroups:MessageGroupActions.restoreMessageGroups,deleteMessageGroups:MessageGroupActions.deleteMessageGroups,moveMessageGroups:MessageGroupActions.moveMessageGroups,markMessageGroupsAsSpam:MessageGroupActions.markMessageGroupsAsSpam,markMessageGroupsAsNotSpam:MessageGroupActions.markMessageGroupsAsNotSpam,markMessageGroupsAsRead:MessageGroupActions.markMessageGroupsAsRead,markMessageGroupsAsUnread:MessageGroupActions.markMessageGroupsAsUnread,markMessageGroupsAsFlagged:MessageGroupActions.markMessageGroupsAsFlagged,markMessageGroupsAsUnflagged:MessageGroupActions.markMessageGroupsAsUnflagged,changeSortOrder:MessageListActions.changeSortOrder,loadMoreMessagesAfterScroll:MessageListActions.loadMoreMessagesAfterScroll,toggleSelection:MessageListActions.toggleSelection,selectAll:MessageListActions.selectAll,selectRange:MessageListActions.selectRange,selectNone:MessageListActions.selectNone,selectRead:MessageListActions.selectRead,selectUnread:MessageListActions.selectUnread,selectStarred:MessageListActions.selectStarred,selectUnstarred:MessageListActions.selectUnstarred,moveCursor:MessageListActions.moveCursor,selectMove:MessageListActions.selectMove,itemDragStart:MessageListActions.itemDragStart};
},{"../molecules/message_list/actions":"./molecules/message_list/actions","./message_group":"./actions/message_group"}],"./actions/message":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function isBulkAction(e,s){var t=e.config.bulkActionDialogThreshold;return s.length>=t}function loadMoreMessagesIfNeeded(e,s){var t=s.listId,a=s.currentGroupId,o=e.config.messageScrollLoadThreshold,r=e.getStore(_mail2.default),n=r.getCurrentItemIndex(a,t),i=r.getItemListIdsForList(t),c=r.hasMoreItems(t),d=i.length-n,l=e.getStore(_pages2.default).getActivePageRoute().name,_=l===_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST;if(c&&d<=o)return _?_search_message_list.ListActions.loadMoreMessagesAfterScroll(e,{listId:t,offset:i.length}):_folder_message_list.ListActions.loadMoreMessagesAfterScroll(e,{listId:t,offset:i.length,count:_mail_constants.DEFAULT_MESSAGES_TO_FETCH})}function requestMoveToFolderId(e,s,t){var a=s.sourceListId,o=s.fromMessageGroupView,r=s.destinationFolderId,n=s.messageIds,i=s.messageGroupIds,c=s.nextGroupId,d=t.pendingActionType,l=t.successActionType,_=t.failureActionType,u=e.getStore(_user_preferences2.default),m=u.getMailboxes()[0].id,g=e.getStore(_mail2.default),p=i.length,E=g.getFolder(r),S=isBulkAction(e,i),I=e.config.conversations;if(n=moveRestrictionFilteredMessages(e,a,r,n,o),0!==n.length){var M={undoMap:g.groupMessagesByFolder(n),destinationFolderType:(0,_folder.getPrimaryFolderType)(E),actionCreator:undoMove};return e.dispatch(d,{messageIds:n,destinationFolderId:r,undoPayload:M,async:S,count:p,folder:E,conversations:I,nextGroupId:c,listId:a,successActionType:l,failureActionType:_}),e.mailAPIClient.request("messages.update",[{mailboxId:m,destinationFolderId:r,messageIds:n,async:S}]).then(function(s){var t=s.results;S?t.forEach(function(s){e.dispatch(_react_action_constants.mail.BULK_PROGRESS_RECEIVED,{task:s.task})}):e.dispatch(l,{listId:a,messageGroupIds:i,folder:E,count:p,conversations:I,undoPayload:M})}).catch(function(s){return e.dispatch(_,{error:s,folder:E,count:p,conversations:I})})}}function getFolderMovePayload(e,s){var t=s.messageIds,a=s.sourceListId,o=s.fromMessageGroupView,r=s.destinationFolderType,n=s.flags,i=s.async,c=e.getStore(_user_preferences2.default),d=e.getStore(_mail2.default),l=c.getMailboxes()[0].id,_=d.getFolderIdMapFromFolderType(t,r);return Object.keys(_).map(function(s){var t=_[s];return t=moveRestrictionFilteredMessages(e,a,s,t,o),Object.assign({mailboxId:l,destinationFolderId:s,messageIds:t,async:i},n&&{flags:n})})}function requestMoveToFolderType(e,s,t){var a=s.sourceListId,o=s.fromMessageGroupView,r=s.destinationFolderType,n=s.messageIds,i=s.messageGroupIds,c=s.flags,d=(s.nextGroupId,t.pendingActionType),l=t.successActionType,_=t.failureActionType,u=isBulkAction(e,i),m=getFolderMovePayload(e,{sourceListId:a,destinationFolderType:r,messageIds:n,fromMessageGroupView:o,flags:c,async:u}),g="messages.update";if(n=m.reduce(function(e,s){return e.concat(s.messageIds)},[]),0!==n.length){var p=e.getStore(_mail2.default),E={undoMap:p.groupMessagesByFolder(n),destinationFolderType:r,actionCreator:undoMove},S=i.length,I=e.config.conversations;return e.dispatch(d,{messageIds:n,destinationFolderType:r,async:u,successActionType:l,failureActionType:_,undoPayload:E,count:S,conversations:I,listId:a}),e.mailAPIClient.request(g,m).then(function(s){var t=s.results;u?t.forEach(function(s){e.dispatch(_react_action_constants.mail.BULK_PROGRESS_RECEIVED,{task:s.task})}):e.dispatch(l,{count:S,listId:a,messageGroupIds:i,undoPayload:E,conversations:I})}).catch(function(s){return e.dispatch(_,{error:s,count:S,conversations:I})})}}function filterSentMessages(e){return(0,_message.filterMessagesByFolderType)(e,function(e){return e!==_mail_constants.FolderTypes.SENT})}function filterMutuallyExclusiveMessagesIfNecessary(e,s,t){if(s&&t){var a,o=(0,_folder.getPrimaryFolderType)(s),r=(a={},a[_mail_constants.FolderTypes.TRASH]=!0,a[_mail_constants.FolderTypes.BULK]=!0,a);return r[o]?(0,_message.filterMessagesByFolderType)(e,function(e){return e===o}):(0,_message.filterMessagesByFolderType)(e,function(e){return!r[e]})}return e}function filterSentMessagesForMoveIfNecessary(e,s){return s&&(0,_folder.getPrimaryFolderType)(s)===_mail_constants.FolderTypes.SENT||!s?e:filterSentMessages(e)}function filterWithUniversalMoveRestrictions(e,s){return e.filter(function(e){var t=(0,_folder.getPrimaryFolderType)(e.folder),a=!0;return universalMoveRestrictions.some(function(e){var o=!1;return e.hasOwnProperty("moveFrom")&&e.moveFrom===t?(a=e.allow,o=!0):e.hasOwnProperty("moveTo")&&e.moveTo===s&&(a=e.allow,o=!0),o}),a})}function moveRestrictionFilteredMessages(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments[2],a=arguments[3],o=arguments[4],r=e.getStore(_mail2.default),n=(0,_folder.getPrimaryFolderType)(r.getFolder(t)),i=a.map(function(e){return r.getMessageById(e)}),c=(0,_list.getFolderIdFromListId)(s),d=c&&r.getFolder(c);return o?n!==_mail_constants.FolderTypes.TRASH&&(i=filterSentMessagesForMoveIfNecessary(i,d)):(i=filterMutuallyExclusiveMessagesIfNecessary(i,d,e.config.conversations),i=filterSentMessagesForMoveIfNecessary(i,d)),filterWithUniversalMoveRestrictions(i,n).map(function(e){var s=e.id;return s})}function getMessageBodies(e,s){var t=s.listId,a=s.messageIds,o=void 0===a?[]:a,r=s.full,n=void 0!==r&&r,i=s.secure,c=void 0===i||i,d=s.apiMethod,l=void 0===d?"messages.getBodies":d,_=e.config.fetchFullBody,u=e.getStore(_mail2.default),m=e.getStore(_user_preferences2.default),g=m.getMailboxes()[0].id,p=m.getShowImageSetting(),E=(0,_reducers_selectors.selectors)(e.store.getState()),S=E.getMessageBodiesSelectors,I=S(),M=I.hasFullBody,A=I.isSecureMessage,f=I.getState,T=o.filter(function(e){return f(e)!==_mail_constants.RecordStates.LOADING}).reduce(function(e,s){var t=e.messageIds,a=e.draftMessageIds;return u.isDraftMessage(s)?a.push(s):!A(s)&&M(s)||t.push(s),{messageIds:t,draftMessageIds:a}},{messageIds:[],draftMessageIds:[]}),y=T.messageIds,F=T.draftMessageIds;return y.length||F.length?(e.dispatch(_react_action_constants.mail.MESSAGE_BODIES_REQUESTED,{listId:t,messageIds:o}),e.mailAPIClient.request(l,{mailboxId:g,messageIds:y,draftMessageIds:F,full:n||_,secure:c&&p}).then(function(s){s.error&&s.error.messageIds&&s.error.messageIds.length&&e.dispatch(_react_action_constants.mail.MESSAGE_BODIES_FAILED,{listId:t,messageIds:s.error.messageIds}),e.dispatch(_react_action_constants.mail.MESSAGE_BODIES_RECEIVED,{listId:t,full:n||_,secure:c&&p,messageBodiesMap:s.result.messageBodiesMap,messageMetadataMap:s.result.messageMetadataMap})}).catch(function(s){e.dispatch(_react_action_constants.mail.MESSAGE_BODIES_FAILED,{listId:t,messageIds:o,error:s})})):Promise.resolve()}function requestUpdateFlags(e,s,t){var a=s.messageIds,o=s.flags,r=s.itemId,n=t.pendingActionType,i=t.successActionType,c=t.failureActionType,d=e.getStore(_user_preferences2.default),l=d.getMailboxes()[0].id,_=e.getStore(_pages2.default).getActivePageRoute(),u=(0,_list.getListIdFromRoute)(_);if(e.dispatch(n,{messageIds:a,itemId:r,listId:u}),0!==a.length)return e.mailAPIClient.request("messages.update",[{mailboxId:l,messageIds:a,flags:o}]).then(function(){return e.dispatch(i)}).catch(function(s){return e.dispatch(c,{error:s})})}function moveMessages(e,s){var t=s.listId,a=s.destinationFolderId,o=s.messageIds,r=s.messageGroupIds;return requestMoveToFolderId(e,{sourceListId:t,destinationFolderId:a,messageIds:o,messageGroupIds:r},{pendingActionType:_react_action_constants.mail.MESSAGES_MOVE_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_MOVE_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_MOVE_FAILED})}function moveMessagesFromView(e,s){var t=s.listId,a=s.destinationFolderId,o=s.messageIds,r=s.messageGroupIds;return requestMoveToFolderId(e,{sourceListId:t,fromMessageGroupView:!0,destinationFolderId:a,messageIds:o,messageGroupIds:r},{pendingActionType:_react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_FAILED})}function archiveMessages(e,s){var t=s.listId,a=s.messageIds,o=s.messageGroupIds;return requestMoveToFolderType(e,{destinationFolderType:_mail_constants.FolderTypes.ARCHIVE,sourceListId:t,messageIds:a,messageGroupIds:o},{pendingActionType:_react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_ARCHIVE_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_ARCHIVE_FAILED})}function archiveMessagesFromView(e,s){var t=s.listId,a=s.messageIds,o=s.messageGroupIds;return requestMoveToFolderType(e,{fromMessageGroupView:!0,destinationFolderType:_mail_constants.FolderTypes.ARCHIVE,messageIds:a,messageGroupIds:o,sourceListId:t},{pendingActionType:_react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_FAILED})}function restoreMessages(e,s){var t=s.listId,a=s.messageIds,o=s.messageGroupIds;return requestMoveToFolderType(e,{destinationFolderType:_mail_constants.FolderTypes.INBOX,sourceListId:t,messageIds:a,messageGroupIds:o},{pendingActionType:_react_action_constants.mail.MESSAGES_RESTORE_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_RESTORE_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_RESTORE_FAILED})}function restoreMessagesFromView(e,s){var t=s.listId,a=s.messageIds,o=s.messageGroupIds;return requestMoveToFolderType(e,{destinationFolderType:_mail_constants.FolderTypes.INBOX,fromMessageGroupView:!0,messageIds:a,messageGroupIds:o,sourceListId:t},{pendingActionType:_react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_FAILED})}function helperRequestDelete(e,s,t){var a=t.pendingActionType,o=t.successActionType,r=t.failureActionType,n=e.getStore(_mail2.default),i=s.messageGroupIds,c=s.permanent,d=s.listId,l=s.fromMessageGroupView,_=e.config.conversations,u=isBulkAction(e,i),m=s.messageIds,g=void 0,p=void 0,E=e.getStore(_pages2.default).getActivePageRoute(),S=E.name===_mail_constants.RouteNames.SEARCH,I=void 0;if(S){var M=null,A=null,f=(0,_message.filterMessagesByFolderType)(m.map(function(e){return n.getMessageById(e)}),_folder.isPermDeleteFolderType).map(function(e){var s=e.id;return s}),T=(0,_message.filterMessagesByFolderType)(m.map(function(e){return n.getMessageById(e)}),function(e){return!(0,_folder.isPermDeleteFolderType)(e)}).map(function(e){var s=e.id;return s});if(T.length&&(M=getFolderMovePayload(e,{destinationFolderType:_mail_constants.FolderTypes.TRASH,sourceListId:d,fromMessageGroupView:l,messageIds:T,async:u}),I={undoMap:n.groupMessagesByFolder(T),destinationFolderType:_mail_constants.FolderTypes.TRASH,actionCreator:undoMove}),f.length){var y=e.getStore(_user_preferences2.default),F=y.getMailboxes()[0].id;A={mailboxId:F,messageIds:f,async:u}}g="messages.trashAndDelete",p={trashPayload:M,deletePayload:A}}else{if(c){var R=e.getStore(_user_preferences2.default),v=R.getMailboxes()[0].id;p={mailboxId:v,messageIds:m,async:u},g="messages.delete"}else p=getFolderMovePayload(e,{destinationFolderType:_mail_constants.FolderTypes.TRASH,sourceListId:d,fromMessageGroupView:l,messageIds:m,async:u}),g="messages.update",m=p.reduce(function(e,s){var t=s.messageIds;return e.concat(t)},[]);I={undoMap:n.groupMessagesByFolder(m),destinationFolderType:_mail_constants.FolderTypes.TRASH,actionCreator:undoMove}}var G=i.length;if(0!==m.length)return e.dispatch(a,Object.assign({},s,{messageIds:m,successActionType:o,failureActionType:r,count:G,undoPayload:I,conversations:_,async:u})),e.mailAPIClient.request(g,p).then(function(s){var t=s.results;if(u)t.forEach(function(s){s.task&&e.dispatch(_react_action_constants.mail.BULK_PROGRESS_RECEIVED,{task:s.task})});else if(e.config.unsubscribe&&1===Object.keys(n.getAllAccounts()).length&&!c&&G>=2){var a=e.getStore(_user_preferences2.default).getUnsubscribePreferences(),r=Date.now()-a.unsubscribeTimestamp,l=e.config.unsubInterval;if(a.showUnsubscribeNotification&&r&&r>l){var m=i.map(function(e){return n.getOriginalMessageGroupSender(e)}).filter(Boolean);e.dispatch(_react_action_constants.mail.MESSAGES_UNSUBSCRIBE_CONTENT_REQUESTED),e.athenaClient.request("unSubscribeItems",{originalSendersInfo:m}).then(function(s){s&&s.length>0?e.dispatch(_react_action_constants.mail.MESSAGES_UNSUBSCRIBE_CONTENT_RECEIVED,{unSubscribeList:s,undoPayload:{undoMap:I.undoMap,destinationFolderType:_mail_constants.FolderTypes.TRASH,actionCreatorIdentifier:"undoMove"},deleteItemCount:G,numListsPreviouslyCleaned:a.numUnsubscribedItems||0}):e.dispatch(o,{listId:d,messageGroupIds:i,undoPayload:I,permanent:c,count:G,conversations:_})}).catch(function(){e.dispatch(o,{listId:d,messageGroupIds:i,undoPayload:I,permanent:c,count:G,conversations:_})})}else e.dispatch(o,{listId:d,messageGroupIds:i,undoPayload:I,permanent:c,count:G,conversations:_})}else e.dispatch(o,{listId:d,messageGroupIds:i,undoPayload:I,permanent:c,count:G,conversations:_})}).catch(function(s){return e.dispatch(r,{error:s,count:G,conversations:_,permanent:c})})}function deleteMessagesFromView(e,s){var t=s.listId,a=s.messageIds,o=s.messageGroupIds,r=s.permanent,n=s.async;return helperRequestDelete(e,{messageIds:a,fromMessageGroupView:!0,messageGroupIds:o,listId:t,permanent:r,async:n},{pendingActionType:_react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_FAILED})}function undoMove(e,s){var t=s.undoMap,a=e.getStore(_user_preferences2.default),o=e.getStore(_checkmail2.default),r=e.getStore(_pages2.default).getActivePageRoute(),n=(0,_list.getListIdFromRoute)(r),i=(0,_list.getFolderIdFromListId)(n),c=(0,_list.getSortOrderFromListId)(n),d=a.getMailboxes()[0].id,l=e.config.conversations,_=200;return e.dispatch(_react_action_constants.mail.UNDO_MOVE_REQUESTED,{undoMap:t}),e.mailAPIClient.request("messages.undo",{mailboxId:d,undoMap:t}).then(function(){return r.name===_mail_constants.RouteNames.SEARCH?e.mailAPIClient.request("folders.get",{mailboxId:d}).then(function(s){var t=s.folders;return(0,_actions.openSearchFromList)(e,{listId:n,folders:t})}):e.mailAPIClient.request("undo.list",{mailboxId:d,count:_,sortOrder:c,folderId:i,conversationsMode:l}).then(function(s){var t=s.folders,a=s.messageGroupList,r=o.getStaleFolderIds(t);e.dispatch(_react_action_constants.mail.UNDO_MOVE_SUCCEEDED,{folders:t,messageGroupList:a,listId:n,count:_,staleFolderIds:r})})}).catch(function(){e.dispatch(_react_action_constants.mail.UNDO_MOVE_FAILED)})}function markAsSpam(e,s){var t=s.listId,a=s.messageIds,o=s.messageGroupIds;return requestMoveToFolderType(e,{destinationFolderType:_mail_constants.FolderTypes.BULK,messageIds:a,messageGroupIds:o,sourceListId:t,flags:{spam:!0,read:!0}},{pendingActionType:_react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_MARK_SPAM_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_MARK_SPAM_FAILED})}function markAsNotSpam(e,s){var t=s.listId,a=s.messageIds,o=s.messageGroupIds;return requestMoveToFolderType(e,{destinationFolderType:_mail_constants.FolderTypes.INBOX,messageIds:a,messageGroupIds:o,sourceListId:t,flags:{ham:!0}},{pendingActionType:_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FAILED})}function markAsSpamFromView(e,s){var t=s.listId,a=s.messageIds,o=s.messageGroupIds;return requestMoveToFolderType(e,{destinationFolderType:_mail_constants.FolderTypes.BULK,fromMessageGroupView:!0,messageIds:a,messageGroupIds:o,sourceListId:t,flags:{spam:!0,read:!0}},{pendingActionType:_react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_FAILED})}function markAsNotSpamFromView(e,s){var t=s.listId,a=s.messageIds,o=s.messageGroupIds;return requestMoveToFolderType(e,{destinationFolderType:_mail_constants.FolderTypes.INBOX,fromMessageGroupView:!0,messageIds:a,messageGroupIds:o,sourceListId:t,flags:{ham:!0}},{pendingActionType:_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_FAILED})}function markAsRead(e,s){var t=s.messageIds,a=s.itemId;return requestUpdateFlags(e,{messageIds:t,itemId:a,flags:{read:!0}},{pendingActionType:_react_action_constants.mail.MESSAGES_MARK_READ_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_MARK_READ_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_MARK_READ_FAILED})}function markAsUnread(e,s){var t=s.messageIds,a=s.itemId;return requestUpdateFlags(e,{messageIds:t,itemId:a,flags:{read:!1}},{pendingActionType:_react_action_constants.mail.MESSAGES_MARK_UNREAD_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_MARK_UNREAD_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_MARK_UNREAD_FAILED})}function markAsFlagged(e,s){var t=s.messageIds,a=s.itemId;return requestUpdateFlags(e,{messageIds:t,itemId:a,flags:{flagged:!0}},{pendingActionType:_react_action_constants.mail.MESSAGES_MARK_STARRED_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_MARK_STARRED_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_MARK_STARRED_FAILED})}function markAsUnflagged(e,s){var t=s.messageIds,a=s.itemId;return requestUpdateFlags(e,{messageIds:t,itemId:a,flags:{flagged:!1}},{pendingActionType:_react_action_constants.mail.MESSAGES_MARK_UNSTARRED_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_MARK_UNSTARRED_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_MARK_UNSTARRED_FAILED})}function _messageReplyOrForward(e,s,t,a){var o=e.getStore(_pages2.default).getActivePageRoute(),r=(0,_list.getListIdFromRoute)(o),n=e.getStore(_mail2.default),i=e.getStore(_user_preferences2.default),c=i.getMailboxes()[0].id,d=e.config.conversations,l=n.getComposeDataMatchingInReplyTo(t.headers.messageIdRfc822),_=d?l.filter(function(e){return s===e.groupId})[0]:l[0],u=_?_.csid:(0,_utils.generateUID)(),m=(0,_reducers_selectors.selectors)(e.store.getState()),g=m.getMessageBodiesSelectors,p=g(),E=p.hasFullBody,S=p.isSecureMessage,I=p.get,M=S(t.id)||!E(t.id);return M?e.mailAPIClient.request("messages.getBodies",{mailboxId:c,messageIds:[t.id],full:!0,secure:!1}).then(function(o){var n=o.result,i=o.error,c=void 0===i?{}:i;if(c.messageIds&&c.messageIds.length)throw new Error("Unable to fetch message "+t.id);t=Object.assign({},t,{body:n.messageBodiesMap[t.id],attachments:n.messageMetadataMap[t.id].attachments}),e.dispatch(_react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED,{listId:r,groupId:s,messageGroupId:s,composeMode:a,message:t,csid:u})}).catch(function(){}):e.dispatch(_react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED,{csid:u,listId:r,composeMode:a,messageGroupId:s,groupId:s,message:Object.assign({},t,{body:I(t.id)})})}function reply(e,s){var t=s.messageGroupId,a=s.message;return _messageReplyOrForward(e,t,a,ComposeModes.REPLY)}function replyAll(e,s){var t=s.messageGroupId,a=s.message;return _messageReplyOrForward(e,t,a,ComposeModes.REPLY_ALL)}function forward(e,s){var t=s.messageGroupId,a=s.message;return _messageReplyOrForward(e,t,a,ComposeModes.FORWARD)}function openComposeWithMailtoFields(e,s){var t=s.mailtoAttr,a=s.message,o=(0,_utils.generateUID)();e.dispatch(_react_action_constants.mail.MAILTO_ACTION_REQUESTED,{csid:o,mailtoAttr:t,message:a})}function printMessage(e,s){var t=s.messageGroupId,a=s.message,o=null,r=e.getStore(_pages2.default).getActivePageRoute(),n=(0,_list.getListIdFromRoute)(r),i=(0,_actions.openMessageGroup)(e,{route:r});return i.then(function(){a&&a.id&&(o=a.id),e.dispatch(_react_action_constants.mail.MESSAGE_PRINT_REQUESTED,{messageGroupId:t,mId:o,listId:n})}).catch(function(){e.dispatch(_react_action_constants.mail.MESSAGE_PRINT_FAILED,{messageGroupId:t,listId:n})})}function openRawMessage(e,s){var t=s.messageId,a=e.mailAPIClient,o=a.wssid,r=a.appId,n=a.ymreqidGenerator.generate(),i=e.getStore(_user_preferences2.default),c=i.getMailboxes()[0].id,d="https://apis.mail.yahoo.com/ws/v3/mailboxes/@.id=="+c+"/messages/@.id=="+t+"/content/rawplaintext?appId="+r+"&ymreqid="+n+"&wssid="+o;window.open(d,"_blank")}function printMessageSuccess(e,s){var t=s.printId;e.dispatch(_react_action_constants.mail.MESSAGE_PRINT_SUCCEEDED,{printId:t})}function clickMessageBodyLink(e,s){var t=s.hrefLink,a=s.message;e.dispatch(_react_action_constants.mail.MESSAGE_BODY_LINK_CLICKED,{hrefLink:t,message:a})}exports.__esModule=!0,exports.loadMoreMessagesIfNeeded=loadMoreMessagesIfNeeded,exports.getMessageBodies=getMessageBodies,exports.moveMessages=moveMessages,exports.moveMessagesFromView=moveMessagesFromView,exports.archiveMessages=archiveMessages,exports.archiveMessagesFromView=archiveMessagesFromView,exports.restoreMessages=restoreMessages,exports.restoreMessagesFromView=restoreMessagesFromView,exports.helperRequestDelete=helperRequestDelete,exports.deleteMessagesFromView=deleteMessagesFromView,exports.undoMove=undoMove,exports.markAsSpam=markAsSpam,exports.markAsNotSpam=markAsNotSpam,exports.markAsSpamFromView=markAsSpamFromView,exports.markAsNotSpamFromView=markAsNotSpamFromView,exports.markAsRead=markAsRead,exports.markAsUnread=markAsUnread,exports.markAsFlagged=markAsFlagged,exports.markAsUnflagged=markAsUnflagged,exports.reply=reply,exports.replyAll=replyAll,exports.forward=forward,exports.openComposeWithMailtoFields=openComposeWithMailtoFields,exports.printMessage=printMessage,exports.openRawMessage=openRawMessage,exports.printMessageSuccess=printMessageSuccess,exports.clickMessageBodyLink=clickMessageBodyLink;var _react_action_constants=require("../platform/react_action_constants"),_actions=require("../apps/mail/actions"),_mail_constants=require("../platform/mail_constants"),_folder=require("../platform/utils/folder"),_list=require("../platform/utils/list"),_message=require("../platform/utils/message"),_mail=require("../stores/mail"),_mail2=_interopRequireDefault(_mail),_pages=require("../stores/pages"),_pages2=_interopRequireDefault(_pages),_user_preferences=require("../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_checkmail=require("../stores/checkmail"),_checkmail2=_interopRequireDefault(_checkmail),_utils=require("../platform/utils"),_folder_message_list=require("./folder_message_list"),_search_message_list=require("./search_message_list"),_reducers_selectors=require("../reducers_selectors"),universalMoveRestrictions=[{moveFrom:_mail_constants.FolderTypes.DRAFT,allow:!1},{moveTo:_mail_constants.FolderTypes.DRAFT,allow:!1},{moveTo:_mail_constants.FolderTypes.SENT,allow:!1}],ComposeModes=_mail_constants.Compose.Modes;
},{"../apps/mail/actions":"./apps/mail/actions","../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils":"./platform/utils","../platform/utils/folder":"./platform/utils/folder","../platform/utils/list":"./platform/utils/list","../platform/utils/message":"./platform/utils/message","../reducers_selectors":"./reducers_selectors","../stores/checkmail":"./stores/checkmail","../stores/mail":"./stores/mail","../stores/pages":"./stores/pages","../stores/user_preferences":"./stores/user_preferences","./folder_message_list":"./actions/folder_message_list","./search_message_list":"./actions/search_message_list"}],"./actions/message_group":[function(require,module,exports){
"use strict";function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}function _interopRequireWildcard(s){if(s&&s.__esModule)return s;var e={};if(null!=s)for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);return e.default=s,e}function getMessageIds(s,e){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},o=s.getStore(_mail2.default),t=e.map(function(s){var e=o.getMessageGroupById(s);return e.messages.filter(r).map(function(s){return s.id})});return(a=[]).concat.apply(a,t)}function changeAllCardExpansions(s,e){var a=e.listId,r=e.messageGroupId,o=e.newState;s.dispatch(_react_action_constants.mail.MESSAGE_GROUP_ALL_EXPANSIONS_CHANGED,{listId:a,messageGroupId:r,newState:o})}function changeMessageGroupCardExpansions(s,e){var a=e.listId,r=e.messageGroupId,o=e.cardIds,t=e.newState;s.dispatch(_react_action_constants.mail.MESSAGE_CARD_EXPANSION_CHANGED,{listId:a,messageGroupId:r,cardIds:o,newState:t})}function moveMessageGroups(s,e){var a=e.destinationFolderId,r=e.listId,o=e.messageGroupIds;MessageActions.moveMessages(s,{destinationFolderId:a,listId:r,messageIds:getMessageIds(s,o),messageGroupIds:o})}function moveMessageGroupsFromView(s,e){var a=e.destinationFolderId,r=e.listId,o=e.messageGroupIds;MessageActions.moveMessagesFromView(s,{listId:r,destinationFolderId:a,messageIds:getMessageIds(s,o),messageGroupIds:o})}function archiveMessageGroups(s,e){var a=e.listId,r=e.messageGroupIds;MessageActions.archiveMessages(s,{listId:a,messageIds:getMessageIds(s,r),messageGroupIds:r})}function archiveMessageGroupsFromView(s,e){var a=e.messageGroupIds,r=e.listId;MessageActions.archiveMessagesFromView(s,{messageIds:getMessageIds(s,a),messageGroupIds:a,listId:r})}function restoreMessageGroups(s,e){var a=e.listId,r=e.messageGroupIds;MessageActions.restoreMessages(s,{listId:a,messageIds:getMessageIds(s,r),messageGroupIds:r})}function restoreMessageGroupsFromView(s,e){var a=e.listId,r=e.messageGroupIds;MessageActions.restoreMessagesFromView(s,{listId:a,messageIds:getMessageIds(s,r),messageGroupIds:r})}function deleteMessageGroups(s,e){var a=e.listId,r=e.messageGroupIds,o=e.permanent,t=getMessageIds(s,r);if(o){var g=s.getStore(_mail2.default);t=(0,_message2.filterMessagesByFolderType)(t.map(function(s){return g.getMessageById(s)}),function(s){return s===_mail_constants.FolderTypes.TRASH||s===_mail_constants.FolderTypes.DRAFT||s===_mail_constants.FolderTypes.BULK}).map(function(s){var e=s.id;return e})}return MessageActions.helperRequestDelete(s,{listId:a,messageIds:t,messageGroupIds:r,permanent:o},{pendingActionType:_react_action_constants.mail.MESSAGES_DELETE_REQUESTED,successActionType:_react_action_constants.mail.MESSAGES_DELETE_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGES_DELETE_FAILED})}function deleteMessageGroupsFromView(s,e){var a=e.listId,r=e.permanent,o=e.messageGroupIds;MessageActions.deleteMessagesFromView(s,{messageGroupIds:o,messageIds:getMessageIds(s,o),permanent:r,listId:a})}function markMessageGroupsAsSpam(s,e){var a=e.listId,r=e.messageGroupIds;MessageActions.markAsSpam(s,{listId:a,messageIds:getMessageIds(s,r),messageGroupIds:r})}function markMessageGroupsAsNotSpam(s,e){var a=e.listId,r=e.messageGroupIds;MessageActions.markAsNotSpam(s,{listId:a,messageIds:getMessageIds(s,r),messageGroupIds:r})}function markMessageGroupsAsSpamFromView(s,e){var a=e.listId,r=e.messageGroupIds;MessageActions.markAsSpamFromView(s,{listId:a,messageIds:getMessageIds(s,r),messageGroupIds:r})}function markMessageGroupsAsNotSpamFromView(s,e){var a=e.listId,r=e.messageGroupIds;MessageActions.markAsNotSpamFromView(s,{listId:a,messageIds:getMessageIds(s,r),messageGroupIds:r})}function markMessageGroupsAsRead(s,e){var a=e.messageGroupIds;MessageActions.markAsRead(s,{itemId:a[0],messageIds:getMessageIds(s,a,function(s){return!s.flags.read})})}function markMessageGroupsAsUnread(s,e){var a=e.messageGroupIds;MessageActions.markAsUnread(s,{itemId:a[0],messageIds:getMessageIds(s,a,function(s){return s.flags.read})})}function markMessageGroupsAsFlagged(s,e){var a=e.messageGroupIds;MessageActions.markAsFlagged(s,{itemId:a[0],messageIds:getMessageIds(s,a,function(s){return!s.flags.flagged})})}function markMessageGroupsAsUnflagged(s,e){var a=e.messageGroupIds;MessageActions.markAsUnflagged(s,{itemId:a[0],messageIds:getMessageIds(s,a,function(s){return s.flags.flagged})})}function printMessageGroup(s,e){var a=e.messageGroupIds,r=a[0];MessageActions.printMessage(s,{messageGroupId:r})}function printRawMessage(s,e){var a=e.messageGroupIds,r=a[0],o=s.getStore(_mail2.default);MessageActions.openRawMessage(s,{messageId:o.getLastNonDraftMessageByGroupId(r).id})}function replyToLastMessage(s,e){var a=e.messageGroupId,r=s.getStore(_mail2.default),o=r.getLastNonDraftMessageByGroupId(a);MessageActions.reply(s,{messageGroupId:a,message:o})}function replyAllToLastMessage(s,e){var a=e.messageGroupId,r=s.getStore(_mail2.default),o=r.getLastNonDraftMessageByGroupId(a);MessageActions.replyAll(s,{messageGroupId:a,message:o})}function forwardLastMessage(s,e){var a=e.messageGroupId,r=s.getStore(_mail2.default),o=r.getLastNonDraftMessageByGroupId(a);MessageActions.forward(s,{messageGroupId:a,message:o})}function focusMessageCard(s,e){var a=e.card;s.dispatch(_react_action_constants.mail.MESSAGE_CARD_FOCUSED,{card:a})}exports.__esModule=!0,exports.changeAllCardExpansions=changeAllCardExpansions,exports.changeMessageGroupCardExpansions=changeMessageGroupCardExpansions,exports.moveMessageGroups=moveMessageGroups,exports.moveMessageGroupsFromView=moveMessageGroupsFromView,exports.archiveMessageGroups=archiveMessageGroups,exports.archiveMessageGroupsFromView=archiveMessageGroupsFromView,exports.restoreMessageGroups=restoreMessageGroups,exports.restoreMessageGroupsFromView=restoreMessageGroupsFromView,exports.deleteMessageGroups=deleteMessageGroups,exports.deleteMessageGroupsFromView=deleteMessageGroupsFromView,exports.markMessageGroupsAsSpam=markMessageGroupsAsSpam,exports.markMessageGroupsAsNotSpam=markMessageGroupsAsNotSpam,exports.markMessageGroupsAsSpamFromView=markMessageGroupsAsSpamFromView,exports.markMessageGroupsAsNotSpamFromView=markMessageGroupsAsNotSpamFromView,exports.markMessageGroupsAsRead=markMessageGroupsAsRead,exports.markMessageGroupsAsUnread=markMessageGroupsAsUnread,exports.markMessageGroupsAsFlagged=markMessageGroupsAsFlagged,exports.markMessageGroupsAsUnflagged=markMessageGroupsAsUnflagged,exports.printMessageGroup=printMessageGroup,exports.printRawMessage=printRawMessage,exports.replyToLastMessage=replyToLastMessage,exports.replyAllToLastMessage=replyAllToLastMessage,exports.forwardLastMessage=forwardLastMessage,exports.focusMessageCard=focusMessageCard;var _message=require("./message.js"),MessageActions=_interopRequireWildcard(_message),_mail_constants=require("../platform/mail_constants"),_mail=require("../stores/mail"),_mail2=_interopRequireDefault(_mail),_react_action_constants=require("../platform/react_action_constants"),_message2=require("../platform/utils/message");
},{"../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/message":"./platform/utils/message","../stores/mail":"./stores/mail","./message.js":"./actions/message"}],"./actions/navigation":[function(require,module,exports){
"use strict";function _objectWithoutProperties(t,e){var o={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i]);return o}function navigateToNewSponsoredCompose(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.initialSubject,i=void 0===o?"":o,n=e.initialBody,r=void 0===n?"":n,a=_objectWithoutProperties(e,["initialSubject","initialBody"]),s=(0,_utils.generateUID)();t.dispatch(_react_action_constants.mail.NAVIGATE_TO_SPONSORED_FORWARD_REQUESTED,_extends({csid:s,initialSubject:i,initialBody:{content:r}},a))}exports.__esModule=!0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t};exports.navigateToNewSponsoredCompose=navigateToNewSponsoredCompose;var _react_action_constants=require("../platform/react_action_constants"),_utils=require("../platform/utils");
},{"../platform/react_action_constants":"./platform/react_action_constants","../platform/utils":"./platform/utils"}],11:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function requestSuggestions(e,t){var s=t.query;return debouncedRequestSuggestions(e,{query:s})}function unbouncedRequestSuggestions(e,t){var s=t.query,n=e.getStore(_suggestions2.default).getSuggestions(),u=e.config.showTextualSuggestions,o=Object.assign({query:s},u?{textualSuggest:1}:null),i={isBeaconEvent:!0,eventName:_constants.BEACON_EVENTS.SEARCH_SUGGESTION,etrg:"change",outcome:"search_suggestion_dropdown"};if(n&&n[s]){var r=n[s];return void e.dispatch(_react_action_constants.mail.SUGGESTIONS_REQUESTED,{query:s,suggestions:r,i13nModel:i})}return e.dispatch(_react_action_constants.mail.SUGGESTIONS_REQUESTED),Promise.resolve(e.bootcampClient.request("searchSuggestions",o)).then(function(t){e.dispatch(_react_action_constants.mail.SUGGESTIONS_RECEIVED,{query:s,suggestions:t,i13nModel:i})}).catch(function(t){return e.dispatch(_react_action_constants.mail.SUGGESTIONS_FAILED,t)})}exports.__esModule=!0,exports.requestSuggestions=requestSuggestions;var _debounce=require("lodash/debounce"),_debounce2=_interopRequireDefault(_debounce),_react_action_constants=require("../platform/react_action_constants"),_suggestions=require("../stores/suggestions"),_suggestions2=_interopRequireDefault(_suggestions),_constants=require("../platform/rapid_client/constants"),debouncedRequestSuggestions=(0,_debounce2.default)(unbouncedRequestSuggestions,300);
},{"../platform/rapid_client/constants":"./platform/rapid_client/constants","../platform/react_action_constants":"./platform/react_action_constants","../stores/suggestions":"./stores/suggestions","lodash/debounce":"./node_modules/lodash/debounce.js"}],"./actions/search_message_list":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.ListActions=void 0;var _folder_message_list=require("./folder_message_list"),_react_action_constants=require("../platform/react_action_constants"),_mail_constants=require("../platform/mail_constants"),_list=require("../platform/utils/list"),_actions=require("../apps/mail/actions"),ListActions=exports.ListActions=Object.assign({},_folder_message_list.ListActions,{retryLoading:_actions.openSearchFromList,loadMoreMessagesAfterScroll:function(t,s){var e=s.listId,i=s.offset,o=t.getStore("MailStore"),a=(0,_list.getListContentTypeFromListId)(e),r=o.getNextItemsUrl(e);t.dispatch(_react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_REQUESTED,{listId:e});var n=r;return a===_mail_constants.ListContentTypes.MESSAGES&&(n=r.replace(/&cursor=[0-9]*/,"&cursor="+i)),t.bootcampClient.request("searchItems",{url:n,listContentType:a}).then(function(s){t.dispatch(_react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED,{listId:e,listContentBlock:s})}).catch(function(){return t.dispatch(_react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_FAILED,{listId:e})})}});
},{"../apps/mail/actions":"./apps/mail/actions","../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/list":"./platform/utils/list","./folder_message_list":"./actions/folder_message_list"}],"./actions/settings":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function getFolderPrefix(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a="",n=t.split("."),i=n.length;a=i>1?t.substring(0,t.lastIndexOf(".")):n[0];var c=e.some(function(t){var e=t.folderPrefix;return e===a});return c?a+"_x":a}function removeOAuthToken(t,e){var a=(0,_account.getProvider)(e),n=_mail_constants.IMAP_SETTINGS[a];if(n){var i=n.oauthDomain;return t.credstoreClient.removeOAuthToken({domain:i,email:e}).then(function(e){return t.dispatch(_react_action_constants.mail.ACCOUNTS_OAUTH_TOKEN_REMOVE_SUCCEEDED,e)}).catch(function(e){return t.dispatch(_react_action_constants.mail.ACCOUNTS_OAUTH_TOKEN_REMOVE_FAILED,e)})}return Promise.reject(new Error("No provider found for "+e))}function changeSetting(t,e){var a=e.id,n=e.name,i=e.value,c=e.actions,_=t.getStore(_user_preferences2.default).getMailboxes()[0].id;return t.dispatch(c.requested,{name:n,value:i}),t.mailAPIClient.request("settings.saveWebMailboxAttributes",{mailboxId:_,id:a,value:i}).then(function(){t.dispatch(c.succeeded,{name:n,value:i}),c.succeeded===_react_action_constants.mail.SHOW_IMAGE_PREF_CHANGE_SUCCEEDED&&window.location.reload()}).catch(function(e){return t.dispatch(c.failed,{name:n,err:e})})}function updatePreviewPane(t,e){var a=e.value,n=_mail_constants.MailboxAttributes.PREVIEW_PANE,i={requested:_react_action_constants.mail.PREVIEW_PANE_PREF_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.PREVIEW_PANE_PREF_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.PREVIEW_PANE_PREF_CHANGE_FAILED};return changeSetting(t,{id:n,value:a,actions:i})}function markThemesCueAsShown(t){var e="themesCue",a=t.getStore(_features2.default)._doesCueExist(e);a&&(0,_actions.markFeatureAsShown)(t,{name:e})}function updateSetting(t,e){var a=e.name,n=e.value,i={requested:_react_action_constants.mail.SETTINGS_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.SETTINGS_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.SETTINGS_CHANGE_FAILED},c=void 0;switch(a){case _mail_constants.Settings.THEME:c=_mail_constants.MailboxAttributes.THEME,markThemesCueAsShown(t);break;case _mail_constants.Settings.THEME_MODE:c=_mail_constants.MailboxAttributes.THEME_MODE,markThemesCueAsShown(t);break;case _mail_constants.Settings.PREVIEW_PANE:c=_mail_constants.MailboxAttributes.PREVIEW_PANE;break;case _mail_constants.Settings.MSG_LIST_DENSITY:c=_mail_constants.MailboxAttributes.MSG_LIST_DENSITY;break;case _mail_constants.Settings.SNIPPETS:c=_mail_constants.MailboxAttributes.SNIPPETS;break;case _mail_constants.Settings.COMPOSE_FONT_FAMILY:c=_mail_constants.MailboxAttributes.COMPOSE_FONT_FAMILY;break;case _mail_constants.Settings.COMPOSE_FONT_SIZE:c=_mail_constants.MailboxAttributes.COMPOSE_FONT_SIZE;break;case _mail_constants.Settings.DESKTOP_NOTIFICATION:c=_mail_constants.MailboxAttributes.DESKTOP_NOTIFICATION,n=+n}return changeSetting(t,{id:c,name:a,value:n,actions:i})}function updateMultiTasking(t,e){var a=e.value,n=_mail_constants.MailboxAttributes.MAIL_TABS,i={requested:_react_action_constants.mail.MULTI_TASKING_PREF_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.MULTI_TASKING_PREF_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.MULTI_TASKING_PREF_CHANGE_FAILED};return changeSetting(t,{id:n,value:a,actions:i})}function updateExpandedFoldersSetting(t,e){var a=_mail_constants.MailboxAttributes.EXPANDED_FOLDERS,n=t.getStore(_mail2.default),i=n.getAllAccounts(),c={requested:_react_action_constants.mail.EXPANDED_FOLDERS_PREF_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.EXPANDED_FOLDERS_PREF_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.EXPANDED_FOLDERS_PREF_CHANGE_FAILED},_=[];return i.forEach(function(t){n.getAllFoldersForAccount(t.id).forEach(function(t){t.children.length>0&&e.indexOf(t.folder.id)!==-1&&(_=(0,_array.append)(_,t.folder.id))})}),changeSetting(t,{id:a,value:_,actions:c})}function updateShowCustomFoldersSetting(t,e){var a=e.value,n=_mail_constants.MailboxAttributes.SHOW_CUSTOM_FOLDERS,i={requested:_react_action_constants.mail.SHOW_CUSTOM_FOLDERS_PREF_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.SHOW_CUSTOM_FOLDERS_PREF_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.SHOW_CUSTOM_FOLDERS_PREF_CHANGE_FAILED};return changeSetting(t,{id:n,value:a,actions:i})}function updateSnippetsSetting(t,e){var a=e.value,n=_mail_constants.MailboxAttributes.SNIPPETS,i={requested:_react_action_constants.mail.SNIPPETS_PREF_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.SNIPPETS_PREF_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.SNIPPETS_PREF_CHANGE_FAILED};return changeSetting(t,{id:n,value:a,actions:i})}function updateHideAdSetting(t,e){var a=e.value,n=_mail_constants.MailboxAttributes.HIDE_AD,i={requested:_react_action_constants.mail.HIDEAD_PREF_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.HIDEAD_PREF_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.HIDEAD_PREF_CHANGE_FAILED};return changeSetting(t,{id:n,value:a,actions:i})}function updateMessageListDensity(t,e){var a=e.value,n=_mail_constants.MailboxAttributes.MSG_LIST_DENSITY,i={requested:_react_action_constants.mail.MESSAGE_LIST_DENSITY_PREF_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.MESSAGE_LIST_DENSITY_PREF_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.MESSAGE_LIST_DENSITY_PREF_CHANGE_FAILED};return changeSetting(t,{id:n,value:a,actions:i})}function updateActionAfterMessageMove(t,e){var a=e.value,n=_mail_constants.MailboxAttributes.ACTION_AFTER_MSG_MOVE,i={requested:_react_action_constants.mail.ACTION_AFTER_MESSAGE_MOVE_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.ACTION_AFTER_MESSAGE_MOVE_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.ACTION_AFTER_MESSAGE_MOVE_CHANGE_FAILED};return changeSetting(t,{id:n,value:a,actions:i})}function updateBrowserNotificationSetting(t,e){var a=e.value,n=_mail_constants.MailboxAttributes.DESKTOP_NOTIFICATION,i={requested:_react_action_constants.mail.BROWSER_NOTIFICATIONS_PREF_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.BROWSER_NOTIFICATIONS_PREF_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.BROWSER_NOTIFICATIONS_PREF_CHANGE_FAILED};return changeSetting(t,{id:n,value:+a,actions:i})}function updateStationeryDefaultTheme(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",a=_mail_constants.MailboxAttributes.STATIONERY_DEFAULT_THEME,n={requested:_react_action_constants.mail.STATIONERY_DEFAULT_THEME_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.STATIONERY_DEFAULT_THEME_CHANGE_SUCEEDED,failed:_react_action_constants.mail.STATIONERY_DEFAULT_THEME_CHANGE_FAILED};return changeSetting(t,{id:a,value:e,actions:n})}function updateConversationMode(t,e){var a,n=e.value;return t.dispatch(_react_action_constants.mail.CONVERSATIONS_CHANGE_REQUESTED,{value:n}),n=n?_constants.UDBValues[_constants.UDBKeys.YM_MAIL_CONV].ON:_constants.UDBValues[_constants.UDBKeys.YM_MAIL_CONV].OFF,t.udbClient.write((a={},a[_constants.UDBKeys.YM_MAIL_CONV]=n,a)).then(function(){t.dispatch(_react_action_constants.mail.CONVERSATIONS_CHANGE_SUCCEEDED,{value:n}),window.location.reload()}).catch(function(e){return t.dispatch(_react_action_constants.mail.CONVERSATIONS_CHANGE_FAILED,e)})}function updateAccount(t,e,a,n){var i=(0,_omit2.default)(a,["id","email","type"]),c=t.getStore(_user_preferences2.default).getMailboxes()[0].id,_=t.getStore(_mail2.default).getAccountById(e),s=Object.assign({},_,i);return t.dispatch(n.requested,{updatedAccount:s}),t.mailAPIClient.request("settings.updateAccount",{account:_,mailboxId:c,data:i}).then(function(e){return t.dispatch(n.succeeded,{updatedAccount:e})}).catch(function(e){return t.dispatch(n.failed,e)})}function addAccount(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.email,c=t.getStore(_mail2.default).getAccountByEmail(i),_=t.getStore(_user_preferences2.default).getMailboxes()[0].id,s=t.getStore(_mail2.default),o=s.getActiveAccountId(),r=s.getFolderIdForAccount(_mail_constants.FolderTypes.INBOX,o);return c?t.dispatch(a.failed,{account:e}):t.mailAPIClient.request("settings.addAccount",{account:e,mailboxId:_},n).then(function(e){var n=e.find(function(t){return t.email===i});return n?t.dispatch(a.succeeded,{accounts:e,newAccount:n,inboxFID:r}):t.dispatch(a.failed,"New account was not found in the accounts object!")}).catch(function(e){return t.dispatch(a.failed,e)})}function createNewAccount(t,e){var a=e.email,n=e.provider,i=e.type,c=e.sendingName,_=void 0===c?"":c,s=e.description,o=void 0===s?"":s,r=e.wssid,u=void 0===r?"":r,E=e.crumb,d=void 0===E?"":E,l={email:a,type:i,sendingName:_,description:o},A={requested:_react_action_constants.mail.ACCOUNT_ADD_REQUESTED,succeeded:_react_action_constants.mail.ACCOUNT_ADD_SUCCEEDED,failed:_react_action_constants.mail.ACCOUNT_ADD_FAILED},S={};if(u&&(S.wssid=u),d&&(S.crumb=d),i===_mail_constants.AccountTypes.IMAPIN){var m=a,T=_mail_constants.IMAP_SETTINGS[n].imapServer,N=t.getStore(_mail2.default).getAllAccounts();Object.assign(l,{serverUri:T,status:"ENABLED",authType:"OAUTH2",email:m,replyToAddress:m,folderPrefix:getFolderPrefix(a,N)})}return addAccount(t,l,A,S)}function deleteAccount(t,e){var a=e.accountId,n=t.getStore(_user_preferences2.default).getMailboxes()[0].id,i=t.getStore(_mail2.default).getAccountById(a),c=Object.assign({},i,{status:_mail_constants.AccountStatus.DELETE_IN_PROGRESS});t.dispatch(_react_action_constants.mail.ACCOUNT_DELETE_REQUESTED,{updatedAccount:c});var _=t.mailAPIClient.request("settings.deleteAccount",{accountId:a,mailboxId:n}).then(function(){return t.dispatch(_react_action_constants.mail.ACCOUNT_DELETE_SUCCEEDED,{updatedAccount:c})}).catch(function(e){return t.dispatch(_react_action_constants.mail.ACCOUNT_DELETE_FAILED,{err:e})});return c.type===_mail_constants.AccountTypes.IMAPIN&&_.then(function(){return removeOAuthToken(t,c.email)}),_}function updateDefaultSendingAccount(t,e){var a=e.accountId,n=e.isSending,i={requested:_react_action_constants.mail.DEFAULT_SENDING_ADDRESS_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.DEFAULT_SENDING_ADDRESS_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.DEFAULT_SENDING_ADDRESS_CHANGE_FAILED};return updateAccount(t,a,{isSending:n},i)}function updateSignatureStatus(t,e){var a=e.accountId,n=e.signatureActive,i={requested:_react_action_constants.mail.SIGNATURE_STATUS_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.SIGNATURE_STATUS_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.SIGNATURE_STATUS_CHANGE_FAILED};return updateAccount(t,a,{signatureActive:n},i)}function updateSignatureText(t,e){var a=e.accountId,n=e.signature,i={requested:_react_action_constants.mail.SIGNATURE_TEXT_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.SIGNATURE_TEXT_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.SIGNATURE_TEXT_CHANGE_FAILED};return updateAccount(t,a,{signature:n},i)}function updateShowImageSetting(t,e){var a=e.value,n=_mail_constants.MailboxAttributes.BLOCK_IMAGES,i={requested:_react_action_constants.mail.SHOW_IMAGE_PREF_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.SHOW_IMAGE_PREF_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.SHOW_IMAGE_PREF_CHANGE_FAILED};return changeSetting(t,{id:n,value:a,actions:i})}function updateLocationSetting(t,e){var a,n=e.location;t.dispatch(_react_action_constants.mail.SETTINGS_LOCATION_CHANGE_REQUESTED,{location:n});var i=_jstz2.default.determine(),c=i&&i.name();t.udbClient.write((a={},a[_constants.UDBKeys.YM_TZ]=JSON.stringify({city:n.city,state:n.state,country:n.country,timezone:{name:n.timezone.name}}),a[_constants.UDBKeys.YM_LAST_OBSERVED_TZ]=JSON.stringify({client:c,server:n.timezone.name}),a)).then(function(){return window.location.reload()},function(e){return t.dispatch(_react_action_constants.mail.SETTINGS_LOCATION_CHANGE_FAILED,{err:e})})}function optOut(t){return t.dispatch(_react_action_constants.mail.OPT_OUT_OF_NORRIN)}function goToPrivacyTerms(t){return t.dispatch(_react_action_constants.mail.GO_TO_PRIVACY_TERMS)}function goToHelpPage(t){return t.dispatch(_react_action_constants.mail.GO_TO_HELP_PAGE)}function giveFeedback(t){return t.dispatch(_react_action_constants.mail.GIVE_FEEDBACK)}function goToAboutYahooMail(t){return t.dispatch(_react_action_constants.mail.GO_TO_ABOUT_YAHOO_MAIL)}function goToAboutOurAds(t){return t.dispatch(_react_action_constants.mail.GO_TO_ABOUT_OUR_ADS)}function goToAdFreeMail(t){return t.dispatch(_react_action_constants.mail.GO_TO_AD_FREE_MAIL)}function updateAccountDetails(t,e){var a=e.accountId,n=e.data,i={requested:_react_action_constants.mail.ACCOUNT_DETAILS_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.ACCOUNT_DETAILS_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.ACCOUNT_DETAILS_CHANGE_FAILED};return updateAccount(t,a,n,i)}function addDisposableEmailAddress(t,e){var a=e.email,n=e.sendingName,i=e.type,c=e.description,_={requested:_react_action_constants.mail.ACCOUNT_ADD_REQUESTED,succeeded:_react_action_constants.mail.ACCOUNT_ADD_SUCCEEDED,failed:_react_action_constants.mail.ACCOUNT_ADD_FAILED};return addAccount(t,{email:a,sendingName:n,type:i,description:c},_)}function updateUnsubscribeSetting(t,e){var a=e.value,n=_mail_constants.MailboxAttributes.UNSUBSCRIBE_NOTIFICATION,i={requested:_react_action_constants.mail.UNSUBSCRIBE_NOTIFICATION_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.UNSUBSCRIBE_NOTIFICATION_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.UNSUBSCRIBE_NOTIFICATION_CHANGE_FAILED};return changeSetting(t,{id:n,value:a,actions:i})}function updateUnsubscribeTimestamp(t){var e=_mail_constants.MailboxAttributes.UNSUBSCRIBE_TIMESTAMP,a={requested:_react_action_constants.mail.UNSUBSCRIBE_TIMESTAMP_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.UNSUBSCRIBE_TIMESTAMP_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.UNSUBSCRIBE_TIMESTAMP_CHANGE_FAILED},n=Date.now();return changeSetting(t,{id:e,value:n,actions:a})}function updateNumUnsubscribedItems(t,e){var a=e.totalListsCleaned,n=_mail_constants.MailboxAttributes.NUM_UNSUBSCRIBED_ITEMS,i={requested:_react_action_constants.mail.NUM_UNSUBSCRIBED_ITEMS_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.NUM_UNSUBSCRIBED_ITEMS_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.NUM_UNSUBSCRIBED_ITEMS_CHANGE_FAILED};return changeSetting(t,{id:n,value:a,actions:i})}function createBaseName(t,e){var a=e.baseName,n=e.domain,i=t.getStore(_user_preferences2.default).getMailboxes()[0].id;return t.dispatch(_react_action_constants.mail.DISPOSABLE_EMAIL_BASE_NAME_CREATE_REQUESTED,{baseName:a,domain:n}),t.mailAPIClient.request("settings.setBaseName",{baseName:a,domain:n,mailboxId:i}).then(function(e){var i=e.suggestions;i&&i.length?t.dispatch(_react_action_constants.mail.DISPOSABLE_EMAIL_BASE_NAME_SUGGESTIONS_RECEIVED,{suggestions:i}):t.dispatch(_react_action_constants.mail.DISPOSABLE_EMAIL_BASE_NAME_CREATE_SUCCEEDED,{baseName:a,domain:n})}).catch(function(e){return t.dispatch(_react_action_constants.mail.DISPOSABLE_EMAIL_BASE_NAME_CREATE_FAILED,{err:e})})}function reauthAccount(t,e){var a=e.wssid,n=e.accountId,i=e.error,c=void 0===i?{}:i,_={},s=c.status,o=void 0===s?null:s,r=c.provider,u=void 0===r?"":r,E=c.email,d=void 0===E?"":E;if(o)return t.dispatch(_react_action_constants.mail.ACCOUNT_REAUTH_FAILED,{status:o,provider:u,email:d});a&&(_.wssid=a);var l=t.getStore(_user_preferences2.default).getMailboxes()[0].id,A=t.getStore(_mail2.default).getAccountAlertByAccountId(n),S=A.id;return t.mailAPIClient.request("account.updateAlerts",{mailboxId:l,alertId:S},_).then(function(e){var a=e.accountAlerts;a&&a.length>0?t.dispatch(_react_action_constants.mail.ACCOUNT_REAUTH_SUCCEEDED,{accountAlerts:a}):t.dispatch(_react_action_constants.mail.ACCOUNT_REAUTH_FAILED,{status:o,provider:u,email:d})}).catch(function(){t.dispatch(_react_action_constants.mail.ACCOUNT_REAUTH_FAILED,{status:o,provider:u,email:d})})}function newAccountAddFinished(t){return t.dispatch(_react_action_constants.mail.ACCOUNT_ADD_FINISHED)}function cancelAccountSettings(t){return t.dispatch(_react_action_constants.mail.ACCOUNT_SETTINGS_CANCEL)}function openAddAccountWizard(t){return t.dispatch(_react_action_constants.mail.ACCOUNT_ADD_WIZARD_OPENED)}function addAccountSelectProvider(t){return t.dispatch(_react_action_constants.mail.ACCOUNT_ADD_SELECT_PROVIDER)}function deleteAccountConfirmation(t){return t.dispatch(_react_action_constants.mail.ACCOUNT_DELETE_OPEN_CONFIRMATION)}function authorizeNewAccount(t){return t.dispatch(_react_action_constants.mail.ACCOUNT_ADD_AUTHORIZE)}function resendConfirmEmail(t,e){var a=e.account;return t.dispatch(_react_action_constants.mail.CONFIRM_EMAIL_RESNED_REQUESTED,{sending:!0}),t.mailAPIClient.request("settings.resendConfirmEmail",{account:a}).then(function(e){t.dispatch(_react_action_constants.mail.CONFIRM_EMAIL_RESEND_SUCCEEDED,{account:e,sending:!1})}).catch(function(e){t.dispatch(_react_action_constants.mail.CONFIRM_EMAIL_RESEND_FAILED,{err:e,sending:!1})})}function updateLinkEnhancerMode(t,e){var a=e.value,n=_mail_constants.MailboxAttributes.LINK_ENHANCR,i={requested:_react_action_constants.mail.LINK_ENHANCER_CHANGE_REQUESTED,succeeded:_react_action_constants.mail.LINK_ENHANCER_CHANGE_SUCCEEDED,failed:_react_action_constants.mail.LINK_ENHANCER_CHANGE_FAILED};return changeSetting(t,{id:n,value:a,actions:i})}exports.__esModule=!0,exports.updatePreviewPane=updatePreviewPane,exports.updateSetting=updateSetting,exports.updateMultiTasking=updateMultiTasking,exports.updateExpandedFoldersSetting=updateExpandedFoldersSetting,exports.updateShowCustomFoldersSetting=updateShowCustomFoldersSetting,exports.updateSnippetsSetting=updateSnippetsSetting,exports.updateHideAdSetting=updateHideAdSetting,exports.updateMessageListDensity=updateMessageListDensity,exports.updateActionAfterMessageMove=updateActionAfterMessageMove,exports.updateBrowserNotificationSetting=updateBrowserNotificationSetting,exports.updateStationeryDefaultTheme=updateStationeryDefaultTheme,exports.updateConversationMode=updateConversationMode,exports.createNewAccount=createNewAccount,exports.deleteAccount=deleteAccount,exports.updateDefaultSendingAccount=updateDefaultSendingAccount,exports.updateSignatureStatus=updateSignatureStatus,exports.updateSignatureText=updateSignatureText,exports.updateShowImageSetting=updateShowImageSetting,exports.updateLocationSetting=updateLocationSetting,exports.optOut=optOut,exports.goToPrivacyTerms=goToPrivacyTerms,exports.goToHelpPage=goToHelpPage,exports.giveFeedback=giveFeedback,exports.goToAboutYahooMail=goToAboutYahooMail,exports.goToAboutOurAds=goToAboutOurAds,exports.goToAdFreeMail=goToAdFreeMail,exports.updateAccountDetails=updateAccountDetails,exports.addDisposableEmailAddress=addDisposableEmailAddress,exports.updateUnsubscribeSetting=updateUnsubscribeSetting,exports.updateUnsubscribeTimestamp=updateUnsubscribeTimestamp,exports.updateNumUnsubscribedItems=updateNumUnsubscribedItems,exports.createBaseName=createBaseName,exports.reauthAccount=reauthAccount,exports.newAccountAddFinished=newAccountAddFinished,exports.cancelAccountSettings=cancelAccountSettings,exports.openAddAccountWizard=openAddAccountWizard,exports.addAccountSelectProvider=addAccountSelectProvider,exports.deleteAccountConfirmation=deleteAccountConfirmation,exports.authorizeNewAccount=authorizeNewAccount,exports.resendConfirmEmail=resendConfirmEmail,exports.updateLinkEnhancerMode=updateLinkEnhancerMode;var _react_action_constants=require("../platform/react_action_constants"),_user_preferences=require("../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_mail=require("../stores/mail"),_mail2=_interopRequireDefault(_mail),_features=require("../stores/features"),_features2=_interopRequireDefault(_features),_mail_constants=require("../platform/mail_constants"),_constants=require("../platform/udb_client/constants"),_array=require("../platform/utils/array"),_account=require("../platform/utils/account"),_actions=require("../molecules/feature_cue/actions"),_jstz=require("jstz"),_jstz2=_interopRequireDefault(_jstz),_omit=require("lodash/omit"),_omit2=_interopRequireDefault(_omit);
},{"../molecules/feature_cue/actions":"./molecules/feature_cue/actions","../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/udb_client/constants":"./platform/udb_client/constants","../platform/utils/account":"./platform/utils/account","../platform/utils/array":"./platform/utils/array","../stores/features":"./stores/features","../stores/mail":"./stores/mail","../stores/user_preferences":"./stores/user_preferences","jstz":"./node_modules/jstz/index.js","lodash/omit":"./node_modules/lodash/omit.js"}],"./apps/mail/actions":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getPencilAds(e,t){var s=e.config.geminiForceFilter,a={adCount:e.config.geminiRequestParams.adCount,sectionId:e.config.geminiRequestParams.sectionId};s&&(a.forceFilter=s),e.geminiAPIClient.request(a,{adPosition:"messagelist"}).then(t)}function openSponsoredMessage(e,t){var s=e.getStore(_application2.default);if(s.hasSuccessfullyInitialized()){var a=t.params.creativeId;(0,_ads.getGeminiSponsoredAsset)(e,{creativeId:a})}}function getXobniRequest(e){return e.autoSuggestClient.formatted({appId:_mail_constants.appId},_mail_constants.SocialAccountSPIDs).then(function(t){e.dispatch(_react_action_constants.mail.SOCIAL_ACCOUNTS_STATUS_RECEIVED,t)})}function openSettings(e,t,s){var a=e.getStore(_user_preferences2.default),o=e.getStore(_application2.default);if(o.hasSuccessfullyInitialized())return e.mailAPIClient.request("settings.get",{mailboxId:a.getMailboxes()[0].id}).then(function(t){e.dispatch(_react_action_constants.mail.SETTINGS_MAILBOX_ATTRIBUTES_RECEIVED,t)}).then(function(){return getXobniRequest(e)}).then(s,s);var i=e.mailAPIClient.request("launch.skeleton").then(function(t){var s=t.mailboxes,a=t.userPreferences,o=t.accounts,i=t.folders,r=t.mailboxAttributes,n=t.userMetaData;e.dispatch(_react_action_constants.mail.INITIAL_STATE,{mailboxes:s,userPreferences:a,accounts:o,folders:i,mailboxAttributes:r,userMetaData:n})});return i.then(s,s)}function shouldFetchMessageId(e,t){var s=t.getStore(_mail2.default),a=s.getCsidByMessageId(e);if(a&&s.isDraftMessage(e)){var o=s.getComposeDataState(a);return o===_mail_constants.RecordStates.DOES_NOT_EXIST||o===_mail_constants.RecordStates.ERROR}var i=(0,_reducers_selectors.selectors)(t.store.getState()),r=i.getMessageBodiesSelectors,n=r(),c=n.getState(e);return c===_mail_constants.RecordStates.DOES_NOT_EXIST||c===_mail_constants.RecordStates.ERROR}function fetchMessagesByIds(e,t,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t.length){var o=Object.assign({request:_react_action_constants.mail.MESSAGE_BODIES_REQUESTED,success:_react_action_constants.mail.MESSAGE_BODIES_RECEIVED,failure:_react_action_constants.mail.MESSAGE_BODIES_FAILED},a),i=s.getStore(_user_preferences2.default),r=i.getMailboxes()[0].id,n=i.getShowImageSetting(),c=s.config.fetchFullBody,l=s.mailAPIClient.request("messages.getBodies",{mailboxId:r,messageIds:t,full:c,secure:n}).then(function(t){t.error.messageIds.length&&s.dispatch(o.failure,{listId:e,messageIds:t.error.messageIds}),s.dispatch(o.success,{listId:e,full:c,secure:n,messageBodiesMap:t.result.messageBodiesMap,messageMetadataMap:t.result.messageMetadataMap})}).catch(function(a){s.dispatch(o.failure,{listId:e,messageIds:t,error:a})});return s.dispatch(o.request,{listId:e,messageIds:t}),l}return Promise.resolve()}function fetchMessagesByMessageGroupList(e,t,s){var a=s.getStore(_mail2.default),o=t.reduce(function(e,t){var o=a.getMessageGroupById(t.id);if(o){var i,r=(0,_message_group.getIdsOfMessagesToExpand)(o).filter(function(e){return shouldFetchMessageId(e,s)});(i=e.messageIds).push.apply(i,r)}else e.messageGroupIds.push(t.id);return e},{messageGroupIds:[],messageIds:[]});return Promise.all([fetchMessagesByIds(e,o.messageIds,s)].concat(o.messageGroupIds.map(function(t){return fetchMessageGroupById(e,t,s)})))}function fetchMessageGroupById(e,t,s){var a=s.config.fetchFullBody,o=s.getStore(_user_preferences2.default),i=o.getMailboxes()[0].id,r=o.getShowImageSetting();return s.mailAPIClient.request("messageGroups.get",{mailboxId:i,messageGroupId:t,full:a,secure:r,isConversation:s.config.conversations}).then(function(t){s.dispatch(_react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED,{listId:e,full:a,secure:r,messageGroup:t.messageGroup,messageBodiesMap:t.messageBodiesMap})}).catch(function(a){s.dispatch(_react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_FAILED,{listId:e,messageGroupId:t,error:a})})}function openMessageGroup(e,t){var s=t.route,a=s.params,o=(0,_list.getListIdFromRoute)(s),i=decodeURIComponent(a.mid),r=e.getStore(_mail2.default),n=r.getMessageGroupById(i);if(!n){var c=fetchMessageGroupById(o,i,e);return e.dispatch(_react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_OPENED,{listId:o,messageGroupId:i}),c}var l=(0,_message_group.getIdsOfMessagesToExpand)(n).filter(function(t){return shouldFetchMessageId(t,e)}),u=fetchMessagesByIds(o,l,e,{success:_react_action_constants.mail.MESSAGE_BODIES_OPEN_GROUP_RECEIVED});return e.dispatch(_react_action_constants.mail.MESSAGE_GROUP_OPENED,{listId:o,messageGroupId:i,messageBodiesToFetchCount:l.length}),u}function launchMessageGroupFromRoute(e,t,s){var a=e.getStore(_application2.default),o=t.params,i=(0,_list.getListIdFromRoute)(t),r=decodeURIComponent(o.mid);return a.hasSuccessfullyInitialized()?Promise.resolve():e.mailAPIClient.request("launch.messageGroup",{isConversation:e.config.conversations,messageGroupId:r}).then(function(t){e.dispatch(_react_action_constants.mail.INITIAL_STATE,{listId:i,mailboxes:t.mailboxes,folders:t.folders,userPreferences:t.userPreferences,userMetaData:t.userMetaData,messageGroups:t.messageGroups,messageBodiesMap:t.messageBodiesMap,messageMetadataMap:t.messageMetadataMap,accounts:t.accounts,mailboxAttributes:e.config.useV3SettingsData?t.mailboxAttributes:void 0})}).then(s,s)}function openSearchFromList(e,t){var s=t.listId,a=t.folders,o=e.getStore(_user_preferences2.default).getMailboxes()[0].id,i=e.getStore(_mail2.default),r=i.isListStale(s),n=i.getActiveAccount(),c=n.email,l=i.doesListExist(s),u=null;return r&&(u=e.bootcampClient.createStream("searchStream",Object.assign((0,_list.getBootcampApiQueryParams)(s),{mailboxid:o,limit:50,threads:!!e.config.conversations,accountemail:"smtp:"+c,sourceTag:e.config.searchSourceTag})),u.on("data",function(t){if(200!==t.status&&t.error&&"BootcampApiClient.SearchError"===t.error.name)e.dispatch(_react_action_constants.mail.SEARCH_LIST_ITEMS_FAILED,{listId:s});else{var o={listId:s,doesListExist:l,response:t};a&&(o.folders=a),e.dispatch(_react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED,o)}}),u.on("end",function(){var t=e.getStore(_mail2.default),a=t.itemListCollection.getState(s);if(a!==_mail_constants.RecordStates.LOADED)e.dispatch(_react_action_constants.mail.SEARCH_LIST_ITEMS_FAILED,{listId:s,error:new _mail_error2.default("BootcampApiClient.SearchError","main chunk is not loaded")});else{var o={listId:s,doesListExist:l};a===_mail_constants.RecordStates.LOADED&&0===t.itemListCollection.getListItemCount(s)&&(o.i13nModel={isBeaconEvent:!0,eventName:_constants.BEACON_EVENTS.SEARCH_ZERO_RESULTS,etrg:"change",outcome:"search_zero_results"}),e.dispatch(_react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED,o)}}),u.on("error",function(t){return e.dispatch(_react_action_constants.mail.SEARCH_LIST_ITEMS_FAILED,{listId:s,error:t})})),r&&e.dispatch(_react_action_constants.mail.SEARCH_LIST_ITEMS_REQUESTED,{listId:s,isListStale:r}),u}function launchSearch(e,t){var s=e.getStore(_application2.default);if(s.hasSuccessfullyInitialized())return Promise.resolve();var a=(0,_list.getListIdFromRoute)(t),o=e.mailAPIClient.request("launch.skeleton").then(function(t){var s=t.mailboxes,o=t.userMetaData,i=t.userPreferences,r=t.mailboxAttributes,n=t.accounts,c=t.folders;e.dispatch(_react_action_constants.mail.INITIAL_STATE,{listId:a,mailboxes:s,accounts:n,folders:c,userMetaData:o,userPreferences:i,mailboxAttributes:r})});return o.then(function(){return openSearchFromList(e,{listId:a})}),o}function openSearch(e,t){var s=t.route,a=(0,_list.getListIdFromRoute)(s);return openSearchFromList(e,{listId:a})}function openTutorial(e){var t=e.getStore(_application2.default);return t.hasSuccessfullyInitialized()?Promise.resolve():e.mailAPIClient.request("launch.skeleton").then(function(t){var s=t.mailboxes,a=t.userPreferences,o=t.accounts,i=t.folders,r=t.mailboxAttributes,n=t.userMetaData;e.dispatch(_react_action_constants.mail.INITIAL_STATE,{mailboxes:s,userPreferences:a,accounts:o,folders:i,mailboxAttributes:r,userMetaData:n})})}function openAttachment(e,t,s){var a=e.getStore(_application2.default);if(a.hasSuccessfullyInitialized())return Promise.resolve();var o=t.params,i=decodeURIComponent(o.attachmentId),r=launchMessageGroupFromRoute(e,t,s).then(function(){return(0,_attachment.previewAttachment)(e,{attachmentId:i,fullScreenMode:!0})});return r}function openDraft(e,t,s){var a=decodeURIComponent(t.params.mid),o=e.getStore(_application2.default),i=void 0;if(o.hasSuccessfullyInitialized()){var r=e.getStore(_mail2.default),n=e.getStore(_user_preferences2.default).getMailboxes()[0].id,c=(0,_reducers_selectors.selectors)(e.store.getState()),l=c.getMessageBodiesSelectors,u=l(),d=u.getState(a);if(i=(0,_list.getListIdFromFolderId)(r.getFolderIdForMessage(a)),d!==_mail_constants.RecordStates.LOADED)e.mailAPIClient.request("messages.getBodies",{mailboxId:n,full:!0,secure:!1,messageIds:[a]}).then(function(t){t.error.messageIds.length&&e.dispatch(_react_action_constants.mail.MESSAGE_BODIES_FAILED,{listId:i,messageIds:t.error.messageIds}),e.dispatch(_react_action_constants.mail.MESSAGE_BODIES_RECEIVED,{listId:i,full:!0,secure:!1,messageBodiesMap:t.result.messageBodiesMap,messageMetadataMap:t.result.messageMetadataMap});var s=(0,_reducers_selectors.selectors)(e.store.getState()),o=s.getMessageBodiesSelectors,n=o(),c=n.get(a),l=Object.assign({},r.getMessageById(a),{body:c}),u=r.getCsidByMessageId(a);(0,_invariant2.default)(u,"'csid', should be present in the message here"),e.dispatch(_react_action_constants.mail.COMPOSE_OPENED,{composeMode:_mail_constants.Compose.Modes.EDIT,listId:i,csid:u,message:l})}).catch(function(t){e.dispatch(_react_action_constants.mail.MESSAGE_BODIES_FAILED,{listId:i,messageIds:[a],error:t})}).then(s,s);else{var _=(0,_reducers_selectors.selectors)(e.store.getState()),m=_.getMessageBodiesSelectors,g=m(),p=g.get(a),f=Object.assign({},r.getMessageById(a),{body:p}),I=r.getCsidByMessageId(a);(0,_invariant2.default)(I,"'csid', should be present in the message here"),e.dispatch(_react_action_constants.mail.COMPOSE_OPENED,{composeMode:_mail_constants.Compose.Modes.EDIT,listId:i,csid:I,message:f})}}else e.mailAPIClient.request("launch.message",{messageId:a}).then(function(t){var s=t.message;i=(0,_list.getListIdFromFolderId)(s.folder.id),e.dispatch(_react_action_constants.mail.INITIAL_STATE,{listId:i,mailboxes:t.mailboxes,folders:t.folders,userPreferences:t.userPreferences,userMetaData:t.userMetaData,messageGroups:t.messageGroups,messageBodiesMap:t.messageBodiesMap,messageMetadataMap:t.messageMetadataMap,accounts:t.accounts,mailboxAttributes:e.config.useV3SettingsData?t.mailboxAttributes:void 0,message:t.message})}).then(s,s)}function openCompose(e,t,s){var a=e.getStore(_application2.default);if(a.hasSuccessfullyInitialized()){var o=e.getStore(_user_preferences2.default),i=decodeURIComponent(t.params.csid);(0,_invariant2.default)(i,"csid is required and should be in the url"),e.dispatch(_react_action_constants.mail.COMPOSE_OPENED,{composeMode:_mail_constants.Compose.Modes.NEW,csid:i,preferences:o.getPreferences()})}else e.mailAPIClient.request("launch.skeleton").then(function(s){var a=s.mailboxes,o=s.userPreferences,i=s.userMetaData,r=s.mailboxAttributes,n=s.accounts,c=s.folders,l=t.params.csid,u=e.config,d=u.initialTo,_=void 0===d?"":d,m=u.initialCc,g=void 0===m?"":m,p=u.initialBcc,f=void 0===p?"":p,I=u.initialSubject,h=u.initialBody,S={csid:l,initialTo:_,initialCc:g,initialBcc:f,initialSubject:I,initialBody:h};(0,_invariant2.default)(l,"csid is required and should be in the url"),e.dispatch(_react_action_constants.mail.INITIAL_STATE,{mailboxes:a,accounts:n,folders:c,userPreferences:o,userMetaData:i,mailboxAttributes:r,draftData:S})}).then(s,s)}function closeActivePage(e){e.dispatch(_react_action_constants.mail.CLOSE_PAGE_REQUESTED)}function openFolderWhenUninitialized(e,t,s,a){var o=s.folderId,i=s.listId,r=s.sortOrder,n=null;e.config.ads&&getPencilAds(e,function(e){n=e}),e.mailAPIClient.request(t,{folderId:o,sortOrder:r,count:e.config.messageFetchCountInitial,offset:0,conversationsMode:e.config.conversations}).then(function(s){"launch.defaultFolder"===t&&(i=(0,_list.getListIdFromFolderId)((0,_folder.getDefaultFolder)(s.accounts,s.folders).id)),e.dispatch(_react_action_constants.mail.INITIAL_STATE,{listId:i,mailboxes:s.mailboxes,folders:s.folders,userPreferences:s.userPreferences,messageGroupList:s.messageGroups,hasMoreItems:s.hasMoreItems,accounts:s.accounts,mailboxAttributes:e.config.useV3SettingsData?s.mailboxAttributes:void 0,userMetaData:s.userMetaData,pencilAds:n,accountAlerts:s.accountAlerts})}).then(a,a)}function openDefaultFolder(e,t,s){var a=e.getStore(_application2.default);a.hasSuccessfullyInitialized()&&(0,_invariant2.default)(!1,"BASE Route should not be navigable to after launch"),openFolderWhenUninitialized(e,"launch.defaultFolder",{sortOrder:_mail_constants.SortOrder.DATE_DESC},s)}function openFolder(e,t,s){var a=e.getStore(_application2.default),o=e.getStore(_mail2.default),i=e.getStore(_checkmail2.default),r=(0,_list.getListIdFromRoute)(t),n=(0,_list.getFolderIdFromListId)(r),c=(0,_list.getSortOrderFromListId)(r);if(a.hasSuccessfullyInitialized()){var l=e.getStore(_user_preferences2.default),u=l.getMailboxes()[0].id,d=o.getActiveAccount().id,_=e.config.messageFetchCount,m=0;if(e.dispatch(_react_action_constants.mail.CHANGE_FOLDER_REQUESTED,{listId:r}),!o.isListStale(r)&&!i.shouldForceCheckMail())return;var g={accountId:d,folderId:n,mailboxId:u,sortOrder:c,count:_,offset:m,conversationsMode:e.config.conversations};if(o.doesListExist(r)){var p=o.getPrimaryAccount().id,f=o.getFolderIdsByType(p,_mail_constants.FolderTypes.ALERTSTORE)[0];return g.alertStoreHighestModSeq=i.getFolderHighestModSeq(f),makeCheckMailRequest(e,g,r,_,{success:_react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED,failure:_react_action_constants.mail.CHANGE_FOLDER_FAILED})}return e.mailAPIClient.request("folderChange.getList",g).then(function(t){var s=t.messageGroupList,a=t.hasMoreItems;e.dispatch(_react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED,{listId:r,messageGroupList:s,hasMoreItems:a})}).catch(function(t){e.dispatch(_react_action_constants.mail.CHANGE_FOLDER_FAILED,{listId:r,error:t})})}openFolderWhenUninitialized(e,"launch.folder",{folderId:n,listId:r,sortOrder:c},s)}function autoMessageCheckMail(e){var t=e.getStore(_checkmail2.default),s=e.getStore(_pages2.default).getActivePageRoute(),a=(0,_list.getListIdFromRoute)(s),o=(0,_list.getFolderIdFromListId)(a);if(t.isCheckMailAllowed()&&o&&s.name!==_mail_constants.RouteNames.SEARCH){var i=e.getStore(_user_preferences2.default).getMailboxes()[0].id,r=e.getStore(_mail2.default),n=r.getActiveAccount().id,c=r.getPrimaryAccount().id,l=r.getFolderIdsByType(c,_mail_constants.FolderTypes.ALERTSTORE)[0],u=e.getStore(_application2.default).isAppVisible(),d=(0,_list.getSortOrderFromListId)(a),_=r.isListStale(a),m=_mail_constants.CHECK_MAIL_MESSAGES_COUNT,g=0;e.dispatch(_react_action_constants.mail.AUTO_CHECK_MAIL_REQUESTED,{listId:a});var p={highestModSeq:_?0:t.getFolderHighestModSeq(o),folderId:o,mailboxId:i,sortOrder:d,count:m,offset:g,conversationsMode:e.config.conversations,accountId:n,resetUnseenCount:u,alertStoreHighestModSeq:t.getFolderHighestModSeq(l)};return makeCheckMailRequest(e,p,a,m,{success:_react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED,failure:_react_action_constants.mail.AUTO_CHECK_MAIL_FAILED})}}function makeCheckMailRequest(e,t,s,a,o){var i=e.getStore(_checkmail2.default);return e.mailAPIClient.request("checkMail",t).then(function(t){var r=t.folders,n=t.messageGroupList,c=t.accountAlerts,l=i.getStaleFolderIds(r);(o.success!==_react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED||l.length)&&(e.dispatch(o.success,{folders:r,messageGroupList:n,listId:s,count:a,staleFolderIds:l,accountAlerts:c}),e.config.checkMailPrefetch&&fetchMessagesByMessageGroupList(s,n,e))}).catch(function(t){e.dispatch(o.failure,{error:t,listId:s})})}function notifyVisibilityChange(e,t){var s=t.isVisible,a=e.heartbeatAPIClient.emergencyRefresh;e.dispatch(_react_action_constants.mail.APPLICATION_VISIBILITY_DID_CHANGE,{isVisible:s,emergencyRefresh:a}),s&&autoMessageCheckMail(e)}function handleHeaderNavigation(e){e.dispatch(_react_action_constants.mail.HEADER_NAVIGATION_SELECTED)}function showSettings(e){e.dispatch(_react_action_constants.mail.SETTINGS_MENU_REQUESTED)}function handleAccountMenuShow(e){e.dispatch(_react_action_constants.mail.ACCOUNT_MENU_SHOWN)}function handleLogout(e){e.dispatch(_react_action_constants.mail.USER_LOGGED_OUT)}function handleSearchBarFocus(e){e.dispatch(_react_action_constants.mail.SEARCH_INPUT_FOCUSED);var t=e.getStore(_mail2.default),s=t.getActiveAccount(),a=s.email,o=_react_action_constants.mail.IMPORTANT_CONTACTS_FETCH_SUCCEEDED;return e.dispatch(_react_action_constants.mail.IMPORTANT_CONTACTS_FETCH_REQUESTED),e.autoSuggestClient.importantContacts(a).then(function(t){e.dispatch(_react_action_constants.mail.IMPORTANT_CONTACTS_FETCH_SUCCEEDED,{contacts:t,actionType:o})}).catch(function(){return e.dispatch(_react_action_constants.mail.IMPORTANT_CONTACTS_FETCH_FAILED)})}function resolutionChange(e,t){var s=t.resolutionType;e.config.resolutionCheck&&e.dispatch(_react_action_constants.mail.RESOLUTION_CHANGE,{resolutionType:s})}function navigateToRoute(e,t){e.dispatch(_react_action_constants.mail.OPEN_PAGE_REQUESTED,t)}exports.__esModule=!0,exports.openSponsoredMessage=openSponsoredMessage,exports.openSettings=openSettings,exports.openMessageGroup=openMessageGroup,exports.launchMessageGroupFromRoute=launchMessageGroupFromRoute,exports.openSearchFromList=openSearchFromList,exports.launchSearch=launchSearch,exports.openSearch=openSearch,exports.openTutorial=openTutorial,exports.openAttachment=openAttachment,exports.openDraft=openDraft,exports.openCompose=openCompose,exports.closeActivePage=closeActivePage,exports.openDefaultFolder=openDefaultFolder,exports.openFolder=openFolder,exports.autoMessageCheckMail=autoMessageCheckMail,exports.notifyVisibilityChange=notifyVisibilityChange,exports.handleHeaderNavigation=handleHeaderNavigation,exports.showSettings=showSettings,exports.handleAccountMenuShow=handleAccountMenuShow,exports.handleLogout=handleLogout,exports.handleSearchBarFocus=handleSearchBarFocus,exports.resolutionChange=resolutionChange,exports.navigateToRoute=navigateToRoute;var _mail_constants=require("../../platform/mail_constants"),_folder=require("../../platform/utils/folder"),_list=require("../../platform/utils/list"),_react_action_constants=require("../../platform/react_action_constants"),_message_group=require("../../platform/utils/message_group"),_invariant=require("../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_application=require("../../stores/application"),_application2=_interopRequireDefault(_application),_user_preferences=require("../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_mail=require("../../stores/mail"),_mail2=_interopRequireDefault(_mail),_checkmail=require("../../stores/checkmail"),_checkmail2=_interopRequireDefault(_checkmail),_pages=require("../../stores/pages"),_pages2=_interopRequireDefault(_pages),_attachment=require("../../actions/attachment"),_ads=require("../../actions/ads.js"),_mail_error=require("../../platform/mail_error"),_mail_error2=_interopRequireDefault(_mail_error),_constants=require("../../platform/rapid_client/constants"),_reducers_selectors=require("../../reducers_selectors");
},{"../../actions/ads.js":"./actions/ads","../../actions/attachment":"./actions/attachment","../../platform/invariant":"./platform/invariant","../../platform/mail_constants":"./platform/mail_constants","../../platform/mail_error":"./platform/mail_error","../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../platform/react_action_constants":"./platform/react_action_constants","../../platform/utils/folder":"./platform/utils/folder","../../platform/utils/list":"./platform/utils/list","../../platform/utils/message_group":"./platform/utils/message_group","../../reducers_selectors":"./reducers_selectors","../../stores/application":"./stores/application","../../stores/checkmail":"./stores/checkmail","../../stores/mail":"./stores/mail","../../stores/pages":"./stores/pages","../../stores/user_preferences":"./stores/user_preferences"}],12:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.rawMailApp=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactRedux=require("react-redux"),_controller_views=require("./controller_views"),_controller_views2=_interopRequireDefault(_controller_views),_tabs=require("./controller_views/tabs.jsx"),_tabs2=_interopRequireDefault(_tabs),_actions=require("./actions"),_svg_defs=require("../../atoms/svg_defs.jsx"),_svg_defs2=_interopRequireDefault(_svg_defs),_document_title_updater=require("./controller_views/document_title_updater.jsx"),_document_title_updater2=_interopRequireDefault(_document_title_updater),_router=require("./providers/router"),_router2=_interopRequireDefault(_router),_ads=require("./providers/ads"),_ads2=_interopRequireDefault(_ads),_ad_debug=require("../../molecules/ads/ad_debug.jsx"),_ad_debug2=_interopRequireDefault(_ad_debug),_unsaved_data_warner=require("./controller_views/unsaved_data_warner.jsx"),_unsaved_data_warner2=_interopRequireDefault(_unsaved_data_warner),_pager=require("./controller_views/pager"),_pager2=_interopRequireDefault(_pager),_app_header=require("./controller_views/app_header"),_app_header2=_interopRequireDefault(_app_header),_instrumenter=require("./controller_views/instrumenter"),_instrumenter2=_interopRequireDefault(_instrumenter),_checkmail=require("../../molecules/checkmail"),_checkmail2=_interopRequireDefault(_checkmail),_lazy_component=require("../../atoms/lazy_component"),_mail_app=require("./styles/mail_app"),_mail_app2=_interopRequireDefault(_mail_app),_theme_provider=require("../../molecules/theme_provider"),themer=_interopRequireWildcard(_theme_provider),_keyboard_shortcut_manager=require("../../molecules/keyboard_shortcut_manager/keyboard_shortcut_manager.jsx"),_keyboard_shortcut_manager2=_interopRequireDefault(_keyboard_shortcut_manager),_input_mode_detector=require("../../atoms/input_mode_detector.jsx"),_input_mode_detector2=_interopRequireDefault(_input_mode_detector),_rum_controller=require("./controller_views/rum_controller.jsx"),_rum_controller2=_interopRequireDefault(_rum_controller),_app_layout=require("./controller_views/app_layout.jsx"),_app_layout2=_interopRequireDefault(_app_layout),_browser_notification=require("./controller_views/browser_notification"),_browser_notification2=_interopRequireDefault(_browser_notification),_offline_checker=require("../../molecules/offline_checker"),_offline_checker2=_interopRequireDefault(_offline_checker),_rum=require("../../client/rum"),_reactIntl=require("react-intl"),_mail_constants=require("../../platform/mail_constants"),_route=require("../../platform/utils/route"),_route_map=require("../route_map"),NotificationComponent=_controller_views2.default.Notification,_routesByApp$Apps$MAI=_route_map.routesByApp[_mail_constants.Apps.MAIL_APP],AppPaths=_routesByApp$Apps$MAI.paths,actionCreators=_routesByApp$Apps$MAI.actionCreators,strings=(0,_reactIntl.defineMessages)({tabs_nav:{id:"landmark.tabs",defaultMessage:"Tabs"},heading_cheatsheet:{id:"keyboardShortcut.heading_cheatsheet",defaultMessage:"Press question mark key to invoke the keyboard shortcuts cheatsheet"}}),MailApp=_react2.default.createClass({displayName:"MailApp",contextTypes:{executeAction:_react.PropTypes.func,config:_react.PropTypes.object,store:_react.PropTypes.object,intl:_reactIntl.intlShape.isRequired,getCss:_react.PropTypes.func},componentDidMount:function(){window.addEventListener("visibilitychange",this._handleVisibilityChange),window.addEventListener("blur",this._handleVisibilityChange),window.addEventListener("focus",this._handleVisibilityChange),(0,_rum.fireNavTimingBeacon)()},componentWillUnmount:function(){window.removeEventListener("visibilitychange",this._handleVisibilityChange),window.removeEventListener("blur",this._handleVisibilityChange),window.removeEventListener("focus",this._handleVisibilityChange)},_handleVisibilityChange:function(e){var t=void 0;t="blur"!==e.type&&("focus"===e.type||"visible"===document.visibilityState),this.context.executeAction(_actions.notifyVisibilityChange,{isVisible:t})},render:function(){var e=this.props,t=this.context,r=t.config,a=!!e.multiTaskModeSetting,i=this.context.getCss(_mail_app2.default,{tabs:a,ads:e.hasAds}),n=this.context.intl.formatMessage;return _react2.default.createElement(_reactRedux.Provider,{store:this.context.store},_react2.default.createElement(_input_mode_detector2.default,{className:i.inputModeWrapper},_react2.default.createElement("div",{id:"app","data-test-id":"mail-app",className:i.container,tabIndex:-1},_react2.default.createElement(_lazy_component.LazyComponent,{defer:!0,import:"../../molecules/timezone_check",_moduleGetter:function(){return require("../../molecules/timezone_check")}}),e.hasAds?_react2.default.createElement(_ad_debug2.default,null):null,_react2.default.createElement("section",{className:i.appHeader,role:"banner","data-yaft-module":"norrin_header"},r.ybar?_react2.default.createElement("div",{className:i.ybar}):_react2.default.createElement(_app_header2.default,null),a&&_react2.default.createElement("div",{className:i.tabWrapper,role:"navigation","aria-label":n(strings.tabs_nav)},_react2.default.createElement("div",{className:i.tabSpace},""),_react2.default.createElement("div",{className:i.tab},_react2.default.createElement(_tabs2.default,null)))),_react2.default.createElement(_app_layout2.default,e),_react2.default.createElement(_checkmail2.default,null),_react2.default.createElement(NotificationComponent,null),_react2.default.createElement(_keyboard_shortcut_manager2.default,null),_react2.default.createElement(_svg_defs2.default,null),_react2.default.createElement(_document_title_updater2.default,null),_react2.default.createElement(_rum_controller2.default,null),_react2.default.createElement(_browser_notification2.default,null),r.offlineChecking&&_react2.default.createElement(_offline_checker2.default,null),_react2.default.createElement(_pager2.default,null),_react2.default.createElement(_lazy_component.LazyComponent,{defer:!0,import:"./controller_views/bad_resolution",_moduleGetter:function(){return require("./controller_views/bad_resolution")}}),_react2.default.createElement(_lazy_component.LazyComponent,{defer:!0,import:"./controller_views/print.jsx",_moduleGetter:function(){return require("./controller_views/print.jsx")}}),_react2.default.createElement(_instrumenter2.default,null),_react2.default.createElement(_lazy_component.LazyComponent,{defer:!0,import:"./controller_views/scout.jsx",_moduleGetter:function(){return require("./controller_views/scout.jsx")}}),r.promptUnsaved&&_react2.default.createElement(_unsaved_data_warner2.default,null),_react2.default.createElement(_lazy_component.LazyComponent,{defer:!0,import:"./controller_views/heartbeat",_moduleGetter:function(){return require("./controller_views/heartbeat")}}),r.emptyFolderVideo?_react2.default.createElement(_lazy_component.LazyComponent,{defer:!0,import:"../../molecules/empty_folder_video",_moduleGetter:function(){return require("../../molecules/empty_folder_video")}}):null,r.unsubscribe&&_react2.default.createElement(_lazy_component.LazyComponent,{defer:!0,import:"./controller_views/unsubscribe",_moduleGetter:function(){return require("./controller_views/unsubscribe")}}),!(!r.secureMode&&!r.secureCryptoMode)&&_react2.default.createElement(_lazy_component.LazyComponent,{defer:!0,import:"./controller_views/crypto_iframe",_moduleGetter:function(){return require("./controller_views/crypto_iframe")}})),_react2.default.createElement("div",{className:i.accessible,role:"heading","aria-label":n(strings.heading_cheatsheet)})))}});exports.default=(0,_router2.default)(themer.provide((0,_ads2.default)(MailApp)),{routes:Object.keys(AppPaths).map(function(e){var t;return t={},t[e]={path:_mail_constants.YCPI_PATH_PREFIX+AppPaths[e],actionCreator:actionCreators[e]},t}),filterQueryParams:_route.filterQueryParams});var rawMailApp=exports.rawMailApp=themer.provide(MailApp);
},{"../../atoms/input_mode_detector.jsx":72,"../../atoms/lazy_component":"./atoms/lazy_component","../../atoms/svg_defs.jsx":99,"../../client/rum":104,"../../molecules/ads/ad_debug.jsx":106,"../../molecules/checkmail":132,"../../molecules/empty_folder_video":"./molecules/empty_folder_video","../../molecules/keyboard_shortcut_manager/keyboard_shortcut_manager.jsx":189,"../../molecules/offline_checker":252,"../../molecules/theme_provider":"./molecules/theme_provider","../../molecules/timezone_check":"./molecules/timezone_check","../../platform/mail_constants":"./platform/mail_constants","../../platform/utils/route":"./platform/utils/route","../route_map":"./apps/route_map","./actions":"./apps/mail/actions","./controller_views":26,"./controller_views/app_header":18,"./controller_views/app_layout.jsx":19,"./controller_views/bad_resolution":"./apps/mail/controller_views/bad_resolution","./controller_views/browser_notification":21,"./controller_views/crypto_iframe":"./apps/mail/controller_views/crypto_iframe","./controller_views/document_title_updater.jsx":24,"./controller_views/heartbeat":"./apps/mail/controller_views/heartbeat","./controller_views/instrumenter":27,"./controller_views/pager":34,"./controller_views/print.jsx":"./apps/mail/controller_views/print","./controller_views/rum_controller.jsx":37,"./controller_views/scout.jsx":"./apps/mail/controller_views/scout","./controller_views/tabs.jsx":45,"./controller_views/unsaved_data_warner.jsx":49,"./controller_views/unsubscribe":"./apps/mail/controller_views/unsubscribe","./providers/ads":57,"./providers/router":58,"./styles/mail_app":61,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js","react-redux":"./node_modules/react-redux/lib/index.js"}],13:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ComposeStyler(e){var s=e.children;return _react2.default.createElement("div",{className:classNames.compose,"data-test-id":"compose-styler"},s)}exports.__esModule=!0,exports.default=ComposeStyler;var _react=require("react"),_react2=_interopRequireDefault(_react),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_compose=require("../styles/compose"),_compose2=_interopRequireDefault(_compose),classNames=(0,_css2.default)(_compose2.default);module.exports=exports.default;
},{"../styles/compose":60,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],14:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),strings=(0,_reactIntl.defineMessages)({htmlTitle:{id:"html_title",defaultMessage:"\n            {numUnread, plural,\n                =0 {}\n                one {(# unread) - }\n                other {(# unread) - }\n            }{emailAddress} - {yahooBrand}\n        "},htmlTitleNewMessages:{id:"html_title_new_messages",defaultMessage:"{newItemCount, plural,\n            =1 {# New Message}\n            other {# New Messages}\n        }"},yahooMailBrandName:{id:"mail.yahoo_mail_brand_name",defaultMessage:"Yahoo Mail"}}),DocumentTitle=_react2.default.createClass({displayName:"DocumentTitle",contextTypes:{config:_react.PropTypes.object,intl:_reactIntl.intlShape},componentDidMount:function(){this.updateTitle()},componentWillUnmount:function(){clearTimeout(this.flashTitleTimeout)},componentDidUpdate:function(){clearTimeout(this.flashTitleTimeout),this.updateTitle()},updateTitle:function(){var e=this.props,t=e.defaultFolderUnreadCount,i=e.activeEmailAddress,n=e.newItemCount,a=this.getStandardTitle(t,i);if(n){var l=this.getNotificationTitle(n);this.flashTitle(l,a,4)}else document.title=a},getStandardTitle:function(e,t){var i=this.context.intl.formatMessage;return i(strings.htmlTitle,{numUnread:e,emailAddress:t,yahooBrand:i(strings.yahooMailBrandName)})},getNotificationTitle:function(e){var t=this.context.intl.formatMessage;return t(strings.htmlTitleNewMessages,{newItemCount:e})},flashTitle:function(e,t,i){var n=this;if(0!==i){var a=this.context.config,l=a.documentTitleNotificationDuration,o=a.documentTitleStandardDuration,s=i%2===0;document.title=s?e:t,this.flashTitleTimeout=setTimeout(function(){n.flashTitle(e,t,i-1)},s?l:o)}},render:function(){return null}});exports.default=DocumentTitle,module.exports=exports.default;
},{"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],15:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),Favicon=_react2.default.createClass({displayName:"Favicon",componentDidMount:function(){var e=this;this.favicon=document.getElementById("favicon"),this.faviconDefaultImage=this.favicon.href,this.faviconAlertImage=this.favicon.href,this.generateFaviconAlert(this.favicon.href,function(t){e.faviconAlertImage=t})},shouldComponentUpdate:function(e){return!(0===e.newItemCount&&this.favicon.href===this.faviconDefaultImage||e.newItemCount>0&&this.favicon.href===this.faviconAlertImage)},componentDidUpdate:function(){this.updateFavicon()},updateFavicon:function(){var e=this.props.newItemCount;this.favicon.href=0===e?this.faviconDefaultImage:this.faviconAlertImage,document.head.removeChild(this.favicon),document.head.appendChild(this.favicon)},generateFaviconAlert:function(e,t){var n=document.createElement("canvas"),a=new Image;n.height=n.width=32,a.crossOrigin="anonymous",a.onload=function(){var e=n.getContext("2d");e.beginPath(),e.drawImage(this,0,0),e.fillStyle="red",e.arc(28,6,4,0,2*Math.PI),e.fill(),t(n.toDataURL("image/x-icon"))},a.src=e},render:function(){return null}});exports.default=Favicon,module.exports=exports.default;
},{"react":"./node_modules/react/react.js"}],16:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function MailCount(e,t){var a=e.selectionCount,s=t.intl;return _react2.default.createElement("div",{className:classNames.container,"data-test-id":"selection-count","data-test-count":a},_react2.default.createElement("div",{className:classNames.wrapper},_react2.default.createElement("div",{className:classNames.svgWrapper},_react2.default.createElement(_svg_image2.default,{kind:_svg_image3.Kinds.SELECTED_MESSAGES,width:_svg_image3.SELECTED_MESSAGES_SIZE,height:_svg_image3.SELECTED_MESSAGES_SIZE,altText:" "})),a>0&&_react2.default.createElement("div",{className:classNames.countWrapper},_react2.default.createElement("span",{className:classNames.count,"data-test-id":"selection-count-node"},s.formatNumber(a)))))}exports.__esModule=!0,exports.default=MailCount;var _react=require("react"),_react2=_interopRequireDefault(_react),_svg_image=require("../../../atoms/svg_image.jsx"),_svg_image2=_interopRequireDefault(_svg_image),_svg_image3=require("../../../atoms/constants/svg_image"),_reactIntl=require("react-intl"),_mail_count=require("../styles/mail_count"),_mail_count2=_interopRequireDefault(_mail_count),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),classNames=(0,_css2.default)(_mail_count2.default);MailCount.contextTypes={intl:_reactIntl.intlShape},module.exports=exports.default;
},{"../../../atoms/constants/svg_image":"./atoms/constants/svg_image","../../../atoms/svg_image.jsx":"./atoms/svg_image","../styles/mail_count":62,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],17:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}exports.__esModule=!0;var _routes,_actions=require("./actions"),ContainerActions=_interopRequireWildcard(_actions),_controller_views=require("./controller_views"),_controller_views2=_interopRequireDefault(_controller_views),_mail_constants=require("../../platform/mail_constants"),_route_map=require("../route_map"),_hoc=require("./hoc"),_hoc2=_interopRequireDefault(_hoc),_ads=require("../../stores/ads"),_ads2=_interopRequireDefault(_ads),_application=require("../../stores/application"),_application2=_interopRequireDefault(_application),_checkmail=require("../../stores/checkmail"),_checkmail2=_interopRequireDefault(_checkmail),_document=require("../../stores/document"),_document2=_interopRequireDefault(_document),_error=require("../../stores/error"),_error2=_interopRequireDefault(_error),_i13n=require("../../stores/i13n"),_i13n2=_interopRequireDefault(_i13n),_item_list_ui=require("../../stores/item_list_ui"),_item_list_ui2=_interopRequireDefault(_item_list_ui),_keyboard_shortcuts=require("../../stores/keyboard_shortcuts"),_keyboard_shortcuts2=_interopRequireDefault(_keyboard_shortcuts),_mail=require("../../stores/mail"),_mail2=_interopRequireDefault(_mail),_message_group_ui=require("../../stores/message_group_ui"),_message_group_ui2=_interopRequireDefault(_message_group_ui),_notification=require("../../stores/notification"),_notification2=_interopRequireDefault(_notification),_pages=require("../../stores/pages"),_pages2=_interopRequireDefault(_pages),_rum=require("../../stores/rum"),_rum2=_interopRequireDefault(_rum),_suggestions=require("../../stores/suggestions"),_suggestions2=_interopRequireDefault(_suggestions),_user_preferences=require("../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_xobni=require("../../stores/xobni"),_xobni2=_interopRequireDefault(_xobni),_features=require("../../stores/features"),_features2=_interopRequireDefault(_features),_fluxible_context_plugin=require("../../platform/fluxible_context_plugin"),_fluxible_context_plugin2=_interopRequireDefault(_fluxible_context_plugin),_routesByApp$Apps$MAI=_route_map.routesByApp[_mail_constants.Apps.MAIL_APP],paths=_routesByApp$Apps$MAI.paths,container=_routesByApp$Apps$MAI.container,cssBundles=_routesByApp$Apps$MAI.cssBundles,jsBundles=_routesByApp$Apps$MAI.jsBundles,AppConfig={name:_mail_constants.Apps.MAIL_APP,component:_hoc2.default,routes:(_routes={},_routes[_mail_constants.RouteNames.BASE]={method:"GET",path:paths[_mail_constants.RouteNames.BASE],handler:_controller_views2.default[_mail_constants.PageTypes.MAIL_READER],action:ContainerActions.openDefaultFolder},_routes[_mail_constants.RouteNames.FOLDER]={method:"GET",path:paths[_mail_constants.RouteNames.FOLDER],handler:_controller_views2.default[_mail_constants.PageTypes.MAIL_READER],action:ContainerActions.openFolder},_routes[_mail_constants.RouteNames.ATTACHMENT]={method:"GET",path:paths[_mail_constants.RouteNames.ATTACHMENT],handler:_controller_views2.default[_mail_constants.PageTypes.PREVIEW],action:ContainerActions.openAttachment},_routes[_mail_constants.RouteNames.SPONSORED_MESSAGE]={method:"GET",path:paths[_mail_constants.RouteNames.SPONSORED_MESSAGE],handler:_controller_views2.default[_mail_constants.PageTypes.SPONSORED_MESSAGE],action:ContainerActions.openSponsoredMessage},_routes[_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST]={method:"GET",path:paths[_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST],handler:_controller_views2.default[_mail_constants.PageTypes.MESSAGE],action:ContainerActions.launchMessageGroupFromRoute},_routes[_mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST]={method:"GET",path:paths[_mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST],handler:_controller_views2.default[_mail_constants.PageTypes.MESSAGE],action:ContainerActions.launchMessageGroupFromRoute},_routes[_mail_constants.RouteNames.NEW_DRAFT]={method:"GET",path:paths[_mail_constants.RouteNames.NEW_DRAFT],handler:_controller_views2.default[_mail_constants.PageTypes.COMPOSE],action:ContainerActions.openCompose},_routes[_mail_constants.RouteNames.EDIT_DRAFT]={method:"GET",path:paths[_mail_constants.RouteNames.EDIT_DRAFT],handler:_controller_views2.default[_mail_constants.PageTypes.COMPOSE],action:ContainerActions.openDraft},_routes[_mail_constants.RouteNames.SEARCH]={method:"GET",path:paths[_mail_constants.RouteNames.SEARCH],handler:_controller_views2.default[_mail_constants.PageTypes.MAIL_READER],action:ContainerActions.launchSearch},_routes[_mail_constants.RouteNames.SETTINGS]={method:"GET",path:paths[_mail_constants.RouteNames.SETTINGS],handler:_controller_views2.default[_mail_constants.PageTypes.SETTINGS],action:ContainerActions.openSettings},_routes[_mail_constants.RouteNames.TUTORIAL]={method:"GET",path:paths[_mail_constants.RouteNames.TUTORIAL],handler:_controller_views2.default[_mail_constants.PageTypes.TUTORIAL],action:ContainerActions.openTutorial},_routes),stores:[_ads2.default,_application2.default,_notification2.default,_user_preferences2.default,_xobni2.default,_item_list_ui2.default,_mail2.default,_pages2.default,_keyboard_shortcuts2.default,_i13n2.default,_rum2.default,_error2.default,_suggestions2.default,_checkmail2.default,_document2.default,_message_group_ui2.default,_features2.default],plugins:[_fluxible_context_plugin2.default],cssBundles:cssBundles,jsBundles:jsBundles,container:container};exports.default=AppConfig,module.exports=exports.default;
},{"../../platform/fluxible_context_plugin":291,"../../platform/mail_constants":"./platform/mail_constants","../../stores/ads":"./stores/ads","../../stores/application":"./stores/application","../../stores/checkmail":"./stores/checkmail","../../stores/document":"./stores/document","../../stores/error":330,"../../stores/features":"./stores/features","../../stores/i13n":"./stores/i13n","../../stores/item_list_ui":"./stores/item_list_ui","../../stores/keyboard_shortcuts":331,"../../stores/mail":"./stores/mail","../../stores/message_group_ui":"./stores/message_group_ui","../../stores/notification":341,"../../stores/pages":"./stores/pages","../../stores/rum":342,"../../stores/suggestions":"./stores/suggestions","../../stores/user_preferences":"./stores/user_preferences","../../stores/xobni":"./stores/xobni","../route_map":"./apps/route_map","./actions":"./apps/mail/actions","./controller_views":26,"./hoc":50}],18:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var r=e.getStore(_mail2.default),t=e.getStore(_pages2.default),a=e.getStore(_user_preferences2.default);return Object.assign({primaryAccountAddress:r.getPrimaryAccount().email,tabsVisible:a.getMultiTaskModeSetting(),defaultRouteURL:t.getURL(t.getDefaultRoute()),partnerBrand:e.config.partnerBrand,settingsMenuComponent:_react2.default.createElement(_settings_menu2.default,null),searchComponent:e.config.mailSearch?_react2.default.createElement(_search_bar2.default,null):null},a.getPreferences())}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_header=require("../../../molecules/header"),_header2=_interopRequireDefault(_header),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_user_preferences=require("../../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_settings_menu=require("./settings_menu"),_settings_menu2=_interopRequireDefault(_settings_menu),_search_bar=require("./search_bar"),_search_bar2=_interopRequireDefault(_search_bar);exports.default=(0,_fluxibleAddonsReact.connectToStores)(_header2.default,[_pages2.default,_user_preferences2.default,_mail2.default],getStateFromStores,{config:_react.PropTypes.object});
},{"../../../molecules/header":179,"../../../stores/mail":"./stores/mail","../../../stores/pages":"./stores/pages","../../../stores/user_preferences":"./stores/user_preferences","./search_bar":38,"./settings_menu":42,"fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],19:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var t=e.getStore(_application2.default),s=e.getStore(_features2.default),r=e.getStore(_pages2.default),i=(0,_reducers_selectors.selectors)(e.store.getState()),a=i.getFeaturesSelectors,o=a(),_=o.getSetting(_mail_constants.Settings.PREVIEW_PANE),u=r.getActivePageRoute(),n=u.name===_mail_constants.RouteNames.SEARCH,l=u.name===_mail_constants.RouteNames.FOLDER,p=(0,_list.getListIdFromRoute)(u),c=(0,_list.getListContentTypeFromListId)(p),d=void 0;if(n||l){var g=e.getStore(_item_list_ui2.default);d=g.getActiveAttachmentId(p)}else{var m=e.getStore(_message_group_ui2.default),f=u.params.mid;d=m.getActiveAttachmentId(p,f)}var S=e.getStore(_user_preferences2.default).getHideAdSetting(),R=e.config,q=R.attachmentPreview,A=R.mailSearchRightRail,h=!!A&&n&&!!(0,_list.getEmailAddressFromListId)(p),y=q&&!!d,w=h,C=c!==_mail_constants.ListContentTypes.IMAGES&&h,D=c!==_mail_constants.ListContentTypes.DOCUMENTS&&h,E=c!==_mail_constants.ListContentTypes.MESSAGES&&h;return{listId:p,previewPaneSetting:_,windowDimensions:t.getWindowDimensions(),isWindowResizingDone:t.isWindowResizingDone(),folderListSortOrder:r.getSortOrderForFolderRoute(),isSettings:u.name===_mail_constants.RouteNames.SETTINGS,showMailOnboardingCue:s.isEnabled("mailOnboardingCue"),showSsaBreachSecurityAlert:s.isEnabled("ssaBreachSecurityAlert"),showAptSecurityCue:s.isEnabled("aptSecurityCue"),showNewUserOnboardingCue:s.isEnabled("newUserOnboardingCue"),hideAdUpsellSetting:S,hasAttachmentPreview:y,hasContactCard:w,hasPhotos:C,hasDocs:D,hasMessages:E}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_fluxibleAddonsReact=require("fluxible-addons-react"),_application=require("../../../stores/application"),_application2=_interopRequireDefault(_application),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_features=require("../../../stores/features"),_features2=_interopRequireDefault(_features),_message_group_ui=require("../../../stores/message_group_ui"),_message_group_ui2=_interopRequireDefault(_message_group_ui),_item_list_ui=require("../../../stores/item_list_ui"),_item_list_ui2=_interopRequireDefault(_item_list_ui),_user_preferences=require("../../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_app_layout=require("../../../molecules/app_layout"),_app_layout2=_interopRequireDefault(_app_layout),_reducers_selectors=require("../../../reducers_selectors"),_mail_constants=require("../../../platform/mail_constants"),_list=require("../../../platform/utils/list"),AppLayoutControllerView=(0,_fluxibleAddonsReact.connectToStores)(_app_layout2.default,[_application2.default,_features2.default,_pages2.default,_message_group_ui2.default,_item_list_ui2.default,_user_preferences2.default],getStateFromStores,{config:_react.PropTypes.object,store:_react.PropTypes.object});exports.default=AppLayoutControllerView;
},{"../../../molecules/app_layout":119,"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/list":"./platform/utils/list","../../../reducers_selectors":"./reducers_selectors","../../../stores/application":"./stores/application","../../../stores/features":"./stores/features","../../../stores/item_list_ui":"./stores/item_list_ui","../../../stores/message_group_ui":"./stores/message_group_ui","../../../stores/pages":"./stores/pages","../../../stores/user_preferences":"./stores/user_preferences","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],20:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var t=e.getStore(_mail2.default);return Object.assign({},t.getAsyncTaskPayload(),{task:t.getAsyncTask()})}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _fluxibleAddonsReact=require("fluxible-addons-react"),_async_task=require("../../../molecules/async_task"),_async_task2=_interopRequireDefault(_async_task),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail);exports.default=(0,_fluxibleAddonsReact.connectToStores)(_async_task2.default,[_mail2.default],getStateFromStores);
},{"../../../molecules/async_task":122,"../../../stores/mail":"./stores/mail","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js"}],21:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var t=e.getStore(_pages2.default).getActivePageRoute(),r=(0,_list.getListIdFromRoute)(t),i=(0,_list.getListContentTypeFromListId)(r),s=e.getStore(_mail2.default).getNewListItems(r),o=e.getStore(_application2.default).isAppVisible(),a=(0,_reducers_selectors.selectors)(e.store.getState()),n=a.getFeaturesSelectors,l=n(),u=l.isEnabled(_mail_constants.Settings.DESKTOP_NOTIFICATION),c=[];return i===_mail_constants.ListContentTypes.MESSAGES&&(c=s.map(function(t){return e.getStore(_mail2.default).getMessageGroupById(t)})),{items:c,listContentType:i,listId:r,isAppVisible:o,browserNotifications:u}}exports.__esModule=!0,exports.BrowserNotificationControllerView=void 0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_application=require("../../../stores/application"),_application2=_interopRequireDefault(_application),_user_preferences=require("../../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_new_message=require("../../../molecules/browser_notification/new_message"),_new_message2=_interopRequireDefault(_new_message),_list=require("../../../platform/utils/list"),_object=require("../../../platform/utils/object"),_mail_constants=require("../../../platform/mail_constants"),_reducers_selectors=require("../../../reducers_selectors"),BrowserNotificationControllerView=exports.BrowserNotificationControllerView=_react2.default.createClass({displayName:"BrowserNotificationControllerView",contextTypes:{config:_react.PropTypes.object},componentDidMount:function(){var e=this.props.browserNotifications;e&&window.Notification&&this.requestPersmission()},componentDidUpdate:function(e){var t=this.props.browserNotifications;t&&window.Notification&&e.browserNotifications!==t&&this.requestPersmission()},requestPersmission:function(){var e=this;window.Notification.requestPermission(function(t){"granted"===t&&e.setState({hasPermission:!0})})},getInitialState:function(){return{hasPermission:!1}},render:function(){var e=this.props,t=e.items,r=e.listContentType,i=e.isAppVisible,s=e.listId,o=e.browserNotifications;return 0!==t.length&&this.state.hasPermission&&o&&!i?_react2.default.createElement("div",null,r===_mail_constants.ListContentTypes.MESSAGES?_react2.default.createElement(_new_message2.default,{messageGroups:t,listId:s}):null):null}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(BrowserNotificationControllerView,[_mail2.default,_application2.default,_user_preferences2.default,_pages2.default],getStateFromStores,{store:_react2.default.PropTypes.object});
},{"../../../molecules/browser_notification/new_message":129,"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/list":"./platform/utils/list","../../../platform/utils/object":"./platform/utils/object","../../../reducers_selectors":"./reducers_selectors","../../../stores/application":"./stores/application","../../../stores/mail":"./stores/mail","../../../stores/pages":"./stores/pages","../../../stores/user_preferences":"./stores/user_preferences","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],22:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_compose=require("../../../../molecules/compose"),_compose2=_interopRequireDefault(_compose),_actions=require("../../actions"),ContainerActions=_interopRequireWildcard(_actions),_user_preferences=require("../../../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_mail=require("../../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_xobni=require("../../../../stores/xobni"),_xobni2=_interopRequireDefault(_xobni),_features=require("../../../../stores/features"),_features2=_interopRequireDefault(_features),_get_state_from_stores=require("../get_state_from_stores"),_compose_styler=require("../../atoms/compose_styler.jsx"),_compose_styler2=_interopRequireDefault(_compose_styler),ComposeContollerView=_react2.default.createClass({displayName:"ComposeContollerView",contextTypes:{executeAction:_react.PropTypes.func},handleClose:function(){this.context.executeAction(ContainerActions.closeActivePage)},render:function(){var e=this.props.composeData,t=e&&e.csid;return _react2.default.createElement(_compose_styler2.default,null,_react2.default.createElement(_compose2.default,_extends({},this.props,{key:t,onClose:this.handleClose,onSendSuccess:this.handleClose})))}});ComposeContollerView=(0,_fluxibleAddonsReact.connectToStores)(ComposeContollerView,[_user_preferences2.default,_mail2.default,_xobni2.default,_features2.default],_get_state_from_stores.getComposeStateFromStores,{config:_react2.default.PropTypes.object,store:_react2.default.PropTypes.object}),exports.default=ComposeContollerView,module.exports=exports.default;
},{"../../../../molecules/compose":147,"../../../../stores/features":"./stores/features","../../../../stores/mail":"./stores/mail","../../../../stores/user_preferences":"./stores/user_preferences","../../../../stores/xobni":"./stores/xobni","../../actions":"./apps/mail/actions","../../atoms/compose_styler.jsx":13,"../get_state_from_stores":25,"fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],23:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e,t){var r=e.getStore(_mail2.default),a=t.emailAddress,o=t.withBackground,c=t.isCompose,n=r.getContactRecordState(a),l=r.getContactByEmail(a);return{emailAddress:a,contact:l,contactState:n,withBackground:o,isCompose:c}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_object=require("../../../platform/utils/object"),_mail_constants=require("../../../platform/mail_constants"),_types=require("../../../types"),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_contact_card=require("../../../molecules/contact_card"),_contact_card2=_interopRequireDefault(_contact_card),ContactCardControllerView=_react2.default.createClass({displayName:"ContactCardControllerView",render:function(){return _react2.default.createElement(_contact_card2.default,_extends({},this.props,{key:this.props.emailAddress}))}});ContactCardControllerView=(0,_fluxibleAddonsReact.connectToStores)(ContactCardControllerView,[_mail2.default],getStateFromStores),exports.default=ContactCardControllerView;
},{"../../../molecules/contact_card":159,"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/object":"./platform/utils/object","../../../stores/mail":"./stores/mail","../../../types":"./types","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],24:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var t=e.getStore(_mail2.default),r=t.getActiveAccountId(),a=t.getDefaultFolderForAccount(r),u=t.getFolderUnreadCount(a.id),o=e.getStore(_user_preferences2.default).getMailboxes(),i=o[0].email,l=e.getStore(_pages2.default).getActivePageRoute(),n=(0,_list.getListIdFromRoute)(l),s=t.getTotalNewListItemCount(n);return{defaultFolderUnreadCount:u,activeEmailAddress:i,newItemCount:s}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_user_preferences=require("../../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_fluxibleAddonsReact=require("fluxible-addons-react"),_document_title=require("../atoms/document_title.jsx"),_document_title2=_interopRequireDefault(_document_title),_favicon=require("../atoms/favicon.jsx"),_favicon2=_interopRequireDefault(_favicon),_list=require("../../../platform/utils/list"),DocumentTitleUpdater=_react2.default.createClass({displayName:"DocumentTitleUpdater",shouldComponentUpdate:function(e){var t=e.defaultFolderUnreadCount,r=e.activeEmailAddress,a=e.newItemCount,u=this.props,o=u.defaultFolderUnreadCount,i=u.activeEmailAddress,l=u.newItemCount;return t!==o||r!==i||a!==l},render:function(){return _react2.default.createElement("div",null,_react2.default.createElement(_document_title2.default,this.props),_react2.default.createElement(_favicon2.default,this.props))}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(DocumentTitleUpdater,[_mail2.default,_user_preferences2.default],getStateFromStores);
},{"../../../platform/utils/list":"./platform/utils/list","../../../stores/mail":"./stores/mail","../../../stores/pages":"./stores/pages","../../../stores/user_preferences":"./stores/user_preferences","../atoms/document_title.jsx":14,"../atoms/favicon.jsx":15,"fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],25:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getComposeStateFromStores(e,t){var o=e.getStore(_application2.default),a=e.getStore(_user_preferences2.default),r=e.getStore(_mail2.default),s=e.getStore(_xobni2.default),i=e.getStore(_features2.default),n=e.config,c=n.composeSaveInterval,u=n.rteFormattingToolbar,l=(0,_reducers_selectors.selectors)(e.store.getState()),_=l.getFeaturesSelectors,p=_(),m={dateFormattingOption:o.getDateFormattingOption(),isXobnified:s.getIsXobnified(),autoSuggestions:s.getSuggestions(),saveInterval:c,richTextMode:u,mailboxId:a.getMailboxes()[0].id,showStationeryCue:i.isEnabled("stationeryCue"),showHSStationeryCue:i.isEnabled("HSStationeryCue"),stationeryDefaultTheme:a.getStationeryDefaultTheme(),linkEnhancer:a.getLinkEnhancerSetting(),composeFontFamily:p.getSetting(_mail_constants.Settings.COMPOSE_FONT_FAMILY),composeFontSize:p.getSetting(_mail_constants.Settings.COMPOSE_FONT_SIZE)},g=e.getStore(_pages2.default).getActivePageRoute()||{},d=g.params,S=g.name,f=void 0,D=void 0,R=void 0;if(t&&t.composeData&&(f=t.composeData,D=f.accountId),S===_mail_constants.RouteNames.NEW_DRAFT){var F=d.csid;F=F?decodeURIComponent(F):f.csid,m.composeData=r.getComposeData(F),m.composeDataState=r.getComposeDataState(F),m.initialShowSubject=!0}else if(S===_mail_constants.RouteNames.EDIT_DRAFT){var q=decodeURIComponent(d.mid),v=r.getMessageMetaRecordState(q);if(v!==_mail_constants.RecordStates.LOADED)return{};var I=r.getCsidByMessageId(q);m.composeDataState=r.getComposeDataState(I),m.composeDataState===_mail_constants.RecordStates.LOADED&&(m.composeData=r.getComposeData(I),m.listId=(0,_list.getListIdFromFolderId)(r.getFolderIdForMessage(q))),m.initialShowSubject=!0,m.composeDataState===_mail_constants.RecordStates.ERROR&&(m.error=new Error("Unable to fetch message "+q))}m.composeData&&(D=m.composeData.accountId),R=D?r.getAccountById(D):r.getActiveAccount();var b=AccountUtils.flattenAccounts(R);return m.showFrom=r.getRootAccounts().length>1||b.length>1,m.accounts=b,m}exports.__esModule=!0,exports.getComposeStateFromStores=getComposeStateFromStores;var _application=require("../../../stores/application"),_application2=_interopRequireDefault(_application),_user_preferences=require("../../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_xobni=require("../../../stores/xobni"),_xobni2=_interopRequireDefault(_xobni),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_features=require("../../../stores/features"),_features2=_interopRequireDefault(_features),_account=require("../../../platform/utils/account"),AccountUtils=_interopRequireWildcard(_account),_list=require("../../../platform/utils/list"),_mail_constants=require("../../../platform/mail_constants"),_reducers_selectors=require("../../../reducers_selectors");
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/account":"./platform/utils/account","../../../platform/utils/list":"./platform/utils/list","../../../reducers_selectors":"./reducers_selectors","../../../stores/application":"./stores/application","../../../stores/features":"./stores/features","../../../stores/mail":"./stores/mail","../../../stores/pages":"./stores/pages","../../../stores/user_preferences":"./stores/user_preferences","../../../stores/xobni":"./stores/xobni"}],26:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _ControllerViews,_mail_constants=require("../../../platform/mail_constants"),_compose=require("./compose"),_compose2=_interopRequireDefault(_compose),_message=require("./message"),_message2=_interopRequireDefault(_message),_navigation=require("./navigation.jsx"),_navigation2=_interopRequireDefault(_navigation),_notification=require("../../../molecules/notification"),_notification2=_interopRequireDefault(_notification),_mail_reader=require("./mail_reader.jsx"),_mail_reader2=_interopRequireDefault(_mail_reader),_index=require("./settings/index.js"),_index2=_interopRequireDefault(_index),_previewr_wrapper=require("./previewr_wrapper.jsx"),_previewr_wrapper2=_interopRequireDefault(_previewr_wrapper),_sponsored_message=require("./sponsored_message.jsx"),_sponsored_message2=_interopRequireDefault(_sponsored_message),_tutorial=require("./tutorial"),_tutorial2=_interopRequireDefault(_tutorial),ControllerViews=(_ControllerViews={},_ControllerViews[_mail_constants.PageTypes.COMPOSE]=_compose2.default,_ControllerViews[_mail_constants.PageTypes.MESSAGE]=_message2.default,_ControllerViews[_mail_constants.PageTypes.NAVIGATION]=_navigation2.default,_ControllerViews[_mail_constants.PageTypes.MAIL_READER]=_mail_reader2.default,_ControllerViews[_mail_constants.PageTypes.SETTINGS]=_index2.default,_ControllerViews[_mail_constants.PageTypes.PREVIEW]=_previewr_wrapper2.default,_ControllerViews[_mail_constants.PageTypes.SPONSORED_MESSAGE]=_sponsored_message2.default,_ControllerViews[_mail_constants.PageTypes.TUTORIAL]=_tutorial2.default,_ControllerViews);ControllerViews=Object.assign({Notification:_notification2.default},ControllerViews),exports.default=ControllerViews,module.exports=exports.default;
},{"../../../molecules/notification":245,"../../../platform/mail_constants":"./platform/mail_constants","./compose":22,"./mail_reader.jsx":31,"./message":32,"./navigation.jsx":33,"./previewr_wrapper.jsx":35,"./settings/index.js":41,"./sponsored_message.jsx":44,"./tutorial":47}],27:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function addSpaceIdToYahooI13nObject(e){(0,_generic.isBrowser)()&&(0,_object.getIn)(window,"YAHOO.i13n")&&(window.YAHOO.i13n.SPACEID=e)}function getStateFromStores(e){var t=e.getStore(_i13n2.default),r=e.getStore(_mail2.default),n=e.getStore(_user_preferences2.default),i=(0,_reducers_selectors.selectors)(e.store.getState()),o=i.getFeaturesSelectors,a=o();return{spaceId:t.getCurrentSpaceId(),pageViewCount:t.getPageViewCount(),vwCntxt:t.getActiveViewContext(),activeAccount:r.getActiveAccount(),imapInAccountsCount:r.getImapInAccounts().length,imapInProvider:r.getImapInProvider(),previewPane:a.getSetting(_mail_constants.Settings.PREVIEW_PANE),multiTask:n.getMultiTaskModeSetting()}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_i13n=require("../../../stores/i13n"),_i13n2=_interopRequireDefault(_i13n),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_user_preferences=require("../../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_reactIntl=require("react-intl"),_types=require("../../../types"),_mail_constants=require("../../../platform/mail_constants"),_utils=require("../../../platform/utils/"),_client=require("../../../platform/beacons/comscore/client"),_client2=require("../../../platform/beacons/marketing/client"),_generic=require("../../../platform/utils/generic"),_object=require("../../../platform/utils/object"),_constants=require("../../../platform/rapid_client/constants"),_rapid_client=require("../../../platform/rapid_client"),_rapid_client2=_interopRequireDefault(_rapid_client),_norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger),_reducers_selectors=require("../../../reducers_selectors"),Instrumenter=_react2.default.createClass({displayName:"Instrumenter",contextTypes:{intl:_reactIntl.intlShape.isRequired,config:_react.PropTypes.object,rapidParams:_react.PropTypes.object,usmLogString:_react.PropTypes.string,getTheme:_react.PropTypes.func,getThemeMode:_react.PropTypes.func},shouldComponentUpdate:function(e){return this.props.pageViewCount!==e.pageViewCount||this.props.vwCntxt!==e.vwCntxt},getPageParams:function(){var e=this.props,t=e.multiTask,r=e.previewPane,n=e.activeAccount,i=e.imapInAccountsCount,o=e.imapInProvider,a=e.vwCntxt,s=(0,_utils.destructEmailAddressParts)(n.email),c=s.domainPart,u=n.type===_mail_constants.AccountTypes.FREE?"PRIMARY":n.type,p=this.context.getTheme(),_=this.context.getThemeMode();return{tabs:t,prvwpan:r,vwCntxt:a,acctDomain:c,acctType:u,impn:i,theme:p+"-"+_,prvdr:o}},logPageView:function(){var e=this.getPageParams(),t=_rapid_client2.default.getRapidInstance();_norrinLogger2.default.set(Object.assign({},window.BrowserLoggerParams,e)),t&&t.beaconPageview()},componentDidMount:function(){var e=this.props.spaceId,t=Object.assign({},this.getPageParams(),window.BrowserLoggerParams);addSpaceIdToYahooI13nObject(e),_rapid_client2.default.init({rapid:{spaceid:e,test_id:this.context.usmLogString||this.context.config.perfBucket,keys:t,dwell_on:!0,extendbcookie:!0}}),this.logPageView(),_rapid_client2.default.sendI13nModel({i13nModel:{mKey:_constants.MKEYS.LAUNCH,sec:_constants.SEC_VALUES.LAUNCH,mKeyGroup:_constants.MKEY_GROUPS.launch}}),this.context.config.comScoreBeaconing&&(0,_client.fireComScoreBeacon)(window.AppBootstrapData.comScore,e),(0,_generic.isBrowser)()&&this.context.config.marketingBeaconing&&(0,_client2.fireMarketingBeacon)()},componentDidUpdate:function(){var e=this.props.spaceId,t=_rapid_client2.default.getRapidInstance(),r=Object.assign({},this.getPageParams(),window.BrowserLoggerParams);t&&(addSpaceIdToYahooI13nObject(e),t.reInit({spaceid:e,test_id:this.context.usmLogString||this.context.config.perfBucket,keys:r,dwell_on:!0,extendbcookie:!0}),this.logPageView(),this.context.config.comScoreBeaconing&&(0,_client.fireComScoreBeacon)(window.AppBootstrapData.comScore,e))},render:function(){return null}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(Instrumenter,[_i13n2.default,_mail2.default,_user_preferences2.default],getStateFromStores,{store:_react2.default.PropTypes.object});
},{"../../../platform/beacons/comscore/client":274,"../../../platform/beacons/marketing/client":275,"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/rapid_client":"./platform/rapid_client","../../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../../platform/utils/":"./platform/utils","../../../platform/utils/generic":"./platform/utils/generic","../../../platform/utils/object":"./platform/utils/object","../../../reducers_selectors":"./reducers_selectors","../../../stores/i13n":"./stores/i13n","../../../stores/mail":"./stores/mail","../../../stores/user_preferences":"./stores/user_preferences","../../../types":"./types","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","norrin-logger":"./node_modules/norrin-logger/index.js","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],28:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e,t){var s=t.listId,i=t.previewpane,r=e.getStore(_mail2.default),a=(0,_list.getFolderIdFromListId)(s),o=a&&r.getFolder(a),n=o&&(0,_folder.getPrimaryFolderType)(o),l=e.getStore(_application2.default),_=e.getStore(_ads2.default),d=e.getStore(_user_preferences2.default),c=r.getItemListState(s),u=r.getAllFoldersForAccount(r.getActiveAccountId()),m=r.hasMoreItems(s),g=r.getMyAddresses(),p=r.getRootAccounts(),f=t.context.config.conversations,S=t.context.config.showRelevantItems,h=r.getItemList(s),I=_.getPencilAdData(s),F=_.getAdRotationId(),A=_.getAdFeedbackStarted(),R=_.getAdFeedbackSubmitted(),q=_.getAdFeedbackBeacon(),L={},D=l.getWindowDimensions(),C=(0,_list.getListContentTypeFromListId)(s),T=e.getStore(_pages2.default).getActivePageRoute(),b=T.name===_mail_constants.RouteNames.SEARCH,M=(0,_list.isPeopleSearch)(s),E=b,v=(0,_list.getSortOrderFromListId)(s)||d.getSortOrder(),w=l.getDateFormattingOption(),y=t.context.config,k=b&&f?y.mailSearchTimeChunking:y.timeChunking,x=k&&h.length>=_constants.TIMECHUNK_MIN_ITEMS&&(v===_mail_constants.SortOrder.DATE_DESC||v===_mail_constants.SortOrder.DATE_ASC),O=p.length>1?_constants2.MessageDestinationLabels.ACCOUNT:_constants2.MessageDestinationLabels.FOLDER,N=(0,_list.getRelevantListFilterFromListId)(s),V=(0,_list.recreateListId)(s,{listFilter:N}),G=S?r.getItemList(V):[];G.forEach(function(e){var t=(0,_utils.getMessageGroupViewRoute)({item:e,listId:V,isSearch:b,isConversationMode:f});t&&(C===_mail_constants.ListContentTypes.MESSAGES?L[e.id]=t:L[e.attachment.id]=t),e.isHero=!0}),h.forEach(function(e){var t=(0,_utils.getMessageGroupViewRoute)({item:e,listId:s,isSearch:b,isConversationMode:f});t&&(C===_mail_constants.ListContentTypes.MESSAGES?L[e.id]=t:L[e.attachment.id]=t)});var P=G.concat(h);return i!==_mail_constants.PreviewPaneSettings.RIGHT&&b||(O=_constants2.MessageDestinationLabels.NONE),{listId:s,permDelete:n===_mail_constants.FolderTypes.DRAFT||n===_mail_constants.FolderTypes.TRASH,myAddresses:g,items:P,hasMoreItems:m,folderType:n,dateFormattingOption:w,folders:(0,_folder.categorizeFolders)(u),state:c,sortOrder:v,messageGroupRoutes:L,highlightSearchTerm:!0,messageDestinationLabel:O,accounts:p,windowDimensions:D,listContentType:C,pencilAdData:I,adRotationId:F,hasTimeChunking:x,adFeedbackStarted:A,adFeedbackSubmitted:R,adFeedbackBeacon:q,feedbackEnabled:E,actions:b?_search_message_list.ListActions:_folder_message_list.ListActions,height:t.height,hideSearchIcon:M}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_mail_constants=require("../../../platform/mail_constants"),_constants=require("../../../molecules/item_list/constants"),_constants2=require("../../../molecules/message_list/constants"),_item_list_ui=require("./item_list_ui.jsx"),_item_list_ui2=_interopRequireDefault(_item_list_ui),_folder=require("../../../platform/utils/folder"),_list=require("../../../platform/utils/list"),_folder_message_list=require("../../../actions/folder_message_list"),_search_message_list=require("../../../actions/search_message_list"),_utils=require("./utils"),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_application=require("../../../stores/application"),_application2=_interopRequireDefault(_application),_ads=require("../../../stores/ads.js"),_ads2=_interopRequireDefault(_ads),_user_preferences=require("../../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),ItemListControllerView=_react2.default.createClass({displayName:"ItemListControllerView",shouldComponentUpdate:function(e){return!!e.listId},render:function(){return this.props.listId?_react2.default.createElement(_item_list_ui2.default,this.props):null}});ItemListControllerView=(0,_fluxibleAddonsReact.connectToStores)(ItemListControllerView,[_mail2.default,_application2.default,_ads2.default],getStateFromStores),exports.default=ItemListControllerView;
},{"../../../actions/folder_message_list":"./actions/folder_message_list","../../../actions/search_message_list":"./actions/search_message_list","../../../molecules/item_list/constants":"./molecules/item_list/constants","../../../molecules/message_list/constants":"./molecules/message_list/constants","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/folder":"./platform/utils/folder","../../../platform/utils/list":"./platform/utils/list","../../../stores/ads.js":"./stores/ads","../../../stores/application":"./stores/application","../../../stores/mail":"./stores/mail","../../../stores/pages":"./stores/pages","../../../stores/user_preferences":"./stores/user_preferences","./item_list_ui.jsx":29,"./utils":"./apps/mail/controller_views/utils","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],29:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ItemListUIControllerView(e){switch(e.listContentType){case _mail_constants.ListContentTypes.IMAGES:return _react2.default.createElement(_lazy_component.LazyComponent,_extends({import:"../../../molecules/photo_grid/index.jsx"},e,{key:e.listId,_moduleGetter:function(){return require("../../../molecules/photo_grid/index.jsx")}}));case _mail_constants.ListContentTypes.DOCUMENTS:return _react2.default.createElement(_lazy_component.LazyComponent,_extends({import:"../../../molecules/document_list/index.jsx"},e,{key:e.listId,_moduleGetter:function(){return require("../../../molecules/document_list/index.jsx")}}));default:return _react2.default.createElement(_message_list2.default,_extends({messageGroups:e.items},e,{key:e.listId}))}}function getStateFromStores(e,t){var r=e.getStore(_item_list_ui2.default),s=e.getStore(_features2.default),i=(0,_reducers_selectors.selectors)(e.store.getState()),o=i.getFeaturesSelectors,n=o();return{openedGroupId:r.getOpenedGroupId(t.listId),itemSelection:r.getSelection(t.listId),cursorIndex:r.getCursor(t.listId),snippetsEnabled:n.isEnabled(_mail_constants.Settings.SNIPPETS),msgListDensity:n.getSetting(_mail_constants.Settings.MSG_LIST_DENSITY),showHSPreviewFileCue:s.isEnabled("HSPreviewFileCue")}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e};exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_item_list_ui=require("../../../stores/item_list_ui"),_item_list_ui2=_interopRequireDefault(_item_list_ui),_user_preferences=require("../../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_object=require("../../../platform/utils/object"),_mail_constants=require("../../../platform/mail_constants"),_lazy_component=require("../../../atoms/lazy_component"),_message_list=require("../../../molecules/message_list"),_message_list2=_interopRequireDefault(_message_list),_features=require("../../../stores/features"),_features2=_interopRequireDefault(_features),_reducers_selectors=require("../../../reducers_selectors");exports.default=(0,_fluxibleAddonsReact.connectToStores)(ItemListUIControllerView,[_item_list_ui2.default,_user_preferences2.default,_features2.default],getStateFromStores,{store:_react2.default.PropTypes.object});
},{"../../../atoms/lazy_component":"./atoms/lazy_component","../../../molecules/document_list/index.jsx":"./molecules/document_list","../../../molecules/message_list":218,"../../../molecules/photo_grid/index.jsx":"./molecules/photo_grid","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/object":"./platform/utils/object","../../../reducers_selectors":"./reducers_selectors","../../../stores/features":"./stores/features","../../../stores/item_list_ui":"./stores/item_list_ui","../../../stores/user_preferences":"./stores/user_preferences","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],30:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e,t){var r=e.getStore(_item_list_ui2.default),i=t.listId;return{selectionCount:Object.keys(r.getSelection(i)).length}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_mail_count=require("../atoms/mail_count.jsx"),_mail_count2=_interopRequireDefault(_mail_count),_item_list_ui=require("../../../stores/item_list_ui"),_item_list_ui2=_interopRequireDefault(_item_list_ui),MailCountControllerView=_react2.default.createClass({displayName:"MailCountControllerView",shouldComponentUpdate:function(e){return this.props.selectionCount!==e.selectionCount},render:function(){return _react2.default.createElement(_mail_count2.default,this.props)}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(MailCountControllerView,[_item_list_ui2.default],getStateFromStores);
},{"../../../stores/item_list_ui":"./stores/item_list_ui","../atoms/mail_count.jsx":16,"fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],31:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e,t){var r=t.listId,a=e.getStore(_item_list_ui2.default),i=e.getStore(_pages2.default).getActivePageRoute(),s=e.config.previewpaneResizable,_=(0,_list.getFolderIdFromListId)(r),l=e.getStore(_mail2.default).getFolder(_),o=e.getStore(_mail2.default).getItemListIdsForList(r),u=l?0===l.total:0===o.length,n=(0,_reducers_selectors.selectors)(e.store.getState()),c=n.getFeaturesSelectors,d=c();return{previewpane:d.getSetting(_mail_constants.Settings.PREVIEW_PANE),currentRoute:i,listId:r,openedGroupId:a.getOpenedGroupId(r),numberOfMessageSelection:Object.keys(a.getSelection(r)).length,previewpaneResizable:s,isEmpty:u}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_item_list=require("./item_list.jsx"),_item_list2=_interopRequireDefault(_item_list),_message=require("./message"),_message2=_interopRequireDefault(_message),_toolbar=require("./toolbar.jsx"),_toolbar2=_interopRequireDefault(_toolbar),_mail_reader=require("../molecules/mail_reader"),_mail_reader2=_interopRequireDefault(_mail_reader),_item_list_ui=require("../../../stores/item_list_ui"),_item_list_ui2=_interopRequireDefault(_item_list_ui),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_user_preferences=require("../../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_mail_count=require("./mail_count.jsx"),_mail_count2=_interopRequireDefault(_mail_count),_mail_constants=require("../../../platform/mail_constants"),_object=require("../../../platform/utils/object"),_list=require("../../../platform/utils/list"),_search_header=require("./search_header.jsx"),_search_header2=_interopRequireDefault(_search_header),_reducers_selectors=require("../../../reducers_selectors"),MailReaderControllerView=_react2.default.createClass({displayName:"MailReaderControllerView",render:function(){var e=this.props,t=e.listId,r=e.currentRoute,a=(0,_list.getReferrerFromListId)(t),i=r.name===_mail_constants.RouteNames.SEARCH&&a!==_mail_constants.ListReferrer.SMARTVIEW;return _react2.default.createElement(_mail_reader2.default,_extends({},this.props,{ItemList:_item_list2.default,ListHeader:i?_search_header2.default:null,MessageView:_message2.default,BlankMessageView:_mail_count2.default,Toolbar:_toolbar2.default}))}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(MailReaderControllerView,[_item_list_ui2.default,_pages2.default,_user_preferences2.default],getStateFromStores,{config:_react.PropTypes.object,store:_react.PropTypes.object});
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/list":"./platform/utils/list","../../../platform/utils/object":"./platform/utils/object","../../../reducers_selectors":"./reducers_selectors","../../../stores/item_list_ui":"./stores/item_list_ui","../../../stores/mail":"./stores/mail","../../../stores/pages":"./stores/pages","../../../stores/user_preferences":"./stores/user_preferences","../molecules/mail_reader":53,"./item_list.jsx":28,"./mail_count.jsx":30,"./message":32,"./search_header.jsx":40,"./toolbar.jsx":46,"fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],32:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e,t){var s,r=t.listId,a=t.hasToolbar,o=void 0===a||a,i={},n={},_=e.getStore(_user_preferences2.default),u=e.getStore(_application2.default),l=e.getStore(_pages2.default).getActivePageRoute(),c=t.openedMessageId||decodeURIComponent(l.params.mid),g=e.getStore(_mail2.default),d=e.getStore(_message_group_ui2.default),m=g.getMessageGroupState(c),p=g.hasMessageGroup(c),f=u.getWindowDimensions(),S=(0,_reducers_selectors.selectors)(e.store.getState()),R=S.getFeaturesSelectors,v=R(),A=v.getSetting(_mail_constants.Settings.PREVIEW_PANE),E=A===_mail_constants.PreviewPaneSettings.RIGHT,O=!!A&&(l.name===_mail_constants.RouteNames.FOLDER||l.name===_mail_constants.RouteNames.SEARCH),M=d.getActiveAttachmentId(r,c),q=!!M,I=e.intl.formatMessage,P=(s={},s[_mail_constants.EmailProviders.YAHOO]=I(_strings2.default.yahoo_account_description),s[_mail_constants.EmailProviders.YAHOO_SB]=I(_strings2.default.yahoo_account_description),s[_mail_constants.EmailProviders.OUTLOOK]=I(_strings2.default.outlook_account_description),s[_mail_constants.EmailProviders.AOL]=I(_strings2.default.aol_account_description),s[_mail_constants.EmailProviders.GOOGLE]=I(_strings2.default.gmail_account_description),s[_mail_constants.EmailProviders.GOOGLE_APP]=I(_strings2.default.gmail_account_description),s),D=(0,_list.listIdHasMessageFlags)(r)&&(0,_list.listIdContainsMessageFlags)(r,{read:!1})&&l.name===_mail_constants.RouteNames.SEARCH||(0,_list.getSortOrderFromListId)(r)===_mail_constants.SortOrder.UNREAD&&[_mail_constants.RouteNames.SEARCH,_mail_constants.RouteNames.FOLDER].indexOf(l.name)!==-1;if(m===_mail_constants.RecordStates.ERROR)return{groupId:c,groupState:m};if(m===_mail_constants.RecordStates.DOES_NOT_EXIST||!p)return{groupState:_mail_constants.RecordStates.DOES_NOT_EXIST};var b=(0,_reducers_selectors.selectors)(e.store.getState()),h=b.getMessageBodiesSelectors,x=h(),T=g.getContextualMessageGroupById(c,r),F=(0,_message_group.getMetadata)(T),G=F.folder,w=g.getMyAddresses(),C=g.getAccountIdForMessageGroup(c),N=g.getRootAccounts(),y=g.getAccountById(C),H=y.description||P[(0,_account.getProviderFromAccount)(y)],L=g.getAllFoldersForAccount(C),V=T.messages,j=N.length>1?H+"/"+G.name:G.name,W=function(){var t,s=(t={},t[_mail_constants.ActionAfterMessageMove.GO_BACK_TO_FOLDER]=null,t[_mail_constants.ActionAfterMessageMove.SHOW_NEXT_MESSAGE]="getNextOrPreviousGroupId",t[_mail_constants.ActionAfterMessageMove.SHOW_PREVIOUS_MESSAGE]="getPreviousOrNextGroupId",t),a=_.getActionAfterMessageMove(),o=s[a];return e.executeAction(_message2.loadMoreMessagesIfNeeded,{listId:r,currentGroupId:T.id}),o?g[o](T.id,r):null};e.config.useReduxState?V.forEach(function(e){var t=e.csid||e.id;i[t]=x.getState(t),n[t]=g.isDraftMessage(t)}):V.forEach(function(e){i[e.id]=x.getState(e.id),n[e.id]=g.isDraftMessage(e.id)});var B=d.getCards(T);B.filter(function(e){var t=e.composeData;return t}).forEach(function(t){t.composeProps=getStates.getComposeStateFromStores(e,t)});var U=void 0;U=!q||l.name!==_mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST&&l.name!==_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST?"":(0,_message.getMessageIdFromAttachmentId)(M);var k=(0,_reducers_selectors.selectors)(e.store.getState()),X=k.getRouterSelectors,K=X(),Y=K.getHashParams(),z=Y.messageId,J=void 0===z?null:z;return{cards:B,cardExpansions:d.getCardExpansionStates(r,c,J),bodyStates:i,isDraftMessage:n,groupState:_mail_constants.RecordStates.LOADED,hasToolbar:o,myAddresses:w,messageGroup:T,preferences:_.getPreferences(),folders:(0,_folder.categorizeFolders)(L),messageGroupDestination:j,compactGroupHeader:E,messageIdWithOpenAttachmentPreview:U,isAppVisible:u.isAppVisible(),hasAttachmentPreview:q,windowDimensions:f,markAsReadOnUnmount:D,canTakeFocus:O,navigateOnMessageAction:function(){var t=W();if(t){var s=g.getItem(t,r),a=e.config.conversations,o=[_mail_constants.RouteNames.SEARCH,_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST].indexOf(l.name)!==-1,i=(0,_utils.getMessageGroupViewRoute)({item:s,listId:r,isSearch:o,isConversationMode:a});e.navigateTo({route:i,replacePage:!0})}else e.executeAction(_actions.closeActivePage)}}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e};exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_message_group_preview=require("../../../../molecules/message_group_view/message_group_preview.jsx"),_message_group_preview2=_interopRequireDefault(_message_group_preview),_user_preferences=require("../../../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_message_group_ui=require("../../../../stores/message_group_ui"),_message_group_ui2=_interopRequireDefault(_message_group_ui),_application=require("../../../../stores/application"),_application2=_interopRequireDefault(_application),_mail=require("../../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_xobni=require("../../../../stores/xobni"),_xobni2=_interopRequireDefault(_xobni),_features=require("../../../../stores/features"),_features2=_interopRequireDefault(_features),_pages=require("../../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_fluxibleAddonsReact=require("fluxible-addons-react"),_get_state_from_stores=require("../get_state_from_stores"),getStates=_interopRequireWildcard(_get_state_from_stores),_mail_constants=require("../../../../platform/mail_constants"),_folder=require("../../../../platform/utils/folder"),_message=require("../../../../platform/utils/message"),_list=require("../../../../platform/utils/list"),_message_group=require("../../../../platform/utils/message_group"),_toolbar=require("../toolbar.jsx"),_toolbar2=_interopRequireDefault(_toolbar),_account=require("../../../../platform/utils/account"),_strings=require("../../../../molecules/advanced_search_pane/atoms/strings"),_strings2=_interopRequireDefault(_strings),_reducers_selectors=require("../../../../reducers_selectors"),_message2=require("../../../../actions/message"),_utils=require("../utils"),_actions=require("../../../../apps/mail/actions"),MessageControllerView=_react2.default.createClass({displayName:"MessageControllerView",_getToolbar:function(){return this.props.hasToolbar?_toolbar2.default:null},render:function(){return _react2.default.createElement(_message_group_preview2.default,_extends({},this.props,{ToolbarControllerView:this._getToolbar()}))}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(MessageControllerView,[_mail2.default,_message_group_ui2.default,_user_preferences2.default,_xobni2.default,_features2.default],getStateFromStores,{config:_react2.default.PropTypes.object,intl:_reactIntl.intlShape.isRequired,store:_react2.default.PropTypes.object,navigateTo:_react.PropTypes.func,executeAction:_react.PropTypes.func});
},{"../../../../actions/message":"./actions/message","../../../../apps/mail/actions":"./apps/mail/actions","../../../../molecules/advanced_search_pane/atoms/strings":"./molecules/advanced_search_pane/atoms/strings","../../../../molecules/message_group_view/message_group_preview.jsx":214,"../../../../platform/mail_constants":"./platform/mail_constants","../../../../platform/utils/account":"./platform/utils/account","../../../../platform/utils/folder":"./platform/utils/folder","../../../../platform/utils/list":"./platform/utils/list","../../../../platform/utils/message":"./platform/utils/message","../../../../platform/utils/message_group":"./platform/utils/message_group","../../../../reducers_selectors":"./reducers_selectors","../../../../stores/application":"./stores/application","../../../../stores/features":"./stores/features","../../../../stores/mail":"./stores/mail","../../../../stores/message_group_ui":"./stores/message_group_ui","../../../../stores/pages":"./stores/pages","../../../../stores/user_preferences":"./stores/user_preferences","../../../../stores/xobni":"./stores/xobni","../get_state_from_stores":25,"../toolbar.jsx":46,"../utils":"./apps/mail/controller_views/utils","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],33:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e,t){var r=t.listId,o=e.getStore(_mail2.default),i=e.getStore(_features2.default),s=e.getStore(_user_preferences2.default),a=e.getStore(_item_list_ui2.default),u=e.getStore(_pages2.default),l=o.getRootAccounts(),n=o.getActiveAccount(),d=o.getUnreadCountForAccount(n.id),_={},c=o.getItemListState(r),f=o.isListStale(r),g=f&&c===_mail_constants.RecordStates.REFRESHING,m=(0,_list.getFolderIdFromListId)(r),p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.i13nModel,i=void 0===r?void 0:r,s=u.getActivePageRoute(),a=s.params.csid;if(a){var l=o.getComposeData(a);if(l&&l.draftStatus===_mail_constants.Draft.Status.INIT&&!l.isEdited)return}return a=(0,_utils.generateUID)(),i?void e.navigateTo({route:(0,_route.buildComposeRouteFromCsid)(a),i13nModel:i}):void e.navigateTo({route:(0,_route.buildComposeRouteFromCsid)(a)})};l.forEach(function(e){_[e.id]=o.getDefaultFolderForAccount(e.id)});var v=(0,_reducers_selectors.selectors)(e.store.getState()),S=v.getFeaturesSelectors,F=S();return{rootAccounts:l,accountDefaultFolders:_,activeAccount:n,unreadCountForAccount:d,navigateToNewCompose:p,folders:o.getAllFoldersForAccount(n.id),expandedFolders:s.getExpandedFoldersSetting(),showCustomFolders:s.getShowCustomFoldersSetting(),mailboxId:s.getMailboxes()[0].id,folderRefreshing:g,highlightFolderId:m,showPhotosCue:i.isEnabled("photosCue"),showStarredCue:i.isEnabled("starredCue"),showComposeBadge:i.isEnabled("HSComposeBadge"),showHSDocumentsCue:i.isEnabled("HSDocumentsCue"),selection:a.getSelection(r),showHSComposeCue:i.isEnabled("HSComposeCue"),showHSPreTourCue:i.isEnabled("HSPreTourCue"),conversationSetting:F.isEnabled("conversations"),navigateToFolder:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.i13nModel,i=void 0===o?{}:o,s=u.getActivePageRoute();e.navigateTo({route:(0,_route.buildFolderRouteFromFolderId)(t),force:s.name===_mail_constants.RouteNames.FOLDER&&s.params.fid===t,i13nModel:i})},expiredAccounts:o.getExpiredAccounts()}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_navigation=require("../../../molecules/navigation"),_navigation2=_interopRequireDefault(_navigation),_fluxibleAddonsReact=require("fluxible-addons-react"),_utils=require("../../../platform/utils"),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_features=require("../../../stores/features"),_features2=_interopRequireDefault(_features),_user_preferences=require("../../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_item_list_ui=require("../../../stores/item_list_ui"),_item_list_ui2=_interopRequireDefault(_item_list_ui),_types=require("../../../types"),_mail_constants=require("../../../platform/mail_constants"),_list=require("../../../platform/utils/list"),_smartview=require("../../../platform/utils/smartview"),_route=require("../../../platform/utils/route"),_reducers_selectors=require("../../../reducers_selectors"),NavigationControllerView=_react2.default.createClass({displayName:"NavigationControllerView",render:function(){var e=this.props.listId,t=(0,_list.getReferrerFromListId)(e),r=this.props.currentRoute.name,o=void 0;return o=r===_mail_constants.RouteNames.TUTORIAL?_mail_constants.SmartViewTypes.TUTORIAL:t===_mail_constants.ListReferrer.SMARTVIEW?(0,_smartview.getSmartViewNameFromListId)(e):this.props.highlightFolderId,_react2.default.createElement(_navigation2.default,_extends({},this.props,{highlightFolderId:o}))}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(NavigationControllerView,[_mail2.default,_user_preferences2.default,_features2.default,_item_list_ui2.default],getStateFromStores,{navigateTo:_react2.default.PropTypes.func,store:_react2.default.PropTypes.object});
},{"../../../molecules/navigation":228,"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils":"./platform/utils","../../../platform/utils/list":"./platform/utils/list","../../../platform/utils/route":"./platform/utils/route","../../../platform/utils/smartview":"./platform/utils/smartview","../../../reducers_selectors":"./reducers_selectors","../../../stores/features":"./stores/features","../../../stores/item_list_ui":"./stores/item_list_ui","../../../stores/mail":"./stores/mail","../../../stores/pages":"./stores/pages","../../../stores/user_preferences":"./stores/user_preferences","../../../types":"./types","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],34:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){return{nextPage:e.getStore(_pages2.default).getNextPage()}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _fluxibleAddonsReact=require("fluxible-addons-react"),_pager=require("../../../molecules/pager"),_pager2=_interopRequireDefault(_pager),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages);exports.default=(0,_fluxibleAddonsReact.connectToStores)(_pager2.default,[_pages2.default],getStateFromStores);
},{"../../../molecules/pager":254,"../../../stores/pages":"./stores/pages","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js"}],35:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var t=e.getStore(_pages2.default).getActivePageRoute(),r=e.getStore(_application2.default),a=r.getWindowDimensions(),o=t.name===_mail_constants.RouteNames.SEARCH||t.name===_mail_constants.RouteNames.FOLDER||t.name===_mail_constants.RouteNames.ATTACHMENT;return{windowDimensions:a,fullScreenMode:o}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_lazy_component=require("../../../atoms/lazy_component"),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_application=require("../../../stores/application"),_application2=_interopRequireDefault(_application),_mail_constants=require("../../../platform/mail_constants"),PreviewrWrapperControllerView=_react2.default.createClass({displayName:"PreviewrWrapperControllerView",render:function(){var e=this.props,t=e.className,r=e.windowDimensions,a=e.fullScreenMode;return _react2.default.createElement(_lazy_component.LazyComponent,{import:"./attachment_ui.jsx",key:"AttachmentUiControllerView",className:t,fullScreenMode:a,disableFullScreenToggle:a,windowDimensions:r,_moduleGetter:function(){return require("./attachment_ui.jsx")}})}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(PreviewrWrapperControllerView,[_pages2.default,_application2.default],getStateFromStores);
},{"../../../atoms/lazy_component":"./atoms/lazy_component","../../../platform/mail_constants":"./platform/mail_constants","../../../stores/application":"./stores/application","../../../stores/pages":"./stores/pages","./attachment_ui.jsx":"./apps/mail/controller_views/attachment_ui","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],36:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var t=e.getStore(_pages2.default).getActivePageRoute(),r=(0,_list.getListIdFromRoute)(t),a=(0,_list.getEmailAddressFromListId)(r),s=(0,_reducers_selectors.selectors)(e.store.getState()).getFeaturesSelectors().isEnabled("isWiderMailExtnEnabled"),i=e.getStore(_ads2.default).getHideRightPaneAds()||s;return{emailAddress:a,hideRightPaneAds:i}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_lazy_component=require("../../../atoms/lazy_component"),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_ads=require("../../../stores/ads"),_ads2=_interopRequireDefault(_ads),_user_preferences=require("../../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_contact_card=require("./contact_card"),_contact_card2=_interopRequireDefault(_contact_card),_comms_properties=require("../../../molecules/comms_properties/"),_comms_properties2=_interopRequireDefault(_comms_properties),_right_pane_ads=require("../../../apps/mail/molecules/right_pane_ads"),_right_pane_ads2=_interopRequireDefault(_right_pane_ads),_list=require("../../../platform/utils/list"),_mail_constants=require("../../../platform/mail_constants"),_previewr_wrapper=require("./previewr_wrapper.jsx"),_previewr_wrapper2=_interopRequireDefault(_previewr_wrapper),_right_rail=require("../styles/right_rail"),_right_rail2=_interopRequireDefault(_right_rail),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_reducers_selectors=require("../../../reducers_selectors"),RightRailControllerView=_react2.default.createClass({displayName:"RightRailControllerView",contextTypes:{config:_react.PropTypes.object},render:function(){var e=this.props,t=e.hasAds,r=e.hideRightPaneAds,a=e.hideAdUpsellSetting,s=e.hasAttachmentPreview,i=e.hasContactCard,o=e.hasPhotos,_=e.hasDocs,n=e.hasMessages,l=e.previewPaneSetting,c=e.windowDimensions,u=e.emailAddress,p=this.context.config,d=c.innerWidth,m=l===_mail_constants.PreviewPaneSettings.RIGHT,f=[],h=(0,_css2.default)(_right_rail2.default,{hasAttachmentPreview:s}),g=t&&!r||i||o||_||n,R=p.showCommsProperties,w=R&&(s||!g),q=R&&!w,y=t&&!(s||i||o||_);return s&&f.push(_react2.default.createElement(_previewr_wrapper2.default,_extends({key:"PreviewWrapperControllerView",className:h.attachmentPreview},this.props))),i&&f.push(_react2.default.createElement(_contact_card2.default,{key:"ContactCardControllerView",isInRightRail:!0,emailAddress:u,isCompose:!1})),n&&f.push(_react2.default.createElement(_lazy_component.LazyComponent,_extends({import:"./message_brief.jsx",key:"MessageBriefControllerView"},this.props,{_moduleGetter:function(){return require("./message_brief.jsx")}}))),o&&f.push(_react2.default.createElement(_lazy_component.LazyComponent,_extends({import:"./photo_brief.jsx",key:"PhotoBriefControllerView"},this.props,{_moduleGetter:function(){return require("./photo_brief.jsx")}}))),_&&f.push(_react2.default.createElement(_lazy_component.LazyComponent,_extends({import:"./document_brief.jsx",key:"DocumentBriefControllerView"},this.props,{_moduleGetter:function(){return require("./document_brief.jsx")}}))),y&&f.push(_react2.default.createElement(_right_pane_ads2.default,{key:"RightPaneAds",innerWidth:d,verticalPreviewPane:m,hideAdUpsellSetting:a,hideRightPaneAds:r})),q?f.unshift(_react2.default.createElement(_comms_properties2.default,{key:"CommsProperties",verticalLayout:!1})):w&&f.push(_react2.default.createElement(_comms_properties2.default,{key:"CommsProperties",verticalLayout:!0})),_react2.default.createElement("div",{"data-test-id":"mail-right-rail",className:h.rightRail},f)}});RightRailControllerView=(0,_fluxibleAddonsReact.connectToStores)(RightRailControllerView,[_pages2.default,_ads2.default,_user_preferences2.default],getStateFromStores,{config:_react.PropTypes.object,store:_react.PropTypes.object}),exports.default=RightRailControllerView;
},{"../../../apps/mail/molecules/right_pane_ads":55,"../../../atoms/lazy_component":"./atoms/lazy_component","../../../molecules/comms_properties/":135,"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/list":"./platform/utils/list","../../../reducers_selectors":"./reducers_selectors","../../../stores/ads":"./stores/ads","../../../stores/pages":"./stores/pages","../../../stores/user_preferences":"./stores/user_preferences","../styles/right_rail":63,"./contact_card":23,"./document_brief.jsx":"./apps/mail/controller_views/document_brief","./message_brief.jsx":"./apps/mail/controller_views/message_brief","./photo_brief.jsx":"./apps/mail/controller_views/photo_brief","./previewr_wrapper.jsx":35,"fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],37:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var t=e.getStore(_rum2.default),r=e.config,a={timeToInboxVisible:{metric:"message_list"},timeToComposeReady:{metric:"MTTC"},timeToInteractive:{metric:"MTTI"},appClientRenderTime:{metric:"app_client_render"},appClientHeadToEnd:{metric:"app_head_end"},messageSend:{metric:"message_send"},composeShow:{metric:"compose_show"},messageRead:{metric:"message_read"},mailSearch:{metric:"search_latency"}},o=["norrin_"];return{rumData:t.getData(),config:a,yaftCanShowVisualReport:r.yaftCanShowVisualReport,modules:o}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_react_action_constants=require("../../../platform/react_action_constants"),_rum_component=require("../../../platform/rum_component.jsx"),_rum_component2=_interopRequireDefault(_rum_component),_rum=require("../../../stores/rum"),_rum2=_interopRequireDefault(_rum),_list=require("../../../platform/utils/list"),_mail_constants=require("../../../platform/mail_constants"),_isEqual=require("lodash/isEqual"),_isEqual2=_interopRequireDefault(_isEqual),RumController=_react2.default.createClass({displayName:"RumController",appStartTime:Date.now(),shouldComponentUpdate:function(e){return(this.props.rumData.action!==_react_action_constants.mail.SEND_SUCCESS&&this.props.rumData.action!==_react_action_constants.mail.MESSAGE_GROUP_OPENED&&this.props.rumData.action!==_react_action_constants.mail.OPEN_PAGE_REQUESTED||this.props.rumData.action!==e.rumData.action)&&Boolean(e&&e.rumData&&!(0,_isEqual2.default)(this.props,e))},getAppInitMetrics:function(){if(window.performance){var e=window.performance,t=e.now(),r=e.timing.responseStart-e.timing.navigationStart,a=t;return e.getEntriesByName&&e.getEntriesByName("norrinStartRender").length&&(a=e.getEntriesByName("norrinStartRender")[0].startTime),{timeToInboxVisible:a,timeToComposeReady:t,timeToInteractive:t,appClientRenderTime:Date.now()-this.appStartTime,appClientHeadToEnd:t-r}}},getRumMetric:function(){var e=this.props.rumData||{},t=e.action,r=e.payload,a=e.startTimer;if(a){var o=Date.now()-a;switch(t){case _react_action_constants.mail.OPEN_PAGE_REQUESTED:var n=r.perfHeader,i=void 0===n?{}:n,s=r.cacheControl,c=void 0===s?{}:s,_=r.route,m=void 0===_?{}:_;if(c.lastVisited&&m.name===_mail_constants.RouteNames.SEARCH)return{mailSearch:Date.now()-i.requestStart};break;case _react_action_constants.mail.SEND_SUCCESS:return{messageSend:o};case _react_action_constants.mail.COMPOSE_OPENED:return{composeShow:o};case _react_action_constants.mail.MESSAGE_GROUP_OPENED:case _react_action_constants.mail.MESSAGE_BODIES_OPEN_GROUP_RECEIVED:if(!(r.messageBodiesToFetchCount&&r.messageBodiesToFetchCount>0))return{messageRead:o};break;case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:var u=(0,_list.getListContentTypeFromListId)(r.listId);if(!r.doesListExist&&r.response[u]&&(r.response[u].WITH_KEYWORD||r.response[u].FROM))return{mailSearch:o};break;default:return}}},render:function(){return _react2.default.createElement(_rum_component2.default,_extends({},this.props,{getAppInitMetrics:this.getAppInitMetrics,getRumMetric:this.getRumMetric}))}});RumController=(0,_fluxibleAddonsReact.connectToStores)(RumController,[_rum2.default],getStateFromStores,{config:_react.PropTypes.object}),exports.default=RumController;
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/react_action_constants":"./platform/react_action_constants","../../../platform/rum_component.jsx":311,"../../../platform/utils/list":"./platform/utils/list","../../../stores/rum":342,"fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","lodash/isEqual":"./node_modules/lodash/isEqual.js","react":"./node_modules/react/react.js"}],38:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var t=e.getStore(_application2.default),r=e.getStore(_suggestions2.default),a=e.getStore(_features2.default),s=e.getStore(_pages2.default).getActivePageRoute(),o=s.name===_mail_constants.RouteNames.SEARCH,i=t.isWindowResizingDone(),u=e.getStore(_mail2.default),l=u.getRootAccounts().filter(function(e){return e.status===_mail_constants.AccountStatus.ENABLED}),n=u.getAllFoldersForAllAccounts(),c=(0,_list.getListIdFromRoute)(s),_=(0,_list.getReferrerFromListId)(c),f=a.isEnabled("HSSearchBadge");return _===_mail_constants.ListReferrer.SMARTVIEW&&(c=(0,_list.convertSearchQueryToListId)({})),{searchQuery:o?(0,_list.getBootcampApiQueryParams)(c):{},suggestionsCache:r.getSuggestions(),importantContacts:r.getImportantContacts(),isWindowResizingDone:i,accountList:l,folderList:n,showSearchBadge:f,showHSSearchCue:a.isEnabled("HSSearchCue")}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_search_bar=require("../../../molecules/search_bar"),_search_bar2=_interopRequireDefault(_search_bar),_application=require("../../../stores/application"),_application2=_interopRequireDefault(_application),_suggestions=require("../../../stores/suggestions"),_suggestions2=_interopRequireDefault(_suggestions),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_features=require("../../../stores/features"),_features2=_interopRequireDefault(_features),_list=require("../../../platform/utils/list"),_mail_constants=require("../../../platform/mail_constants"),SearchBarControllerView=_react2.default.createClass({displayName:"SearchBarControllerView",render:function(){return _react2.default.createElement(_search_bar2.default,this.props)}});SearchBarControllerView.contextTypes={getStore:_react2.default.PropTypes.func.isRequired,executeAction:_react2.default.PropTypes.func.isRequired,config:_react2.default.PropTypes.object},exports.default=(0,_fluxibleAddonsReact.connectToStores)(SearchBarControllerView,[_suggestions2.default,_application2.default,_pages2.default,_mail2.default,_features2.default],getStateFromStores,{config:_react2.default.PropTypes.object});
},{"../../../molecules/search_bar":255,"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/list":"./platform/utils/list","../../../stores/application":"./stores/application","../../../stores/features":"./stores/features","../../../stores/mail":"./stores/mail","../../../stores/pages":"./stores/pages","../../../stores/suggestions":"./stores/suggestions","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],39:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_theme_provider=require("../../../molecules/theme_provider"),themer=_interopRequireWildcard(_theme_provider),_search_bar=require("./search_bar.jsx"),_search_bar2=_interopRequireDefault(_search_bar),_router=require("../providers/router"),_router2=_interopRequireDefault(_router),_mail_constants=require("../../../platform/mail_constants"),_route=require("../../../platform/utils/route"),_route_map=require("../../route_map"),_routesByApp$Apps$MAI=_route_map.routesByApp[_mail_constants.Apps.MAIL_APP],AppPaths=_routesByApp$Apps$MAI.paths,actionCreators=_routesByApp$Apps$MAI.actionCreators,SearchBarControllerView=(0,_fluxibleAddonsReact.provideContext)((0,_router2.default)(themer.provide(_search_bar2.default),{routes:Object.keys(AppPaths).map(function(e){var r;return r={},r[e]={path:_mail_constants.YCPI_PATH_PREFIX+AppPaths[e],actionCreator:actionCreators[e]},r}),filterQueryParams:_route.filterQueryParams}),{config:_react2.default.PropTypes.object,store:_react2.default.PropTypes.object,loader:_react2.default.PropTypes.object});exports.default=SearchBarControllerView,module.exports=exports.default;
},{"../../../molecules/theme_provider":"./molecules/theme_provider","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/route":"./platform/utils/route","../../route_map":"./apps/route_map","../providers/router":58,"./search_bar.jsx":38,"fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],40:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e,t){var r=e.getStore(_mail2.default),a=e.getStore(_features2.default),s=r.getSuggestedWordsForList(t.listId),o=(0,_list.recreateListId)(t.listId,{listContentType:_mail_constants.ListContentTypes.PEOPLE,listFilter:_mail_constants.ListFilters.WITH_KEYWORD}),i=e.config.showSuggestedContacts?r.getItemList(o):[];return{suggestedWords:s,suggestedContacts:i,showSearchCue:a.isEnabled("searchCue"),showHSNarrowSearchCue:a.isEnabled("HSNarrowSearchCue")}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_fluxibleAddonsReact=require("fluxible-addons-react"),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_features=require("../../../stores/features"),_features2=_interopRequireDefault(_features),_search_header=require("../../../molecules/search_header"),_search_header2=_interopRequireDefault(_search_header),_mail_constants=require("../../../platform/mail_constants"),_list=require("../../../platform/utils/list"),SearchHeaderControllerView=(0,_fluxibleAddonsReact.connectToStores)(_search_header2.default,[_mail2.default,_features2.default],getStateFromStores,{config:_react.PropTypes.object});exports.default=SearchHeaderControllerView;
},{"../../../molecules/search_header":258,"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/list":"./platform/utils/list","../../../stores/features":"./stores/features","../../../stores/mail":"./stores/mail","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],41:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_lazy_component=require("../../../../atoms/lazy_component"),_loading_indicator=require("../../../../atoms/loading_indicator.jsx"),_loading_indicator2=_interopRequireDefault(_loading_indicator),lazyStyle={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},SettingsMenu=_react2.default.createClass({displayName:"SettingsMenu",render:function(){return _react2.default.createElement(_lazy_component.LazyComponent,{import:"./settings.jsx",_moduleGetter:function(){return require("./settings.jsx")}},_react2.default.createElement(_lazy_component.When,{loading:!0},_react2.default.createElement("div",{style:lazyStyle},_react2.default.createElement(_loading_indicator2.default,null))))}});exports.default=SettingsMenu,module.exports=exports.default;
},{"../../../../atoms/lazy_component":"./atoms/lazy_component","../../../../atoms/loading_indicator.jsx":"./atoms/loading_indicator","./settings.jsx":"./apps/mail/controller_views/settings/settings","react":"./node_modules/react/react.js"}],42:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_popover_container=require("../../../../atoms/popover/popover_container.jsx"),_popover_container2=_interopRequireDefault(_popover_container),_popover_anchor=require("../../../../atoms/popover/popover_anchor.jsx"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_popover_content=require("../../../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover=require("../../../../atoms/constants/popover"),_fuji_icon_button=require("../../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_lazy_component=require("../../../../atoms/lazy_component"),_loading_indicator=require("../../../../atoms/loading_indicator.jsx"),_loading_indicator2=_interopRequireDefault(_loading_indicator),_fuji_icon=require("../../../../atoms/constants/fuji_icon"),_settings_menu=require("../../../../molecules/settings/styles/settings_menu"),_settings_menu2=_interopRequireDefault(_settings_menu),_actions=require("../../../../apps/mail/actions.js"),_actions2=require("../../../../molecules/feature_cue/actions.js"),_mail_ui_vars=require("../../../../platform/utils/mail_ui_vars"),_constants=require("../../../../platform/rapid_client/constants.js"),_themes=require("../../../../platform/theming/themes"),strings=(0,_reactIntl.defineMessages)({settingsMenu:{id:"settings_menu_aria_label",defaultMessage:"Settings Menu"}}),SettingsMenu=_react2.default.createClass({displayName:"SettingsMenu",contextTypes:{intl:_reactIntl.intlShape.isRequired,executeAction:_react.PropTypes.func,getCss:_react.PropTypes.func,getThemeMode:_react.PropTypes.func},componentDidMount:function(){window.showSettingsPopover&&(this._container.show(_popover.Triggers.CLICK),window.showSettingsPopover=void 0)},getInitialState:function(){return{isSettingsPopoverOpen:!1}},getDefaultProps:function(){return{showSettingsBadge:!1}},handleGearIconClick:function(){this.props.showSettingsCue&&this.context.executeAction(_actions2.closeFeatureCue,{name:"settingsCue"}),this.context.executeAction(_actions.showSettings,{i13nModel:{mKey:_constants.MKEYS.SETTINGS_GEAR_ICON,sec:_constants.SEC_VALUES.HEADER_NAV}})},handleSettingsLabelClick:function(){this.handleGearIconClick(),this.state.isSettingsPopoverOpen?(this._container.hide(_popover.Triggers.CLICK),this.setState({isSettingsPopoverOpen:!1})):(this._container.show(_popover.Triggers.CLICK),this.openSettingsPopover())},openSettingsPopover:function(){this.setState({isSettingsPopoverOpen:!0})},cueTryNowHandler:function(){this._container.hide(_popover.Triggers.MOUNT),this._container.show(_popover.Triggers.CLICK)},updateContent:function(){this.refs._content.updatePosition()},updateHSContent:function(){this.refs._hscontent.updatePosition()},renderCue:function(){return this.props.showSettingsCue?_react2.default.createElement(_popover_content2.default,{triggerOn:_popover.Triggers.MOUNT,onClose:this.cueClosed,zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH,ref:"_content",persistent:!0,permittedArrowDirections:[_popover.PermittedArrowDirections.RIGHT]},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../../../../molecules/scout_cue/",cueName:"settingsCue",onTryNow:this.cueTryNowHandler,onShow:this.updateContent,_moduleGetter:function(){return require("../../../../molecules/scout_cue/")}})):null},renderThemesCue:function(){return _react2.default.createElement(_lazy_component.LazyComponent,{import:"../../../../molecules/scout_cue/",cueName:"themesCue",onTryNow:this.cueTryNowHandler,_moduleGetter:function(){return require("../../../../molecules/scout_cue/")}})},getFujiIcon:function(){var e=this.context.intl.formatMessage,t=this.context.getThemeMode()!==_themes.ThemeModes.LIGHT;return _react2.default.createElement(_fuji_icon_button2.default,{onClick:this.handleGearIconClick,"data-iskeynav":!0,paddingLess:!0,size:_fuji_icon.Sizes.XS,kind:_fuji_icon.Kinds.SETTINGS,title:e(strings.settingsMenu),"aria-label":e(strings.settingsMenu),colorState:_fuji_icon.ColorStates.INHERITED,isOnDarkBackground:t})},renderHotSpotSettingsCue:function(){return this.props.showHSSettingsCue?_react2.default.createElement(_popover_content2.default,{triggerOn:_popover.Triggers.MOUNT,onClose:this.cueClosed,zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH,ref:"_hscontent",persistent:!0,permittedArrowDirections:[_popover.PermittedArrowDirections.RIGHT]},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../../../../molecules/scout_cue/",cueName:"HSSettingsCue",onTryButton:this.cueTryNowHandler,onShow:this.updateHSContent,_moduleGetter:function(){return require("../../../../molecules/scout_cue/")}})):null},render:function(){var e=this,t=this.props.verticalLayout,n=t?_popover.Align.START:_popover.Align.END,o=t?_popover.PermittedArrowDirections.RIGHT:_popover.PermittedArrowDirections.UP,r=this.context.getCss(_settings_menu2.default,{verticalLayout:t});return _react2.default.createElement("div",{className:r.settingsLabelIconContainer},_react2.default.createElement("span",{className:r.label,onClick:this.handleSettingsLabelClick},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"settings_link_label",defaultMessage:"Settings"})),_react2.default.createElement(_popover_container2.default,{ref:function(t){return e._container=t}},_react2.default.createElement(_popover_anchor2.default,null,_react2.default.createElement("div",{className:r.settingsGearIcon},this.props.showSettingsBadge?_react2.default.createElement("div",{className:r.badgeContainer,"data-test-id":"hotspots-badge"},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../../../../molecules/feature_cue/atoms/badge",cueName:"HSSettingsBadge",size:_fuji_icon.Sizes.XS,kind:_fuji_icon.Kinds.SETTINGS,_moduleGetter:function(){return require("../../../../molecules/feature_cue/atoms/badge")}},_react2.default.createElement(_lazy_component.When,{loading:!0},this.getFujiIcon()))):this.getFujiIcon())),_react2.default.createElement(_popover_content2.default,{offset:8,align:n,arrowSize:_popover.ArrowSizes.M,triggerOn:_popover.Triggers.CLICK,overflowScroll:!1,permittedArrowDirections:[o],bg:_popover.BackgroundKinds.LIGHTGRAY,onShow:this.openSettingsPopover},_react2.default.createElement(_lazy_component.LazyComponent,{import:"./settings_menu.jsx",_moduleGetter:function(){return require("./settings_menu.jsx")}},_react2.default.createElement(_lazy_component.When,{loading:!0},_react2.default.createElement("div",{className:r.menuContainerLazy},_react2.default.createElement(_loading_indicator2.default,null))))),this.renderCue(),this.renderHotSpotSettingsCue()),this.props.showThemesCue&&this.renderThemesCue())}});exports.default=SettingsMenu,module.exports=exports.default;
},{"../../../../apps/mail/actions.js":"./apps/mail/actions","../../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../../atoms/constants/popover":"./atoms/constants/popover","../../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../../atoms/lazy_component":"./atoms/lazy_component","../../../../atoms/loading_indicator.jsx":"./atoms/loading_indicator","../../../../atoms/popover/popover_anchor.jsx":"./atoms/popover/popover_anchor","../../../../atoms/popover/popover_container.jsx":"./atoms/popover/popover_container","../../../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../../../molecules/feature_cue/actions.js":"./molecules/feature_cue/actions","../../../../molecules/feature_cue/atoms/badge":"./molecules/feature_cue/atoms/badge","../../../../molecules/scout_cue/":"./molecules/scout_cue","../../../../molecules/settings/styles/settings_menu":"./molecules/settings/styles/settings_menu","../../../../platform/rapid_client/constants.js":"./platform/rapid_client/constants","../../../../platform/theming/themes":"./platform/theming/themes","../../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","./settings_menu.jsx":"./apps/mail/controller_views/settings_menu/settings_menu","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],43:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var t=e.getStore(_mail2.default),r=t.getActiveAccount(),a=e.getStore(_features2.default),o=a.isEnabled("HSDocumentsBadge");return{activeAccount:r,showDocumentsBadge:o}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_smart_view=require("../../../molecules/folder_list/atoms/smart_view.jsx"),_smart_view2=_interopRequireDefault(_smart_view),_fluxibleAddonsReact=require("fluxible-addons-react"),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_features=require("../../../stores/features"),_features2=_interopRequireDefault(_features),_mail_constants=require("../../../platform/mail_constants"),SmartviewControllerView=_react2.default.createClass({displayName:"SmartviewControllerView",render:function(){return _react2.default.createElement(_smart_view2.default,this.props)}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(SmartviewControllerView,[_mail2.default,_features2.default],getStateFromStores);
},{"../../../molecules/folder_list/atoms/smart_view.jsx":167,"../../../platform/mail_constants":"./platform/mail_constants","../../../stores/features":"./stores/features","../../../stores/mail":"./stores/mail","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],44:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var t=e.getStore(_ads2.default),s=t.getAdData(),r=s.nativeAd,a=s.pencilAd,o=t.getActionUrls(CLICK_INTERNAL),n=e.getStore(_pages2.default).getActivePageRoute(),l=(0,_list.getListIdFromRoute)(n);return{asset:r.geminiSponsoredAsset,subject:a.adHeadline,listId:l,clickInternalUrls:o}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_ads=require("../../../stores/ads.js"),_ads2=_interopRequireDefault(_ads),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_list=require("../../../platform/utils/list"),_lazy_component=require("../../../atoms/lazy_component"),CLICK_INTERNAL="CLICK_INTERNAL",SponsoredMessage=_react2.default.createClass({displayName:"SponsoredMessage",shouldComponentUpdate:function(e){return e.asset&&e.asset!==this.props.asset},render:function(){return _react2.default.createElement(_lazy_component.LazyComponent,{import:"../../../molecules/ads/sponsored_message_read.jsx",asset:this.props.asset,listId:this.props.listId,subject:this.props.subject,clickInternalUrls:this.props.clickInternalUrls,_moduleGetter:function(){return require("../../../molecules/ads/sponsored_message_read.jsx")}})}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(SponsoredMessage,[_ads2.default],getStateFromStores,{config:_react2.default.PropTypes.object});
},{"../../../atoms/lazy_component":"./atoms/lazy_component","../../../molecules/ads/sponsored_message_read.jsx":"./molecules/ads/sponsored_message_read","../../../platform/utils/list":"./platform/utils/list","../../../stores/ads.js":"./stores/ads","../../../stores/pages":"./stores/pages","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],45:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function getTabContent(t){var e,a=t.getStore(_mail2.default),s=a.getRootAccounts().filter(function(t){return t.status===_mail_constants.AccountStatus.ENABLED}),i=a.getAllFoldersForAllAccounts(),o=t.getStore(_pages2.default),r=t.getStore(_pages2.default).getActivePageRoute(),n=t.intl.formatMessage,_=(e={},e[_mail_constants.EmailProviders.YAHOO]=n(_strings2.default.yahoo_account_description),e[_mail_constants.EmailProviders.YAHOO_SB]=n(_strings2.default.yahoo_account_description),e[_mail_constants.EmailProviders.OUTLOOK]=n(_strings2.default.outlook_account_description),e[_mail_constants.EmailProviders.AOL]=n(_strings2.default.aol_account_description),e[_mail_constants.EmailProviders.GOOGLE]=n(_strings2.default.gmail_account_description),e[_mail_constants.EmailProviders.GOOGLE_APP]=n(_strings2.default.gmail_account_description),e);return o.getPageRoutes().map(function(t){var e=t.params,n=t.name,l={url:o.getURL(t),active:(0,_route.routesEqual)(r,t),title:"",titleType:_mail_constants.TabTitleTypes.TEXT,decorator:_mail_constants.TabButtonDecorators.NONE},c=void 0,u=void 0;switch(n){case _mail_constants.RouteNames.BASE:case _mail_constants.RouteNames.FOLDER:return;case _mail_constants.RouteNames.SETTINGS:l.titleType=_mail_constants.TabTitleTypes.SETTINGS;break;case _mail_constants.RouteNames.SEARCH:var m=(0,_list.getListIdFromRoute)(t),T=(0,_list.getReferrerFromListId)(m);if(T===_mail_constants.ListReferrer.SMARTVIEW)return;l.title=(0,_tab.getSearchTabTitleFromListId)(m,s,i,_),l.titleType=l.title?_mail_constants.TabTitleTypes.SEARCH_KEYWORD:_mail_constants.TabTitleTypes.SEARCH_DEFAULT,l.decorator=_mail_constants.TabButtonDecorators.SEARCH;break;case _mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST:var d=a.getMessageGroupState(decodeURIComponent(e.mid));if(d===_mail_constants.RecordStates.LOADING||d===_mail_constants.RecordStates.DOES_NOT_EXIST){l.titleType=_mail_constants.TabTitleTypes.LOADING;break}if(d===_mail_constants.RecordStates.ERROR){l.titleType=_mail_constants.TabTitleTypes.ERROR;break}case _mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST:c=a.getContextualMessageGroupById(decodeURIComponent(e.mid),(0,_list.getListIdFromRoute)(t)),l.title=(0,_message_group.getMetadata)(c).subject,l.title||(l.titleType=_mail_constants.TabTitleTypes.NO_SUBJECT);break;case _mail_constants.RouteNames.NEW_DRAFT:case _mail_constants.RouteNames.EDIT_DRAFT:if(l.decorator=_mail_constants.TabButtonDecorators.COMPOSE,e.csid?u=decodeURIComponent(e.csid):e.mid&&(u=a.getCsidByMessageId(decodeURIComponent(e.mid))),a.getComposeDataState(u)===_mail_constants.RecordStates.DOES_NOT_EXIST)l.titleType=_mail_constants.TabTitleTypes.LOADING;else if(a.getComposeDataState(u)===_mail_constants.RecordStates.ERROR)l.titleType=_mail_constants.TabTitleTypes.ERROR;else{var p=a.getComposeData(u);p.initialSubject?l.title=p.initialSubject:l.titleType=_mail_constants.TabTitleTypes.NEW_DRAFT}break;case _mail_constants.RouteNames.ATTACHMENT:l.titleType=_mail_constants.TabTitleTypes.PREVIEW;break;case _mail_constants.RouteNames.SPONSORED_MESSAGE:l.titleType=_mail_constants.TabTitleTypes.SPONSORED_AD;break;case _mail_constants.RouteNames.TUTORIAL:return;default:(0,_invariant2.default)(!1,"We do not know how to get title of the tab for this route: "+n)}return l}).filter(Boolean)}function getStateFromStores(t){return{tabContent:getTabContent(t)}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_reactIntl=require("react-intl"),_mail_constants=require("../../../platform/mail_constants"),_invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_list=require("../../../platform/utils/list"),_route=require("../../../platform/utils/route"),_tab=require("../../../platform/utils/tab"),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_tabs=require("../../../molecules/tabs"),_tabs2=_interopRequireDefault(_tabs),_message_group=require("../../../platform/utils/message_group"),_strings=require("../../../molecules/advanced_search_pane/atoms/strings"),_strings2=_interopRequireDefault(_strings),TabControllerView=function(t){return _react2.default.createElement(_tabs2.default,t)};exports.default=(0,_fluxibleAddonsReact.connectToStores)(TabControllerView,[_pages2.default,_mail2.default],getStateFromStores,{intl:_reactIntl.intlShape.isRequired});
},{"../../../molecules/advanced_search_pane/atoms/strings":"./molecules/advanced_search_pane/atoms/strings","../../../molecules/tabs":262,"../../../platform/invariant":"./platform/invariant","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/list":"./platform/utils/list","../../../platform/utils/message_group":"./platform/utils/message_group","../../../platform/utils/route":"./platform/utils/route","../../../platform/utils/tab":316,"../../../stores/mail":"./stores/mail","../../../stores/pages":"./stores/pages","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],46:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e,t){var s=t.activeGroupId,o=void 0===s?"":s,r=t.kind,a=t.listId,i=t.showLabels,l=t.showActionLabels,n=t.hideCloseButton,u=t.navigateOnMessageAction,_=e.getStore(_mail2.default),d=e.getStore(_pages2.default).getActivePageRoute(),c=_.getActiveAccountId(),g=_.getAllFoldersForAccount(c),p=_.getMessageGroupState(o),m=e.getStore(_item_list_ui2.default),f=(0,_list.getFolderIdFromListId)(a),h=(0,_list.getListContentTypeFromListId)(a),S=(0,_list.getReferrerFromListId)(a)===_mail_constants.ListReferrer.SMARTVIEW,I=d.name===_mail_constants.RouteNames.SEARCH,b=_.getMessageGroupById(o),A=[],v=function(t){if(t){var s=_.getItem(t,a),o=e.config.conversations,r=[_mail_constants.RouteNames.SEARCH,_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST].indexOf(d.name)!==-1,i=(0,_utils2.getMessageGroupViewRoute)({item:s,listId:a,isSearch:r,isConversationMode:o});e.navigateTo({route:i,replacePage:!0})}},R=void 0,F=void 0;if(o&&p!==_mail_constants.RecordStates.DOES_NOT_EXIST&&(F=_.getContextualMessageGroupById(o,a),A=b&&b.messages.map(function(e){return e.id})),f){var L=_.getFolder(f);L&&(R=(0,_folder2.getPrimaryFolderType)(L))}else if(F){var E=(0,_message_group.getMetadata)(F),T=E.folder;R=(0,_folder2.getPrimaryFolderType)(T)}if(I){var q=(0,_list.getFolderIdNamesFromListId)(a),y=q.folderIds,M=q.folderNames,C=[];y.length&&(C=y.map(function(e){return(0,_folder2.getPrimaryFolderType)(_.getFolder(e))})),M.length&&(C=C.concat((0,_folder2.filterFoldersByNames)((0,_folder2.groupFoldersByName)(g),M).map(function(e){return(0,_folder2.getPrimaryFolderType)(e)}))),1===C.length&&C[0]===_mail_constants.FolderTypes.ARCHIVE&&(R=C[0])}var x=Object.keys(m.getSelection(a)),G=_.getItemListIdsForList(a),w=r===_constants2.default.MESSAGE_VIEW&&d.name===_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST&&!S,k=I&&!!(0,_list.getEmailAddressFromListId)(a),N=!(I&&S&&(h===_mail_constants.ListContentTypes.IMAGES||h===_mail_constants.ListContentTypes.DOCUMENTS)),O=e.getStore(_message_group_ui2.default),P=(0,_reducers_selectors.selectors)(e.store.getState()),B=P.getRouterSelectors,D=B(),V=D.getHashParams(),H=V.messageId,j=void 0===H?null:H,W=(0,_utils.enabledActions)({kind:r,activeGroup:F,cards:F?O.getCards(F):null,cardExpansions:F?O.getCardExpansionStates(a,F.id,j):null,primaryFolderType:R});if(r===_constants2.default.MESSAGE_VIEW){var U=G.length,z=o===G[0],X=o===G[U-1];W.previous=!z,W.next=!X}return{activeGroupId:o,availableSortOrders:(0,_utils2.getAvailableSortOrders)(d,R,e.config.conversations,a),currentSortOrder:(0,_list.getSortOrderFromListId)(a),disabledFolderIdsForMove:f?[f]:[],folders:(0,_folder2.categorizeFolders)(g),kind:r,listId:a,currentRoute:d,showLabels:i,showActionLabels:l,hideCloseButton:n,enabledActions:W,selectedGroupIds:x,showBackToSearchList:w,showListFilter:k,showTriageActions:N,showListHeading:!N,messageIds:A,allItemsSelected:G.length>0&&G.length===x.length,navigateOnMessageAction:u,onPreviousItem:function(){var e=_.getPreviousGroupId(o,a);v(e)},onNextItem:function(){var e=_.getNextGroupId(o,a);v(e)},loadMoreIfNeeded:function(){e.executeAction(_message.loadMoreMessagesIfNeeded,{listId:a,currentGroupId:o})}}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e};exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_message_toolbar=require("../../../molecules/message_toolbar"),_message_toolbar2=_interopRequireDefault(_message_toolbar),_constants=require("../../../molecules/message_toolbar/constants"),_constants2=_interopRequireDefault(_constants),_back_to_search_list=require("../../../molecules/back_to_search_list"),_back_to_search_list2=_interopRequireDefault(_back_to_search_list),_utils=require("../../../molecules/message_toolbar/utils"),_message_group=require("../../../platform/utils/message_group"),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_message_group_ui=require("../../../stores/message_group_ui"),_message_group_ui2=_interopRequireDefault(_message_group_ui),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_item_list_ui=require("../../../stores/item_list_ui"),_item_list_ui2=_interopRequireDefault(_item_list_ui),_utils2=require("./utils"),_folder2=require("../../../platform/utils/folder"),_list=require("../../../platform/utils/list"),_mail_constants=require("../../../platform/mail_constants"),_route=require("../../../platform/utils/route"),_reducers_selectors=require("../../../reducers_selectors"),_message=require("../../../actions/message"),ToolbarControllerView=_react2.default.createClass({displayName:"ToolbarControllerView",shouldComponentUpdate:function(e){return!(this.props.kind===_constants2.default.MESSAGE_VIEW&&e.kind===_constants2.default.MESSAGE_VIEW&&this.props.activeGroupId===e.activeGroupId&&this.props.showLabels===e.showLabels&&this.props.showActionLabels===e.showActionLabels&&this.props.hideCloseButton===e.hideCloseButton&&this.props.enabledActions.previous===e.enabledActions.previous&&this.props.enabledActions.next===e.enabledActions.next&&!(0,_folder2.hasFolderTreeChanged)(this.props.folders.customFolders,e.folders.customFolders)&&this.props.enabledActions.collapseAll===e.enabledActions.collapseAll&&this.props.enabledActions.expandAll===e.enabledActions.expandAll)},_getBackToList:function(){var e=this.props,t=e.listId,s=e.showBackToSearchList;return s?_react2.default.createElement(_back_to_search_list2.default,{listId:t}):null},_getListRoute:function(e){var t=this.props,s=t.listId,o=t.currentRoute,r=void 0;return r=o.name===_mail_constants.RouteNames.SEARCH?(0,_route.buildSearchRouteFromListId)(s,e):(0,_route.buildFolderRouteFromListId)(s,e)},render:function(){return _react2.default.createElement(_message_toolbar2.default,_extends({},this.props,{BackToList:this._getBackToList(),getListRoute:this._getListRoute}))}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(ToolbarControllerView,[_mail2.default,_message_group_ui2.default,_item_list_ui2.default],getStateFromStores,{store:_react.PropTypes.object,config:_react.PropTypes.object,navigateTo:_react.PropTypes.func,executeAction:_react.PropTypes.func});
},{"../../../actions/message":"./actions/message","../../../molecules/back_to_search_list":125,"../../../molecules/message_toolbar":224,"../../../molecules/message_toolbar/constants":223,"../../../molecules/message_toolbar/utils":226,"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/folder":"./platform/utils/folder","../../../platform/utils/list":"./platform/utils/list","../../../platform/utils/message_group":"./platform/utils/message_group","../../../platform/utils/route":"./platform/utils/route","../../../reducers_selectors":"./reducers_selectors","../../../stores/item_list_ui":"./stores/item_list_ui","../../../stores/mail":"./stores/mail","../../../stores/message_group_ui":"./stores/message_group_ui","../../../stores/pages":"./stores/pages","./utils":"./apps/mail/controller_views/utils","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],47:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_lazy_component=require("../../../../atoms/lazy_component"),_loading_indicator=require("../../../../atoms/loading_indicator.jsx"),_loading_indicator2=_interopRequireDefault(_loading_indicator),_tutorial=require("./styles/tutorial"),_tutorial2=_interopRequireDefault(_tutorial),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),classNames=(0,_css2.default)(_tutorial2.default),TutorialView=_react2.default.createClass({displayName:"TutorialView",render:function(){return _react2.default.createElement(_lazy_component.LazyComponent,{import:"../../../../molecules/tutorial/index.jsx",_moduleGetter:function(){return require("../../../../molecules/tutorial/index.jsx")}},_react2.default.createElement(_lazy_component.When,{loading:!0},_react2.default.createElement("div",{className:classNames.container},_react2.default.createElement(_loading_indicator2.default,null))))}});exports.default=TutorialView,module.exports=exports.default;
},{"../../../../atoms/lazy_component":"./atoms/lazy_component","../../../../atoms/loading_indicator.jsx":"./atoms/loading_indicator","../../../../molecules/tutorial/index.jsx":"./molecules/tutorial","./styles/tutorial":48,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],48:[function(require,module,exports){
module.exports={className:{default:{container:"W_6D6F H_6D6F D_F ab_C gl_C"}},_key:"vwCkd"};
},{"./src/apps/mail/controller_views/tutorial/styles/atomic_tutorial.css":"./apps/mail/controller_views/tutorial/styles/atomic_tutorial"}],49:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var t=e.getStore(_mail2.default);return{isUnsafe:t.hasUnsavedData()}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _fluxibleAddonsReact=require("fluxible-addons-react"),_unsaved_data_warner=require("../../../atoms/unsaved_data_warner.jsx"),_unsaved_data_warner2=_interopRequireDefault(_unsaved_data_warner),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail);exports.default=(0,_fluxibleAddonsReact.connectToStores)(_unsaved_data_warner2.default,[_mail2.default],getStateFromStores);
},{"../../../atoms/unsaved_data_warner.jsx":101,"../../../stores/mail":"./stores/mail","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js"}],"./apps/mail/controller_views/utils":[function(require,module,exports){
"use strict";function getAvailableSortOrders(t,e,s,r){var a=r?(0,_list.getListContentTypeFromListId)(r):_mail_constants.ListContentTypes.MESSAGES;switch(t.name){case _mail_constants.RouteNames.SEARCH:return a===_mail_constants.ListContentTypes.IMAGES||a===_mail_constants.ListContentTypes.DOCUMENTS?SEARCH_SORT_ORDER_ATTATCHMENT:SEARCH_SORT_ORDER;default:return e===_mail_constants.FolderTypes.DRAFT?[_mail_constants.SortOrder.DATE_DESC,_mail_constants.SortOrder.DATE_ASC,_mail_constants.SortOrder.STARRED,_mail_constants.SortOrder.SUBJECT]:s?[_mail_constants.SortOrder.DATE_DESC,_mail_constants.SortOrder.DATE_ASC,_mail_constants.SortOrder.UNREAD,_mail_constants.SortOrder.STARRED]:SORT_ORDERS}}function getMessageGroupViewRouteFromGroup(t){var e=t.messageGroup,s=t.listId,r=t.isSearch,a=t.isConversationMode;if(1===e.messages.length&&(0,_message_group.onlyDrafts)(e))return{name:_mail_constants.RouteNames.EDIT_DRAFT,params:{serializedListId:(0,_list.serializeListIdForFolderRoute)(s),mid:e.messages[0].id}};var o=r?{query:(0,_list.serializeListIdForRoute)(s)}:{fid:(0,_list.serializeListIdForFolderRoute)(s)},i=r&&a?e.messages[0].conversationId:e.id;return i&&(o.query||o.fid)?{name:r?_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST:_mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST,params:Object.assign(o,{mid:i})}:null}function getMessageGroupViewRouteFromAttachment(t){var e=t.attachment,s=t.listId,r=t.isConversationMode,a=r?e.conversationId:e.id&&(0,_message.getMessageIdFromAttachmentId)(e.id);return a?{name:_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST,params:{mid:a,query:(0,_list.serializeListIdForRoute)(s)}}:null}function getMessageGroupViewRoute(t){var e=t.item,s=t.listId,r=t.isConversationMode,a=t.isSearch,o=(0,_list.getListContentTypeFromListId)(s);return o===_mail_constants.ListContentTypes.MESSAGES?getMessageGroupViewRouteFromGroup({messageGroup:e,listId:s,isConversationMode:r,isSearch:a}):getMessageGroupViewRouteFromAttachment({attachment:e.attachment,listId:s,isConversationMode:r})}exports.__esModule=!0,exports.getAvailableSortOrders=getAvailableSortOrders,exports.getMessageGroupViewRouteFromAttachment=getMessageGroupViewRouteFromAttachment,exports.getMessageGroupViewRoute=getMessageGroupViewRoute;var _mail_constants=require("../../../platform/mail_constants"),_list=require("../../../platform/utils/list"),_message_group=require("../../../platform/utils/message_group"),_message=require("../../../platform/utils/message"),_object=require("../../../platform/utils/object"),SearchSortOrderAttachment={DESC:_mail_constants.SortOrder.DATE_DESC,ASC:_mail_constants.SortOrder.DATE_ASC},SearchSortOrder={DESC:_mail_constants.SortOrder.DATE_DESC,ASC:_mail_constants.SortOrder.DATE_ASC,ATTACHMENT:_mail_constants.SortOrder.ATTACHMENT,RELEVANCE:_mail_constants.SortOrder.RELEVANCE},SORT_ORDERS=(0,_object.values)(_mail_constants.SortOrder),SEARCH_SORT_ORDER=(0,_object.values)(SearchSortOrder),SEARCH_SORT_ORDER_ATTATCHMENT=(0,_object.values)(SearchSortOrderAttachment);
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/list":"./platform/utils/list","../../../platform/utils/message":"./platform/utils/message","../../../platform/utils/message_group":"./platform/utils/message_group","../../../platform/utils/object":"./platform/utils/object"}],50:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var t=e.getStore(_user_preferences2.default);return{multiTaskModeSetting:t.getMultiTaskModeSetting()}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_app=require("./app.jsx"),_app2=_interopRequireDefault(_app),_user_preferences=require("../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_fluxibleAddonsReact=require("fluxible-addons-react"),_fluxibleRouter=require("fluxible-router"),_types=require("../../types"),HOC=(0,_fluxibleRouter.handleHistory)(_app2.default,{ignorePopstateOnPageLoad:!0,checkRouteOnPageLoad:!0});HOC=(0,_fluxibleAddonsReact.connectToStores)(HOC,[_user_preferences2.default],getStateFromStores,{config:_react2.default.PropTypes.object}),HOC=(0,_fluxibleAddonsReact.provideContext)(HOC,{config:_react2.default.PropTypes.object,store:_react2.default.PropTypes.object,loader:_types.LoaderType,timezone:_types.TimezoneType,region:_react2.default.PropTypes.string,locale:_types.LocaleShape,os:_react2.default.PropTypes.string,rapidParams:_react2.default.PropTypes.object,usmLogString:_react2.default.PropTypes.string,yqlClient:_types.YQLClientType,credstoreClient:_types.CredstoreClientType,cspToken:_react2.default.PropTypes.string,linkEnhancerClient:_types.LinkEnhancerClientType}),exports.default=HOC;
},{"../../stores/user_preferences":"./stores/user_preferences","../../types":"./types","./app.jsx":12,"fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","fluxible-router":"./node_modules/fluxible-router/index.js","react":"./node_modules/react/react.js"}],51:[function(require,module,exports){
"use strict";exports.__esModule=!0;var config=require("./config"),bootstrap=require("../../platform/bootstrap");exports.default=bootstrap(config),module.exports=exports.default;
},{"../../platform/bootstrap":284,"./config":17}],"./apps/mail/molecules/before_route_change":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),BeforeRouteChange=_react2.default.createClass({displayName:"BeforeRouteChange",contextTypes:{registerUnsavedDataHandler:_react.PropTypes.func},componentDidMount:function(){var e=this.props.getUnsavedData;this.context.registerUnsavedDataHandler&&(this.unsavedDataHandler=this.context.registerUnsavedDataHandler(e))},componentWillUnmount:function(){this.unsavedDataHandler&&this.unsavedDataHandler.remove()},render:function(){return this.props.children||null}});exports.default=BeforeRouteChange,module.exports=exports.default;
},{"react":"./node_modules/react/react.js"}],52:[function(require,module,exports){
"use strict";function previewMessage(e,s){var t=s.listId,a=s.itemId;e.dispatch(_react_action_constants.mail.PREVIEW_MESSAGE_REQUESTED,{listId:t,itemId:a})}function closePreviewMessage(e,s){var t=s.listId;e.dispatch(_react_action_constants.mail.PREVIEW_MESSAGE_CLOSED,{listId:t})}exports.__esModule=!0,exports.previewMessage=previewMessage,exports.closePreviewMessage=closePreviewMessage;var _react_action_constants=require("../../../../platform/react_action_constants");
},{"../../../../platform/react_action_constants":"./platform/react_action_constants"}],53:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_settings=require("../../../../actions/settings"),_object=require("../../../../platform/utils/object"),_mail_constants=require("../../../../platform/mail_constants"),_utils=require("../../../../platform/utils"),_constants=require("../../../../platform/rapid_client/constants"),_constants2=require("../../../../molecules/message_toolbar/constants"),_constants3=_interopRequireDefault(_constants2),_keyboard_shortcut_group=require("../../../../molecules/keyboard_shortcut_manager/keyboard_shortcut_group.jsx"),_keyboard_shortcut_group2=_interopRequireDefault(_keyboard_shortcut_group),_keyboard_shortcuts=require("../../../../platform/keyboard_shortcuts"),_keyboard_shortcut_groups=require("../../../../platform/keyboard_shortcut_groups"),_mail_reader=require("./styles/mail_reader"),_mail_reader2=_interopRequireDefault(_mail_reader),_mail_ui_vars=require("../../../../platform/utils/mail_ui_vars"),_lazy_component=require("../../../../atoms/lazy_component"),strings=(0,_reactIntl.defineMessages)({message_list:{id:"landmark.message_list",defaultMessage:"{previewpane, plural,\n            =0 {Message list.}\n            one {Message list. Currently in right preview mode. Use Shift + V to switch to another preview mode.}\n            other {Message list. Currently in bottom preview mode. Use Shift + V to switch to another preview mode.}\n        }"}}),shortcuts=(0,_keyboard_shortcuts.createShortcutGroup)({group:_keyboard_shortcut_groups.General,keys:{togglePreviewPaneSetting:{key:"SHIFT+V",description:_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.toggle_preview_pane_setting",defaultMessage:"Show/hide {previewPane}",values:{previewPane:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.toggle_preview_pane_setting_strong",defaultMessage:"Preview Pane"}))}})}}}),MailReader=_react2.default.createClass({displayName:"MailReader",contextTypes:{executeAction:_react.PropTypes.func,intl:_reactIntl.intlShape.isRequired,getCss:_react.PropTypes.func},getInitialState:function(){return{hSliderPos:_mail_ui_vars.PREVIEW_PANE_DEFAULT_LEFT_PERCENT_OFFSET,vSliderPos:_mail_ui_vars.PREVIEW_PANE_DEFAULT_TOP_PERCENT_OFFSET,size:0}},shouldComponentUpdate:function(e,t){var a=this.props,r=this.state;return a.currentRoute!==e.currentRoute||0===a.numberOfMessageSelection&&e.numberOfMessageSelection>0||a.numberOfMessageSelection>0&&0===e.numberOfMessageSelection||a.openedGroupId!==e.openedGroupId||a.isEmpty!==e.isEmpty||a.previewpane!==e.previewpane||a.previewpaneResizable!==e.previewpaneResizable||!!e.previewpaneResizable&&r.hSliderPos!==t.hSliderPos||!!e.previewpaneResizable&&r.vSliderPos!==t.vSliderPos},getToolbarKind:function(){var e=this.props.previewpane,t=void 0;return e===_mail_constants.PreviewPaneSettings.RIGHT?t=_constants3.default.LIST_WITH_PREVIEW_RIGHT:e===_mail_constants.PreviewPaneSettings.BOTTOM&&(t=_constants3.default.LIST_WITH_PREVIEW_BOTTOM),t},handlePreviewPaneSettingChange:function(e){e.preventDefault();var t=this.props.previewpane,a=void 0;switch(t){case _mail_constants.PreviewPaneSettings.NO:a=_mail_constants.PreviewPaneSettings.RIGHT;break;case _mail_constants.PreviewPaneSettings.RIGHT:a=_mail_constants.PreviewPaneSettings.BOTTOM;break;case _mail_constants.PreviewPaneSettings.BOTTOM:a=_mail_constants.PreviewPaneSettings.NO}var r={mKey:_constants.MKEYS.SETTINGS_PREVIEW_PANE,sec:_constants.SEC_VALUES.SETTINGS_INBOX_TAB,interactionType:(0,_utils.getInteractionFromEvent)(e)};this.context.executeAction(_settings.updateSetting,{name:_mail_constants.Settings.PREVIEW_PANE,value:a,i13nModel:r})},handleSlide:function(e,t,a){var r;this.setState((r={},r[e]=t,r.size=a,r))},renderReader:function(){var e=this.state,t=e.hSliderPos,a=e.vSliderPos,r=e.size,s=this.props,i=s.previewpane,n=s.previewpaneResizable,l=s.ItemList,o=s.MessageView,_=s.BlankMessageView,c=s.Toolbar,d=s.ListHeader,u=s.numberOfMessageSelection,p=s.openedGroupId,m=s.isEmpty,v=this.context.getCss(_mail_reader2.default,{previewpane:i});if(!i){var f=_react2.default.createElement(l,_extends({},this.props,this.state,{openedMessageId:p}));return _react2.default.createElement("div",{className:v.mailReader,"data-test-id":"mail-reader","data-test-preview":i},d?_react2.default.createElement(d,this.props):null,_react2.default.createElement("div",{className:v.toolbar,"data-test-id":"mail-reader-toolbar"},_react2.default.createElement(c,_extends({},this.props,{kind:_constants3.default.LIST,activeGroupId:p}))),_react2.default.createElement("div",{className:v.listContainer,"data-test-id":"mail-reader-list-container"},f))}var E={},g=0,h=void 0;if(i===_mail_constants.PreviewPaneSettings.RIGHT){if(E={flexBasis:t+"%"},n){var P=parseFloat(t);g=P>_mail_ui_vars.PREVIEW_PANE_DEFAULT_LEFT_PERCENT_OFFSET?P:_mail_ui_vars.PREVIEW_PANE_DEFAULT_LEFT_PERCENT_OFFSET}}else E={flexBasis:r>0?a/100*r+"px":a+"%"},n&&(h=parseFloat(a));var S=_react2.default.createElement(l,_extends({},this.props,this.state,{height:h,openedMessageId:p}));return _react2.default.createElement("div",{"data-test-id":"mail-reader","data-test-preview":i,className:v.mailReader},d?_react2.default.createElement(d,this.props):null,_react2.default.createElement("div",{className:v.toolbar},_react2.default.createElement(c,_extends({},this.props,{kind:this.getToolbarKind(),activeGroupId:p,previewPaneOffset:g,showActionLabels:!(g>_mail_ui_vars.PREVIEW_PANE_DEFAULT_LEFT_PERCENT_OFFSET)}))),_react2.default.createElement("div",{className:v.listContainer,ref:"listContainer"},_react2.default.createElement("div",{height:h,className:v.leftPane,style:E,ref:"leftPane"},S),_react2.default.createElement(_lazy_component.LazyComponent,{import:"../resizer",isEmpty:m,previewpane:i,previewpaneResizable:n,resize:this.handleSlide,_moduleGetter:function(){return require("../resizer")}}),_react2.default.createElement("div",{className:v.rightPane},0===u&&p?_react2.default.createElement("div",{className:v.messageView},_react2.default.createElement(o,_extends({},this.props,{hasToolbar:!1,openedMessageId:p}))):_react2.default.createElement("div",{className:v.blank},_react2.default.createElement(_,this.props)))))},render:function(){var e=this.context.intl.formatMessage,t=this.props.previewpane,a=this.context.getCss(_mail_reader2.default);return _react2.default.createElement(_keyboard_shortcut_group2.default,{keys:[shortcuts.togglePreviewPaneSetting(this.handlePreviewPaneSettingChange)]},_react2.default.createElement("div",{className:a.container,"data-test-id":"mail-reader-container",role:"main","aria-label":e(strings.message_list,{previewpane:t})},this.renderReader()))}});exports.default=MailReader,module.exports=exports.default;
},{"../../../../actions/settings":"./actions/settings","../../../../atoms/lazy_component":"./atoms/lazy_component","../../../../molecules/keyboard_shortcut_manager/keyboard_shortcut_group.jsx":"./molecules/keyboard_shortcut_manager/keyboard_shortcut_group","../../../../molecules/message_toolbar/constants":223,"../../../../platform/keyboard_shortcut_groups":"./platform/keyboard_shortcut_groups","../../../../platform/keyboard_shortcuts":"./platform/keyboard_shortcuts","../../../../platform/mail_constants":"./platform/mail_constants","../../../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../../../platform/utils":"./platform/utils","../../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../../../platform/utils/object":"./platform/utils/object","../resizer":"./apps/mail/molecules/resizer","./styles/mail_reader":"./apps/mail/molecules/mail_reader/styles/mail_reader","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./apps/mail/molecules/mail_reader/styles/mail_reader":[function(require,module,exports){
module.exports={className:{default:{container:"W_6D6F D_F",mailReader:"D_F ab_FT em_N ek_BB",listContainer:"D_F H_6D6F ab_FT em_N",toolbar:"en_0",leftPane:"en_0 ej_dAt p_R",deadResizer:"en_0 ej_dBP",resizer:"en_0 ej_dBP",rightPane:"em_T ej_0 p_R D_F o_h",messageView:"p_R em_N ac_FT",blank:"M_1EtAWD I_ZnkeaL em_N ac_FT D_F"},"previewpane-0":{listContainer:"M_0 p_R"},"previewpane-1":{deadResizer:"I_ZpQYvz",resizer:"I_ZpQYvz r_CA ej_eo6 Z_N I4_ZroviD",blank:"M_0"},"previewpane-2":{listContainer:"ek_BB",leftPane:"d_3nV5V",deadResizer:"M_1EtAWD ej_fq7 I_ZpQYvz",resizer:"M_1EtAWD ej_fq7 I_ZnIF8Y r_EB Z_N I4_ZroviD"},"themeMode-DARK":{blank:"I_T",resizer:"I_ajP3z"}},_key:"oeyld"};
},{"./src/apps/mail/molecules/mail_reader/styles/atomic_mail_reader.css":"./apps/mail/molecules/mail_reader/styles/atomic_mail_reader"}],54:[function(require,module,exports){
"use strict";function hideAdsTemporarily(t){t.dispatch(_react_action_constants.mail.HIDE_RIGHT_PANE_ADS)}exports.__esModule=!0,exports.hideAdsTemporarily=hideAdsTemporarily;var _react_action_constants=require("../../../../platform/react_action_constants");
},{"../../../../platform/react_action_constants":"./platform/react_action_constants"}],55:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_right_pane=require("./styles/right_pane"),_right_pane2=_interopRequireDefault(_right_pane),_hover_colored_fuji_icon=require("../../../../atoms/hover_colored_fuji_icon.jsx"),_hover_colored_fuji_icon2=_interopRequireDefault(_hover_colored_fuji_icon),_button=require("../../../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_lazy_component=require("../../../../atoms/lazy_component"),_themes=require("../../../../platform/theming/themes"),_constants=require("../../../../platform/rapid_client/constants.js"),_mail_ui_vars=require("../../../../platform/utils/mail_ui_vars"),_actions=require("./actions"),_fuji_icon=require("../../../../atoms/constants/fuji_icon"),_ads=require("../../../../molecules/ads"),_isAdFreeDialogShownInThisSession=!1,strings=(0,_reactIntl.defineMessages)({hide_advertisement:{id:"hide_advertisement",defaultMessage:"Hide Advertisement"}}),RightPaneAds=_react2.default.createClass({displayName:"RightPaneAds",contextTypes:{config:_react.PropTypes.object,intl:_reactIntl.intlShape.isRequired,executeAction:_react.PropTypes.func,getThemeMode:_react.PropTypes.func},getInitialState:function(){return{showAdFreeDialog:!1}},onHideAdvertisement:function(){this.context.executeAction(_actions.hideAdsTemporarily,{i13nModel:{mKey:_constants.MKEYS.HIDE_RIGHT_RAIL_AD,sec:_constants.SEC_VALUES.RIGHT_RAIL}}),!this.context.config.adFreeSupported||this.props.hideAdUpsellSetting||_isAdFreeDialogShownInThisSession||this.showAdFreeDialog()},showAdFreeDialog:function(){this.setState({showAdFreeDialog:!0})},hideAdFreeDialog:function(){this.setState({showAdFreeDialog:!1}),_isAdFreeDialogShownInThisSession=!0},render:function(){var e=this.props,t=e.innerWidth,i=e.verticalPreviewPane,r=e.hideRightPaneAds,a=this.state.showAdFreeDialog,s=this.context.getThemeMode(),o=(0,_css2.default)(_right_pane2.default,{verticalPreviewPane:i}),n={normal:s!==_themes.ThemeModes.LIGHT?_fuji_icon.ColorStates.INVERTED_DIM:_fuji_icon.ColorStates.NORMAL,hovered:s!==_themes.ThemeModes.LIGHT?_fuji_icon.ColorStates.INVERTED:_fuji_icon.ColorStates.SELECTED},_=[],l=this.context.intl.formatMessage;return!i&&t<_mail_ui_vars.NARROW_SCREEN_WIDTH||i&&t<_mail_ui_vars.WIDE_SCREEN_WIDTH?_.push(_react2.default.createElement(_ads.SkyAdComponent,{key:"sky_ad"})):!i&&t>=_mail_ui_vars.NARROW_SCREEN_WIDTH&&t<_mail_ui_vars.WIDE_SCREEN_WIDTH?_.push(_react2.default.createElement(_ads.StackedLrecAdComponent,{key:"stacked_lrec"})):t>=_mail_ui_vars.WIDE_SCREEN_WIDTH&&_.push(_react2.default.createElement(_ads.StackedLrecAdComponent,{key:"stacked_lrec"})),_react2.default.createElement("div",null,r?null:_react2.default.createElement("div",{"aria-hidden":!0,className:o.mainAd,"data-test-id":"right-rail-ad"},_react2.default.createElement(_button2.default,{title:l(strings.hide_advertisement),onClick:this.onHideAdvertisement,className:o.hideAdsChevron,"data-test-id":"right-rail-hidead-btn"},_react2.default.createElement(_hover_colored_fuji_icon2.default,{kind:_fuji_icon.Kinds.CHEVRON_UP,colorStates:n,size:_fuji_icon.Sizes.XS,rotate:_fuji_icon.Rotate.D90})),_),a&&!_isAdFreeDialogShownInThisSession?_react2.default.createElement(_lazy_component.LazyComponent,{import:"../../../../molecules/ads/adfree_upsell.jsx",hideAdFreeDialog:this.hideAdFreeDialog,_moduleGetter:function(){return require("../../../../molecules/ads/adfree_upsell.jsx")}}):null)}});exports.default=RightPaneAds,module.exports=exports.default;
},{"../../../../atoms/button.jsx":"./atoms/button","../../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../../atoms/hover_colored_fuji_icon.jsx":"./atoms/hover_colored_fuji_icon","../../../../atoms/lazy_component":"./atoms/lazy_component","../../../../molecules/ads":115,"../../../../molecules/ads/adfree_upsell.jsx":"./molecules/ads/adfree_upsell","../../../../platform/rapid_client/constants.js":"./platform/rapid_client/constants","../../../../platform/theming/themes":"./platform/theming/themes","../../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","./actions":54,"./styles/right_pane":56,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],56:[function(require,module,exports){
module.exports={className:{default:{mainAd:"em_N P_6Fd5 k_w W_3o4BO iy_h cWeabD_3vpWV",hideAdsChevron:"c27KHO0_n I_T b_0 P_0 D_F cdPFi_Z291T0t p_a T_e5X Q_36KP4 W_6Fd5 r_P"},"verticalPreviewPane-false":{mainAd:"W_3o4BO cZ1YE9Aj_3vpWV"},"verticalPreviewPane-true":{mainAd:"W_3o4BO cWeabD_3vpWV"}},_key:"Zjk3KB"};
},{"./src/apps/mail/molecules/right_pane_ads/styles/atomic_right_pane.css":"./apps/mail/molecules/right_pane_ads/styles/atomic_right_pane"}],57:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function wrappedAdProvider(e){return _react2.default.createClass({displayName:"AdProvider",adPositions:{darla:[],pencil:[]},contextTypes:{executeAction:_react.PropTypes.func,getThemeMode:_react.PropTypes.func,config:_react.PropTypes.object,region:_react.PropTypes.string,locale:_react.PropTypes.object},childContextTypes:{registerAdPosition:_react.PropTypes.func,removeAdPosition:_react.PropTypes.func},getChildContext:function(){var e=this;return{registerAdPosition:function(t){var o=t.darlaPos,i=t.pencilPos;o&&(e.adPositions.darla=(0,_uniq2.default)(e.adPositions.darla.concat(o))),i&&(e.adPositions.pencil=(0,_uniq2.default)(e.adPositions.pencil.concat(i)))},removeAdPosition:function(t){var o=t.darlaPos,i=t.pencilPos;o&&(e.adPositions.darla=e.adPositions.darla.filter(function(e){return e!==o})),i&&(e.adPositions.pencil=e.adPositions.pencil.filter(function(e){return e!==i}))}}},getInitialState:function(){return{isWiderMailExtnEnabled:this.props.isWiderMailExtnEnabled}},_onSuccess:function(e){var t=window.DARLA,o=this.props,i=o.spaceid,a=o.rootSpaceid,s=o.darlaLookAhead;if(this.allPosRenderLogger&&this.allPosRenderLogger.logSuccessAndLatency(),this.posRenderLoggers={},"prefetched"===e&&this.context.executeAction(_ads3.prefetchedAdsRendered,{spaceId:i.toString()}),s){var r=t.prefetched();r.length&&t.render(),t.add("prefetch",{name:"prefetch",ps:this.adPositions.darla.join(","),sp:a,npv:1}),t.prefetch("prefetch")}},_onStartParse:function(){var e=this.adPositions.darla.join(",");this.parseLogger=logger.feature("darla_ad_parse",{adPositions:e,intl:this.context.region})},_onFinishParse:function(e,t){var o=this;if(!t)return this.parseLogger.logFailure(),void this._executeDarlaAdHandlerAction({error:"Missing ad details"});this.parseLogger.logSuccessAndLatency();var i=t.ps(),a={spaceId:t.spaceID,positions:[]};i.forEach(function(e){var i=t.item(e)||{},s=i.bookID,r=i.pos,n=i.hasErr,d=logger.feature("darla_ad_call",{adPosition:r,intl:o.context.region});n?d.logFailure():d.logSuccess(),s&&a.positions.push({position:r,bookId:s})}),"rotate"===e?this._executeDarlaAdHandlerAction(a):"prefetch"===e&&this.context.executeAction(_ads3.lookAheadAdsParsed,a)},_onStartRequest:function(){var e=this.adPositions.darla.join(",");this.fetchLogger=logger.feature("darla_ad_fetch_call",{adPositions:e,intl:this.context.region})},_onFinishRequest:function(){this.fetchLogger.logSuccessAndLatency()},_onRequestTimeout:function(){this.fetchLogger.logFailure(),this._executeDarlaAdHandlerAction({error:"Request timeout"})},_onStartPrefetchRequest:function(){var e=this.adPositions.darla.join(",");this.prefetchLogger=logger.feature("darla_ad_prefetch_call",{adPositions:e,intl:this.context.region})},_onFinishPrefetchRequest:function(e,t){200===t?this.prefetchLogger.logSuccessAndLatency():(this.prefetchLogger.logFailure(),this._executeDarlaAdHandlerAction({error:"Prefetch request error: "+t}))},_onStartPosRender:function(e){var t=e.pos;this.posRenderLoggers[t]=logger.feature("darla_ad_pos_render",{adPosition:t,intl:this.context.region})},_onFinishPosRender:function(e,t,o){var i=this.posRenderLoggers[e];this.props.shouldUpdateDarlaPrefetchResult&&this.context.executeAction(_ads3.prefetchedAdRendered,{bookId:o.bookID,position:o.pos}),i&&i.logSuccessAndLatency()},_onRenderTimeout:function(){var e=this;Object.keys(this.posRenderLoggers).forEach(function(t){e.posRenderLoggers[t].logFailure()})},_executeDarlaAdHandlerAction:function(e){this.context.executeAction(_ads3.darlaAdHandler,e||{spaceId:"",positions:[]})},_startMessageReadAdRotation:function(){var e=this.props,t=e.messageReadAdRotationInterval,o=e.messageReadAdRotation;o&&(this._stopMessageReadAdRotation(),this._messageReadAdRotationTimer=setTimeout(this._messageReadAdRotationCallback,t))},_messageReadAdRotationCallback:function(){var e=Date.now(),t=this.props,o=t.messageReadAdRotationTimeStamp,i=t.messageReadAdRotationIdleInterval;e>o+i?this._stopMessageReadAdRotation():(this.context.executeAction(_ads3.messageReadAdRotationTimer),this._startMessageReadAdRotation())},_stopMessageReadAdRotation:function(){clearTimeout(this._messageReadAdRotationTimer),this._messageReadAdRotationTimer=null},_connectToWiderMailExtension:function(){var e=this;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.runtime&&"undefined"!=typeof chrome.runtime.connect){var t=this.context.config.widerMailExtension.chromeExtensionId,o=chrome.runtime.connect(t);o.onDisconnect.addListener(function(){e.context.executeAction(_ads3.disableWiderMailExtension)})}},componentWillUpdate:function(e){this.props.messageReadAdRotationTimeStamp&&!e.messageReadAdRotationTimeStamp?this._stopMessageReadAdRotation():this.props.messageReadAdRotationTimeStamp!==e.messageReadAdRotationTimeStamp&&this._startMessageReadAdRotation()},componentDidMount:function(){this._messageReadAdRotationTimer=null,this.fetchLogger=null,this.prefetchLogger=null,this.parseLogger=null,this.allPosRenderLogger=null,this.reconfigLogger=null,this.posRenderLoggers={},this.props.isWiderMailExtnEnabled&&this._connectToWiderMailExtension()},componentDidUpdate:function(e){var t=this.props,o=t.spaceid,i=t.debug,a=t.darlaLookAhead,s=t.darlaPrefetch;if(this.props.hasAds){var r=!(this.props.adRotationId===e.adRotationId&&this.props.spaceid===e.spaceid||0===this.props.adRotationId&&this.props.pencilAdData.clickUrl);if(r&&(this.adPositions.pencil.length&&this.context.executeAction(_ads3.getPencilAd),0!==this.adPositions.darla.length&&!this.props.isWiderMailExtnEnabled))if(isDarlaDownloaded){if(window.DARLA){var n=window.DARLA,d=window.DARLA.config(),c=this.context.getThemeMode();if(n.inProgress())return;if(n&&d){var l=_constants.tl1Theme[c===_themes.ThemeModes.LIGHT?"lightTheme":"darkTheme"],u=l.textColor,g=l.hoverColor;d.positions.TL1.css=_constants.tl1Theme.getCss(u,g),n.addPos(d.positions.TL1)}n.add("rotate",{name:"rotate",ps:this.adPositions.darla.join(","),sp:o,npv:1}),this.allPosRenderLogger=logger.feature("darla_ad_all_pos_render",{adPositions:this.adPositions.darla.join(","),intl:this.context.region});var h=n.prefetched();if(a&&h.length){var p=this.adPositions.darla.every(function(e){return h.indexOf(e)!==-1});p?(n.render(),this.context.executeAction(_ads3.lookAheadAdsRendered)):n.event("rotate")}else n.event("rotate")}}else{var f={onStartRequest:this._onStartRequest,onFinishRequest:this._onFinishRequest,onStartPrefetchRequest:this._onStartPrefetchRequest,onFinishPrefetchRequest:this._onFinishPrefetchRequest,onStartParse:this._onStartParse,onFinishParse:this._onFinishParse,onStartPosRender:this._onStartPosRender,onFinishPosRender:this._onFinishPosRender,onRenderTimeout:this._onRenderTimeout,onRequestTimeout:this._onRequestTimeout,onSuccess:this._onSuccess};if(window.DARLA&&window.DARLA_CONFIG.auto_render===!1){var _=window.DARLA.config,R=_(Object.assign(_()||{},f)),A=this.adPositions.darla.join(",");window.DARLA.render(),this.reconfigLogger=logger.feature("darla_ad_reconfig",{adPositions:A,intl:this.context.region,darlaLookAhead:a,darlaPrefetch:s}),"OK"===R?this.reconfigLogger.logSuccess():this.reconfigLogger.logFailure({status:R,actionInProgress:"FAIL--522"===R?window.DARLA.inProgress():null})}else{var m=DARLA_URL+"?f="+o+"&l="+this.adPositions.darla.join(",")+"&npv=1";window.DARLA_CONFIG=Object.assign(window.DARLA_CONFIG||{},f),i&&(m+="&debug=1"),ScriptLoader.loadScript(m)}isDarlaDownloaded=!0}}},render:function(){return _react2.default.createElement(e,_extends({key:this.state.isWiderMailExtnEnabled?"widerMailExtnEnabled":"widerMailExtnDisabled"},this.props))}})}function getStateFromStores(e){var t=(0,_list.getListIdFromRoute)(e.getStore(_pages2.default).getActivePageRoute());return{hasAds:!!e.config.ads,adRotationId:e.getStore(_ads2.default).getAdRotationId(),pencilAdData:e.getStore(_ads2.default).getPencilAdData(t),shouldUpdateDarlaPrefetchResult:e.getStore(_ads2.default).shouldUpdateDarlaPrefetchResult(),darlaLookAhead:e.config.darlaLookAhead,darlaPrefetch:e.config.darlaPrefetch,spaceid:e.getStore(_i13n2.default).getCurrentSpaceId(),rootSpaceid:e.config.spaceids.root,messageReadAdRotation:e.config.messageReadAdRotation,messageReadAdRotationInterval:e.config.messageReadAdRotationInterval,messageReadAdRotationIdleInterval:e.config.messageReadAdRotationIdleInterval,messageReadAdRotationTimeStamp:e.getStore(_ads2.default).getMessageReadAdRotationTimeStamp(),isWiderMailExtnEnabled:(0,_reducers_selectors.selectors)(e.store.getState()).getFeaturesSelectors().isEnabled("isWiderMailExtnEnabled")}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e};exports.default=function(e){var t=wrappedAdProvider(e);return(0,_fluxibleAddonsReact.connectToStores)(t,[_ads2.default,_i13n2.default,_pages2.default],getStateFromStores,{config:_react.PropTypes.object,store:_react.PropTypes.object})};var _react=require("react"),_react2=_interopRequireDefault(_react),_norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger),_fluxibleAddonsReact=require("fluxible-addons-react"),_script_loader=require("../../../../platform/utils/script_loader"),ScriptLoader=_interopRequireWildcard(_script_loader),_types=require("../../../../types"),_ads=require("../../../../stores/ads"),_ads2=_interopRequireDefault(_ads),_ads3=require("../../../../actions/ads"),_constants=require("../../../../molecules/ads/constants"),_i13n=require("../../../../stores/i13n"),_i13n2=_interopRequireDefault(_i13n),_list=require("../../../../platform/utils/list"),_pages=require("../../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_themes=require("../../../../platform/theming/themes"),_uniq=require("lodash/uniq"),_uniq2=_interopRequireDefault(_uniq),_reducers_selectors=require("../../../../reducers_selectors"),isDarlaDownloaded=!1,DARLA_URL="https://fc.yahoo.com/sdarla/php/client.php",logger=_norrinLogger2.default.create("norrin/darla");module.exports=exports.default;
},{"../../../../actions/ads":"./actions/ads","../../../../molecules/ads/constants":114,"../../../../platform/theming/themes":"./platform/theming/themes","../../../../platform/utils/list":"./platform/utils/list","../../../../platform/utils/script_loader":"./platform/utils/script_loader","../../../../reducers_selectors":"./reducers_selectors","../../../../stores/ads":"./stores/ads","../../../../stores/i13n":"./stores/i13n","../../../../stores/pages":"./stores/pages","../../../../types":"./types","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","lodash/uniq":"./node_modules/lodash/uniq.js","norrin-logger":"./node_modules/norrin-logger/index.js","react":"./node_modules/react/react.js"}],58:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function wrappedRouterProvider(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.routes,n=void 0===t?[]:t,a=r.filterQueryParams,u=n.map(function(e){var r=Object.keys(e),t=r[0],n=e[t].path;return(0,_invariant2.default)(t&&n,"config.routes should be in this format [{\n                routeName: routePattern\n            }]\n            "),{name:t,pattern:urlPatternGenerator(n),actionCreator:e[t].actionCreator}});return _react2.default.createClass({displayName:"RouterProvider",listeners:[],contextTypes:{executeAction:_react.PropTypes.func},childContextTypes:{navigateTo:_react.PropTypes.func,registerUnsavedDataHandler:_react.PropTypes.func},lastVisited:{},getChildContext:function(){var e=this;return{navigateTo:function(r){var t=r.i13nModel,n=r.url,o=r.route,i=r.hashParams,s=void 0===i?{}:i,l=_objectWithoutProperties(r,["i13nModel","url","route","hashParams"]),c=Date.now(),p=getRouteInfo(e.props.url,u),d=a(p),f=n?getRouteInfo(normalizeURL(n,d),u):normalizeRoute(o,u,d),_=u.find(function(e){return e.name===f.name})||{},m=_.actionCreator,v=_extends({},l,{perfHeader:{requestStart:c},cacheControl:{lastVisited:e.lastVisited[f.url]},route:f,hashParams:s});return m&&e.context.executeAction(m,v),Promise.all(e.listeners.map(function(e){return e()})).then(function(r){p.unsavedData=Object.assign.apply(null,[{}].concat(r)),e.context.executeAction(_actions.navigateToRoute,_extends({i13nModel:t,currentRoute:p},v)),e.lastVisited[f.url]=c})},registerUnsavedDataHandler:function(r){return e.listeners.push(r),{remove:function(){e.listeners=e.listeners.filter(function(e){return e!==r})}}}}},render:function(){return _react2.default.createElement(e,_extends({},this.props,{route:getRouteInfo(this.props.url,u)}))}})}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactRedux=require("react-redux"),_pathToRegexp=require("path-to-regexp"),_pathToRegexp2=_interopRequireDefault(_pathToRegexp),_url=require("url"),_querystring=require("querystring"),_querystring2=_interopRequireDefault(_querystring),_actions=require("../../../mail/actions"),_reducers_selectors=require("../../../../reducers_selectors"),_invariant=require("../../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),urlPatternGenerator=function(e){var r=[],t=(0,_pathToRegexp2.default)(e,r);return{match:function e(n){var e=t.exec(n);if(!e)return null;var a=e.slice(1);return r.reduce(function(e,r,t){if(a[t]){var n;return _extends({},e,(n={},n[r.name]=decodeURIComponent(a[t]),n))}return e},{})},stringify:_pathToRegexp2.default.compile(e)}},normalizeURL=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,_url.parse)(e),n=t.pathname,a=t.query,u=_extends({},r,_querystring2.default.parse(a)),o=_querystring2.default.stringify(u);return o?n+"?"+o:n},getRouteInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(0,_url.parse)(e),n=t.pathname,a=t.query,u=r.find(function(e){return e.pattern.match(n)});return u?{name:u.name,params:u.pattern.match(n),query:_querystring2.default.parse(a),url:e}:{}},normalizeRoute=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments[2];(0,_invariant2.default)(e.name,"route.name is missing");var n=_extends({},t,e.query),a=r.find(function(r){return r.name===e.name});(0,_invariant2.default)(a,e.name+" is not a valid route");var u=a.pattern.stringify(e.params||{},{pretty:!0});return{name:e.name,params:e.params,query:n,url:normalizeURL(u,n)}},mapStateToProps=function(e,r){var t=(0,_reducers_selectors.selectors)(e),n=t.getRouterSelectors;return{url:n().getRouteUrl()||r.url}};exports.default=function(e,r){return(0,_reactRedux.connect)(mapStateToProps)(wrappedRouterProvider(e,r))},module.exports=exports.default;
},{"../../../../platform/invariant":"./platform/invariant","../../../../reducers_selectors":"./reducers_selectors","../../../mail/actions":"./apps/mail/actions","path-to-regexp":"./node_modules/path-to-regexp/index.js","querystring":"querystring","react":"./node_modules/react/react.js","react-redux":"./node_modules/react-redux/lib/index.js","url":"url"}],59:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),RouteHandler=_react2.default.createClass({displayName:"RouteHandler",render:function(){var e=this.props.currentRoute.handler;return _react2.default.createElement(e,this.props)}});exports.default=RouteHandler,module.exports=exports.default;
},{"react":"./node_modules/react/react.js"}],60:[function(require,module,exports){
module.exports={className:{default:{compose:"p_a R_0 T_0 L_0 B_0 D_F"}},_key:"ZyEg8F"};
},{"./src/apps/mail/styles/atomic_compose.css":"./apps/mail/styles/atomic_compose"}],61:[function(require,module,exports){
module.exports={className:{default:{container:"D_F ek_BB H_6D6F cZ1RN91d_n s_1HCsWR aw_Z1Jwoyj",inputModeWrapper:"H_6D6F",appHeader:"en_0 cZ1RN91d_n D_F ek_BB gl_FM",tabSpace:"f_l a_3rehn W_3o4BO s_3o4BO cZ10Gnkk_ZM1sUU",tabWrapper:"a_1Ie4E3 I_sgPtS M_1EAG48 W_6D6F",tab:"N_3o4BO cZ1YE9As_ZbJh7p e_1GFLLo",ybar:"H_7zJd",accessible:"p_a L_Z1r6ru5 T_A W_dBP H_dBP o_h"},"ads-false":{tab:"N_0"},"themeMode-LIGHT":{tabWrapper:"I_ajP3z"},"theme-DEFAULT":{container:"aw_ICi05"},"theme-SUNRISE":{container:"aw_Z22SV3J"},"theme-AQUA_GREEN":{container:"aw_1XuulI"},"theme-AQUA_BLUE":{container:"aw_ZytePC"},"theme-DEEP_PURPLE":{container:"aw_1LUSOk"},"theme-BLUE_NIGHT":{container:"aw_baUKV"}},_key:"1zDFrA"};
},{"./src/apps/mail/styles/atomic_mail_app.css":"./apps/mail/styles/atomic_mail_app"}],62:[function(require,module,exports){
module.exports={className:{default:{container:"D_F ac_FT ab_C gl_C em_N",wrapper:"p_R",svgWrapper:"O_cMs",countWrapper:"p_a L_0 T_0 H_3nj85 W_3nj85 D_F gl_C ab_C",count:"C_Z291T0t A_74JI u_dzD p_R T_36KP4"}},_key:"Z34bGA"};
},{"./src/apps/mail/styles/atomic_mail_count.css":"./apps/mail/styles/atomic_mail_count"}],63:[function(require,module,exports){
module.exports={className:{default:{rightRail:"D_F ek_BB iz_A iy_h",attachmentPreview:"em_N"},hasAttachmentPreview:{rightRail:"ek_EZ"}},_key:"Z1qL9jJ"};
},{"./src/apps/mail/styles/atomic_right_rail.css":"./apps/mail/styles/atomic_right_rail"}],"./apps/route_map":[function(require,module,exports){
"use strict";function _interopRequireWildcard(s){if(s&&s.__esModule)return s;var a={};if(null!=s)for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(a[t]=s[t]);return a.default=s,a}exports.__esModule=!0,exports.routesByApp=exports.routePathsByApp=exports.routeMap=void 0;var _paths,_paths2,_actionCreators,_paths3,_paths4,_mail_constants=require("../platform/mail_constants"),_actions=require("./mail/actions"),ContainerActions=_interopRequireWildcard(_actions),ROUTES=[{app:_mail_constants.Apps.COMPOSE_APP,name:_mail_constants.Apps.COMPOSE_APP,paths:(_paths={},_paths[_mail_constants.RouteNames.NEW_DRAFT]="/app/compose/:csid",_paths),cssBundles:["/css/ltr/compose_app.css"],jsBundles:["vendor","compose_app"],ssrBundles:["compose_app"],container:{id:"compose-app-container",classes:["firefox-compose-app"]}},{app:_mail_constants.Apps.MAIL_APP,name:_mail_constants.Apps.MAIL_APP,ssrUnsupportedRoutes:[_mail_constants.RouteNames.SEARCH,_mail_constants.RouteNames.ATTACHMENT,_mail_constants.RouteNames.SPONSORED_MESSAGE],paths:(_paths2={},_paths2[_mail_constants.RouteNames.BASE]="/",_paths2[_mail_constants.RouteNames.FOLDER]="/folders/:fid",_paths2[_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST]="/search/:query/messages/:mid",_paths2[_mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST]="/folders/:fid/messages/:mid",_paths2[_mail_constants.RouteNames.NEW_DRAFT]="/compose/:csid",_paths2[_mail_constants.RouteNames.EDIT_DRAFT]="/:serializedListId/edit/:mid",_paths2[_mail_constants.RouteNames.SEARCH]="/search/:query",_paths2[_mail_constants.RouteNames.SETTINGS]="/settings/:settingsGroupId/:accountId?",_paths2[_mail_constants.RouteNames.ATTACHMENT]="/:serializedListId/groups/:groupId/attachments/:attachmentId",_paths2[_mail_constants.RouteNames.SPONSORED_MESSAGE]="/folders/:fid/sponsored/:creativeId",_paths2[_mail_constants.RouteNames.TUTORIAL]="/tutorial",_paths2),actionCreators:(_actionCreators={},_actionCreators[_mail_constants.RouteNames.SEARCH]=ContainerActions.openSearch,_actionCreators[_mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST]=ContainerActions.openMessageGroup,_actionCreators[_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST]=ContainerActions.openMessageGroup,_actionCreators),cssBundles:["/css/ltr/mail_app.css"],jsBundles:["vendor","mail_app"],ssrBundles:["mail_app"],jsLazyBundles:["mail_app_lazy_group1","mail_app_lazy_group2"],container:{id:"mail-app-container"}},{app:_mail_constants.Apps.MAIL_ENCRYPTED_APP,name:_mail_constants.Apps.MAIL_ENCRYPTED_APP,ssrUnsupportedRoutes:[_mail_constants.RouteNames.SECURE_COMPOSE,_mail_constants.RouteNames.SECURE_BODY,_mail_constants.RouteNames.SECURE_SETTINGS],paths:(_paths3={},_paths3[_mail_constants.RouteNames.SECURE_COMPOSE]="/secure/compose",_paths3[_mail_constants.RouteNames.SECURE_BODY]="/secure/body",_paths3[_mail_constants.RouteNames.SECURE_SETTINGS]="/secure/settings",_paths3),cssBundles:["/css/ltr/mail_encrypted_app.css"],jsBundles:["mail_encrypted_app"],container:{id:"mail-encrypted-app-container",classes:["mail-encrypted-app"]}},{app:_mail_constants.Apps.MOBILE_APP,name:_mail_constants.Apps.MOBILE_APP,appRootPath:"/m",paths:(_paths4={},_paths4[_mail_constants.RouteNames.BASE]="/",_paths4[_mail_constants.RouteNames.FOLDER]="/folders/:fid",_paths4),cssBundles:["/css/ltr/mobile_app.css"],jsBundles:["vendor","mobile_app"],container:{id:"mobile-app-container"}},{app:_mail_constants.Apps.PLAYGROUND,name:_mail_constants.Apps.PLAYGROUND,ssrUnsupportedRoutes:["PLAYGROUND"],paths:{PLAYGROUND:"/playground"},cssBundles:["/css/ltr/mail_app.css","/css/ltr/playground.css"],jsBundles:["vendor","playground"],ssrBundles:["playground"],container:{id:"playground-app-container"}}],routeMap=exports.routeMap=[];ROUTES.forEach(function(s){routeMap.push(s);var a=Object.assign({},s,{app:s.app+"_TEST",paths:{}});Object.keys(s.paths).forEach(function(t){a.paths[t]="/test"+s.paths[t]}),a.jsBundles=s.jsBundles.map(function(s){return s.indexOf("_app")>-1?s+"_test":s}),routeMap.push(a)});var routePathsByApp=exports.routePathsByApp={},routesByApp=exports.routesByApp={};routeMap.forEach(function(s){routePathsByApp[s.app]=s.paths,routesByApp[s.app]=s});
},{"../platform/mail_constants":"./platform/mail_constants","./mail/actions":"./apps/mail/actions"}],64:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function AccountMenu(e,t){var n=t.intl,a=(0,_css2.default)(_account_menu2.default),u=e.primaryAccountAddress,i=e.onLogout,_=e.onAccountMenuShow;return _react2.default.createElement(_menu_button_container2.default,{className:a.account,onMenuShow:_},_react2.default.createElement(_menu_button2.default,{hasText:!0,tabIndex:_mail_ui_vars.TabIndices.APP_HEADER_ACCOUNT_MENU,"data-test-id":"account-menu",className:a.menuButton},_react2.default.createElement("span",{className:a.button},_react2.default.createElement("span",{className:a.accountText,"data-test-id":"account-first-name"},e.name.first),_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.CHEVRON_UP,size:_fuji_icon3.Sizes.XS,rotate:_fuji_icon3.Rotate.D180,colorState:_fuji_icon3.ColorStates.INVERTED}))),_react2.default.createElement(_menu2.default,null,_react2.default.createElement(_list_item2.default,{kind:_list_item3.Kinds.WRAP_CONTENT,key:u,name:u,ariaLabel:u},_react2.default.createElement("div",{className:a.menuContainer},_react2.default.createElement("span",{className:a.menuName,"data-test-id":"account-full-name"},e.name.first+" "+e.name.last),_react2.default.createElement("span",{className:a.menuAddress,"data-test-id":"account-address"},u))),_react2.default.createElement(_list_item2.default,{name:"logout",key:"logout",ariaLabel:n.formatMessage(strings.logout),kind:_list_item3.Kinds.WRAP_CONTENT},_react2.default.createElement("a",{onClick:i,href:LOGOUT_LINK,className:a.logoutLink,"data-test-id":"logout-link"},n.formatMessage(strings.logout)))))}exports.__esModule=!0,exports.default=AccountMenu;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_menu=require("./menu/menu.jsx"),_menu2=_interopRequireDefault(_menu),_menu_button_container=require("./menu/menu_button_container.jsx"),_menu_button_container2=_interopRequireDefault(_menu_button_container),_menu_button=require("./menu/menu_button.jsx"),_menu_button2=_interopRequireDefault(_menu_button),_list_item=require("./list_item.jsx"),_list_item2=_interopRequireDefault(_list_item),_list_item3=require("./constants/list_item"),_types=require("../types"),_fuji_icon=require("./fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("./constants/fuji_icon"),_account_menu=require("./styles/account_menu"),_account_menu2=_interopRequireDefault(_account_menu),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_mail_ui_vars=require("../platform/utils/mail_ui_vars"),DONE_URL=encodeURIComponent("https://www.yahoo.com"),LOGOUT_LINK="https://login.yahoo.com/config/login?logout=1&.direct=2&.done="+DONE_URL,strings=(0,_reactIntl.defineMessages)({logout:{id:"logout",defaultMessage:"Sign out"}});AccountMenu.contextTypes={intl:_reactIntl.intlShape},module.exports=exports.default;
},{"../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../types":"./types","./constants/fuji_icon":"./atoms/constants/fuji_icon","./constants/list_item":"./atoms/constants/list_item","./fuji_icon.jsx":"./atoms/fuji_icon","./list_item.jsx":"./atoms/list_item","./menu/menu.jsx":"./atoms/menu/menu","./menu/menu_button.jsx":"./atoms/menu/menu_button","./menu/menu_button_container.jsx":"./atoms/menu/menu_button_container","./styles/account_menu":84,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],65:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleRouter=require("fluxible-router"),_mail_constants=require("../platform/mail_constants"),_account_switcher=require("./styles/account_switcher"),_account_switcher2=_interopRequireDefault(_account_switcher),_unread_count=require("./unread_count.jsx"),_unread_count2=_interopRequireDefault(_unread_count),_list_item=require("./list_item.jsx"),_list_item2=_interopRequireDefault(_list_item),_types=require("../types"),_themes=require("../platform/theming/themes"),_utils=require("../platform/utils"),_constants=require("../platform/rapid_client/constants.js"),_route=require("../platform/utils/route"),_reactIntl=require("react-intl"),_fuji_icon_button=require("./fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_fuji_icon=require("./constants/fuji_icon"),_account=require("../platform/utils/account"),_syncing_indicator=require("../atoms/syncing_indicator.jsx"),_syncing_indicator2=_interopRequireDefault(_syncing_indicator),strings=(0,_reactIntl.defineMessages)({accountSettingsMenu:{id:"accounts_settings_menu_aria_label",defaultMessage:"Account settings"},syncingIndicatorIcon:{id:"syncing_indicator_icon_aria_label",defaultMessage:"Syncing"},notSyncingIndicatorIcon:{id:"not_syncing_indicator_icon_aria_label",defaultMessage:"Not syncing"}}),AccountSwitcher=_react2.default.createClass({displayName:"AccountSwitcher",contextTypes:{executeAction:_react.PropTypes.func,navigateTo:_react.PropTypes.func,getCss:_react.PropTypes.func,getThemeMode:_react.PropTypes.func,intl:_reactIntl.intlShape.isRequired},getInitialState:function(){return{hoveredAccountId:null}},handleClick:function(e,t){this.props.onClick(t,e,{mKey:_constants.MKEYS.ACCOUNT_SWITCH,sec:_constants.SEC_VALUES.LEFTRAIL_ACCOUNTS,interactionType:(0,_utils.getInteractionFromEvent)(t)})},handleMouseOver:function(e){this.setState({hoveredAccountId:e})},handleMouseLeave:function(){this.setState({hoveredAccountId:null})},handleGearIconClick:function(e,t){this.navigateToSettingsTab(e,t,{mKey:_constants.MKEYS.EDIT_IMAP_ACCOUNT,sec:_constants.SEC_VALUES.LEFTRAIL_ACCOUNTS,interactionType:(0,_utils.getInteractionFromEvent)(t)})},handleExpiredIconClick:function(e,t){this.navigateToSettingsTab(e,t,{mKey:_constants.MKEYS.FIX_IMAP_ACCOUNT,sec:_constants.SEC_VALUES.LEFTRAIL_ACCOUNTS,interactionType:(0,_utils.getInteractionFromEvent)(t)})},navigateToSettingsTab:function(e,t,n){t.preventDefault(),t.stopPropagation(),this.context.navigateTo({route:(0,_route.buildSettingsRoute)({settingsGroupId:_mail_constants.SettingsTab.ACCOUNTS,accountId:e}),i13nModel:n})},shouldRenderAccount:function(e){var t=e.status,n=e.type;return t!==_mail_constants.AccountStatus.DELETE_IN_PROGRESS&&n!==_mail_constants.AccountTypes.POPIN},render:function(){var e=this,t=this.props,n=t.rootAccounts,i=t.accountDefaultFolders,a=t.activeAccountId,c=t.toggleAccountsList,s=t.expiredAccounts,o=this.context.getCss(_account_switcher2.default),r=this.context.intl.formatMessage,u=n.map(function(t){var n=t.status,o=t.type,u=t.createTime,_=t.id===a,l=e.context.getCss(_account_switcher2.default),d=i[t.id],f=t.description||t.email,m=(0,_account.checkSyncingState)({status:n,type:o,createTime:u}),p=e.state.hoveredAccountId===t.id,g=s.indexOf(t.id)!==-1,S=void 0;return d&&(c||_)&&e.shouldRenderAccount(t)?(S=g?_react2.default.createElement("span",{className:l.expiredIcon},_react2.default.createElement(_fuji_icon_button2.default,{kind:_fuji_icon.Kinds.EXCLAMATION_ALT,size:_fuji_icon.Sizes.XS,colorState:_fuji_icon.ColorStates.WARNING_GRAD_RED,onClick:e.handleExpiredIconClick.bind(e,t.id),title:r(strings.notSyncingIndicatorIcon)})):m?_react2.default.createElement("div",{className:l.statusIcon},_react2.default.createElement(_syncing_indicator2.default,{size:_fuji_icon.Sizes.S,title:r(strings.syncingIndicatorIcon)})):p?_react2.default.createElement("span",{className:l.settingGear},_react2.default.createElement(_fuji_icon_button2.default,{onClick:e.handleGearIconClick.bind(e,t.id),"data-iskeynav":!0,paddingLess:!0,size:_fuji_icon.Sizes.XXXS,kind:_fuji_icon.Kinds.SETTINGS,title:r(strings.accountSettingsMenu),"aria-label":r(strings.accountSettingsMenu),colorState:_fuji_icon.ColorStates.INHERITED})):_react2.default.createElement("span",{className:l.unreadCount},_react2.default.createElement(_unread_count2.default,{value:d.unread,isActive:_,isAccountSwitcher:!0,whiteBackground:e.context.getThemeMode()!==_themes.ThemeModes.LIGHT})),_react2.default.createElement(_list_item2.default,{key:t.email,onMouseOver:e.handleMouseOver.bind(e,t.id),onMouseLeave:e.handleMouseLeave.bind(e,t.id)},_react2.default.createElement(_fluxibleRouter.NavLink,{"data-iskeynav":!0,"data-test-id":"account-list-item","data-test-account-email":t.email,"data-test-is-active":_,"data-test-unread-count":d.unread,className:l.listItem,routeName:_mail_constants.RouteNames.FOLDER,navParams:{fid:d.id},onClick:e.handleClick.bind(e,d.id),tabIndex:"-1"},_react2.default.createElement("span",{className:_?l.activeText:l.text},f),S))):null});return _react2.default.createElement("div",{"data-test-id":"account-list"},_react2.default.createElement("ul",{className:o.accountList},u))}});exports.default=AccountSwitcher,module.exports=exports.default;
},{"../atoms/syncing_indicator.jsx":"./atoms/syncing_indicator","../platform/mail_constants":"./platform/mail_constants","../platform/rapid_client/constants.js":"./platform/rapid_client/constants","../platform/theming/themes":"./platform/theming/themes","../platform/utils":"./platform/utils","../platform/utils/account":"./platform/utils/account","../platform/utils/route":"./platform/utils/route","../types":"./types","./constants/fuji_icon":"./atoms/constants/fuji_icon","./fuji_icon_button.jsx":"./atoms/fuji_icon_button","./list_item.jsx":"./atoms/list_item","./styles/account_switcher":85,"./unread_count.jsx":100,"fluxible-router":"./node_modules/fluxible-router/index.js","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],66:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_theme_provider=require("../../molecules/theme_provider"),themeProvider=_interopRequireWildcard(_theme_provider),_ad_list_item=require("../styles/ad_list_item.js"),_ad_list_item2=_interopRequireDefault(_ad_list_item),_fuji_icon=require("../fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_button=require("../button.jsx"),_button2=_interopRequireDefault(_button),_types=require("../../types"),_xavatar=require("../xavatar.jsx"),_xavatar2=_interopRequireDefault(_xavatar),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),uiVar=_interopRequireWildcard(_mail_ui_vars),_constants=require("../../platform/gemini_api_client/constants.js"),_feedback_menu=require("../../molecules/ads/atoms/feedback_menu.jsx"),_feedback_menu2=_interopRequireDefault(_feedback_menu),_fuji_icon3=require("../constants/fuji_icon"),strings=(0,_reactIntl.defineMessages)({learn_more_btn_title:{id:"learn_more_btn_title",defaultMessage:"Learn More"},learn_more_btn_label:{id:"learn_more_btn_label",defaultMessage:"Learn More"}}),AdListItem=_react2.default.createClass({displayName:"AdListItem",contextTypes:{intl:_reactIntl.intlShape.isRequired,getCss:_react.PropTypes.func},onAdChoiceClicked:function(e){e.stopPropagation(),this.props.onAdChoiceClicked(e)},renderSponsoredIcon:function(){var e=this.props.isCompactLayout,t=this.context.getCss(_ad_list_item2.default,{isCompactLayout:e});return _react2.default.createElement("button",{className:t.sponsoredIcon,onClick:this.onAdChoiceClicked,tabIndex:"-1"},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.SPONSORED,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.INHERITED}))},renderLearnMoreButton:function(){var e=this.props,t=e.isCompactLayout,a=e.onClick,r=this.context.intl.formatMessage,n=this.context.getCss(_ad_list_item2.default,{isCompactLayout:t});return _react2.default.createElement(_button2.default,{onClick:a,className:n.learnMore,title:r(strings.learn_more_btn_title),"data-test-id":"learn-more-btn"},r(strings.learn_more_btn_label))},render:function(){var e=this.props,t=e.pencilAdData,a=e.onClick,r=e.isCompactLayout,n=e.feedbackEnabled,i=t.type===_constants.UsageType.NativeAdType,l=i&&r,s=this.context.getCss(_ad_list_item2.default,{isCompactLayout:r,feedbackEnabled:n,sponsoredCompactLayout:l}),c={name:t.advertiser},o=[];return t.impressionTrackingUrls.forEach(function(e){e&&o.push(_react2.default.createElement("img",{key:e,className:s.mbBeacon,src:e}))}),_react2.default.createElement("a",{"data-test-id":"pencil-ad",className:s.link,href:t.clickUrl,tabIndex:"-1",target:"_blank",onClick:a},_react2.default.createElement("div",{className:s.gridB1},_react2.default.createElement("div",{className:s.imageContainer},t.adImg?_react2.default.createElement(_xavatar2.default,{contact:c,size:r?uiVar.AVATAR_SIZE_COMPACT:uiVar.AVATAR_SIZE_M,fallback:t.adImg}):null),_react2.default.createElement("div",{className:s.compactMessage},_react2.default.createElement("span",{className:s.advertiser},_react2.default.createElement("span",null,t.adSource)),r?_react2.default.createElement("div",null,_react2.default.createElement("div",{className:s.snippet},t.adHeadline),i?this.renderLearnMoreButton():null):null)),_react2.default.createElement("div",{className:s.spacer}),_react2.default.createElement("div",{className:s.gridB2},r?null:this.renderSponsoredIcon(),r?null:_react2.default.createElement("div",{className:s.message},_react2.default.createElement("div",{className:s.subjectContainer},_react2.default.createElement("span",{className:s.subject},t.adHeadline)),_react2.default.createElement("span",{className:s.snippet,"data-test-id":"ad-summary"},t.adSummary),i?this.renderLearnMoreButton():null),_react2.default.createElement("div",{id:"adChoices",className:s.sponsoredContainer,onClick:this.onAdChoiceClicked},_react2.default.createElement("span",{className:s.sponsored},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"ad.sponsored",defaultMessage:"Sponsored"})),_react2.default.createElement("div",{className:s.iconContainer},r?this.renderSponsoredIcon():null,_react2.default.createElement(_feedback_menu2.default,{onAdChoiceClicked:this.onAdChoiceClicked,onAdFeedbackRequest:this.props.onAdFeedbackRequest,isCompactLayout:r,feedbackEnabled:n})))),_react2.default.createElement("img",{className:s.mbBeacon,src:t.beacon}),o)}});exports.default=themeProvider.provide(AdListItem),module.exports=exports.default;
},{"../../molecules/ads/atoms/feedback_menu.jsx":109,"../../molecules/theme_provider":"./molecules/theme_provider","../../platform/gemini_api_client/constants.js":"./platform/gemini_api_client/constants","../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../types":"./types","../button.jsx":"./atoms/button","../constants/fuji_icon":"./atoms/constants/fuji_icon","../fuji_icon.jsx":"./atoms/fuji_icon","../styles/ad_list_item.js":86,"../xavatar.jsx":"./atoms/xavatar","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/advanced_checkbox":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.CheckTypes=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_fuji_icon_button=require("./fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_fuji_icon=require("./constants/fuji_icon"),_reactIntl=require("react-intl"),_object=require("../platform/utils/object"),strings=(0,_reactIntl.defineMessages)({checked:{id:"atom.checkbox_checked",defaultMessage:"Checkbox, checked"},notChecked:{id:"atom.checkbox_not_checked",defaultMessage:"Checkbox, not checked"},partialChecked:{id:"atom.checkbox_partial_checked",defaultMessage:"Checkbox, partially checked"}}),CheckTypes=exports.CheckTypes=(0,_object.mirrorKeys)(["NONE","ALL","PARTIAL"]),AdvancedCheckbox=_react2.default.createClass({displayName:"AdvancedCheckbox",getDefaultProps:function(){return{highContrast:!1,isInverted:!1}},contextTypes:{intl:_reactIntl.intlShape.isRequired},render:function(){var e=this.props,t=e.type,i=e.highContrast,c=e.isInverted,o=void 0,r=void 0,a=void 0,n=void 0,s=void 0;switch(c?(n=i?_fuji_icon.ColorStates.INVERTED_LESS_DIM:_fuji_icon.ColorStates.INVERTED_DIM,s=_fuji_icon.ColorStates.INVERTED):(n=i?_fuji_icon.ColorStates.NORMAL:_fuji_icon.ColorStates.COOL_FAINT,s=_fuji_icon.ColorStates.SELECTED),t){case CheckTypes.ALL:o=_fuji_icon.Kinds.CHECKBOX_ON,r=s,a=strings.checked;break;case CheckTypes.PARTIAL:o=_fuji_icon.Kinds.MIXED_CHECKBOX,r=n,a=strings.partialChecked;break;case CheckTypes.NONE:default:o=_fuji_icon.Kinds.CHECKBOX_OFF,r=n,a=strings.notChecked}return _react2.default.createElement(_fuji_icon_button2.default,_extends({"data-test-id":"checkbox"},this.props,{"data-iskeynav":!0,role:"checkbox",size:_fuji_icon.Sizes.XS,kind:o,"aria-checked":t!==CheckTypes.NONE,colorState:r,title:this.context.intl.formatMessage(a)}))}});exports.default=AdvancedCheckbox;
},{"../platform/utils/object":"./platform/utils/object","./constants/fuji_icon":"./atoms/constants/fuji_icon","./fuji_icon_button.jsx":"./atoms/fuji_icon_button","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],67:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_advanced_search_button=require("./styles/advanced_search_button"),_advanced_search_button2=_interopRequireDefault(_advanced_search_button),_hover_colored_fuji_icon_button=require("./hover_colored_fuji_icon_button.jsx"),_hover_colored_fuji_icon_button2=_interopRequireDefault(_hover_colored_fuji_icon_button),_fuji_icon=require("./constants/fuji_icon"),_utils=require("../platform/utils/"),_constants=require("../platform/rapid_client/constants"),classNames=(0,_css2.default)(_advanced_search_button2.default),strings=(0,_reactIntl.defineMessages)({chevron_title:{id:"advanced_search.chevron_title",defaultMessage:"Toggle advanced search pane"}}),AdvancedSearchButton=_react2.default.createClass({displayName:"AdvancedSearchButton",contextTypes:{intl:_reactIntl.intlShape.isRequired},getDefaultProps:function(){return{chevronDown:!0}},handleOnClick:function(e){var t={mKey:_constants.MKEYS.ADVANCED_SEARCH,interactionType:(0,_utils.getInteractionFromEvent)(e)};this.props.onClick({i13nModel:t})},render:function(){var e=this.context.intl.formatMessage,t=this.props,n=t.chevronDown,a=t.tabIndex;return _react2.default.createElement("div",{className:classNames.buttonContainer,"data-test-id":"advanced-search-button"},_react2.default.createElement(_hover_colored_fuji_icon_button2.default,{tabIndex:a,kind:_fuji_icon.Kinds.CHEVRON_UP,colorStates:{normal:_fuji_icon.ColorStates.DISABLED,hovered:_fuji_icon.ColorStates.SELECTED},size:_fuji_icon.Sizes.S,rotate:n?_fuji_icon.Rotate.D180:null,title:e(strings.chevron_title),"aria-label":e(strings.chevron_title),onClick:this.handleOnClick,paddingLess:!0}))}});exports.default=AdvancedSearchButton,module.exports=exports.default;
},{"../platform/rapid_client/constants":"./platform/rapid_client/constants","../platform/utils/":"./platform/utils","./constants/fuji_icon":"./atoms/constants/fuji_icon","./hover_colored_fuji_icon_button.jsx":"./atoms/hover_colored_fuji_icon_button","./styles/advanced_search_button":87,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/attachment_icon":[function(require,module,exports){
"use strict";function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function AttachmentIcon(i){var o=i.disabled,_=i.type,e=i.subtype,T=i.isInverted,t=(0,_attachments.getAttachmentType)(_,e),l=TypeToFujiKind[t]||_fuji_icon2.Kinds.ATTACH_GENERIC_48,u=TypeToFujiIconColorState[t]||_fuji_icon2.ColorStates.ATTACH_GENERIC,a=T?_mail_ui_vars.DODGE_60:FujiColorStateToStyle[u],r={fill:o?_mail_ui_vars.THIRD_LEVEL_GRAY:a};return _react2.default.createElement("svg",{style:r,viewBox:"0 0 20 20",className:classNames.attachmentIcon},_fuji_icon._svg[l])}exports.__esModule=!0;var _TypeToFujiKind,_TypeToFujiIconColorS,_FujiColorStateToStyl,_react=require("react"),_react2=_interopRequireDefault(_react),_fuji_icon=require("./fuji_icon.jsx"),_fuji_icon2=require("./constants/fuji_icon"),_attachments=require("../platform/utils/attachments"),_mail_constants=require("../platform/mail_constants"),_mail_ui_vars=require("../platform/utils/mail_ui_vars"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_attachment_icon=require("./styles/attachment_icon"),_attachment_icon2=_interopRequireDefault(_attachment_icon),SimplifiedTypes=_mail_constants.Attachments.SimplifiedTypes,classNames=(0,_css2.default)(_attachment_icon2.default),TypeToFujiKind=(_TypeToFujiKind={},_TypeToFujiKind[SimplifiedTypes.IMAGE]=_fuji_icon2.Kinds.ATTACH_IMAGE_48,_TypeToFujiKind[SimplifiedTypes.VIDEO]=_fuji_icon2.Kinds.ATTACH_MOVIE_48,_TypeToFujiKind[SimplifiedTypes.FILE]=_fuji_icon2.Kinds.ATTACH_GENERIC_48,_TypeToFujiKind[SimplifiedTypes.AUDIO]=_fuji_icon2.Kinds.ATTACH_SOUND_48,_TypeToFujiKind[SimplifiedTypes.COMPRESSED]=_fuji_icon2.Kinds.ATTACH_ZIP_48,_TypeToFujiKind[SimplifiedTypes.PDF]=_fuji_icon2.Kinds.ATTACH_PDF_48,_TypeToFujiKind[SimplifiedTypes.XLS]=_fuji_icon2.Kinds.ATTACH_XLS_48,_TypeToFujiKind[SimplifiedTypes.PPT]=_fuji_icon2.Kinds.ATTACH_PPT_48,_TypeToFujiKind[SimplifiedTypes.DOC]=_fuji_icon2.Kinds.ATTACH_DOC_48,_TypeToFujiKind[SimplifiedTypes.CAL]=_fuji_icon2.Kinds.ATTACH_ICS_48,_TypeToFujiKind),TypeToFujiIconColorState=(_TypeToFujiIconColorS={},_TypeToFujiIconColorS[SimplifiedTypes.IMAGE]=_fuji_icon2.ColorStates.ATTACH_MEDIA,_TypeToFujiIconColorS[SimplifiedTypes.VIDEO]=_fuji_icon2.ColorStates.ATTACH_MEDIA,_TypeToFujiIconColorS[SimplifiedTypes.AUDIO]=_fuji_icon2.ColorStates.ATTACH_MEDIA,_TypeToFujiIconColorS[SimplifiedTypes.PDF]=_fuji_icon2.ColorStates.ATTACH_PDF,_TypeToFujiIconColorS[SimplifiedTypes.XLS]=_fuji_icon2.ColorStates.ATTACH_EXCEL,_TypeToFujiIconColorS[SimplifiedTypes.PPT]=_fuji_icon2.ColorStates.ATTACH_SLIDE,_TypeToFujiIconColorS[SimplifiedTypes.DOC]=_fuji_icon2.ColorStates.ATTACH_DOC,_TypeToFujiIconColorS[SimplifiedTypes.CAL]=_fuji_icon2.ColorStates.ATTACH_CAL,_TypeToFujiIconColorS[SimplifiedTypes.COMPRESSED]=_fuji_icon2.ColorStates.ATTACH_COMPRESSED,_TypeToFujiIconColorS),FujiColorStateToStyle=(_FujiColorStateToStyl={},_FujiColorStateToStyl[_fuji_icon2.ColorStates.ATTACH_MEDIA]="url(#"+_fuji_icon2.ColorStates.ATTACH_MEDIA+") "+_mail_ui_vars.PALETTE.ycolorPurple14a,_FujiColorStateToStyl[_fuji_icon2.ColorStates.ATTACH_CAL]="url(#"+_fuji_icon2.ColorStates.ATTACH_MEDIA+") "+_mail_ui_vars.PALETTE.ycolorPurple14a,_FujiColorStateToStyl[_fuji_icon2.ColorStates.ATTACH_EXCEL]="url(#"+_fuji_icon2.ColorStates.ATTACH_EXCEL+") "+_mail_ui_vars.PALETTE.ycolorTurquoise8a,_FujiColorStateToStyl[_fuji_icon2.ColorStates.ATTACH_DOC]="url(#"+_fuji_icon2.ColorStates.ATTACH_DOC+") "+_mail_ui_vars.PALETTE.ycolorBlue10b,_FujiColorStateToStyl[_fuji_icon2.ColorStates.ATTACH_SLIDE]="url(#"+_fuji_icon2.ColorStates.ATTACH_SLIDE+") "+_mail_ui_vars.PALETTE.ycolorPink1a,_FujiColorStateToStyl[_fuji_icon2.ColorStates.ATTACH_PDF]="url(#"+_fuji_icon2.ColorStates.ATTACH_SLIDE+") "+_mail_ui_vars.PALETTE.ycolorPink1a,_FujiColorStateToStyl[_fuji_icon2.ColorStates.ATTACH_GENERIC]="url(#"+_fuji_icon2.ColorStates.ATTACH_GENERIC+") "+_mail_ui_vars.PALETTE.ycolorBlue10a,_FujiColorStateToStyl[_fuji_icon2.ColorStates.ATTACH_COMPRESSED]="url(#"+_fuji_icon2.ColorStates.ATTACH_GENERIC+") "+_mail_ui_vars.PALETTE.ycolorBlue10a,_FujiColorStateToStyl);exports.default=AttachmentIcon,module.exports=exports.default;
},{"../platform/mail_constants":"./platform/mail_constants","../platform/utils/attachments":"./platform/utils/attachments","../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","./constants/fuji_icon":"./atoms/constants/fuji_icon","./fuji_icon.jsx":"./atoms/fuji_icon","./styles/attachment_icon":"./atoms/styles/attachment_icon","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./atoms/bidi_input":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var i={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_bidi_input=require("./styles/bidi_input"),_bidi_input2=_interopRequireDefault(_bidi_input),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_merge=require("react-atomic-css/merge"),_merge2=_interopRequireDefault(_merge),_bidiUtils=require("bidi-utils"),_fuji_icon_button=require("./fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_fuji_icon=require("./constants/fuji_icon"),_reactIntl=require("react-intl"),strings=(0,_reactIntl.defineMessages)({clearButton:{id:"input_clear",defaultMessage:"Clear"}}),BidiInput=_react2.default.createClass({displayName:"BidiInput",contextTypes:{intl:_reactIntl.intlShape},getDefaultProps:function(){return{value:"",onChange:function(){},isClearable:!1,onClear:function(){},containerClassName:""}},componentDidUpdate:function(){var e=(0,_bidiUtils.getTextDirection)(this.props.value);e||this.refs.input.removeAttribute("dir")},focus:function(){this.refs.input.focus()},handleChange:function(e){var t=this.props;e.target.value!==t.value&&t.onChange(e)},render:function(){var e=this.props,t=e.value,i=e.className,r=e.containerClassName,a=e.isClearable,n=e.onClear,u=_objectWithoutProperties(e,["value","className","containerClassName","isClearable","onClear"]),s=Boolean(a&&t),o=(0,_bidiUtils.getTextDirection)(t),l=(0,_css2.default)(_bidi_input2.default,{showClear:s,dir:o});return _react2.default.createElement("div",{className:(0,_merge2.default)(l.inputContainer,r)},_react2.default.createElement("input",_extends({},u,{value:t,className:(0,_merge2.default)(l.input,i),ref:"input",onChange:this.handleChange,dir:o})),s&&_react2.default.createElement("span",{className:l.clearButtonContainer},_react2.default.createElement(_fuji_icon_button2.default,{kind:_fuji_icon.Kinds.CLEAR,size:_fuji_icon.Sizes.XXS,colorState:_fuji_icon.ColorStates.FAINT,title:this.context.intl.formatMessage(strings.clearButton),className:l.clearButton,onClick:n,"data-test-id":"clear-button"})))}});exports.default=BidiInput,module.exports=exports.default;
},{"./constants/fuji_icon":"./atoms/constants/fuji_icon","./fuji_icon_button.jsx":"./atoms/fuji_icon_button","./styles/bidi_input":"./atoms/styles/bidi_input","bidi-utils":"./node_modules/bidi-utils/src/index.js","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-atomic-css/merge":"./node_modules/react-atomic-css/merge.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/button":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _objectWithoutProperties(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}exports.__esModule=!0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_react=require("react"),_react2=_interopRequireDefault(_react),_button=require("./styles/button"),_button2=_interopRequireDefault(_button),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_button3=require("./constants/button"),_object=require("../platform/utils/object"),Button=_react2.default.createClass({displayName:"Button",getDefaultProps:function(){return{kind:_button3.Kinds.PRIMARY,disabled:!1,paddingLess:!1,isOnDarkBackground:!1}},keyboardClick:function(t){/^( |Enter)$/.test(t.key)&&(t.preventDefault(),t.stopPropagation(),this.props.onClick(t))},render:function(){var t=this.props,e=t.kind,r=t.disabled,n=t.paddingLess,o=t.onClick,s=t.children,a=t.isOnDarkBackground,i=_objectWithoutProperties(t,["kind","disabled","paddingLess","onClick","children","isOnDarkBackground"]),u=(0,_css2.default)(_button2.default,{decorated:e===_button3.Kinds.PRIMARY||e===_button3.Kinds.SECONDARY||e===_button3.Kinds.DANGER,kind:e,disabled:r,paddingLess:n,isOnDarkBackground:a,primaryHover:(e===_button3.Kinds.PRIMARY)+"_"+r});return _react2.default.createElement("button",_extends({tabIndex:-1,disabled:!!r,className:u.button,onKeyDown:o&&this.keyboardClick,onClick:o,type:"button"},i),s)}});exports.default=Button,module.exports=exports.default;
},{"../platform/utils/object":"./platform/utils/object","./constants/button":"./atoms/constants/button","./styles/button":"./atoms/styles/button","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./atoms/carousel":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_fuji_icon=require("./constants/fuji_icon"),_fuji_icon_button=require("./fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_carousel=require("./styles/carousel"),_carousel2=_interopRequireDefault(_carousel),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),strings=(0,_reactIntl.defineMessages)({prev:{id:"carousel.previous",defaultMessage:"Previous"},next:{id:"carousel.next",defaultMessage:"Next"}}),Direction={NEXT:"NEXT",PREV:"PREV"},Carousel=_react2.default.createClass({displayName:"Carousel",contextTypes:{config:_react.PropTypes.object.isRequired,intl:_reactIntl.intlShape.isRequired},getInitialState:function(){return{offset:0,nextDisabled:!1}},componentDidMount:function(){var e=this.props,t=e.itemWidth,i=e.children,s=t*_react2.default.Children.count(i);this.setState({nextDisabled:this.refs.carousel.clientWidth>=s})},componentWillReceiveProps:function(e){if(e.isWindowResizingDone){var t=this.props,i=t.itemWidth,s=t.children,a=this.state.offset,r=i*_react2.default.Children.count(s),n=this.refs.carousel.clientWidth,o=n+a-r,l=o>a?a:o,c=o>=0?a-l:a;this.setState({offset:c,nextDisabled:n+c-r>=0})}},navHandle:function(e){var t=this.props,i=t.itemWidth,s=t.children,a=this.state.offset,r=i*_react2.default.Children.count(s),n=this.refs.carousel.clientWidth,o=0;if(e===Direction.NEXT){var l=r-n-a;o=n>l?-l:-n}else o=a>n?n:a;var c=a-o;0!==o&&this.setState({offset:c,nextDisabled:n+c-r>=0})},render:function(){var e=this.context,t=e.config,i=e.intl,s=this.state,a=s.offset,r=s.nextDisabled,n=a<=0,o=(0,_css2.default)(_carousel2.default,{prevDisabled:n,nextDisabled:r}),l=t.rtl,c=l?{right:-a}:{left:-a};return _react2.default.createElement("div",{className:o.carouselContainer},_react2.default.createElement(_fuji_icon_button2.default,{kind:_fuji_icon.Kinds.ARROW_RIGHT_DOC,rotate:l?_fuji_icon.Rotate.D0:_fuji_icon.Rotate.D180,size:_fuji_icon.Sizes.XS,colorState:n?_fuji_icon.ColorStates.FAINT:_fuji_icon.ColorStates.SELECTED,onClick:this.navHandle.bind(this,Direction.PREV),title:i.formatMessage(strings.prev),"aria-label":i.formatMessage(strings.prev),className:o.prevNavHandle}),_react2.default.createElement("div",{className:o.carousel,ref:"carousel"},_react2.default.createElement("div",{className:o.list,style:c},this.props.children)),_react2.default.createElement(_fuji_icon_button2.default,{kind:_fuji_icon.Kinds.ARROW_RIGHT_DOC,rotate:l?_fuji_icon.Rotate.D180:_fuji_icon.Rotate.D0,size:_fuji_icon.Sizes.XS,colorState:r?_fuji_icon.ColorStates.FAINT:_fuji_icon.ColorStates.SELECTED,onClick:this.navHandle.bind(this,Direction.NEXT),title:i.formatMessage(strings.next),"aria-label":i.formatMessage(strings.next),className:o.nextNavHandle}))}});exports.default=Carousel,module.exports=exports.default;
},{"./constants/fuji_icon":"./atoms/constants/fuji_icon","./fuji_icon_button.jsx":"./atoms/fuji_icon_button","./styles/carousel":"./atoms/styles/carousel","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/checkbox":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Checkbox(e){var c=e.isChecked;return _react2.default.createElement(_advanced_checkbox2.default,_extends({},e,{type:c?_advanced_checkbox.CheckTypes.ALL:_advanced_checkbox.CheckTypes.NONE}))}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var c=1;c<arguments.length;c++){var t=arguments[c];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};exports.default=Checkbox;var _react=require("react"),_react2=_interopRequireDefault(_react),_advanced_checkbox=require("./advanced_checkbox.jsx"),_advanced_checkbox2=_interopRequireDefault(_advanced_checkbox);module.exports=exports.default;
},{"./advanced_checkbox.jsx":"./atoms/advanced_checkbox","react":"./node_modules/react/react.js"}],68:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_compose_link=require("./styles/compose_link"),_compose_link2=_interopRequireDefault(_compose_link),_reactIntl=require("react-intl"),_mail_constants=require("../platform/mail_constants"),_utils=require("../platform/utils"),_lazy_component=require("./lazy_component"),_fuji_icon=require("./constants/fuji_icon"),strings=(0,_reactIntl.defineMessages)({compose:{id:"compose_button.compose",defaultMessage:"Compose"}}),ComposeLink=_react2.default.createClass({displayName:"ComposeLink",contextTypes:{intl:_reactIntl.intlShape,getCss:_react.PropTypes.func},getDefaultProps:function(){return{showComposeBadge:!1}},renderBadge:function(e){return this.props.showComposeBadge?_react2.default.createElement("div",{className:e.badgeContainer,"data-test-id":"hotspots-badge"},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../molecules/feature_cue/atoms/badge",cueName:"HSComposeBadge",size:_fuji_icon.Sizes.XS,kind:_fuji_icon.Kinds.COMPOSE,_moduleGetter:function(){return require("../molecules/feature_cue/atoms/badge")}})):null},render:function(){var e=this.context.intl.formatMessage,t=e(strings.compose),o=this.context.getCss(_compose_link2.default),r=(0,_utils.generateUID)();return _react2.default.createElement("a",{"data-iskeynav":!0,"data-test-id":"compose-button",href:_mail_constants.YCPI_PATH_PREFIX+"/compose/"+r,className:o.link,onClick:this.props.onClick,onDrop:this.props.handleDrop,onDragOver:this.props.handleDragOver,onDragEnter:this.props.handleDragEnter,role:"button","aria-label":t},this.renderBadge(o),t)}});exports.default=ComposeLink,module.exports=exports.default;
},{"../molecules/feature_cue/atoms/badge":"./molecules/feature_cue/atoms/badge","../platform/mail_constants":"./platform/mail_constants","../platform/utils":"./platform/utils","./constants/fuji_icon":"./atoms/constants/fuji_icon","./lazy_component":"./atoms/lazy_component","./styles/compose_link":88,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/constants/button":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.Kinds=void 0;var _object=require("../../platform/utils/object"),Kinds=exports.Kinds=(0,_object.mirrorKeys)(["PLAIN","PRIMARY","SECONDARY","CHROMELESS","ICON","ICON_HIGHLIGHTED","MENUITEM","MENUITEM_PARENT_TEXT_COLOR","DANGER"]);
},{"../../platform/utils/object":"./platform/utils/object"}],"./atoms/constants/corners":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.Corners=void 0;var _object=require("../../platform/utils/object"),Corners=exports.Corners=(0,_object.mirrorKeys)(["TopLeft","TopCenter","TopRight","CenterLeft","CenterCenter","CenterRight","BottomLeft","BottomCenter","BottomRight"]);
},{"../../platform/utils/object":"./platform/utils/object"}],"./atoms/constants/flex_spacer":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.SupportedTags=void 0;var _utils=require("../../platform/utils"),mirrorKeys=_utils.object.mirrorKeys,SupportedTags=exports.SupportedTags=mirrorKeys(["LI","SPAN"]);
},{"../../platform/utils":"./platform/utils"}],"./atoms/constants/fuji_icon":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.ColorStates=exports.Rotate=exports.Sizes=exports.Kinds=void 0;var _object=require("../../platform/utils/object"),Kinds=exports.Kinds=(0,_object.mirrorKeys)(["ADD","ALIGN_CENTER","ALIGN_LEFT","APP_HIDDEN","ARCHIVE","ARROW_RIGHT_DOC","ARROW_UP","ATTACH","ATTACHMENT","ATTACH_CAL","ATTACH_DOC","ATTACH_DOC_48","ATTACH_GENERIC_48","ATTACH_ICS_48","ATTACH_IMAGE","ATTACH_IMAGE_48","ATTACH_MOVIE_48","ATTACH_PDF_48","ATTACH_PPT_48","ATTACH_SOUND_48","ATTACH_XLS_48","ATTACH_ZIP_48","ATTENTION","BOLD","BUG","CALENDAR","CALENDAR_SETTINGS","CAL_ACCEPT","CAL_DECLINE","CAL_MAYBE","CHECKBOX_OFF","CHECKBOX_ON","CHECKMARK","CHEVRON_UP","CIRCLE","CLEAR","CLOCK","CLOSE","CLOSE_MINI","COLLAPSE_LIST","COMPOSE","COMPOSE_EMOJI","CONTACTS","CONTACT_CARD","CONTRACT","DELETE","DEVICE_DESKTOP","DOCUMENTS_S","DOWNLOAD","DRAFTS","ENTER","EXCLAMATION_ALT","EXPAND","EXPAND_LIST","FACEBOOK","FEEDBACK","FLICKR","FOLDER","FORWARD","GIF_BOX","HEART","HOME","INBOX","INDENT","INPUT_ARROW_DOWN","ITALIC","LINK","LINKEDIN","LIST_ORDERED","LIST_UNORDERED","LOCK","MESSENGER","MINUS","MIXED_CHECKBOX","MORE","MOVE_TO_FOLDER","NOTEPAD","NO_INTERNET","ORB","OUTDENT","POP_OUT","PRINTER","REFRESH","REPLY","REPLY_ALL","RESTORE_TO_INBOX","RICHTEXT_OFF","RICHTEXT_ON","SEARCH","SEARCH_MAIL","SEARCH_MINI","SEARCH_WEB","SELECTED","SENT","SETTINGS","SHARE","SPAM","SPONSORED","STAR","STATIONERY","TAB_IMAGES","TEXT","TEXT_COLOR","TUMBLR","TWITTER","UNLOCK","YBADGE"]),Sizes=exports.Sizes=(0,_object.mirrorKeys)(["XXXS","XXS","XS","S","M","L","XL"]),Rotate=exports.Rotate=(0,_object.mirrorKeys)(["D0","D90","D180","D270"]),ColorStates=exports.ColorStates=(0,_object.mirrorKeys)(["NORMAL","NORMAL_LESS_DIM","IMPROVED_GRAY_DARK","SECOND_LEVEL_GRAY","DARK","INHERITED","INVERTED","INVERTED_DIM","INVERTED_LESS_DIM","SELECTED","SELECTED_DARK_THEME_MODE","STARRING","STARRED","STARRED_DARK","SMARTVIEW_DARK","DISABLED","LESS_IMPORTANT","FAINT","TRANSPARENT","HEADING","GRAD_RED","GRAD_BLUE","COOL_FAINT","WARNING","WARNING_GRAD_RED","SUCCESS","ATTACH_GENERIC","ATTACH_MEDIA","ATTACH_CAL","ATTACH_EXCEL","ATTACH_DOC","ATTACH_SLIDE","ATTACH_PDF","ATTACH_COMPRESSED","YBADGE"]);
},{"../../platform/utils/object":"./platform/utils/object"}],"./atoms/constants/key_codes":[function(require,module,exports){
"use strict";exports.__esModule=!0;var KEYCODE=exports.KEYCODE={SEMICOLON:59,FF_SEMICOLON:186,FF_COMMA:188,COMMA:44,BREAK:13,LEFT:37,RIGHT:39,SPACE:32,TAB:9,PERIOD:190,BACKSPACE:8,DELETE:46};
},{}],"./atoms/constants/list":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.Layout=void 0;var _object=require("../../platform/utils/object"),Layout=exports.Layout=(0,_object.mirrorKeys)(["HORIZONTAL","VERTICAL","GRID"]);
},{"../../platform/utils/object":"./platform/utils/object"}],"./atoms/constants/list_item":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.Kinds=void 0;var _object=require("../../platform/utils/object"),Kinds=exports.Kinds=(0,_object.mirrorKeys)(["DEFAULT","GRID","WRAP_CONTENT"]);
},{"../../platform/utils/object":"./platform/utils/object"}],"./atoms/constants/modal":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.Kinds=void 0;var _object=require("../../platform/utils/object"),Kinds=exports.Kinds=(0,_object.mirrorKeys)(["LIGHT","DARK"]);
},{"../../platform/utils/object":"./platform/utils/object"}],"./atoms/constants/navigable_list":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.Kinds=void 0;var _utils=require("../../platform/utils"),mirrorKeys=_utils.object.mirrorKeys,Kinds=exports.Kinds=mirrorKeys(["DEFAULT","MENU","TOOLBAR"]);
},{"../../platform/utils":"./platform/utils"}],"./atoms/constants/popover":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.Align=exports.ErrorStrings=exports.BackgroundKinds=exports.Orientations=exports.PermittedArrowDirections=exports.Triggers=exports.ArrowSizes=exports.ArrowWidths=void 0;var _object=require("../../platform/utils/object"),ArrowWidths=exports.ArrowWidths={S:6,M:12,L:24},ArrowSizes=exports.ArrowSizes=(0,_object.mirrorKeys)(ArrowWidths),Triggers=exports.Triggers=(0,_object.mirrorKeys)(["MOUNT","HOVER","CLICK","RIGHTCLICK"]),PermittedArrowDirections=exports.PermittedArrowDirections=(0,_object.mirrorKeys)(["UP","DOWN","LEFT","RIGHT","ANY"]),Orientations=exports.Orientations=(0,_object.mirrorKeys)(["HORIZONTAL","VERTICAL"]),BackgroundKinds=exports.BackgroundKinds=(0,_object.mirrorKeys)(["DEFAULT","DARK","GRADIENT","LIGHTGRAY"]),ErrorStrings=exports.ErrorStrings={NOT_ENOUGH_CHILDREN:"PopoverContainer should have at least one child, recommended two children",FIRST_CHILD_SHOULD_BE_POPOVER_ANCHOR:"PopoverContainer first child should be a PopoverAnchor",SUBSEQUENT_SHOULD_BE_POPOVER_CONTENT:"After PopoverAnchor subsequent children should be of type PopoverContent"},Align=exports.Align=(0,_object.mirrorKeys)(["CENTER","START","END"]);
},{"../../platform/utils/object":"./platform/utils/object"}],"./atoms/constants/svg_image":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.SELECTED_MESSAGES_SIZE=exports.Kinds=void 0;var _object=require("../../platform/utils/object"),Kinds=exports.Kinds=(0,_object.mirrorKeys)(["EMPTY_FOLDER","SELECTED_MESSAGES","ATTACHMENT_PREVIEW_ERROR","PLAY_VIDEO","GEAR_ICON","DOCUMENTS_ICON"]),SELECTED_MESSAGES_SIZE=exports.SELECTED_MESSAGES_SIZE=138;
},{"../../platform/utils/object":"./platform/utils/object"}],69:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _reactIntl=require("react-intl"),_react=require("react"),_react2=_interopRequireDefault(_react),_types=require("../types"),_xavatar=require("./xavatar.jsx"),_xavatar2=_interopRequireDefault(_xavatar),_fuji_icon=require("./fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("./constants/fuji_icon"),_themes=require("../platform/theming/themes"),_contactcard=require("./styles/contactcard"),_contactcard2=_interopRequireDefault(_contactcard),strings=(0,_reactIntl.defineMessages)({work:{id:"contact_card.work",defaultMessage:"Work"},home:{id:"contact_card.home",defaultMessage:"Home"},mobile:{id:"contact_card.mobile",defaultMessage:"Mobile"},fax:{id:"contact_card.fax",defaultMessage:"Fax"},pager:{id:"contact_card.pager",defaultMessage:"Pager"},phone:{id:"contact_card.phone",defaultMessage:"Phone"},email:{id:"contact_card.email",defaultMessage:"Email"}}),ContactCard=_react2.default.createClass({displayName:"ContactCard",contextTypes:{intl:_reactIntl.intlShape,getCss:_react.PropTypes.func,getThemeMode:_react.PropTypes.func},getDefaultProps:function(){return{isInRightRail:!1}},handleClick:function(e){e.stopPropagation()},render:function(){var e=this.props,t=e.email,a=e.isInRightRail,r=e.contact,c=void 0===r?{}:r,i=a&&this.context.getThemeMode()===_themes.ThemeModes.DARK,n=this.context.getCss(_contactcard2.default,{isInRightRail:a,isDark:i}),s=this.props.name,l=c.backyard&&"https://backyard.yahoo.com/profile/index.php?userid="+c.backyard,o=c?[{href:l,iconType:_fuji_icon3.Kinds.HOME},{href:c.flickr,iconType:_fuji_icon3.Kinds.FLICKR},{href:c.facebook,iconType:_fuji_icon3.Kinds.FACEBOOK},{href:c.linkedin,iconType:_fuji_icon3.Kinds.LINKEDIN},{href:c.twitter,iconType:_fuji_icon3.Kinds.TWITTER}].filter(function(e){var t=e.href;return t}):[],d=this.context.intl.formatMessage,u=d(strings.phone),_=d(strings.email),f=c.emailsWithType||[{address:t}],m=c.phonesWithType||[],p=function(e){return e=e&&e.split(",")[0],e=e&&strings[e],e=e&&d(e)};return s=s||c&&c.name,_react2.default.createElement("div",{"data-test-id":"contactCard",className:n.container,onClick:this.handleClick},_react2.default.createElement("div",{className:n.avatarAndLabel},_react2.default.createElement(_xavatar2.default,{contact:{email:t},size:_xavatar.Sizes.L}),_react2.default.createElement("div",{className:n.avatarLabel},s&&_react2.default.createElement("div",{"data-test-id":"contactCard-name",className:n.name},_react2.default.createElement("strong",null,s)),c&&c.position&&_react2.default.createElement("div",{"data-test-id":"contactCard-position",className:n.position},c.position))),f.length>0&&_react2.default.createElement("div",{className:n.emails},f.slice(0,2).map(function(e){return _react2.default.createElement("div",{key:e.address,className:n.email},_react2.default.createElement("div",{className:n.phoneLabel},p(e.type)||_),_react2.default.createElement("div",{"data-test-id":"contactCard-email",className:n.emailAddress},e.address))})),m.length>0&&_react2.default.createElement("div",{className:n.phones},m.slice(0,2).map(function(e){return _react2.default.createElement("div",{key:e.number,className:n.phone},_react2.default.createElement("div",{className:n.phoneLabel},p(e.type)||u),_react2.default.createElement("div",{"data-test-id":"contactCard-phone",className:n.phoneNumber},e.number))})),c&&o.length>0&&_react2.default.createElement("div",{className:n.social},o.map(function(e){var t=e.href,a=e.iconType;return _react2.default.createElement("a",{"data-test-id":"contactCard-social",key:a,className:n.socialIcon,href:t,target:"_blank"},_react2.default.createElement(_fuji_icon2.default,{kind:a,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.INHERITED}))})))}});exports.default=ContactCard,module.exports=exports.default;
},{"../platform/theming/themes":"./platform/theming/themes","../types":"./types","./constants/fuji_icon":"./atoms/constants/fuji_icon","./fuji_icon.jsx":"./atoms/fuji_icon","./styles/contactcard":89,"./xavatar.jsx":"./atoms/xavatar","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/dialog/alert":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_button=require("../button.jsx"),_button2=_interopRequireDefault(_button),_modal=require("../modal.jsx"),_modal2=_interopRequireDefault(_modal),_alert_dialog=require("../styles/alert_dialog"),_alert_dialog2=_interopRequireDefault(_alert_dialog),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),_fuji_icon=require("../fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon_button=require("../fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_reactIntl=require("react-intl"),_fuji_icon3=require("../constants/fuji_icon"),classNames=(0,_css2.default)(_alert_dialog2.default),buttonStyles={margin:"14px "+_mail_ui_vars.GRID_UNIT+"px "+5*_mail_ui_vars.GRID_UNIT+"px 0",border:0,padding:"0 "+7*_mail_ui_vars.GRID_UNIT+"px"},strings=(0,_reactIntl.defineMessages)({close:{id:"confirm.close",defaultMessage:"Close"},defaultAcceptText:{id:"alert.ok",defaultMessage:"OK"}}),NOOP=function(){},Alert=_react2.default.createClass({displayName:"Alert",contextTypes:{intl:_reactIntl.intlShape.isRequired},getInitialState:function(){return{shown:!0}},getDefaultProps:function(){return{acceptText:strings.defaultAcceptText}},handleKeyDown:function(e){"Enter"!==e.key&&"Escape"!==e.key||(e.preventDefault(),e.stopPropagation(),this.props.onAccept())},render:function(){var e=this.context.intl.formatMessage,t=e(this.props.acceptText),a=void 0;return a=this.props.hideClose?null:_react2.default.createElement("div",{className:classNames.close},_react2.default.createElement(_fuji_icon_button2.default,{onClick:this.props.onAccept,kind:_fuji_icon3.Kinds.CLOSE,size:_fuji_icon3.Sizes.XS,title:e(strings.close),"aria-label":e(strings.close),"data-test-id":"alert-button-close"})),_react2.default.createElement(_modal2.default,{onKeyDown:this.handleKeyDown,onClose:NOOP},_react2.default.createElement("div",{className:classNames.container,"data-test-id":"alert-dialog",role:"alertdialog"},_react2.default.createElement("div",{className:classNames.icon},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.EXCLAMATION_ALT,size:_fuji_icon3.Sizes.M,colorState:_fuji_icon3.ColorStates.WARNING_GRAD_RED})),_react2.default.createElement("header",{className:classNames.header},_react2.default.createElement("h3",{className:classNames.title,"data-test-id":"alert-title"},this.props.title),a),_react2.default.createElement("section",{className:classNames.message,"data-test-id":"alert-message"},this.props.message),_react2.default.createElement("footer",{className:classNames.controls},_react2.default.createElement(_button2.default,{onClick:this.props.onAccept,style:buttonStyles,"data-test-id":"alert-button-ok"},t))))}});exports.default=Alert,module.exports=exports.default;
},{"../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../button.jsx":"./atoms/button","../constants/fuji_icon":"./atoms/constants/fuji_icon","../fuji_icon.jsx":"./atoms/fuji_icon","../fuji_icon_button.jsx":"./atoms/fuji_icon_button","../modal.jsx":"./atoms/modal","../styles/alert_dialog":"./atoms/styles/alert_dialog","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/dialog/confirm":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_dual_action=require("./dual_action.jsx"),_dual_action2=_interopRequireDefault(_dual_action),strings=(0,_reactIntl.defineMessages)({close:{id:"confirm.close",defaultMessage:"Close"},defaultAcceptLabel:{id:"confirm.accept",defaultMessage:"OK"},defaultCancelLabel:{id:"confirm.cancel",defaultMessage:"Cancel"}}),Confirm=_react2.default.createClass({displayName:"Confirm",contextTypes:{intl:_reactIntl.intlShape.isRequired},getDefaultProps:function(){return{acceptLabel:strings.defaultAcceptLabel,cancelLabel:strings.defaultCancelLabel,showCustomTitle:!1,hideIcon:!1}},render:function(){var e=this.props,t=e.title,a=e.onConfirm,l=e.onAbort,r=e.hideIcon,n=e.customTitle,c=e.showCustomTitle,o=e.acceptLabel,i=e.cancelLabel,s=e.message;return _react2.default.createElement(_dual_action2.default,{primaryButtonLabel:o,secondaryButtonLabel:i,hideIcon:r,title:t,customTitle:n,showCustomTitle:c,message:s,onPrimaryButtonClick:a,onSecondaryButtonClick:l,onClose:l},this.props.children)}});exports.default=Confirm,module.exports=exports.default;
},{"./dual_action.jsx":"./atoms/dialog/dual_action","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/dialog/dual_action":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_button=require("../button.jsx"),_button2=_interopRequireDefault(_button),_modal=require("../modal.jsx"),_modal2=_interopRequireDefault(_modal),_fuji_icon=require("../fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon_button=require("../fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_button3=require("../constants/button"),_fuji_icon3=require("../constants/fuji_icon"),_dual_action=require("../styles/dual_action"),_dual_action2=_interopRequireDefault(_dual_action),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),_reactIntl=require("react-intl"),strings=(0,_reactIntl.defineMessages)({close:{id:"dualActionDialog.close",defaultMessage:"Close"}}),buttonStyles={margin:4*_mail_ui_vars.GRID_UNIT+"px "+_mail_ui_vars.GRID_UNIT+"px "+5*_mail_ui_vars.GRID_UNIT+"px 0"},DualActionDialog=_react2.default.createClass({displayName:"DualActionDialog",contextTypes:{intl:_reactIntl.intlShape.isRequired},getDefaultProps:function(){return{primaryButtonLabel:strings.defaultprimaryButtonLabel,secondaryActionLabel:strings.defaultsecondaryActionLabel,hideIcon:!1}},handleKeyDown:function(e){return e.stopPropagation(),"Enter"===e.key?(e.preventDefault(),e.stopPropagation(),void this.props.onPrimaryButtonClick(e)):"Escape"===e.key?(e.preventDefault(),e.stopPropagation(),void this.props.onClose(e)):void 0},render:function(){var e=this.context.intl.formatMessage,t=this.props,a=t.title,i=t.onPrimaryButtonClick,o=t.onSecondaryButtonClick,n=t.onClose,r=t.hideIcon,l=t.showCustomTitle,s=t.customTitle,u=this.props.message,c=e(this.props.primaryButtonLabel),_=e(this.props.secondaryButtonLabel),d=(0,_css2.default)(_dual_action2.default,{hideIcon:r});return u||(u=this.props.children),_react2.default.createElement(_modal2.default,{onClose:this.props.onClose,onKeyDown:this.handleKeyDown},_react2.default.createElement("div",{className:d.container,"data-test-id":"dual-action-dialog"},r?null:_react2.default.createElement("div",{className:d.icon},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.EXCLAMATION_ALT,size:_fuji_icon3.Sizes.M,colorState:_fuji_icon3.ColorStates.WARNING_GRAD_RED})),_react2.default.createElement("div",{className:d.header},l?s:_react2.default.createElement("div",{className:d.title,"data-test-id":"title"},a),_react2.default.createElement("div",{className:d.close},_react2.default.createElement(_fuji_icon_button2.default,{onClick:n,kind:_fuji_icon3.Kinds.CLOSE,size:_fuji_icon3.Sizes.XS,title:e(strings.close),"aria-label":e(strings.close),"data-test-id":"close-btn"}))),_react2.default.createElement("div",{className:d.message,"data-test-id":"message"},u),_react2.default.createElement("div",{className:d.controls},_react2.default.createElement(_button2.default,{onClick:i,style:buttonStyles,"data-test-id":"primary-btn"},c),_react2.default.createElement(_button2.default,{onClick:o,kind:_button3.Kinds.SECONDARY,style:buttonStyles,"data-test-id":"secondary-btn"},_))))}});exports.default=DualActionDialog,module.exports=exports.default;
},{"../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../button.jsx":"./atoms/button","../constants/button":"./atoms/constants/button","../constants/fuji_icon":"./atoms/constants/fuji_icon","../fuji_icon.jsx":"./atoms/fuji_icon","../fuji_icon_button.jsx":"./atoms/fuji_icon_button","../modal.jsx":"./atoms/modal","../styles/dual_action":"./atoms/styles/dual_action","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],70:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_button=require("../button.jsx"),_button2=_interopRequireDefault(_button),_progress_bar=require("../progress_bar.jsx"),_progress_bar2=_interopRequireDefault(_progress_bar),_progress_dialog=require("../styles/progress_dialog"),_progress_dialog2=_interopRequireDefault(_progress_dialog),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_reactIntl=require("react-intl"),classNames=(0,_css2.default)(_progress_dialog2.default),noop=function(){},ProgressDialog=_react2.default.createClass({displayName:"ProgressDialog",getDefaultProps:function(){return{isCancelable:!1,onClose:noop}},render:function(){var e=this.props,a=e.message,s=e.subtitle,r=e.progress,t=e.onCancel,l=e.isCancelable;return _react2.default.createElement("div",{className:classNames.container,"data-test-id":"progress-dialog"},_react2.default.createElement("div",{className:classNames.messageContainer},_react2.default.createElement("span",{className:classNames.message,"data-test-id":"progress-dialog-message"},a),l&&_react2.default.createElement(_button2.default,{onClick:t,className:classNames.cancel,"data-test-id":"progress-dialog-cancel"},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"confirm.cancel",defaultMessage:"Cancel"}))),_react2.default.createElement("div",{className:classNames.subtitle},s),_react2.default.createElement("div",{className:classNames.bar},_react2.default.createElement(_progress_bar2.default,{value:r})))}});exports.default=ProgressDialog,module.exports=exports.default;
},{"../button.jsx":"./atoms/button","../progress_bar.jsx":80,"../styles/progress_dialog":92,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/drag_image":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_drag_image=require("./styles/drag_image"),_drag_image2=_interopRequireDefault(_drag_image),_hover_colored_fuji_icon_button=require("./hover_colored_fuji_icon_button.jsx"),_hover_colored_fuji_icon_button2=_interopRequireDefault(_hover_colored_fuji_icon_button),_fuji_icon=require("./constants/fuji_icon"),classNames=(0,_css2.default)(_drag_image2.default),DragImage=_react2.default.createClass({displayName:"DragImage",render:function(){var e={left:this.props.x,top:this.props.y};return _react2.default.createElement("div",{id:"drag-icon-div","data-test-id":"drag-image",className:classNames.dragIcon,style:e},_react2.default.createElement(_hover_colored_fuji_icon_button2.default,{title:"drag-icon",kind:this.props.iconKind,size:_fuji_icon.Sizes.XS,colorStates:{normal:_fuji_icon.ColorStates.SELECTED,hovered:_fuji_icon.ColorStates.SELECTED}}),_react2.default.createElement("div",{className:classNames.counter},this.props.count))}});exports.default=DragImage,module.exports=exports.default;
},{"./constants/fuji_icon":"./atoms/constants/fuji_icon","./hover_colored_fuji_icon_button.jsx":"./atoms/hover_colored_fuji_icon_button","./styles/drag_image":"./atoms/styles/drag_image","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./atoms/flex_spacer":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _react=require("react"),_react2=_interopRequireDefault(_react),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_flex_spacer=require("./styles/flex_spacer"),_flex_spacer2=_interopRequireDefault(_flex_spacer),_flex_spacer3=require("./constants/flex_spacer"),_object=require("../platform/utils/object"),classNames=(0,_css2.default)(_flex_spacer2.default),Spacer=_react2.default.createClass({displayName:"Spacer",getDefaultProps:function(){return{kind:_flex_spacer3.SupportedTags.SPAN}},shouldComponentUpdate:function(){return!1},render:function(){var e=this.props.tagName===_flex_spacer3.SupportedTags.LI?"li":"span";return _react2.default.createElement(e,{className:classNames.flexSpacer})}});module.exports=Spacer;
},{"../platform/utils/object":"./platform/utils/object","./constants/flex_spacer":"./atoms/constants/flex_spacer","./styles/flex_spacer":"./atoms/styles/flex_spacer","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./atoms/folder_label":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_mail_constants=require("../platform/mail_constants"),_object=require("../platform/utils/object"),strings=(0,_reactIntl.defineMessages)({folder_inbox:{id:"folder_inbox",defaultMessage:"Inbox"},folder_draft:{id:"folder_draft",defaultMessage:"Drafts"},folder_sent:{id:"folder_sent",defaultMessage:"Sent"},folder_trash:{id:"folder_trash",defaultMessage:"Trash"},folder_bulk:{id:"folder_bulk",defaultMessage:"Spam"},folder_archive:{id:"folder_archive",defaultMessage:"Archive"},folder_all_mail:{id:"folder_all_mail",defaultMessage:"All Mail"}}),FolderLabel=_react2.default.createClass({displayName:"FolderLabel",contextTypes:{intl:_reactIntl.intlShape.isRequired},getDefaultProps:function(){return{prefix:""}},render:function(){var e=this.props,r=e.folderDisplayType,t=void 0===r?"":r,a=e.name,l=e.prefix,s=strings["folder_"+t.toLowerCase()],d=s?this.context.intl.formatMessage(s):a;return _react2.default.createElement("span",null,l+d)}});exports.default=FolderLabel,module.exports=exports.default;
},{"../platform/mail_constants":"./platform/mail_constants","../platform/utils/object":"./platform/utils/object","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],71:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_popover_container=require("./popover/popover_container.jsx"),_popover_container2=_interopRequireDefault(_popover_container),_popover_anchor=require("./popover/popover_anchor.jsx"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_popover_content=require("./popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_keyboard_navigation_focus_group=require("./keyboard_navigation_focus_group.jsx"),_mail_ui_vars=require("../platform/utils/mail_ui_vars"),_popover=require("./constants/popover"),_list_item=require("./list_item.jsx"),_list_item2=_interopRequireDefault(_list_item),_button=require("./button.jsx"),_button2=_interopRequireDefault(_button),_folder_label=require("./folder_label.jsx"),_folder_label2=_interopRequireDefault(_folder_label),_button3=require("./constants/button.js"),_mail_constants=require("../platform/mail_constants"),_object=require("../platform/utils/object"),_folder=require("../platform/utils/folder"),_types=require("../types"),_themes=require("../platform/theming/themes"),_fuji_icon_button=require("../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_folder_menu=require("./styles/folder_menu"),_folder_menu2=_interopRequireDefault(_folder_menu),_fuji_icon=require("./constants/fuji_icon"),_fuji_icon2=require("./fuji_icon.jsx"),_fuji_icon3=_interopRequireDefault(_fuji_icon2),_bidi_input=require("./bidi_input.jsx"),_bidi_input2=_interopRequireDefault(_bidi_input),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),classNames=(0,_css2.default)(_folder_menu2.default),strings=(0,_reactIntl.defineMessages)({multikey_shortcut:{id:"multikey_shortcut",defaultMessage:"{primaryShortcutKey} then {secondaryShortcutKey}"},all_mail_title:{id:"folder_menu.all_mail_title",defaultMessage:"All mail"},search_placeholder:{id:"folder_menu.search",defaultMessage:"Find a folder"},no_result_label:{id:"folder_menu.empty_search_result",defaultMessage:"No folders found"}}),FolderMenu=_react2.default.createClass({displayName:"FolderMenu",contextTypes:{intl:_reactIntl.intlShape.isRequired,getThemeMode:_react.PropTypes.func},getDefaultProps:function(){return{disabledFolderIds:[],excludedFolderTypes:[],excludeAllMailItem:!0,fujiIconKind:_fuji_icon.Kinds.MOVE_TO_FOLDER,zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH,onMenuShow:function(){},onMenuHide:function(){},isFilterFocused:!1}},getInitialState:function(){return{filterString:"",isFilterActive:!1}},_getListStyle:function(e){return{paddingLeft:2*_mail_ui_vars.GRID_UNIT*(e+2)+"px",marginRight:4*_mail_ui_vars.GRID_UNIT+"px",width:60*_mail_ui_vars.GRID_UNIT+"px"}},_handleMenuHide:function(){var e=this;this.setState({filterString:""},function(){e.props.onMenuHide()})},_handleMenuShow:function(){var e=this;setTimeout(function(){return e.props.isFilterFocused?e._focusFirstMenuItem():e._focusContainer()},0),this.props.onMenuShow()},getFoldersForRendering:function(){var e=this.props.folders,t=e.customFolders,r=e.systemFolders;return{customFolders:this.orderFoldersForRendering((0,_folder.getCustomFoldersForDisplay)(t),0,!1,!0),systemFolders:this.orderFoldersForRendering(r,0,!0,!0)}},_focusFirstMenuItem:function(){if(!this.listContainer)return!1;var e=this.listContainer.querySelector("[data-iskeynav]");return e&&e.focus()},_focusContainer:function(){return this.listContainer&&this.listContainer.focus()},orderFoldersForRendering:function(e,t,r,a){var n=this,i=this.props,s=i.disabledFolderIds,o=i.excludedFolderTypes,l=this.state.filterString,u=[];if(e.forEach(function(e){var r=e.folder.id,a=(0,_folder.getPrimaryFolderType)(e.folder),i=e.folder.name;if(o.indexOf(a)===-1){var c=e.children,d=s.indexOf(r)!==-1,_={folder:e.folder,level:t,disabled:d};(0,_folder.getPrimaryFolderType)(_.folder)===_mail_constants.FolderTypes.INBOX&&(_.shortcut=0),i.toLowerCase().indexOf(l.toLowerCase())!==-1&&u.push(_),c.length&&(u=u.concat(n.orderFoldersForRendering(c,t+1,!1,!1)))}}),a&&!r)for(var c=0,d=0;c<9&&u[d];d++)(0,_folder.getPrimaryFolderType)(u[d].folder)!==_mail_constants.FolderTypes.INBOX&&(u[d].shortcut=++c);return u},getShortcutsMap:function(e,t){var r=[];return t.forEach(function(e){e.shortcut>=0&&!e.disabled&&(r[e.shortcut]=e.folder.id)}),e.forEach(function(e){e.shortcut>=0&&!e.disabled&&(r[e.shortcut]=e.folder.id)}),r},handleClick:function(e,t){this.props.onClick(e,t),this._handleMenuHide()},handleKeyDown:function(e,t){if(t.target===this.listContainer){if(t.key===_mail_constants.Keys.ARROW_DOWN)return this._focusFirstMenuItem();var r=t.keyCode-48,a=t.keyCode-96,n=e[r]||e[a];n&&this.handleClick(n,t)}},renderMenuItems:function(e){var t=this,r=[],a=this.props,n=a.hasShortcuts,i=a.primaryShortcutKey,s=a.archiveShortcutKey;return e.forEach(function(e){var a=e.folder,o=e.level,l=e.disabled,u=e.shortcut,c=a.id,d=a.name,_=(0,_folder.getPrimaryFolderType)(e.folder),f=void 0;n&&(u>=0?f=_react2.default.createElement(_reactIntl.FormattedMessage,_extends({},strings.multikey_shortcut,{values:{primaryShortcutKey:i,secondaryShortcutKey:""+u}})):_===_mail_constants.FolderTypes.ARCHIVE&&(f=s)),r.push(_react2.default.createElement(_list_item2.default,{key:c,"data-test-id":"item-move-to-folder-id-"+c},_react2.default.createElement(_button2.default,{kind:_button3.Kinds.MENUITEM,onClick:t.handleClick.bind(t,c),style:t._getListStyle(o),disabled:l,title:d,"data-iskeynav":!0},_react2.default.createElement("span",{className:classNames.fullLabel},_react2.default.createElement("span",{className:classNames.itemLabel},_react2.default.createElement(_folder_label2.default,{folderDisplayType:(0,_folder.getFolderDisplayType)(e.folder),name:d})),f?_react2.default.createElement("span",{className:classNames.shortcut},f):null))))}),r},renderSearchInput:function(){var e=this,t=this.props.hasShortcuts,r=t?"Shift+D":null,a=this.state,n=a.filterString,i=a.isFilterActive,s=this.context.intl.formatMessage;return _react2.default.createElement(_list_item2.default,{key:"folder-search","data-test-id":"item-move-to-folder-id-search"},_react2.default.createElement("div",{className:classNames.inputContainer,style:this._getListStyle(0),onClick:function(e){return e.stopPropagation()}},_react2.default.createElement(_fuji_icon3.default,{kind:_fuji_icon.Kinds.SEARCH_MINI,size:_fuji_icon.Sizes.XS,colorState:_fuji_icon.ColorStates.DISABLED}),_react2.default.createElement(_bidi_input2.default,{ref:function(t){return e.input=t},className:classNames.inputField,type:"text",id:"folder-menu-search-input","data-test-id":"folder-menu-search-input",value:n,onClear:function(){return e.setState({filterString:""})},onChange:function(t){return e.setState({filterString:t.target.value})},onFocus:function(){return e.setState({isFilterActive:!0})},onBlur:function(){return e.setState({isFilterActive:!1})},isClearable:!0,placeholder:s(strings.search_placeholder),"data-iskeynav":!0}),r&&!i&&""===n?_react2.default.createElement("span",{className:classNames.shortcut},r):null))},renderEmptyResult:function(){var e=this.context.intl.formatMessage;return _react2.default.createElement(_list_item2.default,null,_react2.default.createElement("div",{className:classNames.noResultContainer,style:this._getListStyle(0)},e(strings.no_result_label)))},renderAllMailItem:function(){var e=this.context.intl.formatMessage,t=e(strings.all_mail_title);return _react2.default.createElement(_list_item2.default,{key:_mail_constants.AllMailItemField.ALL_MAIL,"data-test-id":"all-mail"},_react2.default.createElement(_button2.default,{kind:_button3.Kinds.MENUITEM,onClick:this.handleClick.bind(this,""),style:this._getListStyle(0)},_react2.default.createElement("span",{className:classNames.fullLabel},_react2.default.createElement("span",{className:classNames.itemLabel},_react2.default.createElement(_folder_label2.default,{name:t})))))},renderPopoverContent:function(e){var t,r=this,a=this.props,n=a.zAltitude,i=a.hasShortcuts,s=a.excludeAllMailItem,o=this.getFoldersForRendering(),l=o.customFolders,u=o.systemFolders,c=this.getShortcutsMap(l,u),d=l.length+u.length;return _react2.default.createElement(_popover_content2.default,{triggerOn:e,permittedArrowDirections:[_popover.PermittedArrowDirections.UP],zAltitude:n,onHide:this._handleMenuHide,onShow:this._handleMenuShow},_react2.default.createElement("div",{"data-test-id":"folder-menu",className:classNames.popoverContent,onKeyDown:i?this.handleKeyDown.bind(this,c):function(){},tabIndex:_mail_ui_vars.TabIndices.FOLDER_SELECTION_MENU,role:"menu",ref:function(e){return r.listContainer=e}},_react2.default.createElement(_keyboard_navigation_focus_group.KeyboardNavigationFocusGroup,{groupTabIndex:_mail_ui_vars.TabIndices.FOLDER_SELECTION_MENU,skipKeydownOnFormElement:!1},_react2.default.createElement("ul",{className:classNames.systemGroup},this.renderSearchInput()),0===d&&_react2.default.createElement("ul",{className:classNames.lastGroup},this.renderEmptyResult()),l.length>0&&_react2.default.createElement("ul",{className:(0,_classnames2.default)(classNames.customGroup,(t={},t[classNames.lastGroup]=!(u.length>0),t[classNames.systemGroup]=u.length>0,t))},this.renderMenuItems(l)),u.length>0&&_react2.default.createElement("ul",{className:classNames.lastGroup},!s&&this.renderAllMailItem(),this.renderMenuItems(u)))))},renderAnchorButton:function(){var e=this.props,t=e.label,r=e.title,a=e.disabled,n=e.onMenuToggle,i=this.context.getThemeMode()===_themes.ThemeModes.DARK;return _react2.default.createElement("span",null,_react2.default.createElement(_fuji_icon_button2.default,{"data-test-id":"folder-menu-button","data-iskeynav":!0,title:r,tabIndex:this.props.tabIndex,disabled:a,onClick:n,kind:this.props.fujiIconKind,size:_fuji_icon.Sizes.XS,colorState:_fuji_icon.ColorStates.INHERITED,className:classNames.anchorButton,isOnDarkBackground:i},t))},renderPopoverContainer:function(e){return _react2.default.createElement(_popover_container2.default,{className:classNames.popoverContainer},_react2.default.createElement(_popover_anchor2.default,null,this.renderAnchorButton()),this.renderPopoverContent(e))},render:function(){var e=this.props,t=e.isMenuActive,r=e.onMenuToggle;return r?t?this.renderPopoverContainer(_popover.Triggers.MOUNT):this.renderAnchorButton():this.renderPopoverContainer(_popover.Triggers.CLICK)}});exports.default=FolderMenu,module.exports=exports.default;
},{"../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../platform/mail_constants":"./platform/mail_constants","../platform/theming/themes":"./platform/theming/themes","../platform/utils/folder":"./platform/utils/folder","../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../platform/utils/object":"./platform/utils/object","../types":"./types","./bidi_input.jsx":"./atoms/bidi_input","./button.jsx":"./atoms/button","./constants/button.js":"./atoms/constants/button","./constants/fuji_icon":"./atoms/constants/fuji_icon","./constants/popover":"./atoms/constants/popover","./folder_label.jsx":"./atoms/folder_label","./fuji_icon.jsx":"./atoms/fuji_icon","./keyboard_navigation_focus_group.jsx":"./atoms/keyboard_navigation_focus_group","./list_item.jsx":"./atoms/list_item","./popover/popover_anchor.jsx":"./atoms/popover/popover_anchor","./popover/popover_container.jsx":"./atoms/popover/popover_container","./popover/popover_content.jsx":"./atoms/popover/popover_content","./styles/folder_menu":90,"classnames":"./node_modules/classnames/index.js","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/fuji_icon":[function(require,module,exports){
"use strict";function _interopRequireWildcard(c){if(c&&c.__esModule)return c;var e={};if(null!=c)for(var t in c)Object.prototype.hasOwnProperty.call(c,t)&&(e[t]=c[t]);return e.default=c,e}function _interopRequireDefault(c){return c&&c.__esModule?c:{default:c}}function _objectWithoutProperties(c,e){var t={};for(var l in c)e.indexOf(l)>=0||Object.prototype.hasOwnProperty.call(c,l)&&(t[l]=c[l]);return t}exports.__esModule=!0,exports._svg=void 0;var _extends=Object.assign||function(c){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(c[l]=t[l])}return c},_react=require("react"),_react2=_interopRequireDefault(_react),_fuji_icon=require("./styles/fuji_icon"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_fuji_icon3=require("./constants/fuji_icon"),Constants=_interopRequireWildcard(_fuji_icon3),_svgSections={ADD:_react2.default.createElement("path",{d:"M13.75 9.25h-3v-3c0-.414-.336-.75-.75-.75s-.75.336-.75.75v3h-3c-.414 0-.75.336-.75.75s.336.75.75.75h3v3c0 .414.336.75.75.75s.75-.336.75-.75v-3h3c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"}),ALIGN_CENTER:_react2.default.createElement("path",{d:"M4 5h12c.6 0 1-.4 1-1s-.4-1-1-1H4c-.6 0-1 .4-1 1s.4 1 1 1zM6 7c-.6 0-1 .4-1 1s.4 1 1 1h8c.6 0 1-.4 1-1s-.4-1-1-1H6zM16 11H4c-.6 0-1 .4-1 1s.4 1 1 1h12c.6 0 1-.4 1-1s-.4-1-1-1zM14 15H6c-.6 0-1 .4-1 1s.4 1 1 1h8c.6 0 1-.4 1-1s-.4-1-1-1z"}),ALIGN_LEFT:_react2.default.createElement("path",{d:"M4 5h12c.6 0 1-.4 1-1s-.4-1-1-1H4c-.6 0-1 .4-1 1s.4 1 1 1zM4 9h8c.6 0 1-.4 1-1s-.4-1-1-1H4c-.6 0-1 .4-1 1s.4 1 1 1zM16 11H4c-.6 0-1 .4-1 1s.4 1 1 1h12c.6 0 1-.4 1-1s-.4-1-1-1zM12 15H4c-.6 0-1 .4-1 1s.4 1 1 1h8c.6 0 1-.4 1-1s-.4-1-1-1z"}),APP_HIDDEN:_react2.default.createElement("path",{d:"M15.9 6.2c1.2 0 2.1-.9 2.1-2.1 0-1.2-.9-2.1-2.1-2.1-1.2 0-2.1.9-2.1 2.1 0 1.2.9 2.1 2.1 2.1zm-5.9 0c1.2 0 2.1-.9 2.1-2.1 0-1.2-.9-2.1-2.1-2.1-1.2 0-2.1.9-2.1 2.1 0 1.2.9 2.1 2.1 2.1zm-5.9 0c1.2 0 2.1-.9 2.1-2.1C6.2 2.9 5.3 2 4.1 2 2.9 2 2 2.9 2 4.1c0 1.2.9 2.1 2.1 2.1zm11.8 5.9c1.2 0 2.1-.9 2.1-2.1 0-1.2-.9-2.1-2.1-2.1-1.2 0-2.1.9-2.1 2.1 0 1.2.9 2.1 2.1 2.1zm-5.9 0c1.2 0 2.1-.9 2.1-2.1 0-1.2-.9-2.1-2.1-2.1-1.2 0-2.1.9-2.1 2.1 0 1.2.9 2.1 2.1 2.1zm-5.9 0c1.2 0 2.1-.9 2.1-2.1 0-1.2-.9-2.1-2.1-2.1C2.9 7.9 2 8.8 2 10c0 1.2.9 2.1 2.1 2.1zM15.9 18c1.2 0 2.1-.9 2.1-2.1 0-1.2-.9-2.1-2.1-2.1-1.2 0-2.1.9-2.1 2.1 0 1.2.9 2.1 2.1 2.1zM10 18c1.2 0 2.1-.9 2.1-2.1 0-1.2-.9-2.1-2.1-2.1-1.2 0-2.1.9-2.1 2.1 0 1.2.9 2.1 2.1 2.1zm-5.9 0c1.2 0 2.1-.9 2.1-2.1 0-1.2-.9-2.1-2.1-2.1-1.2 0-2.1.9-2.1 2.1 0 1.2.9 2.1 2.1 2.1z"}),ARCHIVE:_react2.default.createElement("path",{d:"M17.25 7H11.767v.75c0 .966-.784 1.75-1.75 1.75s-1.75-.784-1.75-1.75V7H2.75c-.414 0-.75.336-.75.75v8.5c0 .414.336.75.75.75h14.5c.414 0 .75-.336.75-.75v-8.5c0-.414-.336-.75-.75-.75zM3 5h14c.552 0 1-.448 1-1s-.448-1-1-1H3c-.552 0-1 .448-1 1s.448 1 1 1z"}),ARROW_RIGHT_DOC:_react2.default.createElement("path",{d:"M7.252 17.785L14.72 10 7.25 2.214c-.285-.287-.748-.287-1.035 0-.287.285-.287.75 0 1.035l6.34 6.75-6.34 6.75c-.286.285-.286.748 0 1.035.287.287.75.287 1.037 0"}),ARROW_UP:_react2.default.createElement("path",{d:"M14.8 8.5l-5-5-5 5c-.3.3-.3.8 0 1.1s.8.3 1.1 0L9 6.4v9.4c0 .4.3.8.8.8s.8-.3.8-.8V6.4l3.2 3.2c.1.1.3.2.5.2s.4-.1.5-.2c.3-.3.3-.8 0-1.1z"}),ATTACH:_react2.default.createElement("path",{d:"M16.7 16.5c-1.7 1.7-4.4 1.7-6.1 0l-3.9-3.9c-1-1-1.1-2.7 0-3.9 1.1-1.1 2.8-1.1 3.9 0l3.6 3.6c.3.3.3.8 0 1.1s-.8.3-1.1 0L9.6 9.9c-.5-.5-1.2-.5-1.7 0s-.5 1.2 0 1.7l4.1 4.1s1.8 1.5 3.6-.3c1.1-1.1 1.1-2.8 0-3.9L8.4 4.4c-1.1-1.1-2.8-1.1-3.9 0-2.1 2.1.4 4.1.4 4.1.3.3.3.8 0 1.1s-.8.3-1.1 0c0 0-3.8-2.9-.3-6.4 1.7-1.7 4.4-1.7 6.1 0l7.2 7.2c1.6 1.7 1.6 4.5-.1 6.1"}),ATTACHMENT:_react2.default.createElement("path",{d:"M15.6 14.4c-1.3 1.3-3.3 1.3-4.6 0l-2.9-2.9c-.8-.8-.8-2.1 0-2.9.8-.8 2.1-.8 2.9 0l2.7 2.7c.2.2.2.6 0 .8s-.6.2-.8 0l-2.7-2.7c-.3-.3-.9-.3-1.2 0s-.3.9 0 1.2l3.1 3.1s1.4 1.1 2.7-.2c.8-.8.8-2.1 0-2.9L9.3 5.3c-.8-.8-2.1-.8-2.9 0-1.6 1.6.2 3.1.2 3.1.2.2.2.6 0 .8s-.6.2-.8 0c0 0-2.8-2.2-.2-4.8 1.3-1.3 3.3-1.3 4.6 0l5.4 5.4c1.2 1.3 1.2 3.3 0 4.6"}),ATTACH_CAL:_react2.default.createElement("path",{d:"M16.36 4H14V2.5c0-.28-.22-.5-.5-.5s-.5.22-.5.5V4H7V2.5c0-.28-.22-.5-.5-.5s-.5.22-.5.5V4H3.64c-.35 0-.64.28-.64.64v10.73c0 .35.29.63.64.63h12.73c.35 0 .63-.28.63-.64V4.64c-.01-.36-.28-.64-.64-.64zM16 15H4v-5h12v5zm0-6H4V5h2v1.5c0 .28.22.5.5.5s.5-.22.5-.5V5h6v1.5c0 .28.22.5.5.5s.5-.22.5-.5V5h2v4z"}),ATTACH_DOC:_react2.default.createElement("path",{d:"M4.5 17V3h7v3.45c0 .3.25.55.55.55h3.45v10h-11zM16.34 6.19s-3.26-3.22-3.88-3.84c-.16-.14-.32-.33-.6-.35H4.23c-.4 0-.73.33-.73.73v14.55c0 .4.33.73.73.73h11.55c.4 0 .72-.33.72-.73V6.62c-.01-.2-.08-.34-.16-.43z"}),ATTACH_DOC_48:_react2.default.createElement("path",{d:"M17.106 4.448L13.05.445C12.86.258 12.66.03 12.297 0H3.644c-.503 0-.91.408-.91.91v18.22c0 .502.41.912.91.912h12.754c.5 0 .91-.41.91-.91V4.98c0-.247-.094-.424-.202-.534zm-.708 14.683H3.644V.91h8.2v3.873c0 .376.306.683.682.683h3.872V19.13zM11.834 7.302l-5.48.99v7.514l5.48.99v-1.31h2.26c.277 0 .5-.178.5-.455s-.223-.454-.5-.454h-2.26v-.91h2.26c.277 0 .5-.18.5-.457s-.223-.456-.5-.456h-2.26v-.91h2.26c.277 0 .5-.18.5-.457s-.223-.455-.5-.455h-2.26v-.91h2.26c.277 0 .5-.18.5-.457s-.223-.455-.5-.455h-2.26V7.302zm-1.672 6.36c-.194.1-.485-.003-.715.012-.154-.745-.334-1.485-.473-2.234-.136.727-.312 1.448-.468 2.17-.223-.01-.447-.025-.672-.04-.192-.99-.42-1.973-.6-2.966.2-.01.4-.017.598-.024.12.717.256 1.43.36 2.15l.494-2.21c.22-.012.442-.02.662-.032.155.76.313 1.518.48 2.275.132-.782.277-1.56.417-2.34.233-.008.465-.02.696-.034-.26 1.09-.49 2.19-.778 3.273z"}),ATTACH_GENERIC_48:_react2.default.createElement("path",{d:"M17.106 4.448L13.05.445C12.86.258 12.66.03 12.297 0H3.644c-.503 0-.91.408-.91.91v18.22c0 .502.41.912.91.912h12.754c.5 0 .91-.41.91-.91V4.98c0-.247-.094-.424-.202-.534zM3.644 19.13V.91h8.2v3.873c0 .376.306.683.682.683h3.872V19.13H3.644z"}),ATTACH_ICS_48:_react2.default.createElement("path",{d:"M19.09 2.73H15V1.365c0-.228-.227-.455-.455-.455-.227 0-.454.228-.454.456V2.73H5.91V1.365c0-.228-.228-.455-.455-.455C5.227.91 5 1.14 5 1.367V2.73H.91c-.5 0-.91.408-.91.908v14.546c0 .5.41.91.91.91h18.18c.5 0 .91-.41.91-.91V3.638c0-.5-.41-.91-.91-.91zm0 15.454H.91V3.638H5v.91c0 .227.227.454.455.454.227 0 .454-.227.454-.455v-.91h8.18v.91c0 .228.228.455.455.455.228 0 .455-.227.455-.455v-.91h4.09v14.547zM8.218 10.962l-.447-.076L9.48 9.25c.27-.257.396-.41.396-.702 0-.337-.29-.458-.56-.458H5.873c-.237 0-.438.2-.438.44 0 .236.2.437.438.437H8.59l-1.757 1.77c-.223.222-.27.35-.27.477 0 .238.203.44.44.44h.242c1.01 0 1.61.42 1.61 1.124 0 .66-.503 1.106-1.226 1.106-.58 0-1.067-.184-1.532-.58-.116-.097-.218-.138-.347-.138-.276 0-.518.243-.518.52 0 .143.078.28.16.362l.024.02c.59.506 1.308.752 2.194.752 1.385 0 2.315-.838 2.315-2.084 0-.992-.574-1.582-1.707-1.774zM14.036 7.99c-.2 0-.4.044-.686.122l-.995.29c-.217.064-.35.236-.35.45 0 .232.208.437.448.437.048 0 .135-.015.217-.035l.827-.244v5.212c0 .298.242.54.54.54s.54-.242.54-.54V8.53c0-.3-.243-.54-.54-.54z"}),ATTACH_IMAGE:_react2.default.createElement("path",{d:"M16.36 4H3.64c-.35 0-.64.28-.64.64v10.73c0 .34.29.63.64.63h12.73c.35 0 .63-.29.63-.64V4.64c-.01-.36-.28-.64-.64-.64zM16 5v8.5l-4-5-2.95 3.64L7 9.5l-3 3.2V5h12zM6.77 15H4v-.91L7 11l1.44 1.89L6.77 15zM8 15l4-5 4 5H8z"}),ATTACH_IMAGE_48:_react2.default.createElement("path",{d:"M19.09 1.82H.91c-.5 0-.91.4-.91.91v14.55c0 .5.41.91.91.91h18.18c.5 0 .91-.41.91-.91V2.73c0-.51-.4-.91-.91-.91zM.91 17.27v-1.02l4.55-5.54L8.2 14l-2.74 3.28-4.55-.01zm5.68 0L12.73 10l6.36 7.27H6.59zm12.5-1.36l-6.36-7.27-3.94 4.65-3.34-4-4.54 5.53V2.73h18.18v13.18z"}),ATTACH_MOVIE_48:_react2.default.createElement("path",{d:"M7.918 12.67c.06 0 .1-.02.17-.06l4.03-2.345c.125-.072.178-.167.178-.26s-.064-.19-.188-.262L8.062 7.398c-.07-.04-.082-.06-.142-.06-.15 0-.193.117-.193.32V12.35c0 .202.044.32.19.32zM19.09 1.822H.91c-.503 0-.91.407-.91.91v14.545c0 .502.407.91.91.91h18.18c.503 0 .91-.408.91-.91V2.73c0-.5-.407-.908-.91-.908zm0 15.455H.91V2.73h18.18v14.547z"}),ATTACH_PDF_48:_react2.default.createElement("path",{d:"M17.076 4.438L13.028.444c-.19-.187-.39-.415-.75-.444H3.642c-.502 0-.91.407-.91.91v18.18c0 .5.41.91.91.91H16.37c.5 0 .908-.41.908-.91V4.973c0-.247-.094-.424-.202-.534zM16.37 19.09H3.64V.91h8.182v3.863c0 .375.307.682.682.682h3.863V19.09zM11.59 12.67c-.058-.065-.118-.133-.178-.203-.405-.468-.772-.973-1.08-1.478.17-.79.26-1.518.27-2.066l.002-.103c.015-.622.04-1.666-.863-1.856-.278-.058-.556-.002-.78.16-.242.173-.408.453-.443.75-.11.92.332 2.123.978 3.243-.17.71-.41 1.45-.71 2.123-.667.256-1.33.608-1.954 1.077-1.09.787-.984 1.37-.823 1.647.147.253.44.393.76.393.155 0 .32-.033.475-.104.887-.405 1.59-1.313 2.116-2.388.653-.22 1.304-.344 1.915-.393.582.585 1.385 1.225 2.123 1.245.712.02 1.072-.373 1.12-.77.052-.42-.254-.952-1.045-1.126-.532-.115-1.176-.178-1.88-.15zm-4.674 2.868c-.09.042-.17.04-.215.028.03-.09.167-.308.597-.617.277-.21.562-.392.85-.552-.356.52-.768.93-1.23 1.14zm2.38-7.57c.008-.064.05-.155.12-.206.034-.024.068-.035.108-.035.017 0 .036.002.055.006.243.05.252.535.24 1.07l-.003.106c-.006.277-.033.6-.082.954-.33-.74-.495-1.417-.438-1.897zm.465 4.963c.115-.3.218-.608.308-.914.182.26.372.51.562.742-.285.042-.576.1-.87.173zm3.543.658c.336.074.437.23.435.263-.007.016-.09.096-.32.082h-.002c-.213-.006-.547-.14-.972-.466.31.023.6.066.86.122z"}),ATTACH_PPT_48:_react2.default.createElement("path",{d:"M8.767 11.032v.934c.228.018.45.06.59-.175.104-.177.095-.502-.026-.64-.156-.176-.36-.15-.563-.118zM11.82 10.818h-.006V7.285l-5.467.99v7.498l5.467.99v-2.218h2.264c.246 0 .454-.203.454-.454 0-.252-.203-.454-.454-.454h-2.264v-1.294h.005c.245.366.664.608 1.14.608.676 0 1.238-.487 1.35-1.13h-1.577v-1.584c-.38.062-.705.278-.912.582zm-1.76.99c-.087.37-.327.63-.705.722-.188.046-.39.037-.604.055v1.055H8.18v-3.187c.442 0 .88-.012 1.32.01.115.004.248.09.333.177.327.335.327.752.23 1.167zM13.188 10.235v1.13h1.123c-.092-.578-.545-1.033-1.122-1.13zM17.076 4.438L13.028.444c-.19-.187-.39-.415-.75-.444H3.642c-.502 0-.91.407-.91.91v18.18c0 .5.41.91.91.91H16.37c.5 0 .908-.41.908-.91V4.973c0-.247-.094-.424-.202-.534zM16.37 19.09H3.64V.91h8.182v3.863c0 .375.307.682.682.682h3.863V19.09z"}),ATTACH_SOUND_48:_react2.default.createElement("path",{d:"M19.09 1.822H.91c-.503 0-.91.407-.91.91v14.545c0 .502.407.91.91.91h18.18c.503 0 .91-.408.91-.91V2.73c0-.5-.407-.908-.91-.908zm0 15.455H.91V2.73h18.18v14.547zM11.818 11.81c.25 0 .455-.202.455-.452V7.746c0-.25-.204-.45-.455-.45s-.454.2-.454.45v3.612c0 .25.203.452.454.452zM13.636 11.353c.25 0 .455-.202.455-.45V9.546c0-.25-.203-.45-.454-.45s-.454.2-.454.45v1.355c0 .25.203.45.454.45zM8.182 14.067c.25 0 .454-.202.454-.45V6.39c0-.25-.203-.452-.454-.452-.25 0-.455.202-.455.452v7.224c0 .25.204.45.455.45zM10 13.165c.25 0 .455-.202.455-.452V9.1c0-.248-.204-.45-.455-.45s-.455.202-.455.45v3.613c0 .25.204.452.455.452zM6.364 12.274c.25 0 .454-.204.454-.455V8.636c0-.25-.203-.454-.454-.454-.25 0-.455.203-.455.454v3.182c0 .25.203.454.454.454z"}),ATTACH_XLS_48:_react2.default.createElement("path",{d:"M17.076 4.438L13.028.444c-.19-.187-.39-.415-.75-.444H3.642c-.502 0-.91.407-.91.91v18.18c0 .5.41.91.91.91H16.37c.5 0 .908-.41.908-.91V4.973c0-.247-.094-.424-.202-.534zM16.37 19.09H3.64V.91h8.182v3.863c0 .375.307.682.682.682h3.863V19.09zM12.18 9.545c0-.228-.157-.383-.366-.432V7.286l-5.467.99v7.497l5.467.99v-1.33c.21-.05.365-.205.365-.433s-.157-.383-.366-.432v-.954c.21-.05.365-.204.365-.432s-.157-.383-.366-.432v-.954c.21-.05.365-.204.365-.432 0-.23-.157-.383-.366-.433V9.98c.21-.05.365-.204.365-.433zm-2.587 4.222c-.19-.463-.425-.91-.562-1.394-.152.45-.37.876-.547 1.317-.247-.003-.494-.013-.74-.023.29-.558.57-1.12.867-1.675-.253-.572-.532-1.132-.793-1.7.248-.015.496-.03.744-.042.17.433.353.862.49 1.307.15-.472.372-.916.563-1.372.254-.017.51-.033.766-.045-.302.607-.604 1.214-.91 1.818.31.622.626 1.238.937 1.86-.27-.016-.542-.032-.814-.05zM13.233 13.636h.837c.276 0 .5-.178.5-.454s-.224-.455-.5-.455h-.837c-.277 0-.5.18-.5.455s.223.454.5.454zM13.233 15.455h.837c.276 0 .5-.18.5-.455s-.224-.455-.5-.455h-.837c-.277 0-.5.18-.5.455s.223.455.5.455zM13.233 11.818h.837c.276 0 .5-.178.5-.454s-.224-.455-.5-.455h-.837c-.277 0-.5.178-.5.454s.223.454.5.454zM13.233 10h.837c.276 0 .5-.178.5-.455 0-.276-.224-.454-.5-.454h-.837c-.277 0-.5.18-.5.455s.223.455.5.455z"}),ATTACH_ZIP_48:_react2.default.createElement("path",{d:"M4.272 15.458h-.365c-.15 0-.27.137-.27.287v.364c0 .15.12.257.27.257h.365c.15 0 .273-.107.273-.258v-.365c0-.15-.122-.287-.273-.287zM3.907 14.55h.365c.15 0 .273-.11.273-.26v-.363c0-.15-.122-.287-.273-.287h-.365c-.15 0-.27.136-.27.287v.364c0 .15.12.26.27.26zM5.18 14.55h-.36c-.152 0-.275.12-.275.272v.364c0 .15.123.272.274.272h.36c.152 0 .275-.122.275-.272v-.364c0-.15-.123-.273-.274-.273zM5.18 12.73h-.36c-.152 0-.275.123-.275.274v.364c0 .15.123.272.274.272h.36c.152 0 .275-.122.275-.272v-.364c0-.15-.123-.273-.274-.273zM3.907 12.73h.365c.15 0 .273-.107.273-.257v-.364c0-.152-.122-.288-.273-.288h-.365c-.15 0-.27.136-.27.287v.363c0 .15.12.258.27.258zM5.196 8.64H3.91c-.15 0-.274.122-.274.273v1.713c0 .158.13.287.287.287h.622v.65c0 .15.123.26.273.26h.366c.15 0 .27-.11.27-.26V8.9c0-.144-.115-.26-.258-.26zM19.09 4.55h-8.808L9.176 2.215c-.11-.222-.296-.394-.54-.394H.86c-.478.028-.857.42-.857.904v.454H0v14.097c0 .502.407.91.91.91h18.18c.5 0 .91-.41.91-.91V5.457c0-.5-.407-.908-.91-.908zm0 12.727H5.456v-.637c0-.15-.123-.273-.274-.273h-.36c-.152 0-.275.123-.275.273v.637H.91V2.73H8.41l1.12 2.467c.073.16.234.26.41.26h9.15v11.82z"}),ATTENTION:_react2.default.createElement("path",{d:"M10.727 10.727c0 .4-.326.727-.727.727-.402 0-.727-.326-.727-.727V6.364c0-.4.325-.727.727-.727.4 0 .727.326.727.727v4.363zM10 14.364c-.402 0-.727-.326-.727-.727s.325-.727.727-.727c.4 0 .727.326.727.727s-.326.727-.727.727zM10 2c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8z"}),BOLD:_react2.default.createElement("path",{d:"M15.2 8.9c.3-.6.4-1.2.4-1.8 0-2.2-1.8-4-4-4H5.1C4.5 3 4 3.5 4 4.1v11.8c0 .6.5 1.1 1.1 1.1h7.1c2.6 0 4.6-2.1 4.6-4.6 0-1.4-.6-2.7-1.6-3.5zM14 12.7c0 .9-.7 1.6-1.6 1.6H6.8v-3.1h5.7c.8-.1 1.5.6 1.5 1.5zM6.8 8.3V5.8h4.8c.7 0 1.3.6 1.3 1.3s-.6 1.3-1.3 1.3H6.8v-.1z"}),BUG:_react2.default.createElement("g",null,_react2.default.createElement("path",{fill:"#26282A",d:"M11.113 6.862c.78-.407 1.318-1.214 1.318-2.154 0-1.16-.81-2.124-1.893-2.372l.004-.016c.075-.282.138-1.758 1.703-1.758.644 0 1.242.376 1.522.957.067.14.235.198.375.13.14-.066.2-.234.13-.374C13.9.5 13.103 0 12.244 0c-1.24 0-2.25 1.01-2.25 2.25 0-1.24-1.01-2.25-2.25-2.25-.86 0-1.656.5-2.03 1.276-.066.14-.007.308.133.375.14.068.308.01.375-.13C6.5.937 7.1.56 7.744.56c1.563 0 1.627 1.476 1.7 1.758l.005.016c-1.083.248-1.893 1.214-1.893 2.372 0 .94.538 1.747 1.317 2.154-2.57.52-4.504 2.79-4.504 5.513C4.368 15.48 6.886 18 9.993 18s5.625-2.52 5.625-5.625c0-2.723-1.935-4.994-4.505-5.513z"}),_react2.default.createElement("path",{fill:"#ED1B32",d:"M9.993 8.854c0 4.01 2.365 7.457 5.77 9.052 1.72-1.793 2.62-4.38 2.068-7.16-.616-3.112-3.127-5.615-6.24-6.217-5.12-.99-9.597 2.904-9.597 7.845 0 2.148.85 4.094 2.23 5.53 3.405-1.594 5.77-5.042 5.77-9.05z"}),_react2.default.createElement("circle",{fill:"#26282A",cx:"12.743",cy:"8.75",r:"1.25"}),_react2.default.createElement("circle",{fill:"#26282A",cx:"7.243",cy:"8.75",r:"1.25"}),_react2.default.createElement("circle",{fill:"#26282A",cx:"15.243",cy:"12.75",r:"1.25"}),_react2.default.createElement("circle",{fill:"#26282A",cx:"4.743",cy:"12.75",r:"1.25"})),CALENDAR:_react2.default.createElement("path",{d:"M18 3.496h-3v-.46c0-.552-.448-1-1-1-.553 0-1 .448-1 1v.46H6.998v-.46c0-.552-.448-1-1-1s-1 .448-1 1v.46H2c-.633 0-1 .36-1 1v11.5c0 .64.367 1 1 1h16c.633 0 1-.36 1-1v-11.5c0-.64-.367-1-1-1zm-7.95 8.276v.002c0 1.296-.944 2.247-2.475 2.247-.982 0-1.717-.304-2.277-.784-.137-.12-.254-.325-.254-.54 0-.393.332-.727.725-.727.216 0 .36.088.48.186.393.334.806.51 1.344.51.57 0 .972-.324.972-.834v-.02c0-.56-.5-.873-1.344-.873h-.236c-.353 0-.647-.295-.647-.647 0-.208.087-.384.323-.62L7.998 8.33h-2.11c-.353 0-.65-.295-.65-.65 0-.35.297-.647.65-.647h3.346c.44 0 .765.255.765.668 0 .374-.176.58-.453.845L8.203 9.83c.932.157 1.846.647 1.846 1.923v.02zm4.205 2.19c-.412 0-.746-.334-.746-.746v-4.75l-.532.137c-.078.02-.186.04-.265.04-.352 0-.656-.294-.656-.647 0-.305.195-.56.498-.648l.973-.284c.284-.08.5-.128.707-.128h.02c.41 0 .745.333.745.745v5.536c0 .412-.333.746-.745.746z"}),CALENDAR_SETTINGS:_react2.default.createElement("path",{d:"M19 7V4.496c0-.64-.367-1-1-1h-3v-.46c0-.552-.448-1-1-1-.553 0-1 .448-1 1v.46H6.998v-.46c0-.552-.448-1-1-1s-1 .448-1 1v.46H2c-.633 0-1 .36-1 1V7h18zM1 8.5v7.496c0 .64.367 1 1 1h16c.633 0 1-.36 1-1V8.5H1z"}),CAL_ACCEPT:_react2.default.createElement("path",{d:"M14.1 7.3c.3.3.3.8 0 1.1l-5 5c-.3.3-.8.3-1.1 0l-2.2-2.1c-.3-.3-.3-.8 0-1.1s.8-.3 1.1 0l1.6 1.6L13 7.3c.4-.3.8-.3 1.1 0zM10 2c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8z"}),CAL_DECLINE:_react2.default.createElement("path",{d:"M11.1 10l2.3 2.4c.3.3.3.8 0 1.1s-.8.3-1.1 0L10 11.1l-2.4 2.4c-.3.3-.8.3-1.1 0-.3-.3-.3-.8 0-1.1L8.9 10 6.6 7.6c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0L10 8.9l2.3-2.3c.3-.3.8-.3 1.1 0 .3.3.3.8 0 1.1L11.1 10zM10 2c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8z"}),CAL_MAYBE:_react2.default.createElement("path",{d:"M10 2c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 13c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1zm.8-4.1v.4c0 .4-.3.7-.7.7s-.7-.3-.7-.7v-1c0-.4.3-.7.7-.7.8 0 1.5-.7 1.5-1.5s-.7-1.5-1.5-1.5-1.7.7-1.6 1.6c0 .5-.3.8-.7.8-.5 0-.8-.3-.8-.8C6.9 6.5 8.4 5 10 5s3 1.3 3 3c0 1.4-1 2.6-2.2 2.9z"}),CHECKBOX_OFF:_react2.default.createElement("path",{d:"M14.5 17h-9C4.1 17 3 15.9 3 14.5v-9C3 4.1 4.1 3 5.5 3h9C15.9 3 17 4.1 17 5.5v9c0 1.4-1.1 2.5-2.5 2.5zm-9-13C4.7 4 4 4.7 4 5.5v9c0 .8.7 1.5 1.5 1.5h9c.8 0 1.5-.7 1.5-1.5v-9c0-.8-.7-1.5-1.5-1.5h-9z"}),CHECKBOX_ON:_react2.default.createElement("path",{d:"M14.5 3h-9C4.122 3 3 4.122 3 5.5v9C3 15.878 4.122 17 5.5 17h9c1.378 0 2.5-1.122 2.5-2.5v-9C17 4.122 15.878 3 14.5 3zm-.208 4.713L8.5 13.5l-2.792-2.624c-.277-.277-.277-.727 0-1.004.278-.278.727-.278 1.005 0L8.5 11.5l4.786-4.792c.278-.277.728-.277 1.006 0 .277.278.277.727 0 1.005z"}),CHECKMARK:_react2.default.createElement("path",{d:"M7.2 14.1l-3.5-3.5c-.3-.3-.3-.7 0-1s.8-.3 1 0l3 2.9 7.4-7.3c.3-.3.8-.3 1 0 .3.3.3.7 0 1L8.2 14c-.2.3-.7.3-1 .1z"}),CHEVRON_UP:_react2.default.createElement("path",{d:"M13.5 12.75c-.192 0-.384-.073-.53-.22L10 9.56l-2.97 2.97c-.293.293-.767.293-1.06 0s-.293-.767 0-1.06L10 7.44l4.03 4.03c.293.293.293.767 0 1.06-.146.147-.338.22-.53.22z"}),CIRCLE:_react2.default.createElement("circle",{cx:"10",cy:"10",r:"4"}),CLEAR:_react2.default.createElement("path",{id:"Clear",d:"M10 2c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zm3.445 10.68c.21.21.21.554 0 .765-.21.211-.554.211-.765 0L10 10.765l-2.68 2.68c-.21.211-.554.211-.765 0-.21-.21-.21-.554 0-.765L9.235 10l-2.68-2.68c-.21-.21-.21-.554 0-.765.21-.211.554-.211.766 0L10 9.235l2.68-2.68c.21-.21.554-.21.765 0 .21.212.21.554 0 .766L10.765 10l2.68 2.68z"}),CLOCK:_react2.default.createElement("path",{d:"M11.974 12.7c-.275.277-.723.277-.998 0L9.58 11.307c-.18-.133-.308-.337-.308-.58V7.09c0-.402.325-.727.728-.727.403 0 .728.325.728.727v3.366l1.247 1.247c.276.276.276.72 0 .997zM10 2c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8z"}),CLOSE:_react2.default.createElement("path",{d:"M10 9l5.1-5.1c.3-.3.7-.3 1 0 .3.3.3.7 0 1L11 10l5.1 5.1c.3.3.3.7 0 1-.3.3-.7.3-1 0L10 11l-5.1 5.1c-.3.3-.7.3-1 0-.3-.3-.3-.7 0-1L9 10 3.9 4.9c-.3-.3-.3-.7 0-1s.7-.3 1 0L10 9z"}),CLOSE_MINI:_react2.default.createElement("path",{d:"M12.8 13.8L10 11l-2.8 2.8c-.3.3-.7.3-1 0s-.3-.7 0-1L9 10 6.2 7.2c-.3-.3-.3-.7 0-1s.7-.3 1 0L10 9l2.8-2.8c.3-.3.7-.3 1 0s.3.7 0 1L11 10l2.8 2.8c.3.3.3.7 0 1s-.7.3-1 0z"}),COLLAPSE_LIST:_react2.default.createElement("path",{d:"M12 2.5H8c-.2 0-.3.2-.1.4L10 5l2.1-2.1c.2-.2.1-.4-.1-.4zm-4 15h4c.2 0 .3-.2.1-.4L10 15l-2.1 2.1c-.2.2-.1.4.1.4zm8.5-6.5h-13c-.6 0-1 .4-1 1s.4 1 1 1h13c.6 0 1-.4 1-1s-.4-1-1-1zm-13-2h13c.6 0 1-.4 1-1s-.4-1-1-1h-13c-.6 0-1 .4-1 1s.4 1 1 1z"}),COMPOSE:_react2.default.createElement("path",{d:"M8.79 15.834c-.09.09-.21.152-.333.167-.055.016-3.957 0-3.957 0-.3.006-.505-.242-.5-.54v-3.856c0-.148.06-.29.164-.397l4.174-4.17 4.624 4.625-4.172 4.172zm4.96-4.96L9.128 6.25l2.078-2.075c.214-.215.576-.24.783-.032l3.864 3.88c.174.175.228.525-.022.775l-2.08 2.077z"}),COMPOSE_EMOJI:_react2.default.createElement("path",{d:"M10 1.6c-4.7 0-8.5 3.8-8.5 8.5s3.8 8.5 8.5 8.5 8.5-3.8 8.5-8.5-3.8-8.5-8.5-8.5zm0 15.3c-3.8 0-6.9-3.1-6.9-6.9S6.2 3.2 10 3.2s6.9 3.1 6.9 6.9-3 6.8-6.9 6.8zm-2.5-9c.6 0 1.2.5 1.2 1.2s-.5 1.2-1.2 1.2-1.2-.6-1.2-1.2.5-1.2 1.2-1.2zm5.3 0c.6 0 1.2.5 1.2 1.2s-.5 1.2-1.2 1.2-1.2-.5-1.2-1.2.6-1.2 1.2-1.2zm.74 4.66c-.48 1.06-2.03 2.04-3.41 2.04s-2.93-.97-3.41-2.04c-.47-1.06.79-.96.79-.96h5.24c.01 0 1.27-.1.79.96z"}),CONTACTS:_react2.default.createElement("path",{d:"M16.5 2H14v4.5h3.5V3c-.007-.667-.34-1-1-1zM14 12h3.5V8h-3.49zM2.5 3v14c0 .667.333 1 1 1h9V2h-9c-.667 0-1 .333-1 1zM14 18h2.5c.66 0 .993-.333 1-1v-3.5H14V18z"}),CONTACT_CARD:_react2.default.createElement("path",{d:"M17.3 3H2.7c-.4 0-.7.3-.7.7v12.6c0 .4.3.7.7.7h14.6c.4 0 .7-.3.7-.7V3.7c0-.4-.3-.7-.7-.7zM5.5 7.7c.2-.7.8-1.3 1.6-1.5 1.5-.3 2.9 1 2.5 2.5-.2.8-.8 1.4-1.6 1.6-1.5.3-2.8-1-2.5-2.6zm5.1 6.8h-6c-.6 0-.9-.6-.6-1.1.7-1 2.1-1.7 3.6-1.7s2.9.7 3.6 1.7c.3.4-.1 1.1-.6 1.1zm5.2-1.3H14c-.4 0-.7-.3-.7-.7s.3-.7.7-.7h1.8c.4 0 .7.3.7.7s-.3.7-.7.7zm0-2.9h-3.3c-.4 0-.7-.3-.7-.7s.3-.7.7-.7h3.3c.4 0 .7.3.7.7 0 .3-.3.7-.7.7zm0-2.9h-3.3c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7h3.3c.4 0 .7.3.7.7 0 .3-.3.7-.7.7z"}),CONTRACT:_react2.default.createElement("path",{d:"M11 4.1v4.3c0 .3.3.6.6.6H16c.3 0 .6-.3.6-.6 0-.2 0-.3-.2-.4l-1.6-1.1 3-3c.2-.2.2-.5 0-.7l-1.1-1.1c-.2-.2-.5-.2-.7 0l-3 3-1-1.6c-.1-.2-.3-.2-.4-.2-.3 0-.5.2-.6.5v.3zM9 16v-4.3c0-.4-.3-.7-.6-.7H3.9c-.3 0-.6.3-.6.6 0 .2 0 .3.2.4l1.6 1.1-3 3c-.2.2-.2.5 0 .7l1.1 1.1c.2.2.5.2.7 0l3-3L8 16.5c.1.2.3.2.4.2.3 0 .5-.2.6-.5V16z"}),DELETE:_react2.default.createElement("path",{d:"M3.994 17.21c0 .41.335.79.745.79h10.52c.41 0 .734-.387.734-.797V7h-12v10.21zm7.256-6.946c0-.415.336-.75.75-.75.416 0 .752.335.752.75v4.49c0 .414-.336.75-.75.75-.416 0-.752-.336-.752-.75v-4.49zm-4 0c0-.415.336-.75.75-.75.416 0 .752.335.752.75v4.49c0 .414-.336.75-.75.75-.416 0-.752-.336-.752-.75v-4.49zM17 3h-4.26v-.076c0-.51-.336-.924-.76-.924H8.007c-.425 0-.773.414-.773.924V3H3c-.552 0-1 .447-1 1s.448 1 1 1h14c.552 0 1-.448 1-1s-.448-1-1-1z"}),DEVICE_DESKTOP:_react2.default.createElement("path",{d:"M17.97 2.03H1.99c-.44 0-.8.36-.8.8v11.19c0 .44.36.8.8.8h6.39l-.8 1.6h-2.4c-.44 0-.8.36-.8.8 0 .44.36.8.8.8h9.59c.44 0 .8-.36.8-.8 0-.44-.36-.8-.8-.8h-2.4l-.8-1.6h6.39c.44 0 .8-.36.8-.8V2.83c.01-.44-.34-.8-.79-.8zm-.79 11.19H2.79V3.63h14.39v9.59z"}),DOCUMENTS_S:_react2.default.createElement("path",{d:"M10.97 2.994H5.11c-.335 0-.61.275-.61.61V16.39c0 .337.275.612.61.612h9.778c.337 0 .612-.275.612-.612V7.525c0-.163-.064-.318-.18-.432l-3.92-3.92c-.114-.115-.27-.18-.43-.18zm-.006 4.534V4.473l3.055 3.055h-3.056z"}),DOWNLOAD:_react2.default.createElement("path",{d:"M16.8 13.5c-.4 0-.8.3-.8.8v1.2H4v-1.3c0-.4-.3-.7-.7-.7s-.8.3-.8.8v2c0 .4.3.7.8.7H17c.4 0 .5-.3.5-.7v-2c0-.5-.3-.8-.7-.8zM9.5 13.1c.3.2.7.2.9 0l3.9-3.6c.3-.3.3-.7 0-1-.1-.1-.3-.2-.5-.2l-2.3.5V3.1c0-.3-.3-.6-.6-.6H9.1c-.3 0-.6.3-.6.6v5.7l-2.3-.5c-.2 0-.3 0-.5.2-.3.3-.3.7 0 1l3.8 3.6z"}),DRAFTS:_react2.default.createElement("path",{d:"M13.083 8.52H7.06c-.416 0-.753-.337-.753-.753s.337-.753.753-.753h6.023c.415 0 .752.337.752.753s-.337.753-.752.753zm-.037 2.99h-5.99c-.414 0-.75-.336-.75-.75s.336-.748.75-.748h5.99c.414 0 .75.334.75.748s-.336.75-.75.75zm2.767-9.498H4.258c-.397 0-.722.332-.722.74v14.26c0 .572.634.917 1.114.607l1.678-1.24 1.388 1.208c.253.195.603.2.862.015l1.457-1.22 1.458 1.22c.26.186.61.18.862-.015l1.387-1.208 1.68 1.24c.48.31 1.114-.035 1.114-.608V2.752c0-.408-.326-.74-.723-.74z"}),ENTER:_react2.default.createElement("path",{d:"M8 6.8c.3-.3.8-.3 1.1 0s.3.8 0 1.1L6.9 10h7.6V4.8c0-.4.3-.8.8-.8.4 0 .7.3.7.8v6c0 .5-.4.8-.7.8H6.9l2.2 2.2c.1.1.2.3.2.5s-.1.4-.2.5c-.3.3-.8.3-1.1 0l-4-4 4-4z"}),EXCLAMATION_ALT:_react2.default.createElement("path",{d:"M2.097 15.85c-.285.517.09 1.15.68 1.15h14.446c.59 0 .964-.633.68-1.15L10.68 2.66c-.295-.537-1.065-.537-1.36 0L2.098 15.85zm8.68-4.282c0 .428-.348.776-.777.776s-.776-.348-.776-.776V8.464c0-.428.347-.776.776-.776s.777.348.777.776v3.104zM10 15.448c-.43 0-.776-.35-.776-.777s.347-.775.776-.775c.43 0 .777.348.777.776s-.348.777-.777.777z"}),EXPAND:_react2.default.createElement("path",{d:"M2 13.1v4.3c0 .3.3.6.6.6H7c.3 0 .6-.3.6-.6 0-.2 0-.3-.2-.4l-1.6-1.1 3-3c.2-.2.2-.5 0-.7l-1.1-1.1c-.2-.2-.5-.2-.7 0l-3 3-1-1.6c-.1-.2-.3-.2-.4-.2-.3 0-.5.2-.6.5v.3zM18 6.9V2.6c0-.3-.3-.6-.6-.6H13c-.3 0-.6.3-.6.6 0 .2 0 .3.2.4l1.6 1.1-3 3c-.2.2-.2.5 0 .7l1.1 1.1c.2.2.5.2.7 0l3-3 1 1.6c.1.2.3.2.4.2.3 0 .5-.2.6-.5v-.3z"}),EXPAND_LIST:_react2.default.createElement("path",{d:"M8 8h4c.2 0 .3-.2.1-.4L10 5.5 7.9 7.6c-.2.2-.1.4.1.4zm4 4H8c-.2 0-.3.2-.1.4l2.1 2.1 2.1-2.1c.2-.2.1-.4-.1-.4zm4.5 3h-13c-.6 0-1 .4-1 1s.4 1 1 1h13c.6 0 1-.4 1-1 0-.5-.4-1-1-1zM3.5 5h13c.6 0 1-.4 1-1s-.4-1-1-1h-13c-.6 0-1 .4-1 1s.4 1 1 1z"}),FACEBOOK:_react2.default.createElement("path",{fill:"#3c5a95",d:"M8.4 18v-7.5H6.5V7.8h1.9V5.5C8.4 3.7 9.5 2 12.1 2c1 0 1.8.1 1.8.1l-.1 2.5h-1.6c-.9 0-1.1.4-1.1 1.2v2h2.8l-.1 2.7h-2.7V18H8.4z"}),FEEDBACK:_react2.default.createElement("g",null,_react2.default.createElement("path",{opacity:".4",d:"M8.5 13.6l-.1.1c-.4.3-.5.6-.5.9 0 .8.8 1.2 1.6 1.2h2.9l-.1.4c-.2.6-.3 1.4-.2 2.2.1.8.6 1.4 1.3 1.5.4.1.7 0 1-.2.1-.1.3-.3.3-.6 0-.8.2-1.4.9-2.2l.3-.3 1-1c.1-.1.1-.1.1-.2V8.5h-6.7c-.6 0-1.2.3-1.2 1.1 0 .2 0 .3.1.5l.1.2-.2.1c-.3.2-.4.4-.4.7 0 .2 0 .3.1.5l.1.3-.2.1c-.3.2-.4.4-.4.8 0 .2 0 .4.1.5l.1.3zM20 15.7V8.3c0-.1-.1-.3-.3-.3H18v8h1.7c.2 0 .3-.1.3-.3v-.6.6z"}),_react2.default.createElement("path",{d:"M13.2 7.4c.3-.3.5-.6.5-1 0-.9-.9-1.4-1.8-1.4H8.4l.1-.4c.2-.7.2-1.6.2-2.6S8.1.4 7.2.2c-.5-.1-.8.1-1.1.3-.2.2-.3.4-.3.7 0 1-.3 1.7-1.1 2.6l-.3.3-1.2 1.2-.2.2v8h7.8c.7 0 1.4-.4 1.4-1.3 0-.2 0-.4-.1-.6l-.1-.3.2-.2c.3-.2.5-.5.5-.9 0-.2 0-.4-.1-.6l-.1-.3.3-.2c.3-.2.5-.5.5-.9 0-.2 0-.4-.1-.6v-.2zM0 13.7c0 .1.1.3.3.3H2V5H.3c-.2 0-.3.2-.3.4v8.3z"})),FLICKR:_react2.default.createElement("g",null,_react2.default.createElement("circle",{cx:"5.2",cy:"10",r:"4",fill:"#1d75cf"}),_react2.default.createElement("circle",{cx:"14.8",cy:"10",r:"3.5",fill:"#fe0084",stroke:"#fe0084"})),FOLDER:_react2.default.createElement("path",{d:"M2.5 15.8c0 .4.3.7.7.7h13.6c.4 0 .7-.3.7-.7V10h-15v5.8zM16.8 5h-6.3l-.8-1.6C9.6 3.2 9.3 3 9 3H3.2c-.4 0-.7.3-.7.7v4.8h15V5.7c0-.4-.3-.7-.7-.7z"}),FORWARD:_react2.default.createElement("path",{d:"M10.442 16.956c-.515.385-1.238.01-1.238-.62V14h-6.94c-.427 0-.764-.372-.764-.8V7.794c0-.427.337-.793.764-.793h6.94V4.695c0-.705.767-.97 1.238-.62l7.74 5.81c.363.272.456.894 0 1.237l-7.74 5.834z"}),GIF_BOX:_react2.default.createElement("path",{d:"M18.787 3.226C18.69 3.128 18.497 3 18.3 3H1.768C1.34 3 1 3.396 1 3.813v13.405c0 .49.378.782.767.782H18.3c.487 0 .7-.235.7-.783V3.715c0-.196-.115-.39-.213-.49zM17.5 16.5h-15v-12h15v12zM13 11h2.5v-1H13V9h3V8h-4v5h1zM10.002 8H11v5h-.998zM6.488 13.067c.434 0 .8-.085 1.097-.255.173-.097.368-.265.585-.503l.113.69H9v-2.753H7v.836h1.03c-.055.328-.204.594-.445.797-.24.203-.55.304-.928.304-.385 0-.73-.128-1.03-.384-.303-.256-.454-.692-.454-1.308 0-.612.14-1.07.42-1.374s.633-.458 1.067-.458c.227 0 .432.037.618.112.33.136.56.386.646.728H9c-.06-.482-.29-.896-.704-1.218-.416-.323-.966-.485-1.65-.485-.79 0-1.425.245-1.905.734-.48.49-.74 1.14-.74 1.95 0 .803.258 1.435.734 1.897.455.46 1.04.69 1.754.69z"}),HEART:_react2.default.createElement("path",{fill:"#ED1B32",d:"M10 18.183l-7.64-8.01C.545 8.27.545 5.17 2.357 3.267c.89-.934 2.072-1.45 3.334-1.45C8.3 1.816 9.517 3.896 10 4.29c.498-.406 1.688-2.473 4.308-2.473 1.262 0 2.446.514 3.334 1.45 1.81 1.904 1.81 5.003 0 6.907L10 18.184z"}),HOME:_react2.default.createElement("path",{d:"M17.8 9.4l-7.2-7.2c-.2-.1-.4-.2-.6-.2s-.4.1-.5.2L2.2 9.4c-.3.3-.3.8 0 1.1s.8.3 1.1 0l.2-.2v6.9c0 .4.3.7.7.7h3.6V15c0-1.2 1-2.2 2.2-2.2 1.2 0 2.2 1 2.2 2.2v2.9h3.3c.4 0 1-.3 1-.7v-6.9l.2.2c.3.3.8.3 1.1 0 .3-.3.3-.8 0-1.1z"}),INBOX:_react2.default.createElement("path",{d:"M10 10l9-3.5V4c0-.65-.366-1-1-1H2c-.633 0-1 .35-1 1v2.5l9 3.5zm.76 1.195c-.42.165-1.102.164-1.52 0L5.12 9.598 1 8v8c0 .65.367 1 1 1h16c.633 0 1-.35 1-1V8l-8.24 3.195z"}),INDENT:_react2.default.createElement("path",{d:"M5 5h12c.6 0 1-.4 1-1s-.4-1-1-1H5c-.6 0-1 .4-1 1s.4 1 1 1zM17 7h-6c-.6 0-1 .4-1 1s.4 1 1 1h6c.6 0 1-.4 1-1s-.4-1-1-1zM17 11h-6c-.6 0-1 .4-1 1s.4 1 1 1h6c.6 0 1-.4 1-1s-.4-1-1-1zM17 15h-6c-.6 0-1 .4-1 1s.4 1 1 1h6c.6 0 1-.4 1-1s-.4-1-1-1zM4.6 7.8c-.4.4-.4 1 0 1.4l.8.8H2.6c-.6 0-1 .4-1 1s.4 1 1 1h2.8l-.8.8c-.4.4-.4 1 0 1.4s1 .4 1.4 0L9.2 11 6 7.8c-.4-.4-1-.4-1.4 0z"}),INPUT_ARROW_DOWN:_react2.default.createElement("path",{id:"Path-1009",d:"M5.5 7.5h9l-4.5 5z"}),ITALIC:_react2.default.createElement("path",{d:"M15.8 3H7.5c-.5 0-.9.4-.9.9s.4.9.9.9h3l-4 9.5h-3c-.5 0-.9.4-.9.9s.4.9.9.9h8.3c.5 0 .9-.4.9-.9s-.4-.9-.9-.9H8.3l4-9.5h3.4c.5 0 .9-.4.9-.9s-.3-.9-.8-.9z"}),LINK:_react2.default.createElement("path",{d:"M8.247 12H3.542c-.482 0-.934-.216-1.275-.592-.34-.376-.463-.876-.463-1.408 0-1.098.745-2 1.74-2h4.703c.498 0 .902-.437.902-.987S8.744 6 8.246 6H3.542C1.554 6 0 7.804 0 10c0 1.064.31 2.065.992 2.817C1.672 13.57 2.58 14 3.542 14h4.704c.498 0 .902-.463.902-1.013 0-.55-.403-.987-.9-.987zM18.944 7.183C18.262 6.43 17.356 6 16.394 6h-4.705c-.5 0-.903.463-.903 1.013 0 .55.36.987.858.987h4.748c.482 0 .934.216 1.275.592.34.376.528.876.528 1.408 0 .532-.187 1.032-.528 1.408-.34.376-.794.592-1.275.592H11.69c-.5 0-.903.437-.903.987 0 .275.1.524.264.704.164.18.39.293.64.293l4.703.017c.963 0 1.87-.43 2.55-1.183C19.626 12.064 20 11.064 20 10c0-1.064-.375-2.064-1.056-2.817zM6.684 10.005c0 .273.097.52.255.7s.374.295.615.295h4.89c.482 0 .872-.45.872-.996 0-.547-.39-1.005-.87-1.004H7.554c-.48 0-.87.458-.87 1.005z"}),LINKEDIN:_react2.default.createElement("path",{fill:"#1478b1",d:"M15.242 15.097h-2.104v-3.405c0-.902-.163-1.44-.914-1.44-.54 0-.946.293-1.215.576v4.27H8.904V8.835h2.104v.836c.365-.396.996-.887 1.878-.887 1.477 0 2.354.952 2.354 2.907v3.405zM6.338 7.935c-.67 0-1.214-.544-1.214-1.214 0-.67.544-1.215 1.214-1.215.672 0 1.215.544 1.215 1.216 0 .67-.543 1.215-1.215 1.215zm1.066 7.162H5.3v-6.26h2.104v6.26zM17.922 2.53c-.053-.12-.117-.217-.195-.295-.078-.078-.17-.137-.273-.176-.105-.04-.222-.06-.35-.06H2.896c-.13 0-.248.02-.35.06-.104.038-.196.097-.274.175-.078.078-.144.176-.195.294-.053.116-.078.227-.078.33v14.28c0 .104.025.215.078.332.05.118.117.215.195.294.078.078.17.137.273.176.104.04.22.058.35.058h14.207c.13 0 .246-.02.35-.058.104-.04.196-.098.274-.176.078-.08.142-.176.195-.294.052-.117.078-.228.078-.332V2.86c0-.103-.026-.214-.078-.33z"}),LIST_ORDERED:_react2.default.createElement("path",{d:"M7 5h10c.552 0 1-.448 1-1s-.448-1-1-1H7c-.552 0-1 .448-1 1s.448 1 1 1zM17 9H7c-.552 0-1 .448-1 1s.448 1 1 1h10c.552 0 1-.448 1-1s-.448-1-1-1zM17 15H7c-.552 0-1 .448-1 1s.448 1 1 1h10c.552 0 1-.448 1-1s-.448-1-1-1zM4.297 15.865v-.01c.187-.052.328-.15.422-.293.093-.143.14-.308.14-.495 0-.173-.04-.325-.12-.457-.082-.132-.187-.244-.314-.336-.13-.092-.273-.16-.435-.206-.16-.045-.32-.068-.482-.068-.207 0-.395.032-.564.096-.17.064-.313.155-.434.272-.12.117-.215.258-.282.422-.068.162-.105.343-.113.54h.777c-.003-.197.048-.36.153-.49s.262-.197.468-.197c.15 0 .283.044.398.133.116.088.172.214.172.38 0 .108-.028.196-.083.263-.057.065-.127.116-.212.15-.086.035-.18.057-.28.065-.1.006-.193.006-.282 0v.548c.1 0 .204.003.312.01.112.005.21.025.303.06.093.034.17.09.228.167.06.077.09.19.09.336 0 .187-.064.335-.19.443-.127.107-.28.16-.467.16-.117 0-.22-.02-.306-.06-.086-.04-.158-.094-.215-.16-.06-.07-.102-.15-.134-.244-.03-.093-.047-.19-.05-.294h-.778c-.003.224.03.422.1.594.072.172.172.32.302.438.132.12.29.21.475.272.186.063.392.094.618.094.197 0 .386-.028.564-.082.18-.056.34-.136.477-.242.14-.108.25-.24.33-.398.083-.157.126-.337.126-.538 0-.22-.064-.41-.19-.567-.127-.158-.3-.26-.523-.308zM3.44 10.964c.133-.1.27-.196.413-.283s.28-.176.42-.266c.14-.09.266-.19.374-.3.11-.11.2-.235.267-.377.067-.142.1-.312.1-.51 0-.19-.038-.363-.114-.517-.078-.152-.18-.28-.31-.385-.13-.106-.28-.186-.452-.24-.17-.057-.35-.085-.54-.085-.247 0-.465.04-.657.12-.19.08-.347.192-.474.337-.126.143-.22.312-.282.504-.064.193-.09.4-.083.627h.803c0-.107.01-.212.033-.32.02-.104.056-.202.11-.29.05-.088.117-.158.202-.212.085-.055.188-.083.31-.083.18 0 .33.055.445.16.117.108.173.255.173.446 0 .12-.028.226-.086.32-.056.094-.127.177-.21.252s-.18.14-.28.204c-.104.062-.2.122-.29.183-.177.115-.344.23-.504.342-.16.11-.3.232-.415.365-.118.133-.21.282-.28.45-.07.17-.102.367-.102.595h3.03v-.683H3.084c.103-.135.222-.252.355-.353zM3.118 6h.903V2H3.3c-.022.152-.075.28-.156.382-.08.103-.18.185-.297.25-.116.062-.246.105-.393.13-.146.025-.298.036-.454.032v.61h1.118V6z"
}),LIST_UNORDERED:_react2.default.createElement("path",{d:"M3 15c-.6 0-1 .4-1 1s.4 1 1 1 1-.4 1-1-.4-1-1-1zm0-6c-.6 0-1 .4-1 1s.4 1 1 1 1-.4 1-1-.4-1-1-1zm0-6c-.6 0-1 .4-1 1s.4 1 1 1 1-.4 1-1-.4-1-1-1zm14 2H7c-.6 0-1-.4-1-1s.4-1 1-1h10c.6 0 1 .4 1 1s-.4 1-1 1zm0 6H7c-.6 0-1-.4-1-1s.4-1 1-1h10c.6 0 1 .4 1 1s-.4 1-1 1zm0 6H7c-.6 0-1-.4-1-1s.4-1 1-1h10c.6 0 1 .4 1 1s-.4 1-1 1z"}),LOCK:_react2.default.createElement("path",{d:"M10 10.1c-.4 0-.7.3-.7.7v2.7c0 .4.3.7.7.7s.7-.3.7-.7v-2.7c0-.4-.3-.7-.7-.7zm0-6c-2.6 0-2.7 2.7-2.7 2.7h5.3c.1 0 .1-2.7-2.6-2.7zm6 13.3H4c-.4 0-.7-.3-.7-.7V7.4c0-.4.3-.7.7-.7h2c0-2.2 1.8-4 4-4s4 1.8 4 4h2c.4 0 .7.3.7.7v9.3c0 .4-.3.7-.7.7z"}),MESSENGER:_react2.default.createElement("path",{d:"M10 2c-4.42 0-8 3.58-8 8 0 4.417 3.58 8 8 8 4.417 0 7.998-3.583 7.998-8 0-4.42-3.58-8-7.998-8zm2.264 4.563c.51 0 .922.413.922.922 0 .51-.413.922-.922.922-.51 0-.922-.413-.922-.922 0-.51.413-.922.922-.922zm-4.553 0c.51 0 .923.424.923.948s-.413.948-.922.948c-.508 0-.92-.424-.92-.948s.412-.947.92-.947zm5.954 7.386c-.816.715-2.664 1.064-3.653 1.05-1.01.014-2.836-.335-3.652-1.05-1.24-1.09-1.376-2.95-1.376-3.363H15.04c0 .413-.135 2.273-1.376 3.362z"}),MINUS:_react2.default.createElement("path",{d:"M13.75 9.25h-7.5c-.414 0-.75.336-.75.75s.336.75.75.75h7.5c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"}),MIXED_CHECKBOX:_react2.default.createElement("g",null,_react2.default.createElement("path",{fill:"#188FFF",d:"M7 11h6c.552 0 1-.448 1-1 0-.553-.448-1-1-1H7c-.552 0-1 .447-1 1 0 .552.448 1 1 1z"}),_react2.default.createElement("path",{d:"M14.5 17h-9C4.122 17 3 15.878 3 14.5v-9C3 4.122 4.122 3 5.5 3h9C15.878 3 17 4.122 17 5.5v9c0 1.378-1.122 2.5-2.5 2.5zm-9-13C4.673 4 4 4.673 4 5.5v9c0 .827.673 1.5 1.5 1.5h9c.827 0 1.5-.673 1.5-1.5v-9c0-.827-.673-1.5-1.5-1.5h-9z"})),MORE:_react2.default.createElement("g",null,_react2.default.createElement("circle",{cx:"3",cy:"10",r:"2"}),_react2.default.createElement("circle",{cx:"10",cy:"10",r:"2"}),_react2.default.createElement("circle",{cx:"17",cy:"10",r:"2"})),MOVE_TO_FOLDER:_react2.default.createElement("path",{d:"M17.25 5h-6.77l-.715-1.563C9.643 3.171 9.375 3 9.083 3H2.75c-.414 0-.75.336-.75.75v12.5c0 .414.336.75.75.75h6.5v-6.19l-1.72 1.72c-.293.293-.767.293-1.06 0s-.293-.767 0-1.06L10 7.94l3.53 3.53c.293.293.293.767 0 1.06-.146.147-.338.22-.53.22s-.384-.073-.53-.22l-1.72-1.72V17h6.5c.414 0 .75-.336.75-.75V5.75c0-.414-.336-.75-.75-.75z"}),NOTEPAD:_react2.default.createElement("path",{d:"M13 14.73V18l4-4h-3.11c-.66 0-.89.063-.89.73zM16 2H4c-.667 0-1 .333-1 1v14c0 .626.305.946.892.985.053.01.096.015.108.015h7.51v-4.23c.018-.832.438-1.25 1.266-1.256H17V3c-.007-.667-.34-1-1-1zM9 14H6.89c-.43 0-.78-.335-.78-.75s.35-.75.78-.75H9c.43 0 .778.335.778.75S9.428 14 9 14zm4.11-3.5H6.89c-.43 0-.78-.335-.78-.75S6.46 9 6.89 9h6.22c.43-.01.78.335.78.75s-.35.75-.78.75zm0-3.5H6.89c-.43 0-.78-.335-.78-.75s.35-.75.78-.75h6.22c.43 0 .78.335.78.75s-.35.75-.78.75z"}),NO_INTERNET:_react2.default.createElement("g",null,_react2.default.createElement("ellipse",{cx:"10",cy:"14.852",rx:"1.5",ry:"1.469"}),_react2.default.createElement("path",{d:"M19.268 7.865c-.31-.313-.635-.61-.967-.884C15.97 5.06 13.02 4 9.996 4S4.018 5.06 1.687 6.983c-.323.268-.637.552-.933.848-.34.34-.34.892 0 1.233.34.34.892.34 1.232 0 .258-.26.528-.505.81-.738C4.815 6.66 7.37 5.74 9.995 5.74c2.62 0 5.177.918 7.197 2.585.29.238.57.495.84.765.17.172.393.258.617.258.22 0 .443-.084.613-.252.34-.338.344-.888.005-1.23zM11 11.41V7.832c0-.507-.45-.917-1-.917-.553 0-1 .41-1 .917v3.577c0 .505.45.916 1 .916s1-.41 1-.916zM7.057 8.843c-.844.288-1.646.7-2.384 1.23-.394.284-.77.602-1.113.945-.34.34-.34.89-.002 1.23.17.172.393.257.616.257.222 0 .444-.085.615-.254.278-.278.58-.534.9-.763.445-.322.926-.573 1.424-.782.104-.044.17-.143.17-.255V9.01c.002-.12-.116-.205-.227-.167zM15.348 10.072c-.715-.515-1.49-.917-2.305-1.202-.146-.05-.3.063-.3.218v1.365c0 .112.066.21.17.254.495.208.974.46 1.42.778.315.228.62.486.9.766.34.34.893.34 1.232-.003s.337-.892-.004-1.232c-.348-.344-.722-.662-1.112-.943z"})),ORB:_react2.default.createElement("path",{d:"M.76 14.462c.505 1.253 1.21 2.29 2.115 3.11.903.818 1.966 1.424 3.182 1.82 1.22.392 2.538.59 3.96.59 1.4 0 2.708-.2 3.924-.59.49-.16 1.852-.62 3.185-1.82.906-.817 1.61-1.856 2.116-3.11.507-1.255.76-2.742.76-4.462 0-1.72-.253-3.208-.76-4.462-.505-1.255-1.21-2.29-2.115-3.108-.904-.82-1.964-1.426-3.184-1.82C12.726.216 11.417.02 10.02.02c-1.423 0-2.74.196-3.96.59-.396.127-1.83.62-3.183 1.82-.912.81-1.61 1.854-2.116 3.108C.252 6.793 0 8.278 0 10c0 1.72.253 3.207.76 4.462z"}),OUTDENT:_react2.default.createElement("path",{d:"M5 5h12c.6 0 1-.4 1-1s-.4-1-1-1H5c-.6 0-1 .4-1 1s.4 1 1 1zM17 7h-6c-.6 0-1 .4-1 1s.4 1 1 1h6c.6 0 1-.4 1-1s-.4-1-1-1zM17 11h-6c-.6 0-1 .4-1 1s.4 1 1 1h6c.6 0 1-.4 1-1s-.4-1-1-1zM17 15h-6c-.6 0-1 .4-1 1s.4 1 1 1h6c.6 0 1-.4 1-1s-.4-1-1-1zM8.2 10H5.5l.8-.8c.4-.4.4-1 0-1.4s-1-.4-1.4 0L1.6 11l3.2 3.2c.4.4 1 .4 1.4 0s.4-1 0-1.4l-.7-.8h2.8c.6 0 1-.4 1-1-.1-.6-.5-1-1.1-1z"}),POP_OUT:_react2.default.createElement("path",{d:"M15.4 16.4H3.6V4.6H11V3H2.8c-.4 0-.8.4-.8.8v13.4c0 .4.4.8.8.8h13.4c.5 0 .8-.4.8-.8V9.5h-1.6v6.9zM17.3 2h-4.2c-.2 0-.4.3-.4.6s.2.4.2.4l1.6 1-3.2 3.2c-.2.2-.2.5 0 .7l1 1c.2.2.5.2.7 0l3.2-3.2 1 1.6s.1.2.4.2.5-.3.5-.6V2.7c-.1-.4-.3-.7-.8-.7z"}),PRINTER:_react2.default.createElement("path",{d:"M13.8 13.5H6.2c-.4 0-.7.3-.7.7v2.6c0 .4.3.7.7.7h7.6c.4 0 .7-.3.7-.7v-2.6c0-.4-.3-.7-.7-.7zM15.5 3.2c0-.4-.3-.7-.7-.7H5.2c-.4 0-.7.3-.7.7v3.3h11V3.2zM17.3 8H2.7c-.4 0-.7.3-.7.7v6.6c0 .4.3.7.7.7h.6c.4 0 .7-.3.7-.7v-2.6c0-.4.3-.7.7-.7h10.6c.4 0 .7.3.7.7v2.6c0 .4.3.7.6.7h.7c.4 0 .7-.3.7-.7V8.7c0-.4-.3-.7-.7-.7zM15 11c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z"}),REFRESH:_react2.default.createElement("path",{d:"M16 10.3c0-1.4-.5-2.7-1.3-3.7l-1.1 1.1c.5.7.9 1.7.9 2.7 0 2.5-2 4.5-4.4 4.5H9l1-.8c.3-.3.4-.8.1-1.1-.3-.4-.9-.4-1.2-.1L6.5 15c-.3.3-.3.8 0 1.1l2.4 2.2c.3.3.9.3 1.2-.1.3-.3.2-.8-.1-1.1l-1-.8h1c3.3 0 6-2.7 6-6zM5.5 10.3c0-2.5 2-4.5 4.5-4.5h1.1l-1 .8c-.3.3-.3.8-.1 1.1.3.4.9.4 1.2.1l2.4-2.2c.3-.3.3-.8 0-1.1l-2.4-2.2c-.3-.3-.9-.3-1.2.1-.3.3-.2.8.1 1.1l1 .8H10c-3.3 0-6 2.7-6 6 0 1.4.5 2.6 1.2 3.7l1.1-1.1c-.5-.8-.8-1.7-.8-2.6z"}),REPLY:_react2.default.createElement("path",{d:"M8.71 15.946c.503.432 1.28.075 1.28-.587v-2.622c5.05 0 6.858 3.584 7.02 4.204.352.797 1.535.594 1.48-.262-.42-6.662-3.91-10.728-8.5-10.728V3.534c0-.662-.775-1.02-1.277-.588l-6.95 6.02c-.364.312-.36.875.01 1.18l6.938 5.8z"}),REPLY_ALL:_react2.default.createElement("path",{d:"M2.044 9.406l5.86-5.045c.324-.32.324-.838 0-1.16-.326-.32-.854-.32-1.18 0L.245 8.78c-.325.32-.325.84 0 1.16l6.507 6.42c.326.32.854.32 1.18 0 .325-.32.325-.84 0-1.16L2.043 9.407zM12.725 6.617V3.89c0-1.06-1.123-1.108-1.576-.694L4.804 9.14c-.348.32-.345.83.014 1.145l6.388 6.1c.63.525 1.526.162 1.526-.562l-.01-2.85c3.417 0 5.686 3.154 5.708 3.2.22.314.47.432.704.432.463 0 .864-.463.864-.772 0-7.27-4.44-9.216-7.275-9.216z"}),RESTORE_TO_INBOX:_react2.default.createElement("path",{d:"M18 4.174V3.78c0-.414-.325-.75-.727-.75H2.727c-.402 0-.727.336-.727.75v.394l8 3.782 8-3.782zM8.267 13.468l6.194-4.955c.403-.3 1.058-.073 1.058.528v1.968H18V5.824L10 9.53 2 5.826v8.456c0 .416.325.75.728.75h6.17l-.63-.506c-.39-.292-.31-.823 0-1.056zM19.678 12.51h-5.64v-.984c0-.3-.328-.414-.53-.264l-3.095 2.476c-.154.116-.194.382 0 .528l3.096 2.487c.218.164.527.004.527-.264v-.997h5.64c.183 0 .327-.16.327-.34v-2.306c0-.182-.144-.338-.326-.338z"}),RICHTEXT_OFF:_react2.default.createElement("path",{d:"M13 3H4c-.55 0-1 .45-1 1s.45 1 1 1h3.34l-1.868 8.792c-.115.538.232 1.07.77 1.186.538.114 1.072-.233 1.186-.77L9.385 5H13c.55 0 1-.45 1-1s-.45-1-1-1zm3.854 12.147c.195.195.195.513 0 .707s-.512.195-.707 0l-1.897-1.897-1.897 1.897c-.195.195-.513.195-.707 0-.195-.194-.195-.512 0-.707l1.897-1.897-1.897-1.897c-.195-.195-.195-.513 0-.707s.512-.195.707 0l1.897 1.897 1.897-1.897c.195-.195.513-.195.707 0s.195.512 0 .707l-1.897 1.897 1.897 1.897z"}),RICHTEXT_ON:_react2.default.createElement("path",{d:"M13 3H4c-.55 0-1 .45-1 1s.45 1 1 1h3.34l-1.868 8.792c-.115.538.232 1.07.77 1.186.538.114 1.072-.233 1.186-.77L9.385 5H13c.55 0 1-.45 1-1s-.45-1-1-1zm5 9.5c0 .275-.225.5-.5.5H15v2.5c0 .275-.225.5-.5.5s-.5-.225-.5-.5V13h-2.5c-.275 0-.5-.225-.5-.5s.225-.5.5-.5H14V9.5c0-.275.225-.5.5-.5s.5.225.5.5V12h2.5c.275 0 .5.225.5.5z"}),SEARCH:_react2.default.createElement("path",{d:"M17.5 16.5l-4.8-4.8c.8-1 1.3-2.3 1.3-3.7 0-3.3-2.7-6-6-6S2 4.7 2 8s2.7 6 6 6c1.4 0 2.7-.5 3.7-1.3l4.8 4.8c.1.1.3.2.5.2s.4-.1.5-.2c.3-.3.3-.7 0-1zm-9.5-4c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"}),SEARCH_MAIL:_react2.default.createElement("path",{d:"M17.81 16.47l-1.59-1.59c.31-.48.49-1.04.49-1.65 0-1.68-1.37-3.04-3.05-3.04-1.68 0-3.03 1.36-3.03 3.04s1.36 3.04 3.04 3.04c.61 0 1.18-.18 1.65-.49l1.59 1.59c.25.25.65.25.9 0 .25-.24.25-.65 0-.9zM13.68 15c-.97 0-1.76-.79-1.76-1.76s.79-1.76 1.76-1.76 1.76.79 1.76 1.76S14.65 15 13.68 15zM16 4.5V4c0-.6-.37-1-.99-1h-12C2.41 3 2 3.41 2 4v.5S8.99 7 9 7l7-2.5zM13.67 8.95c.86 0 1.66.26 2.33.7V6L9 8.5C8.99 8.5 2 6 2 6c-.01-.01 0 6.75 0 6.75 0 .6.39 1.25 1 1.25h6.46c-.04-.25-.08-.5-.08-.76.01-2.37 1.92-4.29 4.29-4.29z"}),SEARCH_MINI:_react2.default.createElement("path",{d:"M15.26 14.108l-2.467-2.466c.513-.737.818-1.63.818-2.596 0-2.515-2.04-4.555-4.555-4.555C6.54 4.49 4.5 6.53 4.5 9.047s2.04 4.556 4.555 4.556c.957 0 1.843-.298 2.576-.802l2.47 2.468c.16.16.37.24.58.24s.42-.08.58-.24c.32-.32.32-.84 0-1.16zm-6.205-2c-1.69 0-3.06-1.37-3.06-3.062 0-1.69 1.37-3.06 3.06-3.06s3.062 1.37 3.062 3.06-1.372 3.062-3.062 3.062z"}),SEARCH_WEB:_react2.default.createElement("path",{d:"M9.3 16.44c-.95-.46-1.74-1.83-2.14-3.66h1.48c.05-.49.19-.96.38-1.39H6.94c-.05-.45-.07-.91-.07-1.39s.03-.94.07-1.39H9.3v2.25c.36-.58.83-1.08 1.39-1.45v-.8h5.77c.09.44.14.89.15 1.36v.51c0 .38.31.7.7.7.38 0 .7-.31.7-.7v-.51c-.02-4.58-3.88-8.25-8.53-7.95-3.92.25-7.12 3.38-7.45 7.28-.38 4.5 2.95 8.3 7.27 8.67.08.01.2.01.32.02.24.01.46-.11.59-.31.2-.33.08-.77-.28-.93l-.63-.31zm6.69-9.22h-1.76c-.24-1.18-.64-2.22-1.14-3.06 1.27.67 2.29 1.75 2.9 3.06zM10.7 3.56c.95.46 1.74 1.83 2.14 3.66H10.7V3.56zm-1.4 0v3.66H7.16c.41-1.83 1.19-3.21 2.14-3.66zm-2.39.6c-.51.84-.9 1.88-1.14 3.06H4.01c.61-1.31 1.63-2.39 2.9-3.06zM3.39 10c0-.48.05-.94.15-1.39h2.01c-.04.45-.07.91-.07 1.39 0 .48.03.94.07 1.39H3.54c-.1-.45-.15-.91-.15-1.39zm.62 2.78h1.76c.24 1.17.63 2.22 1.14 3.06-1.27-.67-2.29-1.75-2.9-3.06zM17 16.47l-1.59-1.59c.31-.48.49-1.04.49-1.65 0-1.68-1.37-3.04-3.05-3.04-1.68 0-3.03 1.36-3.03 3.04s1.36 3.04 3.04 3.04c.61 0 1.18-.18 1.65-.49l1.59 1.59c.25.25.65.25.9 0 .24-.25.24-.65 0-.9m-4.14-1.48c-.97 0-1.76-.79-1.76-1.76s.79-1.76 1.76-1.76 1.76.79 1.76 1.76-.79 1.76-1.76 1.76"}),SELECTED:_react2.default.createElement("path",{d:"M10.83 16.338c-.49.385-1.184.385-1.676 0L0 9.4v9.585C0 19.585.43 20 1.077 20h17.846c.63 0 1.077-.415 1.077-1.015v-9.6l-9.17 6.953zM.37 8.985l9.168 6.8c.246.185.585.185.83 0l9.263-6.8c.186-.138.186-.415 0-.554L10.71.23c-.415-.307-1-.307-1.415 0L.37 8.43c-.185.14-.185.416 0 .555z"}),SENT:_react2.default.createElement("path",{d:"M17.6 9.3L3 2.8c-.5-.2-1.1.2-1 .7l1.4 5L9.2 10l-5.8 1.5L2 16.3c-.2.6.4 1.1 1 .9l14.5-6.5c.6-.3.6-1.1.1-1.4z"}),SETTINGS:_react2.default.createElement("path",{d:"M10.025 13.157c-1.747 0-3.167-1.416-3.167-3.157s1.42-3.157 3.167-3.157c1.746 0 3.167 1.416 3.168 3.157 0 1.74-1.422 3.157-3.168 3.157m8.66-4.62c-.023-.005-.084-.02-1.344-.22l-1.018-.17c-.03-.004-.056-.026-.065-.056l-.005-.018-.008-.018-.038-.093c-.09-.215-.302-.732-.405-.973l-.006-.016-.01-.015c-.013-.027-.012-.06.007-.086l1.374-1.91c.132-.182.12-.43-.032-.603-.027-.028-.505-.505-1.43-1.425-.09-.09-.21-.14-.34-.14-.1 0-.196.03-.278.09l-1.92 1.37c-.012.01-.03.015-.048.015-.023-.003-.03-.005-.037-.01l-.02-.008-.018-.01-1.065-.44c-.088-.036-.092-.057-.095-.078l-.384-2.32c-.036-.234-.28-.402-.476-.402H9.027c-.24 0-.44.172-.477.408l-.38 2.307c-.004.01-.015.036-.045.063-.14.065-.794.33-1.08.447l-.036.015-.022.008-.02.01c-.01.006-.023.01-.036.01-.01 0-.03-.003-.046-.016l-.1-.072C4.98 2.888 4.957 2.874 4.935 2.862c-.07-.042-.154-.064-.24-.064-.06 0-.215.012-.335.123l.002.002c-.046.043-.17.166-.58.573l-.846.844-.01.01-.012.012c-.136.16-.158.372-.055.557v-.003c.082.14.354.515 1.4 1.955.017.023.02.057.005.084l-.01.016-.006.017-.043.097c-.134.317-.254.6-.404.974l-.006.016-.005.015c-.01.03-.035.054-.066.06L1.4 8.53c-.232.036-.403.237-.403.476v1.988c0 .237.177.44.412.476l2.316.38c.03.006.057.03.066.058l.004.014.005.014c.17.43.293.74.453 1.086l.005.01.005.01c.015.028.012.063-.007.09l-1.373 1.907-.077.167c-.038.16.007.335.13.456l.09.087 1.32 1.316c.09.09.21.14.34.14.103 0 .202-.03.285-.092l1.89-1.35c.03-.015.052-.023.066-.023.01 0 .036.003.086.02l.05.022c.373.16.642.276 1.02.42l.013.006.013.004c.03.01.052.035.058.065l.384 2.318c.028.21.252.405.478.405h1.994c.24 0 .44-.172.477-.408l.378-2.286c.02-.06.047-.094.214-.153.353-.14.62-.246.962-.4.03-.01.056-.015.07-.015.007 0 .022 0 .053.018l1.902 1.358.015.012.02.01c.076.047.162.07.25.07.114 0 .223-.04.314-.117l.012-.012.012-.012.705-.703c.56-.563.703-.708.753-.77.055-.074.13-.22.07-.413-.004-.017-.01-.034-.02-.055l-.01-.025H17.2c-.057-.108-.198-.3-.547-.773l-.86-1.197c-.018-.026-.02-.06-.006-.087l.01-.017.006-.018.434-1.047c.047-.085.066-.1.108-.113 2.255-.362 2.333-.387 2.367-.397l.012-.004.012-.005c.208-.078.317-.285.317-.448V9.006c.002-.22-.146-.41-.37-.468"}),SHARE:_react2.default.createElement("path",{d:"M16.756 14.043c-.414 0-.75.335-.75.75v1.252h-12v-1.252c0-.415-.336-.75-.75-.75s-.75.335-.75.75v2.002c0 .413.336.735.75.735h13.74c.413 0 .51-.322.51-.735v-2.002c0-.415-.336-.75-.75-.75zM18.77 7.482c.303-.25.307-.715.01-.972l-5.726-4.957c-.413-.356-1.052-.062-1.052.484v1.99c-3.78 0-6.653 3.35-7 8.835-.045.706.93.873 1.22.216.132-.51 1.623-3.462 5.78-3.462v2.158c0 .546.64.84 1.054.484l5.714-4.776z"}),SPAM:_react2.default.createElement("path",{d:"M17.802 5.03c-1.456-.103-4.34-.673-7.3-3.337-.285-.257-.72-.257-1.004 0-2.96 2.664-5.845 3.234-7.3 3.336-.406.027-.715.374-.697.78.397 9.186 6.93 12.14 8.236 12.64.086.034.177.05.268.05.088 0 .175-.015.26-.046 1.306-.484 7.84-3.363 8.235-12.645.016-.407-.292-.753-.698-.78zm-4.897 6.94c.293.293.293.768 0 1.06-.146.147-.338.22-.53.22s-.384-.073-.53-.22L10 11.187 8.155 13.03c-.146.147-.338.22-.53.22s-.384-.073-.53-.22c-.293-.292-.293-.767 0-1.06l1.844-1.845L7.093 8.28c-.293-.292-.293-.767 0-1.06s.768-.293 1.06 0L10 9.065l1.844-1.845c.293-.293.768-.293 1.06 0s.294.768 0 1.06l-1.844 1.845 1.845 1.845z"}),SPONSORED:_react2.default.createElement("path",{d:"M5.4 4.3c-.3-.3-.7-.3-1 0s-.3.7 0 1l.5.5c.3.3.7.3 1 0s.3-.7 0-1l-.5-.5zm-.5 9.8l-.5.5c-.3.3-.3.7 0 1s.7.3 1 0l.5-.5c.3-.3.3-.7 0-1s-.8-.3-1 0zm10.2 0c-.3-.3-.7-.3-1 0s-.3.7 0 1l.5.5c.3.3.7.3 1 0s.3-.7 0-1l-.5-.5zm0-8.2l.5-.5c.3-.3.3-.7 0-1s-.7-.3-1 0l-.5.5c-.3.3-.3.7 0 1 .3.3.8.3 1 0zm2.2 3.4h-.7c-.4 0-.7.3-.7.7s.3.7.7.7h.7c.4 0 .7-.3.7-.7s-.3-.7-.7-.7zM8.5 7.8h3.6c.4 0 .7-.3.7-.7s-.3-.7-.7-.7h-1.5c0-.4-.3-.7-.7-.7s-.6.3-.6.7H8.2c-1 0-1.8.8-1.8 1.8v.7c0 1 .8 1.8 1.8 1.8h2.5c.4 0 .7.3.7.7s-.3.7-.7.7H7.1c-.4 0-.7.3-.7.7s.3.7.7.7h2.2c0 .4.3.7.7.7s.7-.3.7-.7h.4c1 0 1.8-.8 1.8-1.8V11c0-1-1-1.8-2.2-1.8H8.5c-.4 0-.7-.3-.7-.7s.3-.7.7-.7zM10 4.2c.4 0 .7-.3.7-.7v-.8c0-.4-.3-.7-.7-.7s-.7.3-.7.7v.7c0 .5.3.8.7.8zM3.5 9.3h-.8c-.4 0-.7.3-.7.7s.3.7.7.7h.7c.4 0 .7-.3.7-.7s-.2-.7-.6-.7zm6.5 6.5c-.4 0-.7.3-.7.7v.7c0 .4.3.7.7.7s.7-.3.7-.7v-.7c0-.4-.3-.7-.7-.7z"}),STAR:_react2.default.createElement("path",{d:"M15.718 8.35c-.066-.205-.256-.35-.47-.35h-3.656l-1.13-3.475c-.066-.203-.256-.34-.47-.34s-.403.137-.47.34L8.393 8H4.736c-.214 0-.403.145-.47.35-.066.203.007.426.18.552l2.958 2.152-1.13 3.482c-.066.204.006.427.18.553.173.125.407.125.58 0l2.958-2.153 2.958 2.152c.087.062.19.094.29.094s.205-.032.29-.095c.174-.127.247-.35.18-.554l-1.13-3.482 2.96-2.152c.172-.126.244-.35.178-.553z"}),STATIONERY:_react2.default.createElement("path",{d:"M17.007 3H16V.78c0-.562-.43-.922-.96-.78L2 3v14c0 .548.45 1 1 1h14.007c.548 0 .993-.45.993-1V4c0-.548-.445-1-.993-1zM14.5 1.5V3H8l6.5-1.5zm2 15h-13v-12h13v12zM10 14.5l3.397-3.426c.804-.814.804-2.14 0-2.954-.395-.4-.922-.62-1.482-.62-.594 0-1.112.154-1.915 1.058C9.187 7.643 8.67 7.5 8.086 7.5c-.56 0-1.087.22-1.482.62-.805.814-.805 2.14 0 2.955L10 14.5z"}),TAB_IMAGES:_react2.default.createElement("path",{d:"M3.46 14.636l3.633-5.814 1.38 2.206-1.26 1.824c-.226.33-.11.76.26.96.334.18.75.104.996-.15l3.71-5.568 4.36 6.54H3.46v.002zM17.272 3H2.728C2.326 3 2 3.326 2 3.727v12.356c0 .4.326.726.728.726h14.546c.4 0 .727-.326.727-.727V3.727c0-.4-.326-.727-.727-.727z"}),TEXT:_react2.default.createElement("path",{d:"M11.1 17c.5 0 .7-.2.8-.6l1.1-2.8h4.2l1.1 2.8c.2.5.6.6 1.1.5.4-.1.6-.7.4-1L16 6.1c-.2-.3-.5-.6-.9-.6s-.7.3-.9.6l-3.1 8L7 3.7c-.2-.4-.5-.7-1-.7-.6 0-.9.4-1.1.8l-4.7 12s-.3.8.4 1.1c.4.2.9 0 1.1-.5L3 12.9h5.9l1.4 3.5s.2.6.8.6zm-7.6-5.4L6 5.2l2.5 6.4h-5zm10 .8L15.2 8l1.7 4.4h-3.4z"}),TEXT_COLOR:_react2.default.createElement("g",null,_react2.default.createElement("circle",{fill:"#30D3B6",cx:"5.5",cy:"14",r:"4"}),_react2.default.createElement("circle",{fill:"#FFD333",cx:"9.5",cy:"6",r:"4"}),_react2.default.createElement("circle",{fill:"#FF333A",cx:"14.5",cy:"14",r:"4"}),_react2.default.createElement("path",{d:"M15.9 4"})),TUMBLR:_react2.default.createElement("path",{d:"M11.84 17.95h-.12c-3.76 0-4.58-2.77-4.58-4.38V9.08H5.65c-.17 0-.31-.14-.31-.31V6.65c0-.22.14-.42.35-.5 1.93-.68 2.54-2.37 2.63-3.65.02-.33.2-.5.5-.5h2.21c.17 0 .31.14.31.31V5.9h2.59c.17 0 .31.14.31.31v2.54c0 .17-.14.31-.31.31h-2.6v4.15c0 1.04.69 1.33 1.11 1.33.41-.01.81-.13 1.01-.21.15-.06.28-.1.4-.07.11.03.18.1.23.25l.69 2c.06.16.1.33-.01.46-.55.57-1.8.96-2.92.98z"}),TWITTER:_react2.default.createElement("path",{fill:"#5faadb",d:"M18 4.5c-.6.3-1.2.4-1.9.5.7-.4 1.2-1 1.4-1.8-.6.4-1.3.6-2.1.8-.6-.6-1.5-1-2.4-1-1.8 0-3.3 1.5-3.3 3.3 0 .3 0 .5.1.7-2.7-.1-5.1-1.4-6.7-3.4-.3.5-.4 1-.4 1.6 0 1.1.6 2.1 1.5 2.7-.5 0-1-.2-1.5-.4 0 1.6 1.1 2.9 2.6 3.2-.3.1-.6.1-.9.1-.2 0-.4 0-.6-.1.4 1.3 1.6 2.2 3.1 2.3-1.1.9-2.5 1.4-4.1 1.4H2c1.5 1 3.2 1.6 5 1.6 6 0 9.3-5 9.3-9.3v-.4c.7-.5 1.3-1.1 1.7-1.8z"}),UNLOCK:_react2.default.createElement("path",{d:"M12.5 9.8c-.4 0-.7.3-.7.7v2.7c0 .4.3.7.7.7s.7-.3.7-.7v-2.7c0-.4-.3-.7-.7-.7zm-5 7.3c-.4 0-.7-.3-.7-.7V7.1c0-.4.3-.7.7-.7h10c.4 0 .7.3.7.7v9.3c0 .4-.3.7-.7.7h-10zM9.2 6.5s-.1-2.7-2.7-2.7-2.7 2.7-2.7 2.7H2.5v-.2c.1-.8.7-3.8 4-3.8 3.8 0 4 4 4 4H9.2z"}),YBADGE:_react2.default.createElement("g",null,_react2.default.createElement("path",{d:"M16 3H4c-.5 0-1 .5-1 1v12c0 .6.5 1 1 1h12c.6 0 1-.5 1-1V4c0-.5-.5-1-1-1z",fill:"#400090"}),_react2.default.createElement("path",{d:"M10.7 15.1H10c-.3 0-.5 0-.7.1v-.1c0-.3.1-4.3.1-4.3-.2-.4-3.5-5.9-3.5-5.9.2.1.5.1.7.1.3 0 .5-.1.7-.1.5.7 2.6 4.2 2.7 4.4.1-.1 2.2-3.7 2.6-4.4.2.1.5.1.7.1.3 0 .5 0 .7-.1 0 0-3.3 5.6-3.5 5.9.1 0 .2 4 .2 4.3z",fill:"#fff"}))},FujiIcon=_react2.default.createClass({displayName:"FujiIcon",getDefaultProps:function(){return{colorState:Constants.ColorStates.NORMAL,size:Constants.Sizes.S}},shouldComponentUpdate:function(c){return c.ariaLabel!==this.props.ariaLabel||c.colorState!==this.props.colorState||c.size!==this.props.size||c.rotate!==this.props.rotate||c.kind!==this.props.kind},render:function(){var c=this.props,e=c.colorState,t=c.size,l=c.rotate,a=c.allowPointerEvents,h=c.ariaLabel,r=c.kind,s=_objectWithoutProperties(c,["colorState","size","rotate","allowPointerEvents","ariaLabel","kind"]),z=(0,_css2.default)(_fuji_icon2.default,{colorState:e,size:t,rotate:l,allowPointerEvents:a});return _react2.default.createElement("svg",_extends({"aria-label":h,viewBox:"0 0 20 20",className:z.icon},s),_svgSections[r])}});exports.default=FujiIcon;var _svg=exports._svg=_svgSections;
},{"./constants/fuji_icon":"./atoms/constants/fuji_icon","./styles/fuji_icon":"./atoms/styles/fuji_icon","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./atoms/fuji_icon_button":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function FujiIconButton(e){var t=(0,_css2.default)(_fuji_icon_button2.default,{size:e.size,paddingLess:e.paddingLess,isOnDarkBackground:e.isOnDarkBackground}),a={},u={"data-test-id":e["data-test-id"]||"icon-btn-"+e.kind.toLowerCase(),"data-iskeynav":e["data-iskeynav"],className:t.button};return Object.keys(e).forEach(function(t){/^(kind|colorState|size|rotate)$/.test(t)?a[t]=e[t]:/^(?:(?:disabled|paddingLess|title)$|data-|aria-|on)/.test(t)?u[t]=e[t]:"className"===t&&(u[t]=(0,_merge2.default)(u.className,e[t]))}),_react2.default.createElement(_button2.default,u,_react2.default.createElement("span",{className:t.content},_react2.default.createElement(_fuji_icon2.default,a),e.children?_react2.default.createElement("span",{className:t.label},e.children):null))}exports.__esModule=!0,exports.default=FujiIconButton;var _react=require("react"),_react2=_interopRequireDefault(_react),_fuji_icon=require("./fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_button=require("./button.jsx"),_button2=_interopRequireDefault(_button),_fuji_icon_button=require("./styles/fuji_icon_button"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_merge=require("react-atomic-css/merge"),_merge2=_interopRequireDefault(_merge);FujiIconButton.defaultProps={isOnDarkBackground:!1},module.exports=exports.default;
},{"./button.jsx":"./atoms/button","./fuji_icon.jsx":"./atoms/fuji_icon","./styles/fuji_icon_button":"./atoms/styles/fuji_icon_button","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-atomic-css/merge":"./node_modules/react-atomic-css/merge.js"}],"./atoms/highlighter":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_string=require("../platform/utils/string"),Highlighter=function(e){var t=e.haystack,r=e.needle,a=e.formatter,s=e.containerClassNames,l=(0,_string.segmentText)(t,r),n=l[0],u=l[1],i=l[2];return u?_react2.default.createElement("span",{className:s},n,a(u),i):_react2.default.createElement("span",{className:s},t)};Highlighter.defaultProps={formatter:function(e){return e},haystack:"",needle:""},exports.default=Highlighter,module.exports=exports.default;
},{"../platform/utils/string":"./platform/utils/string","react":"./node_modules/react/react.js"}],"./atoms/hover_colored_fuji_icon":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_fuji_icon=require("./fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("./constants/fuji_icon"),_object=require("../platform/utils/object"),HoverColoredFujiIcon=_react2.default.createClass({displayName:"HoverColoredFujiIcon",getInitialState:function(){return{hovered:!1}},handleHover:function(e){this.setState({hovered:e})},render:function(){var e=this,t=this.props,r=t.colorStates,o=_objectWithoutProperties(t,["colorStates"]),n=this.state.hovered?r.hovered:r.normal;return _react2.default.createElement(_fuji_icon2.default,_extends({},o,{onMouseEnter:function(){return e.handleHover(!0)},onMouseLeave:function(){return e.handleHover(!1)},colorState:n,allowPointerEvents:!0}))}});exports.default=HoverColoredFujiIcon,module.exports=exports.default;
},{"../platform/utils/object":"./platform/utils/object","./constants/fuji_icon":"./atoms/constants/fuji_icon","./fuji_icon.jsx":"./atoms/fuji_icon","react":"./node_modules/react/react.js"}],"./atoms/hover_colored_fuji_icon_button":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_fuji_icon_button=require("./fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_fuji_icon=require("./constants/fuji_icon"),_object=require("../platform/utils/object"),_merge=require("react-atomic-css/merge"),_merge2=_interopRequireDefault(_merge),_hover_fuji_icon_button=require("./styles/hover_fuji_icon_button.js"),_hover_fuji_icon_button2=_interopRequireDefault(_hover_fuji_icon_button),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),classNames=(0,_css2.default)(_hover_fuji_icon_button2.default),HoverColoredFujiIconButton=_react2.default.createClass({displayName:"HoverColoredFujiIconButton",getInitialState:function(){return{hovered:!1}},handleHover:function(e){this.setState({hovered:e})},render:function(){var e=this.props,t=e.colorStates,r=_objectWithoutProperties(e,["colorStates"]),o=!this.props.disabled&&this.state.hovered?t.hovered:t.normal;return _react2.default.createElement(_fuji_icon_button2.default,_extends({},r,{className:(0,_merge2.default)(this.props.className||"",classNames.button),onMouseOver:this.handleHover.bind(this,!0),onMouseOut:this.handleHover.bind(this,!1),colorState:o}))}});exports.default=HoverColoredFujiIconButton,module.exports=exports.default;
},{"../platform/utils/object":"./platform/utils/object","./constants/fuji_icon":"./atoms/constants/fuji_icon","./fuji_icon_button.jsx":"./atoms/fuji_icon_button","./styles/hover_fuji_icon_button.js":"./atoms/styles/hover_fuji_icon_button","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-atomic-css/merge":"./node_modules/react-atomic-css/merge.js"}],"./atoms/html5uploader":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _react=require("react"),_react2=_interopRequireDefault(_react),Html5Uploader=_react2.default.createClass({displayName:"Html5Uploader",render:function(){return _react2.default.createElement("input",{role:"button",className:this.props.className,type:"file",ref:"input",value:"","aria-label":this.props.ariaLabel,multiple:this.props.multiple,onChange:this.props.onChange})}});module.exports=Html5Uploader;
},{"react":"./node_modules/react/react.js"}],"./atoms/infinite_scroll":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function isInputField(t){return t&&(["INPUT","SELECT","TEXTAREA"].indexOf(t.tagName)>=0||"true"===t.getAttribute("contentEditable"))}function _getTransformStyle(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s="translate3d("+t+"px, "+e+"px, "+i+"px)";return{transform:s}}function _isCursorInBound(t,e){var i=t.cursorIndex,s=t.size,n=t.bufferSize,o=e.start,r=e.end;return o=0===o?o:o+n,r=r===s-1?r:r-n-1,o<i&&i<r}exports.__esModule=!0,exports.InfiniteScroll=void 0,exports.isInputField=isInputField;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_infinite_scroll=require("./styles/infinite_scroll"),_infinite_scroll2=_interopRequireDefault(_infinite_scroll),_mail_constants=require("../platform/mail_constants"),_mail_ui_vars=require("../platform/utils/mail_ui_vars"),_reactIntl=require("react-intl"),_fuji_icon_button=require("./fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_fuji_icon=require("./constants/fuji_icon"),Types={SECTION:"SECTION",ROW:"ROW"},strings=(0,_reactIntl.defineMessages)({infinite_scroll_messages:{id:"infinite_scroll.messages",defaultMessage:"Messages"},infinite_scroll_scroll_to_top:{id:"infinite_scroll.scroll_to_top_button_title",defaultMessage:"Go to top"}}),InfiniteScroll=exports.InfiniteScroll=_react2.default.createClass({displayName:"InfiniteScroll",contextTypes:{getCss:_react.PropTypes.func,intl:_reactIntl.intlShape.isRequired,getTheme:_react.PropTypes.func,getThemeMode:_react.PropTypes.func},getDefaultProps:function(){return{contentInsetTop:0,initialRenderCount:15,bufferSize:1,isSectionHeader:function(){return!1},initialIndexForTab:0,cursorIndex:-1,hasMoreItems:!1,loadThreshold:10,selectFirstItem:function(){return null},onScrollTopChange:function(){},onScroll:function(){},layoutKey:"@DEFAULT"}},getInitialState:function(){return Object.assign(this._getMeta(this.props),{loading:!1,pinnedSectionIndex:0})},_getMeta:function(t){for(var e=t.size,i=t.getHeightForIndex,s=t.isSectionHeader,n=t.hasMoreItems,o=t.contentInsetTop,r=e+(n?1:0),a=Array(r+1),l=o,c=[],d=0;d<e+(n?1:0);d++){a[d]=l;var h=s(d);0===d&&h||(l+=i(d)),h&&c.push(d)}return a[r]=l,{sectionIndices:c,positions:a,containerHeight:l}},componentWillReceiveProps:function(t){var e=this,i={};this.props.layoutKey!==t.layoutKey&&(this._maxSpread=0,this._rectBox=(0,_reactDom.findDOMNode)(this).getBoundingClientRect()),Object.assign(i,this._getMeta(t)),Object.assign(i,this._getItemsFitToView(t,i,this._lastScrollTop)),i.pinnedSectionIndex=this._getPinnedSectionIndex(i.sectionIndices),i.loading=this.state.loading&&this.props.size===t.size&&Array.apply(null,{length:this.props.size}).every(function(i,s){return e.props.getIdForIndex(s)===t.getIdForIndex(s)}),this.setState(i)},componentWillMount:function(){var t=0,e=this.props,i=e.cursorIndex,s=e.initialScrollTop,n=e.initialRenderCount,o=e.size;this._maxSpread=0,this._rectBox={height:0,top:0},this._lastScrollTop=0,s>0?(this._lastScrollTop=s,t=this._getStartItemForScrollTop(this._lastScrollTop)):i>n&&(t=Math.max(i-(Math.ceil(n/2)-1),0),this._lastScrollTop=this.state.positions[t]),this.setState({start:t,end:Math.min(t+n,o)})},_getStartItemForScrollTop:function(t){for(var e=this.props,i=this._getMeta(e),s=i.positions,n=0,o=0;o<e.size;o++)if(s[o]>t){n=o-1;break}return n},_getItemsFitToView:function(t,e,i){for(var s=t.bufferSize,n=t.size,o=e.positions,r=this._rectBox.height,a=0,l=n,c=0;c<n;c++)if(o[c]>i){a=c-1;break}for(var d=a;d<n;d++){var h=o[Math.min(d+1,n-1)];if(h>=i+r){l=d+1;break}}return a=Math.max(a-s,0),l=Math.min(l+s,n),this._maxSpread<l-a&&(this._maxSpread=l-a),l=a+this._maxSpread,{start:a,end:l}},_scrollToFitCursor:function(){var t=this.state.positions;this.scroller.scrollTop=Math.max(t[this.props.cursorIndex]-this._rectBox.height/2,1)},_handleResize:function(){this._maxSpread=0,this._onBoundingRectChange()},_onBoundingRectChange:function(){var t=this._rectBox.height;if(this._rectBox=(0,_reactDom.findDOMNode)(this).getBoundingClientRect(),this._rectBox.height!==t){var e=this._getItemsFitToView(this.props,this.state,this._lastScrollTop);this.setState(e,this._loadMoreIfNeeded)}else this._loadMoreIfNeeded()},_loadMoreIfNeeded:function(){var t=this.state.positions[this.props.size];t<this._lastScrollTop+this._rectBox.height&&this._loadMore()},componentDidMount:function(){var t=this,e=this.props,i=e.cursorIndex,s=e.initialRenderCount,n=e.initialScrollTop;if(this.scroller=(0,_reactDom.findDOMNode)(this.refs.fixedHeight),this._onBoundingRectChange(),n>0)this.scroller.scrollTop=n;else if(i>s)this._scrollToFitCursor();else{var o=this._getItemsFitToView(this.props,this.state,this._lastScrollTop);this.state.start===o.start&&this.state.end===o.end||this.setState(o,function(){t._styleItems(),t._loadMore()})}setTimeout(function(){return t.focusItem(t.props.cursorIndex)}),this.refs.fixedHeight.style.height=this._rectBox.height-this._getPinnedSectionHeight()+"px",window.addEventListener("resize",this._handleResize),this.scroller.addEventListener("scroll",this._handleScroll)},componentWillUnmount:function(){window.removeEventListener("resize",this._handleResize),this.scroller.removeEventListener("scroll",this._handleScroll)},componentDidUpdate:function(t,e){var i=this,s=this.props,n=this.state.positions;if(this.refs.fixedHeight.style.height=this._rectBox.height-this._getPinnedSectionHeight()+"px",this._loadMoreIfNeeded(),s.cursorIndex!==t.cursorIndex&&s.cursorIndex>=0){var o=s.getHeightForIndex(s.cursorIndex);if(this._lastScrollTop>n[s.cursorIndex]){var r=this.state.sectionIndices.slice(0).reverse().find(function(t){return t<s.cursorIndex});this.scroller.scrollTop=n[s.cursorIndex]-(isNaN(r)?0:s.getHeightForIndex(r))}else this._lastScrollTop+this._rectBox.height<n[s.cursorIndex]+o&&(this.scroller.scrollTop=n[s.cursorIndex]-this._rectBox.height+o+s.contentInsetTop)}if(!document.activeElement||document.activeElement===document.body||!isInputField(document.activeElement)&&document.activeElement.tabIndex!==_mail_ui_vars.TabIndices.MESSAGE_LIST_MAIN){var a=_isCursorInBound(t,e),l=_isCursorInBound(this.props,this.state);(!a&&l||l&&s.cursorIndex!==t.cursorIndex||s.getIdForIndex(s.cursorIndex)!==t.getIdForIndex(t.cursorIndex))&&(clearTimeout(this.scheduledFocusTimeout),this.focusItem(s.cursorIndex)||(this.scheduledFocusTimeout=setTimeout(function(){return i.focusItem(s.cursorIndex)},30)))}},focusItem:function(t){if(!this.refs.content||!this.refs.content.children)return!1;var e=this.refs.content.children[t-this.state.start];return!!e&&(e.children[0].focus(),e.children[0].setAttribute("tabindex",this.props.groupTabIndex),!0)},_handleFocusPass:function(t){var e=this;t.preventDefault();var i=void 0;this.props.cursorIndex<0?(this.scroller.scrollTop=0,i=this.props.initialIndexForTab,this.props.selectFirstItem()):(this._scrollToFitCursor(),i=this.props.cursorIndex,window.requestAnimationFrame(function(){return e.focusItem(i)}))},_handleScroll:function(t){var e=this;t.stopPropagation(),this.animationRequested||(this._lastScrollTop=this.scroller.scrollTop,this.animationRequested=!0,this.props.onScroll(),window.requestAnimationFrame(function(){e.animationRequested=!1;var t=e._getItemsFitToView(e.props,e.state,e._lastScrollTop);t.pinnedSectionIndex=e._getPinnedSectionIndex(e.state.sectionIndices),e.state.start===t.start&&e.state.end===t.end&&e.state.pinnedSectionIndex===t.pinnedSectionIndex||e.setState(t,e._loadMore),e._styleItems(),e.props.onScrollTopChange(e._lastScrollTop)}))},_getPinnedSectionIndex:function(t){var e=this._getSectionIndexStatus(t);return e?e.findIndex(function(t){return t===_mail_constants.SectionUIMode.PINNED}):0},_styleItems:function(){var t=this,e=this.state,i=e.sectionIndices,s=e.start,n=this._stylesForSections(i);this.refs.content&&Array.prototype.forEach.call(this.refs.content.children,function(e,i){var n=i+s,o=t._translateForIndex(n);Object.assign(e.style,o)}),this.refs.header&&Array.prototype.forEach.call(this.refs.header.children,function(t,e){Object.assign(t.style,n[i[e]])})},_loadMore:function(){var t=this.props,e=t.size,i=t.hasMoreItems,s=t.loadThreshold,n=t.onLoadMore,o=this.state,r=o.end,a=o.loading;!n||a||!i||e-r>s||this.setState({loading:!0},n)},_translateForIndex:function(t){return _getTransformStyle(0,this.state.positions[t])},_getSectionIndexStatus:function(t){for(var e=0,i=t.length-1;i>=0;i--){var s=this.state.positions[t[i]];if(s<=this._lastScrollTop){e=i;break}}return t.map(function(t,i){return e===i?_mail_constants.SectionUIMode.PINNED:_mail_constants.SectionUIMode.FLOW})},_stylesForSections:function(t){var e=this._getSectionIndexStatus(t),i=this.state.positions,s={};return t.forEach(function(t,n){var o=void 0;switch(e[n]){case _mail_constants.SectionUIMode.FLOW:o=_getTransformStyle(0,i[t]);break;case _mail_constants.SectionUIMode.PINNED:o={display:"none"}}s[t]=Object.assign({boxShadow:"none",zIndex:1},o)}),s},renderRow:function(t,e,i){var s=i.type,n=i.translation,o=this.props,r=o.getElementForIndex,a=o.cursorIndex,l=o.initialIndexForTab,c=o.groupTabIndex,d=e===a||a<0&&l===e?c:-1;return _react2.default.createElement("li",{key:e,role:"rowgroup","data-test-id":"infinite-scroll-"+s,className:t.item,style:n},_react2.default.cloneElement(r(e),{tabIndex:d}))},_getPinnedSectionHeight:function(){var t=this.state,e=t.sectionIndices,i=t.pinnedSectionIndex,s=this.props.getHeightForIndex;return i>=0&&i<e.length?s(e[i]):0},_scrollPercent:function(){return this.scroller?Math.floor(100*(this.scroller.scrollTop/this.scroller.scrollHeight)):0},_scrolToTop:function(){this.scroller&&(this.scroller.scrollTop=0)},render:function(){for(var t,e=this,i=this.context.getTheme(),s=this.context.getCss(_infinite_scroll2.default,(t={},t["theme-"+i]=!0,t)),n=this.context.intl.formatMessage,o=this.props,r=o.LoadMoreClass,a=o.hasMoreItems,l=o.getElementForIndex,c=o.size,d=o.cursorIndex,h=o.groupTabIndex,u=o.isSectionHeader,_=o.getHeightForIndex,p=o.contentInsetTop,f=this.state,I=f.loading,m=f.start,g=f.end,x=f.sectionIndices,S=f.pinnedSectionIndex,T=[],v=0,y=null,M=null,F=this._stylesForSections(x),E=m;E<g;E++)E<c?T.push(this.renderRow(s,E,{type:u(E)?Types.SECTION:Types.ROW,translation:u(E)?F[E]:this._translateForIndex(E)})):T.push(null);var b=x.map(function(t){return e.renderRow(s,t,{type:Types.SECTION,translation:F[t]})});return S>-1&&x.length>0&&(v=_(x[S]),y=_react2.default.createElement("div",{className:s.stickyHeader,style:{height:v,borderBottomWidth:this._lastScrollTop>p?"1px":0},"data-test-id":"infinite-scroll-header"},l(x[S]))),this._scrollPercent()>5&&(M=_react2.default.createElement("div",{ref:"gototop",className:s.scrollToTop},_react2.default.createElement(_fuji_icon_button2.default,{title:n(strings.infinite_scroll_scroll_to_top),kind:_fuji_icon.Kinds.CHEVRON_UP,size:_fuji_icon.Sizes.M,colorState:_fuji_icon.ColorStates.INVERTED,paddingLess:!0,onClick:this._scrolToTop}))),_react2.default.createElement("div",{ref:"main","data-test-id":"infinite-scroll-container",className:s.main},y,_react2.default.createElement("div",{role:"navigation",className:s.scroll,"data-name":"scroll-area","data-test-id":"infinite-scroll-area",ref:"fixedHeight",style:{marginTop:v},"aria-label":n(strings.infinite_scroll_messages)},_react2.default.createElement("div",{"data-test-id":"infinite-scroll-focus-passer",className:s.focusStealer,tabIndex:m>d||g<d?h:-1,onFocus:this._handleFocusPass}),_react2.default.createElement("div",{className:s.container,"data-name":"infinite-scroll-content","data-test-id":"infinite-scroll-content",style:{height:this.state.containerHeight}},_react2.default.createElement("ul",{ref:"content",className:s.container,role:"grid","data-test-id":"infinite-scroll-rows","aria-readonly":"true"},T),_react2.default.createElement("ul",{ref:"header",className:s.container,"aria-hidden":!0},b),I&&a&&r&&_react2.default.createElement("div",{className:s.loading},r))),M)}});exports.default=InfiniteScroll;
},{"../platform/mail_constants":"./platform/mail_constants","../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","./constants/fuji_icon":"./atoms/constants/fuji_icon","./fuji_icon_button.jsx":"./atoms/fuji_icon_button","./styles/infinite_scroll":"./atoms/styles/infinite_scroll","react":"./node_modules/react/react.js","react-dom":"./node_modules/react-dom/index.js","react-intl":"./node_modules/react-intl/lib/index.js"}],72:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.INPUT_MODES=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_key_codes=require("./constants/key_codes"),INPUT_MODES=exports.INPUT_MODES={POINTER:"pointer-mode",KEYBOARD:"keyboard-mode"},InputModeDetector=_react2.default.createClass({displayName:"InputModeDetector",getInitialState:function(){return{inputMode:INPUT_MODES.POINTER}},handleKeyUp:function(e){switch(e.key){case"Tab":case"ArrowLeft":case"ArrowUp":case"ArrowRight":case"ArrowDown":this.handleKeyNav()}switch(e.which){case _key_codes.KEYCODE.PERIOD:case _key_codes.KEYCODE.COMMA:this.handleKeyNav();break;default:return}},lastMouseCoordinates:[],handleKeyNav:function(){this.setState({inputMode:INPUT_MODES.KEYBOARD})},handleMouseDown:function(){this.setState({inputMode:INPUT_MODES.POINTER})},handleMouseMove:function(e){this.lastMouseCoordinates[0]===e.screenX&&this.lastMouseCoordinates[1]===e.screenY||(this.lastMouseCoordinates=[e.screenX,e.screenY],this.setState({inputMode:INPUT_MODES.POINTER}))},render:function(){var e=this.props.className?" "+this.props.className:"",t=this.state.inputMode+e,s=this.state.inputMode===INPUT_MODES.KEYBOARD?{onMouseMove:this.handleMouseMove,onMouseDown:this.handleMouseDown}:{onKeyUp:this.handleKeyUp};return _react2.default.createElement("div",_extends({className:t},s),this.props.children)}});exports.default=InputModeDetector;
},{"./constants/key_codes":"./atoms/constants/key_codes","react":"./node_modules/react/react.js"}],"./atoms/keyboard_navigation_focus_group":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.KeyboardNavigationFocusGroup=exports.NAVIGATION_AXES=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactIntl=require("react-intl"),_key_codes=require("./constants/key_codes"),_object=require("../platform/utils/object"),strings=(0,_reactIntl.defineMessages)({focus_group_aria_label:{id:"focus_group_aria_label",defaultMessage:"Keyboard navigation group. Use arrow keys to navigate, or tab to the next group."}}),KEYNAV_ATTRIBUTE_NAME="data-iskeynav",KEYNAV_SELECTOR="["+KEYNAV_ATTRIBUTE_NAME+"]",NAVIGATION_AXES=exports.NAVIGATION_AXES=(0,_object.mirrorKeys)(["HORIZONTAL","VERTICAL"]),KeyboardNavigationFocusGroup=_react2.default.createClass({displayName:"KeyboardNavigationFocusGroup",contextTypes:{intl:_reactIntl.intlShape.isRequired},getDefaultProps:function(){return{axis:NAVIGATION_AXES.VERTICAL,circularNavigation:!0,groupTabIndex:0,skipKeydownOnFormElement:!0}},componentDidMount:function(){var e=(0,_reactDom.findDOMNode)(this),t=this.getNavigableElements();t.length&&!e.querySelector('[tabindex="'+this.props.groupTabIndex+'"]')&&(t[0].tabIndex=this.props.groupTabIndex)},handleClick:function(e){for(var t=this.getNavigableElements(),a=e.target;a!==e.currentTarget&&!a.getAttribute(KEYNAV_ATTRIBUTE_NAME);)a=a.parentElement;var o=t.indexOf(a);o>-1&&a.tabIndex===-1&&this.applyFocusTo(a)},handleKeyDown:function(e){if(!(e.target.isContentEditable||this.props.skipKeydownOnFormElement&&["INPUT","TEXTAREA","SELECT"].indexOf(e.target.tagName)!==-1)){switch(e.key){case"Escape":document.activeElement.blur()}if(this.props.axis===NAVIGATION_AXES.HORIZONTAL)switch(e.key){case"ArrowLeft":e.preventDefault(),e.stopPropagation(),e.metaKey?this.jumpToTop():this.navigate(-1);break;case"ArrowRight":e.preventDefault(),e.stopPropagation(),e.metaKey?this.jumpToEnd():this.navigate(1)}else switch(e.key){case"ArrowUp":e.preventDefault(),e.stopPropagation(),e.metaKey?this.jumpToTop():this.navigate(-1);break;case"ArrowDown":e.preventDefault(),e.stopPropagation(),e.metaKey?this.jumpToEnd():this.navigate(1)}switch(e.which){case _key_codes.KEYCODE.COMMA:case _key_codes.KEYCODE.FF_COMMA:e.preventDefault(),e.stopPropagation(),this.navigate(-1);break;case _key_codes.KEYCODE.PERIOD:e.preventDefault(),e.stopPropagation(),this.navigate(1);break;default:return}}},jumpToTop:function(){this.jump()},jumpToEnd:function(){this.jump(!0)},jump:function(e){var t=this.getNavigableElements(),a=void 0,o=0,r=1,i=t.length-1;for(e&&(o=i,r=-1,i=0),a=t[o];this.isNotFocusable(a)&&o!==i;)o+=r,a=t[o];this.applyFocusTo(a)},isNotFocusable:function(e){return!(e&&e.offsetHeight&&!e.disabled)},getNavigableElements:function(){var e=(0,_reactDom.findDOMNode)(this),t=Array.prototype.slice.call(e.querySelectorAll(KEYNAV_SELECTOR));return t},navigate:function(e){var t=this.getNavigableElements(),a=Math.min,o=Math.max,r=0,i=t.length-1,n=t.indexOf(document.activeElement),s=void 0,u=void 0;if(t.length){for(this.props.circularNavigation?(s=n+e,s>i?s=r:s<r&&(s=i)):s=a(o(n+e,0),i),u=t[s];u&&this.isNotFocusable(u);)s+=e,u=t[s];u&&this.applyFocusTo(u)}},resetTabIndex:function(){for(var e=(0,_reactDom.findDOMNode)(this),t=e.querySelectorAll('[tabindex="'+this.props.groupTabIndex+'"]'),a=0;a<t.length;++a)t[a].tabIndex=-1},applyFocusTo:function(e){this.resetTabIndex(),e.tabIndex=this.props.groupTabIndex,e.focus()},render:function(){var e=this.context.intl.formatMessage,t=Object.assign({},this.props);return delete t.axis,delete t.circularNavigation,delete t.groupTabIndex,delete t.skipKeydownOnFormElement,_react2.default.createElement("div",_extends({"data-test-id":"focus-group",onKeyDown:this.handleKeyDown,onClick:this.handleClick,"aria-label":e(strings.focus_group_aria_label)},t),this.props.children)}});exports.KeyboardNavigationFocusGroup=KeyboardNavigationFocusGroup;
},{"../platform/utils/object":"./platform/utils/object","./constants/key_codes":"./atoms/constants/key_codes","react":"./node_modules/react/react.js","react-dom":"./node_modules/react-dom/index.js","react-intl":"./node_modules/react-intl/lib/index.js"}],73:[function(require,module,exports){
"use strict";function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}exports.__esModule=!0,exports.strings=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_rapid_client=require("../../platform/rapid_client"),_rapid_client2=_interopRequireDefault(_rapid_client),_logger=require("../../platform/base_client/logger"),_logger2=_interopRequireDefault(_logger),_mail_error=require("../../platform/mail_error"),_mail_error2=_interopRequireDefault(_mail_error),_api_logger=require("../../platform/utils/api_logger"),_object=require("../../platform/utils/object"),_assets=require("../../platform/assets"),_launch_error=require("./styles/launch_error"),_mail_constants=require("../../platform/mail_constants"),_constants=require("../../platform/mail_error/constants"),_launch_error_dialog=require("./launch_error_dialog.jsx"),_launch_error_dialog2=_interopRequireDefault(_launch_error_dialog),_update_browser_list=require("./update_browser_list.jsx"),_update_browser_list2=_interopRequireDefault(_update_browser_list),SPACEID=159600033,strings=exports.strings=(0,_reactIntl.defineMessages)({"launch.error.logo.alt.text":{id:"launch.error.logo.alt.text",defaultMessage:"Yahoo Mail"},"launch.error.banner.alt.text":{id:"launch.error.banner.alt.text",defaultMessage:"banner background"}}),LaunchError=_react2.default.createClass({displayName:"LaunchError",contextTypes:{intl:_reactIntl.intlShape.isRequired},initRapidClient:function(){_rapid_client2.default.init({rapid:{spaceid:SPACEID,test_id:"norrin",keys:window.BrowserLoggerParams,dwell_on:!0,extendbcookie:!0}})},componentDidMount:function(){var r=this.props.error;if(r=_mail_error2.default.jsonToError(r),this.getErrorType()===_mail_constants.ErrorTypes.LAUNCH_API_ERROR){var e={apiName:this.getApiName()};this.initRapidClient(),(0,_api_logger.apiErrorLogger)(_logger2.default,_mail_constants.ApiClientLoggerNames.MailAPIClient,e,r)}},getErrorType:function(){var r=this.props.error;switch(r.name){case _constants.LAUNCHERROR_LAUNCH_API_FAILED:return _mail_constants.ErrorTypes.LAUNCH_API_ERROR;case"LaunchError.NoScript":return _mail_constants.ErrorTypes.NO_SCRIPT;case"LaunchError.UnsupportedBrowser":return _mail_constants.ErrorTypes.UNSUPPORTED_BROWSER}return _mail_constants.ErrorTypes.DEFAULT},_getErrorProperty:function(r){var e=this.props.error;return(0,_object.getIn)(e,"data."+r,null)},getApiName:function(){return this._getErrorProperty("apiName")},getErrorCode:function(){return this._getErrorProperty("code")},getBrowserName:function(){return this._getErrorProperty("browserName")},getOS:function(){return this._getErrorProperty("os")},getClassicMailUrl:function(){return this._getErrorProperty("classicMailUrl")},getCspToken:function(){return this._getErrorProperty("cspToken")},renderLaunchErrorDialog:function(){var r=this.getErrorType();switch(r){case _mail_constants.ErrorTypes.LAUNCH_API_ERROR:return _react2.default.createElement(_launch_error_dialog2.default,{type:r,code:this.getErrorCode()});case _mail_constants.ErrorTypes.NO_SCRIPT:return _react2.default.createElement(_launch_error_dialog2.default,{type:r,cspToken:this.getCspToken()});case _mail_constants.ErrorTypes.UNSUPPORTED_BROWSER:return _react2.default.createElement(_update_browser_list2.default,{browserName:this.getBrowserName(),os:this.getOS(),classicMailUrl:this.getClassicMailUrl()});case _mail_constants.ErrorTypes.DEFAULT:return _react2.default.createElement(_launch_error_dialog2.default,{type:r})}return null},render:function(){var r=this.context.intl.formatMessage;return _react2.default.createElement("div",{style:_launch_error.styles.launchErrorWrapper},_react2.default.createElement("div",null,_react2.default.createElement("img",{alt:r(strings["launch.error.banner.alt.text"]),src:(0,_assets.getURL)("/img/banner_bg.jpg"),style:_launch_error.styles.ribbon}),_react2.default.createElement("img",{alt:r(strings["launch.error.logo.alt.text"]),src:(0,_assets.getURL)("/img/logo_yahoo.png"),style:_launch_error.styles.logo})),this.renderLaunchErrorDialog())}});exports.default=LaunchError;
},{"../../platform/assets":"./platform/assets","../../platform/base_client/logger":"./platform/base_client/logger","../../platform/mail_constants":"./platform/mail_constants","../../platform/mail_error":"./platform/mail_error","../../platform/mail_error/constants":"./platform/mail_error/constants","../../platform/rapid_client":"./platform/rapid_client","../../platform/utils/api_logger":"./platform/utils/api_logger","../../platform/utils/object":"./platform/utils/object","./launch_error_dialog.jsx":74,"./styles/launch_error":75,"./update_browser_list.jsx":78,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],74:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.strings=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_mail_constants=require("../../platform/mail_constants"),_launch_error_dialog=require("./styles/launch_error_dialog"),_assets=require("../../platform/assets"),CONTACT_CUSTOMER_CARE_URL="https://io.help.yahoo.com/contact/index?page=contact&locale=en_US&y=PROD_MAIL_ML",CLASSIC_MAIL_URL="https://mg.mail.yahoo.com/neo/b/launch",strings=exports.strings=(0,_reactIntl.defineMessages)({"launch.error.icon.alert":{id:"launch.error.icon.alert",defaultMessage:"Alert icon"},"launch.error.launch_api_error.title":{id:"launch.error.launch_api_error.title",defaultMessage:"We are experiencing some technical difficulties"},"launch.error.launch_api_error.body":{id:"launch.error.launch_api_error.body",defaultMessage:"Temporary Error: {code}"},"launch.error.no_script_error.title":{id:"launch.error.no_script_error.title",defaultMessage:"Javascript is not enabled on your browser."},"launch.error.no_script_error.body":{id:"launch.error.no_script_error.body",defaultMessage:"Enable javascript to enjoy all the features in Yahoo Mail."},"launch.error.default.title":{id:"launch.error.default.title",defaultMessage:"Your mail is temporarily unavailable."},"launch.error.default.body":{id:"launch.error.default.body",defaultMessage:"Please wait a moment and reload the page."}}),LaunchErrorDialog=_react2.default.createClass({displayName:"LaunchErrorDialog",contextTypes:{intl:_reactIntl.intlShape.isRequired},getTitleText:function(){var e=this.props.type,r=this.context.intl.formatMessage;switch(e){case _mail_constants.ErrorTypes.LAUNCH_API_ERROR:return r(strings["launch.error.launch_api_error.title"]);case _mail_constants.ErrorTypes.NO_SCRIPT:return r(strings["launch.error.no_script_error.title"]);default:return r(strings["launch.error.default.title"])}},getBodyText:function(){var e=this.props,r=e.type,t=e.code,a=this.context.intl.formatMessage;switch(r){case _mail_constants.ErrorTypes.LAUNCH_API_ERROR:return a(strings["launch.error.launch_api_error.body"],{code:t});case _mail_constants.ErrorTypes.NO_SCRIPT:return a(strings["launch.error.no_script_error.body"]);default:return a(strings["launch.error.default.body"])}},renderBody:function(){var e=this.getBodyText(),r=_react2.default.createElement("a",{href:CONTACT_CUSTOMER_CARE_URL,target:"_blank",style:_launch_error_dialog.styles.anchorStyle},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"launch.error.help.pages",defaultMessage:"Help pages"}));return _react2.default.createElement("div",{style:_launch_error_dialog.styles.warnBody},e,_react2.default.createElement("br",null),r)},renderLaunchErrorAction:function(){var e=this.props,r=e.type,t=e.cspToken,a="window.location = '"+_mail_constants.YCPI_PATH_PREFIX+"#';",l=_react2.default.createElement("a",{href:_mail_constants.YCPI_PATH_PREFIX,style:_launch_error_dialog.styles.buttonStyle},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"launch.error.try.again",defaultMessage:"Try again"})),n=_react2.default.createElement("div",null,_react2.default.createElement("a",{href:CLASSIC_MAIL_URL,style:_launch_error_dialog.styles.buttonStyle},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"launch.error.classic.mail.url",defaultMessage:"Go to Classic Mail"})),_react2.default.createElement("script",{type:"text/javascript",nonce:t,dangerouslySetInnerHTML:{__html:a}}));switch(r){case _mail_constants.ErrorTypes.NO_SCRIPT:return n;default:return l}},render:function(){var e=this.context.intl.formatMessage,r=this.getTitleText();return _react2.default.createElement("div",{style:_launch_error_dialog.styles.warnWrapper},_react2.default.createElement("div",{style:_launch_error_dialog.styles.innerWrapper},_react2.default.createElement("div",{style:_launch_error_dialog.styles.iconWrapper},_react2.default.createElement("img",{alt:e(strings["launch.error.icon.alert"]),src:(0,_assets.getURL)("/img/icon_alert.png"),style:_launch_error_dialog.styles.icon})),_react2.default.createElement("div",{style:_launch_error_dialog.styles.textWrapper},_react2.default.createElement("div",{style:_launch_error_dialog.styles.warnTitle},r),this.renderBody(),_react2.default.createElement("div",{style:_launch_error_dialog.styles.solution},this.renderLaunchErrorAction()))))}});exports.default=LaunchErrorDialog;
},{"../../platform/assets":"./platform/assets","../../platform/mail_constants":"./platform/mail_constants","./styles/launch_error_dialog":76,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],75:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _mail_ui_vars=require("../../../platform/utils/mail_ui_vars");exports.default={styles:{launchErrorWrapper:{color:_mail_ui_vars.BLACK,fontFamily:_mail_ui_vars.BASE_FONT_STACK},ribbon:{width:"100%",height:21*_mail_ui_vars.GRID_UNIT+"px"},logo:{position:"absolute",top:5*_mail_ui_vars.GRID_UNIT+"px",left:5*_mail_ui_vars.GRID_UNIT+"px",height:10*_mail_ui_vars.GRID_UNIT+"px"}}},module.exports=exports.default;
},{"../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars"}],76:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _mail_ui_vars=require("../../../platform/utils/mail_ui_vars");exports.default={styles:{warnWrapper:{position:"absolute",width:"100%",top:"40%",textAlign:"center"},innerWrapper:{background:_mail_ui_vars.WHITE,display:"inline-block",border:"1px solid "+_mail_ui_vars.THIRD_LEVEL_GRAY,borderRadius:_mail_ui_vars.GRID_UNIT/2+"px",overflow:"hidden",margin:8*_mail_ui_vars.GRID_UNIT+"px auto",boxShadow:"0 0 "+2.5*_mail_ui_vars.GRID_UNIT+"px "+_mail_ui_vars.SHADOW_COLOR,textAlign:"left"},iconWrapper:{float:"left",margin:6*_mail_ui_vars.GRID_UNIT+"px "+5*_mail_ui_vars.GRID_UNIT+"px 0 "+6*_mail_ui_vars.GRID_UNIT+"px"},icon:{width:9*_mail_ui_vars.GRID_UNIT+"px",height:9*_mail_ui_vars.GRID_UNIT+"px"},textWrapper:{float:"left",fontSize:_mail_ui_vars.FONT_SIZE_S,lineHeight:4*_mail_ui_vars.GRID_UNIT+2+"px",marginRight:12*_mail_ui_vars.GRID_UNIT+"px"},warnTitle:{marginTop:4*_mail_ui_vars.GRID_UNIT+"px",fontSize:_mail_ui_vars.FONT_SIZE_L,lineHeight:6*_mail_ui_vars.GRID_UNIT+"px"},warnBody:{marginTop:2*_mail_ui_vars.GRID_UNIT+"px"},solution:{margin:5*_mail_ui_vars.GRID_UNIT+"px 0 "+5*_mail_ui_vars.GRID_UNIT+"px 0"},anchorStyle:{color:_mail_ui_vars.BASE_LINK_COLOR,textDecoration:"none",fontWeight:_mail_ui_vars.MEDIUM},buttonStyle:{padding:1.5*_mail_ui_vars.GRID_UNIT+"px "+4.5*_mail_ui_vars.GRID_UNIT+"px",textDecoration:"none",fontSize:_mail_ui_vars.FONT_SIZE_S,fontWeight:_mail_ui_vars.MEDIUM,cursor:"pointer",borderRadius:_mail_ui_vars.GRID_UNIT/2+"px",color:_mail_ui_vars.PRIMARY_BUTTON_TEXT_COLOR,backgroundColor:_mail_ui_vars.PRIMARY_BUTTON_ACTIVE_COLOR,border:_mail_ui_vars.GRID_UNIT/4+"px solid "+_mail_ui_vars.PRIMARY_BUTTON_ACTIVE_COLOR,width:17.5*_mail_ui_vars.GRID_UNIT+"px",textAlign:"center"}}},module.exports=exports.default;
},{"../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars"}],77:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _assets=require("../../../platform/assets"),_mail_ui_vars=require("../../../platform/utils/mail_ui_vars"),browserIconsSprite={CHROME:""+1.75*_mail_ui_vars.GRID_UNIT,FIREFOX:""+-11.25*_mail_ui_vars.GRID_UNIT,IE:""+-25*_mail_ui_vars.GRID_UNIT,SAFARI:""+-38*_mail_ui_vars.GRID_UNIT,CLASSIC:""+-50.5*_mail_ui_vars.GRID_UNIT},li={clear:"both",padding:3.5*_mail_ui_vars.GRID_UNIT+"px 0 "+3.5*_mail_ui_vars.GRID_UNIT+"px "+12.5*_mail_ui_vars.GRID_UNIT+"px",background:"url("+(0,_assets.getURL)("/img/browser_icons.png")+") no-repeat 0 0"};exports.default={styles:{outerWrapper:{position:"absolute",width:"100%",top:"30%"},contentHolder:{width:"45%",minWidth:125*_mail_ui_vars.GRID_UNIT+"px",maxWidth:175*_mail_ui_vars.GRID_UNIT+"px",margin:8*_mail_ui_vars.GRID_UNIT+"px auto",padding:6*_mail_ui_vars.GRID_UNIT+"px "+12*_mail_ui_vars.GRID_UNIT+"px "+5*_mail_ui_vars.GRID_UNIT+"px "+6*_mail_ui_vars.GRID_UNIT+"px",border:"1px solid "+_mail_ui_vars.THIRD_LEVEL_GRAY,boxShadow:"0 0 "+2.5*_mail_ui_vars.GRID_UNIT+"px "+_mail_ui_vars.SHADOW_COLOR},iconWrapper:{float:"left",marginRight:5*_mail_ui_vars.GRID_UNIT+"px"},icon:{width:9*_mail_ui_vars.GRID_UNIT+"px",height:9*_mail_ui_vars.GRID_UNIT+"px"},title:{marginBottom:4*_mail_ui_vars.GRID_UNIT+"px"},classicMailHolder:{marginTop:-1*_mail_ui_vars.GRID_UNIT+"px"},classicMailDesc:{fontSize:_mail_ui_vars.FONT_SIZE_XXS,display:"block",color:_mail_ui_vars.FIRST_LEVEL_GRAY,fontStyle:"normal"},ul:{listStyleType:"none",padding:"0px",margin:"0 0 0 "+14*_mail_ui_vars.GRID_UNIT+"px"},upgradeLink:{float:"right",padding:1.5*_mail_ui_vars.GRID_UNIT+"px "+4.5*_mail_ui_vars.GRID_UNIT+"px",marginTop:-1.5*_mail_ui_vars.GRID_UNIT+"px",textDecoration:"none",fontSize:_mail_ui_vars.FONT_SIZE_S,fontWeight:"500",cursor:"pointer",borderRadius:_mail_ui_vars.GRID_UNIT/2+"px",color:_mail_ui_vars.PRIMARY_BUTTON_TEXT_COLOR,backgroundColor:_mail_ui_vars.PRIMARY_BUTTON_ACTIVE_COLOR,border:_mail_ui_vars.GRID_UNIT/4+"px solid "+_mail_ui_vars.PRIMARY_BUTTON_ACTIVE_COLOR,width:17.5*_mail_ui_vars.GRID_UNIT+"px",textAlign:"center"},tryLaterLink:{color:_mail_ui_vars.PRIMARY_BUTTON_ACTIVE_COLOR,backgroundColor:_mail_ui_vars.WHITE,marginTop:"0px"},chrome:Object.assign({},li,{backgroundPosition:"0 "+browserIconsSprite.CHROME+"px"}),firefox:Object.assign({},li,{backgroundPosition:"0 "+browserIconsSprite.FIREFOX+"px"}),ie:Object.assign({},li,{backgroundPosition:"0 "+browserIconsSprite.IE+"px"}),safari:Object.assign({},li,{backgroundPosition:"0 "+browserIconsSprite.SAFARI+"px"}),classic:Object.assign({},li,{backgroundPosition:"0 "+browserIconsSprite.CLASSIC+"px",paddingTop:2*_mail_ui_vars.GRID_UNIT+"px"})}},module.exports=exports.default;
},{"../../../platform/assets":"./platform/assets","../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars"}],78:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_update_browser_list=require("./styles/update_browser_list"),_reactIntl=require("react-intl"),_mail_constants=require("../../platform/mail_constants"),_assets=require("../../platform/assets"),strings=(0,_reactIntl.defineMessages)({rs_page_icon_alert:{id:"rs_page_icon_alert",defaultMessage:"Alert icon"},rs_page_chrome:{id:"rs_page_browser_chrome",defaultMessage:"Google Chrome"},rs_page_firefox:{id:"rs_page_browser_firefox",defaultMessage:"Firefox"},rs_page_ie:{id:"rs_page_browser_ie",defaultMessage:"Internet Explorer"},rs_page_safari:{id:"rs_page_browser_safari",defaultMessage:"Safari"},rs_page_logo_alt_text:{id:"rs_page_logo_alt_text",defaultMessage:"Yahoo Mail"},rs_page_recommend_text:{id:"rs_page_recommend_text",defaultMessage:"Yahoo recommends you upgrade your browser to enjoy all the features in the new Yahoo Mail."},rs_page_upgrade_link_text:{id:"rs_page_upgrade_link_text",defaultMessage:"Upgrade"},rs_page_try_later_link_text:{id:"rs_page_try_later_link_text",defaultMessage:"Try it later"},rs_page_classic_mail_title:{id:"rs_page_classic_mail_title",defaultMessage:"Continue using Classic Mail."},rs_page_classic_mail_desc:{id:"rs_page_classic_mail_desc",defaultMessage:"You should plan on upgrading your browser soon."}}),chromeUpdateUrl="https://www.google.com/chrome/browser/desktop/index.html",firefoxUpdateUrl="https://downloads.yahoo.com/firefox/",ieUpdateUrl="http://www.microsoft.com/windows/internet-explorer/default.aspx",safariUpdateUrl="http://www.apple.com/safari/",UpdateBrowserList=_react2.default.createClass({displayName:"UpdateBrowserList",contextTypes:{intl:_reactIntl.intlShape.isRequired},getDefaultProps:function(){return{browserName:"",os:"",classicMailUrl:"https://mg.mail.yahoo.com/neo/b/launch?.src=norrin&toB=2"}},renderBrowserUpgradeRow:function(e,t,r){return _react2.default.createElement("li",{style:Object.assign({},e)},_react2.default.createElement("a",{href:t,style:_update_browser_list.styles.upgradeLink,target:"_new"},_react2.default.createElement(_reactIntl.FormattedMessage,strings.rs_page_upgrade_link_text)),_react2.default.createElement(_reactIntl.FormattedMessage,r))},renderChrome:function(){return this.renderBrowserUpgradeRow(_update_browser_list.styles.chrome,chromeUpdateUrl,strings.rs_page_chrome)},renderFirefox:function(){return this.renderBrowserUpgradeRow(_update_browser_list.styles.firefox,firefoxUpdateUrl,strings.rs_page_firefox)},renderIE:function(){return this.renderBrowserUpgradeRow(_update_browser_list.styles.ie,ieUpdateUrl,strings.rs_page_ie)},renderSafari:function(){return this.renderBrowserUpgradeRow(_update_browser_list.styles.safari,safariUpdateUrl,strings.rs_page_safari)},render:function(){var e=this.context.intl.formatMessage,t=this.props,r=t.browserName,s=t.os,a=t.classicMailUrl;return _react2.default.createElement("div",{style:_update_browser_list.styles.outerWrapper},_react2.default.createElement("div",{style:_update_browser_list.styles.contentHolder},_react2.default.createElement("div",{style:_update_browser_list.styles.iconWrapper},_react2.default.createElement("img",{alt:e(strings.rs_page_icon_alert),src:(0,_assets.getURL)("/img/icon_alert.png"),style:_update_browser_list.styles.icon})),_react2.default.createElement("div",{style:_update_browser_list.styles.title},_react2.default.createElement(_reactIntl.FormattedMessage,strings.rs_page_recommend_text)),_react2.default.createElement("ul",{style:_update_browser_list.styles.ul},"Chrome"===r&&this.renderChrome(),"Firefox"===r&&this.renderFirefox(),"IE"===r&&this.renderIE(),"Safari"===r&&this.renderSafari(),"Chrome"!==r&&this.renderChrome(),"Firefox"!==r&&this.renderFirefox(),"IE"!==r&&s===_mail_constants.OSKeys.WINDOWS&&this.renderIE(),"Safari"!==r&&s===_mail_constants.OSKeys.MAC&&this.renderSafari(),_react2.default.createElement("li",{style:Object.assign({},_update_browser_list.styles.li,_update_browser_list.styles.classic)},_react2.default.createElement("a",{href:a,style:Object.assign({},_update_browser_list.styles.upgradeLink,_update_browser_list.styles.tryLaterLink)},_react2.default.createElement(_reactIntl.FormattedMessage,strings.rs_page_try_later_link_text)),_react2.default.createElement("div",{style:_update_browser_list.styles.classicMailHolder},_react2.default.createElement(_reactIntl.FormattedMessage,strings.rs_page_classic_mail_title),_react2.default.createElement("em",{style:_update_browser_list.styles.classicMailDesc},_react2.default.createElement(_reactIntl.FormattedMessage,strings.rs_page_classic_mail_desc)))))))}});exports.default=UpdateBrowserList,module.exports=exports.default;
},{"../../platform/assets":"./platform/assets","../../platform/mail_constants":"./platform/mail_constants","./styles/update_browser_list":77,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/layer":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),Layer=_react2.default.createClass({displayName:"Layer",getDefaultProps:function(){return{rootId:"app"}},componentDidMount:function(){var e=document.createElement("div"),t=document.getElementById(this.props.rootId);t.appendChild(e),this.containerNode=e,this.rootNode=t,this.renderLayer()},componentDidUpdate:function(){this.renderLayer()},componentWillUnmount:function(){_reactDom2.default.unmountComponentAtNode(this.containerNode),this.rootNode.removeChild(this.containerNode)},renderLayer:function(){var e=this.props,t=e.position,r=e.left,n=e.top,o=e.visibility,i=e.styles,a=Object.assign({position:t,left:r,top:n,visibility:o},i);t&&r&&n&&o||(a=null),_reactDom2.default.unstable_renderSubtreeIntoContainer(this,_react2.default.createElement("div",_extends({},this.props,{style:a}),this.props.children),this.containerNode)},render:function(){return null}});module.exports=Layer;
},{"react":"./node_modules/react/react.js","react-dom":"./node_modules/react-dom/index.js"}],"./atoms/lazy_component":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.Retry=exports.When=exports.LazyComponent=void 0;var _when=require("./when.jsx"),_when2=_interopRequireDefault(_when),_lazy_component=require("./lazy_component.jsx"),_lazy_component2=_interopRequireDefault(_lazy_component),_retry=require("./retry.jsx"),_retry2=_interopRequireDefault(_retry);exports.LazyComponent=_lazy_component2.default,exports.When=_when2.default,exports.Retry=_retry2.default;
},{"./lazy_component.jsx":"./atoms/lazy_component/lazy_component","./retry.jsx":"./atoms/lazy_component/retry","./when.jsx":"./atoms/lazy_component/when"}],"./atoms/lazy_component/lazy_component":[function(require,module,exports){
"use strict";function _interopRequireDefault2(e){return e&&e.__esModule?e:{default:e}}function isLoadingIndicator(e){return e.props.loading}function isFailureIndicator(e){return e.props.failed}function isNotStatusChild(e){return e.type!==_when2.default}function getSingleChildIfAny(e){return e&&e.props.children?_react.Children.only(e.props.children):null}function getModuleName(e){var t=void 0,r=window.require;return window.require=function(e){t=e},e(),window.require=r,t}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault2(_react),_omit=require("lodash/omit"),_omit2=_interopRequireDefault2(_omit),_types=require("./types"),_when=require("./when.jsx"),_when2=_interopRequireDefault2(_when),_types2=require("../../types"),_resolver=require("../../platform/lazy_loading/resolver"),_mail_constants=require("../../platform/mail_constants"),LazyComponent=_react2.default.createClass({displayName:"LazyComponent",contextTypes:{loader:_types2.LoaderType,config:_react.PropTypes.object},childContextTypes:{retry:_react.PropTypes.func},getInitialState:function(){var e=null,t=!1,r=!1;try{e=this._interopRequireDefault(),t=!0}catch(e){}return{LoadedComponent:e,loaded:t,failed:r}},getChildContext:function(){var e=this;return{retry:function(){return e.retry()}}},_interopRequireDefault:function(){var e=this.props._moduleGetter();return e&&e.__esModule?e.default:e},_updateLoadedState:function(e){var t=this,r=this.props.onModuleLoadFailure;e.then(function(){t._tryLoadingComponent()}).catch(function(e){r&&r(e),t.setState({loaded:!0,failed:!0})})},_tryLoadingComponent:function(){var e=this._interopRequireDefault();this.setState({loaded:!0,LoadedComponent:e})},componentDidMount:function(){var e=this;if(!this.state.loaded){if(this.props.defer){var t=function(){window.requestIdleCallback?window.requestIdleCallback(function(){return e.load()}):setTimeout(function(){return e.load()})};return void("complete"===document.readyState?t():window.addEventListener("load",t))}this.load()}},load:function(){var e=this;try{this._tryLoadingComponent()}catch(t){this._updateLoadedState(this.context.loader.loadModule(getModuleName(this.props._moduleGetter)).catch(function(){return e.retry()}))}},retry:function(){this.setState(this.getInitialState()),this._updateLoadedState(this.context.loader.loadModule(getModuleName(this.props._moduleGetter),{cache:!1,bundleMapURL:(0,_resolver.getBundleMapURL)(_mail_constants.appId)}))},render:function(){var e=_react.Children.toArray(this.props.children);if(!this.state.loaded)return getSingleChildIfAny(e.find(isLoadingIndicator));if(this.state.failed)return getSingleChildIfAny(e.find(isFailureIndicator));var t=this.state.LoadedComponent,r=(0,_omit2.default)(this.props,["import","onModuleLoadFailure","_moduleGetter","children"]);return _react2.default.createElement(t,r,e.filter(isNotStatusChild))}});exports.default=LazyComponent,module.exports=exports.default;
},{"../../platform/lazy_loading/resolver":"./platform/lazy_loading/resolver","../../platform/mail_constants":"./platform/mail_constants","../../types":"./types","./types":"./atoms/lazy_component/types","./when.jsx":"./atoms/lazy_component/when","lodash/omit":"./node_modules/lodash/omit.js","react":"./node_modules/react/react.js"}],"./atoms/lazy_component/retry":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_button=require("../button.jsx"),_button2=_interopRequireDefault(_button),_button3=require("../constants/button"),Retry=_react2.default.createClass({displayName:"Retry",contextTypes:{retry:_react.PropTypes.func},handleClick:function(e){e.preventDefault(),this.context.retry()},render:function(){return _react2.default.createElement(_button2.default,{kind:_button3.Kinds.CHROMELESS,onClick:this.handleClick},this.props.children)}});exports.default=Retry,module.exports=exports.default;
},{"../button.jsx":"./atoms/button","../constants/button":"./atoms/constants/button","react":"./node_modules/react/react.js"}],"./atoms/lazy_component/types":[function(require,module,exports){
"use strict";function WhenType(e,o,r){for(var t=_react.Children.toArray(e[o]),n=void 0,p={loading:0,failed:0},a=0,y=t.length;a<y;a++){var i=t[a];for(n in p)if(p.hasOwnProperty(n)&&i.props[n]&&(p[n]++,p[n]>1))return new TypeError("There must be only one <When> component with '"+n+"' === true for "+r)}}function getIsNotProperTypeErrorMessage(e,o,r,t){return"Failed propType: "+("Invalid prop '"+r+"' of type '"+e+"' supplied to '"+t+"', expected '"+o+"'.")}function getTooManyStatusMessage(e,o,r){return"Cannot provide both '"+e+"' and '"+o+"' props for <"+r+">"}function StatusLoadingType(e,o,r){var t=e[o];if(t){var n="undefined"==typeof t?"undefined":_typeof(t);return"boolean"!==n?new TypeError(getIsNotProperTypeErrorMessage(n,"boolean",o,r)):e.failed?new TypeError(getTooManyStatusMessage(o,"failed",r)):void 0}}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.WhenType=WhenType,exports.StatusLoadingType=StatusLoadingType;var _react=require("react");
},{"react":"./node_modules/react/react.js"}],"./atoms/lazy_component/when":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_types=require("./types"),When=_react2.default.createClass({displayName:"When",render:function(){return null}});exports.default=When,module.exports=exports.default;
},{"./types":"./atoms/lazy_component/types","react":"./node_modules/react/react.js"}],"./atoms/list_item":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var r={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_list_item=require("./styles/list_item"),_list_item2=_interopRequireDefault(_list_item),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_list_item3=require("./constants/list_item"),_object=require("../platform/utils/object"),ListItem=_react2.default.createClass({displayName:"ListItem",getDefaultProps:function(){return{kind:_list_item3.Kinds.DEFAULT}},render:function(){var e=this.props,t=e.name,r=e.kind,i=e.ariaLabel,s=e.dir,a=_objectWithoutProperties(e,["name","kind","ariaLabel","dir"]),l=(0,_css2.default)(_list_item2.default,{kind:r}),n=this.props.children||this.props.text;return _react2.default.createElement("li",_extends({name:t,"data-test-id":t,className:l.listItem,"aria-label":i,role:"menuitem",dir:s},a),n)}});exports.default=ListItem,module.exports=exports.default;
},{"../platform/utils/object":"./platform/utils/object","./constants/list_item":"./atoms/constants/list_item","./styles/list_item":"./atoms/styles/list_item","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./atoms/loading_indicator":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function LoadingIndicator(e){var t=e.size,a=(0,_css2.default)(_loading_indicator2.default,{size:t});return _react2.default.createElement("div",{className:a.wrapper},_react2.default.createElement("div",{className:a.container,"data-test-id":"loading_indicator"},_react2.default.createElement("svg",{className:a.spinner,viewBox:"0 0 24 24",width:"24",height:"24"},_react2.default.createElement("path",{className:a.arc,d:"M12,22C6.477,22,2,17.523,2,12S6.477,2,12,2"}),_react2.default.createElement("path",{className:a.arc,d:"M12,2c5.523,0,10,4.477,10,10s-4.477,10-10,10"}))))}exports.__esModule=!0,exports.Sizes=void 0,exports.default=LoadingIndicator;var _react=require("react"),_react2=_interopRequireDefault(_react),_object=require("../platform/utils/object"),_loading_indicator=require("./styles/loading_indicator"),_loading_indicator2=_interopRequireDefault(_loading_indicator),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),Sizes=exports.Sizes=(0,_object.mirrorKeys)(["S","M"]);LoadingIndicator.defaultProps={size:Sizes.M};
},{"../platform/utils/object":"./platform/utils/object","./styles/loading_indicator":"./atoms/styles/loading_indicator","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./atoms/menu/menu":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_menu_utils=require("../utils/menu_utils"),_layer=require("../layer.jsx"),_layer2=_interopRequireDefault(_layer),_list=require("../constants/list"),_object=require("../../platform/utils/object"),_navigable_list=require("../navigable_list.jsx"),_navigable_list2=_interopRequireDefault(_navigable_list),_navigable_list3=require("../constants/navigable_list"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_menu=require("../styles/menu"),_menu2=_interopRequireDefault(_menu),_NOOP=function(){},WindowEventsWhichDismissTheMenu=["click","focus","resize"],Menu=_react2.default.createClass({displayName:"Menu",getInitialState:function(){return{show:!1,dimensionStyles:{}}},getDefaultProps:function(){return{onHide:_NOOP}},componentDidMount:function(){var e=this;this.refs.menu&&(this.setState({show:!0,dimensionStyles:(0,_menu_utils.getMenuLayerStyles)(_reactDom2.default.findDOMNode(this.props.actionNode),_reactDom2.default.findDOMNode(this.refs.menu))},function(){_reactDom2.default.findDOMNode(this.refs.navigableList).focus()}),WindowEventsWhichDismissTheMenu.forEach(function(t){window.addEventListener(t,e.handleHide,!1)}))},componentWillUnmount:function(){var e=this;WindowEventsWhichDismissTheMenu.forEach(function(t){window.removeEventListener(t,e.handleHide,!1)})},handleHide:function(e){var t=_reactDom2.default.findDOMNode(this.refs.menu),i=_reactDom2.default.findDOMNode(this.props.actionNode);!t||e.target instanceof Node&&(t.contains(e.target)||i.contains(e.target))||(this.setState({show:!1}),this.props.onHideMenu())},handleEscape:function(){this.setState({show:!1}),this.props.onHideMenu(),_reactDom2.default.findDOMNode(this.props.actionNode).focus()},handleKeyDown:function(e){switch(e.key){case"Escape":e.preventDefault(),e.stopPropagation(),this.handleEscape();break;default:return void e.stopPropagation()}},render:function(){if(!this.props.children)return null;var e=(0,_css2.default)(_menu2.default),t=this.state.show?"visible":"hidden",i=Object.assign({position:"absolute",visibility:t},this.state.dimensionStyles);return _react2.default.createElement(_layer2.default,null,_react2.default.createElement("div",{onKeyDown:this.handleKeyDown,className:e.menu,onClick:this.handleEscape,ref:"menu",style:i},_react2.default.createElement(_navigable_list2.default,_extends({ref:"navigableList",kind:_navigable_list3.Kinds.MENU,layout:this.props.menuLayout,onHide:this.handleHide,onEscape:this.handleEscape},this.props),this.props.children)))}});module.exports=Menu;
},{"../../platform/utils/object":"./platform/utils/object","../constants/list":"./atoms/constants/list","../constants/navigable_list":"./atoms/constants/navigable_list","../layer.jsx":"./atoms/layer","../navigable_list.jsx":"./atoms/navigable_list","../styles/menu":"./atoms/styles/menu","../utils/menu_utils":"./atoms/utils/menu_utils","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-dom":"./node_modules/react-dom/index.js"}],"./atoms/menu/menu_button":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _objectWithoutProperties(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}exports.__esModule=!0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_react=require("react"),_react2=_interopRequireDefault(_react),_button=require("../button.jsx"),_button2=_interopRequireDefault(_button),_button3=require("../constants/button"),MenuButton=_react2.default.createClass({displayName:"MenuButton",getDefaultProps:function(){return{hasText:!1}},render:function(){var t=this.props,e=t.hasText,r=t.children,n=_objectWithoutProperties(t,["hasText","children"]);return _react2.default.createElement(_button2.default,_extends({},n,{"aria-controls":"react-menu-component","aria-haspopup":!0,kind:e?_button3.Kinds.CHROMELESS:_button3.Kinds.ICON}),r)}});exports.default=MenuButton,module.exports=exports.default;
},{"../button.jsx":"./atoms/button","../constants/button":"./atoms/constants/button","react":"./node_modules/react/react.js"}],"./atoms/menu/menu_button_container":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var n={};for(var u in e)t.indexOf(u)>=0||Object.prototype.hasOwnProperty.call(e,u)&&(n[u]=e[u]);return n}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_hover_colored_fuji_icon_button=require("../../atoms/hover_colored_fuji_icon_button.jsx"),_hover_colored_fuji_icon_button2=_interopRequireDefault(_hover_colored_fuji_icon_button),_menu_button=require("../menu/menu_button.jsx"),_menu_button2=_interopRequireDefault(_menu_button),_menu=require("../menu/menu.jsx"),_menu2=_interopRequireDefault(_menu),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_menu_button_container=require("../styles/menu_button_container"),_menu_button_container2=_interopRequireDefault(_menu_button_container),_NOOP=function(){},MenuButtonContainer=_react2.default.createClass({displayName:"MenuButtonContainer",getDefaultProps:function(){return{onMenuShow:_NOOP,onMenuHide:_NOOP,onFocus:_NOOP,onBlur:_NOOP,showMenuActiveState:!1}},getInitialState:function(){return{isMenuVisible:!1}},toggleMenu:function(){this.state.isMenuVisible?this.hideMenu():this.showMenu()},showMenu:function(){this.setState({isMenuVisible:!0}),this.props.onMenuShow()},componentDidUpdate:function(e,t){this.props.afterMenuHide&&!this.state.isMenuVisible&&t.isMenuVisible&&this.props.afterMenuHide()},hideMenu:function(){this.setState({isMenuVisible:!1}),this.props.onMenuHide()},componentDidMount:function(){this.props.parentMenu&&this.setState({isMenuVisible:!0})},handleMenuButtonKeyDown:function(e){switch(e.key){case" ":case"Enter":e.preventDefault(),e.stopPropagation(),this.toggleMenu();break;case"Escape":e.preventDefault(),this.hideMenu(),this.blurMenuButton()}},blurMenuButton:function(){_reactDom2.default.findDOMNode(this.refs.button).blur()},render:function(){var e=this.props,t=e.onFocus,n=e.onBlur,u=(e.onMenuShow,e.onMenuHide,e.afterMenuHide,e.children),o=e.showMenuActiveState,i=e.parentMenu,r=_objectWithoutProperties(e,["onFocus","onBlur","onMenuShow","onMenuHide","afterMenuHide","children","showMenuActiveState","parentMenu"]),s=_react2.default.Children.toArray(u),a=s[0],c=s[1],_=this.state.isMenuVisible,l=(0,_css2.default)(_menu_button_container2.default,{active:_&&o}),f=null;a&&(f=_react2.default.cloneElement(a,{ref:"button","aria-expanded":_,onClick:this.toggleMenu,onKeyDown:this.handleMenuButtonKeyDown,onFocus:t,onBlur:n}));var d=null;return i&&c?d=_react2.default.cloneElement(c,{ref:"submenu",actionNode:i.refs.button,onHideMenu:this.hideMenu}):_&&c&&(d=_react2.default.cloneElement(c,{ref:"menu",actionNode:this.refs.button,onHideMenu:this.hideMenu})),_react2.default.createElement("div",_extends({},r,{className:l.buttonContainer}),f,d)}});exports.default=MenuButtonContainer,module.exports=exports.default;
},{"../../atoms/hover_colored_fuji_icon_button.jsx":"./atoms/hover_colored_fuji_icon_button","../menu/menu.jsx":"./atoms/menu/menu","../menu/menu_button.jsx":"./atoms/menu/menu_button","../styles/menu_button_container":"./atoms/styles/menu_button_container","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-dom":"./node_modules/react-dom/index.js"}],79:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(e[u]=r[u])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_list_item=require("../list_item.jsx"),_list_item2=_interopRequireDefault(_list_item),_button=require("../button.jsx"),_button2=_interopRequireDefault(_button),_button3=require("../constants/button"),MenuItem=_react2.default.createClass({displayName:"MenuItem",render:function(){return _react2.default.createElement(_list_item2.default,null,_react2.default.createElement(_button2.default,_extends({kind:_button3.Kinds.MENUITEM},this.props),this.props.children))}});exports.default=MenuItem,module.exports=exports.default;
},{"../button.jsx":"./atoms/button","../constants/button":"./atoms/constants/button","../list_item.jsx":"./atoms/list_item","react":"./node_modules/react/react.js"}],"./atoms/message_pane_warnings":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.WarningTypes=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_alert=require("./dialog/alert"),_alert2=_interopRequireDefault(_alert),_confirm=require("./dialog/confirm"),_confirm2=_interopRequireDefault(_confirm),_reactIntl=require("react-intl"),_object=require("../platform/utils/object"),WarningTypes=exports.WarningTypes=(0,_object.mirrorKeys)(["FORM","PASSWORD"]),note="Remember: {brand} will NEVER ask you for your password in an unsolicited phone call or an unsolicited email.",passwordWarningMessage="\n    You are about to enter a password in a form that will not be sent to {brand}!.\n    "+note+"\n",formWarningMessage='\n    You are about to send information to someone other than {brand}.\n    If you do not want anyone outside of {brand} to have this information, click "Cancel" now.\n    '+note+"\n",strings=(0,_reactIntl.defineMessages)({warning:{id:"message_pane.warning_title",defaultMessage:"Warning"}}),MessagePaneWarnings=_react2.default.createClass({displayName:"MessagePaneWarnings",contextTypes:{intl:_reactIntl.intlShape.isRequired},shouldComponentUpdate:function(e){var n=e.warningType,a=e.targetElement,t=this.props,r=t.warningType,s=t.targetElement;return n!==r||a!==s},hidePasswordWarning:function(e){this.props.onDialogClose(),e.warningShown=!0},submitForm:function(e){this.props.onDialogClose(),e&&"FORM"===e.nodeName&&e.submit&&e.submit()},render:function(){var e=this.context.intl.formatMessage,n=e(strings.warning),a=this.props,t=a.warningType,r=a.targetElement,s=a.onDialogClose,i=_react2.default.createElement(_reactIntl.FormattedMessage,{id:"message_pane.password_warning",defaultMessage:passwordWarningMessage,values:{brand:"Yahoo"}}),o=_react2.default.createElement(_reactIntl.FormattedMessage,{id:"message_pane.form_warning",defaultMessage:formWarningMessage,values:{brand:"Yahoo"}});switch(t){case WarningTypes.FORM:return _react2.default.createElement(_confirm2.default,{title:n,message:o,onAbort:s,onConfirm:this.submitForm.bind(this,r)});case WarningTypes.PASSWORD:return _react2.default.createElement(_alert2.default,{title:n,message:i,onAccept:this.hidePasswordWarning.bind(this,r)});default:return null}}});exports.default=MessagePaneWarnings;
},{"../platform/utils/object":"./platform/utils/object","./dialog/alert":"./atoms/dialog/alert","./dialog/confirm":"./atoms/dialog/confirm","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/modal":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function stopPropagation(e){e.stopPropagation()}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_layer=require("./layer.jsx"),_layer2=_interopRequireDefault(_layer),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_modal=require("./styles/modal"),_modal2=_interopRequireDefault(_modal),_modal3=require("./constants/modal"),_object=require("../platform/utils/object"),Modal=_react2.default.createClass({displayName:"Modal",getDefaultProps:function(){return{kind:_modal3.Kinds.DARK,ariaLabelledBy:null,ariaDescribedBy:null}},componentDidMount:function(){this.forceFocus(),window.addEventListener("focus",this.forceFocus)},componentWillUnmount:function(){window.removeEventListener("focus",this.forceFocus)},forceFocus:function(){this.refs.content&&this.refs.content.focus()},handleBlurCapture:function(e){var t=e.relatedTarget||e.nativeEvent.explicitOriginalTarget||e.nativeEvent.srcElement;this.refs.content.contains(t)||setTimeout(this.forceFocus,0)},handleKeyDown:function(e){var t=this.props,a=t.onKeyDown,r=t.onClose;e.stopPropagation(),"Escape"===e.key?(e.preventDefault(),e.stopPropagation(),r(e)):a&&a(e)},handleOuterPartClick:function(e){e.stopPropagation(),this.props.onClose(e)},render:function(){var e=this.props,t=e.children,a=e.kind,r=e.ariaLabelledBy,o=e.ariaDescribedBy,n=(0,_css2.default)(_modal2.default,{kind:a});return _react2.default.createElement(_layer2.default,null,_react2.default.createElement("div",{onClick:this.handleOuterPartClick,className:n.grayOverlay,"data-test-id":"modal-outer",id:"modal-outer",role:r||o?"alertdialog":null,"aria-labelledby":r,"aria-describedby":o},_react2.default.createElement("div",{"data-test-id":"modal-content",className:n.container,ref:"content",onBlurCapture:this.handleBlurCapture,onKeyDown:this.handleKeyDown,onClick:stopPropagation,tabIndex:0,role:r||o?"document":null},t)))}});exports.default=Modal,module.exports=exports.default;
},{"../platform/utils/object":"./platform/utils/object","./constants/modal":"./atoms/constants/modal","./layer.jsx":"./atoms/layer","./styles/modal":"./atoms/styles/modal","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./atoms/navigable_list":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_list=require("./constants/list"),_object=require("../platform/utils/object"),_navigable_list=require("./styles/navigable_list"),_navigable_list2=_interopRequireDefault(_navigable_list),_navigable_list3=require("./constants/navigable_list"),_NOOP=function(){},NavigableList=_react2.default.createClass({displayName:"NavigableList",getDefaultProps:function(){return{disabled:!1,tabIndex:-1,circularNavigation:!0,focusOnMount:!1,onShow:_NOOP,onHide:_NOOP,onEscape:_NOOP,isRestrictedHeight:!1}},getInitialState:function(){return{cursorIndex:-1}},componentDidMount:function(){var e=this;this.props.focusOnMount&&setTimeout(function(){return e.list&&e.list.focus()},0),this.props.onShow()},escape:function(){(0,_reactDom.findDOMNode)(this).focus(),(0,_reactDom.findDOMNode)(this).blur(),this.setState({cursorIndex:-1}),this.props.onEscape()},handleKeyDown:function(e){switch(e.key){case"ArrowLeft":case"ArrowUp":e.preventDefault(),e.stopPropagation(),this.navigate(-1);break;case"ArrowRight":case"ArrowDown":e.preventDefault(),e.stopPropagation(),this.navigate(1);break;case"Tab":return void this.setState({cursorIndex:-1});case"Escape":return e.preventDefault(),void this.escape();default:return}},navigate:function(e){var t=Math.min,r=Math.max,i=(0,_reactDom.findDOMNode)(this),s=i.getElementsByTagName("li"),a=0,n=s.length-1,o=void 0;this.props.circularNavigation?(o=this.state.cursorIndex+e,o>n?o=a:o<a&&(o=n)):o=t(r(this.state.cursorIndex+e,0),n);var u=s[o],c=i.querySelector("button")||i.querySelector("a")||i.querySelector('[role="checkbox"]');if(c){var l=u.querySelector("button")||u.querySelector("a")||u.querySelector('[role="checkbox"]');l?(this.setState({cursorIndex:o}),l.focus()):this.setState({cursorIndex:o},function(){this.navigate(e)})}},getRole:function(){switch(this.props.kind){case _navigable_list3.Kinds.MENU:return"menu";case _navigable_list3.Kinds.TOOLBAR:return"menubar";default:return"list"}},handleBlur:function(){var e=this,t=(0,_reactDom.findDOMNode)(this);setTimeout(function(){e.isMounted()&&!t.contains(document.activeElement)&&e.props.onHide()},0)},render:function(){var e=this,t=this.getRole(),r=(0,_css2.default)(_navigable_list2.default,{layout:this.props.layout,kind:this.props.kind,disabled:this.props.disabled,isRestrictedHeight:this.props.isRestrictedHeight});return _react2.default.createElement("ul",_extends({"data-test-id":"navigable-list",ref:function(t){return e.list=t},tabIndex:this.props.tabIndex,role:t,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur},this.props,{className:r.list}),this.props.children)}});exports.default=NavigableList,module.exports=exports.default;
},{"../platform/utils/object":"./platform/utils/object","./constants/list":"./atoms/constants/list","./constants/navigable_list":"./atoms/constants/navigable_list","./styles/navigable_list":"./atoms/styles/navigable_list","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-dom":"./node_modules/react-dom/index.js"}],"./atoms/overlay":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_overlay=require("./styles/overlay"),_overlay2=_interopRequireDefault(_overlay),_layer=require("./layer"),_layer2=_interopRequireDefault(_layer),_overlay_utils=require("./utils/overlay_utils"),_corners=require("./constants/corners"),_NOOP=function(){},classNames=(0,_css2.default)(_overlay2.default),Overlay=_react2.default.createClass({displayName:"Overlay",getInitialState:function(){return{overlayDimensionStyles:null}},getDefaultProps:function(){return{alignmentPoints:[_corners.Corners.TopLeft,_corners.Corners.TopLeft],offsetTop:0,offsetLeft:0,left:null,top:null,onShow:_NOOP,onClick:_NOOP,onKeyDown:_NOOP,useShim:!1}},componentDidMount:function(){if(this.refs.boundingBox){var e=this.props,t=e.alignmentPoints,r=e.alignTo,n=e.onShow,o=this.state.overlayDimensionStyles;if(r){var l=_reactDom2.default.findDOMNode(r),a=l.getBoundingClientRect(),i=_reactDom2.default.findDOMNode(this.refs.boundingBox),s=i.getBoundingClientRect();o=(0,_overlay_utils.calcOverlayPos)(a,s,t),this.setState({overlayDimensionStyles:o},n),window.addEventListener("keydown",this.props.onKeyDown)}}},componentWillUnmount:function(){window.removeEventListener("keydown",this.props.onKeyDown)},handleShimClick:function(e){e.stopPropagation(),this.props.onClick({overlayClicked:!1})},handleOverlayClick:function(e){e.stopPropagation(),this.props.onClick({overlayClicked:!0})},renderOverlayContent:function(e){return _react2.default.createElement("div",{"data-test-id":"overlay-boundingbox",ref:"boundingBox",style:e,className:classNames.overlay,onClick:this.handleOverlayClick},this.props.children)},renderOverlay:function(e){var t=this.props.useShim;return t?_react2.default.createElement("div",{className:classNames.shim,onClick:this.handleShimClick,"data-test-id":"overlay-shim"},this.renderOverlayContent(e)):this.renderOverlayContent(e)},render:function(){var e=this.props,t=e.left,r=e.top,n=e.offsetTop,o=e.offsetLeft,l=e.alignTo,a=null,i=null,s=null,u=this.state.overlayDimensionStyles;return null!==t&&null!==r?(i=t,s=r):u?(i=u.left,s=u.top):l&&(i=-1e4,s=-1e4),null!==i&&null!==s&&(i+=o,s+=n,a={left:i,top:s,position:"absolute"}),_react2.default.createElement(_layer2.default,null,this.renderOverlay(a))}});exports.default=Overlay,module.exports=exports.default;
},{"./constants/corners":"./atoms/constants/corners","./layer":"./atoms/layer","./styles/overlay":"./atoms/styles/overlay","./utils/overlay_utils":"./atoms/utils/overlay_utils","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-dom":"./node_modules/react-dom/index.js"}],"./atoms/pill":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.strings=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_reactIntl=require("react-intl"),_hover_colored_fuji_icon_button=require("./hover_colored_fuji_icon_button.jsx"),_hover_colored_fuji_icon_button2=_interopRequireDefault(_hover_colored_fuji_icon_button),_fuji_icon=require("./fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_xavatar=require("./xavatar.jsx"),_xavatar2=_interopRequireDefault(_xavatar),_index=require("../platform/utils/index.js"),_object=require("../platform/utils/object"),_mail_ui_vars=require("../platform/utils/mail_ui_vars"),_generic=require("../platform/utils/generic"),_drag_image=require("./drag_image.jsx"),_drag_image2=_interopRequireDefault(_drag_image),_fuji_icon3=require("./constants/fuji_icon"),_pill=require("./styles/pill"),_pill2=_interopRequireDefault(_pill),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),strings=exports.strings=(0,_reactIntl.defineMessages)({remove_contact:{id:"compose.remove_contact",defaultMessage:"Remove"},encryptionUnsupportedContact:{id:"compose.encryption_unsupported_contact",defaultMessage:"{contact} cannot receive encrypted emails"}}),Pill=_react2.default.createClass({displayName:"Pill",contextTypes:{intl:_reactIntl.intlShape.isRequired,config:_react.PropTypes.object},getDefaultProps:function(){return{onPillClick:function(){},useEllipsis:!1,isDark:!1,isFolderPill:!1,isDragged:!1,selectedPills:[]}},handleDragEnter:function(){this.setState({isDragHovered:!0})},handleDragOnPill:function(e,t){this.setState({dragSide:t})},handleDragLeave:function(){this.setState({dragSide:""}),this.state.isDragHovered&&this.setState({isDragHovered:!1})},shouldHandleDrop:function(e){return e===this.refs.leftDragNode||e===this.refs.rightDragNode},handleDragOver:function(e){this.shouldHandleDrop(e.target)&&e.preventDefault()},handleDragEnd:function(){this.removeDragImage(),this.props.handleDragState(!1),this.setState({isSelfDrag:!1})},renderDragImage:function(e){var t=e.cloneNode(!0),i=(0,_css2.default)(_pill2.default,{isDragImg:!0}),a=(0,_css2.default)(_pill2.default),r=this.props.selectedPills,n=t.getElementsByClassName("pill-close")[0],l=e.clientHeight,o=e.clientWidth;if(this.imgContainer.id="drag-img",this.imgContainer.style.height=l+"px",this.imgContainer.style.maxWidth=o+"px",this.imgContainer.style.opacity=1,t.classList.remove.apply(t.classList,a.pillContent.split(" ")),t.classList.add.apply(t.classList,i.pillContent.split(" ")),n&&t.removeChild(n),this.imgContainer.appendChild(t),r.length>1){var s=document.createElement("div");s.style.position="absolute",_reactDom2.default.render(_react2.default.createElement(_drag_image2.default,{count:this.props.selectedPills.length,x:o-40,y:-14,iconKind:_fuji_icon3.Kinds.CONTACT_CARD}),s),this.imgContainer.appendChild(s)}return this.imgContainer},removeDragImage:function(){if(this.imgContainer&&this.imgContainer.parentNode){var e=document.getElementById("icon-div");e&&e.parentNode&&(_reactDom2.default.unmountComponentAtNode(e),e.parentNode.removeChild(e)),this.imgContainer.parentNode.removeChild(this.imgContainer)}this.imgContainer=null},handleDragStart:function(e){var t=e.target,i=this;this.imgContainer||(this.imgContainer=document.createElement("div"),document.body.appendChild(this.imgContainer)),e.dataTransfer.setData("text",JSON.stringify({contact:{email:this.props.contactEmail,name:this.props.value,id:this.props.contactId},dragFromField:this.props.inputField})),e.dataTransfer.effectAllowed="move",(0,_generic.supportsSetDragImage)()&&e.dataTransfer.setDragImage(this.renderDragImage(t),0,0),setTimeout(function(){i.props.handleDragState(!0),i.setState({isSelfDrag:!0})})},handleDrag:function(e){_reactDom2.default.render(_react2.default.createElement(_drag_image2.default,{count:this.props.selectedPills.length,x:e.pageX,y:e.pageY,iconKind:_fuji_icon3.Kinds.CONTACT_CARD}),this.imgContainer)},handleDrop:function(e,t){this.shouldHandleDrop(e.target)&&(this.removeDragImage(),this.setState({dragSide:""}),this.props.handleDrop(e,t,this.props.contactId),this.state.isDragHovered&&this.setState({isDragHovered:!1}))},getInitialState:function(){return{hovered:!1,isDragHovered:!1,dragSide:"",isSelfDrag:!1}},handleHover:function(e){this.setState({hovered:e})},renderPillImage:function(e){var t=this.props,i=t.isFolderPill,a=t.contactEmail,r=t.contactId,n=t.pillFujiKind,l=t.pillFujiSize,o=t.pillFujiColorState,s=(0,_index.isValidEmail)(a);return i?_react2.default.createElement("div",{"data-test-id":"pill-folder",className:e.pillDiv},_react2.default.createElement(_fuji_icon2.default,{kind:n,colorState:o,size:l})):s?_react2.default.createElement("div",{"data-test-id":"pill-avatar",className:e.avatar},_react2.default.createElement(_xavatar2.default,{contact:{id:r,email:a},size:_xavatar.Sizes.S})):null},render:function(){var e=this,t=this.state,i=t.hovered,a=t.isDragHovered,r=t.dragSide,n=t.isSelfDrag,l=this.props,o=l.useEllipsis,s=l.isSelected,d=l.maxWidth,c=l.isDark,u=l.isFolderPill,g=l.isDragged,p=l.hasEncryptionError,_=l.selectedPills,h=(0,_index.isValidEmail)(this.props.contactEmail),f=!h||p,m=(0,_css2.default)(_pill2.default,{isHovered:i,hasError:f,isSelected:s,useEllipsis:o,isDark:c,isFolderPill:u,dragSide:r,isDragged:n||g}),D=void 0;o&&d&&(D={maxWidth:d});var v=this.props.title;return p&&(v=this.context.intl.formatMessage(strings.encryptionUnsupportedContact,{contact:v})),_react2.default.createElement("div",{className:"pill-container "+m.pillContainer},_react2.default.createElement("div",{"data-test-id":"pill",title:v,"aria-label":this.props.value,className:"pill-content "+m.pillContent,onMouseEnter:this.handleHover.bind(this,!0),onMouseLeave:this.handleHover.bind(this,!1),onClick:this.props.onPillClick,onDoubleClick:this.props.onPillEdit,draggable:this.context.config.dragDropPill&&this.props.isCompose,onDragStart:this.handleDragStart,onDrag:function(t){!(0,_generic.supportsSetDragImage)()&&_.length>1&&e.handleDrag(t)},onDragEnd:this.handleDragEnd,onDragEnter:this.handleDragEnter},this.renderPillImage(m),_react2.default.createElement("div",{"data-test-id":"pill-text",className:m.pillText,style:D},this.props.value),(this.props.isSelected||i)&&this.props.onPillRemove&&_react2.default.createElement("div",{className:"pill-close "+m.pillRemove},_react2.default.createElement(_hover_colored_fuji_icon_button2.default,{kind:_fuji_icon3.Kinds.CLOSE_MINI,size:_fuji_icon3.Sizes.XXS,colorStates:h?{normal:_fuji_icon3.ColorStates.DISABLED,hovered:_fuji_icon3.ColorStates.SELECTED}:{normal:_fuji_icon3.ColorStates.DISABLED,hovered:_fuji_icon3.ColorStates.WARNING},onClick:this.props.onPillRemove,style:{padding:0},title:this.context.intl.formatMessage(strings.remove_contact)}))),a?_react2.default.createElement("div",{className:m.dragHoverContent,"data-test-id":"drag-hover-content"},_react2.default.createElement("div",{ref:"leftDragNode",className:m.dragHoverLeft,onDragLeave:this.handleDragLeave,onDragOver:this.handleDragOver,onDragEnter:function(t){return e.handleDragOnPill(t,"left")},onDrop:function(t){return e.handleDrop(t,"left")}}),_react2.default.createElement("div",{ref:"rightDragNode",className:m.dragHoverRight,onDragLeave:this.handleDragLeave,onDragOver:this.handleDragOver,onDragEnter:function(t){return e.handleDragOnPill(t,"right")},onDrop:function(t){return e.handleDrop(t,"right")}})):null)}});exports.default=Pill;
},{"../platform/utils/generic":"./platform/utils/generic","../platform/utils/index.js":"./platform/utils","../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../platform/utils/object":"./platform/utils/object","./constants/fuji_icon":"./atoms/constants/fuji_icon","./drag_image.jsx":"./atoms/drag_image","./fuji_icon.jsx":"./atoms/fuji_icon","./hover_colored_fuji_icon_button.jsx":"./atoms/hover_colored_fuji_icon_button","./styles/pill":"./atoms/styles/pill","./xavatar.jsx":"./atoms/xavatar","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-dom":"./node_modules/react-dom/index.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/popover/asymmetric_popover":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function createTriggerPropChecker(e){return function(t,r){var o=t[r],i=Object.keys(e),n=i.reduce(function(t,r){return t+e[r]},0);if("number"!=typeof o||o<=0||o>n)throw new RangeError('"'+r+'" is out of bound ('+o+" > "+n+"). Needs "+i)}}exports.__esModule=!0,exports.OffTriggers=exports.OnTriggers=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_popover_content=require("./popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover=require("../constants/popover"),_popover_anchor=require("./popover_anchor.jsx"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_object=require("../../platform/utils/object"),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),OnTriggers=exports.OnTriggers={MOUNT:1,CLICK:2,HOVER:4,HOVER_DELAYED:8,NONE:0},OffTriggers=exports.OffTriggers={HOVER_OUT_ANCHOR:1,HOVER_OUT:2,CLICK:4,DRAG_START:8},AsymmetricPopover=_react2.default.createClass({displayName:"AsymmetricPopover",getDefaultProps:function(){return{disabled:!1,stopClickPropagation:!1,onShown:function(){},onHide:function(){},onContentMouseOver:function(){},onContentMouseOut:function(){},persistent:!1,zAltitude:_mail_ui_vars.ZIndices.POPOVER.MEDIUM,isArrowVisible:!0}},getInitialState:function(){return{popoverShown:!1}},componentWillUnmount:function(){clearTimeout(this._shownTimeout),clearTimeout(this._hideTimeout)},componentDidMount:function(){var e=this.props,t=e.triggerOn,r=e.disabled;r||(t&OnTriggers.MOUNT===OnTriggers.MOUNT?this.setState({popoverShown:!0}):this.forceUpdate())},componentDidUpdate:function(e,t){this.state.popoverShown!==t.popoverShown&&(this.state.popoverShown?this.props.onShown():this.props.onHide())},handleClick:function(){var e=this.state.popoverShown,t=this.props,r=t.triggerOn,o=t.triggerOff;e||(r&OnTriggers.CLICK)!==OnTriggers.CLICK?e&&(o&OffTriggers.CLICK)===OffTriggers.CLICK&&this.setState({popoverShown:!1}):this.setState({popoverShown:!0})},handleDragStart:function(){var e=this.state.popoverShown,t=this.props.triggerOff;e&&(t&OffTriggers.DRAG_START)===OffTriggers.DRAG_START&&this.setState({popoverShown:!1})},handleMouseOver:function(){var e=this;clearTimeout(this._hideTimeout);var t=this.props,r=t.triggerOn,o=t.triggerDelayTime;(r&OnTriggers.HOVER)===OnTriggers.HOVER?this.setState({popoverShown:!0}):(r&OnTriggers.HOVER_DELAYED)===OnTriggers.HOVER_DELAYED&&(this._shownTimeout=setTimeout(function(){e.setState({popoverShown:!0})},o))},handleMouseOut:function(e){var t=this,r=this.state.popoverShown,o=this.props.triggerOff;clearTimeout(this._shownTimeout),r&&(this.refs.anchor!==e.target&&!this.refs.anchor.contains(e.target)||(o&OffTriggers.HOVER_OUT_ANCHOR)!==OffTriggers.HOVER_OUT_ANCHOR?(o&OffTriggers.HOVER_OUT)===OffTriggers.HOVER_OUT&&(this._hideTimeout=setTimeout(function(){t.setState({popoverShown:!1})},0)):this.setState({popoverShown:!1}))},handlePopoverHide:function(){clearTimeout(this._shownTimeout),this.setState({popoverShown:!1})},render:function(){var e=this,t=this.props,r=t.align,o=t.arrowSize,i=t.disabled,n=t.isArrowVisible,s=t.offset,a=t.permittedArrowDirections,p=t.persistent,u=t.zAltitude,h=_react2.default.Children.toArray(this.props.children),c=h[0],f=h[1],l=!i&&this.state.popoverShown,g={onClick:this.handleClick,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onDragStart:this.handleDragStart,ref:"anchor"};return _react2.default.createElement("span",null,_react2.default.cloneElement(c,i?{ref:"anchor"}:g),l&&this.refs.anchor?_react2.default.createElement(_popover_content2.default,{popoverAnchor:this.refs.anchor,arrowSize:o,align:r,offset:s,permittedArrowDirections:a,zAltitude:u,onMouseOver:function(t){e.handleMouseOver(t),e.props.onContentMouseOver(t)},onMouseOut:function(t){e.handleMouseOut(t),e.props.onContentMouseOut(t)},onClick:this.handleClick,onHide:this.handlePopoverHide,persistent:p,isArrowVisible:n},f):null)}});exports.default=AsymmetricPopover;
},{"../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../platform/utils/object":"./platform/utils/object","../constants/popover":"./atoms/constants/popover","./popover_anchor.jsx":"./atoms/popover/popover_anchor","./popover_content.jsx":"./atoms/popover/popover_content","react":"./node_modules/react/react.js"}],"./atoms/popover/popover_anchor":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),PopoverAnchor=_react2.default.createClass({displayName:"PopoverAnchor",render:function(){var e=_react2.default.Children.only(this.props.children),r=_react2.default.cloneElement(e,{onClick:this.props.onClick,onContextMenu:this.props.onContextMenu,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut});return r}});exports.default=PopoverAnchor,module.exports=exports.default;
},{"react":"./node_modules/react/react.js"}],"./atoms/popover/popover_container":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_popover=require("../constants/popover"),_invariant=require("../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),PopoverContainer=_react2.default.createClass({displayName:"PopoverContainer",componentDidMount:function(){this.forceUpdate()},getInitialState:function(){return{visiblePopoverTypes:[_popover.Triggers.MOUNT]}},toggle:function(e){this.state.visiblePopoverTypes.indexOf(e)>-1?this.hide(e):this.show(e)},show:function(e){var o=this.state.visiblePopoverTypes,r=o.indexOf(e);r>-1||(o.push(e),this.setState({visiblePopoverTypes:o}))},hide:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=this.state.visiblePopoverTypes,t=r.indexOf(e);t!==-1&&(r.splice(t,1),this.setState({visiblePopoverTypes:r},o))},showContextualPopovers:function(e){var o=_react2.default.Children.toArray(this.props.children);o.some(function(e){return e.props.triggerOn===_popover.Triggers.RIGHTCLICK})&&(e.preventDefault(),this.show(_popover.Triggers.RIGHTCLICK))},toggleClickPopovers:function(){this.toggle(_popover.Triggers.CLICK)},showHoverPopovers:function(){this.show(_popover.Triggers.HOVER)},hideHoverPopovers:function(){this.hide(_popover.Triggers.HOVER)},render:function(){var e=this,o=_react2.default.Children.toArray(this.props.children),r=o.shift(),t=_react2.default.cloneElement(r,{ref:"popoverAnchor",onClick:this.toggleClickPopovers,onContextMenu:this.showContextualPopovers,onMouseOver:this.showHoverPopovers,onMouseOut:this.hideHoverPopovers}),i=[];return this.refs.popoverAnchor&&(i=o.filter(function(o){return e.state.visiblePopoverTypes.indexOf(o.props.triggerOn)>-1}).map(function(o){var r=o.props.onHide;return _react2.default.cloneElement(o,{onHide:e.hide.bind(e,o.props.triggerOn,r),popoverAnchor:e.refs.popoverAnchor})})),_react2.default.createElement("div",this.props,t,i)}});exports.default=PopoverContainer,module.exports=exports.default;
},{"../../platform/invariant":"./platform/invariant","../constants/popover":"./atoms/constants/popover","react":"./node_modules/react/react.js"}],"./atoms/popover/popover_content":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_popover=require("../styles/popover"),_popover2=_interopRequireDefault(_popover),_popover_arrow_small=require("../styles/popover_arrow_small"),_popover_arrow_small2=_interopRequireDefault(_popover_arrow_small),_popover_arrow_medium=require("../styles/popover_arrow_medium"),_popover_arrow_medium2=_interopRequireDefault(_popover_arrow_medium),_popover_arrow_large=require("../styles/popover_arrow_large"),_popover_arrow_large2=_interopRequireDefault(_popover_arrow_large),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_layer=require("../layer.jsx"),_layer2=_interopRequireDefault(_layer),_popover_positioning=require("./popover_positioning"),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),_object=require("../../platform/utils/object"),_popover3=require("../constants/popover"),PopoverContent=_react2.default.createClass({displayName:"PopoverContent",childContextTypes:{notifyPopoverChanged:_react.PropTypes.func},getChildContext:function(){return{notifyPopoverChanged:this.updatePosition}},getDefaultProps:function(){return{permittedArrowDirections:[_popover3.PermittedArrowDirections.ANY],boundingBox:void 0,triggerOn:_popover3.Triggers.MOUNT,align:_popover3.Align.CENTER,arrowSize:_popover3.ArrowSizes.M,offset:0,bg:_popover3.BackgroundKinds.DEFAULT,zAltitude:_mail_ui_vars.ZIndices.POPOVER.LOW,onHide:function(){},onShow:function(){},overflowScroll:!0,persistent:!1,isArrowVisible:!0}},getInitialState:function(){return{isVisible:!1,arrowDirection:this.props.permittedArrowDirections[0]}},handleKeyDown:function(e){switch(e.key){case"Escape":return e.preventDefault(),e.stopPropagation(),void this.hide();default:return}},handleClick:function(){this.props.persistent||this.hide()},getArrowClassNames:function(e){var r=_popover_arrow_medium2.default;return this.props.arrowSize===_popover3.ArrowSizes.S?r=_popover_arrow_small2.default:this.props.arrowSize===_popover3.ArrowSizes.L&&(r=_popover_arrow_large2.default),(0,_css2.default)(r,{arrowDirectionDown:e===_popover3.PermittedArrowDirections.DOWN,arrowDirectionLeft:e===_popover3.PermittedArrowDirections.LEFT,arrowDirectionRight:e===_popover3.PermittedArrowDirections.RIGHT,bg:this.props.bg,zAltitude:this.props.zAltitude,align:this.props.align})},componentDidMount:function(){var e=this;this.updatePosition(),this.props.onShow(),this.setState({isVisible:!0},function(){e.props.persistent||(window.addEventListener("resize",e.hide,!1),window.addEventListener("mousedown",e.handleWindowMouseDown,!1))})},componentWillUnmount:function(){clearTimeout(this.positionTimeout),window.removeEventListener("resize",this.hide,!1),window.removeEventListener("mousedown",this.handleWindowMouseDown,!1)},componentDidUpdate:function(){var e=this;this.positionTimeout=setTimeout(function(){e.refs.popoverContent&&e.updatePosition()},0)},updatePosition:function(){var e=this,r=this.props,o=r.overflowScroll,t=r.popoverAnchor,i=r.align,n=r.offset,s=r.arrowSize,p=r.isArrowVisible,a=r.permittedArrowDirections,l=(0,_popover_positioning.getPopoverLayerStyles)((0,_reactDom.findDOMNode)(t),(0,_reactDom.findDOMNode)(this.refs.popoverContent),i,s,n,a),_=l.arrowDirection,u=l.positioningStyles,d=l.innerContentScrollingStyles;o||(d=null),p&&Object.assign(this.refs.popoverArrow.style,this.getArrowStyle()),_!==this.state.arrowDirection?this.setState({arrowDirection:_},function(){Object.assign(e.refs.popoverContent.style,u),Object.assign(e.refs.popoverInnerContent.style,d)}):(Object.assign(this.refs.popoverContent.style,u),Object.assign(this.refs.popoverInnerContent.style,d))},handleWindowMouseDown:function(e){var r=(0,_reactDom.findDOMNode)(this.refs.popoverContent),o=(0,_reactDom.findDOMNode)(this.props.popoverAnchor),t=!r.contains(e.target)&&r!==e.target,i=o.contains(e.target)||o===e.target;t&&!i&&this.hide()},hide:function(){this.props.onHide()},getArrowStyle:function(){var e=this.props,r=e.offset,o=e.align,t=e.arrowSize,i=e.popoverAnchor,n=(0,_reactDom.findDOMNode)(i).getBoundingClientRect(),s=this.state.arrowDirection,p=_popover3.ArrowWidths[t],a=r-p,l="",_="";if(o!==_popover3.Align.CENTER){var u=void 0;return s===_popover3.PermittedArrowDirections.LEFT||s===_popover3.PermittedArrowDirections.RIGHT?(u=_popover3.Orientations.VERTICAL,a+=n.height/2):(u=_popover3.Orientations.HORIZONTAL,a+=n.width/2),o===_popover3.Align.END&&(a*=-1),s!==_popover3.PermittedArrowDirections.DOWN&&s!==_popover3.PermittedArrowDirections.RIGHT||(l="rotate(180deg)",o===_popover3.Align.END?_="flex-start":o===_popover3.Align.START&&(_="flex-end")),{transform:u===_popover3.Orientations.HORIZONTAL?"translateX("+a+"px) "+l:"translateY("+a+"px) "+l,justifyContent:_}}},render:function(){var e=this.state.isVisible?"visible":"hidden",r=this.state.arrowDirection,o=this.getArrowClassNames(r),t=(0,_css2.default)(_popover2.default,{bg:this.props.bg,zAltitude:this.props.zAltitude});return _react2.default.createElement(_layer2.default,null,_react2.default.createElement("div",_extends({"data-test-id":"popover-content",className:t.popover,onClick:this.handleClick,onKeyDown:this.handleKeyDown},this.props,{style:{visibility:e},ref:"popoverContent"}),_react2.default.createElement("div",{className:t.popoverContent,ref:"popoverInnerContent"},this.props.children),_react2.default.createElement("div",{className:o.pointerWrapper,ref:"popoverArrow"},this.props.isArrowVisible?_react2.default.createElement("div",{"data-test-id":"popover-content-arrow",className:o.pointer}):null)))}});exports.default=PopoverContent,module.exports=exports.default;
},{"../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../platform/utils/object":"./platform/utils/object","../constants/popover":"./atoms/constants/popover","../layer.jsx":"./atoms/layer","../styles/popover":"./atoms/styles/popover","../styles/popover_arrow_large":"./atoms/styles/popover_arrow_large","../styles/popover_arrow_medium":"./atoms/styles/popover_arrow_medium","../styles/popover_arrow_small":"./atoms/styles/popover_arrow_small","./popover_positioning":"./atoms/popover/popover_positioning","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-dom":"./node_modules/react-dom/index.js"}],"./atoms/popover/popover_positioning":[function(require,module,exports){
"use strict";function getPopoverLayerStyles(t,e,o,r,i,p){var h=e.getBoundingClientRect(),n=_popover.ArrowWidths[r],l=Math.sqrt(2*Math.pow(n,2)),g=Math.sqrt(Math.pow(n,2)-Math.pow(l/2,2)),w={height:t.ownerDocument.documentElement.offsetHeight,width:t.ownerDocument.documentElement.offsetWidth},d=t.getBoundingClientRect(),s=t.ownerDocument.body.scrollLeft,v=t.ownerDocument.body.scrollTop,a={top:d.top+v,right:d.right+s,bottom:d.bottom+v,left:d.left+s,height:d.height,width:d.width},f={x:-(a.width/2+h.width/2),y:a.height/2-h.height/2},c={below:w.height-a.bottom,above:a.top,left:a.left,right:w.width-a.right},m={},D=.95,b=Math.floor(Math.max(c.above,c.below)-w.height*(1-D)),x=Math.floor(Math.max(c.left,c.right)-w.width*(1-D)),A=void 0,_=void 0;if(h.height+g>b&&(A=b-g),h.width+g>x&&(_=x-g),A||_){var P=A||h.height,u=_||h.width;h=Object.assign({},h,{height:P,bottom:h.top+P,width:u,right:h.left+u}),m.overflow="auto",A&&(m.maxHeight=A+"px"),_&&(m.maxWidth=_+"px")}var y={below:c.below*D-h.height>=0,above:c.above*D-h.height>=0,left:c.left*D-h.width>=0,right:c.right*D-h.width>=0};p[0]===_popover.PermittedArrowDirections.ANY&&(p=[_popover.PermittedArrowDirections.UP,_popover.PermittedArrowDirections.DOWN,_popover.PermittedArrowDirections.LEFT,_popover.PermittedArrowDirections.RIGHT]);var T=function(){for(var t={},e=void 0,r=0;r<=p.length;r++){if(e=p[r],e===_popover.PermittedArrowDirections.UP&&y.below){t.top=a.bottom+g+"px",t.left=a.right+f.x+"px";break}if(e===_popover.PermittedArrowDirections.DOWN&&y.above){t.top=a.top-(h.height+g)+"px",t.left=a.right+f.x+"px";break}if(e===_popover.PermittedArrowDirections.LEFT&&y.right){t.top=a.top+f.y+"px",t.left=a.right+g+"px";break}if(e===_popover.PermittedArrowDirections.RIGHT&&y.left){t.top=a.top+f.y+"px",t.left=a.left-(h.width+g)+"px";break}}return e===_popover.PermittedArrowDirections.UP||e===_popover.PermittedArrowDirections.DOWN?o===_popover.Align.START?t.left=a.left-i+"px":o===_popover.Align.END&&(t.left=a.right-h.width+i+"px"):e!==_popover.PermittedArrowDirections.LEFT&&e!==_popover.PermittedArrowDirections.RIGHT||(o===_popover.Align.START?t.top=a.top-i+"px":o===_popover.Align.END&&(t.top=a.bottom-h.height+i+"px")),{positioningStyles:t,arrowDirection:e}},M=T(),S=M.positioningStyles,E=M.arrowDirection;return{positioningStyles:S,innerContentScrollingStyles:m,arrowDirection:E}}exports.__esModule=!0,exports.getPopoverLayerStyles=getPopoverLayerStyles;var _popover=require("../constants/popover");
},{"../constants/popover":"./atoms/constants/popover"}],80:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_progress_bar=require("./styles/progress_bar"),_progress_bar2=_interopRequireDefault(_progress_bar),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),classNames=(0,_css2.default)(_progress_bar2.default),ProgressBar=_react2.default.createClass({displayName:"ProgressBar",render:function(){var e=this.props.value,a=e+"%",r={width:a};return _react2.default.createElement("div",{className:classNames.progress},_react2.default.createElement("div",{className:classNames.placeholder}),_react2.default.createElement("div",{className:classNames.value,style:r,"data-test-id":"progress-bar",role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e},_react2.default.createElement("span",{className:classNames.label,"data-test-id":"progress-value",role:"presentation"},a)))}});exports.default=ProgressBar,module.exports=exports.default;
},{"./styles/progress_bar":91,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],81:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_search_header=require("./styles/search_header"),_search_header2=_interopRequireDefault(_search_header),_button=require("../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_segmented_control=require("./segmented_control.jsx"),_segmented_control2=_interopRequireDefault(_segmented_control),_suggested_word=require("./suggested_word.jsx"),_suggested_word2=_interopRequireDefault(_suggested_word),_mail_constants=require("../platform/mail_constants"),_search_suggest_contact=require("./search_suggest_contact.jsx"),_search_suggest_contact2=_interopRequireDefault(_search_suggest_contact),_lazy_component=require("./lazy_component"),_popover_content=require("./popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover=require("./constants/popover"),_mail_ui_vars=require("../platform/utils/mail_ui_vars"),_utils=require("../platform/utils"),_constants=require("../platform/rapid_client/constants"),_reactIntl=require("react-intl"),SUPPORTED_CONTENT_TYPES=[_mail_constants.ListContentTypes.MESSAGES,_mail_constants.ListContentTypes.IMAGES,_mail_constants.ListContentTypes.DOCUMENTS],strings=(0,_reactIntl.defineMessages)({messages_aria_label:{id:"search.messages_aria_label",defaultMessage:"Messages, selected"},images_aria_label:{id:"search.images_aria_label",defaultMessage:"Images, selected"},documents_aria_label:{id:"search.documents_aria_label",defaultMessage:"Documents, selected"},content_filter_messages:{id:"search.content_filter_messages",defaultMessage:"Messages"},content_filter_images:{id:"search.content_filter_images",defaultMessage:"Photos"},content_filter_documents:{id:"search.content_filter_documents",defaultMessage:"Documents"}}),SearchHeader=_react2.default.createClass({displayName:"SearchHeader",contextTypes:{getCss:_react.PropTypes.func,intl:_reactIntl.intlShape.isRequired},handleContentTypeChange:function(e,t){var s=_constants.MKEYS["FILTER_"+t],r=s?{mKey:s,sec:_constants.SEC_VALUES.HEADER_LIST,interactionType:(0,_utils.getInteractionFromEvent)(e)}:null;this.props.onContentTypeChange({listContentType:t,i13nModel:r})},renderContentTypeFilter:function(e){var t=this,s=this.props.activeContentType,r=this.context.intl.formatMessage,n=s===_mail_constants.ListContentTypes.MESSAGES,a=s===_mail_constants.ListContentTypes.IMAGES,o=s===_mail_constants.ListContentTypes.DOCUMENTS;return _react2.default.createElement(_segmented_control2.default,{activeIndex:SUPPORTED_CONTENT_TYPES.indexOf(s)},_react2.default.createElement(_button2.default,{className:e.filterItem,"data-iskeynav":!0,tabIndex:_mail_ui_vars.TabIndices.SEGMENTED_CONTROL_FILTERS,"aria-label":n?r(strings.messages_aria_label):null,onClick:function(e){return t.handleContentTypeChange(e,_mail_constants.ListContentTypes.MESSAGES)},"data-test-id":"btn-messages-tab"},r(strings.content_filter_messages)),_react2.default.createElement(_button2.default,{className:e.filterItem,"data-iskeynav":!0,tabIndex:_mail_ui_vars.TabIndices.SEGMENTED_CONTROL_FILTERS,"aria-label":a?r(strings.images_aria_label):null,onClick:function(e){return t.handleContentTypeChange(e,_mail_constants.ListContentTypes.IMAGES)},ref:"imagesHeader","data-test-id":"btn-photos-tab"},r(strings.content_filter_images)),_react2.default.createElement(_button2.default,{className:e.filterItem,"data-iskeynav":!0,tabIndex:_mail_ui_vars.TabIndices.SEGMENTED_CONTROL_FILTERS,"aria-label":o?r(strings.documents_aria_label):null,onClick:function(e){return t.handleContentTypeChange(e,_mail_constants.ListContentTypes.DOCUMENTS)},"data-test-id":"btn-documents-tab"},r(strings.content_filter_documents)),this.renderSearchCue(),this.renderHSNarrowSearchCue())},updateContent:function(){this.refs._content.updatePosition()},renderSearchCue:function(){return this.props.showSearchCue&&this.refs.imagesHeader?_react2.default.createElement(_popover_content2.default,{popoverAnchor:this.refs.imagesHeader,align:_popover.Align.CENTER,triggerOn:_popover.Triggers.MOUNT,permittedArrowDirections:[_popover.PermittedArrowDirections.UP],offset:16,ref:"_content",zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../molecules/scout_cue/",cueName:"searchCue",onShow:this.updateContent,close:this.props.activeContentType!==_mail_constants.ListContentTypes.MESSAGES,_moduleGetter:function(){return require("../molecules/scout_cue/")}})):null},renderHSNarrowSearchCue:function(){return this.props.showHSNarrowSearchCue&&this.refs.imagesHeader?_react2.default.createElement(_popover_content2.default,{popoverAnchor:this.refs.imagesHeader,align:_popover.Align.CENTER,triggerOn:_popover.Triggers.MOUNT,permittedArrowDirections:[_popover.PermittedArrowDirections.UP],offset:16,ref:"_content",bg:_popover.BackgroundKinds.GRADIENT,zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../molecules/scout_cue/",cueName:"HSNarrowSearchCue",onShow:this.updateContent,close:this.props.activeContentType!==_mail_constants.ListContentTypes.MESSAGES,_moduleGetter:function(){return require("../molecules/scout_cue/")}})):null},renderSuggestedWords:function(){var e=this.props.suggestedWords,t=e[0];return t?_react2.default.createElement(_suggested_word2.default,{suggestedWord:t}):null},renderSuggestedContacts:function(){var e=this.props.suggestedContacts;return!this.props.isPeopleSearch&&e&&e.length>0&&_react2.default.createElement(_search_suggest_contact2.default,{contacts:e,onClick:this.props.onContactClick})},render:function(){var e=this.context.getCss(_search_header2.default);return _react2.default.createElement("div",{className:e.searchHeader,"data-test-id":"search-header"},this.renderContentTypeFilter(e),this.renderSuggestedWords(),this.renderSuggestedContacts())}});exports.default=SearchHeader,module.exports=exports.default;
},{"../atoms/button.jsx":"./atoms/button","../molecules/scout_cue/":"./molecules/scout_cue","../platform/mail_constants":"./platform/mail_constants","../platform/rapid_client/constants":"./platform/rapid_client/constants","../platform/utils":"./platform/utils","../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","./constants/popover":"./atoms/constants/popover","./lazy_component":"./atoms/lazy_component","./popover/popover_content.jsx":"./atoms/popover/popover_content","./search_suggest_contact.jsx":82,"./segmented_control.jsx":83,"./styles/search_header":93,"./suggested_word.jsx":98,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],82:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_types=require("../types"),_search_suggest_contact=require("./styles/search_suggest_contact"),_search_suggest_contact2=_interopRequireDefault(_search_suggest_contact),_email_pill=require("../molecules/hover_card/email_pill.jsx"),_email_pill2=_interopRequireDefault(_email_pill),_pill=require("./pill.jsx"),_pill2=_interopRequireDefault(_pill),_mail_ui_vars=require("../platform/utils/mail_ui_vars"),_themes=require("../platform/theming/themes"),strings=(0,_reactIntl.defineMessages)({related_searches:{id:"search.related_searches",defaultMessage:"Related searches:"},related_search:{id:"search.related_search",defaultMessage:"Related search:"}}),SearchSuggestContact=_react2.default.createClass({displayName:"SearchSuggestContact",contextTypes:{intl:_reactIntl.intlShape.isRequired,getCss:_react2.default.PropTypes.func,getThemeMode:_react2.default.PropTypes.func},statics:{filterContacts:function(e,t){var a=t.map(function(e){var t=e.email;return t});return e.length&&(e=e.filter(function(e){var t=e.email,r=e.emails,s=void 0===r?[]:r,l=t||s[0];return!!l&&a.indexOf(t)===-1})),e}},getDefaultProps:function(){return{tabIndex:-1,maxContactsVisible:2,selectedContacts:[],contacts:[]}},renderPill:function(e,t,a,r){var s=this,l=e.name,i=e.position,c=e.xobniId,n=e.email,u=e.emails,_=void 0===u?[]:u,o=n||_[0],d=this.context.getThemeMode()===_themes.ThemeModes.DARK;return _react2.default.createElement(_email_pill2.default,{key:c,email:o,isCompose:!1},_react2.default.createElement(_pill2.default,{value:l,title:i,contactId:c,contactEmail:o,isLastElement:t===a.length-1,isSelected:r,onPillClick:function(){return s.props.onClick(e)},contact:e,useEllipsis:!0,maxWidth:_mail_ui_vars.PillMaxWidths.S,isDark:d}))},render:function(){var e=this,t=[],a=this.props.maxContactsVisible,r=SearchSuggestContact.filterContacts(this.props.contacts,t).slice(0,a),s=r.length>1?strings.related_searches:strings.related_search,l=this.context.getCss(_search_suggest_contact2.default);return r.length>0&&_react2.default.createElement("div",{className:l.container,"data-test-id":"search-suggest-contact"},_react2.default.createElement("div",{className:l.labelPadding},_react2.default.createElement(_reactIntl.FormattedMessage,s)),r.map(function(t,a){return e.renderPill(t,a,r,!1)}))}});module.exports=SearchSuggestContact;
},{"../molecules/hover_card/email_pill.jsx":181,"../platform/theming/themes":"./platform/theming/themes","../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../types":"./types","./pill.jsx":"./atoms/pill","./styles/search_suggest_contact":94,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],83:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_segmented_control=require("./styles/segmented_control"),_segmented_control2=_interopRequireDefault(_segmented_control),SegmentedControl=_react2.default.createClass({displayName:"SegmentedControl",contextTypes:{getCss:_react.PropTypes.func},getDefaultProps:function(){return{activeIndex:-1}},renderSegment:function(e,t,r,n){return r===t?_react2.default.createElement("div",{className:n.activeSegment},e):_react2.default.createElement("div",{className:n.inactiveSegment},e)},render:function(){var e=this,t=this.context.getCss(_segmented_control2.default),r=this.props,n=r.children,a=r.activeIndex;return _react2.default.createElement("div",{className:t.container,"data-test-id":"segmented-control"},_react2.default.Children.map(n,function(r,n){return e.renderSegment(r,n,a,t)}))}});exports.default=SegmentedControl,module.exports=exports.default;
},{"./styles/segmented_control":95,"react":"./node_modules/react/react.js"}],84:[function(require,module,exports){
module.exports={className:{default:{account:"en_0 E_6MGW ac_C C_52qC",menuButton:"I_T b_0 C_52qC ir3_Z27CUfh",button:"D_F ab_C y_1ACvVU A_6EqO",accountText:"E_eo6",menuName:"u_b D_B J_x o_h G_e",menuAddress:"D_B J_x o_h G_e",menuContainer:"s_3nV5V a_3v1qi H_7iGr D_F ek_BB gl_C X_6Fd5",logoutLink:"H_72FG i_72FG X_6Fd5 D_B I_ZnkeaL ir3_2d4VCo cZ11XJIl_0"}},_key:"1udwB0"};
},{"./src/atoms/styles/atomic_account_menu.css":"./atoms/styles/atomic_account_menu"}],85:[function(require,module,exports){
module.exports={className:{default:{accountList:"M_0 P_0 hd_n",listItem:"D_F H_6NIX P_0 ab_C ir3_2d4VCo it3_dRA p3_R",text:"em_N A_6EWk X_6DEy o_h G_e C_Z1YRXYn J_x",activeText:"em_N A_6EWk X_6DEy o_h G_e C_Z1YRXYn J_x u_b",unreadCount:"en_0 E_fq7",settingGear:"P_Z26qe3x p_R R_fq7 Q_6DEy cdPFi_Z26U5se cdPFi4_Z291T0t",statusIcon:"E_fq7",expiredIcon:"E_eDQ"},"themeMode-MEDIUM":{text:"C_ak5m8",settingGear:"cdPFi_ak5m8 cdPFi4_52qC",listItem:"ir3_Z1a7UWG"},"themeMode-DARK":{text:"C_ak5m8",settingGear:"cdPFi_ak5m8 cdPFi4_52qC",listItem:"ir3_Z1a7UWG"},"themeCombo-LIGHT_DEFAULT":{listItem:"I4_2iedUU",activeText:"C_Z2aVTcY"},"themeCombo-MEDIUM_DEFAULT":{listItem:"I4_2iedUU",activeText:"C_Z21zYBA"},"themeCombo-DARK_DEFAULT":{listItem:"I4_2iedUU",activeText:"C_Z21zYBA"},"themeCombo-LIGHT_SUNRISE":{listItem:"I4_iPGvQ",activeText:"C_ZmlXUP"},"themeCombo-MEDIUM_SUNRISE":{listItem:"I4_iPGvQ",activeText:"C_ZmlXUP"},"themeCombo-DARK_SUNRISE":{listItem:"I4_iPGvQ",activeText:"C_ZmlXUP"},"themeCombo-LIGHT_AQUA_GREEN":{listItem:"I4_2sGXKL",activeText:"C_Z1UHURv"},"themeCombo-MEDIUM_AQUA_GREEN":{listItem:"I4_2sGXKL",activeText:"C_Z1UHURv"},"themeCombo-DARK_AQUA_GREEN":{listItem:"I4_2sGXKL",activeText:"C_Z1UHURv"},"themeCombo-LIGHT_AQUA_BLUE":{listItem:"I4_ZzKE3L",activeText:"C_Z280Xf5"},"themeCombo-MEDIUM_AQUA_BLUE":{listItem:"I4_ZzKE3L",activeText:"C_Z280Xf5"},"themeCombo-DARK_AQUA_BLUE":{listItem:"I4_ZzKE3L",activeText:"C_Z280Xf5"},"themeCombo-LIGHT_DEEP_PURPLE":{listItem:"I4_Z1I2xFu",activeText:"C_Zwa5YI"},"themeCombo-MEDIUM_DEEP_PURPLE":{listItem:"I4_Z1I2xFu",activeText:"C_Zwa5YI"},"themeCombo-DARK_DEEP_PURPLE":{listItem:"I4_Z1I2xFu",activeText:"C_Zwa5YI"},"themeCombo-LIGHT_BLUE_NIGHT":{listItem:"I4_NDpE4",activeText:"C_Z21zYBA"},"themeCombo-MEDIUM_BLUE_NIGHT":{listItem:"I4_NDpE4",activeText:"C_Z21zYBA"},"themeCombo-DARK_BLUE_NIGHT":{listItem:"I4_NDpE4",activeText:"C_Z21zYBA"}},_key:"NEh0S"};
},{"./src/atoms/styles/atomic_account_switcher.css":"./atoms/styles/atomic_account_switcher"}],86:[function(require,module,exports){
module.exports={className:{default:{learnMore:"e_dRA Q_fq7 I_T b_2fAfSG p_R C_Z2aVTcY r_P P_fQoXz",link:"H_74JI o_h A_6EqO ab_C p_R D_F I_Znwqu5 cdPFi_Z291T0t k_w I4_ZpgeKK",imageContainer:"H_6UbO W_6UbO P_Z1QKD9J en_0 i_0",spacer:"D_F en_0 ab_C W_6LEV H_6D6F P_Z1fenNR",sponsoredIcon:"r_P b_0 P_0 M_0 I_T en_0 ac_C",advertiser:"o_h J_x G_e em_N E_6Fd5 u_b D_B",message:"D_F ab_AJ o_h H_6D6F E_72FG em_N J_x",subjectContainer:"en_0 a_6D6F D_F i_74JI",subject:"o_h G_e J_x a_6D6F en_N u_b Q_fq7",snippet:"J_x o_h G_e C_Z1Vx4Yg Q_fq7",sponsoredContainer:"ab_C gl_CH D_F em_0 en_0 s_7jIs N_eo6 A_6DUj C_Z1Vx4Yg",sponsored:"A_6DUj C_Z1Vx4Yg N_eo6",chevronDown:"V_GI P_Z2rzFgL",mbBeacon:"D_n",adFeedbackContainer:"P_3Y3Gk",gridB1:"D_F o_h ab_C H_6D6F a_3vhr3 em_qk ej_0",gridB2:"D_F ab_C H_6D6F o_h em_sL ej_0"},isCompactLayout:{link:"H_7rdk X_0",imageContainer:"H_6NIX W_6NIX P_Z24H4Mu",snippet:"Q_0",sponsored:"N_0",sponsoredContainer:"ek_BB N_0 je_eTB",iconContainer:"D_F gl_CH W_6D6F",chevronDown:"V_ P_0",spacer:"D_n",gridB2:"em_0 ej_7kKt",gridB1:"a_n",compactMessage:"s_0"},sponsoredCompactLayout:{imageContainer:"P_1zqngo",sponsoredContainer:"jb_6LEV"},feedbackEnabled:{chevronDown:"D_n",iconContainer:"gl_C"},"themeMode-DARK":{link:"C_ZpQYvz I_sgPuo m_ZYfFSw cdPFi_52qC I4_sgPuT",snippet:"C_ZvsWfq",sponsored:"C_ZvsWfq"}},_key:"nUVLF"};
},{"./src/atoms/styles/atomic_ad_list_item.css":"./atoms/styles/atomic_ad_list_item"}],87:[function(require,module,exports){
module.exports={className:{default:{buttonContainer:"I_52qC D_F M_3gJOe ab_C"}},_key:"Mr5Pj"};
},{"./src/atoms/styles/atomic_advanced_search_button.css":"./atoms/styles/atomic_advanced_search_button"}],"./atoms/styles/alert_dialog":[function(require,module,exports){
module.exports={className:{default:{container:"W_3zKan k_w I_52qC D_F el_QDCVj",header:"M_0 P_SdQ8b D_F el_Z1mLfFl ab_AJ",icon:"p_a M_6Fd5",title:"em_N u_e69 A_6FsP M_ZlnAYq",close:"Q_6Eb4 ac_C",message:"P_kT94R",controls:"P_kT94R"}},_key:"11hA3I"};
},{"./src/atoms/styles/atomic_alert_dialog.css":"./atoms/styles/atomic_alert_dialog"}],"./atoms/styles/attachment_icon":[function(require,module,exports){
module.exports={className:{default:{attachmentIcon:"W_74JI H_74JI"}},_key:"Z1xhCJm"};
},{"./src/atoms/styles/atomic_attachment_icon.css":"./atoms/styles/atomic_attachment_icon"}],"./atoms/styles/bidi_input":[function(require,module,exports){
module.exports={className:{default:{inputContainer:"p_R D_F W_6D6F",input:"y_1ACvVU P_3gJOe",clearButtonContainer:"p_a T_0 R_0 B_0 W_6UbO D_F gl_C ab_C"},showClear:{input:"N_6UbO"},"dir-rtl":{input:"N_0 X_6UbO",clearButtonContainer:"L_0 R_A"}},_key:"2vhju3"};
},{"./src/atoms/styles/atomic_bidi_input.css":"./atoms/styles/atomic_bidi_input"}],"./atoms/styles/button":[function(require,module,exports){
module.exports={className:{default:{button:"P_0 C_Z291T0t r_P y_1ACvVU A_6EqO ir3_2d4VCo cZ11XJIl_0"},decorated:{button:"k_w e_dRA D_X M_6LEV o_v p_R V_M t_C cZ1RN91d_n A_6EqO u_e69 i_3qGKe P_1EudUu H_A cn_dBP cg_FJ l_T j_n S_n S4_n"},"kind-PRIMARY":{button:"I_Z2aVTcY C_52qC l_Z2aVTcY I3_Z2bdAhD l3_Z2bdIi1 I0_Z2bdAhD l0_Z2bdIi1"},"primaryHover-true_false":{button:"I4_Z2bdAhD l4_Z2bdIi1"},"primaryHover-true_true":{button:"I4_Z2aVTcY l4_Z2aVTcY"},"kind-SECONDARY":{button:"I_52qC C_Z2aVTcY l_Z2aVTcY M_0 I4_52qC C4_Z2dyg2z l4_Z2dyg2z I3_ZpQYvz C3_Z2dyg2z l3_Z2dyg2z I0_ZpQYvz C0_Z2dyg2z l0_Z2dyg2z"},"kind-DANGER":{button:"I_52qC C_ZnTFMv l_ZnTFMv M_0 I4_v5hft I3_v5hft I0_v5hft"},"kind-ICON":{button:"b_0 P_eo6 q_T C_q"},"kind-PARENT_TEXT_COLOR":{":hover":"C_q"},"kind-ICON_HIGHLIGHTED":{button:"b_0 P_eo6 I_ZnIF8Y i_0 C_q"},"kind-CHROMELESS":{button:"q_T C_Z1Vx4Yg u_e69 b_0 C4_Z2dyg2z C3_Z2aVTcY"},"kind-MENUITEM":{button:"G_e J_x r_P P_Z1E2XDm b_0 s_6D6F M_0 t_l y_q A_q D_F ab_C I_T I4_Znwqu5 I3_Znwqu5 it3_689y"},"kind-MENUITEM_PARENT_TEXT_COLOR":{button:"G_e J_x r_P P_Z1E2XDm b_0 s_6D6F M_0 t_l y_q A_q D_F ab_C I_T I4_Znwqu5 C4_Z2aVTcY I3_Znwqu5 it3_689y"},disabled:{button:"O_cMq r_A"},paddingLess:{button:"P_0"},isOnDarkBackground:{button:"ir3_Z1a7UWG"}},_key:"Z20YPhf"};
},{"./src/atoms/styles/atomic_button.css":"./atoms/styles/atomic_button"}],"./atoms/styles/carousel":[function(require,module,exports){
module.exports={className:{default:{carouselContainer:"D_F ir_n em_N",carousel:"D_F o_h p_R em_N M_3gIgH",list:"D_F ha_n p_a J_x lv_1Ys0hR L_0 B_0 P_0 M_0",prevNavHandle:"em_0 en_0",nextNavHandle:"em_0 en_0"},prevDisabled:{prevNavHandle:"r_BN"},nextDisabled:{nextNavHandle:"r_BN"}},_key:"ZvbBIO"};
},{"./src/atoms/styles/atomic_carousel.css":"./atoms/styles/atomic_carousel"}],88:[function(require,module,exports){
module.exports={className:{default:{link:"e_dRA l_T cn_dBP cg_FJ k_w r_P A_6EqO u_e69 p_R S_n C_52qC I_Z2aVTcY D_F H_6VdP gl_C ab_C en_0 M_1Eu7sD ir3_2d4VCo it3_dRA",badgeContainer:"p_a h_Z1ffcnk L_0 T_67SN"},"themeMode-MEDIUM":{link:"ir3_Z1a7UWG"},"themeMode-DARK":{link:"ir3_Z1a7UWG"},"theme-DEFAULT":{link:"I_Z2aVTcY"},"theme-SUNRISE":{link:"I_ZmlXUP"},"theme-AQUA_GREEN":{link:"I_Z1UHURv"},"theme-AQUA_BLUE":{link:"I_Z280Xf5"},"theme-DEEP_PURPLE":{link:"I_Zwa5YI"},"theme-BLUE_NIGHT":{link:"I_Z21zYBA"}},_key:"QP7D6"};
},{"./src/atoms/styles/atomic_compose_link.css":"./atoms/styles/atomic_compose_link"}],89:[function(require,module,exports){
module.exports={className:{default:{container:"I_52qC r_BN P_Z2eNLUE s_3rBgu k_w D_F ek_BB cZ1RN91d_CS en_0",avatarAndLabel:"D_F Y_6Fd5 Q_6Fd5",avatarLabel:"D_F ek_BB gl_C Q_6Fd5",name:"A_6EqO M_E8xte J_x mq_CZ o_h G_e",position:"M_KXYok C_Z1Vx4Yg A_6DUj J_x mq_CZ o_h G_e",phones:"Y_fq7 Q_6Fd5 A_6DUj",emails:"Y_fq7 Q_6Fd5 A_6DUj",phone:"D_F",email:"D_F",phoneLabel:"W_72FG s_72FG t_r C_Z1Vx4Yg J_x mq_CZ o_h G_e",emailLabel:"W_72FG s_72FG t_r C_Z1Vx4Yg J_x mq_CZ o_h G_e",phoneNumber:"Q_6MGW E_6Fd5 J_x mq_CZ o_h G_e",emailAddress:"Q_6MGW E_6Fd5 J_x mq_CZ o_h G_e",social:"M_Z1aXf1W D_F gl_C",socialIcon:"D_F E_6Eb4 cdPFi_Z1RVMOO cdPFi4_Z2aVTcY"},isInRightRail:{container:"M_19MWT2 W_3v1qi P_0",avatarLabel:"W_3rdfm",phoneNumber:"W_3rdfm",emailAddress:"W_3rdfm"},isDark:{container:"I_sgPuT C_ZpQYvz",position:"C_ZvsWfq",phoneLabel:"C_ZvsWfq",emailLabel:"C_ZvsWfq",socialIcon:"cdPFi_2sqbRh cdPFi4_52qC"}},_key:"Z2ov6Km"};
},{"./src/atoms/styles/atomic_contactcard.css":"./atoms/styles/atomic_contactcard"}],"./atoms/styles/drag_image":[function(require,module,exports){
module.exports={className:{default:{dragIcon:"H_6FIA Z_7G9S p_a",counter:"D_X H_6Fd5 W_6Fd5 Z_7G9T p_a L_fFR T_6Fd5 e_e5X t_C q_ZnTFMv C_52qC"}},_key:"1HvlCH"};
},{"./src/atoms/styles/atomic_drag_image.css":"./atoms/styles/atomic_drag_image"}],"./atoms/styles/dual_action":[function(require,module,exports){
module.exports={className:{default:{container:"W_3zJDR k_w I_52qC D_F el_QDCVj",header:"M_0 P_Qw4gz A_6FsP u_e69 D_F el_Z1mLfFl ab_AJ",icon:"p_a M_6Fd5",title:"em_N",close:"Q_6Eb4",message:"P_ZG0ms9",controls:"P_ZG0ms9"},hideIcon:{header:"P_JMQ5f",message:"P_Z2fgN7g",controls:"P_ZG120x"},showCustomTitle:{header:"u_dPo i_6MGW je_6DEy"}},_key:"Z19pLEC"};
},{"./src/atoms/styles/atomic_dual_action.css":"./atoms/styles/atomic_dual_action"}],"./atoms/styles/flex_spacer":[function(require,module,exports){
module.exports={className:{default:{flexSpacer:"em_N en_N"}},_key:"93Fn1"};
},{"./src/atoms/styles/atomic_flex_spacer.css":"./atoms/styles/atomic_flex_spacer"}],90:[function(require,module,exports){
module.exports={className:{default:{container:"D_F",label:"D_F ab_C y_1ACvVU A_6EqO P_eo6",itemLabel:"em_N P_0 o_h G_e",labelText:"X_eo6",customGroup:"K_3rehn iz_A iy_h",systemGroup:"hd_n P_0 M_0 m_Z14vXdP",lastGroup:"hd_n P_0 M_0 m_0",popoverContainer:"D_F",popoverContent:"P_3HLUz",shortcut:"ab_CH Q_6Fd5",fullLabel:"D_F W_6D6F",anchorButton:"a_3rtg7",noResultContainer:"D_F ab_C C_Z1Xxgu2 i_6VdP",inputContainer:"D_F ab_C",inputField:"em_N cn_0 H_6VdP X_0 A_6EqO C_Z291T0t ir3_0"}},_key:"jKMPR"};
},{"./src/atoms/styles/atomic_folder_menu.css":"./atoms/styles/atomic_folder_menu"}],"./atoms/styles/fuji_icon":[function(require,module,exports){
module.exports={className:{default:{icon:"D_X W_6MGW H_6MGW cdPFi_Z291T0t cZW7ROP_n en_0"},allowPointerEvents:{icon:"cZW7ROP_A"},"colorState-NORMAL_LESS_DIM":{icon:"cdPFi_Z26U5qH"},"colorState-DARK":{icon:"cdPFi_Z291T0t"},"colorState-TRANSPARENT":{icon:"cdPFi_T"},"colorState-FAINT":{icon:"cdPFi_ZpQYvz"},"colorState-LESS_IMPORTANT":{icon:"cdPFi_Z1Xxgu2"},"colorState-COOL_FAINT":{icon:"cdPFi_ZvsWfq"},"colorState-INHERITED":{icon:"cdPFi_q"},"colorState-INVERTED":{icon:"cdPFi_52qC"},"colorState-INVERTED_DIM":{icon:"cdPFi_ak5kB"},"colorState-INVERTED_LESS_DIM":{icon:"cdPFi_ak5m8"},"colorState-SELECTED":{icon:"cdPFi_Z2aVTcY"},"colorState-SELECTED_DARK_THEME_MODE":{icon:"cdPFi_Z21zYBA"},"colorState-STARRED":{icon:"cdPFi_ZkhR3R"},"colorState-STARRED_DARK":{icon:"cdPFi_ZkcwU0"},"colorState-DISABLED":{icon:"cdPFi_Z1TsNWR"},"colorState-WARNING":{icon:"cdPFi_Znn46r"},"colorState-HEADING":{icon:"cdPFi_Z1XBA33"},"colorState-SMARTVIEW_DARK":{icon:"cdPFi_2sqbQg"},"colorState-IMPROVED_GRAY_DARK":{icon:"cdPFi_Z1YRXYn"},"colorState-SECOND_LEVEL_GRAY":{icon:"cdPFi_Z1TsNWR"},"colorState-YBADGE":{icon:"cdPFi_Z25iliW"},"colorState-SUCCESS":{icon:"cdPFi_Z2ak3tK"},"colorState-ATTACH_MEDIA":{icon:"cdPFi_Z3YymY"},"colorState-ATTACH_CAL":{icon:"cdPFi_Z3YymY"},"colorState-ATTACH_EXCEL":{icon:"cdPFi_Zjgrcs"},"colorState-ATTACH_DOC":{icon:"cdPFi_euEfy"},"colorState-ATTACH_SLIDE":{icon:"cdPFi_8Skn3"},"colorState-ATTACH_PDF":{icon:"cdPFi_8Skn3"},"colorState-ATTACH_GENERIC":{icon:"cdPFi_1k4EMl"},"colorState-ATTACH_COMPRESSED":{icon:"cdPFi_1k4EMl"},"colorState-WARNING_GRAD_RED":{icon:"cdPFi_Z1rD0qn"},"size-XXXS":{icon:"W_6EGz H_6EGz"},"size-XXS":{icon:"W_6Fd5 H_6Fd5"},"size-XS":{icon:"W_6LEV H_6LEV"},"size-S":{icon:"W_6MGW H_6MGW"},"size-M":{icon:"W_74JI H_74JI"},"size-L":{icon:"W_7rdk H_7rdk"},"size-XL":{icon:"W_7Ig6 H_7Ig6"},"rotate-D90":{icon:"h_22ufi4"},"rotate-D180":{icon:"h_ZQwKon"},"rotate-D270":{icon:"h_9u8MW"}},_key:"Z1IQAzf"};
},{"./src/atoms/styles/atomic_fuji_icon.css":"./atoms/styles/atomic_fuji_icon"}],"./atoms/styles/fuji_icon_button":[function(require,module,exports){
module.exports={className:{default:{button:"c27KHO0_n b_0 M_0 i_0 I_T y_1ACvVU A_6EqO r_P C_q ir3_2d4VCo",content:"D_F ab_C gl_C W_6D6F",label:"D_X em_N i_6MGW o_h X_eo6 G_e J_x"},"size-XXXS":{button:"P_dBP",label:"i_6EGz"},"size-XXS":{button:"P_dRA",label:"i_6Fd5"},"size-XS":{button:"P_eo6",label:"i_6LEV"},"size-S":{button:"P_fq7",label:"i_6MGW"},"size-M":{button:"P_6Eb4",label:"i_74JI"},"size-L":{button:"P_6Fd5",label:"i_7rdk"},"size-XL":{button:"P_6Fd5",label:"i_7Ig6"},paddingLess:{button:"P_0"},isOnDarkBackground:{button:"ir3_Z1a7UWG"}},_key:"Z2q63mr"};
},{"./src/atoms/styles/atomic_fuji_icon_button.css":"./atoms/styles/atomic_fuji_icon_button"}],"./atoms/styles/hover_fuji_icon_button":[function(require,module,exports){
module.exports={className:{default:{button:"C4_Z2aVTcY"}},_key:"Zt4S9c"};
},{"./src/atoms/styles/atomic_hover_fuji_icon_button.css":"./atoms/styles/atomic_hover_fuji_icon_button"}],"./atoms/styles/infinite_scroll":[function(require,module,exports){
module.exports={className:{default:{main:"H_6D6F W_6D6F",scroll:"p_R Z_0 iy_h iz_A H_6D6F W_6D6F X_6Fd5 N_6Fd5 k_w",container:"hd_n P_0 M_0 p_R",item:"p_a T_0 L_0 R_0",maskItem:"cZ1RN91d_n p_a T_0 L_0 R_0",stickyHeader:"p_a T_0 L_0 R_0 X_6Fd5 I_ZD6Uwa m_0",scrollToTop:"p_a B_0 R_0 H_74JI W_74JI E_6Fd5 I_ZD6Uwa",loading:"p_a B_0 L_0 R_0",focusStealer:"H_0"},"theme-DEFAULT":{scrollToTop:"I_ZMqgig"},"theme-SUNRISE":{scrollToTop:"I_ZNpR8G"},"theme-AQUA_GREEN":{scrollToTop:"I_1dThIz"},"theme-AQUA_BLUE":{scrollToTop:"I_26UHKH"},"theme-DEEP_PURPLE":{scrollToTop:"I_ZRpDQn"},"theme-BLUE_NIGHT":{scrollToTop:"I_ZMqgig"}},_key:"1mEcVn"};
},{"./src/atoms/styles/atomic_infinite_scroll.css":"./atoms/styles/atomic_infinite_scroll"}],"./atoms/styles/list_item":[function(require,module,exports){
module.exports={className:{default:{listItem:"G_e p_R",icon:"i_0"},"kind-WRAP_CONTENT":{listItem:"H_A i_N"},"kind-GRID":{listItem:"P_0 f_l M_dRA ir4_2hvg6c"}},_key:"Z2ovjOp"};
},{"./src/atoms/styles/atomic_list_item.css":"./atoms/styles/atomic_list_item"}],"./atoms/styles/loading_indicator":[function(require,module,exports){
module.exports={className:{default:{wrapper:"D_F en_0 gl_C ab_C H_6MGW o_h",container:"W_6MGW H_6MGW D_X ah_1PEzoz",spinner:"W_6MGW H_6MGW ah_Zq6hUs",arc:"cdPFi_n cZ13pKbK_Z2aVTcY cZ1XO2Ji_dRA c2abBOT_EY cZ1vNhDV_rd cZV8aCd_pI ah_14s73"},"size-S":{container:"W_6Fd5 H_6Fd5",spinner:"W_6Fd5 H_6Fd5"}},_key:"Z1M2mPq"};
},{"./src/atoms/styles/atomic_loading_indicator.css":"./atoms/styles/atomic_loading_indicator"}],"./atoms/styles/menu":[function(require,module,exports){
module.exports={className:{default:{menu:"I_52qC b_Z14vXdP e_dRA j_Z2jsUnk C_Z291T0t Z_3nxNR p_a ir_0 P_3HLUz"}},_key:"ZyUtep"};
},{"./src/atoms/styles/atomic_menu.css":"./atoms/styles/atomic_menu"}],"./atoms/styles/menu_button_container":[function(require,module,exports){
module.exports={className:{default:{buttonContainer:""},active:{buttonContainer:"I_7l9bL"}},_key:"ZTqMOv"};
},{"./src/atoms/styles/atomic_menu_button_container.css":"./atoms/styles/atomic_menu_button_container"}],"./atoms/styles/modal":[function(require,module,exports){
module.exports={className:{default:{grayOverlay:"p_f T_0 R_0 B_0 L_0 Z_3mRud I_Z26U5rI D_F ab_C gl_C",container:"j_1v4Vmf ir3_0"},"kind-LIGHT":{grayOverlay:"I_ZS20V7"}},_key:"WRioz"};
},{"./src/atoms/styles/atomic_modal.css":"./atoms/styles/atomic_modal"}],"./atoms/styles/navigable_list":[function(require,module,exports){
module.exports={className:{default:{list:"hd_n P_0 H_6D6F M_0 ir3_0"},"layout-HORIZONTAL":{list:"D_F"},"layout-GRID":{list:"D_F eo_HB W_6D6F"},disabled:{list:"O_6uB4 cZW7ROP_n"},"kind-TOOLBAR":{list:"D_F ab_C M_0 P_0"},isRestrictedHeight:{list:"iz_A K_3v1qi"}},_key:"Z1bnxvY"};
},{"./src/atoms/styles/atomic_navigable_list.css":"./atoms/styles/atomic_navigable_list"}],"./atoms/styles/overlay":[function(require,module,exports){
module.exports={className:{default:{overlay:"Z_7G9R",shim:"Z_7G9R T_0 B_0 L_0 R_0 p_a q_T"}},_key:"1HLIBC"};
},{"./src/atoms/styles/atomic_overlay.css":"./atoms/styles/atomic_overlay"}],"./atoms/styles/pill":[function(require,module,exports){
module.exports={className:{default:{pillContent:"C_Z291T0t k_w e_6Eb4 b_Z14vXdP M_dRA H_6MGW i_6Mbr ac_C ab_C D_F p_R o_h I_52qC Z_N",avatar:"D_F P_dBP",pillRemove:"D_F p_a R_0 T_0 q_q H_6D6F P_3gIgH M_0 en_0",pillText:"P_oRhLS",dragHoverContent:"D_F H_6D6F W_6D6F p_a T_0 L_0 Z_N",dragHoverLeft:"em_N",dragHoverRight:"em_N",pillContainer:"p_R"},isHovered:{pillContent:"I_ZoExDJ J_x l_ZoExDJ"},isDragImg:{pillContent:"b_2fAfSG"},isSelected:{pillContent:"l_Z2aVTcY I_ZoExDJ"},hasError:{pillContent:"b_Z1222NH I_Zkgkoa",pillText:"P_3gJOe"},useEllipsis:{pillText:"k_BF J_x o_h G_e"},isDark:{pillContent:"C_52qC I_2sqbPK b_efTvb"},isFolderPill:{pillDiv:"W_6LEV H_6LEV I_ZnIF8Y D_F ab_C gl_C e_e5X"},isDragged:{pillContainer:"v_h"},"dragSide-left":{pillContent:"Q_3nx4N",dragHoverRight:"em_0"},"dragSide-right":{pillContent:"E_3nx4N",dragHoverLeft:"em_0"}},_key:"Z1h5iyr"};
},{"./src/atoms/styles/atomic_pill.css":"./atoms/styles/atomic_pill"}],"./atoms/styles/popover":[function(require,module,exports){
module.exports={className:{default:{popover:"p_a Z_d48",popoverAnchor:"D_X",popoverContent:"p_R e_dRA I_52qC j_ZlOSbd"},"bg-DARK":{popoverContent:"C_52qC I_Z291T0t j_n"},"zAltitude-500":{popover:"Z_e69",popoverContent:"j_nWwhY"},"zAltitude-900":{popover:"Z_f8a",popoverContent:"j_ZqTdtW"},"zAltitude-9000":{popover:"Z_7G9R",popoverContent:"j_ZqTdtW"}},_key:"Z1daoJ"};
},{"./src/atoms/styles/atomic_popover.css":"./atoms/styles/atomic_popover"}],"./atoms/styles/popover_arrow_large":[function(require,module,exports){
module.exports={className:{default:{pointerWrapper:"D_F ek_EZ gl_C W_6D6F p_a t_C o_h H_6MGW T_36SjV",pointer:"p_R D_X h_1RtVxM I_52qC j_ZlOSbd W_6MGW H_6MGW M_6Eb4"},arrowDirectionDown:{pointerWrapper:"T_A B_36SjV h_ZQwKon"},arrowDirectionLeft:{pointerWrapper:"ek_BB W_6MGW H_6D6F T_0 L_36SjV"},arrowDirectionRight:{pointerWrapper:"ek_BB W_6MGW H_6D6F T_0 R_36SjV h_ZQwKon"},"zAltitude-500":{pointer:"j_nWwhY"},"zAltitude-900":{pointer:"j_ZqTdtW"},"bg-DARK":{pointer:"I_Z291T0t j_n"},"bg-GRADIENT":{pointer:"I_Z2aVTcY"},"align-START":{pointerWrapper:"gl_CI"},"align-END":{pointerWrapper:"gl_CH"}},_key:"Z10diRe"};
},{"./src/atoms/styles/atomic_popover_arrow_large.css":"./atoms/styles/atomic_popover_arrow_large"}],"./atoms/styles/popover_arrow_medium":[function(require,module,exports){
module.exports={className:{default:{pointerWrapper:"D_F ek_EZ gl_C W_6D6F p_a t_C o_h H_6Eb4 T_36JN3",pointer:"p_R D_X h_1RtVxM I_52qC j_ZlOSbd W_6Eb4 H_6Eb4 M_eTB"},arrowDirectionDown:{pointerWrapper:"T_A B_36JN3 h_ZQwKon"},arrowDirectionLeft:{pointerWrapper:"ek_BB W_6Eb4 H_6D6F T_0 L_36JN3"},arrowDirectionRight:{pointerWrapper:"ek_BB W_6Eb4 H_6D6F T_0 R_36JN3 h_ZQwKon"},"zAltitude-500":{pointer:"j_nWwhY"},"zAltitude-900":{pointer:"j_nWwhY"},"bg-DARK":{pointer:"I_Z291T0t j_n"},"bg-GRADIENT":{pointer:"I_Z2aVTcY"},"bg-LIGHTGRAY":{pointer:"I_ZnkeaL"},"align-START":{pointerWrapper:"gl_CI"},"align-END":{pointerWrapper:"gl_CH"}},_key:"Z2j4sBB"};
},{"./src/atoms/styles/atomic_popover_arrow_medium.css":"./atoms/styles/atomic_popover_arrow_medium"}],"./atoms/styles/popover_arrow_small":[function(require,module,exports){
module.exports={className:{default:{pointerWrapper:"D_F ek_EZ gl_C W_6D6F p_a t_C o_h H_eTB T_69bz",pointer:"p_R D_X h_1RtVxM I_52qC j_ZlOSbd W_eTB H_eTB M_e8l"},arrowDirectionDown:{pointerWrapper:"T_A B_69bz h_ZQwKon"},arrowDirectionLeft:{pointerWrapper:"ek_BB W_eTB H_6D6F T_0 L_69bz"},arrowDirectionRight:{pointerWrapper:"ek_BB W_eTB H_6D6F T_0 R_69bz h_ZQwKon"},"zAltitude-500":{pointer:"j_ZlOSbd"},"zAltitude-900":{pointer:"j_ZlOSbd"},"bg-DARK":{pointer:"I_Z291T0t j_n"},"bg-GRADIENT":{pointer:"I_Z2aVTcY"},"align-START":{pointerWrapper:"gl_CI"},"align-END":{pointerWrapper:"gl_CH"}},_key:"zE2jN"};
},{"./src/atoms/styles/atomic_popover_arrow_small.css":"./atoms/styles/atomic_popover_arrow_small"}],91:[function(require,module,exports){
module.exports={className:{default:{progress:"k_w W_6D6F H_6Fd5 I_52qC p_R",placeholder:"b_Z14vXdP e_fq7 H_6EGz W_dbGOz",value:"p_a T_0 H_6D6F s_6Nds e_fq7 q_199zcl D_F gl_CH N_fq7 lv_ZLoey2",label:"C_52qC A_6DUj u_b i_6Fd5"}},_key:"2ms606"};
},{"./src/atoms/styles/atomic_progress_bar.css":"./atoms/styles/atomic_progress_bar"}],92:[function(require,module,exports){
module.exports={className:{default:{container:"s_3vhr3 k_w I_52qC D_F el_QDCVj M_1vskfw",messageContainer:"i_6Nds t_l A_6EqO",message:"E_6Eb4",subtitle:"C_Z24Sbth t_l A_6Eb4",cancel:"E_68F4 P_eo6 q_T C_Z2aVTcY A_6EqO y_1ACvVU b_0 r_P",bar:"Y_6Eb4"}},_key:"1m1Xv0"};
},{"./src/atoms/styles/atomic_progress_dialog.css":"./atoms/styles/atomic_progress_dialog"}],93:[function(require,module,exports){
module.exports={className:{default:{searchHeader:"P_Z2eaBRY m_Z14vXdP D_F en_0 ek_EZ gl_FM",filterItem:"I_T b_n W_6D6F D_B C_q r_q y_q u_q P_0 A_6EqO ir3_2d4VCo it3_dRA"},"themeMode-DARK":{searchHeader:"m_ZYfFPt"}},_key:"Z27esU1"};
},{"./src/atoms/styles/atomic_search_header.css":"./atoms/styles/atomic_search_header"}],94:[function(require,module,exports){
module.exports={className:{default:{container:"D_F ab_C J_x r_P",labelPadding:"N_eo6"},"themeMode-DARK":{container:"C_52qC"}},_key:"Z2wd6cK"};
},{"./src/atoms/styles/atomic_search_suggest_contact.css":"./atoms/styles/atomic_search_suggest_contact"}],95:[function(require,module,exports){
module.exports={className:{default:{container:"C_Z291T0t D_F ek_EZ H_6VdP p_R J_x",inactiveSegment:"p_R r_P D_F u_b M_Z98QD2 m_tw30f",activeSegment:"p_R r_P D_F u_b M_Z98QD2 m_Z1dQEKn C_Z2aVTcY Z_O"},"themeMode-DARK":{container:"C_52qC"},"theme-DEFAULT":{inactiveSegment:"cdPFi4_Z21zYBA",activeSegment:"C_Z21zYBA bj_Z21zYBA"},"theme-SUNRISE":{inactiveSegment:"cdPFi4_ZmlXUP",activeSegment:"C_ZmlXUP bj_ZmlXUP"},"theme-AQUA_GREEN":{inactiveSegment:"cdPFi4_Z1UHURv",activeSegment:"C_Z1UHURv bj_Z1UHURv"},"theme-AQUA_BLUE":{inactiveSegment:"cdPFi4_Z280Xf5",activeSegment:"C_Z280Xf5 bj_Z280Xf5"},"theme-DEEP_PURPLE":{inactiveSegment:"cdPFi4_Zwa5YI",activeSegment:"C_Zwa5YI bj_Zwa5YI"},"theme-BLUE_NIGHT":{inactiveSegment:"cdPFi4_Z21zYBA",activeSegment:"C_Z21zYBA bj_Z21zYBA"}},_key:"29E0Pc"};
},{"./src/atoms/styles/atomic_segmented_control.css":"./atoms/styles/atomic_segmented_control"}],96:[function(require,module,exports){
module.exports={className:{default:{didYouMean:"A_6EqO C_q u_q p_a L_3rLkT M_1EufYw",didYouMeanWord:"D_X M_3HLUz A_6EqO fd_i u_b"}},_key:"1x0J3a"};
},{"./src/atoms/styles/atomic_suggested_word.css":"./atoms/styles/atomic_suggested_word"}],"./atoms/styles/suggestion_item":[function(require,module,exports){
module.exports={className:{default:{suggestionOption:"D_F P_ZGAgNS k_w H_74JI r_P q4_2ieea9 cZ1WADfW_2ieea9 ab_C",keywordSuggestionOption:"D_F P_ZGAgNS k_w H_74JI r_P q4_2ieea9 cZ1WADfW_2ieea9",suggestionAvatar:"W_6UbO H_6UbO E_6Eb4",personSuggestionLabel:"o_h",suggestionLabel:"J_x G_e o_h",emailAddressLabel:"J_x G_e o_h C_Z1Vx4Yg",keyworSuggestionLabel:"J_x G_e o_h H_6MGW",keywordSuggestionIcon:"X_eTB N_eTB E_fq7"}},_key:"1HoMNO"};
},{"./src/atoms/styles/atomic_suggestion_item.css":"./atoms/styles/atomic_suggestion_item"}],"./atoms/styles/syncing_indicator":[function(require,module,exports){
module.exports={className:{default:{wrapper:"D_F en_0 gl_C ab_C H_6MGW o_h",container:"W_6MGW H_6MGW D_X ah_1Ozsbb",iconColor:"cdPFi_Z2ak3tK"},"size-S":{wrapper:"H_6LEV",container:"W_6LEV H_6LEV"}},_key:"ZlJ8Tb"};
},{"./src/atoms/styles/atomic_syncing_indicator.css":"./atoms/styles/atomic_syncing_indicator"}],97:[function(require,module,exports){
module.exports={className:{default:{container:"A_6DUj P_Z2rzCvT H_6FIA i_6FIA Q_A t_C e_3mS2U C_Z1YRXYn I_ZpQYvz",activeContainer:"A_6DUj P_Z2rzCvT H_6FIA i_6FIA Q_A t_C e_3mS2U C_52qC I_T u_b"},whiteBackground:{container:"C_2sqbRh I_ajP4A"},isAccountSwitcher_MEDIUM:{activeContainer:"I_ajP4A"},isAccountSwitcher_DARK:{activeContainer:"I_ajP4A"},isAccountSwitcher_LIGHT:{activeContainer:"I_ZpQYvz"},"highlightThemeCombo-true_DEFAULT":{container:"C_52qC I_Z2aVTcY"},"highlightThemeCombo-true_SUNRISE":{container:"C_52qC I_ZmlXUP"},"highlightThemeCombo-true_AQUA_GREEN":{container:"C_52qC I_Z1UHURv"},"highlightThemeCombo-true_AQUA_BLUE":{container:"C_52qC I_Z280Xf5"},"highlightThemeCombo-true_DEEP_PURPLE":{container:"C_52qC I_Zwa5YI"},"highlightThemeCombo-true_BLUE_NIGHT":{container:"C_52qC I_Z21zYBA"},"themeMode-LIGHT":{activeContainer:"C_Z291T0t"}},_key:"Z2qYF0K"};
},{"./src/atoms/styles/atomic_unread_count.css":"./atoms/styles/atomic_unread_count"}],98:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function SuggestedWord(e){var t=e.suggestedWord;return _react2.default.createElement("div",{"data-test-id":"did-you-mean",className:classNames.didYouMean},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"search.did_you_mean",defaultMessage:"Showing search results for {suggestedWord}",values:{suggestedWord:_react2.default.createElement("span",{className:classNames.didYouMeanWord,"data-test-id":"did-you-mean-word"},t)}}))}exports.__esModule=!0,exports.default=SuggestedWord;var _react=require("react"),_react2=_interopRequireDefault(_react),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_suggested_word=require("./styles/suggested_word"),_suggested_word2=_interopRequireDefault(_suggested_word),_reactIntl=require("react-intl"),classNames=(0,_css2.default)(_suggested_word2.default);module.exports=exports.default;
},{"./styles/suggested_word":96,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/suggestion_item":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _reactIntl=require("react-intl"),_react=require("react"),_react2=_interopRequireDefault(_react),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_suggestion_item=require("./styles/suggestion_item"),_suggestion_item2=_interopRequireDefault(_suggestion_item),_xavatar=require("./xavatar.jsx"),_xavatar2=_interopRequireDefault(_xavatar),_highlighter=require("./highlighter.jsx"),_highlighter2=_interopRequireDefault(_highlighter),_types=require("../types"),_mail_constants=require("../platform/mail_constants"),_fuji_icon=require("../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../atoms/constants/fuji_icon"),classNames=(0,_css2.default)(_suggestion_item2.default),strings=(0,_reactIntl.defineMessages)({search_email_addresses:{id:"search.email_addresses",defaultMessage:"{emailAddress} & {extraEmailCount} more"}}),SuggestionItem=_react2.default.createClass({displayName:"SuggestionItem",contextTypes:{intl:_reactIntl.intlShape.isRequired},getDefaultProps:function(){return{inputValue:""}},renderAvatar:function(){var e=this.props.suggestion,t=void 0;switch(e.type){case _mail_constants.SuggestionType.PERSON:t=_react2.default.createElement(_xavatar2.default,{contact:{id:e.serviceId},size:_xavatar.Sizes.M});break;default:t=null}return _react2.default.createElement("span",{className:classNames.suggestionAvatar},t)},renderSuggestionLabel:function(){var e=this.props,t=e.suggestion,a=e.inputValue;return _react2.default.createElement(_highlighter2.default,{haystack:t.name,title:t.name,needle:a,formatter:function(e){return _react2.default.createElement("strong",null,e)}})},renderEmailAddressLabel:function(){var e=this.props,t=e.suggestion,a=e.inputValue,s=this.context.intl.formatMessage,r=t.emailIds,i=void 0===r?[]:r,n=i.length-1,l=i[0],u=n>0?s(strings.search_email_addresses,{emailAddress:l,extraEmailCount:n}):l;return _react2.default.createElement(_highlighter2.default,{haystack:u,title:u,needle:a,formatter:function(e){return _react2.default.createElement("strong",null,e)}})},render:function(){var e=this.props.suggestion,t=void 0;switch(e.type){case _mail_constants.SuggestionType.PERSON:t=_react2.default.createElement("div",{className:classNames.suggestionOption},this.renderAvatar(),_react2.default.createElement("div",{className:classNames.personSuggestionLabel},_react2.default.createElement("div",{className:classNames.suggestionLabel},this.renderSuggestionLabel()),_react2.default.createElement("div",{className:classNames.emailAddressLabel},this.renderEmailAddressLabel())));break;case _mail_constants.SuggestionType.KEYWORD:t=_react2.default.createElement("div",{className:classNames.keywordSuggestionOption},_react2.default.createElement("span",{className:classNames.keywordSuggestionIcon},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.SEARCH_MAIL,size:_fuji_icon3.Sizes.S,colorState:_fuji_icon3.ColorStates.NORMAL_LESS_DIM})),_react2.default.createElement("div",{className:classNames.keyworSuggestionLabel},this.renderSuggestionLabel()));break;default:t=null}return t}});exports.default=SuggestionItem,module.exports=exports.default;
},{"../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../platform/mail_constants":"./platform/mail_constants","../types":"./types","./highlighter.jsx":"./atoms/highlighter","./styles/suggestion_item":"./atoms/styles/suggestion_item","./xavatar.jsx":"./atoms/xavatar","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],99:[function(require,module,exports){
"use strict";function _interopRequireDefault(o){return o&&o.__esModule?o:{default:o}}function SVGDefs(){return _react2.default.createElement("svg",{height:"0"},_react2.default.createElement("defs",null,gradients,_react2.default.createElement("clipPath",{id:"clip-orb"},_fuji_icon2._svg.ORB)))}exports.__esModule=!0,exports.default=SVGDefs;var _react=require("react"),_react2=_interopRequireDefault(_react),_mail_ui_vars=require("../platform/utils/mail_ui_vars"),_fuji_icon=require("../atoms/constants/fuji_icon"),_fuji_icon2=require("./fuji_icon.jsx"),COLORS=[{id:"fuji-blue",viewBox:20,startColor:_mail_ui_vars.PALETTE.ycolorTurquoise8a,stopColor:_mail_ui_vars.PALETTE.ycolorBlue10a},{id:"fuji-red",viewBox:20,startColor:_mail_ui_vars.PALETTE.ycolorOrange4a,stopColor:_mail_ui_vars.PALETTE.ycolorPink1a},{id:_fuji_icon.ColorStates.ATTACH_EXCEL,viewBox:48,startColor:_mail_ui_vars.PALETTE.ycolorTurquoise8a,stopColor:_mail_ui_vars.PALETTE.ycolorGreen6a},{id:_fuji_icon.ColorStates.ATTACH_SLIDE,viewBox:48,startColor:_mail_ui_vars.PALETTE.ycolorOrange4a,stopColor:_mail_ui_vars.PALETTE.ycolorPink1a},{id:_fuji_icon.ColorStates.ATTACH_GENERIC,viewBox:48,startColor:_mail_ui_vars.PALETTE.ycolorTurquoise8a,stopColor:_mail_ui_vars.PALETTE.ycolorBlue10a},{id:_fuji_icon.ColorStates.ATTACH_DOC,viewBox:48,startColor:_mail_ui_vars.PALETTE.ycolorBlue10a,stopColor:_mail_ui_vars.PALETTE.ycolorPurple14a},{id:_fuji_icon.ColorStates.ATTACH_MEDIA,viewBox:48,startColor:_mail_ui_vars.PALETTE.ycolorPink1a,stopColor:_mail_ui_vars.PALETTE.ycolorPurple14a},{id:_fuji_icon.ColorStates.WARNING_GRAD_RED,viewBox:48,startColor:_mail_ui_vars.PALETTE.ycolorSalmon3b,stopColor:_mail_ui_vars.PALETTE.ycolorFuchsia18a}],gradients=COLORS.map(function(o){var r=o.id,e=o.viewBox,a=o.startColor,i=o.stopColor;return _react2.default.createElement("linearGradient",{key:r,id:r,x1:"0",x2:e,y1:e,y2:"0",gradientUnits:"userSpaceOnUse"},_react2.default.createElement("stop",{offset:"40%",stopColor:a}),_react2.default.createElement("stop",{offset:"60%",stopColor:i}))});module.exports=exports.default;
},{"../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","./fuji_icon.jsx":"./atoms/fuji_icon","react":"./node_modules/react/react.js"}],"./atoms/svg_image":[function(require,module,exports){
"use strict";function _interopRequireDefault(M){return M&&M.__esModule?M:{default:M}}exports.__esModule=!0,exports.SVGImages=void 0;var _SVGImages,_react=require("react"),_react2=_interopRequireDefault(_react),_svg_image=require("./constants/svg_image"),_object=require("../platform/utils/object"),DATA_URI_PREFIX="data:image/svg+xml;base64,",SVGImages=exports.SVGImages=(_SVGImages={},_SVGImages[_svg_image.Kinds.EMPTY_FOLDER]=DATA_URI_PREFIX+"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxNjAgMTYwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxNjAgMTYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJpbGx1c3RyYXRpb25zIj4NCgk8cG9seWdvbiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0UwRTRFOSIgcG9pbnRzPSI5MS45MjIsMzkuMjY4IDEyMS4wMjUsMzkuMjY4IDEyMS41MjcsMjkgMTE0LDI5DQoJCTExNCwzNi43MDEgOTEuOTIyLDM2LjcwMSAJIi8+DQoJPGNpcmNsZSBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0UwRTRFOSIgY3g9IjkxLjkyMiIgY3k9IjE5Ljk0IiByPSIyLjQxNiIvPg0KCTxjaXJjbGUgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNFMEU0RTkiIGN4PSIxMjAuMzE4IiBjeT0iMTkuOTQiIHI9IjIuNDE2Ii8+DQoJPHBhdGggZmlsbD0iI0UwRTRFOSIgZD0iTTEyOS45NDUsMTAuNjE4Yy0xLjYyNi0xLjMwMi0zLjM2OS0yLjE5LTUuMTE2LTIuNzQyQzEyMy43NjMsNy41NCwxMjIuMDIzLDcsMTIwLjI3LDdTNTYuMjkzLDcsNTYuMjkzLDcNCgkJYy0xMS42NzUsMC0yMS4xMzYsOS40NjQtMjEuMTM2LDIxLjE0djM1LjA5NGwtOS4yNjUsMTEuNDYybC0wLjA3NywwLjEwNGMtMS4zMzUsMS45NzktMi4xNTksNC4xMDktMi41MjEsNi4yNThsLTAuMTA3LTAuMDQ0DQoJCWMtMC4xNTksMC4zODctMC4zODEsMS4wNDctMC41OTgsMS45MzFjLTAuOTE1LDMuNzIyLTAuODU5LDcuNzIyLDAuODQ3LDExLjUxOGMwLjk2LDIuMTM3LDIuNDEsNC4wOCw0LjM5Miw1Ljc3OA0KCQljOS4yMTYsNy44OTgsMjYuMjg4LDMuOTc2LDM1Ljk3OC04LjA1YzEuMzcxLTEuNzAxLDIuODMyLTMuNTUxLDQuMzcxLTUuNTMyYzAuNTUzLTAuNzExLDEuMTE0LTEuNDM4LDEuNjg0LTIuMTc5DQoJCWMzLjI4Ny00LjI3NCw2LjcxNi04Ljg1MiwxMC4wODUtMTMuNDNjMS4wNzItMS40NTYsMi4wNjItMi44MTIsMi45NjMtNC4wNWMwLjkyNy0wLjMzNCwxLjc1My0wLjg3NSwyLjQyMi0xLjU3Mmg1LjU3NQ0KCQlsLTAuMzY1LDczLjE3NmwtMC43NDMtMC44OTNsLTEuMjMyLTEuNDgybC0xLjEzNCwxLjU1OWwtNy42NTEsMTAuNTE3Yy0wLjQ4NywwLjY3LTAuMzM5LDEuNjA4LDAuMzMxLDIuMDk1DQoJCWMwLjY3LDAuNDg3LDEuNjA4LDAuMzM5LDIuMDk1LTAuMzMxbDYuNTE3LTguOTU5bDcuNTEyLDkuMDM1bDEuMjgxLDEuNTQxbDEuMTE3LTEuNjY0bDUuMzAzLTcuODk4bDQuMjIzLDYuMzg2bDEuMTkyLDEuODAzDQoJCWwxLjI3Mi0xLjc0OGw2LjQzOC04Ljg1bDYuNDM4LDguODVsMS4wMTMsMS4zOTJsMS4yNC0xLjE5NGw0LjUwMi00LjMzMmw0LjQzNCwzLjY1N2MwLjYzOSwwLjUyNywxLjU4NCwwLjQzNiwyLjExMi0wLjIwMw0KCQlzMC40MzYtMS41ODQtMC4yMDMtMi4xMTJsLTUuNDY1LTQuNTA4bC0xLjAzMS0wLjg1MWwtMC45NjMsMC45MjdsLTQuMjI1LDQuMDY1bC02LjYzOC05LjEyNWwtMS4yMTMtMS42NjdsLTEuMjEzLDEuNjY3DQoJCWwtMi4yNzMsMy4xMjVWNjUuNDI5aDIyLjE2N2gxLjV2LTEuNXYtMi42MzF2LTcuMjZjMC0xMC40ODMsMC0xMC40ODMsMC0yNC41OTlDMTM3LjI0MiwyMC40MTksMTM0LjUyNCwxNC4yODUsMTI5Ljk0NSwxMC42MTh6DQoJCSBNMzguMTU4LDI4LjE0YzAtMTAuMDE5LDguMTE4LTE4LjE0LDE4LjEzNi0xOC4xNGMxMC4wMiwwLDE4LjEzNiw4LjExNSwxOC4xMzYsMTguMTR2MzQuMTI1aC0zLjE3SDM4LjE1OFYyOC4xNHogTTI4LjI4MSw3Ni41MTQNCgkJbDguOTYtMTEuMDg0aDM1LjU5MUw1OC40MSw4NC45MjJjLTcuNzg0LDkuNDQ2LTE4Ljg5MywxMy4yODQtMjUuNjY2LDkuNDg4bC0wLjIxNS0wLjEyQzI2LjAxMyw5MC42MzcsMjQuMTI0LDgyLjcxNSwyOC4yODEsNzYuNTE0DQoJCXogTTc3LjUyOCw2OS4yNzRjLTMuMzU3LDQuNTYyLTYuNzc0LDkuMTIzLTEwLjA0NiwxMy4zNzljLTAuNTY3LDAuNzM3LTEuMTI1LDEuNDYtMS42NzUsMi4xNjcNCgkJYy0xLjUyOSwxLjk2OC0yLjk3OSwzLjgwNC00LjMzOCw1LjQ5Yy04LjcyNCwxMC44MjctMjMuOTE1LDE0LjMxNy0zMS42OSw3LjY1NGMtMS42NDUtMS40MS0yLjgyOC0yLjk5NS0zLjYwNy00LjczDQoJCWMtMC4xODMtMC40MDYtMC4zMzktMC44MTctMC40NzctMS4yMzFjMS4zMjIsMS45NDMsMy4xMTMsMy42NCw1LjM2OCw0LjkwNGwwLjIxNSwwLjEyYzguMjI5LDQuNjEyLDIwLjgzNCwwLjI1NywyOS40OTctMTAuMjU5DQoJCUw3Ni40MDgsNjUuNjRjMC43NDQsMC43MDYsMS42NTksMS4yMzEsMi42NzcsMS41MUM3OC41ODYsNjcuODMyLDc4LjA3NCw2OC41MzEsNzcuNTI4LDY5LjI3NHogTTgwLjc2Miw2NC4zODINCgkJYy0xLjg0MSwwLTMuMzMzLTEuNDkyLTMuMzMzLTMuMzMyczEuNDkyLTMuMzMyLDMuMzMzLTMuMzMyYzEuODQxLDAsMy4zMzMsMS40OTIsMy4zMzMsMy4zMzJTODIuNjAzLDY0LjM4Miw4MC43NjIsNjQuMzgyeg0KCQkgTTk3LjI1OSwxNDYuNjg4bC0zLjczOC00LjQ5NmwwLjM4Mi03Ni43NjNoOC41ODh2NzMuNDY3TDk3LjI1OSwxNDYuNjg4eiBNMTA5LjQ2OSwxNDUuMDU1bC0zLjk3Ny02LjAxNFY2NS40NTZoNS4wODR2NzguMDc4DQoJCUwxMDkuNDY5LDE0NS4wNTV6IE0xMzQuMjQyLDU0LjAzOHY3LjI2djEuMTMxSDg2Ljk0YzAuMDk5LTAuNDQ1LDAuMTU1LTAuOTA1LDAuMTU1LTEuMzhjMC0zLjQ5Ny0yLjgzNi02LjMzMi02LjMzMy02LjMzMg0KCQljLTEuMjI1LDAtMi4zNjQsMC4zNTMtMy4zMzMsMC45NTVWMjguMTRjMC03LjcyMS00LjE0Ni0xNC40NTEtMTAuMzItMTguMTQxYzE4LjAzMi0wLjAwMSw1Mi4zNTMtMC4wMDMsNTMuMDUyLTAuMDAzDQoJCWMwLjk1LDAsMy4yNzcsMC41ODgsMy43NjUsMC43NDJjMS40MSwwLjQ0NSwyLjgyMywxLjE2NSw0LjE0NCwyLjIyMmMzLjgzOSwzLjA3NSw2LjE3Miw4LjMzOSw2LjE3MiwxNi40NzkNCgkJQzEzNC4yNDIsNDMuNTU2LDEzNC4yNDIsNDMuNTU2LDEzNC4yNDIsNTQuMDM4eiIvPg0KPC9nPg0KPC9zdmc+DQo=",_SVGImages[_svg_image.Kinds.SELECTED_MESSAGES]=DATA_URI_PREFIX+"PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJNQUlMX3g1Rl9TRUxFQ1RFRCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IgoJIHk9IjBweCIgdmlld0JveD0iNjEgLTYxIDEzOCAxMzgiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgNjEgLTYxIDEzOCAxMzg7ZmlsbDojRTBFNEU5IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHBhdGggZD0iTTEyNC41LDQ5LjJMNjUsNC4xdjYyLjNjMCwzLjksMi44LDYuNiw3LDYuNmgxMTZjNC4xLDAsNy0yLjcsNy02LjZWNGwtNTkuNiw0NS4yQzEzMi4yLDUxLjcsMTI3LjcsNTEuNywxMjQuNSw0OS4yeiIvPgo8cGF0aCBkPSJNMTI3LDQ1LjZjMS42LDEuMiwzLjgsMS4yLDUuNCwwbDYwLjItNDQuMmMxLjItMC45LDEuMi0yLjcsMC0zLjZsLTU4LTUzLjNjLTIuNy0yLTYuNS0yLTkuMiwwbC01OCw1My4zCgljLTEuMiwwLjktMS4yLDIuNywwLDMuNkwxMjcsNDUuNnoiLz4KPC9zdmc+",_SVGImages[_svg_image.Kinds.ATTACHMENT_PREVIEW_ERROR]=DATA_URI_PREFIX+"PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4IDQ4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0OCA0ODsiIHhtbDpzcGFjZT0icHJlc2VydmUiPiA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPiAuc3Qwe2ZpbGw6I0UwRTRFOTt9IDwvc3R5bGU+IDxnPiA8cmVjdCB4PSIxNiIgeT0iMjEiIGNsYXNzPSJzdDAiIHdpZHRoPSIyIiBoZWlnaHQ9IjIiLz4gPHJlY3QgeD0iMTYuMDAwNDMiIHk9IjMxLjk5NTg1IiBjbGFzcz0ic3QwIiB3aWR0aD0iMTYiIGhlaWdodD0iMi4wMDgzIi8+IDxyZWN0IHg9IjMwIiB5PSIyMSIgY2xhc3M9InN0MCIgd2lkdGg9IjIiIGhlaWdodD0iMiIvPiA8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzkuNTU1MDUsMTEuNzY0MzRjLTAuMDAwMzctMC4wMDAxOC03LjE4NjUyLTcuMDg5NTQtOC45MDY4LTguNzg2OCBDMzAuMjMxMDIsMi41NjU4NiwyOS43OTEzMiwyLjA2MzE3LDI4Ljk5OTY5LDJIOS44Nzg5MUM4Ljg0MTE5LDIsOCwyLjg0MTE5LDgsMy44Nzg5MVY0NGMwLDEuMDk5OTgsMC45MDAwMiwyLDIsMmgyOCBjMS4wOTk5OCwwLDItMC45MDAwMiwyLTJWMTIuOTM4MTdDNDAsMTIuMzk1OTQsMzkuNzkxODEsMTIuMDA2MDQsMzkuNTU1MDUsMTEuNzY0MzR6IE0zOCw0NEgxMFY0aDE4djguNSBjMCwwLjgyNTAxLDAuNjc0OTksMS41LDEuNSwxLjVIMzhWNDR6Ii8+IDwvZz4gPC9zdmc+",_SVGImages[_svg_image.Kinds.PLAY_VIDEO]=DATA_URI_PREFIX+"PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgeDE9IjIuMDY2JSIgeTE9Ijk2Ljc1MSUiIHgyPSI5NS42NTklIiB5Mj0iMi45NjklIiBpZD0iYSI+PHN0b3Agc3RvcC1jb2xvcj0iIzZEMDBGNiIgb2Zmc2V0PSIwJSIvPjxzdG9wIHN0b3AtY29sb3I9IiMwMDNBQkMiIG9mZnNldD0iMTAwJSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTEyLjY3NiA3Ny4zNzZjMy45ODMgMy42MDggOC42NjcgNi4yOCAxNC4wMjcgOC4wMTdDMzIuMDc4IDg3LjEyNSAzNy44OSA4OCA0NC4xNjMgODhjNi4xNjQgMCAxMS45MzQtLjg3NSAxNy4yOTYtMi42MDcgMi4xNTQtLjY5NCA0LjE4Ni0xLjU0NyA2LjExNi0yLjU0MyAyLjg4NC0xLjQ5IDUuNTMtMy4zMTIgNy45MTYtNS40NzQgMy45OS0zLjYwNyA3LjA5Ny04LjE4MyA5LjMzLTEzLjcwN0M4Ny4wNSA1OC4xMzYgODguMTY4IDUxLjU4IDg4LjE2OCA0NGMwLTcuNTg2LTEuMTE4LTE0LjE0LTMuMzQ2LTE5LjY3LTIuMjMzLTUuNTMtNS4zNC0xMC4xLTkuMzMtMTMuNzA1LTMuOTg1LTMuNjE3LTguNjYtNi4yODUtMTQuMDMzLTguMDJDNTYuMDk2Ljg3IDUwLjMyNiAwIDQ0LjE2MiAwYy02LjI3MyAwLTEyLjA4NS44NjgtMTcuNDYgMi42MDYtMS43NDMuNTYtMy40MTIgMS4yMzYtNS4wMSAyLjAwNS0zLjMyIDEuNTgzLTYuMzMgMy41NzgtOS4wMTcgNi4wMTVDOC42ODggMTQuMjMgNS41NzggMTguOCAzLjM0NiAyNC4zMyAxLjExNiAyOS44NiAwIDM2LjQxNCAwIDQ0YzAgNy41ODIgMS4xMTcgMTQuMTM3IDMuMzQ2IDE5LjY3IDIuMjMyIDUuNTIzIDUuMzQyIDEwLjEgOS4zMyAxMy43MDZ6IiBmaWxsLW9wYWNpdHk9Ii42NSIgZmlsbD0idXJsKCNhKSIvPjxwYXRoIGQ9Ik0zNi43MyA1OWgtLjA2NmMtLjkyIDAtMS42NjQtLjc0Mi0xLjY2NC0xLjY1NlYzMC42NTZjMC0uOTE1Ljc0LTEuNjU2IDEuNjY0LTEuNjU2LjAzIDAgLjA2IDAgLjA5LjAwMi4zOC0uMDczLjc4OC0uMDE0IDEuMTUyLjE5NmwyMi42MjIgMTMuMDZjLjc5OC40NiAxLjA3NSAxLjQ3NC42MTMgMi4yNzYtLjAyMy4wNC0uMDQ4LjA4LS4wNzUuMTE4LS4xMzcuMjctLjM1LjUwMy0uNjMuNjdsLTIyLjQ0IDEzLjQ4NGMtLjM5NS4yNC0uODUuMjk1LTEuMjY1LjE5M3oiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+",_SVGImages),SVGImage=_react2.default.createClass({displayName:"SVGImage",getDefaultProps:function(){return{width:48,height:48,altText:""}},render:function(){var M=SVGImages[this.props.kind];return _react2.default.createElement("img",{src:M,width:this.props.width,height:this.props.height,alt:this.props.altText,"data-test-id":"svg-image"})}});exports.default=SVGImage;
},{"../platform/utils/object":"./platform/utils/object","./constants/svg_image":"./atoms/constants/svg_image","react":"./node_modules/react/react.js"}],"./atoms/syncing_indicator":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function SyncingIndicator(e){var i=e.size,t=e.title,r=(0,_css2.default)(_syncing_indicator2.default,{size:i});return _react2.default.createElement("div",{className:r.wrapper},_react2.default.createElement("div",{className:r.container,"data-test-id":"loading_indicator",title:t,"aria-label":t},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.REFRESH,size:i,className:r.iconColor})))}exports.__esModule=!0,exports.Sizes=void 0,exports.default=SyncingIndicator;var _react=require("react"),_react2=_interopRequireDefault(_react),_object=require("../platform/utils/object"),_syncing_indicator=require("./styles/syncing_indicator"),_syncing_indicator2=_interopRequireDefault(_syncing_indicator),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_fuji_icon=require("../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../atoms/constants/fuji_icon"),Sizes=exports.Sizes=(0,_object.mirrorKeys)(["S","M"]);SyncingIndicator.defaultProps={size:_fuji_icon3.Sizes.M};
},{"../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../platform/utils/object":"./platform/utils/object","./styles/syncing_indicator":"./atoms/styles/syncing_indicator","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],100:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_unread_count=require("./styles/unread_count"),_unread_count2=_interopRequireDefault(_unread_count),_reactIntl=require("react-intl"),UnreadCount=_react2.default.createClass({displayName:"UnreadCount",contextTypes:{getCss:_react.PropTypes.func,getTheme:_react.PropTypes.func,getThemeMode:_react.PropTypes.func},getDefaultProps:function(){return{whiteBackground:!1}},getClassName:function(){var e=this.props,t=e.isActive,r=e.highlight,a=e.whiteBackground,n=e.isAccountSwitcher,u=this.context.getTheme(),c=this.context.getThemeMode(),o=this.context.getCss(_unread_count2.default,{whiteBackground:a&&!r,highlightThemeCombo:r+"_"+u,isAccountSwitcher_LIGHT:t&&n&&"LIGHT"===c,isAccountSwitcher_MEDIUM:t&&n&&"MEDIUM"===c,isAccountSwitcher_DARK:t&&n&&"DARK"===c});return t?o.activeContainer:o.container},render:function(){var e=this.props.value;if(!e||e<0)return null;var t=this.getClassName();return _react2.default.createElement("span",{className:t,"data-test-id":"displayed-count"},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"mail_app.unread_count",defaultMessage:"{large, select,\n                            true {999+}\n                            other {{count}}\n                        }",values:{large:e>999,count:_react2.default.createElement(_reactIntl.FormattedNumber,{value:e})}}))}});exports.default=UnreadCount,module.exports=exports.default;
},{"./styles/unread_count":97,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],101:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),strings=(0,_reactIntl.defineMessages)({hasUnsavedMessage:{id:"warning.has_unsaved_message",defaultMessage:"You are about to leave with unsaved data. Continue?"}}),UnsavedDataWarner=_react2.default.createClass({displayName:"UnsavedDataWarner",contextTypes:{intl:_reactIntl.intlShape.isRequired},componentDidMount:function(){var e=this;window.addEventListener("beforeunload",function(a){if(e.props.isUnsafe){var t=e.context.intl.formatMessage(strings.hasUnsavedMessage);return a.returnValue=t,t}})},render:function(){return null}});exports.default=UnsavedDataWarner,module.exports=exports.default;
},{"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./atoms/utils/menu_utils":[function(require,module,exports){
"use strict";function getMenuLayerStyles(t,e){var i=e.getBoundingClientRect(),o={height:t.ownerDocument.documentElement.offsetHeight,width:t.ownerDocument.documentElement.offsetWidth},h=t.getBoundingClientRect(),n={x:-h.width,y:8},g={below:o.height-h.bottom-n.y,above:h.top-n.y,left:h.left-n.x,right:o.width-h.right-n.x},r={},l=.9,a=Math.floor(Math.max(g.above,g.below)*l),d=Math.floor(Math.max(g.left,g.right)*l);if(i.height>a&&(r.maxHeight=a),i.width>d&&(r.maxWidth=d),r.maxHeight||r.maxWidth){r.overflow="auto";var f=r.maxHeight||i.height,m=r.maxWidth||i.width;i=Object.assign({},i,{height:f,width:m,bottom:i.top+f,right:i.left+m})}var u={below:g.below*l-i.height>=0,above:g.above*l-i.height>=0,left:g.left*l-i.width>=0,right:g.right*l-i.width>=0};return u.right?r.left=h.right+n.x:u.left&&(r.left=h.left-i.width-n.x),u.below?r.top=h.bottom+n.y:u.above&&(r.top=h.top-i.height-n.y),r}function getContextMenuPosition(t,e,i,o){var h=(0,_dom.getWinSize)(i),n=o.getBoundingClientRect();return e=Math.min(e,h.height-n.height),t+n.width>h.width&&(t-=n.width),{left:t,top:e}}exports.__esModule=!0,exports.getMenuLayerStyles=getMenuLayerStyles,exports.getContextMenuPosition=getContextMenuPosition;var _dom=require("../../platform/utils/dom");
},{"../../platform/utils/dom":"./platform/utils/dom"}],"./atoms/utils/overlay_utils":[function(require,module,exports){
"use strict";function calcOverlayPos(e,r,t){var o=t[0],s=t[1],n=0,a=0,c=0,h=0;switch(o){case _corners.Corners.BottomRight:c=-r.width,h=-r.height;break;case _corners.Corners.TopLeft:c=0,h=0;break;case _corners.Corners.TopRight:c=-r.width,h=0;break;case _corners.Corners.BottomLeft:c=0,h=-r.height;break;case _corners.Corners.CenterRight:c=-r.width,h=-r.height/2;break;case _corners.Corners.CenterLeft:c=0,h=-r.height/2;break;case _corners.Corners.TopCenter:c=-r.width/2,h=0;break;case _corners.Corners.BottomCenter:c=-r.width/2,h=-r.height;break;default:c=0,h=0}switch(s){case _corners.Corners.BottomRight:n=e.left+e.width,a=e.top+e.height;break;case _corners.Corners.TopLeft:n=e.left,a=e.top;break;case _corners.Corners.TopRight:n=e.left+e.width,a=e.top;break;case _corners.Corners.BottomLeft:n=e.left,a=e.top+e.height;break;case _corners.Corners.CenterRight:n=e.left+e.width,a=e.top+e.height/2;break;case _corners.Corners.CenterLeft:n=e.left,a=e.top+e.height/2;break;case _corners.Corners.TopCenter:n=e.left+e.width/2,a=e.top;break;case _corners.Corners.BottomCenter:n=e.left+e.width/2,a=e.top+e.height;break;default:n=e.left,a=e.top}return{left:n+c+window.pageXOffset,top:a+h+window.pageYOffset}}exports.__esModule=!0,exports.calcOverlayPos=calcOverlayPos;var _corners=require("../constants/corners");
},{"../constants/corners":"./atoms/constants/corners"}],102:[function(require,module,exports){
"use strict";function preparePillContact(e){var r=e.name,t=void 0===r?"":r,a=e.email,i=void 0===a?"":a,E=e.hasEncryptionError,n=void 0!==E&&E,o=i.match(CONTACT_PARSE_REGEX)||[],s=o[2],l=void 0===s?t:s,c=o[3],d=void 0===c?i:c,A=void 0;return A=l&&d?l+" <"+d+">":l?l:d,{name:l||d,email:d,title:A,hasEncryptionError:n}}function createAddress(e){if(EMAIL_ADDRESS_REGEX.test(e)){var r=void 0,t=e.match(EMAIL_ADDRESS_REGEX),a=t[0],i=e.replace(a,"").trim();return a=a.substring(1,a.length-1),r=i&&a?i+" <"+a+">":i?i:a,{email:a,name:i,title:r}}return{email:e,name:e}}exports.__esModule=!0,exports.preparePillContact=preparePillContact,exports.createAddress=createAddress;var CONTACT_PARSE_REGEX=/^(['"]?)(.*?)\1\s*<(\S+@\S+\.\w+)>\s*$/,EMAIL_ADDRESS_REGEX=/(<[^<>]+@[^<>]+\.[^<>]+>)|(\([^\(\)]+@[^\(\)]+\.[^\(\)]+\))|(\[[^\[\]]+@[^\[\]]+\.[^\[\]]+\])/;
},{}],"./atoms/utils/search_input_parser":[function(require,module,exports){
"use strict";function getSearchInputTokens(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e.match(/([a-z]*:"[^"]*")|([a-z]*:[^\s]*)/g)||[]).reduce(function(e,n){var a,s=n.match(/^([a-z]*):(.*)$/),t=s[1],c=s[2];return Object.assign(e,(a={},a[t]=[].concat(e[t]||[],[c]),a))},{})}function filterToken(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=new RegExp("("+e+':"[^"]*")|('+e+":[^\\s]*)","g");return n.replace(a,"").trim()}function parseSearchInput(e){if(!e)return{};var n=getSearchInputTokens(e),a={},s=e;["FOLDERS","FROM","TO","SUBJECT","AFTER","BEFORE"].forEach(function(e){var t=Tokens[e],c=n[t]||[],T="BEFORE"===e||"AFTER"===e;1===c.length&&(a[_mail_constants.AdvancedSearchFields[e]]=T?c[0].replace(/"/g,""):c[0],s=filterToken(t,s))});var t=n[Tokens.HAS]||[];["ATTACHMENT","PHOTO"].forEach(function(e){var n=_mail_constants.AdvancedSearchFields[e];a[n]=t.indexOf(CheckboxTokenValues[e])!==-1,s=s.replace(Tokens.HAS+":"+CheckboxTokenValues[e],"")});var c=n[Tokens.ATTACHMENT_TYPE]||[],T=_mail_constants.AdvancedSearchFields.CALENDAR_INVITE;return a[T]=c.indexOf(CheckboxTokenValues.CALENDAR_INVITE)!==-1,s=s.replace(Tokens.ATTACHMENT_TYPE+":"+CheckboxTokenValues.CALENDAR_INVITE,""),s=s.replace(new RegExp("^\\s*"),""),s.trim()&&(a[_mail_constants.AdvancedSearchFields.KEYWORD]=s),a}function createSearchInputValue(e){var n=[],a=e[_mail_constants.AdvancedSearchFields.FOLDERS],s=e[_mail_constants.AdvancedSearchFields.FROM],t=e[_mail_constants.AdvancedSearchFields.TO],c=e[_mail_constants.AdvancedSearchFields.SUBJECT],T=e[_mail_constants.AdvancedSearchFields.KEYWORD],o=e[_mail_constants.AdvancedSearchFields.BEFORE],r=e[_mail_constants.AdvancedSearchFields.AFTER],l=e[_mail_constants.AdvancedSearchFields.ATTACHMENT],i=e[_mail_constants.AdvancedSearchFields.PHOTO],E=e[_mail_constants.AdvancedSearchFields.CALENDAR_INVITE];return a&&n.push(Tokens.FOLDERS+":"+a),s&&n.push(Tokens.FROM+":"+s),t&&n.push(Tokens.TO+":"+t),c&&n.push(Tokens.SUBJECT+":"+c),l&&n.push(Tokens.HAS+":"+CheckboxTokenValues.ATTACHMENT),i&&n.push(Tokens.HAS+":"+CheckboxTokenValues.PHOTO),E&&n.push(Tokens.ATTACHMENT_TYPE+":"+CheckboxTokenValues.CALENDAR_INVITE),T&&n.push(T),r&&n.push(Tokens.AFTER+':"'+r+'"'),o&&n.push(Tokens.BEFORE+':"'+o+'"'),n.join(" ")}exports.__esModule=!0,exports.Tokens=void 0,exports.getSearchInputTokens=getSearchInputTokens,exports.filterToken=filterToken,exports.parseSearchInput=parseSearchInput,exports.createSearchInputValue=createSearchInputValue;var _mail_constants=require("../../platform/mail_constants"),Tokens=exports.Tokens={FOLDERS:"in",FROM:"from",TO:"to",SUBJECT:"subject",BEFORE:"before",AFTER:"after",HAS:"has",ATTACHMENT_TYPE:"attachmenttype"},CheckboxTokenValues={ATTACHMENT:"attachment",PHOTO:"image",CALENDAR_INVITE:"calendar"};
},{"../../platform/mail_constants":"./platform/mail_constants"}],"./atoms/utils/xavatar_utils":[function(require,module,exports){
"use strict";function getXavatarURI(t,a,e){var o=t.id,n=t.email,r={spsize:a+"X"+a,fallback_url:e,alphatar_photo:!0},s=void 0;if(o&&o!==n)s="/v4/contacts/"+o+"/photo",r.badge=!0;else{if(!n)return e;s="/v4/endpoints/smtp:"+n+"/photo",r.format="image"}return _mail_constants.XOBNI_HOST+s+"?"+Object.keys(r).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(r[t])}).join("&")}exports.__esModule=!0,exports.getXavatarURI=getXavatarURI;var _mail_constants=require("../../platform/mail_constants");
},{"../../platform/mail_constants":"./platform/mail_constants"}],"./atoms/xavatar":[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.Sizes=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_mail_ui_vars=require("../platform/utils/mail_ui_vars"),uiVar=_interopRequireWildcard(_mail_ui_vars),_object=require("../platform/utils/object"),_types=require("../types"),_xavatar_utils=require("./utils/xavatar_utils"),IMAGE_REQUEST_SIZE=64,FALLBACK_URL="https://s.yimg.com/dh/ap/social/profile/profile_a64.png",FALLBACK_IMAGE_DATA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAAAAACPAi4CAAACGElEQVRYw83WWXPaMBSG4fz/XyUdSba8yLKN3WwlNyFt4ialKc3SFKwCLZhYR8QeJzO81995xgzLcEQGdkRGnwY0WgLlyYDKgwCK4wEV7wEMfhc+ECh0kqTFm0BeOoqJryJBuB/qwrXJ9wAZnZplL98vTwREhRvICjQljs22b5Ljs8wFjIR/+tQApj6HrBcgdW1ed86dwMguJY+tezOHBBm6gCA3VkXgANLcjlc28EUgwxQHNJnbwCPJOgPKN0hU44DOrOIQA0DZS+0AAhRIcCBJrSKJP4G9THAg9jAAWzoAgb2EmkkcULqdIi/YE9wTjUwxIGLYvflDko6AIjUGPDieIE6s6E8MqLi9jHFAXGBA4eFApKwCuHq2XsAlRZYRDigfTttAxgLVHVAhtL6PT/huBYQxFr96DXzm6Cx0Ar5s/aAFbiBCo3e7wIThqz2AUDv3C+G7gSBEC+BrA4xZ6Fg5AekB/bG5vybgyT6A5EDV+ObXBpjdjBUFLnFABq0Eo+Xtov1BWtyWlIn2VlqAFOBN5ujX2cwnHgi5F5CchlVtnNVVSLlsAb7c5DOip+aNpnr5l6M52QUETWemQ7N8+RQ7gOf/i0FlOnbH2f8jrwE4fzCd+x2wNuCRe9OjZxBbQHirmDa9Ktn6TDTAWT/grAG4WAV9AVif8YMAGF8FQvVKwPqMbQEGPWMNMKiDAGBQ7wHQQR0EMLC/CsyEDBnhc8AAAAAASUVORK5CYII=",Sizes=exports.Sizes={C:uiVar.AVATAR_SIZE_COMPACT,S:uiVar.AVATAR_SIZE_S,M:uiVar.AVATAR_SIZE_M,L:uiVar.AVATAR_SIZE_L},Xavatar=_react2.default.createClass({displayName:"Xavatar",getDefaultProps:function(){return{size:Sizes.M,useFallbackImage:!1}},getInitialState:function(){return{imageLoaded:!1}},componentDidMount:function(){var e=this,t=this.props.useFallbackImage?null:this.src();t&&(this.image=new Image,this.image.onload=function(){e.isMounted()&&e.setState({imageLoaded:!0})},this.image.src=t,window.requestAnimationFrame(function(){e.refs.image&&(e.refs.image.removeAttribute("clip-path","url(#clip-orb)"),e.refs.image.setAttribute("clip-path","url(#clip-orb)"))}))},src:function(){var e=this.props,t=e.fallback,a=void 0===t?FALLBACK_URL:t,r=e.contact;return(0,_xavatar_utils.getXavatarURI)(r,IMAGE_REQUEST_SIZE,a)},render:function(){var e=this.state.imageLoaded,t=this.props,a=t.size,r=t.useFallbackImage;return _react2.default.createElement("svg",{width:a,height:a,viewBox:"0 0 20 20"},_react2.default.createElement("image",{ref:"image",xlinkHref:e&&!r?this.src():FALLBACK_IMAGE_DATA,width:"20",height:"20",clipPath:"url(#clip-orb)"}))}});exports.default=Xavatar;
},{"../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../platform/utils/object":"./platform/utils/object","../types":"./types","./utils/xavatar_utils":"./atoms/utils/xavatar_utils","react":"./node_modules/react/react.js"}],103:[function(require,module,exports){
"use strict";require("array.prototype.find");
},{"array.prototype.find":"./node_modules/array.prototype.find/index.js"}],104:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function fireBeacon(e){var r=_rapid_client2.default.getRapidInstance();r&&r.beaconPerformanceData(e);var t={};if(e.perf_commontime&&e.perf_commontime.initialPageLoad){var a={};if(window.performance&&window.performance.timing){var i=window.performance.timing;a={firstByte:i.responseStart-i.connectEnd,onLoad:i.loadEventStart-i.navigationStart,serverResp:i.responseEnd-i.requestStart,domInt:i.domInteractive-i.navigationStart}}t=Object.assign(a,e.perf_commontime.initialPageLoad)}e.perf_usertime&&e.perf_usertime.utm&&Object.assign(t,e.perf_usertime.utm),(0,_object.isEmpty)(t)||logger.feature("rum_beacon",t).logSuccess()}function yaftCallback(e,r){if(r)return!1;var t=Math.round(e.aft),a=Math.round(e.visuallyComplete),i=Math.round(e.startRender);return t&&(recordPerfData("common","AFT",t),recordPerfData("common","AFT1",t)),a&&recordPerfData("common","VIC",a),i&&recordPerfData("common","STR",i),!0}function onLoadEventHandler(){fireNavTimingBeacon()}function recordPerfData(e,r,t){return"common"===e?(perfData.perf_commontime||(perfData.perf_commontime={}),perfData.perf_commontime.initialPageLoad||(perfData.perf_commontime.initialPageLoad={}),perfData.perf_commontime.initialPageLoad[r]=t,!0):"user"===e&&(perfData.perf_usertime||(perfData.perf_usertime={}),perfData.perf_usertime.utm||(perfData.perf_usertime.utm={}),perfData.perf_usertime.utm[r]=t,!0)}function fireNavTimingBeacon(){fireBeacon({perf_navigationtime:2}),perfData={}}function firePerfData(){fireBeacon(perfData),perfData={}}function init(e,r){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=window.YAFT,i=window.performance;if(!i||initialized)return!1;if(initialized=!0,t&&(i&&i.timing&&i.timing.loadEventEnd?fireNavTimingBeacon():window.addEventListener("load",onLoadEventHandler,!1)),a){var n={modules:e.modules,modulesExclude:[],canShowVisualReport:e.yaftCanShowVisualReport,maxWaitTime:4e3,generateHAR:!0,useNativeStartRender:!0},o=0;i.getEntriesByName&&i.getEntriesByName("norrinStartRender").length&&(o=i.getEntriesByName("norrinStartRender")[0].startTime,n.customStartRender=function(){return o}),a.init(n,function(e,t){var a=yaftCallback(e,t);r?r():a&&firePerfData()}),o&&a.triggerCustomTiming("norrin_main",o,o)}return!0}function reset(){initialized=!1,perfData={},window.removeEventListener("load",onLoadEventHandler,!1)}exports.__esModule=!0,exports.recordPerfData=recordPerfData,exports.fireNavTimingBeacon=fireNavTimingBeacon,exports.firePerfData=firePerfData,exports.init=init,exports.reset=reset;var _rapid_client=require("../platform/rapid_client"),_rapid_client2=_interopRequireDefault(_rapid_client),_norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger),_object=require("../platform/utils/object"),logger=_norrinLogger2.default.create("norrin/rum"),initialized=!1,perfData={};
},{"../platform/rapid_client":"./platform/rapid_client","../platform/utils/object":"./platform/utils/object","norrin-logger":"./node_modules/norrin-logger/index.js"}],"./client/uncaught_browser_error_handler":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getCallStack(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Error,t=void 0;return t=e.stack?formatCallStack(e):getStack()}function formatCallStack(e){var t=[],r=e.stack.split(CALLSTACK_REGEX);return r.forEach(function(e){var r=e.split("@");2===r.length?t.push("at "+r[0]+"("+r[1]+")"):t.push(e)}),t.join("\n")}function getStack(){var e=[];try{for(var t=void 0,r=void 0,o=arguments,n=[];!r&&(t=o.caller?o.caller.callee:o.callee.caller);){e.length>50&&(r="*** stack too deep, stopping");for(var a=0;a<n.length;a++)t===n[a]&&(r="*** recursion, stopping");o=t.arguments,n.push(t),r?e.push(r):e.push(getFunctionName(t.toString()))}}catch(t){e.push("*** error going to next level, may be the end of the JS stack")}return e.join(" >> ")}function getFunctionName(e){var t=e.match(FN_REGEX),r=void 0;return t&&t.length>1&&(r=t[1]),r=r||"{?}",r=r.replace(FN_CLEANUP_REGEX,"$2")}function getSearchLink(e){var t=" index=idx_norrin sourcetype=apache_error ",r=[];for(var o in e)r.push(o+"=\"'"+e[o]+"'\"");return _mail_constants.SPLUNK_SEARCH_LINK+"?q=search"+encodeURIComponent(t+r.join(" "))}function handleUncaughtBrowserError(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments[2],o=arguments[3],n=arguments[4],a="generic_error",c=n?n.name+":"+n.message:"",s=t.indexOf(".yahoo.com")===-1&&t.indexOf(".yimg.com")===-1?EXTERNAL_SOURCE:INTERNAL_SOURCE,i={error:e+" "+[t,r,o].join(":"),errorMessage:c,stack:getCallStack(n),source:s},l=getSearchLink({platform:"browser",message:a,data_errorMessage:c}),_=window.context.getActionContext(),u=i.error;_.config.exceptionNotification&&s===INTERNAL_SOURCE&&_.dispatch(_react_action_constants.mail.EXCEPTION_OCCURRED,{splunkUrl:l}),prevJSE!==u&&(jseCount=0),jseCount++,jseCount<=JSE_LOG_LIMIT_PER_SESSION?_logger2.default.error(a,i):jseCount%JSE_LOG_LIMIT_PER_SESSION===0&&(i.jseOverLimit=jseCount,_logger2.default.error(a,i)),prevJSE=u}exports.__esModule=!0,exports.getCallStack=getCallStack,exports.formatCallStack=formatCallStack,exports.getStack=getStack,exports.getFunctionName=getFunctionName,exports.getSearchLink=getSearchLink,exports.handleUncaughtBrowserError=handleUncaughtBrowserError;var _logger=require("../platform/logger"),_logger2=_interopRequireDefault(_logger),_react_action_constants=require("../platform/react_action_constants"),_mail_constants=require("../platform/mail_constants"),FN_REGEX=/function\s+([^\s(]+)/,FN_CLEANUP_REGEX=/^(\s+)?(.*\S)(\s+)?$/g,CALLSTACK_REGEX=/\r\n|\r|\n/,INTERNAL_SOURCE="INTERNAL",EXTERNAL_SOURCE="EXTERNAL",JSE_LOG_LIMIT_PER_SESSION=1e3,prevJSE="",jseCount=0;
},{"../platform/logger":"./platform/logger","../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants"}],105:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_constants=require("./constants"),AdComponent=_react2.default.createClass({displayName:"AdComponent",contextTypes:{registerAdPosition:_react.PropTypes.func,removeAdPosition:_react.PropTypes.func,executeAction:_react.PropTypes.func},componentDidMount:function(){this.context.registerAdPosition({darlaPos:this.props.id})},componentWillUnmount:function(){this.context.removeAdPosition({darlaPos:this.props.id})},shouldComponentUpdate:function(){return!1},render:function(){var e=_constants.adConfiguration[this.props.id],t=e.yaftName,o=e.darla,n=o.clean,r=o.dest;return _react2.default.createElement("div",{id:n,"data-yaft-module":t},_react2.default.createElement("div",{id:r}))}});exports.default=AdComponent,module.exports=exports.default;
},{"./constants":114,"react":"./node_modules/react/react.js"}],106:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){return{darlaAdCallResult:e.getStore(_ads2.default).getDarlaAdData(),darlaErrorMessage:e.getStore(_ads2.default).getDarlaErrorMessage()}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_modal=require("../../atoms/modal.jsx"),_modal2=_interopRequireDefault(_modal),_keyboard_shortcut_group=require("../keyboard_shortcut_manager/keyboard_shortcut_group.jsx"),_keyboard_shortcut_group2=_interopRequireDefault(_keyboard_shortcut_group),_keyboard_shortcuts=require("../../platform/keyboard_shortcuts"),_button=require("../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_types=require("../../types"),_ads=require("../../stores/ads"),_ads2=_interopRequireDefault(_ads),_ad_debug=require("./styles/ad_debug"),_ad_debug2=_interopRequireDefault(_ad_debug),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),AD_DEBUG_KEYS="META+SHIFT+/,CTRL+SHIFT+/",shortcuts=(0,_keyboard_shortcuts.createShortcutGroup)({invisible:!0,keys:{show:{key:AD_DEBUG_KEYS}}}),AdDebugView=_react2.default.createClass({displayName:"AdDebugView",getInitialState:function(){return{shown:!1}},show:function(e){e.preventDefault(),e.stopPropagation(),this.state.shown||this.setState({shown:!0})},handleDismiss:function(){this.setState({shown:!1})},handleKeyDown:function(e){"Enter"!==e.key&&"Escape"!==e.key||(e.preventDefault(),e.stopPropagation(),this.handleDismiss())},render:function(){var e=this.state.shown,t=(0,_css2.default)(_ad_debug2.default),a=this.props.darlaAdCallResult,r=a.spaceId,s=a.positions,o=s.map(function(e){return _react2.default.createElement("div",{key:e.position,className:t.positionRow},_react2.default.createElement("span",{className:t.positionCol},"Position:",e.position),_react2.default.createElement("span",{className:t.positionCol},"Booking Id:",e.bookId))});return _react2.default.createElement(_keyboard_shortcut_group2.default,{keys:[shortcuts.show(this.show)]},e?_react2.default.createElement(_modal2.default,{onClose:this.handleDismiss,onKeyDown:this.handleKeyDown},_react2.default.createElement("div",{className:t.container},_react2.default.createElement("div",{className:t.header},"Ad Information"),_react2.default.createElement("div",{className:t.spaceid},"Space Id:",r),o,this.props.darlaErrorMessage?_react2.default.createElement("div",{className:t.spaceid},"Err:",this.props.darlaErrorMessage):null,_react2.default.createElement(_button2.default,{onClick:this.handleDismiss,className:t.button},"OK"))):null)}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(AdDebugView,[_ads2.default],getStateFromStores);
},{"../../atoms/button.jsx":"./atoms/button","../../atoms/modal.jsx":"./atoms/modal","../../platform/keyboard_shortcuts":"./platform/keyboard_shortcuts","../../stores/ads":"./stores/ads","../../types":"./types","../keyboard_shortcut_manager/keyboard_shortcut_group.jsx":"./molecules/keyboard_shortcut_manager/keyboard_shortcut_group","./styles/ad_debug":117,"fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],107:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_beacon=require("../../platform/utils/beacon.js"),_ads=require("../../actions/ads.js"),_thank_you_message=require("./atoms/thank_you_message.jsx"),_thank_you_message2=_interopRequireDefault(_thank_you_message),_feedback_list_item=require("./atoms/feedback_list_item.jsx"),_feedback_list_item2=_interopRequireDefault(_feedback_list_item),AdFeedback=_react2.default.createClass({displayName:"AdFeedback",contextTypes:{executeAction:_react.PropTypes.func,config:_react.PropTypes.object,intl:_reactIntl.intlShape.isRequired},sendFeedbackBeacon:function(e){var t=this.props.adFeedbackBeacon.replace("$(AD_FEEDBACK)",e);return(0,_beacon.sendBeacon)(t)},onAdFeedbackClose:function(e){e.preventDefault(),this.context.executeAction(_ads.closeAdFeedback)},submitAdFeedback:function(){this.context.executeAction(_ads.submitAdFeedback)},render:function(){var e=this.props.adFeedbackSubmitted;return e?_react2.default.createElement(_thank_you_message2.default,{onAdFeedbackClose:this.onAdFeedbackClose,isCompactLayout:this.props.isCompactLayout}):_react2.default.createElement(_feedback_list_item2.default,{onAdFeedbackClose:this.onAdFeedbackClose,submitAdFeedback:this.submitAdFeedback,isCompactLayout:this.props.isCompactLayout,sendFeedbackBeacon:this.sendFeedbackBeacon})}});exports.default=AdFeedback,module.exports=exports.default;
},{"../../actions/ads.js":"./actions/ads","../../platform/utils/beacon.js":"./platform/utils/beacon","./atoms/feedback_list_item.jsx":108,"./atoms/thank_you_message.jsx":113,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],108:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.FeedbackOptions=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_feedback_list_item=require("./styles/feedback_list_item.js"),_feedback_list_item2=_interopRequireDefault(_feedback_list_item),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_button=require("../../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_fuji_icon=require("../../../atoms/constants/fuji_icon"),_reactIntl=require("react-intl"),strings=(0,_reactIntl.defineMessages)({ad_offensive:{id:"ad.offensive",defaultMessage:"It's offensive"},ad_notRelevant:{id:"ad.notRelevant",defaultMessage:"It's not relevant"},ad_keepSeeing:{id:"ad.keepSeeing",defaultMessage:"I keep seeing this"},ad_somethingElse:{id:"ad.somethingElse",defaultMessage:"Something else:"},close_ad_feedback:{id:"ad.close_feedback",defaultMessage:"close"},ad_done:{id:"ad.feedback_done",defaultMessage:"Done"}}),FeedbackOptions=exports.FeedbackOptions={OFFENSIVE:"offensive",NOT_RELEVANT:"notRelevant",KEEP_SEEING:"keepSeeing",SOMETHING_ELSE:"somethingElse"},FeedbackListItem=_react2.default.createClass({displayName:"FeedbackListItem",contextTypes:{intl:_reactIntl.intlShape.isRequired},getInitialState:function(){return{active:"",started:!1}},componentDidMount:function(){this.props.sendFeedbackBeacon("(type$fdb_start)")},getChoice:function(){return this.state.active},onChange:function(e){this.setState({active:e,started:!0})},onAdFeedbackSubmit:function(e){e.preventDefault();var t=this.props,a=t.submitAdFeedback,s=t.sendFeedbackBeacon,i=this.getChoice(),n=this.state.active===FeedbackOptions.SOMETHING_ELSE?this.refs.input.value:"";s("(type$fdb_submit,subo"+i+",cmnt"+n+")"),a()},renderRadio:function(e){var t=e===FeedbackOptions.SOMETHING_ELSE,a=this.props.isCompactLayout,s=this.state.active===FeedbackOptions.SOMETHING_ELSE,i=(0,_css2.default)(_feedback_list_item2.default,{freeTextFocused:s,isCompactLayout:a});return _react2.default.createElement("div",{className:i.optionContainer},_react2.default.createElement("input",{className:i.radio,type:"radio",name:"adFeedbackRadio",onChange:this.onChange.bind(this,e),checked:t?s:null}),_react2.default.createElement("span",{className:i.text},_react2.default.createElement(_reactIntl.FormattedMessage,strings["ad_"+e])),t?_react2.default.createElement("input",{className:i.freeText,onFocus:this.onChange.bind(this,FeedbackOptions.SOMETHING_ELSE),ref:"input"}):null)},render:function(){var e=this.state.started,t=this.props.isCompactLayout,a=this.context.intl.formatMessage,s=(0,_css2.default)(_feedback_list_item2.default,{started:e,isCompactLayout:t});return _react2.default.createElement("form",{className:s.container},_react2.default.createElement("div",{className:s.header},_react2.default.createElement("span",{className:s.title},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"ad.form_question",defaultMessage:"Before you close this ad, would you tell us why you didn't like it?"})),_react2.default.createElement("span",{className:s.close},_react2.default.createElement(_fuji_icon_button2.default,{kind:_fuji_icon.Kinds.CLOSE,size:_fuji_icon.Sizes.XXS,colorState:_fuji_icon.ColorStates.DISABLED,onClick:this.props.onAdFeedbackClose,title:a(strings.close_ad_feedback)}))),_react2.default.createElement("div",{className:s.columns},_react2.default.createElement("div",{className:s.gridB1},this.renderRadio(FeedbackOptions.OFFENSIVE),this.renderRadio(FeedbackOptions.NOT_RELEVANT)),_react2.default.createElement("div",{className:s.spacerB1}),_react2.default.createElement("div",{className:s.gridB2},_react2.default.createElement("div",{className:s.inputWrapper},this.renderRadio(FeedbackOptions.KEEP_SEEING),this.renderRadio(FeedbackOptions.SOMETHING_ELSE)),_react2.default.createElement("div",{className:s.spacerB2}),_react2.default.createElement(_button2.default,{className:s.done,onClick:this.onAdFeedbackSubmit,title:a(strings.ad_done),disabled:!e},_react2.default.createElement(_reactIntl.FormattedMessage,strings.ad_done)))))}});exports.default=FeedbackListItem;
},{"../../../atoms/button.jsx":"./atoms/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","./styles/feedback_list_item.js":110,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],109:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_popover_container=require("../../../atoms/popover/popover_container.jsx"),_popover_container2=_interopRequireDefault(_popover_container),_popover_anchor=require("../../../atoms/popover/popover_anchor.jsx"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_popover_content=require("../../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover=require("../../../atoms/constants/popover"),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_navigable_list=require("../../../atoms/navigable_list.jsx"),_navigable_list2=_interopRequireDefault(_navigable_list),_mail_ui_vars=require("../../../platform/utils/mail_ui_vars"),_list_item=require("../../../atoms/list_item.jsx"),_list_item2=_interopRequireDefault(_list_item),_button=require("../../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_button3=require("../../../atoms/constants/button"),_fuji_icon=require("../../../atoms/constants/fuji_icon"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_feedback_menu=require("./styles/feedback_menu.js"),_feedback_menu2=_interopRequireDefault(_feedback_menu),strings=(0,_reactIntl.defineMessages)({chevron_title:{id:"ad_feedback.chevron_title",defaultMessage:"Ad Feedback"},why_this_ad:{id:"why_this_ad",defaultMessage:"Why this ad?"},start_ad_feedback_form:{id:"start_ad_feedback_form",defaultMessage:"I don't like this ad"}}),FeedbackMenu=_react2.default.createClass({displayName:"FeedbackMenu",contextTypes:{intl:_reactIntl.intlShape.isRequired},onChevronClicked:function(e){e.preventDefault(),e.stopPropagation()},renderAdFeedbackChoices:function(){var e=this.context.intl.formatMessage,t=[{option:"why_this_ad",onClick:this.props.onAdChoiceClicked},{option:"start_ad_feedback_form",onClick:this.props.onAdFeedbackRequest}];return t.map(function(t){return _react2.default.createElement(_list_item2.default,{key:t.option},_react2.default.createElement(_button2.default,{onClick:t.onClick,kind:_button3.Kinds.MENUITEM},e(strings[t.option])))})},render:function(){var e=this.context.intl.formatMessage,t=this.props,o=t.isCompactLayout,r=t.feedbackEnabled,a=(0,_css2.default)(_feedback_menu2.default,{isCompactLayout:o,feedbackEnabled:r});return _react2.default.createElement("div",{onClick:this.onChevronClicked},_react2.default.createElement(_popover_container2.default,null,_react2.default.createElement(_popover_anchor2.default,null,_react2.default.createElement("span",{className:a.chevronDown},_react2.default.createElement(_fuji_icon_button2.default,{kind:_fuji_icon.Kinds.CHEVRON_UP,size:_fuji_icon.Sizes.XXS,rotate:_fuji_icon.Rotate.D180,colorState:_fuji_icon.ColorStates.INHERITED,title:e(strings.chevron_title),tabIndex:"-1"}))),_react2.default.createElement(_popover_content2.default,{triggerOn:_popover.Triggers.CLICK,permittedArrowDirections:[_popover.PermittedArrowDirections.UP,_popover.PermittedArrowDirections.DOWN],offset:16,zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH,align:_popover.Align.START},_react2.default.createElement("div",{className:a.adFeedbackContainer},_react2.default.createElement(_navigable_list2.default,{focusOnMount:!0},this.renderAdFeedbackChoices())))))}});exports.default=FeedbackMenu,module.exports=exports.default;
},{"../../../atoms/button.jsx":"./atoms/button","../../../atoms/constants/button":"./atoms/constants/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/popover":"./atoms/constants/popover","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../atoms/list_item.jsx":"./atoms/list_item","../../../atoms/navigable_list.jsx":"./atoms/navigable_list","../../../atoms/popover/popover_anchor.jsx":"./atoms/popover/popover_anchor","../../../atoms/popover/popover_container.jsx":"./atoms/popover/popover_container","../../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","./styles/feedback_menu.js":111,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],110:[function(require,module,exports){
module.exports={className:{default:{container:"I_Znwqu5 A_6EqO X_dRA H_7Ig6 D_F ek_BB gl_C e_dRA",header:"jb_fq7 X_fq7",title:"u_b C_Z291T0t",close:"f_r N_eTB r_P",columns:"D_F",optionContainer:"jb6_fq7 D_F ab_C",gridB1:"em_qk ej_0 a_3vhr3 s_3o4BO X_fq7",radio:"c37wHw10_Z1gAvbx D_X H_6Fd5 W_6Fd5 e_6Fd5 I_52qC M_E8xte",spacerB1:"W_6VdP",gridB2:"em_sL ej_0 D_F",freeText:"A_6EqO y_1ACvVU Q_fq7 o_h I_T b_n m_2w4l8N em_N W_7yHc",done:"u_b C_52qC b_n H_6TFj M_1jbgPb P_1EudUu e_dRA ac_CH",inputWrapper:"em_N",spacerB2:"W_74ed",text:"J_x"},started:{done:"I_Z2aVTcY r_P"},freeTextFocused:{freeText:"m_2hvg6c"},isCompactLayout:{container:"H_3r6Mv",header:"D_F N_eTB gl_FM",columns:"D_X N_6DEy",spacerB1:"D_n",spacerB2:"D_n",radio:"M_E8xte",gridB1:"D_B",close:"N_0",gridB2:"D_B X_fq7",optionContainer:"jb_fq7",done:"M_1JNshU f_r"}},_key:"mcYaz"};
},{"./src/molecules/ads/atoms/styles/atomic_feedback_list_item.css":"./molecules/ads/atoms/styles/atomic_feedback_list_item"}],111:[function(require,module,exports){
module.exports={className:{default:{chevronDown:"V_GI P_Z2rzFgL",adFeedbackContainer:"P_3Y3Gk"},isCompactLayout:{chevronDown:"V_ P_0"},feedbackEnabled:{chevronDown:"D_n"}},_key:"Z11MKlJ"};
},{"./src/molecules/ads/atoms/styles/atomic_feedback_menu.css":"./molecules/ads/atoms/styles/atomic_feedback_menu"}],112:[function(require,module,exports){
module.exports={className:{default:{thankYouContainer:"I_Znwqu5 H_74JI D_F gl_C ek_BB X_6DEy e_dRA",header:"u_b D_F gl_FM",caption:"C_Z1TsNWR A_6DUj",close:"N_eTB je_dRA H_6Fd5 r_P"},isCompactLayout:{thankYouContainer:"H_7rdk",header:"u_b D_F gl_FM jb_eo6",caption:"C_Z1TsNWR A_6DUj i_6Eb4 W_3nW7W",close:"je_0 N_eo6"}},_key:"garkd"};
},{"./src/molecules/ads/atoms/styles/atomic_thank_you_message.css":"./molecules/ads/atoms/styles/atomic_thank_you_message"}],113:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_fuji_icon=require("../../../atoms/constants/fuji_icon"),_reactIntl=require("react-intl"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_thank_you_message=require("./styles/thank_you_message"),_thank_you_message2=_interopRequireDefault(_thank_you_message),strings=(0,_reactIntl.defineMessages)({close_ad_thank_you:{id:"ad.close_thank_you",defaultMessage:"close"}}),ThankYouMessage=_react2.default.createClass({displayName:"ThankYouMessage",contextTypes:{intl:_reactIntl.intlShape.isRequired},render:function(){var e=this.props.isCompactLayout,t=this.context.intl.formatMessage,a=(0,_css2.default)(_thank_you_message2.default,{isCompactLayout:e});return _react2.default.createElement("div",{className:a.thankYouContainer},_react2.default.createElement("div",null,_react2.default.createElement("div",{className:a.header},_react2.default.createElement("span",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"ad.thank_you_message",defaultMessage:"Thank you for your feedback."})),_react2.default.createElement("div",{className:a.close,"data-test-id":"close"},_react2.default.createElement(_fuji_icon_button2.default,{kind:_fuji_icon.Kinds.CLOSE,size:_fuji_icon.Sizes.XXS,colorState:_fuji_icon.ColorStates.DISABLED,onClick:this.props.onAdFeedbackClose,title:t(strings.close_ad_thank_you)}))),_react2.default.createElement("div",{className:a.caption},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"ad.thank_you_message_caption",defaultMessage:"We'll review your feedback and make changes as needed."}))))}});exports.default=ThankYouMessage,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","./styles/thank_you_message":112,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],114:[function(require,module,exports){
"use strict";exports.__esModule=!0;var tl1Theme=exports.tl1Theme={darkTheme:{textColor:"#E0E4E9",hoverColor:"#FFFFFF"},lightTheme:{textColor:"#26282A",hoverColor:"#188FFF"},getCss:function(e,t){return[".ad-tl2b {overflow:hidden; text-align:left; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;}","p {margin:0px;}",".y-fp-pg-controls {margin-top:5px; margin-bottom:5px;}",'#tl1_slug {font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:12px; color: '+e+";}",'a {font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:11px; color: '+e+"; }","a:link {text-decoration:none;}","a:hover {color: "+t+";}"].join(" ")}},adConfiguration=exports.adConfiguration={SKY:{yaftName:"norrin_ad_sky",darla:{pos:"SKY",clean:"boxSKY",dest:"tgtSKY",w:160,h:620,fdb:!0,fr:"no_exp",css:"*{text-align:left}"}},TL1:{yaftName:"norrin_ad_tl1",darla:{pos:"TL1",clean:"boxTL1",dest:"tgtTL1",w:140,h:170,fdb:!0,css:tl1Theme.getCss(tl1Theme.lightTheme.textColor,tl1Theme.lightTheme.hoverColor)}},LREC:{yaftName:"norrin_ad_lrec",darla:{pos:"LREC",dest:"tgtLREC",clean:"slot_LREC",w:300,h:268,fdb:!0,fr:"no_exp",css:"*{text-align:left}"}},LREC4:{yaftName:"norrin_ad_lrec4",darla:{pos:"LREC4",dest:"tgtLREC4",clean:"slot_LREC4",w:300,h:268,fdb:!0,fr:"no_exp",css:"*{text-align:left}"}},MON:{yaftName:"norrin_ad_mon",darla:{pos:"MON",dest:"tgtMON",clean:"slot_MON",w:300,h:600,fdb:!0,fr:"no_exp",css:"*{text-align:left}"}}};
},{}],115:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.StackedLrecAdComponent=exports.LrecAdComponent=exports.SkyAdComponent=exports.Tl1AdComponent=exports.MonAdComponent=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_ad=require("./ad.jsx"),_ad2=_interopRequireDefault(_ad);exports.default=_ad2.default;var MonAdComponent=exports.MonAdComponent=_react2.default.createClass({displayName:"MonAdComponent",render:function(){return _react2.default.createElement(_ad2.default,{id:"MON"})}}),Tl1AdComponent=exports.Tl1AdComponent=_react2.default.createClass({displayName:"Tl1AdComponent",render:function(){return _react2.default.createElement(_ad2.default,{id:"TL1"})}}),SkyAdComponent=exports.SkyAdComponent=_react2.default.createClass({displayName:"SkyAdComponent",render:function(){return _react2.default.createElement(_ad2.default,{id:"SKY"})}}),LrecAdComponent=exports.LrecAdComponent=_react2.default.createClass({displayName:"LrecAdComponent",render:function(){return _react2.default.createElement(_ad2.default,{id:"LREC"})}}),StackedLrecAdComponent=exports.StackedLrecAdComponent=_react2.default.createClass({displayName:"StackedLrecAdComponent",render:function(){return _react2.default.createElement("div",{"data-test-id":"stackedLRECs"},_react2.default.createElement(_ad2.default,{id:"LREC"}),_react2.default.createElement(_ad2.default,{id:"LREC4"}))}});
},{"./ad.jsx":105,"react":"./node_modules/react/react.js"}],116:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_ad_list_item=require("../../atoms/ads/ad_list_item.jsx"),_ad_list_item2=_interopRequireDefault(_ad_list_item),_locale=require("../../platform/utils/locale"),_types=require("../../types"),_reactIntl=require("react-intl"),_ads=require("../../actions/ads.js"),_route=require("../../platform/utils/route"),_beacon=require("../../platform/utils/beacon.js"),_constants=require("../../platform/gemini_api_client/constants.js"),PencilAd=_react2.default.createClass({displayName:"PencilAd",contextTypes:{executeAction:_react.PropTypes.func,navigateTo:_react.PropTypes.func,config:_react.PropTypes.object,intl:_reactIntl.intlShape.isRequired,registerAdPosition:_react.PropTypes.func,removeAdPosition:_react.PropTypes.func},componentDidMount:function(){this.context.registerAdPosition({pencilPos:this.props.id})},componentWillUnmount:function(){this.context.removeAdPosition({pencilPos:this.props.id})},handleAdClicked:function(e){var t=this.props,i=t.pencilAdData,o=t.listId;i.type===_constants.UsageType.NativeAdType&&(e.preventDefault(),(0,_beacon.sendBeacon)(i.clickUrl),this.context.navigateTo({route:(0,_route.buildSponsoredMessageRoute)(o,i.creativeId)}))},onAdChoiceClicked:function(e){var t=this.context.intl.locale,i=(0,_locale.getIntl)(t),o=(0,_locale.getLang)(t);e.preventDefault(),e.stopPropagation(),window.open("https://policies.yahoo.com/"+i+"/"+o+"/yahoo/privacy/adinfo/index.html","_blank")},onAdFeedbackRequest:function(){this.context.executeAction(_ads.startAdFeedback)},shouldComponentUpdate:function(e){return e.adRotationId===this.props.adRotationId&&e.pencilAdData.clickUrl!==this.props.pencilAdData.clickUrl||e.isCompactLayout!==this.props.isCompactLayout},render:function(){return this.props.pencilAdData&&this.props.pencilAdData.clickUrl?_react2.default.createElement(_ad_list_item2.default,{pencilAdData:this.props.pencilAdData,adRotationId:this.props.adRotationId,onAdChoiceClicked:this.onAdChoiceClicked,isCompactLayout:this.props.isCompactLayout,onAdFeedbackRequest:this.onAdFeedbackRequest,onClick:this.handleAdClicked,feedbackEnabled:this.props.feedbackEnabled}):null}});exports.default=PencilAd,module.exports=exports.default;
},{"../../actions/ads.js":"./actions/ads","../../atoms/ads/ad_list_item.jsx":66,"../../platform/gemini_api_client/constants.js":"./platform/gemini_api_client/constants","../../platform/utils/beacon.js":"./platform/utils/beacon","../../platform/utils/locale":315,"../../platform/utils/route":"./platform/utils/route","../../types":"./types","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],117:[function(require,module,exports){
module.exports={className:{default:{container:"s_3zJDR d_3mS2U k_w I_52qC D_F el_QDCVj ab_FT",header:"M_0 P_2Xpez D_F ab_AJ A_6FsP",spaceid:"P_Z1E2XDm",positionRow:"P_Z1E2XDm D_F",positionCol:"F_N",button:"ac_C I_Z2aVTcY C_52qC M_1aQVuq b_0 H_6NIX P_2aKXbq"}},_key:"Z5vnm3"};
},{"./src/molecules/ads/styles/atomic_ad_debug.css":"./molecules/ads/styles/atomic_ad_debug"}],"./molecules/advanced_search_pane/atoms/strings":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _reactIntl=require("react-intl");exports.default=(0,_reactIntl.defineMessages)({all_mail_title:{id:"advanced_search.all_mail_title",defaultMessage:"All mail"},unknown_folder_title:{id:"advanced_search.unknown_folder_title",defaultMessage:"Unknown Folder"},system_folder_label:{id:"advanced_search.system_folder_label",defaultMessage:"Select this system folder for searching"},custom_folder_label:{id:"advanced_search.custom_folder_label",defaultMessage:"Select this custom folder for searching"},yahoo_account_description:{id:"advanced_search.yahoo_brand_name",defaultMessage:"Yahoo"},gmail_account_description:{id:"advanced_search.gmail_brand_name",defaultMessage:"Gmail"},aol_account_description:{id:"advanced_search.aol_brand_name",defaultMessage:"Aol"},outlook_account_description:{id:"advanced_search.outlook_brand_name",defaultMessage:"Outlook"},unknown_account_description:{id:"advanced_search.unknown_account_description",defaultMessage:"Unknown"}}),module.exports=exports.default;
},{"react-intl":"./node_modules/react-intl/lib/index.js"}],118:[function(require,module,exports){
"use strict";function notifyMailWindowResizing(i,t){i.dispatch(_react_action_constants.mail.WINDOW_RESIZING,t)}function notifyMailWindowResized(i){i.dispatch(_react_action_constants.mail.WINDOW_RESIZED)}exports.__esModule=!0,exports.notifyMailWindowResizing=notifyMailWindowResizing,exports.notifyMailWindowResized=notifyMailWindowResized;var _react_action_constants=require("../../platform/react_action_constants");
},{"../../platform/react_action_constants":"./platform/react_action_constants"}],119:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_route_handler=require("../../apps/mail/route_handler.jsx"),_route_handler2=_interopRequireDefault(_route_handler),_navigation=require("../../apps/mail/controller_views/navigation.jsx"),_navigation2=_interopRequireDefault(_navigation),_mail_constants=require("../../platform/mail_constants"),_styles=require("./styles"),_styles2=_interopRequireDefault(_styles),_actions=require("./actions"),_right_rail=require("../../apps/mail/controller_views/right_rail.jsx"),_right_rail2=_interopRequireDefault(_right_rail),_lazy_component=require("../../atoms/lazy_component"),_reactIntl=require("react-intl"),NORRIN_WIDE="norrin-wide",strings=(0,_reactIntl.defineMessages)({main_nav:{id:"landmark.folders_nav",defaultMessage:"Folder"}}),AppLayoutMolecule=_react2.default.createClass({displayName:"AppLayoutMolecule",contextTypes:{executeAction:_react.PropTypes.func,intl:_reactIntl.intlShape.isRequired,getCss:_react.PropTypes.func},_renderMainNav:function(e){var t=this.context.intl.formatMessage;return _react2.default.createElement("nav",{className:e.mainNavigation,role:"navigation","aria-label":t(strings.main_nav),"data-yaft-module":"norrin_navigation"},_react2.default.createElement(_navigation2.default,this.props))},_renderLeftRail:function(e){return _react2.default.createElement("div",{className:e.leftRail,"data-test-id":"mail-left-rail"},this._renderMainNav(e))},_renderRightRail:function(){return _react2.default.createElement(_right_rail2.default,this.props)},_renderCue:function(e){return _react2.default.createElement(_lazy_component.LazyComponent,{import:"../scout_cue/",cueName:e,_moduleGetter:function(){return require("../scout_cue/")}})},_renderSSABreachAlert:function(){return _react2.default.createElement(_lazy_component.LazyComponent,{import:"../ssa_breach_security_alert/",_moduleGetter:function(){return require("../ssa_breach_security_alert/")}})},_executeWindowResizingAction:function(){this.context.executeAction(_actions.notifyMailWindowResizing,{innerWidth:window.innerWidth,contentAndRightRailWidth:this._innerContainer.clientWidth,contentAndRightRailHeight:this._innerContainer.clientHeight})},_updateAppMinWidth:function(e){e.hasAttachmentPreview||e.previewPaneSetting===_mail_constants.PreviewPaneSettings.RIGHT?document.body.classList.add(NORRIN_WIDE):document.body.classList.remove(NORRIN_WIDE)},componentWillReceiveProps:function(e){this.props.hasAttachmentPreview===e.hasAttachmentPreview&&this.props.previewPaneSetting===e.previewPaneSetting||this._updateAppMinWidth(e)},componentDidMount:function(){this._updateAppMinWidth(this.props),this._executeWindowResizingAction(),window.addEventListener("resize",this._executeWindowResizingAction)},componentDidUpdate:function(){this.props.isWindowResizingDone&&this.context.executeAction(_actions.notifyMailWindowResized)},componentWillUnmount:function(){this._innerContainer=null,window.removeEventListener("resize",this._executeWindowResizingAction)},render:function(){var e=this,t=this.props,n=t.previewPaneSetting,i=t.isSettings,a=n===_mail_constants.PreviewPaneSettings.RIGHT,r=this.context.getCss(_styles2.default,{verticalPreviewPane:a});return _react2.default.createElement("div",{className:r.shadedContainer,"data-test-id":"content-area"},_react2.default.createElement("div",{className:r.container,"data-test-id":"content-below-tabs"},i?null:this._renderLeftRail(r),this.props.showAptSecurityCue&&this._renderCue("aptSecurityCue"),this.props.showSsaBreachSecurityAlert&&this._renderSSABreachAlert(),this.props.showMailOnboardingCue&&this._renderCue("mailOnboardingCue"),this.props.showNewUserOnboardingCue&&this._renderCue("newUserOnboardingCue"),_react2.default.createElement("div",{className:r.widthRestrictor,ref:function(t){e._innerContainer=t}},_react2.default.createElement("div",{className:r.mainContent,"data-yaft-module":"norrin_main","data-test-id":"mail-app-component",id:"mail-app-component"},_react2.default.createElement(_route_handler2.default,this.props)),i?null:this._renderRightRail())))}});exports.default=AppLayoutMolecule,module.exports=exports.default;
},{"../../apps/mail/controller_views/navigation.jsx":33,"../../apps/mail/controller_views/right_rail.jsx":36,"../../apps/mail/route_handler.jsx":59,"../../atoms/lazy_component":"./atoms/lazy_component","../../platform/mail_constants":"./platform/mail_constants","../scout_cue/":"./molecules/scout_cue","../ssa_breach_security_alert/":"./molecules/ssa_breach_security_alert","./actions":118,"./styles":120,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],120:[function(require,module,exports){
module.exports={className:{default:{shadedContainer:"I_ZnwrMC D_F em_N o_h W_6D6F H_6D6F",container:"D_F em_N o_h s_1HLnlu a_1Ie4E3 cZTwBjA_1Ie4E3 cZTwBjK_1EAG48",leftRail:"a_3rehn W_3o4BO s_3o4BO cZ10Gnkk_ZM1sUU D_F ek_BB em_0",mainContent:"em_N I_52qC j_ZlOSbd o_h p_R D_F s_e5X",widthRestrictor:"D_F em_N ej_eUh",mainNavigation:"em_N je_6Fd5 D_F W_6D6F H_6D6F iz_A"},"verticalPreviewPane-false":{container:"s_1HCsWR"},"themeMode-MEDIUM":{shadedContainer:"I_sgPuT"},"themeMode-DARK":{shadedContainer:"I_sgPuT",mainContent:"I_sgPuT j_n"}},_key:"Z2l6kBH"};
},{"./src/molecules/app_layout/atomic_styles.css":"./molecules/app_layout/atomic_styles"}],121:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function checkBulkTaskProgress(e,t){(0,_invariant2.default)(t.task,"`task` must exist in payload for checking the progress");var a=e.getStore(_user_preferences2.default).getMailboxes()[0].id,s=t.task.id;if(s)return e.mailAPIClient.request("task.status",{mailboxId:a,taskId:s}).then(function(a){var s=a.task;e.dispatch(_react_action_constants.mail.BULK_PROGRESS_RECEIVED,Object.assign({},t,{task:s}))})}function notifySuccess(e,t){var a=t.successActionType,s=t.actionPayload;e.dispatch(a,s)}function cancelBulkTask(e,t){(0,_invariant2.default)(t.task,"`task` must exist in payload for cancelling the progress");var a=e.getStore(_user_preferences2.default).getMailboxes()[0].id,s=t.task.id;if(s)return e.dispatch(_react_action_constants.mail.BULK_CANCEL_REQUESTED,t),e.mailAPIClient.request("task.abort",{mailboxId:a,taskId:s}).then(function(){e.dispatch(_react_action_constants.mail.BULK_CANCEL_SUCCEEDED,t)}).catch(function(a){e.dispatch(_react_action_constants.mail.BULK_CANCEL_FAILED,Object.assign({},t,{error:a}))})}exports.__esModule=!0,exports.checkBulkTaskProgress=checkBulkTaskProgress,exports.notifySuccess=notifySuccess,exports.cancelBulkTask=cancelBulkTask;var _react_action_constants=require("../../platform/react_action_constants"),_invariant=require("../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_user_preferences=require("../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences);
},{"../../platform/invariant":"./platform/invariant","../../platform/react_action_constants":"./platform/react_action_constants","../../stores/user_preferences":"./stores/user_preferences"}],122:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_mail_constants=require("../../platform/mail_constants"),_object=require("../../platform/utils/object"),_progress=require("../../atoms/dialog/progress.jsx"),_progress2=_interopRequireDefault(_progress),_folder_label=require("../../atoms/folder_label"),_folder_label2=_interopRequireDefault(_folder_label),_types=require("../../types"),_actions=require("./actions"),_actions2=require("../../apps/mail/actions"),_folder=require("../../platform/utils/folder"),AsyncTaskProgress=_react2.default.createClass({displayName:"AsyncTaskProgress",contextTypes:{executeAction:_react.PropTypes.func,getStore:_react.PropTypes.func,config:_react.PropTypes.object},componentDidMount:function(){this.pollCount=0,this.checkProgress(),this.handleTerminalStates(this.props.task.status)},componentDidUpdate:function(){var e=this.props.task.status;this.handleTerminalStates(e),e===_mail_constants.BulkTaskStatus.PENDING&&(this.pollCount>=this.context.config.asyncTaskPollCount&&this.handleCancel(),this.cancelCheckProgress(),this.checkProgressTimer=setTimeout(this.checkProgress,this.context.config.asyncTaskPollInterval))},componentWillUnmount:function(){this.cancelCheckProgress()},handleTerminalStates:function(e){var t=this;e===_mail_constants.BulkTaskStatus.COMPLETED&&this.context.executeAction(_actions.notifySuccess,this.props),e!==_mail_constants.BulkTaskStatus.COMPLETED&&e!==_mail_constants.BulkTaskStatus.ABORTED&&e!==_mail_constants.BulkTaskStatus.FAILED||(this.cancelCheckProgress(),setTimeout(function(){return t.context.executeAction(_actions2.autoMessageCheckMail)},0))},checkProgress:function(){this.props.task.status===_mail_constants.BulkTaskStatus.PENDING&&(this.pollCount++,this.context.executeAction(_actions.checkBulkTaskProgress,this.props))},cancelCheckProgress:function(){clearTimeout(this.checkProgressTimer)},handleCancel:function(){this.cancelCheckProgress(),this.context.executeAction(_actions.cancelBulkTask,this.props)},isTaskCancelable:function(){var e=this.props.task;return e.id&&e.status===_mail_constants.BulkTaskStatus.PENDING},renderMessage:function(){var e=this.props.actionType,t=this.props.actionPayload,s=t.folder,a=t.count,n=t.conversations;switch(e){case _mail_constants.BulkActionTypes.MARK_READ:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"progress.mark_read",defaultMessage:"Marking {emailsNum, plural,\n                        =1 {message}\n                        other {# messages}\n                        } in {folderName} as read...\n                    ",values:{emailsNum:a,folderName:_react2.default.createElement(_folder_label2.default,{folderDisplayType:(0,_folder.getFolderDisplayType)(s),name:s.name})}});case _mail_constants.BulkActionTypes.DELETE:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"progress.delete",defaultMessage:"Deleting {emailsNum, plural,\n                        =1 {message}\n                        other {# messages}\n                    } in {folderName}...\n                    ",values:{emailsNum:a,folderName:_react2.default.createElement(_folder_label2.default,{folderDisplayType:(0,_folder.getFolderDisplayType)(s),name:s.name})}});case _mail_constants.BulkActionTypes.ARCHIVE:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"progress.archive",defaultMessage:"Archiving {count, plural,\n                        =1 {message}\n                        other {# messages}\n                    } in {folderName}...\n                    ",values:{count:a,folderName:_react2.default.createElement(_folder_label2.default,{folderDisplayType:(0,_folder.getFolderDisplayType)(s),name:s.name})}});case _mail_constants.BulkActionTypes.MESSAGES_DELETE:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"progress.messages_delete",defaultMessage:"Deleting {conversations, select,\n                        true {{count, plural,\n                            one {conversation}\n                            other {# conversations}\n                        }}\n                        false {{count, plural,\n                            one {message}\n                            other {# messages}\n                        }}\n                    }",values:{conversations:n,count:a}});case _mail_constants.BulkActionTypes.MESSAGES_MOVE:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"progress.messages_move",defaultMessage:"Moving {conversations, select,\n                        true {{count, plural,\n                            one {conversation}\n                            other {# conversations}\n                        }}\n                        false {{count, plural,\n                            one {message}\n                            other {# messages}\n                        }}\n                    }",values:{conversations:n,count:a}});case _mail_constants.BulkActionTypes.MESSAGES_ARCHIVE:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"progress.messages_archive",defaultMessage:"Archiving {conversations, select,\n                        true {{count, plural,\n                            one {conversation}\n                            other {# conversations}\n                        }}\n                        false {{count, plural,\n                            one {message}\n                            other {# messages}\n                        }}\n                    }",values:{conversations:n,count:a}});case _mail_constants.BulkActionTypes.MESSAGES_RESTORE:case _mail_constants.BulkActionTypes.MESSAGES_MARK_NOT_SPAM:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"progress.messages_restore",defaultMessage:"Restoring {conversations, select,\n                        true {{count, plural,\n                            one {conversation}\n                            other {# conversations}\n                        }}\n                        false {{count, plural,\n                            one {message}\n                            other {# messages}\n                        }}\n                    } to Inbox",values:{conversations:n,count:a}});case _mail_constants.BulkActionTypes.MESSAGES_MARK_SPAM:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"progress.messages_mark_spam",defaultMessage:"Marking {conversations, select,\n                        true {{count, plural,\n                            one {conversation}\n                            other {# conversations}\n                        }}\n                        false {{count, plural,\n                            one {message}\n                            other {# messages}\n                        }}\n                    } as Spam",values:{conversations:n,count:a}})}return null},renderStatus:function(){switch(this.props.task.status){case _mail_constants.BulkTaskStatus.ABORTING:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"progress.aborting",defaultMessage:"Cancelling"});case _mail_constants.BulkTaskStatus.ABORTED:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"progress.aborted",defaultMessage:"Successfully cancelled"});case _mail_constants.BulkTaskStatus.ABORT_FAILED:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"progress.abort_failed",defaultMessage:"Failed to cancel. Please Retry"});default:return null}},render:function(){var e=this.props.task;return _react2.default.createElement(_progress2.default,{isCancelable:this.isTaskCancelable(),onCancel:this.handleCancel,progress:e.progress,message:this.renderMessage(),subtitle:this.renderStatus()})}});exports.default=AsyncTaskProgress,module.exports=exports.default;
},{"../../apps/mail/actions":"./apps/mail/actions","../../atoms/dialog/progress.jsx":70,"../../atoms/folder_label":"./atoms/folder_label","../../platform/mail_constants":"./platform/mail_constants","../../platform/utils/folder":"./platform/utils/folder","../../platform/utils/object":"./platform/utils/object","../../types":"./types","./actions":121,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/attachment_tray/actions":[function(require,module,exports){
"use strict";function addAttachment(t,a){var n=a.csid,c=a.files;t.dispatch(_react_action_constants.mail.FILE_ATTACHMENT_ADDED,{csid:n,files:c})}function removeAttachment(t,a){t.dispatch(_react_action_constants.mail.ATTACHMENT_REMOVED,{contentId:a.contentId,csid:a.csid})}function downloadAttachment(t,a){t.dispatch(_react_action_constants.mail.ATTACHMENT_DOWNLOADED,{attachment:a.attachment})}function downloadAllAttachments(t,a){t.dispatch(_react_action_constants.mail.ALL_ATTACHMENTS_DOWNLOADED,{attachments:a.attachments})}exports.__esModule=!0,exports.addAttachment=addAttachment,exports.removeAttachment=removeAttachment,exports.downloadAttachment=downloadAttachment,exports.downloadAllAttachments=downloadAllAttachments;var _react_action_constants=require("../../platform/react_action_constants");
},{"../../platform/react_action_constants":"./platform/react_action_constants"}],"./molecules/attachment_tray/atoms/item":[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_reactIntl=require("react-intl"),_react=require("react"),_react2=_interopRequireDefault(_react),_types=require("../../../types"),_mail_constants=require("../../../platform/mail_constants"),_loading_indicator=require("../../../atoms/loading_indicator.jsx"),_loading_indicator2=_interopRequireDefault(_loading_indicator),_attachment_icon=require("../../../atoms/attachment_icon.jsx"),_attachment_icon2=_interopRequireDefault(_attachment_icon),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_hover_colored_fuji_icon_button=require("../../../atoms/hover_colored_fuji_icon_button.jsx"),_hover_colored_fuji_icon_button2=_interopRequireDefault(_hover_colored_fuji_icon_button),_asymmetric_popover=require("../../../atoms/popover/asymmetric_popover.jsx"),_asymmetric_popover2=_interopRequireDefault(_asymmetric_popover),_popover=require("../../../atoms/constants/popover"),_navigable_list=require("../../../atoms/navigable_list.jsx"),_navigable_list2=_interopRequireDefault(_navigable_list),_navigable_list3=require("../../../atoms/constants/navigable_list"),_mail_ui_vars=require("../../../platform/utils/mail_ui_vars"),_binstring=require("../../../platform/utils/binstring"),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_button=require("../../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_button3=require("../../../atoms/constants/button"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_attachment_item=require("../styles/attachment_item"),_attachment_item2=_interopRequireDefault(_attachment_item),_path=require("../../../platform/utils/path"),path=_interopRequireWildcard(_path),_attachments=require("../../../platform/utils/attachments"),_list_item=require("../../../atoms/list_item.jsx"),_list_item2=_interopRequireDefault(_list_item),_popover_container=require("../../../atoms/popover/popover_container"),_popover_container2=_interopRequireDefault(_popover_container),_popover_anchor=require("../../../atoms/popover/popover_anchor"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_popover_content=require("../../../atoms/popover/popover_content"),_popover_content2=_interopRequireDefault(_popover_content),strings=(0,_reactIntl.defineMessages)({download:{id:"attachment_item.download",defaultMessage:"Download"},untitled:{id:"attachment_item.untitled_filename",defaultMessage:"Untitled"}}),classNames=(0,_css2.default)(_attachment_item2.default),AttachmentItem=_react2.default.createClass({displayName:"AttachmentItem",contextTypes:{intl:_reactIntl.intlShape.isRequired},defaultProps:{smallPreview:!1,previewWithoutDownload:!1},getInitialState:function(){return this._hoverTimer=null,{hover:!1,anchorHover:!1}},componentWillUnmount:function(){clearTimeout(this._hoverTimer)},handleSendAsImage:function(){this.props.onSendAsInlineImage(this.props.attachment)},renderContent:function(e,t){var a=e.state,n=this.props.mayContainVirus,r=void 0;switch(t){case _mail_constants.Attachments.SimplifiedTypes.AUDIO:r="audio";break;case _mail_constants.Attachments.SimplifiedTypes.VIDEO:r="video";break;case _mail_constants.Attachments.SimplifiedTypes.IMAGE:r="img"}if(a===_mail_constants.RecordStates.LOADING||a===_mail_constants.RecordStates.DOES_NOT_EXIST)return t===_mail_constants.Attachments.SimplifiedTypes.IMAGE?_react2.default.createElement("div",null,_react2.default.createElement(r,{src:e.thumbnailUrl||e.downloadUrl,className:classNames.media,style:{opacity:"0.3"}}),_react2.default.createElement("div",{className:classNames.loadingIconContainer},_react2.default.createElement(_loading_indicator2.default,null))):_react2.default.createElement(_loading_indicator2.default,null);if(a===_mail_constants.RecordStates.ERROR)return _react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.ATTENTION,size:_fuji_icon3.Sizes.M,colorState:_fuji_icon3.ColorStates.WARNING});if(n)return _react2.default.createElement(_attachment_icon2.default,_extends({},e,{disabled:!0}));if(r){var i=(0,_attachments.getThumbnailUrl)(e.thumbnailUrl,150);return _react2.default.createElement(r,{src:i,className:classNames.media})}return _react2.default.createElement(_attachment_icon2.default,e)},onMouseEnterChange:function(e){var t=this;clearTimeout(this._hoverTimer),e?this.state.hover!==e&&this.setState({hover:e}):this._hoverTimer=setTimeout(function(){t.state.hover!==e&&t.setState({hover:e})},0)},onMouseEnterAnchor:function(e){this.setState({anchorHover:e})},renderPopoverMenu:function(e){return _react2.default.createElement(_asymmetric_popover2.default,{permittedArrowDirections:[_popover.PermittedArrowDirections.UP],zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH,align:_popover.Align.END,offset:2*_mail_ui_vars.GRID_UNIT,triggerOn:_asymmetric_popover.OnTriggers.CLICK,triggerOff:_asymmetric_popover.OffTriggers.CLICK,className:classNames.popoverContainer,onContentMouseOver:this.onMouseEnterChange.bind(this,!0),onContentMouseOut:this.onMouseEnterChange.bind(this,!1),isArrowVisible:!1},_react2.default.createElement("div",{className:classNames.itemMenu,onMouseEnter:this.onMouseEnterChange.bind(this,!0),onMouseLeave:this.onMouseEnterChange.bind(this,!1)},_react2.default.createElement(_hover_colored_fuji_icon_button2.default,{kind:_fuji_icon3.Kinds.MORE,colorStates:{normal:_fuji_icon3.ColorStates.COOL_FAINT,hovered:_fuji_icon3.ColorStates.SELECTED},size:_fuji_icon3.Sizes.XXS})),_react2.default.createElement("div",{className:classNames.menuContainer,"data-test-id":"attachment-menu"},_react2.default.createElement(_navigable_list2.default,{kind:_navigable_list3.Kinds.MENU,focusOnMount:!0},e===_mail_constants.Attachments.Types.IMAGE?_react2.default.createElement(_list_item2.default,{className:classNames.menuItem,"data-test-id":"send-as-image-item"},_react2.default.createElement(_button2.default,{kind:_button3.Kinds.MENUITEM_PARENT_TEXT_COLOR,onClick:this.handleSendAsImage},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"attachment.send_as_images",defaultMessage:"Send as image"}))):null,_react2.default.createElement(_list_item2.default,{className:classNames.menuItem,"data-test-id":"remote-att-item"},_react2.default.createElement(_button2.default,{kind:_button3.Kinds.MENUITEM_PARENT_TEXT_COLOR,onClick:this.props.onRemove},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"attachment.remove",defaultMessage:"Remove"}))))))},_isPreviewable:function(e){return _mail_constants.AttachmentPreview.PreviewableTypes.indexOf(e)>-1},_renderPreviewMask:function(e){var t=this.props,a=t.onClick,n=t.attachment;return _react2.default.createElement("div",{className:e.previewButtonWrapper},_react2.default.createElement(_button2.default,{"data-test-id":"attachment-item-preview",kind:_button3.Kinds.PLAIN,className:e.previewButton,onClick:function(e){return a(e,n.id)}},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"attachment_item.preview",defaultMessage:"Preview"})))},_renderDownloadMask:function(e){return _react2.default.createElement("div",{className:e.noPreviewWrapper,"data-test-id":"attachment-no-preview"},_react2.default.createElement("span",{className:e.noPreviewText},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"attachment_item.no_preview",defaultMessage:"No Preview"})))},render:function(){var e=this.props,t=e.attachment,a=void 0===t?{}:t,n=e.allowDownload,r=e.readOnly,i=e.isPreviewEnabled,o=e.onDownload,s=e.mayContainVirus,l=e.previewWithoutDownload,c=e.smallPreview,_=a.filename,u=a.subtype,m=a.type,d=a.state,f=a.size,p=this.context.intl.formatMessage,h=d===_mail_constants.RecordStates.LOADING,v=(0,_attachments.getAttachmentType)(m,u),E=n&&!h,g=this._isPreviewable(v),N=path.extname(_),b=_?path.basename(_,N):p(strings.untitled),M=(0,_binstring.prettyPrintBytes)(f,1),w=(0,_css2.default)(_attachment_item2.default,{type:v,state:d,anchorHover:this.state.anchorHover,spam:s,smallPreview:c,isPreviewEnabled:i,hover:this.state.hover});return _react2.default.createElement("div",{className:w.container},!r&&this.state.hover&&this.renderPopoverMenu(v),_react2.default.createElement("div",{"data-test-id":"attachment-container",className:w.content,onMouseOver:this.onMouseEnterChange.bind(this,!0),onMouseLeave:this.onMouseEnterChange.bind(this,!1)},_react2.default.createElement("div",{className:w.mediaContent},this.renderContent(a,v)),i&&(n||l)&&r&&this.state.hover?_react2.default.createElement("div",{className:w.hoverMask},g?this._renderPreviewMask(w):this._renderDownloadMask(w)):null),_react2.default.createElement("div",{className:w.label,onMouseOver:this.onMouseEnterAnchor.bind(this,!0),onMouseLeave:this.onMouseEnterAnchor.bind(this,!1)},E?_react2.default.createElement(_popover_container2.default,{className:w.downloadIcon,onClick:o},_react2.default.createElement(_popover_anchor2.default,null,_react2.default.createElement("a",{"data-test-id":"attachment-download",href:a.downloadUrl,className:w.downloadIconWrapper},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.DOWNLOAD,size:_fuji_icon3.Sizes.XXS,colorState:this.state.anchorHover?_fuji_icon3.ColorStates.SELECTED:_fuji_icon3.ColorStates.COOL_FAINT}),_react2.default.createElement("span",{className:w.downloadFilename,title:a.filename},_react2.default.createElement("div",{className:w.filename},_react2.default.createElement("span",{className:w.labelBaseName},_react2.default.createElement("span",null,b)),_react2.default.createElement("span",null,N)),_react2.default.createElement("div",{className:w.fileSize},M)))),_react2.default.createElement(_popover_content2.default,{triggerOn:_popover.Triggers.HOVER,permittedArrowDirections:[_popover.PermittedArrowDirections.UP],zAltitude:1},_react2.default.createElement("span",{className:w.popover},_react2.default.createElement(_reactIntl.FormattedMessage,strings.download)))):_react2.default.createElement("span",{className:w.filenameContainer,title:a.filename},_react2.default.createElement("div",{className:w.filename},_react2.default.createElement("span",{className:w.labelBaseName},_react2.default.createElement("span",null,b)),_react2.default.createElement("span",null,N)),c?null:_react2.default.createElement("div",{className:w.fileSize},M))))}});exports.default=AttachmentItem,module.exports=exports.default;
},{"../../../atoms/attachment_icon.jsx":"./atoms/attachment_icon","../../../atoms/button.jsx":"./atoms/button","../../../atoms/constants/button":"./atoms/constants/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/navigable_list":"./atoms/constants/navigable_list","../../../atoms/constants/popover":"./atoms/constants/popover","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/hover_colored_fuji_icon_button.jsx":"./atoms/hover_colored_fuji_icon_button","../../../atoms/list_item.jsx":"./atoms/list_item","../../../atoms/loading_indicator.jsx":"./atoms/loading_indicator","../../../atoms/navigable_list.jsx":"./atoms/navigable_list","../../../atoms/popover/asymmetric_popover.jsx":"./atoms/popover/asymmetric_popover","../../../atoms/popover/popover_anchor":"./atoms/popover/popover_anchor","../../../atoms/popover/popover_container":"./atoms/popover/popover_container","../../../atoms/popover/popover_content":"./atoms/popover/popover_content","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/attachments":"./platform/utils/attachments","../../../platform/utils/binstring":"./platform/utils/binstring","../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../../platform/utils/path":"./platform/utils/path","../../../types":"./types","../styles/attachment_item":"./molecules/attachment_tray/styles/attachment_item","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],123:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getFilenameFromSubject(e){if(!/[a-z0-9]/i.test(e))return(new Date).toISOString().split("T")[0].replace(/-/g,"");var t=e.replace(/ /g,"_"),a=t.replace(/\W/g,"").replace(/_+$/,"").replace(/^_+/,"");return a.substring(0,20)}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_types=require("../../types"),_mail_constants=require("../../platform/mail_constants"),_attachments=require("../../platform/utils/attachments"),_item=require("./atoms/item.jsx"),_item2=_interopRequireDefault(_item),_actions=require("./actions.js"),AttachmentTrayActions=_interopRequireWildcard(_actions),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_attachment_tray=require("./styles/attachment_tray"),_attachment_tray2=_interopRequireDefault(_attachment_tray),_constants=require("../../platform/rapid_client/constants"),_fuji_icon=require("../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../atoms/constants/fuji_icon"),_alert=require("../../atoms/dialog/alert"),_alert2=_interopRequireDefault(_alert),_fuji_icon_button=require("../../atoms/fuji_icon_button"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),classNames=(0,_css2.default)(_attachment_tray2.default),strings=(0,_reactIntl.defineMessages)({title:{id:"learnmore.title",defaultMessage:"Attachments cannot be downloaded"},content:{id:"learnmore.content",defaultMessage:"Attachments in emails marked as Spam may contain harmful content.            To download attachments in this email, please move the email out of the Spam folder."},warningIcon:{id:"learnmore.warning",defaultMessage:"Warning"}}),AttachmentTray=_react2.default.createClass({displayName:"AttachmentTray",contextTypes:{executeAction:_react.PropTypes.func,config:_react.PropTypes.object,intl:_reactIntl.intlShape.isRequired},getDefaultProps:function(){return{onAttachmentRemove:function(){},onAttachmentPreview:function(){}}},getInitialState:function(){var e=this.props.message;return{combinedZipFilename:e?getFilenameFromSubject(e.headers.subject):"",learnMoreShown:!1}},onItemRemove:function(e){this.props.readOnly||this.props.onAttachmentRemove(e)},onItemDownloaded:function(e){this.context.executeAction(AttachmentTrayActions.downloadAttachment,{attachment:e,i13nModel:{mKey:_constants.MKEYS.DOWNLOAD_ATTACHMENT,sec:_constants.SEC_VALUES.MSG_READ_ATTACHMENT,mKeyGroup:_constants.MKEY_GROUPS.dwnld_attmnt}})},onDownloadAll:function(e){this.context.executeAction(AttachmentTrayActions.downloadAllAttachments,{attachments:e,i13nModel:{mKey:_constants.MKEYS.DOWNLOAD_ATTACHMENT_ALL,sec:_constants.SEC_VALUES.MSG_READ_ATTACHMENT,mKeyGroup:_constants.MKEY_GROUPS.dwnld_attmnt}})},getDownloadAllAttachmentsUrl:function(){var e=this.props.message.id,t=this.state.combinedZipFilename;return"https://mg.mail.yahoo.com/ya/download?m=YaDownload&"+("archivename=Attachments_"+t+".zip&appid="+_mail_constants.appId+"&mid="+e)},_renderWarningMsg:function(){var e=this,t=this.context.intl.formatMessage,a=this.state.learnMoreShown;return _react2.default.createElement("div",{className:classNames.spamDownloadWarning},_react2.default.createElement(_fuji_icon_button2.default,{colorState:_fuji_icon3.ColorStates.WARNING,className:classNames.attentionIcon,kind:_fuji_icon3.Kinds.ATTENTION,size:_fuji_icon3.Sizes.XXS,title:t(strings.warningIcon)}),_react2.default.createElement(_reactIntl.FormattedMessage,{id:"attachment.dl.warning",defaultMessage:"Attachments cannot be downloaded.","data-test-id":"dl-warning"}),_react2.default.createElement("button",{className:classNames.learnMore,onClick:function(){return e.setState({learnMoreShown:!0})},"data-test-id":"learn-more"},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"attachment.learnmore",defaultMessage:"Learn more"})),a?_react2.default.createElement(_alert2.default,{title:t(strings.title),message:t(strings.content),onAccept:function(){return e.setState({learnMoreShown:!1})}}):null)},render:function(){var e=this,t=(0,_attachments.getAttachmentsForTray)(this.props.attachments||[]),a=this.props,n=a.readOnly,r=a.allowDownload,o=a.mayContainVirus,s=a.onAttachmentPreview,i=a.message,l=this.context.config.attachmentPreview,c=t.length;return c?_react2.default.createElement("div",{className:classNames.tray},i&&r&&c>1?_react2.default.createElement("a",{className:classNames.downloadAllLink,"data-test-id":"download-all-attachments",href:this.getDownloadAllAttachmentsUrl(),onClick:function(){return e.onDownloadAll(t)}},_react2.default.createElement("span",{className:classNames.downloadAllIcon},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.DOWNLOAD,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.SELECTED})),_react2.default.createElement(_reactIntl.FormattedMessage,{id:"attachment_tray.downloadAll",defaultMessage:"Download all {numberOfAttachments} attachments",values:{numberOfAttachments:c}})):null,o?this._renderWarningMsg():null,_react2.default.createElement("ul",{className:classNames.ul},t.map(function(t,a){return _react2.default.createElement("li",{key:a,className:classNames.item},_react2.default.createElement(_item2.default,{attachment:t,readOnly:n,allowDownload:r,mayContainVirus:o,onDownload:e.onItemDownloaded.bind(null,t),onRemove:e.onItemRemove.bind(null,t),onClick:s.bind(null,t.id),isPreviewEnabled:r&&Boolean(l),onSendAsInlineImage:e.props.onSendAsInlineImage}))}))):null}});exports.default=AttachmentTray,module.exports=exports.default;
},{"../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../atoms/dialog/alert":"./atoms/dialog/alert","../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../atoms/fuji_icon_button":"./atoms/fuji_icon_button","../../platform/mail_constants":"./platform/mail_constants","../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../platform/utils/attachments":"./platform/utils/attachments","../../types":"./types","./actions.js":"./molecules/attachment_tray/actions","./atoms/item.jsx":"./molecules/attachment_tray/atoms/item","./styles/attachment_tray":124,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/attachment_tray/styles/attachment_item":[function(require,module,exports){
module.exports={className:{default:{container:"W_3n93F p_R",content:"I_2iedTo k_w H_7yHc p_R o_h",mediaContent:"D_F ab_C gl_C H_6D6F",media:"W_6D6F",button:"c27KHO0_n b_0 I_ZS20TA C_52qC A_6EqO W_6D6F H_6D6F D_F gl_FM ab_C P_3gJOe",itemMenu:"p_a Z_O T_36JN3 R_36JN3 W_6MGW H_6MGW e_6MGW I_52qC j_20lmjm D_F gl_C ab_C r_P",menuContainer:"P_3HLUz",menuItem:"J_x I4_2ieea9 C4_Z2aVTcY",label:"A_6Eb4 i_6FIA J_x D_F r_P",filename:"D_F u_e69",labelBaseName:"G_e o_h",fileSize:"u_dzD A_6DUj",filenameContainer:"D_F ek_BB o_h J_x C_Z1TsNWR Q_eo6",downloadFilename:"D_F ek_BB o_h J_x C_Z1TsNWR Q_eo6 W_3mS2U",loadingIconContainer:"p_a T_0 L_0 W_6D6F H_6D6F D_F gl_C ab_C",hoverMask:"p_a T_0 B_0 L_0 R_0 D_F gl_C",previewButtonWrapper:"I_a0zME D_F ek_BB gl_C em_N",noPreviewWrapper:"q_ZnIF8Y b_Z14vXdP D_F ek_BB gl_C em_N",previewButton:"A_6EqO u_e69 C_Z2aVTcY P_Z1E2YFn r_P q_n b_0 F_N",noPreviewText:"A_6EqO u_e69 C_Z1TsNWR D_F gl_C",downloadIcon:"en_0",downloadIconWrapper:"D_F",popover:"P_Z1E2YFn u_e69"},smallPreview:{container:"W_7Ig6",content:"H_7jIs",label:"A_6DUj i_6EqO Y_eTB"},anchorHover:{downloadFilename:"C_Z2aVTcY",filenameContainer:"C_Z2aVTcY"},spam:{filenameContainer:"C_ZroviD r_BN",label:"r_BN"},hover:{content:"b_2fAfSG",mediaContent:"O_cMp"},"type-image":{mask:"I_A5561"},"type-xls":{content:"I_2m2209"},"type-ppt":{content:"I_Z2gRbsK"},"type-doc":{content:"I_Z1gjdlg"},"type-pdf":{content:"I_Z2gRbsK"},"type-compressed":{content:"I_Z21PQN4"},"type-video":{content:"I_18K0L5"},"type-audio":{content:"I_18K0L5"},"type-cal":{content:"I_18K0L5"},"state-ERROR":{content:"I_2iedTo P_dRA",mediaContent:"I_ZnIF8Y",label:"C_Znn46r"}},_key:"ZL5v6r"};
},{"./src/molecules/attachment_tray/styles/atomic_attachment_item.css":"./molecules/attachment_tray/styles/atomic_attachment_item"}],124:[function(require,module,exports){
module.exports={className:{default:{attentionIcon:"p_R T_e8l",tray:"P_0 je_fq7",ul:"hd_n D_F eo_HB M_gQyVX P_0",downloadAllLink:"D_F ab_GM C_Z2aVTcY A_6Eb4",downloadAllIcon:"E_eo6",spamDownloadWarning:"C_Znn46r",learnMore:"I_T b_0 C_Z2aVTcY r_P Q_fq7",item:"E_6Fd5 Y_6LEV"}},_key:"1IB8k8"};
},{"./src/molecules/attachment_tray/styles/atomic_attachment_tray.css":"./molecules/attachment_tray/styles/atomic_attachment_tray"}],125:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_fuji_icon=require("../../atoms/constants/fuji_icon"),_fuji_icon_button=require("../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_button=require("./styles/button"),_button2=_interopRequireDefault(_button),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_route=require("../../platform/utils/route"),classNames=(0,_css2.default)(_button2.default),strings=(0,_reactIntl.defineMessages)({search_back:{id:"back_to_search_results",defaultMessage:"Back to search results"}}),BackToList=_react2.default.createClass({displayName:"BackToList",contextTypes:{executeAction:_react.PropTypes.func,navigateTo:_react.PropTypes.func.isRequired,intl:_reactIntl.intlShape.isRequired},handleOnClick:function(){this.context.navigateTo({route:(0,_route.buildSearchRouteFromListId)(this.props.listId)})},render:function(){var e=this.context.intl.formatMessage,t=e(strings.search_back);return _react2.default.createElement(_fuji_icon_button2.default,{"data-iskeynav":!0,"data-test-id":"toolbar-search-back","aria-label":t,title:t,kind:_fuji_icon.Kinds.ARROW_UP,size:_fuji_icon.Sizes.XS,rotate:_fuji_icon.Rotate.D270,onClick:this.handleOnClick,colorState:_fuji_icon.ColorStates.INHERITED,className:classNames.button},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"back_to_search_icon_label",defaultMessage:"Search results"}))}});exports.default=BackToList,module.exports=exports.default;
},{"../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../platform/utils/route":"./platform/utils/route","./styles/button":126,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],126:[function(require,module,exports){
module.exports={className:{default:{button:"y_1ACvVU A_6EqO J_x C_q cdPFi_q"}},_key:"Z1S4EJX"};
},{"./src/molecules/back_to_search_list/styles/atomic_button.css":"./molecules/back_to_search_list/styles/atomic_button"}],127:[function(require,module,exports){
"use strict";function browserNotificationsDisplayed(t,s){var i=s.listId;t.dispatch(_react_action_constants.mail.BROWSER_NOTIFICATIONS_DISPLAYED,{listId:i})}exports.__esModule=!0,exports.browserNotificationsDisplayed=browserNotificationsDisplayed;var _react_action_constants=require("../../platform/react_action_constants");
},{"../../platform/react_action_constants":"./platform/react_action_constants"}],128:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_types=require("../../../types"),BrowserNotification=_react2.default.createClass({displayName:"BrowserNotification",contextTypes:{config:_react.PropTypes.object},componentDidMount:function(){var t=this.props.notification,e=t.title,i=t.options,o=t.onClick;this._displayNotification({title:e,options:i,onClick:o})},_displayNotification:function(t){var e=t.title,i=t.options,o=t.onClick,r=new window.Notification(e,i);o&&r.addEventListener("click",o)},render:function(){return null}});exports.default=BrowserNotification,module.exports=exports.default;
},{"../../../types":"./types","react":"./node_modules/react/react.js"}],129:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_types=require("../../../types"),_actions=require("../actions"),_xavatar_utils=require("../../../atoms/utils/xavatar_utils"),_utils=require("./utils.js"),_browser_notification=require("../atoms/browser_notification"),_browser_notification2=_interopRequireDefault(_browser_notification),_route=require("../../../platform/utils/route"),FALLBACK_ICON_URL="https://s.yimg.com/nq/a/img/desktop-notification-mail-100x100_1.png",strings=(0,_reactIntl.defineMessages)({summaryNotificationTitle:{id:"summary_notification_title",defaultMessage:"You have {newMessageCount, number} new messages"},summaryNotificationBody:{id:"summary_notification_body",defaultMessage:"From {senderCount, plural,\n            =1 {{senderOne}}\n            =2 {{senderOne} and {senderTwo}}\n            =3 {{senderOne}, {senderTwo}, and {senderThree}}\n            other {{senderOne}, {senderTwo}, {senderThree}, and {remainingSenderCount} more}\n        }"},singleNotificationMissingSubject:{id:"single_notification_missing_subject",defaultMessage:"No Subject"}}),NewMessageBrowserNotification=_react2.default.createClass({displayName:"NewMessageBrowserNotification",contextTypes:{intl:_reactIntl.intlShape,config:_react.PropTypes.object,executeAction:_react.PropTypes.func,navigateTo:_react.PropTypes.func},componentDidMount:function(){var t=this.props.listId;this.context.executeAction(_actions.browserNotificationsDisplayed,{listId:t})},_transformMessageGroupsToNotifications:function(t){var e=this._filterMessageGroups(t);return 0===e.length?[]:e.length>3?[this._generateSummaryNotification(e)]:this._generateSingleNotifications(e)},_filterMessageGroups:function(t){return this.context.config.peopleNotifications?t.filter(function(t){return(0,_utils.isClassifiedAsPeopleMessage)(t.messages[t.messages.length-1])}):t},_generateSummaryNotification:function(t){var e=this.context.intl.formatMessage,i=t.map(function(t){return t.messages[t.messages.length-1]}),o=(0,_utils.getSummaryNotificationFormatOptions)(i),n=o.titleFormatOptions,r=o.bodyFormatOptions,s=e(strings.summaryNotificationTitle,n),a=e(strings.summaryNotificationBody,r),u=this._getSummaryNotificationIcon(),c=(0,_utils.getNotificationMetadataFromMessage)(i[0]),l=c.timestamp,f=c.id,d=c.folderId;return this._transformNotification({title:s,body:a,icon:u,timestamp:l,id:f,folderId:d})},_generateSingleNotifications:function(t){var e=this,i=this.context.intl.formatMessage;return t.map(function(t){var o=t.messages[t.messages.length-1],n=(0,_utils.getSingleNotificationTitle)(o),r=(0,_utils.getSingleNotificationBody)(o)||i(strings.singleNotificationMissingSubject),s=e._getSingleNotificationIcon(o),a=(0,_utils.getNotificationMetadataFromMessage)(o),u=a.timestamp,c=a.id,l=a.folderId,f=t.id;return e._transformNotification({title:n,body:r,icon:s,timestamp:u,id:c,folderId:l,groupId:f})})},_transformNotification:function(t){var e=t.title,i=t.body,o=t.icon,n=t.timestamp,r=t.id,s=t.folderId,a=t.groupId;return{title:e,options:{body:i,icon:o,lang:this.context.intl.locale,timestamp:n,tag:r},onClick:this._getClickHandler({folderId:s,groupId:a})}},_getSummaryNotificationIcon:function(){return FALLBACK_ICON_URL},_getSingleNotificationIcon:function(t){var e={email:t.headers.from.length?t.headers.from[0].email:""},i="160";return(0,_xavatar_utils.getXavatarURI)(e,i,FALLBACK_ICON_URL)},_getClickHandler:function(t){var e=this,i=t.folderId,o=t.groupId;return function(t){t.preventDefault(),t.target.close(),window.focus(),e.context.navigateTo({route:o?(0,_route.buildMessageRouteFromFolderIdGroupId)(i,o):(0,_route.buildFolderRouteFromFolderId)(i)})}},render:function(){var t=this.props.messageGroups,e=this._transformMessageGroupsToNotifications(t);return _react2.default.createElement("div",null,e.map(function(t){return _react2.default.createElement(_browser_notification2.default,{key:t.options.tag,notification:t})}))}});exports.default=NewMessageBrowserNotification,module.exports=exports.default;
},{"../../../atoms/utils/xavatar_utils":"./atoms/utils/xavatar_utils","../../../platform/utils/route":"./platform/utils/route","../../../types":"./types","../actions":127,"../atoms/browser_notification":128,"./utils.js":130,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],130:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function isClassifiedAsPeopleMessage(e){return"P"===e.classification}function getNotificationMetadataFromMessage(e){return{timestamp:1e3*e.headers.date,id:e.id,folderId:e.folder.id}}function getSingleNotificationTitle(e){return getSenderInformation(e)}function getSingleNotificationBody(e){return e.headers.subject}function getSummaryNotificationFormatOptions(e){var t=generateSummaryNotificationTitleFormatOptions(e),i=generateSummaryNotificationBodyFormatOptions(e);return{titleFormatOptions:t,bodyFormatOptions:i}}function generateSummaryNotificationTitleFormatOptions(e){return{newMessageCount:e.length}}function generateSummaryNotificationBodyFormatOptions(e){var t=condenseSenders(e),i={senderCount:t.length};return t.length>=1&&(i.senderOne=t[0]),t.length>=2&&(i.senderTwo=t[1]),t.length>=3&&(i.senderThree=t[2]),t.length>3&&(i.remainingSenderCount=t.length-3),i}function condenseSenders(e){return(0,_uniq2.default)(e.map(getSenderInformation))}function getSenderInformation(e){var t=e.headers.from[0]||{};return t.name||t.email||""}exports.__esModule=!0,exports.isClassifiedAsPeopleMessage=isClassifiedAsPeopleMessage,exports.getNotificationMetadataFromMessage=getNotificationMetadataFromMessage,exports.getSingleNotificationTitle=getSingleNotificationTitle,exports.getSingleNotificationBody=getSingleNotificationBody,exports.getSummaryNotificationFormatOptions=getSummaryNotificationFormatOptions;var _uniq=require("lodash/uniq"),_uniq2=_interopRequireDefault(_uniq);
},{"lodash/uniq":"./node_modules/lodash/uniq.js"}],131:[function(require,module,exports){
"use strict";exports.__esModule=!0;var CHECKMAIL_MIN_INTERVAL=exports.CHECKMAIL_MIN_INTERVAL=1e3;
},{}],132:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _react=require("react"),_actions=require("../../apps/mail/actions"),_constants=require("./constants"),CheckMail=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,t.apply(this,arguments))}return _inherits(e,t),e.prototype.componentDidMount=function(){var t=this.context.config.checkMailInterval;t>=_constants.CHECKMAIL_MIN_INTERVAL&&(this.checkMailIntervalHandle=setInterval(this.checkMail.bind(this),t))},e.prototype.componentWillUnmount=function(){clearInterval(this.checkMailIntervalHandle)},e.prototype.checkMail=function(){this.context.executeAction(_actions.autoMessageCheckMail)},e.prototype.render=function(){return null},e}(_react.Component);CheckMail.contextTypes={config:_react.PropTypes.object,executeAction:_react.PropTypes.func},exports.default=CheckMail,module.exports=exports.default;
},{"../../apps/mail/actions":"./apps/mail/actions","./constants":131,"react":"./node_modules/react/react.js"}],133:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_comms_properties=require("./styles/comms_properties"),_comms_properties2=_interopRequireDefault(_comms_properties),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_constants=require("../../../platform/rapid_client/constants"),_utils=require("../../../platform/utils/"),strings=(0,_reactIntl.defineMessages)({mail_icon:{id:"properties.mail_icon",defaultMessage:"Mail"},messenger_icon:{id:"properties.messenger_icon",defaultMessage:"Messenger"},contacts_icon:{id:"properties.contacts_icon",defaultMessage:"Contacts"},calendar_icon:{id:"properties.calendar_icon",defaultMessage:"Calendar"},notepad_icon:{id:"properties.notepad_icon",defaultMessage:"Notepad"},subproperties_nav:{id:"landmark.subproperties_nav",defaultMessage:"Navigate to other Yahoo properties like Messenger, Calendar, Contacts and Notepad"}}),CommsProperties=_react2.default.createClass({displayName:"CommsProperties",contextTypes:{config:_react.PropTypes.object,intl:_reactIntl.intlShape.isRequired,getCss:_react.PropTypes.func},handle:function(e,t){var r=(0,_utils.getInteractionFromEvent)(e),i=this.props.onPropertyClick;e.stopPropagation(),i(r,t)},renderProperty:function(e,t){var r=this,i=e.href,s=e.kind,n=e.text,o=this.context.intl.formatMessage(n);return _react2.default.createElement("a",{key:n.id,onClick:function(t){return r.handle(t,e)},href:i,className:t.property,"aria-label":o,title:o,target:s,"data-iskeynav":!0,tabIndex:-1},_react2.default.createElement(_fuji_icon2.default,{kind:s,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.INHERITED}))},render:function(){var e=this,t=this.props.verticalLayout,r=this.context.intl.formatMessage,i=this.context.getCss(_comms_properties2.default,{verticalLayout:t}),s=[{kind:_fuji_icon3.Kinds.INBOX,text:strings.mail_icon,mKey:_constants.MKEYS.MAIL_ICON,hidden:!this.props.showMailIcon},{href:"https://messenger.yahoo.com/",kind:_fuji_icon3.Kinds.MESSENGER,text:strings.messenger_icon,mKey:_constants.MKEYS.MESSENGER_ICON},{href:"https://address.yahoo.com/",kind:_fuji_icon3.Kinds.CONTACTS,text:strings.contacts_icon,mKey:_constants.MKEYS.CONTACTS_ICON},{href:this.context.config.calendarURL,kind:_fuji_icon3.Kinds.CALENDAR,text:strings.calendar_icon,mKey:_constants.MKEYS.CALENDAR_ICON},{href:"https://calendar.yahoo.com/?view=notepad",kind:_fuji_icon3.Kinds.NOTEPAD,text:strings.notepad_icon,mKey:_constants.MKEYS.NOTEPAD_ICON}];return _react2.default.createElement("div",{"data-test-id":"comms-properties",role:"navigation","aria-label":r(strings.subproperties_nav),className:i.properties},s.map(function(t){return!t.hidden&&e.renderProperty(t,i)}))}});exports.default=CommsProperties,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../../platform/utils/":"./platform/utils","./styles/comms_properties":134,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],134:[function(require,module,exports){
module.exports={className:{default:{properties:"D_F",property:"D_F U_0 E_6EGz cdPFi_Z1TsNWR cdPFi4_Z2aVTcY ir3_2d4VCo"},verticalLayout:{properties:"ek_BB Y_6EGz",property:"E_0 U_6EGz"},"themeMode-MEDIUM":{property:"cdPFi_ZpQYvz cdPFi4_52qC ir3_Z1a7UWG"},"themeMode-DARK":{property:"cdPFi_ZpQYvz cdPFi4_52qC ir3_Z1a7UWG"}},_key:"1YehCW"};
},{"./src/molecules/comms_properties/atoms/styles/atomic_comms_properties.css":"./molecules/comms_properties/atoms/styles/atomic_comms_properties"}],135:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var t=e.getStore(_features2.default);return{showSettingsCue:t.isEnabled("settingsCue"),showSettingsBadge:t.isEnabled("HSSettingsBadge"),showHSSettingsCue:t.isEnabled("HSSettingsCue"),showThemesCue:t.isEnabled("themesCue")}}exports.__esModule=!0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_comms_properties=require("./atoms/comms_properties.jsx"),_comms_properties2=_interopRequireDefault(_comms_properties),_settings_menu=require("../../apps/mail/controller_views/settings_menu"),_settings_menu2=_interopRequireDefault(_settings_menu),_comms_properties3=require("./styles/comms_properties"),_comms_properties4=_interopRequireDefault(_comms_properties3),_actions=require("../../apps/mail/actions"),_constants=require("../../platform/rapid_client/constants"),_features=require("../../stores/features"),_features2=_interopRequireDefault(_features),_fluxibleAddonsReact=require("fluxible-addons-react"),_keyboard_navigation_focus_group=require("../../atoms/keyboard_navigation_focus_group.jsx"),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),CommsProperties=_react2.default.createClass({displayName:"CommsProperties",contextTypes:{executeAction:_react.PropTypes.func,getCss:_react.PropTypes.func},onPropertyClick:function(e,t){this.context.executeAction(_actions.handleHeaderNavigation,{i13nModel:{mKey:t.mKey,sec:_constants.SEC_VALUES.HEADER_NAV,interactionType:e}})},render:function(){var e=this.props.verticalLayout,t=this.context.getCss(_comms_properties4.default,{verticalLayout:e});return _react2.default.createElement(_keyboard_navigation_focus_group.KeyboardNavigationFocusGroup,{axis:e?_keyboard_navigation_focus_group.NAVIGATION_AXES.VERTICAL:_keyboard_navigation_focus_group.NAVIGATION_AXES.HORIZONTAL,"data-test-id":"comms-properties-bar",groupTabIndex:_mail_ui_vars.TabIndices.COMMS_PROPERTIES_BAR,className:t.properties},e&&_react2.default.createElement(_settings_menu2.default,this.props),_react2.default.createElement(_comms_properties2.default,{onPropertyClick:this.onPropertyClick,verticalLayout:this.props.verticalLayout}),!e&&_react2.default.createElement(_settings_menu2.default,this.props))}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(CommsProperties,[_features2.default],getStateFromStores);
},{"../../apps/mail/actions":"./apps/mail/actions","../../apps/mail/controller_views/settings_menu":42,"../../atoms/keyboard_navigation_focus_group.jsx":"./atoms/keyboard_navigation_focus_group","../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../stores/features":"./stores/features","./atoms/comms_properties.jsx":133,"./styles/comms_properties":136,"fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],136:[function(require,module,exports){
module.exports={className:{default:{properties:"D_F en_0 gl_FM Y_6Fd5 U_6Fd5 N_6Fd5 X_6Fd5"},verticalLayout:{properties:"ek_BB gl_CI H_CS"}},_key:"1ovMGE"};
},{"./src/molecules/comms_properties/styles/atomic_comms_properties.css":"./molecules/comms_properties/styles/atomic_comms_properties"}],"./molecules/compose/actions":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getDynamicTimeout(e){var t=e.files;return t||t.length?SAVE_REQUEST_TIMEOUT_BASE+SAVE_REQUEST_TIMEOUT_PER_FILE*t.length:SAVE_REQUEST_TIMEOUT_BASE}function checkUserIsXobnified(e){e.autoSuggestClient.isUserXobnified().then(function(t){e.dispatch(_react_action_constants.mail.XOBNIFIED_RESPONDED,{isXobnified:t}),e.autoSuggestClient.search({limit:50,query:""},function(t,a){t||e.dispatch(_react_action_constants.mail.IMPORTANT_CONTACTS_PRELOADED,{contacts:a.contacts})})})}function clearSuggestions(e,t){var a=t.csid;e.dispatch(_react_action_constants.mail.CLEARED_SUGGESTIONS,{csid:a})}function fetchSuggestions(e,t){var a=Math.random();e.dispatch(_react_action_constants.mail.SEARCH_CONTACT_BEGAN,{token:a}),e.autoSuggestClient.search(t,function(s,n){s||e.dispatch(_react_action_constants.mail.SEARCH_CONTACT_SUCCEEDED,{query:t.query,csid:t.csid,token:a,data:n})})}function addRecipient(e,t){var a=t.csid;e.dispatch(_react_action_constants.mail.CONTACT_ADDED,{csid:a})}function deleteDraft(e,t){var a=t.csid,s=t.draftStatus,n=t.messageId,i=e.getStore(_pages2.default).getActivePageRoute(),o=(0,_list.getListIdFromRoute)(i);if(e.dispatch(_react_action_constants.mail.DELETE_DRAFT_REQUESTED,{csid:a,messageId:n,listId:o}),s!==DraftStatus.INIT&&s!==DraftStatus.SENT&&n){var c=e.getStore(_user_preferences2.default),r=c.getMailboxes()[0].id,_=[n];return e.mailAPIClient.request("messages.delete",{mailboxId:r,messageIds:_}).then(function(){e.dispatch(_react_action_constants.mail.DELETE_DRAFT_SUCCEEDED,{messageIds:_})}).catch(function(t){(0,_uncaught_browser_error_handler.handleUncaughtBrowserError)("LOG:MESSAGE_DELETE_FAILED","",0,0,t),e.dispatch(_react_action_constants.mail.DELETE_DRAFT_FAILED,{messageIds:_,error:t})})}}function updateDraftEditState(e,t){var a=t.csid;e.dispatch(_react_action_constants.mail.UPDATE_EDIT_DRAFT_STATE,{csid:a})}function updateDraftSubject(e,t){var a=t.csid,s=t.subject;e.dispatch(_react_action_constants.mail.DRAFT_SUBJECT_UPDATED,{csid:a,subject:s})}function showMoreMenu(e){e.dispatch(_react_action_constants.mail.RTE_MORE_MENU_SHOWN)}function handleToolbarActions(e){e.dispatch(_react_action_constants.mail.HANDLE_RTE_TOOLBAR_ACTIONS)}function _createSaveApiPayload(e){var t=e.userInputtedValues,a=e.composeData,s=e.mailboxId,n=a.csid,i=a.captchaAnswer,o=a.attachments,c=void 0===o?[]:o,r=a.files,_=a.folderId,d=a.composeMode,l=Object.keys(r).filter(function(e){var t=c.find(function(t){var a=t.contentId;return a===e});return t&&t.state!==_mail_constants.RecordStates.LOADED}).map(function(e){return r[e]}),E=c.filter(function(e){return!e.fromGifPicker&&!e.fromEmojiPicker}),u=t.to,m=t.cc,p=t.bcc,I=t.from,A=t.subject,S=t.html,f=[{name:I.sendingName||I.email,email:I.email}],g=I.replyToAddress?[{name:I.sendingName||I.replyToAddress,email:I.replyToAddress}]:[],T={csid:n,mailboxId:encodeURIComponent(s),subject:A,captchaAnswer:i,from:f,replyTo:g,to:u,cc:m,bcc:p,html:S,folderId:_,attachments:E,files:l};switch(d){case ComposeModes.REPLY:case ComposeModes.REPLY_ALL:case ComposeModes.FORWARD:T.newMessage=!1,T.inReplyTo={messageReference:{id:a.inReplyTo.id},replied:ComposeModes.FORWARD!==d,forwarded:ComposeModes.FORWARD===d};break;default:T.newMessage=!0}return T}function requestSaveDraft(e,t,a){var s=t.userInputtedValues,n=t.csid,i=t.mailboxId,o=a.pendingActionType,c=a.successActionType,r=a.failureActionType,_=e.getStore(_pages2.default).getActivePageRoute(),d=e.getStore(_mail2.default),l=d.getComposeData(n);if(l){var E=s.to,u=s.cc,m=s.bcc,p=!!_utils2.default.getInvalidEmails(E,u,m).length,I=_createSaveApiPayload({userInputtedValues:s,composeData:l,mailboxId:i});return e.dispatch(o,{csid:n,isPartial:p}),e.mailAPIClient.request("messages.save",I,{strategy:_mail_api_client2.default.STRATEGIES.BROWSER_TO_JEDI,timeout:getDynamicTimeout(I)},I.files).then(function(t){var a=t.message;e.dispatch(c,{csid:n,listId:getListIdForSavedMessages(_,a.folder.id),groupId:e.config.conversations?a.conversationId:a.id,isPartial:p,message:a,simpleBody:{html:s.html,htmlAnnotations:l.htmlAnnotations},previousGroupId:l.groupId})}).catch(function(t){(0,_uncaught_browser_error_handler.handleUncaughtBrowserError)("LOG:MESSAGE_SAVE_FAILED","",0,0,t),e.dispatch(r,{csid:n,error:t})})}}function saveDraft(e,t){return requestSaveDraft(e,t,{pendingActionType:_react_action_constants.mail.MESSAGE_SAVE_REQUESTED,successActionType:_react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGE_SAVE_FAILED})}function autoSaveDraft(e,t){return requestSaveDraft(e,t,{pendingActionType:_react_action_constants.mail.MESSAGE_AUTO_SAVE_REQUESTED,successActionType:_react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED,failureActionType:_react_action_constants.mail.MESSAGE_AUTO_SAVE_FAILED})}function _saveAndSend(e,t){var a=t.userInputtedValues,s=t.composeData,n=t.mailboxId,i=e.getStore(_pages2.default).getActivePageRoute(),o=e.getStore(_user_preferences2.default),c=e.getStore(_mail2.default),r=s.csid,_=s.accountId,d=a.to,l=a.cc,E=a.bcc,u=!!_utils2.default.getInvalidEmails(d,l,E).length,m=_createSaveApiPayload({userInputtedValues:a,composeData:s,mailboxId:n});return m.sentFolderId=c.getFolderIdForAccount(_mail_constants.FolderTypes.SENT,_),m.secure=o.getShowImageSetting(),e.dispatch(_react_action_constants.mail.MESSAGE_SAVE_REQUESTED,{csid:r,isPartial:u}),e.dispatch(_react_action_constants.mail.SEND,{csid:r}),e.mailAPIClient.request("messages.saveAndSend",m,{strategy:_mail_api_client2.default.STRATEGIES.BROWSER_TO_JEDI,timeout:getDynamicTimeout(m)},m.files).then(function(t){var a=t.message,n=t.simpleBody;e.dispatch(_react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED,{csid:r,listId:getListIdForSavedMessages(i,a.folder.id),groupId:e.config.conversations?a.conversationId:a.id,message:a,simpleBody:n,isPartial:!1}),"C"===a.spame?e.dispatch(_react_action_constants.mail.CAPTCHA_BEGAN,{csid:r}):e.dispatch(_react_action_constants.mail.SEND_SUCCESS,{csid:r,listId:getListIdForSavedMessages(i,a.folder.id),prevMessageId:s.lastSavedMessageId,messageId:a.id,currentRoute:e.getStore(_pages2.default).getActivePageRoute()})}).catch(function(t){(0,_uncaught_browser_error_handler.handleUncaughtBrowserError)("LOG:MESSAGE_SAVE_AND_SEND_FAILED","",0,0,t),e.dispatch(_react_action_constants.mail.SEND_FAILURE,{csid:r,error:t})})}function getListIdForSavedMessages(e,t){return e.name===_mail_constants.RouteNames.EDIT_DRAFT||e.name===_mail_constants.RouteNames.NEW_DRAFT?(0,_list.getListIdFromFolderId)(t):(0,_list.getListIdFromRoute)(e)}function _send(e,t){var a=t.composeData,s=t.mailboxId,n=t.captchaAnswer,i=e.getStore(_pages2.default).getActivePageRoute(),o=e.getStore(_mail2.default),c=a.spame,r=a.csid,_=a.lastSavedMessageId,d=a.folderId,l=a.accountId,E=o.getMessageById(_);return"C"!==c||n?(e.dispatch(_react_action_constants.mail.SEND,{csid:r}),e.mailAPIClient.request("messages.send",{csid:r,messageId:_,mailboxId:encodeURIComponent(s),folderId:d,sentFolderId:o.getFolderIdForAccount(_mail_constants.FolderTypes.SENT,l),captchaAnswer:n},{strategy:_mail_api_client2.default.STRATEGIES.BROWSER_TO_JEDI}).then(function(t){var a=t.message;e.dispatch(_react_action_constants.mail.SEND_SUCCESS,{csid:r,listId:getListIdForSavedMessages(i,E.folder.id),prevMessageId:_,messageId:a.id,currentRoute:e.getStore(_pages2.default).getActivePageRoute()})}).catch(function(t){(0,_uncaught_browser_error_handler.handleUncaughtBrowserError)("LOG:MESSAGE_SEND_FAILED","",0,0,t),e.dispatch(_react_action_constants.mail.SEND_FAILURE,{csid:r,error:t})})):e.dispatch(_react_action_constants.mail.CAPTCHA_BEGAN,{csid:r})}function send(e,t){var a=t.userInputtedValues,s=t.csid,n=t.mailboxId,i=t.captchaAnswer,o=t.forceSave,c=void 0!==o&&o,r=e.getStore(_mail2.default),_=r.getComposeData(s);if(_){var d=_.draftStatus,l=a.to,E=a.cc,u=a.bcc,m=_utils2.default.getInvalidEmails(l,E,u)||[];if(m.length)return e.dispatch(_react_action_constants.mail.COMPOSE_ADDRESSING_FAILED,{invalids:m});if(!(l&&l.length||E&&E.length||u&&u.length))return e.dispatch(_react_action_constants.mail.COMPOSE_NO_ADDRESS_DETECTED);if(l.length+E.length+u.length>MAX_RECIPIENT_LIMIT)return e.dispatch(_react_action_constants.mail.COMPOSE_RECIPIENT_LIMIT_EXCEEDED);var p=!c&&(d===_mail_constants.Draft.Status.SAVED||d===_mail_constants.Draft.Status.CAPTCHAING&&i)?_send:_saveAndSend;return p(e,{userInputtedValues:a,composeData:_,mailboxId:n,captchaAnswer:i})}}function close(e,t){var a=t.csid;e.dispatch(_react_action_constants.mail.COMPOSE_CLOSED,{csid:a})}function addInlineAttachment(e,t){var a=t.csid,s=t.files;e.dispatch(_react_action_constants.mail.INLINE_FILE_ATTACHMENT_ADDED,{csid:a,files:s})}function removeInlineAttachment(e,t){var a=t.csid,s=t.dataId,n=e.getStore(_mail2.default),i=n.getComposeData(a),o=i.attachments.find(function(e){return e.dataId===s});if(o&&o.disposition===Dispositions.INLINE){var c=o.contentId;e.dispatch(_react_action_constants.mail.INLINE_FILE_ATTACHMENT_REMOVED,{csid:a,contentId:c})}}function removeInlineImage(e,t){var a=t.csid,s=t.dataId;e.dispatch(_react_action_constants.mail.REMOVE_INLINE_IMAGE,{csid:a,dataId:s})}function moveInlineAttachmentToTray(e,t){var a=t.csid,s=t.dataId,n=t.isNewCompose,i=t.pid;e.dispatch(_react_action_constants.mail.INLINE_ATTACHMENT_MOVED_TO_TRAY,{csid:a,dataId:s,isNewCompose:n,pid:i})}function moveImageAttachmentInline(e,t){var a=t.csid,s=t.contentId;e.dispatch(_react_action_constants.mail.ATTACHMENT_MOVED_TO_INLINE,{csid:a,contentId:s})}function removeNonloadedAttachments(e,t){var a=t.csid;e.dispatch(_react_action_constants.mail.REMOVE_NON_LOADED_ATTACHMENTS,{csid:a})}function draftEdited(e){e.dispatch(_react_action_constants.mail.DRAFT_EDITED)}function subjectFocused(e,t){var a=t.csid;e.dispatch(_react_action_constants.mail.SUBJECT_FOCUSED,{csid:a})}function handleInlineImgFailure(e,t){e.dispatch(_react_action_constants.mail.INLINE_IMAGE_LOAD_FAILED,t)}function inlinedPermanentUrlImgAdded(e,t){var a=t.csid;e.dispatch(_react_action_constants.mail.INLINED_PERMANENT_URL_IMAGE_LOADED,{csid:a})}exports.__esModule=!0,exports.SAVE_REQUEST_TIMEOUT_PER_FILE=exports.SAVE_REQUEST_TIMEOUT_BASE=void 0,exports.checkUserIsXobnified=checkUserIsXobnified,exports.clearSuggestions=clearSuggestions,exports.fetchSuggestions=fetchSuggestions,exports.addRecipient=addRecipient,exports.deleteDraft=deleteDraft,exports.updateDraftEditState=updateDraftEditState,exports.updateDraftSubject=updateDraftSubject,exports.showMoreMenu=showMoreMenu,exports.handleToolbarActions=handleToolbarActions,exports._createSaveApiPayload=_createSaveApiPayload,exports.saveDraft=saveDraft,exports.autoSaveDraft=autoSaveDraft,exports.send=send,exports.close=close,exports.addInlineAttachment=addInlineAttachment,exports.removeInlineAttachment=removeInlineAttachment,exports.removeInlineImage=removeInlineImage,exports.moveInlineAttachmentToTray=moveInlineAttachmentToTray,exports.moveImageAttachmentInline=moveImageAttachmentInline,exports.removeNonloadedAttachments=removeNonloadedAttachments,exports.draftEdited=draftEdited,exports.subjectFocused=subjectFocused,exports.handleInlineImgFailure=handleInlineImgFailure,exports.inlinedPermanentUrlImgAdded=inlinedPermanentUrlImgAdded;var _react_action_constants=require("../../platform/react_action_constants"),_utils=require("./utils/utils"),_utils2=_interopRequireDefault(_utils),_user_preferences=require("../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_mail=require("../../stores/mail"),_mail2=_interopRequireDefault(_mail),_mail_constants=require("../../platform/mail_constants"),_mail_api_client=require("../../platform/mail_api_client"),_mail_api_client2=_interopRequireDefault(_mail_api_client),_pages=require("../../stores/pages"),_pages2=_interopRequireDefault(_pages),_list=require("../../platform/utils/list"),_uncaught_browser_error_handler=require("../../client/uncaught_browser_error_handler"),DraftStatus=_mail_constants.Draft.Status,ComposeModes=_mail_constants.Compose.Modes,Dispositions=_mail_constants.Attachments.Dispositions,SAVE_REQUEST_TIMEOUT_BASE=exports.SAVE_REQUEST_TIMEOUT_BASE=35e3,SAVE_REQUEST_TIMEOUT_PER_FILE=exports.SAVE_REQUEST_TIMEOUT_PER_FILE=6e4,MAX_RECIPIENT_LIMIT=100;
},{"../../client/uncaught_browser_error_handler":"./client/uncaught_browser_error_handler","../../platform/mail_api_client":"./platform/mail_api_client","../../platform/mail_constants":"./platform/mail_constants","../../platform/react_action_constants":"./platform/react_action_constants","../../platform/utils/list":"./platform/utils/list","../../stores/mail":"./stores/mail","../../stores/pages":"./stores/pages","../../stores/user_preferences":"./stores/user_preferences","./utils/utils":"./molecules/compose/utils/utils"}],137:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _react=require("react"),_react2=_interopRequireDefault(_react),_menu_button_container=require("../../../atoms/menu/menu_button_container.jsx"),_menu_button_container2=_interopRequireDefault(_menu_button_container),_menu_button=require("../../../atoms/menu/menu_button.jsx"),_menu_button2=_interopRequireDefault(_menu_button),_menu=require("../../../atoms/menu/menu.jsx"),_menu2=_interopRequireDefault(_menu),_account_select_item=require("./account_select_item.jsx"),_account_select_item2=_interopRequireDefault(_account_select_item),_types=require("../../../types"),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_account_select=require("../styles/account_select"),_account_select2=_interopRequireDefault(_account_select),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),NO_OP=function(){},AccountSelect=_react2.default.createClass({displayName:"AccountSelect",getDefaultProps:function(){return{onFocus:NO_OP,onBlur:NO_OP,onChange:NO_OP}},handleAccountChange:function(e){this.props.selected!==e&&this.props.onChange(e)},getMenuItems:function(){var e=this,t=this.props,n=t.sendingAccounts,u=t.selected,a=t.dir;return n.map(function(t){return _react2.default.createElement(_account_select_item2.default,{key:t.email,dir:a,account:t,selected:t===u,onClick:e.handleAccountChange.bind(e,t)})})},render:function(){var e=this.props,t=e.selected,n=e.sendingAccounts,u=(0,_css2.default)(_account_select2.default);if(!n.length)return null;var a="<"+t.email+">",c=_react2.default.createElement("div",{className:u.menuLabelEmail,"data-test-id":"compose-sending-address"},a);return 1===this.props.sendingAccounts.length?_react2.default.createElement("div",{tabIndex:0,"aria-label":this.props.selectLabel+" "+t.email,className:u.fromField,ref:"accountSelect"},_react2.default.createElement("span",null,t.sendingName,""),c):_react2.default.createElement("div",{className:u.select},_react2.default.createElement(_menu_button_container2.default,{onFocus:this.props.onFocus,onBlur:this.props.onBlur,className:u.menuContainer},_react2.default.createElement(_menu_button2.default,{"aria-label":this.props.selectLabel+" "+t.email,hasText:!0},_react2.default.createElement("span",{className:u.label},_react2.default.createElement("span",null,t.sendingName,""),c,_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.CHEVRON_UP,size:_fuji_icon3.Sizes.XXS,rotate:_fuji_icon3.Rotate.D180}))),_react2.default.createElement(_menu2.default,null,this.getMenuItems(u))))}});module.exports=AccountSelect;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/menu/menu.jsx":"./atoms/menu/menu","../../../atoms/menu/menu_button.jsx":"./atoms/menu/menu_button","../../../atoms/menu/menu_button_container.jsx":"./atoms/menu/menu_button_container","../../../types":"./types","../styles/account_select":149,"./account_select_item.jsx":138,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],138:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function AccountSelectItem(e){var t=e.account,a=e.selected,i=e.dir,s=e.onClick;return _react2.default.createElement(_list_item2.default,{dir:i,ariaLabel:t.email,kind:_list_item3.Kinds.ACCOUNT_PICKER,name:t.email},_react2.default.createElement(_button2.default,{kind:_button3.Kinds.MENUITEM,onClick:s,style:{backgroundColor:a?"#f9faff":""}},_react2.default.createElement("div",{className:classNames.buttonContent},_react2.default.createElement("span",{className:classNames.checkmarkWrapper},a&&_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.CHECKMARK,size:_fuji_icon3.Sizes.XS})),"rtl"!==i&&_react2.default.createElement("span",null,t.sendingName),_react2.default.createElement("span",{className:classNames.itemAddress},t.email),"rtl"===i&&_react2.default.createElement("span",null,t.sendingName))))}exports.__esModule=!0,exports.default=AccountSelectItem;var _react=require("react"),_react2=_interopRequireDefault(_react),_list_item=require("../../../atoms/list_item.jsx"),_list_item2=_interopRequireDefault(_list_item),_list_item3=require("../../../atoms/constants/list_item"),_types=require("../../../types"),_button=require("../../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_button3=require("../../../atoms/constants/button"),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_account_select_item=require("../styles/account_select_item"),_account_select_item2=_interopRequireDefault(_account_select_item),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),classNames=(0,_css2.default)(_account_select_item2.default);module.exports=exports.default;
},{"../../../atoms/button.jsx":"./atoms/button","../../../atoms/constants/button":"./atoms/constants/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/list_item":"./atoms/constants/list_item","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/list_item.jsx":"./atoms/list_item","../../../types":"./types","../styles/account_select_item":150,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],139:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _react=require("react"),_react2=_interopRequireDefault(_react),_debounce=require("lodash/debounce"),_debounce2=_interopRequireDefault(_debounce),_reactYPills=require("react-y-pills"),_auto_suggest_contact=require("../styles/auto_suggest_contact"),_auto_suggest_contact2=_interopRequireDefault(_auto_suggest_contact),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_xavatar=require("../../../atoms/xavatar.jsx"),_xavatar2=_interopRequireDefault(_xavatar),_pill=require("../../../atoms/pill.jsx"),_pill2=_interopRequireDefault(_pill),_reactIntl=require("react-intl"),_types=require("../../../types"),_pills=require("../../../atoms/utils/pills"),_email_pill=require("../../hover_card/email_pill.jsx"),_email_pill2=_interopRequireDefault(_email_pill),KEYCODE=require("../constants").KeyCodes,strings=(0,_reactIntl.defineMessages)({suggestions_available:{id:"compose.suggestions_available",defaultMessage:"{suggestionsNum, plural,\n                            =0 {No suggestions are available.}\n                            one {# suggestion is available.}\n                            other {# suggestions are available. Use up and down arrows to select.}\n                        }"},from_group:{id:"compose.from_group",defaultMessage:"{contactCount, plural,\n                            one {# contact}\n                            other {# contacts}\n                        }"}}),AutoSuggestContact=_react2.default.createClass({displayName:"AutoSuggestContact",contextTypes:{intl:_reactIntl.intlShape.isRequired},statics:{highlight:function(e,t){var a=t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase()),i=t,s="",n="";return a!==-1&&(i=t.substring(0,a),s=t.substring(a,a+e.length),n=t.substring(a+e.length,t.length)),{head:i,match:s,tail:n}},splitByDelimiters:function(e){return e.replace(/([^\s,;]+?@[^\s,;]+?\.[a-z]+[>\)]?)[\s,;]+([^\s,;])/gi,"$1,$2").split(/[;,]+/)},filterSuggestions:function(e,t){if(e.length&&t.length){var a=t.map(function(e){var t=e.email;return t});a.length&&(e=e.filter(function(e){return a.indexOf(e.email)===-1}))}return e}},getDefaultProps:function(){return{placeholder:"",tabIndex:-1,maxContactsVisible:6,debounceMilliseconds:180,selectedContacts:[],suggestedContacts:[],delimiters:[KEYCODE.FF_COMMA,KEYCODE.FF_SEMICOLON,KEYCODE.SEMICOLON,KEYCODE.COMMA,KEYCODE.BREAK,KEYCODE.TAB],shiftDelimiters:[KEYCODE.BREAK,KEYCODE.TAB],handleDrop:function(){},handleDragState:function(){},onPillSelection:function(){},selectedPills:[]}},getInitialState:function(){return{triggerSearchRequest:this.createSearchRequest(this.props.debounceMilliseconds),inputValue:""}},componentWillReceiveProps:function(e){e.debounceMilliseconds!==this.props.debounceMilliseconds&&this.setState({triggerSearchRequest:this.createSearchRequest(e.debounceMilliseconds)})},createSearchRequest:function(e){return(0,_debounce2.default)(this.triggerSearchRequest,e)},inputValueToContact:function(){var e=this.state.inputValue;e.trim()&&(this.props.onInputContactAdd(e),this.setState({inputValue:""}))},handleOnFocus:function(e){this.props.onFocus&&this.props.onFocus(e)},handleOnBlur:function(e){this.inputValueToContact(),this.props.onBlur&&this.props.onBlur(e)},handleInputKeyDown:function(e){var t=this.state.inputValue,a=this.props,i=a.shiftDelimiters,s=a.delimiters,n=e.ctrlKey,l=e.altKey,r=e.metaKey,o=e.shiftKey,u=e.which,c=e.keyCode,p=this._isDelimiterKey(u||c);n||l||r||t&&(o&&p(i)||!o&&p(s))&&(e.preventDefault(),this.inputValueToContact())},_isDelimiterKey:function(e){return function(t){return t.indexOf(e)!==-1}},handleInputChange:function(e){var t=this.constructor.splitByDelimiters(e);t.length>1&&t.splice(0,t.length-1).map(function(e){return e.trim()}).filter(Boolean).forEach(this.props.onInputContactAdd),this.setState({inputValue:t[0]}),this.state.triggerSearchRequest(t[0])},handleManualPillRemoval:function(e,t){t.preventDefault(),this.handlePillRemoval([e])},handleManualPillEdit:function(e){var t=e.email;e.name&&(t=e.name+" <"+e.email+">"),this.handlePillRemoval([e]),this.setState({inputValue:t})},handlePillRemoval:function(e){this.props.onContactRemove(e)},handleDropdownSelection:function(e){this.setState({inputValue:""}),this.props.onContactAdd(e)},triggerSearchRequest:function(){this.props.onSuggestionRequested&&this.props.onSuggestionRequested(this.state.inputValue)},focus:function(){this.refs.input.focus()},renderPill:function(e,t,a,i){var s=(0,_pills.preparePillContact)(e),n=s.name,l=s.email,r=s.title,o=s.hasEncryptionError;return _react2.default.createElement(_email_pill2.default,{email:l,isCompose:!0,isDragged:this.props.isDragged},_react2.default.createElement(_pill2.default,{value:n,title:r,contactId:e.id,contactEmail:l,hasEncryptionError:o,isLastElement:t===a.length-1,isSelected:i,onPillRemove:this.handleManualPillRemoval.bind(this,e),onPillEdit:this.handleManualPillEdit.bind(this,e),handleDrop:this.props.handleDrop,handleDragState:this.props.handleDragState,isDragged:this.props.isDragged&&i,inputField:this.props.id,isCompose:!0,selectedPills:this.props.selectedPills}))},renderHighlight:function(e,t){var a,i=this.state.inputValue,s=void 0===i?"":i,n=this.constructor.highlight(s,e);return n.match&&(a=_react2.default.createElement("span",{className:t,"data-test-id":"result-match"},n.match)),_react2.default.createElement("span",null,n.head,a,n.tail)},render:function(){var e=this,t=this.context.intl.formatMessage,a=this.props.suggestedContacts,i=this.props.selectedContacts,s=this.props.maxContactsVisible,n=AutoSuggestContact.filterSuggestions(a,i).slice(0,s),l=(0,_css2.default)(_auto_suggest_contact2.default,{showCcBcc:this.props.showCcBcc});return _react2.default.createElement(_reactYPills.Pills,{ref:"input",id:this.props.id,inputId:this.props.inputId,autoBidi:this.props.autoBidi,tabIndex:this.props.tabIndex,selected:i,renderPill:this.renderPill,placeholder:0===i.length?this.props.placeholder:"",inputValue:this.state.inputValue,onInputKeyDown:this.handleInputKeyDown,onInputChange:this.handleInputChange,onBlur:this.handleOnBlur,onFocus:this.handleOnFocus,onRemove:this.handlePillRemoval,onSelect:this.handleDropdownSelection,notifyPillSelection:this.props.onPillSelection,messageForIncomingOptions:t(strings.suggestions_available,{suggestionsNum:n.length}),className:l.pills,getMessageForOption:this.props.getMessageForOption,containerClassName:l.pillsContainer,containerChildClassName:l.pillsContainerChild,pillClassName:l.pillOuter,noInitialSelection:!0,dropdownVisibleByDefault:!0,typeaheadInputContainerClassName:l.typeahead,typeaheadInputClassName:"input-"+this.props.id+" "+l.typeaheadInput,typeaheadInputHintClassName:l.typeaheadInputHint,typeaheadAriaStatusClassName:l.typeaheadAriaStatus,typeaheadDropDownClassName:l.typeaheadDropDown},n.map(function(a,i){return _react2.default.createElement(_reactYPills.Option,{className:l.typeaheadOption,key:i,value:a},_react2.default.createElement("div",{className:l.typeaheadOptionContainer},_react2.default.createElement("span",{className:l.contactIcon},_react2.default.createElement(_xavatar2.default,{contact:{id:a.id},size:_xavatar.Sizes.M})),_react2.default.createElement("div",{className:l.textContainer},_react2.default.createElement("div",{className:l.name,"data-test-id":"result-name"},e.renderHighlight(a.name,l.highlight)),_react2.default.createElement("div",{className:l.email,"data-test-id":"result-email"},a.list?t(strings.from_group,{contactCount:a.list.length}):e.renderHighlight(a.email,l.highlight)))))}))}});module.exports=AutoSuggestContact;
},{"../../../atoms/pill.jsx":"./atoms/pill","../../../atoms/utils/pills":102,"../../../atoms/xavatar.jsx":"./atoms/xavatar","../../../types":"./types","../../hover_card/email_pill.jsx":181,"../constants":"./molecules/compose/constants","../styles/auto_suggest_contact":151,"lodash/debounce":"./node_modules/lodash/debounce.js","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js","react-y-pills":"./node_modules/react-y-pills/build/src/index.js"}],140:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_unescape=require("lodash/unescape"),_unescape2=_interopRequireDefault(_unescape),_invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),CaptchaComponent=_react2.default.createClass({displayName:"CaptchaComponent",contextTypes:{cspToken:_react2.default.PropTypes.string},handleEvent:function(e){switch(e.type){case"message":this.handlePostMessage(e);break;case"load":this.handleCaptchaLoaded(e)}},handlePostMessage:function(e){var t=this._callbacks[e.data.type];t&&t.length&&t.forEach(function(t){t(e.data.payload)})},handleCaptchaLoaded:function(){var e=_reactDom2.default.findDOMNode(this);window.addEventListener("message",this,!1),e.contentWindow.postMessage("register",window.location.href)},on:function(e,t){this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t)},off:function(e,t){(0,_invariant2.default)(Array.isArray(this._callbacks[e]),"Invalid eventName. Perhaps you should call on before off");var n=this._callbacks[e].indexOf(t);n>-1&&this._callbacks[e].splice(n,1)},wrapContent:function(e,t){var n=this.context.cspToken;return t=t.replace("<script ",'<script nonce="'+n+'" '),'<html>\n                 <head>\n                     <script nonce="'+n+'">\n                        function listener(event) {\n                            if (event.data !== "register") { return; }\n                            YAHOO.CAPTCHA.hook.complete = function(answer) {\n                                event.source.postMessage({\n                                    type: "complete",\n                                    payload: answer\n                                }, event.origin);\n                            }\n                            YAHOO.CAPTCHA.hook();\n                        };\n                        window.addEventListener("message", listener);\n                        '+e+"\n                     </script>\n                 </head>\n                 <body>\n                    "+t+"\n                 </body>\n             </html>\n        "},componentDidMount:function(){this._callbacks=Object.create(null),_reactDom2.default.findDOMNode(this).addEventListener("load",this,!1),this.on("complete",this.props.onComplete)},componentWillUnmount:function(){this.off("complete",this.props.onComplete),window.removeEventListener("message",this,!1),_reactDom2.default.findDOMNode(this).removeEventListener("load",this,!1)},sanitize:function(e){return e?(0,_unescape2.default)(e).replace(/http:\/\/l.yimg.com\//g,"https://s.yimg.com/"):""},render:function(){var e=this.wrapContent(this.sanitize(this.props.script),this.sanitize(this.props.markup));return _react2.default.createElement("iframe",{srcDoc:e,style:{display:"none"}})}});exports.default=CaptchaComponent,module.exports=exports.default;
},{"../../../platform/invariant":"./platform/invariant","lodash/unescape":"./node_modules/lodash/unescape.js","react":"./node_modules/react/react.js","react-dom":"./node_modules/react-dom/index.js"}],"./molecules/compose/atoms/color_picker":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _isColorDark(e){(0,_invariant2.default)(6===e.length,"Expect input to be 6 digit hex color");var t=parseInt(e.slice(0,2),16)/255,a=parseInt(e.slice(2,4),16)/255,l=parseInt(e.slice(4,6),16)/255,o=Math.max(t,a,l),r=Math.min(t,a,l),n=(o+r)/2;return n<.55}function ColorElement(e){var t=e.color,a=e.selected,l=e.name,o=e.isDark,r=e.onClick,n={backgroundColor:t,boxShadow:"#ffffff"===t?"inset 0 0 0 1px #e2e2e6":null};return _react2.default.createElement(_list_item2.default,{name:l,kind:_list_item3.Kinds.GRID},_react2.default.createElement("div",{className:classNames.colorElement},_react2.default.createElement(_button2.default,{title:t,className:classNames.color,style:n,onClick:r},a&&_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.CHECKMARK,size:_fuji_icon3.Sizes.XXS,colorState:o?_fuji_icon3.ColorStates.INVERTED:_fuji_icon3.ColorStates.NORMAL}))))}exports.__esModule=!0,exports._isColorDark=_isColorDark,exports.ColorElement=ColorElement;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_menu=require("../../../atoms/menu/menu.jsx"),_menu2=_interopRequireDefault(_menu),_menu_button=require("../../../atoms/menu/menu_button.jsx"),_menu_button2=_interopRequireDefault(_menu_button),_menu_button_container=require("../../../atoms/menu/menu_button_container.jsx"),_menu_button_container2=_interopRequireDefault(_menu_button_container),_utils=require("../utils/utils"),_utils2=_interopRequireDefault(_utils),_color_picker=require("../styles/color_picker"),_color_picker2=_interopRequireDefault(_color_picker),_expanded_more_tools=require("../styles/expanded_more_tools"),_expanded_more_tools2=_interopRequireDefault(_expanded_more_tools),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_button=require("../../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_navigable_list=require("../../../atoms/navigable_list.jsx"),_navigable_list2=_interopRequireDefault(_navigable_list),_list_item=require("../../../atoms/list_item.jsx"),_list_item2=_interopRequireDefault(_list_item),_list_item3=require("../../../atoms/constants/list_item"),_list=require("../../../atoms/constants/list"),classNames=(0,_css2.default)(_color_picker2.default),buttonClassNames=(0,_css2.default)(_expanded_more_tools2.default),SWATCH_COLORS=["000000","808080","ffffff","9d1811","cd232c","d36a53","a46016","dd902f","e4ac64","ac9e19","fdef2b","fdf869","5b8828","8fca40","add773","4c76a2","70aced","7dbef1","440062","652191","845aa7","9c005c","cb008e","d264aa"],strings=(0,_reactIntl.defineMessages)({foreground_color_text_label:{id:"compose.foreground_color_text_label",defaultMessage:"Text color"},background_color_text_label:{id:"compose.background_color_text_label",defaultMessage:"Highlight color"},back_button_text_label:{id:"compose.back_button_text_label",defaultMessage:"Back"}}),ColorPicker=_react2.default.createClass({displayName:"ColorPicker",contextTypes:{intl:_reactIntl.intlShape.isRequired},statics:{DEFAULTS:{FG_COLOR:"#000000",BG_COLOR:"#ffffff"}},getDefaultProps:function(){return{swatchColors:SWATCH_COLORS,parentMenu:null}},handleBackButton:function(e){e.stopPropagation(),this.props.goToMainMenu()},onColorChange:function(e,t){e(t)},render:function(){var e=this,t=this.context.intl.formatMessage(strings.foreground_color_text_label),a=this.props,l=a.onFGColorChange,o=a.onBGColorChange,r=a.swatchColors,n=a.selectedFGColor,i=a.selectedBGColor,s=this.context.intl.formatMessage(strings.background_color_text_label),_=_utils2.default.getSixDigitHexColor(n),c=_utils2.default.getSixDigitHexColor(i),u=r.map(function(t){var a="#"+t;return _react2.default.createElement(ColorElement,{key:"fc-"+t,name:"fc-"+t,color:a,selected:_===a,onClick:e.onColorChange.bind(e,l,a),isDark:_isColorDark(t)})}),d=r.map(function(t){var a="#"+t;return _react2.default.createElement(ColorElement,{key:"bc-"+t,name:"bc-"+t,color:a,selected:c===a,onClick:e.onColorChange.bind(e,o,a),isDark:_isColorDark(t)})});return _react2.default.createElement("div",null,_react2.default.createElement(_menu_button_container2.default,{afterMenuHide:this.props.focusBackEditor,showMenuActiveState:!0,parentMenu:this.props.parentMenu},this.props.parentMenu?_react2.default.createElement(_menu_button2.default,{style:{display:"none"}}):_react2.default.createElement(_menu_button2.default,{"data-test-id":"icon-btn-text_color",title:t,"aria-label":t},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.TEXT_COLOR,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.NORMAL})),_react2.default.createElement(_menu2.default,{onHide:this.handleMenuHide,style:this.props.parentMenu?{padding:"10px",marginLeft:"6px"}:{padding:"10px"},menuLayout:_list.Layout.VERTICAL},this.props.parentMenu?_react2.default.createElement("span",{className:buttonClassNames.colorMenuBackButton,onClick:this.handleBackButton,"data-test-id":"icon-btn-text_color_back"},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.ARROW_UP,size:_fuji_icon3.Sizes.XS,rotate:_fuji_icon3.Rotate.D270,colorState:_fuji_icon3.ColorStates.SECOND_LEVEL_GRAY}),_react2.default.createElement("span",{className:buttonClassNames.backButtonLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.back_button_text_label))):"",_react2.default.createElement(_navigable_list2.default,{layout:_list.Layout.HORIZONTAL},_react2.default.createElement("li",{className:classNames.swatchItem},_react2.default.createElement("div",{className:classNames.swatchTitleBase},_react2.default.createElement(_reactIntl.FormattedMessage,strings.foreground_color_text_label)),_react2.default.createElement("div",{className:classNames.swatchContent},_react2.default.createElement(_navigable_list2.default,{layout:_list.Layout.GRID},u))),_react2.default.createElement("li",{className:classNames.swatchItem},_react2.default.createElement("div",{className:classNames.swatchTitleBase},_react2.default.createElement(_reactIntl.FormattedMessage,strings.background_color_text_label)),_react2.default.createElement("div",{className:classNames.swatchContent},_react2.default.createElement(_navigable_list2.default,{layout:_list.Layout.GRID,title:s},d)))))))}});exports.default=ColorPicker;
},{"../../../atoms/button.jsx":"./atoms/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/list":"./atoms/constants/list","../../../atoms/constants/list_item":"./atoms/constants/list_item","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/list_item.jsx":"./atoms/list_item","../../../atoms/menu/menu.jsx":"./atoms/menu/menu","../../../atoms/menu/menu_button.jsx":"./atoms/menu/menu_button","../../../atoms/menu/menu_button_container.jsx":"./atoms/menu/menu_button_container","../../../atoms/navigable_list.jsx":"./atoms/navigable_list","../../../platform/invariant":"./platform/invariant","../styles/color_picker":"./molecules/compose/styles/color_picker","../styles/expanded_more_tools":"./molecules/compose/styles/expanded_more_tools","../utils/utils":"./molecules/compose/utils/utils","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],141:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_dragdrop_overlay=require("../styles/dragdrop_overlay"),_dragdrop_overlay2=_interopRequireDefault(_dragdrop_overlay),_reactIntl=require("react-intl"),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),classNames=(0,_css2.default)(_dragdrop_overlay2.default),FILES_TYPE="Files",DragDropOverlay=_react2.default.createClass({displayName:"DragDropOverlay",getInitialState:function(){return{dragOverlayVisible:!1}},handleDragOver:function(e){Array.prototype.slice.call(e.dataTransfer.types).some(function(e){return e===FILES_TYPE})&&(this.state.dragOverlayVisible||this.setState({dragOverlayVisible:!0}),e.preventDefault(),e.stopPropagation())},handleDragLeave:function(e){e.preventDefault(),e.stopPropagation(),this.state.dragOverlayVisible&&this.setState({dragOverlayVisible:!1})},handleDrop:function(e){var a=this;e.preventDefault(),e.stopPropagation();var r=e.dataTransfer.files;this.setState({dragOverlayVisible:!1},function(){return a.props.onDrop(Array.prototype.slice.call(r))})},render:function(){return _react2.default.createElement("div",{onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop,className:classNames.attachmentDragContainer},this.props.children,this.state.dragOverlayVisible?_react2.default.createElement("div",{className:classNames.dragOverlay},_react2.default.createElement("div",{className:classNames.dragDescriptionContainer},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.ATTACH_GENERIC_48,colorState:_fuji_icon3.ColorStates.ATTACH_GENERIC,size:_fuji_icon3.Sizes.M}),_react2.default.createElement("div",{className:classNames.dragTextDescription},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.rte_dragdrop_overlay",defaultMessage:"Drag and drop files here"})))):null)}});exports.default=DragDropOverlay,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../styles/dragdrop_overlay":153,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/compose/atoms/editor":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_ymailEditor=require("ymail-editor"),_ymailEditor2=_interopRequireDefault(_ymailEditor),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_editor=require("../styles/editor"),_editor2=_interopRequireDefault(_editor),_reactIntl=require("react-intl"),_types=require("../../../types"),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_utils=require("../utils/utils"),_utils2=_interopRequireDefault(_utils),_mail_constants=require("../../../platform/mail_constants"),_constants=require("../constants"),_invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_message_quote_finder=require("../../../platform/utils/message_quote_finder"),_object=require("../../../platform/utils/object"),_lazy_component=require("../../../atoms/lazy_component"),_hyperlink_plugin=require("../plugins/hyperlink_plugin"),_hyperlink_plugin2=_interopRequireDefault(_hyperlink_plugin),Dispositions=_mail_constants.Attachments.Dispositions,ContentEditableTextAlignment={LEFT:"left",CENTER:"center",RIGHT:"right"},strings=(0,_reactIntl.defineMessages)({inlineImageAltText:{id:"compose.inline_image",defaultMessage:"Inline image"}}),NOOP=function(){},Editor=_react2.default.createClass({displayName:"Editor",contextTypes:{config:_react.PropTypes.object,intl:_reactIntl.intlShape.isRequired,linkEnhancerClient:_types.LinkEnhancerClientType},getInitialState:function(){return{rtePlaceholderVisible:!0,hiddenQuotedText:"",imgFromGifPicker:!0,showSendAsAttachmentBtn:!0,showRemoveOnly:!1,isErrorState:!1,imageSize:_constants.CURRENT_IMAGE_SIZE_STATUS.SMALL}},getDefaultProps:function(){return{kind:_constants.EditorTypes.COMPOSE,onStationeryThemeChange:NOOP,onStationeryDefaultThemeChange:NOOP,autoExpandQuotedText:!1,contentEditable:!0}},componentDidMount:function(){this.editorSetup(this.props),this.props.autoExpandQuotedText&&setTimeout(this.expandQuote)},componentWillReceiveProps:function(e){if(e.csid!==this.props.csid&&this.editorSetup(e),this._inlineImagePlugin){this._inlineImagePlugin.setScrollableArea(e.scrollableAreaRef);var t=e.attachments.filter(function(e){var t=e.disposition;return t===Dispositions.INLINE});if(t.length>0){this._inlineImagePlugin.update(t);var n=t.filter(function(e){var t=e.fromEmojiPicker,n=e.state;return t&&n===_mail_constants.RecordStates.LOADING}),i=t.filter(function(e){var t=e.hasPermanentUrl,n=e.state;return t&&n===_mail_constants.RecordStates.LOADING});i.length&&this.props.inlinedPermanentUrlImgAdded(),n.length&&this.props.inlinedEmojiAdded()}}this._linkEnhancerPlugin&&this._linkEnhancerPlugin.setScrollableArea(e.scrollableAreaRef)},shouldComponentUpdate:function(e,t){var n=this.props,i=this.state;return e.csid!==n.csid||e.content!==n.content||t.hiddenQuotedText!==i.hiddenQuotedText||t.rtePlaceholderVisible!==i.rtePlaceholderVisible||t.imgFromGifPicker!==i.imgFromGifPicker||t.showSendAsAttachmentBtn!==i.showSendAsAttachmentBtn||t.imageSize!==i.imageSize||t.showRemoveOnly!==i.showRemoveOnly||t.isErrorState!==i.isErrorState||e.stationeryTheme!==n.stationeryTheme||e.contentEditable!==n.contentEditable},editorSetup:function(e){var t=this,n=this.refs.rte,i=e.content,o=e.htmlAnnotations,a=e.linkEnhancer,r=this.context.config.inlineAttachment;if(!this.rte){var s;this.rte=new _ymailEditor2.default({element:n,isRich:!0,shouldTabIndent:!0}),this.rte.addPlugin({contentChanged:this.onContentChange}),this.rte.addPlugin({commands:{add_attachment:{action:function(){e.onAttachmentShortcut(e.csid)}}},keydownCommands:(s={},s[_constants.RTEKeyModifier.SPECIAL|_constants.RTEKeyModifier.SHIFT]={85:"add_attachment"},s[_constants.RTEKeyModifier.SPECIAL]={75:"createlink"},s)}),this._lazyLoadedPlugins&&this._initializeLazyLoadedPlugins(this._lazyLoadedPlugins,e)}if((r||a)&&(this.rte._mutationObserver=new MutationObserver(function(e){[].forEach.call(e,function(e){var n=e.removedNodes,i=[].filter.call(n,function(e){return!t.rte.element.contains(e)});0!==i.length&&(1===i.length&&"SPAN"===i[0].tagName&&8203===i[0].textContent.charCodeAt(0)||(t._inlineImagePlugin&&t._inlineImagePlugin.onDOMNodesRemoved(i),t._linkEnhancerPlugin&&t._linkEnhancerPlugin.onDOMNodesRemoved(i)))})}),this.rte._mutationObserver.observe(this.rte.element,{childList:!0,subtree:!0})),i){var l=(0,_message_quote_finder.separateQuote)(i,o),d=l.quote,u=l.nonQuote;this.setState({rtePlaceholderVisible:!1,hiddenQuotedText:d}),this.rte.setHTML(u,{skipContentChanged:!0}),this._inlineImagePlugin&&this._inlineImagePlugin.contentChanged("sethtml"),this._linkEnhancerPlugin&&this._linkEnhancerPlugin.contentChanged("sethtml")}e.initialFocus&&this.rte.focus(),this._stationeryPlugin&&this._stationeryPlugin.checkAndSetDraft()},handleSendAsAttachment:function(){var e=this.getHoverImageDataId();if(e)this.props.onSendAsAttachment(!0,e,null);else{var t=this.getHoverImagePid();this.props.onSendAsAttachment(!1,null,t)}setTimeout(this.removeHoverImage,0)},removeHoverImage:function(){this._inlineImagePlugin.removeHoverImage()},removeNonloadedAttachments:function(){this._inlineImagePlugin.removeNonloadedAttachments()},resizeHoverImage:function(e){this._inlineImagePlugin.resizeHoverImage(e)},getHoverImageDataId:function(){return this._inlineImagePlugin.getHoverImageDataId()},getHoverImagePid:function(){return this._inlineImagePlugin.getHoverImagePid()},fixOverlayPosition:function(){this._inlineImagePlugin.fixOverlayPosition()},_resizeLinkEnhancerCard:function(e){this._linkEnhancerPlugin.handleResizeCard({newSize:e})},_removeLinkEnhancerCard:function(){this._linkEnhancerPlugin.handleRemoveCard()},positionOverlayOverCard:function(){this._linkEnhancerPlugin.positionOverlayOverCard()},getOffsetFromEditorContainer:function(e){for(var t={offsetTop:0,offsetLeft:0};e&&e!==this.refs.editorContainer&&e!==document.body;)t.offsetTop+=e.offsetTop,t.offsetLeft+=e.offsetLeft,e=e.offsetParent;return t},componentWillUnmount:function(){this.rte&&this.rte._mutationObserver&&this.rte._mutationObserver.disconnect()},onContentChange:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.onContentChangeTimeout&&(clearTimeout(this.onContentChangeTimeout),this.onContentChangeTimeout=null);var i=void 0,o=void 0,a=void 0,r=void 0,s=void 0,l=void 0,d=void 0,u=void 0,h=void 0;try{i=document.queryCommandState("bold"),o=document.queryCommandState("italic"),a=document.queryCommandState("underline"),r=document.queryCommandValue("fontName"),s=document.queryCommandValue("foreColor"),l=document.queryCommandValue("backColor"),d=""+document.queryCommandValue("fontSize"),u=document.queryCommandState("justifycenter"),h=document.queryCommandState("justifyright")}catch(i){(0,_invariant2.default)(n<10,i.toString()),this.onContentChangeTimeout=setTimeout(function(){t.onContentChange(e,n+1)},100*n+10)}var c=this.rte.isRich,m=ContentEditableTextAlignment.LEFT,g={rtePlaceholderVisible:!1};u?m=ContentEditableTextAlignment.CENTER:h&&(m=ContentEditableTextAlignment.RIGHT),(0,_invariant2.default)(this.rte.element,"RTE should be available at this point"),this.props.onContentChange({format:{bold:i,italic:o,underline:a,fontFamily:r,fontSize:d,foreColor:s,backgroundColor:l,justification:m,richTextMode:c},content:this.getRawMessageContent(),caret:this.rte.getCaretCoordinates(),type:e&&e.type}),this.setState(g)},getInnerHtml:function(){return this.rte.getRawHTML()},getRawMessageContent:function(){return this.rte.getRawHTML()+this.state.hiddenQuotedText},getSanitizedContent:function(){return this.rte.getContent()+this.state.hiddenQuotedText},handleMouseDown:function(){this.state.rtePlaceholderVisible&&this.setState({rtePlaceholderVisible:!1})},handleKeyDown:function(e){this.state.hiddenQuotedText&&e.metaKey&&65===e.which&&this.expandQuote(),this.props.onKeyDown&&this.props.onKeyDown(e)},handleQuoteExpand:function(e){e.preventDefault(),e.stopPropagation(),this.expandQuote()},expandQuote:function(){this.rte.setHTML(this.state.hiddenQuotedText,{isAppend:!0,skipContentChanged:!0}),this.setState({hiddenQuotedText:""}),this._stationeryPlugin&&this._stationeryPlugin.checkAndSetDraft()},updateImgHoverOverlayProps:function(e){this.setState(_extends({imgFromGifPicker:!1,showSendAsAttachmentBtn:!1,showRemoveOnly:!1,isErrorState:!1,imageSize:_constants.CURRENT_IMAGE_SIZE_STATUS.SMALL},e))},handlePluginsLoaded:function(e){this._lazyLoadedPlugins=e,this.rte&&this._initializeLazyLoadedPlugins(this._lazyLoadedPlugins)},_initializeLazyLoadedPlugins:function(e,t){var n=e.InlineImagePlugin,i=e.StationeryPlugin,o=e.LinkEnhancerPlugin;if(this.props.linkEnhancer&&!this._linkEnhancerPlugin&&(this._linkEnhancerPlugin=new o({rte:this.rte,overlay:(0,_reactDom.findDOMNode)(this.refs.linkEnhancerOverlay),apiClient:this.context.linkEnhancerClient,getOffsetFromEditorContainer:this.getOffsetFromEditorContainer,blacklist:this.context.config.linkEnhancerUrlBlacklist,scrollableArea:this.props.scrollableAreaRef}),this.rte.addPlugin(this._linkEnhancerPlugin)),this.context.config.stationery&&!this._stationeryPlugin){var a=t||this.props,r=a.htmlAnnotations,s=void 0===r?[]:r,l=this.props,d=l.onStationeryThemeChange,u=l.onStationeryDefaultThemeChange;this._stationeryPlugin=new i({rte:this.rte,htmlAnnotations:s,onThemeChange:d,onDefaultThemeChange:u,context:this.context}),this.rte.addPlugin(this._stationeryPlugin),this._stationeryPlugin.checkAndSetDraft()}this.context.config.inlineAttachment&&!this._inlineImagePlugin&&(this._inlineImagePlugin=new n({rte:this.rte,altText:this.context.intl.formatMessage(strings.inlineImageAltText),attachments:this.props.attachments.filter(function(e){var t=e.disposition;return t===Dispositions.INLINE}),onImageRemove:this.props.onImageRemove,onImagePaste:this.props.onImagePaste,updateImgHoverOverlayProps:this.updateImgHoverOverlayProps,handleInlineImgFailure:this.props.handleInlineImgFailure,getOffsetFromEditorContainer:this.getOffsetFromEditorContainer,_overlay:(0,_reactDom.findDOMNode)(this.refs.imageOverlay)}),this.rte.addPlugin(this._inlineImagePlugin))},_notifyPlugins:function(){this.context.config.inlineAttachment&&this._inlineImagePlugin&&(this._inlineImagePlugin.setOverylayNode((0,_reactDom.findDOMNode)(this.refs.imageOverlay)),this._inlineImagePlugin.contentChanged("sethtml")),this.context.config.linkEnhancer&&this._linkEnhancerPlugin&&(this._linkEnhancerPlugin.setOverylayNode((0,_reactDom.findDOMNode)(this.refs.linkEnhancerOverlay)),this._inlineImagePlugin.contentChanged("sethtml"))},render:function(){var e=this.props,t=e.ariaLabel,n=e.kind,i=e.contentEditable,o=(0,_css2.default)(_editor2.default,{kind:n}),a=this.state,r=a.hiddenQuotedText,s=a.imgFromGifPicker,l=a.showSendAsAttachmentBtn,d=a.showRemoveOnly,u=a.isErrorState,h=a.imageSize,c={fontFamily:this.props.composeFontFamily,fontSize:_utils2.default.getFontSizeStyle(this.props.composeFontSize)};return _react2.default.createElement("div",{tabIndex:-1,onBlur:this.props.onBlur,"data-test-id":"editorWrapper",className:o.editorWrapper},_react2.default.createElement("div",{className:o.placeholder,"data-test-id":"rte_placeholder"},this.state.rtePlaceholderVisible?_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.rte_placeholder",defaultMessage:"Write something..."}):null),_react2.default.createElement(_hyperlink_plugin2.default,{editor:this.rte},_react2.default.createElement(_lazy_component.LazyComponent,{import:"./editor_plugin_loader.jsx",onLoad:this.handlePluginsLoaded,_moduleGetter:function(){return require("./editor_plugin_loader.jsx")}}),_react2.default.createElement("div",{className:o.editorContainer,id:"editor-container",ref:"editorContainer"},_react2.default.createElement("div",{"data-test-id":"rte",role:"textbox",spellCheck:!0,autoCorrect:!1,"aria-multiline":!0,contentEditable:i,"aria-label":t,className:"rte "+o.rte,ref:"rte",style:c,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onFocus:this.props.onFocus}),this.context.config.inlineAttachment?_react2.default.createElement(_lazy_component.LazyComponent,{import:"./img_hover_overlay.jsx",ref:"imageOverlay",onload:this._notifyPlugins,overlayType:_constants.RTEHoverOverlayTypes.IMAGE,onHoverImageRemove:this.removeHoverImage,onImageResize:this.resizeHoverImage,onSendAsAttachment:this.handleSendAsAttachment,fixOverlayPosition:this.fixOverlayPosition,imgFromGifPicker:s,showSendAsAttachmentBtn:l,showRemoveOnly:d,isErrorState:u,imageSize:h,_moduleGetter:function(){return require("./img_hover_overlay.jsx")}}):null,this.props.linkEnhancer?_react2.default.createElement(_lazy_component.LazyComponent,{import:"./img_hover_overlay.jsx",onload:this._notifyPlugins,ref:"linkEnhancerOverlay",overlayType:_constants.RTEHoverOverlayTypes.LINK_ENHANCER_CARD,onCardResize:this._resizeLinkEnhancerCard,onCardRemove:this._removeLinkEnhancerCard,fixOverlayPosition:this.positionOverlayOverCard,_moduleGetter:function(){return require("./img_hover_overlay.jsx")}}):null)),r?_react2.default.createElement("div",null,_react2.default.createElement("button",{"data-test-id":"compose-show-quoted-text",onClick:this.handleQuoteExpand,className:o.button},_react2.default.createElement("span",{className:o.buttonInner},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.CHEVRON_UP,size:_fuji_icon3.Sizes.XXS,rotate:_fuji_icon3.Rotate.D90,colorState:_fuji_icon3.ColorStates.DISABLED}),_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.show_quote",defaultMessage:"Show Original Message"})))):null)}});exports.default=Editor,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/lazy_component":"./atoms/lazy_component","../../../platform/invariant":"./platform/invariant","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/message_quote_finder":"./platform/utils/message_quote_finder","../../../platform/utils/object":"./platform/utils/object","../../../types":"./types","../constants":"./molecules/compose/constants","../plugins/hyperlink_plugin":"./molecules/compose/plugins/hyperlink_plugin","../styles/editor":"./molecules/compose/styles/editor","../utils/utils":"./molecules/compose/utils/utils","./editor_plugin_loader.jsx":"./molecules/compose/atoms/editor_plugin_loader","./img_hover_overlay.jsx":"./molecules/compose/atoms/img_hover_overlay","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-dom":"./node_modules/react-dom/index.js","react-intl":"./node_modules/react-intl/lib/index.js","ymail-editor":"./node_modules/ymail-editor/index.js"}],"./molecules/compose/atoms/expanded_more_tools":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_list_item=require("../../../atoms/list_item.jsx"),_list_item2=_interopRequireDefault(_list_item),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_menu_button_container=require("../../../atoms/menu/menu_button_container.jsx"),_menu_button_container2=_interopRequireDefault(_menu_button_container),_menu_button=require("../../../atoms/menu/menu_button.jsx"),_menu_button2=_interopRequireDefault(_menu_button),_menu=require("../../../atoms/menu/menu.jsx"),_menu2=_interopRequireDefault(_menu),_font_name_size=require("./font_name_size.jsx"),_font_name_size2=_interopRequireDefault(_font_name_size),_color_picker=require("./color_picker.jsx"),_color_picker2=_interopRequireDefault(_color_picker),_list=require("../../../atoms/constants/list"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_expanded_more_tools=require("../styles/expanded_more_tools"),_expanded_more_tools2=_interopRequireDefault(_expanded_more_tools),_reactIntl=require("react-intl"),strings=(0,_reactIntl.defineMessages)({plaintext_icon_label:{id:"compose.plaintext_icon_label",defaultMessage:"Switch to plain text mode"},plaintext:{id:"compose.plaintext",defaultMessage:"Switch to plain text mode"},plaintext_text_label:{id:"compose.plaintext_text_label",defaultMessage:"Plain Text"},leftAlign:{id:"compose.left_align_icon",defaultMessage:"Left align"},rightAlign:{id:"compose.right_align_icon",defaultMessage:"Right align"},centerAlign:{id:"compose.center_align_icon",defaultMessage:"Center align"},bulletedList:{id:"compose.bulleted_list_icon",defaultMessage:"Bulleted List"},numberedList:{id:"compose.numbered_list_icon",defaultMessage:"Numbered list"},increaseIndent:{id:"compose.increase_indent_icon",defaultMessage:"Increase indent"},decreaseIndent:{id:"compose.decrease_indent_icon",defaultMessage:"Decrease indent"},bold_icon_label:{id:"compose.bold_icon_label",defaultMessage:"Make selection bold"},italic_icon_label:{id:"compose.italic_icon_label",defaultMessage:"Make selection italic"},link_icon_label:{id:"compose.link_icon_label",defaultMessage:"Make selection a hyperlink"},richtext_icon_label:{id:"compose.richtext_icon_label",defaultMessage:"Switch to rich text mode"},bold:{id:"compose.bold",defaultMessage:"Bold"},italic:{id:"compose.italic",defaultMessage:"Italic"},link:{id:"compose.link",defaultMessage:"Link"},richtext:{id:"compose.richtext",defaultMessage:"Switch to rich text mode"},font_name_size:{id:"compose.font_name_size",defaultMessage:"Font"},foreground_color_text_label:{id:"compose.foreground_color_text_label",defaultMessage:"Text color"},background_color_text_label:{id:"compose.background_color_text_label",defaultMessage:"Highlight color"},color:{id:"compose.color",defaultMessage:"Color"}}),classNames=(0,_css2.default)(_expanded_more_tools2.default),ExpandedMoreTools=_react2.default.createClass({displayName:"ExpandedMoreTools",contextTypes:{intl:_reactIntl.intlShape.isRequired},getInitialState:function(){return{showMainMenu:!0,showColorMenu:!1,showFontMenu:!1}},onClickColor:function(e){this.setState({showMainMenu:!1,showColorMenu:!0,showFontMenu:!1}),e.stopPropagation()},onClickFont:function(e){this.setState({showMainMenu:!1,showColorMenu:!1,showFontMenu:!0}),e.stopPropagation()},onShowMenu:function(){this.props.onMenuShow(),this.setState({showMainMenu:!0,showColorMenu:!1,showFontMenu:!1})},focusBackEditor:function(){this.setState({showColorMenu:!1,showFontMenu:!1}),this.refs.expandedmoretoolsmenu.hideMenu(),this.props.focusBackEditor()},goToMainMenu:function(){this.setState({showMainMenu:!0,showColorMenu:!1,showFontMenu:!1})},render:function(){var e=this.props,t=e.tooltip,a=e.onChange,n=e.showPlainTextToggle,s=this.context.intl.formatMessage;return _react2.default.createElement("div",null,_react2.default.createElement(_menu_button_container2.default,{ref:"expandedmoretoolsmenu",afterMenuHide:this.focusBackEditor,showMenuActiveState:!0,onMenuShow:this.onShowMenu},_react2.default.createElement(_menu_button2.default,{"aria-label":t,"data-test-id":"icon-btn-expanded_more_tools",title:t},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.MORE,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.COOL_FAINT})),this.state.showMainMenu?_react2.default.createElement(_menu2.default,{menuLayout:_list.Layout.VERTICAL},_react2.default.createElement("div",{className:classNames.menuContainer},_react2.default.createElement("div",null,_react2.default.createElement(_list_item2.default,{key:"link",name:"link",className:classNames.menuItem,onClick:this.props.onAddLink,"data-test-id":"icon-btn-link"},_react2.default.createElement("span",{className:classNames.menuIcon},_react2.default.createElement(_fuji_icon_button2.default,{title:s(strings.link),"aria-label":s(strings.link_icon_label),kind:_fuji_icon3.Kinds.LINK,size:_fuji_icon3.Sizes.XS})),_react2.default.createElement("span",{className:classNames.menuLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.link))),_react2.default.createElement(_list_item2.default,{key:"font",name:"font",className:classNames.menuItem,onClick:this.onClickFont,"data-test-id":"icon-btn-font"},_react2.default.createElement("span",{className:classNames.menuIcon},_react2.default.createElement(_menu_button2.default,{"aria-label":s(strings.font_name_size),"data-test-id":"icon-btn-text_expanded",title:s(strings.font_name_size)},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.TEXT,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.NORMAL}))),_react2.default.createElement("span",{className:classNames.menuLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.font_name_size))),_react2.default.createElement(_list_item2.default,{key:"color",name:"color",className:classNames.menuItem,onClick:this.onClickColor,"data-test-id":"icon-btn-color"},_react2.default.createElement("span",{className:classNames.menuIcon},_react2.default.createElement(_menu_button2.default,{"data-test-id":"icon-btn-text_color_expanded",title:s(strings.color),"aria-label":s(strings.color)},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.TEXT_COLOR,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.NORMAL}))),_react2.default.createElement("span",{className:classNames.menuLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.color))),_react2.default.createElement("span",{className:classNames.sectionDivider}),_react2.default.createElement(_list_item2.default,{key:"align-l",name:"align-l",className:classNames.menuItem,onClick:a.bind(null,"left")},_react2.default.createElement("span",{className:classNames.menuIcon},_react2.default.createElement(_fuji_icon_button2.default,{"aria-label":s(strings.leftAlign),title:s(strings.leftAlign),kind:_fuji_icon3.Kinds.ALIGN_LEFT,size:_fuji_icon3.Sizes.XS})),_react2.default.createElement("span",{className:classNames.menuLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.leftAlign))),_react2.default.createElement(_list_item2.default,{key:"align-c",name:"align-c",className:classNames.menuItem,onClick:a.bind(null,"center")},_react2.default.createElement("span",{className:classNames.menuIcon},_react2.default.createElement(_fuji_icon_button2.default,{"aria-label":s(strings.centerAlign),title:s(strings.centerAlign),kind:_fuji_icon3.Kinds.ALIGN_CENTER,size:_fuji_icon3.Sizes.XS})),_react2.default.createElement("span",{className:classNames.menuLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.centerAlign))),_react2.default.createElement(_list_item2.default,{key:"align-r",name:"align-r",className:classNames.menuItem,onClick:a.bind(null,"right")},_react2.default.createElement("span",{className:classNames.menuIcon},_react2.default.createElement(_fuji_icon_button2.default,{className:classNames.rightAlignIcon,"aria-label":s(strings.rightAlign),title:s(strings.rightAlign),kind:_fuji_icon3.Kinds.ALIGN_LEFT,size:_fuji_icon3.Sizes.XS})),_react2.default.createElement("span",{className:classNames.menuLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.rightAlign))),_react2.default.createElement(_list_item2.default,{name:"indent",key:"indent",className:classNames.menuItem,onClick:a.bind(null,"indent")},_react2.default.createElement("span",{className:classNames.menuIcon},_react2.default.createElement(_fuji_icon_button2.default,{"aria-label":s(strings.increaseIndent),title:s(strings.increaseIndent),kind:_fuji_icon3.Kinds.INDENT,size:_fuji_icon3.Sizes.XS})),_react2.default.createElement("span",{className:classNames.menuLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.increaseIndent)))),_react2.default.createElement("div",{className:classNames.spaceBetween}),_react2.default.createElement("div",null,_react2.default.createElement(_list_item2.default,{key:"bold",name:"bold",className:classNames.menuItem,onClick:this.props.onClickBold,"data-test-id":"icon-btn-bold"},_react2.default.createElement("span",{className:classNames.menuIcon},_react2.default.createElement(_fuji_icon_button2.default,{title:s(strings.bold),"aria-label":s(strings.bold_icon_label),kind:_fuji_icon3.Kinds.BOLD,size:_fuji_icon3.Sizes.XS})),_react2.default.createElement("span",{className:classNames.menuLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.bold))),_react2.default.createElement(_list_item2.default,{key:"italic",name:"italic",className:classNames.menuItem,onClick:this.props.onClickItalic,"data-test-id":"icon-btn-italic"},_react2.default.createElement("span",{className:classNames.menuIcon},_react2.default.createElement(_fuji_icon_button2.default,{title:s(strings.italic),"aria-label":s(strings.italic_icon_label),kind:_fuji_icon3.Kinds.ITALIC,size:_fuji_icon3.Sizes.XS})),_react2.default.createElement("span",{className:classNames.menuLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.italic))),n?_react2.default.createElement(_list_item2.default,{key:"turn-off-richtext",name:"turn-off-richtext",className:classNames.menuItem,onClick:a.bind(null,"plaintext")},_react2.default.createElement("span",{className:classNames.menuIcon},_react2.default.createElement(_fuji_icon_button2.default,{"data-test-id":"richtext_off",title:s(strings.plaintext),"aria-label":s(strings.plaintext_icon_label),kind:_fuji_icon3.Kinds.RICHTEXT_OFF,size:_fuji_icon3.Sizes.XS})),_react2.default.createElement("span",{className:classNames.menuLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.plaintext_text_label))):_react2.default.createElement(_list_item2.default,{className:classNames.emptyMenuItem}),_react2.default.createElement("span",{className:classNames.sectionDivider}),_react2.default.createElement(_list_item2.default,{key:"bullet",name:"bullet",className:classNames.menuItem,onClick:a.bind(null,"bullet")},_react2.default.createElement("span",{className:classNames.menuIcon},_react2.default.createElement(_fuji_icon_button2.default,{"aria-label":s(strings.bulletedList),title:s(strings.bulletedList),kind:_fuji_icon3.Kinds.LIST_UNORDERED,size:_fuji_icon3.Sizes.XS})),_react2.default.createElement("span",{className:classNames.menuLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.bulletedList))),_react2.default.createElement(_list_item2.default,{key:"number",name:"number",className:classNames.menuItem,onClick:a.bind(null,"number")},_react2.default.createElement("span",{className:classNames.menuIcon},_react2.default.createElement(_fuji_icon_button2.default,{"aria-label":s(strings.numberedList),title:s(strings.numberedList),kind:_fuji_icon3.Kinds.LIST_ORDERED,size:_fuji_icon3.Sizes.XS})),_react2.default.createElement("span",{className:classNames.menuLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.numberedList))),_react2.default.createElement(_list_item2.default,{name:"outdent",key:"outdent",className:classNames.menuItem,onClick:a.bind(null,"outdent")},_react2.default.createElement("span",{className:classNames.menuIcon},_react2.default.createElement(_fuji_icon_button2.default,{"aria-label":s(strings.decreaseIndent),title:s(strings.decreaseIndent),kind:_fuji_icon3.Kinds.OUTDENT,size:_fuji_icon3.Sizes.XS})),_react2.default.createElement("span",{className:classNames.menuLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.decreaseIndent)))))):_react2.default.createElement(_menu2.default,{style:{display:"none"}})),this.state.showColorMenu?_react2.default.createElement("span",null,_react2.default.createElement(_color_picker2.default,{selectedFGColor:this.props.foreColor,selectedBGColor:this.props.backgroundColor,onFGColorChange:this.props.onChooseColor.bind(this.props.toolbar,"forecolor"),onBGColorChange:this.props.onChooseColor.bind(this.props.toolbar,"backcolor"),focusBackEditor:this.focusBackEditor,goToMainMenu:this.goToMainMenu,parentMenu:this.refs.expandedmoretoolsmenu})):"",this.state.showFontMenu?_react2.default.createElement("span",null,_react2.default.createElement(_font_name_size2.default,{selectedFontSize:this.props.fontSize,selectedFontFamily:this.props.fontFamily,onFontSizeChange:this.props.onChooseFont.bind(this.props.toolbar,"fontsize"),onFontFamilyChange:this.props.onChooseFont.bind(this.props.toolbar,"fontname"),focusBackEditor:this.focusBackEditor,goToMainMenu:this.goToMainMenu,parentMenu:this.refs.expandedmoretoolsmenu})):"")}});exports.default=ExpandedMoreTools,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/list":"./atoms/constants/list","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../atoms/list_item.jsx":"./atoms/list_item","../../../atoms/menu/menu.jsx":"./atoms/menu/menu","../../../atoms/menu/menu_button.jsx":"./atoms/menu/menu_button","../../../atoms/menu/menu_button_container.jsx":"./atoms/menu/menu_button_container","../styles/expanded_more_tools":"./molecules/compose/styles/expanded_more_tools","./color_picker.jsx":"./molecules/compose/atoms/color_picker","./font_name_size.jsx":"./molecules/compose/atoms/font_name_size","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],142:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,r){var t={};for(var o in e)r.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}function FocusBordered(e){var r=e.hasFocus,t=_objectWithoutProperties(e,["hasFocus"]),o=(0,_css2.default)(_focus_bordered2.default,{hasFocus:r});return _react2.default.createElement("div",_extends({},t,{className:o.input}),e.children)}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};exports.default=FocusBordered;var _react=require("react"),_react2=_interopRequireDefault(_react),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_focus_bordered=require("../styles/focus_bordered"),_focus_bordered2=_interopRequireDefault(_focus_bordered);module.exports=exports.default;
},{"../styles/focus_bordered":155,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./molecules/compose/atoms/font_name_size":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_menu_button_container=require("../../../atoms/menu/menu_button_container.jsx"),_menu_button_container2=_interopRequireDefault(_menu_button_container),_menu_button=require("../../../atoms/menu/menu_button.jsx"),_menu_button2=_interopRequireDefault(_menu_button),_menu=require("../../../atoms/menu/menu.jsx"),_menu2=_interopRequireDefault(_menu),_font_name_size_menuitem=require("./font_name_size_menuitem.jsx"),_font_name_size_menuitem2=_interopRequireDefault(_font_name_size_menuitem),_constants=require("../constants"),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_navigable_list=require("../../../atoms/navigable_list.jsx"),_navigable_list2=_interopRequireDefault(_navigable_list),_list_item=require("../../../atoms/list_item.jsx"),_list_item2=_interopRequireDefault(_list_item),_list=require("../../../atoms/constants/list"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_expanded_more_tools=require("../styles/expanded_more_tools"),_expanded_more_tools2=_interopRequireDefault(_expanded_more_tools),classNames=(0,_css2.default)(_expanded_more_tools2.default),strings=(0,_reactIntl.defineMessages)({font_name_size:{id:"compose.font_name_size",defaultMessage:"Font"},font_size_label_tiny:{id:"compose.font_size_label_tiny",defaultMessage:"Tiny"},font_size_label_small:{id:"compose.font_size_label_small",defaultMessage:"Small"},font_size_label_medium:{id:"compose.font_size_label_medium",defaultMessage:"Medium"},font_size_label_large:{id:"compose.font_size_label_large",defaultMessage:"Large"},font_size_label_xlarge:{id:"compose.font_size_label_xlarge",defaultMessage:"X-Large"},font_size_label_huge:{id:"compose.font_size_label_huge",defaultMessage:"Huge"},back_button_text_label:{id:"compose.back_button_text_label",defaultMessage:"Back"}}),FontNameSize=_react2.default.createClass({displayName:"FontNameSize",contextTypes:{intl:_reactIntl.intlShape.isRequired},getDefaultProps:function(){return{parentMenu:null}},handleBackButton:function(e){e.stopPropagation(),this.props.goToMainMenu()},render:function(){var e,t=this,n=this.context.intl.formatMessage,a=(e={},e[_constants.FontSizes[0].name]=n(strings.font_size_label_tiny),e[_constants.FontSizes[1].name]=n(strings.font_size_label_small),e[_constants.FontSizes[2].name]=n(strings.font_size_label_medium),e[_constants.FontSizes[3].name]=n(strings.font_size_label_large),e[_constants.FontSizes[4].name]=n(strings.font_size_label_xlarge),e[_constants.FontSizes[5].name]=n(strings.font_size_label_huge),e),_=parseInt(this.props.selectedFontSize,10),s=this.props.selectedFontFamily,i=_constants.FontSizes.map(function(e){var n=e.name,s=e.fontSize;return _react2.default.createElement(_font_name_size_menuitem2.default,{key:n,kind:n,text:a[n]||"",onClick:t.props.onFontSizeChange.bind(null,s),selected:s===_})}),l=_constants.Fonts.map(function(e){var n=e.name,a=e.label,_=e.fontFamily,i=_.replace(/['," ]/g,"").toLowerCase(),l=s.replace(/['," ]/g,"").toLowerCase(),o=i===l;return _react2.default.createElement(_font_name_size_menuitem2.default,{key:n,kind:n,text:a,onClick:t.props.onFontFamilyChange.bind(null,_),selected:o})});return _react2.default.createElement(_menu_button_container2.default,{afterMenuHide:this.props.focusBackEditor,showMenuActiveState:!0,parentMenu:this.props.parentMenu},this.props.parentMenu?_react2.default.createElement(_menu_button2.default,{style:{display:"none"}}):_react2.default.createElement(_menu_button2.default,{"aria-label":n(strings.font_name_size),"data-test-id":"icon-btn-text",title:n(strings.font_name_size)},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.TEXT,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.NORMAL})),_react2.default.createElement(_menu2.default,{style:this.props.parentMenu?{marginLeft:"8px",marginTop:"4px"}:{},menuLayout:_list.Layout.VERTICAL},this.props.parentMenu?_react2.default.createElement("span",{className:classNames.fontMenuBackButton,onClick:this.handleBackButton,"data-test-id":"icon-btn-text_back"},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.ARROW_UP,size:_fuji_icon3.Sizes.XS,rotate:_fuji_icon3.Rotate.D270,colorState:_fuji_icon3.ColorStates.SECOND_LEVEL_GRAY}),_react2.default.createElement("span",{className:classNames.backButtonLabel},_react2.default.createElement(_reactIntl.FormattedMessage,strings.back_button_text_label))):"",_react2.default.createElement(_navigable_list2.default,{layout:_list.Layout.HORIZONTAL},_react2.default.createElement(_list_item2.default,{key:"font-families"},_react2.default.createElement(_navigable_list2.default,null,l)),_react2.default.createElement(_list_item2.default,{key:"font-sizes"},_react2.default.createElement(_navigable_list2.default,null,i)))))}});exports.default=FontNameSize,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/list":"./atoms/constants/list","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/list_item.jsx":"./atoms/list_item","../../../atoms/menu/menu.jsx":"./atoms/menu/menu","../../../atoms/menu/menu_button.jsx":"./atoms/menu/menu_button","../../../atoms/menu/menu_button_container.jsx":"./atoms/menu/menu_button_container","../../../atoms/navigable_list.jsx":"./atoms/navigable_list","../constants":"./molecules/compose/constants","../styles/expanded_more_tools":"./molecules/compose/styles/expanded_more_tools","./font_name_size_menuitem.jsx":"./molecules/compose/atoms/font_name_size_menuitem","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/compose/atoms/font_name_size_menuitem":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function FontNameSizeMenuItem(e){var t=e.kind,i=e.text,_=e.onClick,n=e.selected,u=(0,_css2.default)(_font_name_size_menuitem2.default,{kind:t,selected:n});return _react2.default.createElement(_list_item3.default,{key:t,kind:_list_item.Kinds.WRAP_CONTENT,name:t,text:i},_react2.default.createElement(_button2.default,{kind:_button3.Kinds.MENUITEM,onClick:_},_react2.default.createElement("div",{className:u.menuItem},_react2.default.createElement("span",{className:u.checkmarkWrapper},n&&_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.CHECKMARK,size:_fuji_icon3.Sizes.XS})),i)))}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_list_item=require("../../../atoms/constants/list_item"),_button=require("../../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_button3=require("../../../atoms/constants/button"),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_list_item2=require("../../../atoms/list_item.jsx"),_list_item3=_interopRequireDefault(_list_item2),_font_name_size_menuitem=require("../styles/font_name_size_menuitem"),_font_name_size_menuitem2=_interopRequireDefault(_font_name_size_menuitem),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css);exports.default=FontNameSizeMenuItem,module.exports=exports.default;
},{"../../../atoms/button.jsx":"./atoms/button","../../../atoms/constants/button":"./atoms/constants/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/list_item":"./atoms/constants/list_item","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/list_item.jsx":"./atoms/list_item","../styles/font_name_size_menuitem":"./molecules/compose/styles/font_name_size_menuitem","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./molecules/compose/atoms/go_to_link":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_layer=require("../../../atoms/layer.jsx"),_layer2=_interopRequireDefault(_layer),_reactIntl=require("react-intl"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_go_to_link=require("../styles/go_to_link"),_go_to_link2=_interopRequireDefault(_go_to_link),_menu_utils=require("../../../atoms/utils/menu_utils"),ALLOWED_PROTOCOLS=/^(?:https?|ftp|mailto):/i,classNames=(0,_css2.default)(_go_to_link2.default),GoToLink=_react2.default.createClass({displayName:"GoToLink",editLink:function(){this.props.onEdit()},removeLink:function(){this.props.onRemove()},componentDidMount:function(){var e=this.props.anchorNode,t=(0,_menu_utils.getMenuLayerStyles)(e,this.container),a=t.left,r=t.top;Object.assign(this.container.style,{left:a+"px",top:r+"px"})},render:function(){var e=this,t=this.props.goToLinkValue.trim(),a=ALLOWED_PROTOCOLS.test(t);return _react2.default.createElement(_layer2.default,null,_react2.default.createElement("div",{className:classNames.container,ref:function(t){return e.container=t}},_react2.default.createElement("div",{className:classNames.linkWrapper},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.link_go_to",defaultMessage:"Go to"}),"",_react2.default.createElement("span",null,a?_react2.default.createElement("a",{className:classNames.link,href:t,target:"_blank","data-test-id":"anchor"},t):t)),_react2.default.createElement("div",{"data-test-id":"editControl",className:classNames.control,onClick:this.editLink},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.link_edit",defaultMessage:"Edit"})),_react2.default.createElement("div",{"data-test-id":"removeControl",className:classNames.control,onClick:this.removeLink},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.link_remove",defaultMessage:"Remove"}))))}});exports.default=GoToLink,module.exports=exports.default;
},{"../../../atoms/layer.jsx":"./atoms/layer","../../../atoms/utils/menu_utils":"./atoms/utils/menu_utils","../styles/go_to_link":"./molecules/compose/styles/go_to_link","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/compose/atoms/hyperlink_dropdown":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_layer=require("../../../atoms/layer.jsx"),_layer2=_interopRequireDefault(_layer),_button=require("../../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_reactIntl=require("react-intl"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_hyperlink_dropdown=require("../styles/hyperlink_dropdown"),_hyperlink_dropdown2=_interopRequireDefault(_hyperlink_dropdown),_fuji_icon=require("../../../atoms/constants/fuji_icon"),_alert=require("../../../atoms/dialog/alert.jsx"),_alert2=_interopRequireDefault(_alert),_menu_utils=require("../../../atoms/utils/menu_utils"),strings=(0,_reactIntl.defineMessages)({link_text_placeholder:{id:"compose.link_placeholder",defaultMessage:"Display text"},close:{id:"compose.link_close",defaultMessage:"Close"},error_title:{id:"compose.link_error_title",defaultMessage:"Error"},open_link_alert:{id:"compose.link_test_error",defaultMessage:"This link cannot be tested."}}),ALLOWED_PROTOCOLS=/^(?:https?|ftp|mailto):(?:\/\/)?/i,HyperLinkDropdown=_react2.default.createClass({displayName:"HyperLinkDropdown",contextTypes:{intl:_reactIntl.intlShape.isRequired},getInitialState:function(){return{focusOnLinkInput:!1,saveBtnEnabled:!1,showTestAlert:!1}},componentDidMount:function(){var e=this.props.anchorNode,t=(0,_menu_utils.getMenuLayerStyles)(e,this.dropdown),n=t.left,a=t.top;Object.assign(this.dropdown.style,{left:n+"px",top:a+"px"}),this.linkInput.focus()},saveLink:function(){var e=this.linkInput.value.trim(),t=this.textInput.value.trim()||e.replace(ALLOWED_PROTOCOLS,"");ALLOWED_PROTOCOLS.test(e)||(e="http://"+e),this.props.onSave(t,e)},handleClose:function(){this.props.onClose()},handleKeyDown:function(e){e.stopPropagation(),"Enter"===e.key?(e.preventDefault(),this.saveLink()):"Escape"===e.key&&(e.preventDefault(),this.handleClose())},toggleTestLink:function(e){this.setState({focusOnLinkInput:e})},openTestLink:function(){var e=this.linkInput.value.trim(),t=ALLOWED_PROTOCOLS.test(e),n=window.open(t?e:"http://"+e,"_blank");n||this.setState({showTestAlert:!0}),n=null},handleLinkInput:function(){var e=this.linkInput.value.trim();""===e||"http://"===e?this.setState({saveBtnEnabled:!1}):this.setState({saveBtnEnabled:!0})},hideTestAlertDialog:function(){this.setState({showTestAlert:!1})},render:function(){var e=this,t=this.props,n=t.textInput,a=t.linkInput,s=this.state,i=s.saveBtnEnabled,l=s.focusOnLinkInput,r=!(a||i),o=this.context.intl.formatMessage,u=(0,_css2.default)(_hyperlink_dropdown2.default,{saveBtnEnabled:!r});return _react2.default.createElement(_layer2.default,null,_react2.default.createElement("div",{ref:function(t){return e.dropdown=t},className:u.container,onKeyDown:this.handleKeyDown,"data-test-id":"hyperlink-plugin"},this.state.showTestAlert?_react2.default.createElement(_alert2.default,{title:o(strings.error_title),message:o(strings.open_link_alert),onAccept:this.hideTestAlertDialog}):null,_react2.default.createElement("div",{className:u.close},_react2.default.createElement(_fuji_icon_button2.default,{onClick:this.handleClose,kind:_fuji_icon.Kinds.CLOSE,size:_fuji_icon.Sizes.XXS,title:o(strings.close),"aria-label":o(strings.close)})),_react2.default.createElement("div",{className:u.item},_react2.default.createElement("input",{ref:function(t){return e.textInput=t},className:u.textInput,placeholder:o(strings.link_text_placeholder),onFocus:this.handleLinkInput,defaultValue:n})),_react2.default.createElement("div",{className:u.item},_react2.default.createElement("input",{ref:function(t){return e.linkInput=t},className:u.linkInput,placeholder:"http://www.yahoo.com",onFocus:this.toggleTestLink.bind(this,!0),onBlur:this.toggleTestLink.bind(this,!1),onChange:this.handleLinkInput,defaultValue:a}),l?_react2.default.createElement("span",{"data-test-id":"testLinkInput",className:u.testLink,onMouseDown:this.openTestLink},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.test_hyperlink",defaultMessage:"Test"})):null),_react2.default.createElement("div",{className:u.item},_react2.default.createElement(_button2.default,{onClick:this.saveLink,className:u.button,disabled:r},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.save_hyperlink",defaultMessage:"Save"})))))}});exports.default=HyperLinkDropdown,module.exports=exports.default;
},{"../../../atoms/button.jsx":"./atoms/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/dialog/alert.jsx":"./atoms/dialog/alert","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../atoms/layer.jsx":"./atoms/layer","../../../atoms/utils/menu_utils":"./atoms/utils/menu_utils","../styles/hyperlink_dropdown":"./molecules/compose/styles/hyperlink_dropdown","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],143:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _react=require("react"),_react2=_interopRequireDefault(_react),styles=require("../styles/labeled_input"),getCss=require("react-atomic-css/css"),LabeledInput;LabeledInput=_react2.default.createClass({displayName:"LabeledInput",getDefaultProps:function(){return{active:!1}},render:function(){var e=getCss(styles,{active:this.props.active});return _react2.default.createElement("div",{className:e.module,"data-test-id":"labeled-input"},_react2.default.createElement("label",{htmlFor:this.props.for,className:e.label,onClick:this.props.onLabelClick,"data-test-id":"label-input-"+this.props.label.props.defaultMessage},this.props.label),_react2.default.createElement("div",{className:e.children,"data-test-id":this.props.childrenId,onDragOver:this.props.onDragOver,onDrop:this.props.onDrop},this.props.children))}}),module.exports=LabeledInput;
},{"../styles/labeled_input":158,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./molecules/compose/atoms/more_tools":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_list_item=require("../../../atoms/list_item.jsx"),_list_item2=_interopRequireDefault(_list_item),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_menu_button_container=require("../../../atoms/menu/menu_button_container.jsx"),_menu_button_container2=_interopRequireDefault(_menu_button_container),_menu_button=require("../../../atoms/menu/menu_button.jsx"),_menu_button2=_interopRequireDefault(_menu_button),_menu=require("../../../atoms/menu/menu.jsx"),_menu2=_interopRequireDefault(_menu),_list=require("../../../atoms/constants/list"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_more_tools=require("../styles/more_tools"),_more_tools2=_interopRequireDefault(_more_tools),_reactIntl=require("react-intl"),strings=(0,_reactIntl.defineMessages)({plaintext_icon_label:{id:"compose.plaintext_icon_label",defaultMessage:"Switch to plain text mode"},plaintext:{id:"compose.plaintext",defaultMessage:"Switch to plain text mode"},leftAlign:{id:"compose.left_align_icon",defaultMessage:"Left align"},rightAlign:{id:"compose.right_align_icon",defaultMessage:"Right align"},centerAlign:{id:"compose.center_align_icon",defaultMessage:"Center align"},bulletedList:{id:"compose.bulleted_list_icon",defaultMessage:"Bulleted List"},numberedList:{id:"compose.numbered_list_icon",defaultMessage:"Numbered list"},increaseIndent:{id:"compose.increase_indent_icon",defaultMessage:"Increase indent"},decreaseIndent:{id:"compose.decrease_indent_icon",defaultMessage:"Decrease indent"}}),classNames=(0,_css2.default)(_more_tools2.default),MoreTools=_react2.default.createClass({displayName:"MoreTools",contextTypes:{intl:_reactIntl.intlShape.isRequired},render:function(){var e=this.props,t=e.tooltip,i=e.focusBackEditor,n=e.onChange,a=e.showPlainTextToggle,l=this.context.intl.formatMessage;return _react2.default.createElement(_menu_button_container2.default,{afterMenuHide:i,showMenuActiveState:!0,onMenuShow:this.props.onMenuShow},_react2.default.createElement(_menu_button2.default,{"aria-label":t,"data-test-id":"icon-btn-more_tools",title:t},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.MORE,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.COOL_FAINT})),_react2.default.createElement(_menu2.default,{menuLayout:_list.Layout.HORIZONTAL},_react2.default.createElement("span",{className:classNames.sectionDivider}),_react2.default.createElement(_list_item2.default,{key:"align-l",name:"align-l"},_react2.default.createElement("span",{className:classNames.icon},_react2.default.createElement(_fuji_icon_button2.default,{"aria-label":l(strings.leftAlign),title:l(strings.leftAlign),kind:_fuji_icon3.Kinds.ALIGN_LEFT,size:_fuji_icon3.Sizes.XS,onClick:n.bind(null,"left")}))),_react2.default.createElement(_list_item2.default,{key:"align-c",name:"align-c"},_react2.default.createElement("span",{className:classNames.icon},_react2.default.createElement(_fuji_icon_button2.default,{"aria-label":l(strings.centerAlign),title:l(strings.centerAlign),kind:_fuji_icon3.Kinds.ALIGN_CENTER,size:_fuji_icon3.Sizes.XS,onClick:n.bind(null,"center")}))),_react2.default.createElement(_list_item2.default,{key:"align-r",name:"align-r"},_react2.default.createElement("span",{className:classNames.icon},_react2.default.createElement(_fuji_icon_button2.default,{className:classNames.rightAlignIcon,"aria-label":l(strings.rightAlign),title:l(strings.rightAlign),kind:_fuji_icon3.Kinds.ALIGN_LEFT,rotate:_fuji_icon3.Rotate.D0,size:_fuji_icon3.Sizes.XS,onClick:n.bind(null,"right")}))),_react2.default.createElement("span",{className:classNames.sectionDivider}),_react2.default.createElement(_list_item2.default,{key:"bullet",name:"bullet"},_react2.default.createElement("span",{className:classNames.icon},_react2.default.createElement(_fuji_icon_button2.default,{"aria-label":l(strings.bulletedList),title:l(strings.bulletedList),kind:_fuji_icon3.Kinds.LIST_UNORDERED,size:_fuji_icon3.Sizes.XS,onClick:n.bind(null,"bullet")}))),_react2.default.createElement(_list_item2.default,{key:"number",name:"number"},_react2.default.createElement("span",{className:classNames.icon},_react2.default.createElement(_fuji_icon_button2.default,{"aria-label":l(strings.numberedList),title:l(strings.numberedList),kind:_fuji_icon3.Kinds.LIST_ORDERED,size:_fuji_icon3.Sizes.XS,onClick:n.bind(null,"number")}))),_react2.default.createElement("span",{className:classNames.sectionDivider}),_react2.default.createElement(_list_item2.default,{name:"indent",key:"indent"},_react2.default.createElement("span",{className:classNames.icon},_react2.default.createElement(_fuji_icon_button2.default,{"aria-label":l(strings.increaseIndent),title:l(strings.increaseIndent),kind:_fuji_icon3.Kinds.INDENT,size:_fuji_icon3.Sizes.XS,onClick:n.bind(null,"indent")}))),_react2.default.createElement(_list_item2.default,{name:"outdent",key:"outdent"},_react2.default.createElement("span",{className:classNames.icon},_react2.default.createElement(_fuji_icon_button2.default,{"aria-label":l(strings.decreaseIndent),title:l(strings.decreaseIndent),kind:_fuji_icon3.Kinds.OUTDENT,size:_fuji_icon3.Sizes.XS,onClick:n.bind(null,"outdent")}))),_react2.default.createElement("span",{className:classNames.sectionDivider}),a?_react2.default.createElement(_list_item2.default,{name:"turn-off-richtext",key:"turn-off-richtext"},_react2.default.createElement("span",{className:classNames.icon},_react2.default.createElement(_fuji_icon_button2.default,{"data-test-id":"richtext_off",onClick:n.bind(null,"plaintext"),title:l(strings.plaintext),"aria-label":l(strings.plaintext_icon_label),kind:_fuji_icon3.Kinds.RICHTEXT_OFF,size:_fuji_icon3.Sizes.XS})),_react2.default.createElement("span",{className:classNames.sectionDivider})):null))}});exports.default=MoreTools,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/list":"./atoms/constants/list","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../atoms/list_item.jsx":"./atoms/list_item","../../../atoms/menu/menu.jsx":"./atoms/menu/menu","../../../atoms/menu/menu_button.jsx":"./atoms/menu/menu_button","../../../atoms/menu/menu_button_container.jsx":"./atoms/menu/menu_button_container","../styles/more_tools":"./molecules/compose/styles/more_tools","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/compose/atoms/toolbar":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_button=require("../../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_mail_constants=require("../../../platform/mail_constants"),_more_tools=require("./more_tools.jsx"),_more_tools2=_interopRequireDefault(_more_tools),_expanded_more_tools=require("./expanded_more_tools.jsx"),_expanded_more_tools2=_interopRequireDefault(_expanded_more_tools),_font_name_size=require("./font_name_size.jsx"),_font_name_size2=_interopRequireDefault(_font_name_size),_color_picker=require("./color_picker.jsx"),_color_picker2=_interopRequireDefault(_color_picker),_uploader=require("./uploader.jsx"),_uploader2=_interopRequireDefault(_uploader),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_theme_picker=require("../../stationery/theme_picker"),_theme_picker2=_interopRequireDefault(_theme_picker),_gif=require("../../gif"),_gif2=_interopRequireDefault(_gif),_emoji_picker=require("../../emoji_picker"),_emoji_picker2=_interopRequireDefault(_emoji_picker),_fuji_icon=require("../../../atoms/constants/fuji_icon"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_toolbar=require("../styles/toolbar"),_toolbar2=_interopRequireDefault(_toolbar),_constants=require("../constants"),_object=require("../../../platform/utils/object"),_constants2=require("../../../platform/rapid_client/constants"),DraftStatus=_mail_constants.Draft.Status,ACTION_MAP={bullet:"insertunorderedlist",number:"insertorderedlist",left:"justifyleft",center:"justifycenter",right:"justifyright"},strings=(0,_reactIntl.defineMessages)({bold_icon_label:{id:"compose.bold_icon_label",defaultMessage:"Make selection bold"},italic_icon_label:{id:"compose.italic_icon_label",defaultMessage:"Make selection italic"},link_icon_label:{id:"compose.link_icon_label",defaultMessage:"Make selection a hyperlink"},richtext_icon_label:{id:"compose.richtext_icon_label",defaultMessage:"Switch to rich text mode"},bold:{id:"compose.bold",defaultMessage:"Bold"},italic:{id:"compose.italic",defaultMessage:"Italic"},link:{id:"compose.link",defaultMessage:"Link"},richtext:{id:"compose.richtext",defaultMessage:"Switch to rich text mode"},select_more_tools:{id:"compose.select_more_tools",defaultMessage:"More options"},delete_draft:{id:"compose.delete_draft",defaultMessage:"Delete this draft"},send_button_title:{id:"compose.send_button_title",defaultMessage:"Send this email [cmd+enter]"}}),Toolbar=_react2.default.createClass({displayName:"Toolbar",contextTypes:{intl:_reactIntl.intlShape.isRequired},getDefaultProps:function(){return{uploadEnabled:!0,showDeleteButton:!0,showSendButton:!0,showPlainTextMode:!0,kind:_constants.ToolbarTypes.COMPOSE,fixed:!1,disabled:!1,stationeryEnabled:!1}},_getToolbarStyle:function(){var e={};return this.props.fixed&&this.props.width&&(e.maxWidth=this.props.width-_constants.HORIZONTAL_PADDING+"px"),e},_renderToolbarPlaceholder:function(e){return _react2.default.createElement("div",{className:e.toolbarPlaceholder,"data-test-id":"compose-toolbar-placeholder"})},_renderRichTextOff:function(e,t){return _react2.default.createElement("span",{className:e.icon},_react2.default.createElement(_fuji_icon_button2.default,{"data-test-id":"richtext_on",onClick:this.handleChange.bind(this,"richtext"),title:t(strings.richtext),"aria-label":t(strings.richtext_icon_label),kind:_fuji_icon.Kinds.RICHTEXT_ON,size:_fuji_icon.Sizes.XS}))},_renderRichTextOn:function(e,t,o,a){var n=this.getFormatState(),s=n.foreColor,i=n.backgroundColor,l=n.fontSize,r=n.fontFamily;return o?_react2.default.createElement("div",{className:e.formattingTools},_react2.default.createElement("span",{className:e.icon},_react2.default.createElement(_expanded_more_tools2.default,{onChange:this.onMoreMenuChange,onHandleChange:this.handleChange,tooltip:t(strings.select_more_tools),focusBackEditor:this.props.focusOnEditor,showPlainTextToggle:a,onMenuShow:this.props.onMoreMenuClick,onAddLink:this.onAddLink,onClickBold:this.onClickBold,onClickItalic:this.onClickItalic,onChooseColor:this.chooseColor,onChooseFont:this.chooseFont,foreColor:s,backgroundColor:i,fontSize:l,fontFamily:r,toolbar:this}))):_react2.default.createElement("div",{className:e.formattingTools},_react2.default.createElement("span",{className:e.icon},_react2.default.createElement(_fuji_icon_button2.default,{onClick:this.onAddLink,title:t(strings.link),"aria-label":t(strings.link_icon_label),kind:_fuji_icon.Kinds.LINK,size:_fuji_icon.Sizes.XS})),_react2.default.createElement("span",{className:e.icon},_react2.default.createElement(_fuji_icon_button2.default,{onClick:this.onClickBold,title:t(strings.bold),"aria-label":t(strings.bold_icon_label),kind:_fuji_icon.Kinds.BOLD,size:_fuji_icon.Sizes.XS})),_react2.default.createElement("span",{className:e.icon},_react2.default.createElement(_fuji_icon_button2.default,{onClick:this.onClickItalic,title:t(strings.italic),"aria-label":t(strings.italic_icon_label),kind:_fuji_icon.Kinds.ITALIC,size:_fuji_icon.Sizes.XS})),_react2.default.createElement("span",{className:e.icon},_react2.default.createElement(_color_picker2.default,{selectedFGColor:s,selectedBGColor:i,onFGColorChange:this.chooseColor.bind(this,"forecolor"),onBGColorChange:this.chooseColor.bind(this,"backcolor"),focusBackEditor:this.props.focusOnEditor})),_react2.default.createElement("span",{className:e.icon},_react2.default.createElement(_font_name_size2.default,{selectedFontSize:l,selectedFontFamily:r,onFontSizeChange:this.chooseFont.bind(this,"fontsize"),onFontFamilyChange:this.chooseFont.bind(this,"fontname"),focusBackEditor:this.props.focusOnEditor})),_react2.default.createElement("span",{className:e.icon},_react2.default.createElement(_more_tools2.default,{onChange:this.onMoreMenuChange,tooltip:t(strings.select_more_tools),focusBackEditor:this.props.focusOnEditor,showPlainTextToggle:a,onMenuShow:this.props.onMoreMenuClick})))},render:function(){var e=this.props,t=e.composeGIF,o=e.disabled,a=e.draftStatus,n=e.fixed,s=e.kind,i=e.showPlainTextMode,l=e.stationeryEnabled,r=e.gifFinderEnabled,c=e.uploadEnabled,_=e.emojiEnabled,d=e.width,u=(0,_css2.default)(_toolbar2.default,{kind:s,fixed:n,disabled:o}),f=this.getFormatState(),h=f.richTextMode,m=this.context.intl.formatMessage,p=this._getToolbarStyle(),E=a===DraftStatus.INIT&&Boolean(this.props.stationeryDefaultTheme)&&!this.props.stationeryTheme,S=h&&l,b=h&&r,C={contentSection:c||S,formattersSection:h&&i},g=d<_constants.COMPOSE_MIN_WIDTH;return a||o?_react2.default.createElement("div",{"data-test-id":"compose-toolbar"},_react2.default.createElement("div",{"data-test-id":"compose-toolbar-styler",className:u.composeToolbar,style:p},this.props.showSendButton?_react2.default.createElement(_button2.default,{"data-test-id":"compose-send-button",className:u.sendButton,disabled:a===DraftStatus.SENDING||this.props.disabled,onClick:this.handleChange.bind(this,_constants.ToolbarActions.SEND),title:m(strings.send_button_title)},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.send_button_label",defaultMessage:"Send"})):null,c?_react2.default.createElement("span",{className:u.icon},_react2.default.createElement(_uploader2.default,{onFileSelect:this.handleChange.bind(this,_constants.ToolbarActions.FILE_SELECT)})):null,b?_react2.default.createElement("span",{className:u.icon},_react2.default.createElement(_gif2.default,{focusBackEditor:this.props.focusOnEditor,gifs:t,left:this.props.left,onGifClick:this.props.addGIF,width:this.props.width})):null,S?_react2.default.createElement("span",{className:u.icon},_react2.default.createElement(_theme_picker2.default,{onThemeChange:this.onThemeChange,focusBackEditor:this.props.focusOnEditor,stationeryDefaultTheme:this.props.stationeryDefaultTheme,stationeryTheme:this.props.stationeryTheme,autoApplyDefaultTheme:E,width:this.props.width,left:this.props.left,showStationeryCue:this.props.showStationeryCue,showHSStationeryCue:this.props.showHSStationeryCue})):null,_?_react2.default.createElement("span",{className:u.icon},_react2.default.createElement(_emoji_picker2.default,{focusBackEditor:this.props.focusOnEditor,left:this.props.left,onEmojiClick:this.props.addEmoji})):null,C.contentSection?_react2.default.createElement("span",{"data-test-id":"section-divider-contentSection",className:u.sectionDivider}):null,h?this._renderRichTextOn(u,m,g,i):this._renderRichTextOff(u,m),_react2.default.createElement("span",{className:u.spacer}),a===DraftStatus.SAVED||a===DraftStatus.SAVED_PARTIAL||a===DraftStatus.SAVING?_react2.default.createElement("span",{role:"status","data-test-id":"status",className:u.status},a===DraftStatus.SAVING?_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.draft_saving_status",defaultMessage:"Saving"}):_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.draft_save_success_status",defaultMessage:"Saved"})):null,this.props.showDeleteButton?_react2.default.createElement("span",{className:u.deleteButton},_react2.default.createElement(_fuji_icon_button2.default,{onClick:this.handleChange.bind(null,_constants.ToolbarActions.DELETE_DRAFT),title:m(strings.delete_draft),"aria-label":m(strings.delete_draft),kind:_fuji_icon.Kinds.DELETE,size:_fuji_icon.Sizes.XS})):null),this.props.fixed&&this._renderToolbarPlaceholder(u)):null},onThemeChange:function(e){var t={mKey:_constants2.MKEYS.COMPOSE_ADD_STATIONERY,sec:_constants2.SEC_VALUES.RTE_TOOLBAR};this.handleChange(_constants.ToolbarActions.UPDATE_STATIONERY,{data:e,i13nModel:t})},onAddLink:function(e){var t={mKey:_constants2.MKEYS.COMPOSE_ADD_LINK,sec:_constants2.SEC_VALUES.RTE_TOOLBAR};this.handleChange("createlink",{data:e,i13nModel:t})},onClickBold:function(e){var t={mKey:_constants2.MKEYS.COMPOSE_BOLD,sec:_constants2.SEC_VALUES.RTE_TOOLBAR};this.handleChange("bold",{data:e,i13nModel:t})},onClickItalic:function(e){var t={mKey:_constants2.MKEYS.COMPOSE_ITALIC,sec:_constants2.SEC_VALUES.RTE_TOOLBAR};this.handleChange("italic",{data:e,i13nModel:t})},chooseColor:function(e,t){var o={mKey:_constants2.MKEYS.COMPOSE_CHOOSE_COLOR,sec:_constants2.SEC_VALUES.RTE_TOOLBAR,actionData:{color:t}};this.handleChange(e,{data:t,i13nModel:o})},chooseFont:function(e,t){var o={size:t};"fontname"===e&&(o={font:t});var a={mKey:_constants2.MKEYS.COMPOSE_CHOOSE_FONT,sec:_constants2.SEC_VALUES.RTE_TOOLBAR,actionData:o};this.handleChange(e,{data:t,i13nModel:a})},onMoreMenuChange:function(e,t){var o=_constants2.MKEYS.COMPOSE_OPEN_MORE_MENU,a="";switch(e){case"bullet":o=_constants2.MKEYS.COMPOSE_CHOOSE_LIST_TYPE,a="unordrd";break;case"number":o=_constants2.MKEYS.COMPOSE_CHOOSE_LIST_TYPE,a="ordrd";break;case"left":o=_constants2.MKEYS.COMPOSE_ALIGN_TEXT,a="lft";break;case"right":o=_constants2.MKEYS.COMPOSE_ALIGN_TEXT,a="rght";break;case"center":o=_constants2.MKEYS.COMPOSE_ALIGN_TEXT,a="cntr"}var n={mKey:o,sec:_constants2.SEC_VALUES.RTE_TOOLBAR,actionData:{setTo:a}};this.handleChange(e,{data:t,i13nModel:n})},handleChange:function(e,t){this.props.onExecuteAction(ACTION_MAP[e]||e,t)},getFormatState:function(){return Object.assign({richTextMode:!0,foreColor:_color_picker2.default.DEFAULTS.FG_COLOR,backgroundColor:_color_picker2.default.DEFAULTS.BG_COLOR,fontSize:"0",fontFamily:""},this.props.formatState)}});exports.default=Toolbar,module.exports=exports.default;
},{"../../../atoms/button.jsx":"./atoms/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../../platform/utils/object":"./platform/utils/object","../../emoji_picker":"./molecules/emoji_picker","../../gif":"./molecules/gif","../../stationery/theme_picker":"./molecules/stationery/theme_picker","../constants":"./molecules/compose/constants","../styles/toolbar":"./molecules/compose/styles/toolbar","./color_picker.jsx":"./molecules/compose/atoms/color_picker","./expanded_more_tools.jsx":"./molecules/compose/atoms/expanded_more_tools","./font_name_size.jsx":"./molecules/compose/atoms/font_name_size","./more_tools.jsx":"./molecules/compose/atoms/more_tools","./uploader.jsx":"./molecules/compose/atoms/uploader","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/compose/atoms/uploader":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Uploader(e,t){var a=e.onFileSelect,r=t.intl,l=r.formatMessage;return _react2.default.createElement("span",{className:classNames.container},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.ATTACH,colorState:_fuji_icon3.ColorStates.NORMAL,size:_fuji_icon3.Sizes.XS}),_react2.default.createElement(_html5uploader2.default,{className:classNames.input,multiple:!0,onChange:handleChange.bind(null,a),ariaLabel:l(strings.attachFile)}))}function handleChange(e,t){var a=Array.prototype.slice.call(t.target.files);e({data:a})}exports.__esModule=!0,exports.default=Uploader;var _react=require("react"),_react2=_interopRequireDefault(_react),_html5uploader=require("../../../atoms/html5uploader.jsx"),_html5uploader2=_interopRequireDefault(_html5uploader),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_uploader=require("../styles/uploader"),_uploader2=_interopRequireDefault(_uploader),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_reactIntl=require("react-intl"),classNames=(0,_css2.default)(_uploader2.default),strings=(0,_reactIntl.defineMessages)({attachFile:{id:"compose.attach_file",defaultMessage:"Attach a file"}});Uploader.contextTypes={intl:_reactIntl.intlShape.isRequired},module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/html5uploader.jsx":"./atoms/html5uploader","../styles/uploader":"./molecules/compose/styles/uploader","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],144:[function(require,module,exports){
"use strict";function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactIntl=require("react-intl"),_difference=require("lodash/difference"),_difference2=_interopRequireDefault(_difference),_header=require("./header.jsx"),_header2=_interopRequireDefault(_header),_editor=require("./atoms/editor.jsx"),_editor2=_interopRequireDefault(_editor),_dragdrop_overlay=require("./atoms/dragdrop_overlay.jsx"),_dragdrop_overlay2=_interopRequireDefault(_dragdrop_overlay),_toolbar=require("./atoms/toolbar.jsx"),_toolbar2=_interopRequireDefault(_toolbar),_attachment_tray=require("../../molecules/attachment_tray"),_attachment_tray2=_interopRequireDefault(_attachment_tray),_invariant=require("../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_alert=require("../../atoms/dialog/alert.jsx"),_alert2=_interopRequireDefault(_alert),_dual_action=require("../../atoms/dialog/dual_action.jsx"),_dual_action2=_interopRequireDefault(_dual_action),_before_route_change=require("../../apps/mail/molecules/before_route_change.jsx"),_before_route_change2=_interopRequireDefault(_before_route_change),_index=require("../../platform/mail_constants/index"),_actions=require("./actions"),ComposeActions=_interopRequireWildcard(_actions),_actions2=require("../attachment_tray/actions"),AttachmentTrayActions=_interopRequireWildcard(_actions2),_actions3=require("../gif/actions"),GifActions=_interopRequireWildcard(_actions3),_actions4=require("../emoji_picker/actions"),EmojiActions=_interopRequireWildcard(_actions4),_constants=require("./constants"),_mail_error=require("../../platform/mail_error"),_mail_error2=_interopRequireDefault(_mail_error),_mail_constants=require("../../platform/mail_constants"),_message_quote_finder=require("../../platform/utils/message_quote_finder"),_captcha=require("./atoms/captcha.jsx"),_captcha2=_interopRequireDefault(_captcha),_utils=require("./utils/utils"),Utils=_interopRequireWildcard(_utils),_object=require("../../platform/utils/object"),_utils2=require("../../platform/utils"),_route=require("../../platform/utils/route"),_xss_filters=require("../../platform/utils/xss_filters"),_constants2=require("../../platform/rapid_client/constants"),_lazy_component=require("../../atoms/lazy_component"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_compose=require("./styles/compose"),_compose2=_interopRequireDefault(_compose),_settings=require("../../actions/settings"),_throttle=require("lodash/throttle"),_throttle2=_interopRequireDefault(_throttle),_debounce=require("lodash/debounce"),_debounce2=_interopRequireDefault(_debounce),_isEqual=require("lodash/isEqual"),_isEqual2=_interopRequireDefault(_isEqual),Status=_mail_constants.Draft.Status,MAXIMUM_SUPPORTED_FILE_SIZE_MB=25,MAXIMUM_SUPPORTED_FILE_SIZE_B=26214400,RESIZE_THROTTLE_DURATION=40,TYPING_DEBOUNCE_DURATION=500,ComposeModes=_mail_constants.Compose.Modes,strings=(0,_reactIntl.defineMessages)({error_title:{id:"compose.error_title",defaultMessage:"Error"},bigAttachment:{id:"compose.too_big_attachment",defaultMessage:"The file exceeds the {maxFileSize} attachment limit. Large attachment support coming soon!"},compose_view:{id:"compose.view_aria_label",defaultMessage:"Compose view"},message_body:{id:"compose.message_body",defaultMessage:"Message body"},quoted_draft:{id:"quoted_draft",defaultMessage:"On {date}, {quotedName} &lt;{quotedAddress}&gt; wrote:"},forwarded_message:{id:"forwarded_message",defaultMessage:"Forwarded Message"},quoted_message_from:{id:"quoted_message_from",defaultMessage:"<b>From:</b> {from}"},quoted_message_to:{id:"quoted_message_to",defaultMessage:"<b>To:</b> {to}"},quoted_message_cc:{id:"quoted_message_cc",defaultMessage:"<b>Cc:</b> {cc}"},quoted_message_subject:{id:"quoted_message_subject",defaultMessage:"<b>Subject:</b> {subject}"},quoted_message_sentdate:{id:"quoted_message_sentdate",defaultMessage:"<b>Sent:</b> {sentDate}"},beingUploadedAlert:{id:"being_uploaded_alert",defaultMessage:"Attachment is still being uploaded. Wait and send?"},beingUploadedAlertOK:{id:"compose.beingUploadedAlert.ok",defaultMessage:"OK"},beingUploadedAlertSendWithout:{id:"compose.beingUploadedAlert.send_without",defaultMessage:"Send Without"}}),NOOP=function(){},HTML_EMPTY_LINE="<div><br/></div>",addressHTMLString=Utils.addressHTMLString,classNames=(0,_css2.default)(_compose2.default),Compose=_react2.default.createClass({displayName:"Compose",contextTypes:{executeAction:_react.PropTypes.func,intl:_reactIntl.intlShape.isRequired,config:_react.PropTypes.object,navigateTo:_react.PropTypes.func},getUnsavedData:function(){return{userInputtedValues:this.userInputtedValues}},getDefaultProps:function(){return{autoSuggestions:{},isXobnified:!1,simpleCompose:!1,dateFormattingOption:0,showFrom:!1,showCloseButton:!0,showDeleteButton:!0,styles:{},initialShowSubject:!1,onContentChanged:NOOP,toolbarFixed:!1,onResize:NOOP,isBccDisabled:!1,isSubjectEditingDisabled:!1,onContactAdd:function(){},onContactRemove:function(){},onMultipleContactsAdd:function(){}}},getStateFromComposeData:function(t){return{formatState:{},from:Utils.getFromAddress(this.props.accounts,(t.initialFrom[0]||{}).email),to:Utils.makeArray(t.initialTo),cc:Utils.makeArray(t.initialCc),bcc:Utils.makeArray(t.initialBcc),subject:t.initialSubject,initialFocus:Utils.getInitialFocusRef(t)}},updateDraftSubjectAction:function(t,e){this.context.executeAction(ComposeActions.updateDraftSubject,{csid:t,subject:e})},draftEditedAction:function(){this.context.executeAction(ComposeActions.draftEdited)},getInitialState:function(){var t=this.props.composeData.composeMode;return this.debouncedUpdateDraftSubjectAction=(0,_debounce2.default)(this.updateDraftSubjectAction,TYPING_DEBOUNCE_DURATION),this.debouncedDraftEditedAction=(0,_debounce2.default)(this.draftEditedAction,TYPING_DEBOUNCE_DURATION),Object.assign({imgHoverMenuVisible:!1,largeAttachmentAlert:!1,imageBeingUploadedAlert:!1,stationeryTheme:"",composeWidth:null,composeLeft:null,showSubject:this.props.initialShowSubject||t!==ComposeModes.EDIT&&t!==ComposeModes.REPLY&&t!==ComposeModes.REPLY_ALL||t===ComposeModes.EDIT&&!this.props.isSubjectEditingDisabled},this.getStateFromComposeData(this.props.composeData))},componentWillReceiveProps:function(t){if(this.props.composeData.composeMode!==t.composeData.composeMode){var e=t.composeData.composeMode;this.setState({subject:t.composeData.initialSubject,to:Utils.makeArray(t.composeData.initialTo),cc:Utils.makeArray(t.composeData.initialCc),bcc:Utils.makeArray(t.composeData.initialBcc),showSubject:e!==ComposeModes.EDIT&&e!==ComposeModes.REPLY&&e!==ComposeModes.REPLY_ALL||e===ComposeModes.EDIT&&!this.props.isSubjectEditingDisabled})}},componentDidMount:function(){var t=this.props.composeData,e=t.attachFiles,o=void 0===e?[]:e,i=t.focusSubject,s=t.csid;this.context.executeAction(ComposeActions.checkUserIsXobnified),this.props.saveInterval>0&&(this.saveInterval=setInterval(this.autoSaveDraft,this.props.saveInterval)),o.length>0&&this.addInlineAttachments(o),this._updateWidth(),this._handleWindowResize=(0,_throttle2.default)(this._handleWindowResize,RESIZE_THROTTLE_DURATION),window.addEventListener("resize",this._handleWindowResize),i&&this.context.executeAction(ComposeActions.subjectFocused,{csid:s})},componentDidUpdate:function(t){t.hasAttachmentPreview!==this.props.hasAttachmentPreview&&this._handleWindowResize();var e=this.props.composeData,o=e.draftStatus,i=e.csid,s=t.composeData;i===s.csid&&o===Status.SENT&&s.draftStatus!==o&&this.props.onSendSuccess&&this.props.onSendSuccess(this.props.composeData)},componentWillUnmount:function(){this.debouncedUpdateDraftSubjectAction.cancel(),this.debouncedDraftEditedAction.cancel(),clearInterval(this.saveInterval),window.removeEventListener("resize",this._handleWindowResize),this.saveDraft()},_updateWidth:function(){var t=(0,_reactDom.findDOMNode)(this.refs.container),e=t&&t.getBoundingClientRect();e&&this.setState({composeWidth:e.width,composeLeft:e.left})},_handleWindowResize:function(){this._updateWidth(),this.props.onResize()},setEditState:function(t){var e=this.props.composeData,o=e.draftStatus,i=e.csid;o!==Status.EDITED&&t&&this.context.executeAction(ComposeActions.updateDraftEditState,{csid:i}),this.debouncedDraftEditedAction()},handleDragContactAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments[2],i=o.side,s=void 0===i?"other":i,n=o.id,a=this.state[t],r=a.filter(function(t){return!e.find(function(e){return(0,_isEqual2.default)(t,e)})}),c={left:0,right:1,other:a.length+1}[s],d=Math.max(0,r.findIndex(function(t){return t.id===n})+c);this.addContact(t,r.slice(0,d).concat(e).concat(r.slice(d)))},handleContactAdd:function(t,e){if(Array.isArray(e))return this.handleMultipleContactsAdd(t,e);if(e.hasOwnProperty("list"))return this.handleMultipleContactsAdd(t,e.list);var o=this.state[t];o.indexOf(e)===-1&&o.push(e),this.addContact(t,o),this.props.onContactAdd(e)},addContact:function(t,e){var o={};o[t]=e,this.setState(o,function(){this.setEditState(!0)});var i=this.props.composeData.csid,s=this.getAllRecipients(Object.assign({},this.state,o));this.requestSuggestions({recipientList:s,query:""}),this.context.executeAction(ComposeActions.addRecipient,{csid:i,i13nModel:{mKey:_constants2.MKEYS.SELECT_CONTACT,sec:_constants2.SEC_VALUES.COMPOSE_CONTACTS}})},handleMultipleContactsAdd:function(t,e){var o=this.state[t],i={};i[t]=o.concat(e),this.setState(i,function(){this.setEditState(!0)}),this.props.onMultipleContactsAdd(e)},handleContactRemove:function(t,e,o){var i=this,s=this.state[t],n={};o?(e.forEach(function(t){var e=s.findIndex(function(e){return(0,_isEqual2.default)(t,e)});s.splice(e,1)}),n[t]=s):n[t]=(0,_difference2.default)(s,e),this.setState(n,function(){i.setEditState(!0)});var a=this.getAllRecipients(Object.assign({},this.state,n));this.requestSuggestions({recipientList:a,query:""}),this.props.onContactRemove(e)},getAllRecipients:function(t){return["to","cc","bcc"].map(function(e){return t[e]}).reduce(function(t,e){return t.concat(e.map(function(t){var e=t.email;return e}))},[]).filter(function(t){return(0,_utils2.isValidEmail)(t)})},requestSuggestions:function(t){var e=t.recipientList,o=t.query,i=this.props.composeData.csid,s=this.state.from.email;this.context.executeAction(ComposeActions.fetchSuggestions,{i13nModel:{mKey:_constants2.MKEYS.CONTACT_SUGGEST,sec:_constants2.SEC_VALUES.COMPOSE_CONTACTS},contextFrom:s,csid:i,recipientList:e,query:o})},handleSuggestionRequested:function(t){var e=this.props.composeData.csid;if(!this.props.isXobnified)return void this.context.executeAction(ComposeActions.clearSuggestions,{csid:e});var o=this.getAllRecipients(this.state);this.requestSuggestions({recipientList:o,query:t})},handleFromChange:function(t){var e=this;this.setState({from:t},function(){e.setEditState(!0)})},handleSubjectChange:function(t){var e=this,o=this.props.composeData.csid;this.setState({subject:t},function(){return e.debouncedUpdateDraftSubjectAction(o,t)})},handleEditSubject:function(){var t=this.props.composeData.csid;this.userInputtedValues=this._getUserInputtedValues(this.state),this.context.navigateTo({route:(0,_route.buildComposeRouteFromCsid)(t)})},handleEditorContentChange:function(t){var e=t.format,o=t.caret,i=t.type;(0,_object.shallowEqual)(this.state.formatState,e)||this.setState({formatState:e}),this.setEditState(!0),this.props.onContentChanged({caret:o,type:i})},_getUserInputtedValues:function(t){var e='<html><head></head><body><div style="font-family:'+this.props.composeFontFamily.replace(/"/g,"")+";font-size:"+Utils.getFontSizeStyle(this.props.composeFontSize)+';">'+this.refs.editor.getSanitizedContent()+"</div></body></html>";return{from:t.from,to:t.to,cc:t.cc,bcc:t.bcc,subject:t.subject,html:e}},_save:function(t){var e=this.props,o=e.composeData,i=e.mailboxId,s=e.accounts,n=o.draftStatus;this.refs.editor&&n===Status.EDITED&&(this.props.onSaveExecuteAction||this.context.executeAction).call(this,t,{csid:o.csid,mailboxId:i,accounts:s,userInputtedValues:this._getUserInputtedValues(this.state)})},saveDraft:function(){return this._save(ComposeActions.saveDraft)},autoSaveDraft:function(){return this._save(ComposeActions.autoSaveDraft)},deleteDraft:function(){var t=this.props.composeData,e=t.csid,o=t.draftStatus,i=t.lastSavedMessageId;this.context.executeAction(ComposeActions.deleteDraft,{listId:this.props.listId,csid:e,draftStatus:o,messageId:i,i13nModel:{mKey:_constants2.MKEYS.DELETE_DRAFT,sec:_constants2.SEC_VALUES.COMPOSE_TOOLBAR,interactionType:_constants2.INTERACTION_TYPES.click,mKeyGroup:_constants2.MKEY_GROUPS.delete}})},send:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.i13nModel,i=e.captchaAnswer,s=e.forcedSend,n=void 0!==s&&s,a=this.props.composeData,r=a.attachments,c=void 0===r?[]:r,d=a.csid,l=[],u=[],h=function(){(t.props.onSendExecuteAction||t.context.executeAction).call(t,ComposeActions.send,{captchaAnswer:i,accounts:t.props.accounts,csid:d,mailboxId:t.props.mailboxId,userInputtedValues:t._getUserInputtedValues(t.state),i13nModel:_extends({mKey:_constants2.MKEYS.SEND,sec:_constants2.SEC_VALUES.COMPOSE_TOOLBAR,mKeyGroup:_constants2.MKEY_GROUPS.send},o)})};return c.forEach(function(t){t.state===_index.RecordStates.LOADING?l.push(t):t.state===_index.RecordStates.ERROR&&u.push(t)}),!n&&l.length?void this.setState({imageBeingUploadedAlert:!0}):((n||u.length)&&(this.refs.editor.removeNonloadedAttachments(),this.context.executeAction(ComposeActions.removeNonloadedAttachments,{csid:d})),void h())},execEditorCommand:function(t,e){"plaintext"===t&&(this.execEditorCommand(_constants.ToolbarActions.UPDATE_STATIONERY,null),this.refs.editor.expandQuote()),t===_constants.ToolbarActions.UPDATE_STATIONERY&&this.setState({stationeryTheme:e?e.themeName:""}),this.refs.editor.rte.focus(),this.refs.editor.rte.pushButton(t,e)},handleToolbarAction:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.data,i=e.i13nModel;switch(i&&this.context.executeAction(ComposeActions.handleToolbarActions,e),t){case _constants.ToolbarActions.FILE_SELECT:this.addFileAttachments(o);break;case _constants.ToolbarActions.SEND:this.send();break;case _constants.ToolbarActions.DELETE_DRAFT:this.deleteDraft();break;case _constants.ToolbarActions.CREATE_LINK:this.execEditorCommand(t,"");break;default:this.execEditorCommand(t,o)}},_handleStationeryDefaultThemeChange:function(t){this.context.executeAction(_settings.updateStationeryDefaultTheme,t)},handleClose:function(){this.props.onClose&&this.props.onClose(),this.context.executeAction(ComposeActions.close,{i13nModel:{mKey:_constants2.MKEYS.CANCEL_COMPOSE,sec:_constants2.SEC_VALUES.COMPOSE_CLOSE,interactionType:_constants2.INTERACTION_TYPES.click}})},handleDrop:function(t){this.addInlineAttachments(t)},addAttachments:function(t,e,o){var i=o.i13nModel;this.checkAttachmentSize(t)&&(this.context.executeAction(e,{files:t,csid:this.props.composeData.csid,i13nModel:Object.assign({interactionType:_constants2.INTERACTION_TYPES.click},i)}),setTimeout(this.saveDraft,0))},addInlineAttachments:function(t){this.addAttachments(t,ComposeActions.addInlineAttachment,{i13nModel:{mKey:_constants2.MKEYS.COMPOSE_DRAG_ATTACHMENT,sec:_constants2.SEC_VALUES.COMPOSE_MSG}})},addGIF:function(t){this.context.executeAction(GifActions.addGifToBody,{gif:t,csid:this.props.composeData.csid,i13nModel:{mKey:_constants2.MKEYS.GIF_ADD,sec:_constants2.SEC_VALUES.RTE_TOOLBAR,interactionType:_constants2.INTERACTION_TYPES.click}})},addEmoji:function(t){this.context.executeAction(EmojiActions.addEmojiToBody,{emoji:t,csid:this.props.composeData.csid,i13nModel:{mKey:_constants2.MKEYS.EMOJI_ADD,sec:_constants2.SEC_VALUES.RTE_TOOLBAR,interactionType:_constants2.INTERACTION_TYPES.click,actionData:{emoji:t.source}}})},inlinedPermanentUrlImgAdded:function(){this.context.executeAction(ComposeActions.inlinedPermanentUrlImgAdded,{csid:this.props.composeData.csid})},inlinedEmojiAdded:function(){this.context.executeAction(EmojiActions.inlinedEmojiAdded,{csid:this.props.composeData.csid})},checkAttachmentSize:function(t){var e=t.concat(this.props.composeData.attachments);return!(MAXIMUM_SUPPORTED_FILE_SIZE_B<this.getAttachmentSize(e))||(this.setState({largeAttachmentAlert:!0}),!1)},getAttachmentSize:function(t){return t.length?t.reduce(function(t,e){return t+=e.size},0):0},renderLargeAttachmentAlert:function(){if(!this.state.largeAttachmentAlert)return null;var t=this.context.intl.formatMessage(strings.bigAttachment,{maxFileSize:MAXIMUM_SUPPORTED_FILE_SIZE_MB+"MB"});return _react2.default.createElement(_alert2.default,{title:this.context.intl.formatMessage(strings.error_title),message:t,onAccept:this.hideLargeAttachmentAlert,hideIcon:!0})},renderAttachmentBeingUploadedAlert:function(){var t=this;if(this.state.imageBeingUploadedAlert)return _react2.default.createElement(_dual_action2.default,{title:this.context.intl.formatMessage(strings.beingUploadedAlert),primaryButtonLabel:strings.beingUploadedAlertOK,secondaryButtonLabel:strings.beingUploadedAlertSendWithout,onPrimaryButtonClick:function(){return t._closeBeingUploadedAlert(!1)},onSecondaryButtonClick:function(){return t._closeBeingUploadedAlert(!0)},onClose:function(){return t._closeBeingUploadedAlert(!1)},hideIcon:!0})},_closeBeingUploadedAlert:function(t){this.setState({imageBeingUploadedAlert:!1}),t&&this.send({forcedSend:t})},hideLargeAttachmentAlert:function(){this.setState({largeAttachmentAlert:!1})},moveImageAttachmentInline:function(t){this.context.executeAction(ComposeActions.moveImageAttachmentInline,{csid:this.props.composeData.csid,contentId:t.contentId})},addFileAttachments:function(t){var e=this;this.addAttachments(t,AttachmentTrayActions.addAttachment,{i13nModel:{mKey:_constants2.MKEYS.COMPOSE_ADD_ATTACHMENT,sec:_constants2.SEC_VALUES.COMPOSE_TOOLBAR}}),setTimeout(function(){var t=(0,_reactDom.findDOMNode)(e._attachmentTray);t&&t.scrollIntoView()},0)},handleAttachmentRemoval:function(t){this.context.executeAction(AttachmentTrayActions.removeAttachment,{contentId:t.contentId,csid:this.props.composeData.csid}),setTimeout(this.saveDraft,0)},handleInlineAttachmentRemoval:function(t){this.context.executeAction(ComposeActions.removeInlineAttachment,{csid:this.props.composeData.csid,dataId:t}),setTimeout(this.saveDraft,0)},moveInlineAttachmentToTray:function(t,e,o){this.context.executeAction(ComposeActions.moveInlineAttachmentToTray,{csid:this.props.composeData.csid,isNewCompose:t,dataId:e,pid:o})},handleInlineImgFailure:function(t){this.context.executeAction(ComposeActions.handleInlineImgFailure,_extends({},t,{csid:this.props.composeData.csid}))},handleAttachmentTray:function(t){var e=this,o=document.createElement("input");o.type="file",o.multiple=!0,o.id="inputFile",o.click(),o.addEventListener("change",function(o){var i=Array.prototype.slice.call(o.target.files);e.handleAttachmentTrayAdd(i,t)})},handleAttachmentTrayAdd:function(t,e){this.context.executeAction(AttachmentTrayActions.addAttachment,{files:t,csid:e,i13nModel:{mKey:_constants2.MKEYS.COMPOSE_ADD_ATTACHMENT,sec:_constants2.SEC_VALUES.COMPOSE_TOOLBAR,interactionType:_constants2.INTERACTION_TYPES.shortcut}})},renderCaptcha:function(){var t=this.props.composeData,e=t.captcha;if(t.draftStatus!==Status.CAPTCHAING)return null;var o=e.captchaPayload.createResponse.Content;return(0,_invariant2.default)("invisible"===o.Mode,"only 'invisible' captcha\n                mode is supported. mode: "+o.Mode),_react2.default.createElement(_captcha2.default,{onComplete:this.handleCaptchaComplete,script:o.Javascript.CONTENT,markup:o.Turnkey})},renderEmojiPreloader:function(){return _react2.default.createElement(_lazy_component.LazyComponent,{import:"../emoji_picker/emoji_preloader.jsx",_moduleGetter:function(){return require("../emoji_picker/emoji_preloader.jsx")}})},handleCaptchaComplete:function(t){this.send({captchaAnswer:t})},onMoreMenuClick:function(){var t={mKey:_constants2.MKEYS.COMPOSE_OPEN_MORE_MENU,sec:_constants2.SEC_VALUES.RTE_TOOLBAR};this.context.executeAction(ComposeActions.showMoreMenu,{i13nModel:t})},handleKeyDown:function(t){var e=t.metaKey||t.ctrlKey,o="Unidentified"===t.key?String.fromCharCode(t.which):t.key;switch(o.toUpperCase()){case"ENTER":e&&(this.send({i13nModel:{interactionType:_constants2.INTERACTION_TYPES.shortcut}}),t.preventDefault());break;case"S":e&&(this.saveDraft(),t.preventDefault())}},focusOnEditor:function(){this.refs.editor.rte.focus()},formatQuotedDate:function(t,e){var o=Object.assign({timeZone:e},_constants.FORMAT_DATE_OPTION);return this.context.intl.formatDate(1e3*t,o)},getContent:function(){var t=this.props,e=t.composeData,o=t.dateFormattingOption,i=this.context.intl.formatMessage,s=void 0;if(e.draftStatus!==Status.INIT)return e.initialBody.content;var n=this.formatQuotedDate(e.originalSentDate,o.timezone);switch(e.composeMode){case ComposeModes.REPLY:case ComposeModes.REPLY_ALL:var a=e.initialBody,r=a.quotedName,c=a.quotedAddress,d=a.quote,l=e.htmlAnnotations[0].divIds[0];s=["<div>"+e.initialBody.content+"</div>",HTML_EMPTY_LINE,'<div id="'+(0,_xss_filters.inDoubleQuotedAttr)(l)+'" class="'+_message_quote_finder.DEFAULT_QUOTE_CLASS+'">',"<div>"+(0,_xss_filters.inHTMLData)(i(strings.quoted_draft,{date:n,quotedName:r,quotedAddress:c}))+"</div>","<div>"+d+"</div>","</div>"].join("");break;case ComposeModes.SPONSORED_FORWARD:s=HTML_EMPTY_LINE+"\n                "+HTML_EMPTY_LINE+"\n                "+HTML_EMPTY_LINE+"\n                <div>----- "+i(strings.forwarded_message)+" -----</div>\n                "+HTML_EMPTY_LINE+"\n                <div>"+e.initialBody.content+"</div>";break;case ComposeModes.FORWARD:var u=e.htmlAnnotations[0].divIds[0],h=[];e.originalFrom&&e.originalFrom.length&&(h.push("<div>"+i(strings.quoted_message_from,{from:(0,_xss_filters.inHTMLData)(addressHTMLString(e.originalFrom[0]))})+"</div>"),e.originalTo.length&&h.push("<div>"+i(strings.quoted_message_to,{to:(0,_xss_filters.inHTMLData)(e.originalTo.map(function(t){return addressHTMLString(t)}).join("; "))})+"</div>"),e.originalCc.length&&h.push("<div>"+i(strings.quoted_message_cc,{cc:(0,_xss_filters.inHTMLData)(e.originalCc.map(function(t){return addressHTMLString(t)}).join("; "))})+"</div>"),h.push("<div>"+i(strings.quoted_message_sentdate,{sentDate:n})+"</div>","<div>"+i(strings.quoted_message_subject,{subject:(0,_xss_filters.inHTMLData)(e.originalSubject)})+"</div>",HTML_EMPTY_LINE,"<div>"+e.initialBody.quote+"</div>")),s=["<div>"+e.initialBody.content+"</div>",HTML_EMPTY_LINE,'<div id="'+(0,_xss_filters.inDoubleQuotedAttr)(u)+'" class="'+_message_quote_finder.DEFAULT_QUOTE_CLASS+'">',HTML_EMPTY_LINE,HTML_EMPTY_LINE,"<div>----- "+i(strings.forwarded_message)+" -----</div>",h.join(""),"</div>"].join("");break;default:s=e.initialBody.content}return s},render:function(){var t=this,e=this.props,o=e.composeData,i=e.composeGIF,s=e.composeFontFamily,n=e.composeFontSize,a=e.showFrom,r=e.showCloseButton,c=e.showStationeryCue,d=e.showHSStationeryCue,l=e.stationeryDefaultTheme,u=e.accounts,h=e.toolbarFixed,m=e.uploadEnabled,_=e.simpleCompose,p=e.isBccDisabled,f=e.isSubjectEditingDisabled,A=e.encryptDecryptButton,g=e.secureRecipientsKeys,E=e.validateSecureRecipients,S=e.linkEnhancer,T=this.context.config,C=T.emoji,D=T.preloadEmoji,v=T.gif,b=T.stationery,M=o.composeMode,I=o.draftStatus,y=o.lastSavedTime||0,R=this.context.intl.formatMessage,x=this.getContent(),O=this.props.autoSuggestions[o.csid]||[],q=M===ComposeModes.FORWARD||!this.context.config.conversations,L=I!==Status.SENDING,j=this.state,U=j.to,N=j.cc;return g&&(U=Utils.mergeRecipientsSecureStatus(U,g,E),N=Utils.mergeRecipientsSecureStatus(N,g,E)),_react2.default.createElement(_before_route_change2.default,{getUnsavedData:this.getUnsavedData},_react2.default.createElement("div",{"data-test-id":"compose",role:"main","aria-label":R(strings.compose_view),ref:"container",className:classNames.compose,onKeyDown:this.handleKeyDown},D?this.renderEmojiPreloader():null,this.renderCaptcha(),this.renderLargeAttachmentAlert(),this.renderAttachmentBeingUploadedAlert(),_react2.default.createElement(_header2.default,{ref:"header",composeMode:M,onFromChange:this.handleFromChange,onContactAdd:this.handleContactAdd,onDragContactAdd:this.handleDragContactAdd,onContactRemove:this.handleContactRemove,onSubjectChange:this.handleSubjectChange,onEditSubject:this.handleEditSubject,onSuggestionRequested:this.handleSuggestionRequested,onClose:this.handleClose,autoSuggestions:O,showSubject:this.state.showSubject,showFrom:a,showCloseButton:r,from:this.state.from,to:U,cc:N,bcc:this.state.bcc,subject:this.state.subject,csid:o.csid,accounts:u,initialFocus:this.state.initialFocus,isBccDisabled:p,isSubjectEditingDisabled:f,handleMultipleContactsAdd:this.handleMultipleContactsAdd}),A,_react2.default.createElement(_dragdrop_overlay2.default,{onDrop:this.handleDrop},_react2.default.createElement("div",{className:classNames.editorContainer,ref:"editorContainer","data-test-id":"compose-editor-container"},_react2.default.createElement(_editor2.default,{ref:_constants.FocusableRefs.EDITOR,ariaLabel:R(strings.message_body),contentEditable:L,onContentChange:this.handleEditorContentChange,onKeyDown:this.handleEditorKeyDown,csid:o.csid,composeFontFamily:s,composeFontSize:n,initialFocus:this.state.initialFocus===_constants.FocusableRefs.EDITOR,content:x,htmlAnnotations:o.htmlAnnotations,attachments:o.attachments,onImagePaste:this.addInlineAttachments,onImageRemove:this.handleInlineAttachmentRemoval,scrollableAreaRef:this.refs.editorContainer,onSendAsAttachment:this.moveInlineAttachmentToTray,onAttachmentShortcut:this.handleAttachmentTray,stationeryTheme:this.state.stationeryTheme,onStationeryThemeChange:this.handleToolbarAction.bind(this,_constants.ToolbarActions.UPDATE_STATIONERY),onStationeryDefaultThemeChange:this._handleStationeryDefaultThemeChange,autoExpandQuotedText:q,inlinedEmojiAdded:this.inlinedEmojiAdded,linkEnhancer:S,inlinedPermanentUrlImgAdded:this.inlinedPermanentUrlImgAdded,handleInlineImgFailure:this.handleInlineImgFailure}),o.attachments.filter(function(t){return!t.fromGifPicker}).length?_react2.default.createElement(_attachment_tray2.default,{ref:function(e){return t._attachmentTray=e},attachments:o.attachments,onAttachmentRemove:this.handleAttachmentRemoval,readOnly:!1,allowDownload:!1,onSendAsInlineImage:this.moveImageAttachmentInline}):null),_react2.default.createElement(_toolbar2.default,{ref:"toolbar",draftStatus:o.draftStatus,showDeleteButton:!_,lastDraftSavedTime:y,formatState:this.state.formatState,onExecuteAction:this.handleToolbarAction,uploadEnabled:m,focusOnEditor:this.focusOnEditor,fixed:h,width:this.state.composeWidth,left:this.state.composeLeft,showStationeryCue:c&&o.composeMode===ComposeModes.NEW,showHSStationeryCue:d,stationeryDefaultTheme:l,stationeryTheme:this.state.stationeryTheme,stationeryEnabled:b,gifFinderEnabled:v,composeGIF:i,addGIF:this.addGIF,addEmoji:this.addEmoji,onMoreMenuClick:this.onMoreMenuClick,emojiEnabled:C}))))}});exports.default=Compose,module.exports=exports.default;
},{"../../actions/settings":"./actions/settings","../../apps/mail/molecules/before_route_change.jsx":"./apps/mail/molecules/before_route_change","../../atoms/dialog/alert.jsx":"./atoms/dialog/alert","../../atoms/dialog/dual_action.jsx":"./atoms/dialog/dual_action","../../atoms/lazy_component":"./atoms/lazy_component","../../molecules/attachment_tray":123,"../../platform/invariant":"./platform/invariant","../../platform/mail_constants":"./platform/mail_constants","../../platform/mail_constants/index":"./platform/mail_constants","../../platform/mail_error":"./platform/mail_error","../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../platform/utils":"./platform/utils","../../platform/utils/message_quote_finder":"./platform/utils/message_quote_finder","../../platform/utils/object":"./platform/utils/object","../../platform/utils/route":"./platform/utils/route","../../platform/utils/xss_filters":317,"../attachment_tray/actions":"./molecules/attachment_tray/actions","../emoji_picker/actions":"./molecules/emoji_picker/actions","../emoji_picker/emoji_preloader.jsx":"./molecules/emoji_picker/emoji_preloader","../gif/actions":"./molecules/gif/actions","./actions":"./molecules/compose/actions","./atoms/captcha.jsx":140,"./atoms/dragdrop_overlay.jsx":141,"./atoms/editor.jsx":"./molecules/compose/atoms/editor","./atoms/toolbar.jsx":"./molecules/compose/atoms/toolbar","./constants":"./molecules/compose/constants","./header.jsx":146,"./styles/compose":152,"./utils/utils":"./molecules/compose/utils/utils","lodash/debounce":"./node_modules/lodash/debounce.js","lodash/difference":"./node_modules/lodash/difference.js","lodash/isEqual":"./node_modules/lodash/isEqual.js","lodash/throttle":"./node_modules/lodash/throttle.js","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-dom":"./node_modules/react-dom/index.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/compose/constants":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.COMPOSE_MIN_WIDTH=exports.INLINE_IMAGE_PLUGIN_SIZE=exports.INLINE_IMAGE_PLUGIN_CLASSES=exports.RTEHoverOverlayTypes=exports.CURRENT_IMAGE_SIZE_STATUS=exports.FORMAT_DATE_OPTION=exports.HORIZONTAL_PADDING=exports.TOOLBAR_HEIGHT=exports.ToolbarTypes=exports.EditorTypes=exports.RTEKeyModifier=exports.KeyCodes=exports.FocusableRefs=exports.ToolbarActions=exports.FontSizes=exports.Fonts=void 0;var _object=require("../../platform/utils/object"),_compose=require("../../platform/mail_constants/compose"),Fonts=exports.Fonts=_compose.Fonts,FontSizes=exports.FontSizes=_compose.FontSizes,ToolbarActions=exports.ToolbarActions={FILE_SELECT:"fileselect",SEND:"send",DELETE_DRAFT:"delete_draft",UPDATE_STATIONERY:"update_stationery",CREATE_LINK:"createlink"},FocusableRefs=exports.FocusableRefs={EDITOR:"editor",FROM:"from",TO:"to",SUBJECT:"subject",CC:"cc",BCC:"bcc"},KeyCodes=exports.KeyCodes={SEMICOLON:59,FF_SEMICOLON:186,FF_COMMA:188,COMMA:44,BREAK:13,SPACE:32,TAB:9},RTEKeyModifier=exports.RTEKeyModifier={NO_MODIFIER:1,ALT:1,SHIFT:2,SPECIAL:4,NONSPECIAL:8},EditorTypes=exports.EditorTypes=(0,_object.mirrorKeys)(["MESSAGE","COMPOSE"]),ToolbarTypes=exports.ToolbarTypes=(0,_object.mirrorKeys)(["MESSAGE","COMPOSE"]),TOOLBAR_HEIGHT=exports.TOOLBAR_HEIGHT=70,HORIZONTAL_PADDING=exports.HORIZONTAL_PADDING=72,FORMAT_DATE_OPTION=exports.FORMAT_DATE_OPTION={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"},CURRENT_IMAGE_SIZE_STATUS=exports.CURRENT_IMAGE_SIZE_STATUS=(0,_object.mirrorKeys)(["LARGE","SMALL"]),RTEHoverOverlayTypes=exports.RTEHoverOverlayTypes=(0,_object.mirrorKeys)(["IMAGE","LINK_ENHANCER_CARD"]),INLINE_IMAGE_PLUGIN_CLASSES=exports.INLINE_IMAGE_PLUGIN_CLASSES={UPLOADING_CLASS:"rte-inline-img-uploading",GIF_WRAPPER_CLASS:"gif-wrapper",INLINE_IMAGE_CLASS:"inline-image",IMAGE_OVERLAY_CLASS:"inline-img-overlay",ONLINE_GIF_CLASS:"online-gif",EMOJI_WRAPPER_CLASS:"emoji-wrapper",IGNORE_CLASS:"yahoo-ignore-inline-image"},INLINE_IMAGE_PLUGIN_SIZE=exports.INLINE_IMAGE_PLUGIN_SIZE={IMAGE_SMALL_WIDTH:400,IMAGE_BIG_WIDTH:800,IMAGE_BIG_PERCENTAGE:"100%",IMAGE_SMALL_PERCENTAGE:"50%"},COMPOSE_MIN_WIDTH=exports.COMPOSE_MIN_WIDTH=670;
},{"../../platform/mail_constants/compose":"./platform/mail_constants/compose","../../platform/utils/object":"./platform/utils/object"}],145:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function handleErrorRetry(){var e=this.props,r=e.listId,t=e.cardId;this.context.executeAction(MessageActions.getMessageBodies,{listId:r,messageIds:[t]})}function renderWithRetry(){return _react2.default.createElement("span",{className:classNames.errorWrapper},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.EXCLAMATION_ALT,size:_fuji_icon3.Sizes.S,colorState:_fuji_icon3.ColorStates.COOL_FAINT}),_react2.default.createElement("span",{"data-test-id":"compose-app-error",className:classNames.errorMessage},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.draft_error_message_retry",defaultMessage:"We couldn't load this draft. {retry}",values:{retry:_react2.default.createElement("a",{className:classNames.emptyBodyRetry,onClick:handleErrorRetry,"data-test-id":"body-error-retry"},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.retry_message",defaultMessage:"Retry!"}))}})))}function renderWithoutRetry(){return _react2.default.createElement("span",{className:classNames.errorWrapper},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.EXCLAMATION_ALT,size:_fuji_icon3.Sizes.S,colorState:_fuji_icon3.ColorStates.COOL_FAINT}),_react2.default.createElement("span",{"data-test-id":"compose-app-error",className:classNames.errorMessage},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.draft_error_message_noretry",defaultMessage:"We couldn't load this draft."})))}function renderHeader(e){return _react2.default.createElement(_header2.default,{message:e,expanded:!0,expandable:!1})}function ComposeError(e){var r=e.listId,t=e.cardId,a=e.message;return _react2.default.createElement("div",{"data-test-id":"compose",className:classNames.errorContainer},a?renderHeader(a):null,r&&t?renderWithRetry():renderWithoutRetry())}exports.__esModule=!0,exports.default=ComposeError;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_error=require("./styles/error"),_error2=_interopRequireDefault(_error),_fuji_icon=require("../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_message=require("../../actions/message"),MessageActions=_interopRequireWildcard(_message),_fuji_icon3=require("../../atoms/constants/fuji_icon"),_header=require("../message_card/atoms/header.jsx"),_header2=_interopRequireDefault(_header),_types=require("../../types"),classNames=(0,_css2.default)(_error2.default);module.exports=exports.default;
},{"../../actions/message":"./actions/message","../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../types":"./types","../message_card/atoms/header.jsx":201,"./styles/error":154,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],146:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.strings=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_types=require("../../types"),_reactIntl=require("react-intl"),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),_account=require("../../platform/utils/account"),_button=require("../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_button3=require("../../atoms/constants/button"),_bidi_input=require("../../atoms/bidi_input.jsx"),_bidi_input2=_interopRequireDefault(_bidi_input),_fuji_icon_button=require("../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_fuji_icon=require("../../atoms/constants/fuji_icon"),_utils=require("./utils/utils"),Utils=_interopRequireWildcard(_utils),_popover_container=require("../../atoms/popover/popover_container.jsx"),_popover_container2=_interopRequireDefault(_popover_container),_popover_anchor=require("../../atoms/popover/popover_anchor.jsx"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_popover_content=require("../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover=require("../../atoms/constants/popover"),_modal=require("../../atoms/modal"),_modal2=_interopRequireDefault(_modal),_lazy_component=require("../../atoms/lazy_component"),_navigable_list=require("../../atoms/navigable_list.jsx"),_navigable_list2=_interopRequireDefault(_navigable_list),_navigable_list3=require("../../atoms/constants/navigable_list"),_labeled_input=require("./atoms/labeled_input.jsx"),_labeled_input2=_interopRequireDefault(_labeled_input),_account_select=require("./atoms/account_select.jsx"),_account_select2=_interopRequireDefault(_account_select),_auto_suggest_contact=require("./atoms/auto_suggest_contact.jsx"),_auto_suggest_contact2=_interopRequireDefault(_auto_suggest_contact),_focus_bordered=require("./atoms/focus_bordered.jsx"),_focus_bordered2=_interopRequireDefault(_focus_bordered),_constants=require("./constants"),_header=require("./styles/header"),_header2=_interopRequireDefault(_header),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_object=require("../../platform/utils/object"),_mail_constants=require("../../platform/mail_constants"),_pills=require("../../atoms/utils/pills"),strings=exports.strings=(0,_reactIntl.defineMessages)({save_draft_and_close:{id:"compose.save_draft_and_close",defaultMessage:"Close (and save to drafts)"},show_cc_button_label:{id:"compose.show_cc_button_label",defaultMessage:"CC / BCC"},hide_cc_button_label:{id:"compose.hide_cc_button_label",defaultMessage:"Hide CC / BCC"},show_cc_only_button_label:{id:"compose.show_cc_only_button_label",defaultMessage:"CC"},hide_cc_only_button_label:{id:"compose.hide_cc_only_button_label",defaultMessage:"Hide CC"},bcc_button_label:{id:"compose.bcc_button_label",defaultMessage:"bcc"},from_input_label:{id:"compose.from_input_label",defaultMessage:"From"},to_input_label:{id:"compose.to_input_label",defaultMessage:"To"},cc_input_label:{id:"compose.cc_input_label",defaultMessage:"CC"},bcc_input_label:{id:"compose.bcc_input_label",defaultMessage:"BCC"},select_contact:{id:"compose.select_contact",defaultMessage:"Select contact {email}"},subject_input_placeholder:{id:"compose.subject_input_placeholder",defaultMessage:"Subject"},additional_options:{id:"compose.additional_options",defaultMessage:"Additional options"}}),Header=_react2.default.createClass({displayName:"Header",contextTypes:{executeAction:_react.PropTypes.func,config:_react.PropTypes.object,intl:_reactIntl.intlShape.isRequired},getDefaultProps:function(){return{from:"",subject:"",to:[],cc:[],bcc:[],showSubject:!0,autoSuggestions:[],isBccDisabled:!1,isSubjectEditingDisabled:!1}},getInitialState:function(){return{showCcBcc:!!this.props.cc.length||!!this.props.bcc.length,inputFocus:{},xButtonHovered:!1,contactPicker:!1,isDragged:!1,selectedPills:[]}},componentWillReceiveProps:function(e){this.props.composeMode!==e.composeMode&&this.setState({showCcBcc:!!e.cc.length||!!e.bcc.length})},handleXButtonHover:function(e){this.setState({xButtonHovered:e})},handleSubjectChange:function(e){this.props.onSubjectChange(e.target.value)},handleInputContactAdd:function(e,t){var s=(0,_pills.createAddress)(t.trim()),a=s.email!==s.name?s.name:"";this.props.onContactAdd(e,{email:s.email,name:a})},handleFocusChange:function(e,t){this.setState({inputFocus:{type:e,isFocused:t}})},handleContactPickerClose:function(){this.setState({contactPicker:!1})},shouldHandleDrop:function(e){var t=["message-to-field","message-cc-field","message-bcc-field"];return t.indexOf(e.id)!==-1},setDragState:function(e){this.setState({isDragged:e})},handleDragOver:function(e){this.shouldHandleDrop(e.target)&&e.preventDefault()},updateSelectedPills:function(e){this.setState({selectedPills:e})},clearSelectedPills:function(){this.setState({selectedPills:[]})},handleDrop:function(e,t,s,a){if(e.stopPropagation(),e.preventDefault(),"undefined"!=typeof s||this.shouldHandleDrop(e.target)&&""!==t){var o=e.dataTransfer.getData("text"),n=document.getElementById("drag-img"),i=[],c={};if(n&&n.parentNode&&n.parentNode.removeChild(n),""!==o&&Utils.isJSONString(o)){var r=JSON.parse(o);r&&(c=r.contact),0===this.state.selectedPills.length?c&&(c.id||c.email||c.name)&&i.push(c):i=this.state.selectedPills,this.props.onDragContactAdd(t,i,{side:s,id:a}),r.dragFromField!==t&&this.props.onContactRemove(r.dragFromField,i,!0),this.setDragState(!1),this.clearSelectedPills()}}},addContactsToField:function(e){var t=this.state.recipientGroup;this.props.onContactAdd(t,e)},messageForOption:function(e){return e.email?this.context.intl.formatMessage(strings.select_contact,{email:e.email}):e},focus:function(e){this.refs[e]&&this.refs[e].focus()},componentDidMount:function(){this.focus(this.props.initialFocus)},toggleExtraRecipients:function(){var e=this;this.state.showCcBcc?this.setState({showCcBcc:!1},function(){e.focus(_constants.FocusableRefs.TO)}):this.setState({showCcBcc:!0},function(){e.focus(_constants.FocusableRefs.CC)})},filterSuggestions:function(){var e=this.props.autoSuggestions;if(!e.length)return[];var t=this.props.to.concat(this.props.cc,this.props.bcc).reduce(function(e,t){var s=t.email;return e[s]=1,e},Object.create(null));return Object.keys(t).length&&(e=e.filter(function(e){var s=e.email;return!t[s]})),e},renderAutoSuggest:function(e,t,s,a){var o=this,n=this.filterSuggestions(),i=this.props[e],c=this.state.inputFocus.type===e&&this.state.inputFocus.isFocused,r="message-"+e+"-field";return _react2.default.createElement(_labeled_input2.default,{active:c,label:t,childrenId:"compose-header-field-"+e,onLabelClick:function(){return o.setState({contactPicker:!0,recipientGroup:e})},onDragOver:this.handleDragOver,onDrop:function(t){return o.handleDrop(t,e)},"data-test-id":"contact-picker-"+e},_react2.default.createElement(_auto_suggest_contact2.default,{ref:e,id:e,inputId:r,autoBidi:!1,suggestedContacts:n,selectedContacts:i,onFocus:this.handleFocusChange.bind(this,e,!0),onBlur:this.handleFocusChange.bind(this,e,!1),onSuggestionRequested:this.props.onSuggestionRequested,onInputContactAdd:this.handleInputContactAdd.bind(this,e),onContactRemove:this.props.onContactRemove.bind(null,e),onContactAdd:this.props.onContactAdd.bind(null,e),getMessageForOption:this.messageForOption,showCcBcc:this.state.showCcBcc,handleDrop:function(t,s,a){return o.handleDrop(t,e,s,a)},handleDragState:this.setDragState,isDragged:this.state.isDragged,onPillSelection:this.updateSelectedPills,selectedPills:this.state.selectedPills}),a)},renderCloseButton:function(e){var t=this.context.intl.formatMessage(strings.save_draft_and_close),s=this.state.xButtonHovered?_fuji_icon.ColorStates.NORMAL:_fuji_icon.ColorStates.DISABLED;return _react2.default.createElement("span",{className:e.xButton},_react2.default.createElement(_fuji_icon_button2.default,{onClick:this.props.onClose,title:t,"aria-label":t,kind:_fuji_icon.Kinds.CLOSE_MINI,colorState:s,size:_fuji_icon.Sizes.XS}))},renderExtraRecipientBtn:function(e){if(this.props.cc.length>0||this.props.bcc.length>0)return null;var t=this.context.intl.formatMessage,s=this.props.isBccDisabled,a=t(this.state.showCcBcc?s?strings.hide_cc_only_button_label:strings.hide_cc_button_label:s?strings.show_cc_only_button_label:strings.show_cc_button_label);return _react2.default.createElement(_button2.default,{ref:_constants.FocusableRefs.CCBTN,className:e,tabIndex:"-1",onClick:this.toggleExtraRecipients,kind:_button3.Kinds.CHROMELESS,"data-test-id":"btn-cc"},a)},renderEditSubjectMenu:function(e){var t=this.context.intl.formatMessage;return _react2.default.createElement(_popover_container2.default,{className:e.additionalOptionsButtonWrapper},_react2.default.createElement(_popover_anchor2.default,null,_react2.default.createElement(_fuji_icon_button2.default,{"data-test-id":"additional-compose-options-button",kind:_fuji_icon.Kinds.CHEVRON_UP,rotate:_fuji_icon.Rotate.D180,size:_fuji_icon.Sizes.XS,title:t(strings.additional_options)})),_react2.default.createElement(_popover_content2.default,{triggerOn:_popover.Triggers.CLICK,align:_popover.Align.START,offset:2*_mail_ui_vars.GRID_UNIT},_react2.default.createElement("div",{className:e.additionalOptionsListWrapper},_react2.default.createElement(_navigable_list2.default,{kind:_navigable_list3.Kinds.MENU,focusOnMount:!0,"data-test-id":"additional-compose-options-menu"},_react2.default.createElement("li",null,_react2.default.createElement(_button2.default,{"data-test-id":"edit-subject",kind:_button3.Kinds.MENUITEM,onClick:this.props.onEditSubject},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"editSubject",defaultMessage:"Edit subject"})))))))},render:function(){var e=this,t=(0,_css2.default)(_header2.default,{"filled-subject":this.props.subject.length>0,isSubjectDisabled:this.props.isSubjectEditingDisabled}),s=this.state.inputFocus;return _react2.default.createElement("div",{className:"compose-header "+t.container},this.props.showCloseButton?_react2.default.createElement("div",{className:t.xButtonWrapper,onMouseEnter:this.handleXButtonHover.bind(this,!0),onMouseLeave:this.handleXButtonHover.bind(this,!1)},this.renderCloseButton(t)):null,_react2.default.createElement("div",{"data-test-id":"compose-header-top",className:t.composeHeaderTop},this.props.showFrom?_react2.default.createElement(_focus_bordered2.default,{hasFocus:s.type===_constants.FocusableRefs.FROM&&s.isFocused,"data-test-id":"container-from"},_react2.default.createElement(_labeled_input2.default,{active:s.type===_constants.FocusableRefs.FROM&&s.isFocused,label:_react2.default.createElement(_reactIntl.FormattedMessage,strings.from_input_label)},_react2.default.createElement(_account_select2.default,{dir:this.context.config.rtl?"rtl":"ltr",selectLabel:this.context.intl.formatMessage(strings.from_input_label),onFocus:this.handleFocusChange.bind(this,_constants.FocusableRefs.FROM,!0),onBlur:this.handleFocusChange.bind(this,_constants.FocusableRefs.FROM,!1),sendingAccounts:(0,_account.filterSendingAccounts)(this.props.accounts),selected:this.props.from,onChange:this.props.onFromChange}))):null,_react2.default.createElement(_focus_bordered2.default,{hasFocus:s.type===_constants.FocusableRefs.TO&&s.isFocused,"data-test-id":"container-to"},this.props.isSubjectEditingDisabled&&this.props.composeMode!==_mail_constants.Compose.Modes.FORWARD?this.renderEditSubjectMenu(t):null,this.renderAutoSuggest(_constants.FocusableRefs.TO,_react2.default.createElement(_reactIntl.FormattedMessage,strings.to_input_label),t),this.renderExtraRecipientBtn(t.extraRecipientsBtn)),this.state.showCcBcc?_react2.default.createElement("div",null,_react2.default.createElement(_focus_bordered2.default,{hasFocus:s.type===_constants.FocusableRefs.CC&&s.isFocused,"data-test-id":"container-cc"},_react2.default.createElement("div",{className:t.ccContainer},this.renderAutoSuggest(_constants.FocusableRefs.CC,_react2.default.createElement(_reactIntl.FormattedMessage,strings.cc_input_label),t))),!this.props.isBccDisabled&&_react2.default.createElement(_focus_bordered2.default,{hasFocus:s.type===_constants.FocusableRefs.BCC&&s.isFocused,"data-test-id":"container-bcc"},this.renderAutoSuggest(_constants.FocusableRefs.BCC,_react2.default.createElement(_reactIntl.FormattedMessage,strings.bcc_input_label),t))):null),this.props.showSubject?_react2.default.createElement("div",{className:t.composeSubject},_react2.default.createElement(_focus_bordered2.default,{hasFocus:s.type===_constants.FocusableRefs.SUBJECT&&s.isFocused},this.props.isSubjectEditingDisabled&&this.props.composeMode===_mail_constants.Compose.Modes.FORWARD?this.renderEditSubjectMenu(t):null,_react2.default.createElement(_bidi_input2.default,{"data-test-id":"compose-subject",onFocus:this.handleFocusChange.bind(this,_constants.FocusableRefs.SUBJECT,!0),onBlur:this.handleFocusChange.bind(this,_constants.FocusableRefs.SUBJECT,!1),ref:_constants.FocusableRefs.SUBJECT,spellCheck:!0,autoCorrect:!1,"aria-label":this.context.intl.formatMessage(strings.subject_input_placeholder),className:t.subject,placeholder:this.context.intl.formatMessage(strings.subject_input_placeholder),value:this.props.subject,onChange:this.handleSubjectChange,disabled:this.props.isSubjectEditingDisabled,onDragOver:this.handleDragOver,onDrop:function(t){return e.handleDrop(t,"")}}))):null,this.state.contactPicker&&_react2.default.createElement(_modal2.default,{onClose:this.handleContactPickerClose},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../../apps/mail/controller_views/contact_picker.jsx",onClose:this.handleContactPickerClose,addContactsToField:this.addContactsToField,recipientGroup:this.state.recipientGroup,_moduleGetter:function(){return require("../../apps/mail/controller_views/contact_picker.jsx")}})))}});exports.default=Header;
},{"../../apps/mail/controller_views/contact_picker.jsx":"./apps/mail/controller_views/contact_picker","../../atoms/bidi_input.jsx":"./atoms/bidi_input","../../atoms/button.jsx":"./atoms/button","../../atoms/constants/button":"./atoms/constants/button","../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../atoms/constants/navigable_list":"./atoms/constants/navigable_list","../../atoms/constants/popover":"./atoms/constants/popover","../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../atoms/lazy_component":"./atoms/lazy_component","../../atoms/modal":"./atoms/modal","../../atoms/navigable_list.jsx":"./atoms/navigable_list","../../atoms/popover/popover_anchor.jsx":"./atoms/popover/popover_anchor","../../atoms/popover/popover_container.jsx":"./atoms/popover/popover_container","../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../atoms/utils/pills":102,"../../platform/mail_constants":"./platform/mail_constants","../../platform/utils/account":"./platform/utils/account","../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../platform/utils/object":"./platform/utils/object","../../types":"./types","./atoms/account_select.jsx":137,"./atoms/auto_suggest_contact.jsx":139,"./atoms/focus_bordered.jsx":142,"./atoms/labeled_input.jsx":143,"./constants":"./molecules/compose/constants","./styles/header":156,"./utils/utils":"./molecules/compose/utils/utils","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],147:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ComposeMolecule(e,t){var r=t.config,a=e.composeDataState,o=e.composeData,n=e.framed,l=e.refToWrappedComponent;return o&&o.draftStatus!==Status.DOES_NOT_EXIST?n||!r.secureMode&&!o.secureMode?_react2.default.createElement(_compose2.default,_extends({},e,{ref:function(e){l&&e&&l(e)}})):_react2.default.createElement(_lazy_component.LazyComponent,_extends({import:"../../apps/mail/controller_views/framed_compose"},e,{_moduleGetter:function(){return require("../../apps/mail/controller_views/framed_compose")}}),_react2.default.createElement(_lazy_component.When,{loading:!0},_react2.default.createElement("div",null,_react2.default.createElement(_loading_indicator2.default,null)))):a===_mail_constants.RecordStates.DOES_NOT_EXIST||a===_mail_constants.RecordStates.LOADING?_react2.default.createElement("div",{className:classNames.loadingContainer},_react2.default.createElement(_loading_indicator2.default,null)):_react2.default.createElement(_error2.default,e)}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};exports.default=ComposeMolecule;var _compose=require("./compose.jsx"),_compose2=_interopRequireDefault(_compose),_lazy_component=require("../../atoms/lazy_component"),_react=require("react"),_react2=_interopRequireDefault(_react),_error=require("./error.jsx"),_error2=_interopRequireDefault(_error),_loading_indicator=require("../../atoms/loading_indicator.jsx"),_loading_indicator2=_interopRequireDefault(_loading_indicator),_mail_error=require("../../platform/mail_error"),_mail_error2=_interopRequireDefault(_mail_error),_object=require("../../platform/utils/object"),_mail_constants=require("../../platform/mail_constants"),_index=require("./styles/index"),_index2=_interopRequireDefault(_index),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),classNames=(0,_css2.default)(_index2.default),Status=_mail_constants.Draft.Status;ComposeMolecule.contextTypes={config:_react.PropTypes.object.isRequired},module.exports=exports.default;
},{"../../apps/mail/controller_views/framed_compose":"./apps/mail/controller_views/framed_compose","../../atoms/lazy_component":"./atoms/lazy_component","../../atoms/loading_indicator.jsx":"./atoms/loading_indicator","../../platform/mail_constants":"./platform/mail_constants","../../platform/mail_error":"./platform/mail_error","../../platform/utils/object":"./platform/utils/object","./compose.jsx":144,"./error.jsx":145,"./styles/index":157,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./molecules/compose/plugins/hyperlink_plugin":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_hyperlink_dropdown=require("../atoms/hyperlink_dropdown.jsx"),_hyperlink_dropdown2=_interopRequireDefault(_hyperlink_dropdown),_go_to_link=require("../atoms/go_to_link.jsx"),_go_to_link2=_interopRequireDefault(_go_to_link),_hyperlink_plugin=require("../styles/hyperlink_plugin"),_hyperlink_plugin2=_interopRequireDefault(_hyperlink_plugin),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),classNames=(0,_css2.default)(_hyperlink_plugin2.default),HyperLinkPlugin=_react2.default.createClass({displayName:"HyperLinkPlugin",getInitialState:function(){return{renderGoToLink:!1,renderHyperlinkDropdown:!1,textInput:"",linkInput:"",goToLinkValue:""}},componentWillMount:function(){var e=this;this.commands={createlink:{action:function(){var t=window.getSelection();t.isCollapsed?e.createNewLink(t.anchorNode):e.createLinkFromSelection(t.anchorNode)}},clicklink:{action:function(t,n){e.showGoToLink(n)}}}},handleClick:function(e){"A"===e.target.nodeName?this.props.editor.pushButton("clicklink",e.target):this.hideGoToLink()},componentDidUpdate:function(e){this.props.editor!==e.editor&&this.props.editor.addPlugin({commands:this.commands})},createNewLink:function(e){var t=e,n=t.parentNode;"A"===n.nodeName?t=n:(this.props.editor.pushButton("insertHTML","<a data-tmp>_</a>"),t=n.querySelector("[data-tmp]")),t&&(this._currentLinkNode=t,this._currentLinkNode.innerHTML="",this.setState({renderHyperlinkDropdown:!0,renderGoToLink:!1,anchorNode:t,textInput:t.textContent||"",linkInput:t.hasAttribute("href")?t.getAttribute("href").trim():"http://"}))},createLinkFromSelection:function(e){var t=e,n=t.parentNode;t.nodeType===Node.TEXT_NODE?"A"!==t.parentNode.nodeName?(document.execCommand("createlink",!1," "),t=n.querySelector('a[href=" "]')):t=t.parentNode:"A"!==t.nodeName&&(document.execCommand("createlink",!1," "),t=n.querySelector('a[href=" "]')),(0,_invariant2.default)(t,"Cannot find anchor element to create link"),this._currentLinkNode=t,this.showHyperLinkDropdown(t)},showHyperLinkDropdown:function(e){if(e){var t="";e.hasAttribute("href")&&""!==e.getAttribute("href").trim()&&(t=e.getAttribute("href")),this.setState({renderHyperlinkDropdown:!0,renderGoToLink:!1,anchorNode:e,textInput:e.textContent,linkInput:t})}},hideHyperLinkDropdown:function(){this.setState({renderHyperlinkDropdown:!1})},updateLink:function(e,t){var n=this.props.editor;if(this.hideHyperLinkDropdown(),this._currentLinkNode){this.props.editor.focus(),this._currentLinkNode.focus();var r=window.getSelection(),i=document.createRange(),o=document.createElement("a");o.textContent=e,o.href=t,o.className=this._currentLinkNode.className,this._currentLinkNode.parentElement.replaceChild(o,this._currentLinkNode),this._currentLinkNode=null,i.setStartAfter(o),i.setEndAfter(o),r.removeAllRanges(),r.addRange(i),i.collapse(),r.collapseToEnd(),n.contentChanged({type:"link",node:o}),document.execCommand("unlink",!1,!1)}},cancelCreateOrEditLink:function(){this.hideHyperLinkDropdown(),!this._currentLinkNode||this._currentLinkNode.getAttribute("href")&&""!==this._currentLinkNode.getAttribute("href").trim()||this.removeCurrentLinkNode()},removeCurrentLinkNode:function(){var e=this._currentLinkNode.parentElement,t=this._currentLinkNode.firstChild;!t||t.nodeType===Node.TEXT_NODE&&""===t.textContent.trim()||e.insertBefore(t,this._currentLinkNode),e.removeChild(this._currentLinkNode),e.normalize(),window.getSelection().removeAllRanges();var n=document.createRange();n.setStartAfter(e),n.setEndAfter(e),window.getSelection().addRange(n),window.getSelection().collapseToEnd(),this._currentLinkNode=null},showGoToLink:function(e){this.setState({renderHyperlinkDropdown:!1,renderGoToLink:!0,anchorNode:e,goToLinkValue:e.getAttribute("href")}),this._currentLinkNode=e},hideGoToLink:function(){this.setState({renderGoToLink:!1})},editHyperLink:function(){this.showHyperLinkDropdown(this._currentLinkNode)},removeHyperLink:function(){this.hideGoToLink(),this.removeCurrentLinkNode()},render:function(){return _react2.default.createElement("div",{onClick:this.handleClick,className:classNames.container},this.props.children,this.state.renderHyperlinkDropdown?_react2.default.createElement(_hyperlink_dropdown2.default,{onSave:this.updateLink,onClose:this.cancelCreateOrEditLink,textInput:this.state.textInput,linkInput:this.state.linkInput,anchorNode:this.state.anchorNode}):null,this.state.renderGoToLink?_react2.default.createElement(_go_to_link2.default,{onEdit:this.editHyperLink,onRemove:this.removeHyperLink,goToLinkValue:this.state.goToLinkValue,anchorNode:this.state.anchorNode}):null)}});exports.default=HyperLinkPlugin,module.exports=exports.default;
},{"../../../platform/invariant":"./platform/invariant","../atoms/go_to_link.jsx":"./molecules/compose/atoms/go_to_link","../atoms/hyperlink_dropdown.jsx":"./molecules/compose/atoms/hyperlink_dropdown","../styles/hyperlink_plugin":"./molecules/compose/styles/hyperlink_plugin","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],148:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_index=require("./index"),_index2=_interopRequireDefault(_index),_constants=require("./constants"),_throttle=require("lodash/throttle"),_throttle2=_interopRequireDefault(_throttle),OFFSET_BOTTOM=20,OFFSET_TOP=160,RTE_PADDING_TOP=24,COMPOSE_TOP_PADDING=16,CONTAINER_TOP_PADDING=12,SmartScroll=_react2.default.createClass({displayName:"SmartScroll",contextTypes:{config:_react.PropTypes.object.isRequired},getInitialState:function(){return{engaged:!1}},update:function(){this._isSetup&&this._handleScroll()},_shouldEnableSmartScroll:function(){return document.documentElement.scrollWidth<=window.innerWidth},_handleWindowResize:function(){this._shouldEnableSmartScroll()?(this._isSetup||this._setup(),this.update()):this._teardown()},_handleContentChanged:function(t){var e=t.caret,n=t.type;this._isSetup&&"keyup"===n&&e&&this._scrollTargetIntoView(e.y)},_scrollTargetIntoView:function(t){var e=this,n=this._containerNode.getBoundingClientRect(),o=this._targetNode.getBoundingClientRect(),i=this._headerNode.getBoundingClientRect(),r=t+COMPOSE_TOP_PADDING+i.height,s=o.top-n.top+r,a=this.state.engaged?n.height-_constants.TOOLBAR_HEIGHT:n.height,h=s>=a,d=s<0,_=!this.state.engaged&&o.bottom+OFFSET_BOTTOM>n.bottom;d||h?setTimeout(function(){e._containerNode.scrollTop=e._targetNode.offsetTop+r-Math.round(n.height/2)},2):_&&(this._containerNode.scrollTop+=o.bottom-n.bottom+OFFSET_BOTTOM)},_alignTargetInContainer:function(){var t=this._targetNode.getBoundingClientRect(),e=this._containerNode.getBoundingClientRect();t.height<e.height?this._containerNode.scrollTop=this._targetNode.offsetTop-(e.height-t.height-OFFSET_BOTTOM):this._containerNode.scrollTop=this._targetNode.offsetTop-CONTAINER_TOP_PADDING},_handleScroll:function(){var t=this._containerNode.getBoundingClientRect(),e=this._targetNode.getBoundingClientRect(),n=this._headerNode.getBoundingClientRect(),o=Math.max(n.height+RTE_PADDING_TOP,OFFSET_TOP),i=e.bottom>t.top&&e.top+o<t.bottom&&e.bottom>t.bottom;i?this._engage(e.width-_constants.HORIZONTAL_PADDING):this._disengage()},_setup:function(){this._compose&&(this._containerNode=(0,_reactDom.findDOMNode)(this.props.scrollContainer),this._targetNode=(0,_reactDom.findDOMNode)(this),this._headerNode=(0,_reactDom.findDOMNode)(this._compose.refs.header)),this._containerNode&&this._targetNode&&this._headerNode&&(this._isSetup=!0,this.update(),this._containerNode.addEventListener("scroll",this._handleScroll))},_teardown:function(){this._isSetup&&(this._containerNode.removeEventListener("scroll",this._handleScroll),this._disengage(),this._isSetup=!1)},componentWillMount:function(){this._handleContentChanged=(0,_throttle2.default)(this._handleContentChanged,10)},componentDidMount:function(){this._shouldEnableSmartScroll()&&this._setup(),this._isSetup&&this._alignTargetInContainer()},componentWillUnmount:function(){this._teardown()},_engage:function(){this.state.engaged||this.setState({engaged:!0})},_disengage:function(){this.state.engaged&&this.setState({engaged:!1})},render:function(){var t=this;return _react2.default.createElement(_index2.default,_extends({},this.props,{refToWrappedComponent:function(e){return t._compose=e},onContentChanged:this._handleContentChanged,toolbarFixed:this.state.engaged,onResize:this._handleWindowResize}))}});exports.default=SmartScroll,module.exports=exports.default;
},{"./constants":"./molecules/compose/constants","./index":147,"lodash/throttle":"./node_modules/lodash/throttle.js","react":"./node_modules/react/react.js","react-dom":"./node_modules/react-dom/index.js"}],149:[function(require,module,exports){
module.exports={className:{default:{select:"C_516e D_F ab_C ir_0 q_T b_0",menuContainer:"D_F",label:"D_F ab_C y_1ACvVU A_6EqO",menuLabelEmail:"D_X",menu:"P_3zDxc l_ZufDBK j_20l77p",fromField:"q_T b_0 C3_4N1z"}},_key:"1Qzm77"};
},{"./src/molecules/compose/styles/atomic_account_select.css":"./molecules/compose/styles/atomic_account_select"}],150:[function(require,module,exports){
module.exports={className:{default:{itemAddress:"Q_fq7 A_6DUj C_Z1Xxgu2",checkmarkWrapper:"W_6LEV H_6LEV E_fq7 D_X",buttonContent:"D_F ab_C i_6LEV"}},_key:"ZCx2ho"};
},{"./src/molecules/compose/styles/atomic_account_select_item.css":"./molecules/compose/styles/atomic_account_select_item"}],151:[function(require,module,exports){
module.exports={className:{default:{pills:"k_w D_F ab_C W_6D6F p_R r_P",pillsContainer:"hd_n em_N eo_HB el_Z12c0F D_F M_0 P_3HLUz ir_0 o_A K_3qWeB",pillsContainerChild:"em_N o_h s_3nx4N",pillOuter:"D_F ac_C",textContainer:"E_6LEV o_h",contactIcon:"o_q",name:"C_Z291T0t o_h G_e J_x Q_fq7 E_fq7",email:"C_Z1Vx4Yg o_h G_e J_x Q_fq7 E_fq7",highlight:"u_eBE",typeahead:"M_0 p_R H_6NIX",typeaheadInput:"Z_N ir_0 j_n y_1ACvVU q_52qC k_w W_6D6F H_6NIX M_0 b_0 P_SMJKi A_6EqO D_X p_a L_0 B_0",typeaheadInputHint:"Z_0 y_1ACvVU q_52qC k_w W_6D6F H_6NIX M_0 b_0 P_SMJKi A_6EqO D_X p_a L_0 B_0",typeaheadAriaStatus:"L_Z1yJMeR p_a",typeaheadDropDown:"Z_f8a I_52qC k_w ha_n M_0 P_3HLUz b_Z14vXdP e_dRA j_ZqTdtW p_a o_A K_3vFsb W_3vVYr L_A T_6D6F",typeaheadOptionContainer:"D_F ab_C P_ZGAgNS k_w H_74JI r_P q4_2ieea9 cZ1WADfW_2ieea9"},showCcBcc:{pillsContainer:"K_FB7P8"}},_key:"ZJeMf0"};
},{"./src/molecules/compose/styles/atomic_auto_suggest_contact.css":"./molecules/compose/styles/atomic_auto_suggest_contact"}],"./molecules/compose/styles/color_picker":[function(require,module,exports){
module.exports={className:{default:{swatchItem:"D_F ek_BB ab_C M_eo6",swatchContent:"W_7rdk",swatchTitleBase:"J_x U_6Eb4 ac_CI",colorElement:"p_R",color:"D_F gl_C ab_C W_6LEV H_6LEV b_0 P_0 it_689y"}},_key:"1MmLoV"};
},{"./src/molecules/compose/styles/atomic_color_picker.css":"./molecules/compose/styles/atomic_color_picker"}],152:[function(require,module,exports){
module.exports={className:{default:{compose:"I_52qC j_n k_w W_6D6F D_F ek_BB em_N P_ZzJed",loadingContainer:"je_74JI",editorContainer:"em_N D_F ek_BB iz_A"}},_key:"Z1rCw6p"};
},{"./src/molecules/compose/styles/atomic_compose.css":"./molecules/compose/styles/atomic_compose"}],153:[function(require,module,exports){
module.exports={className:{default:{attachmentDragContainer:"em_N D_F ek_BB p_R o_h",dragOverlay:"cZW7ROP_n b_2dWFvS T_fq7 p_a L_0 R_0 B_eo6 D_F gl_C ab_C q_2iedUU",dragDescriptionContainer:"D_F A_6EWk u_b O_cMr ek_BB ab_C C_Z2aVTcY",dragTextDescription:"je_6LEV"}},_key:"Z19Utn2"};
},{"./src/molecules/compose/styles/atomic_dragdrop_overlay.css":"./molecules/compose/styles/atomic_dragdrop_overlay"}],"./molecules/compose/styles/editor":[function(require,module,exports){
module.exports={className:{default:{editorWrapper:"p_R em_N D_F ek_BB en_0 d_eik N_6Fd5",editorContainer:"p_R cZ1RN91d_GG k_w W_6D6F em_N D_F",rte:"em_N ir_0",placeholder:"p_a T_6LEV L_0 C_Z1TsNWR cZW7ROP_n",button:"b_0 ir_0 P_eo6 I_T y_1ACvVU A_6DUj C_Z1TsNWR M_6Fd5",buttonInner:"D_F ab_C r_P"},"kind-MESSAGE":{rte:"iz_A k_w P_6Fd5 H_3n93F",placeholder:"T_eTB P_1Eu7sD i_6VdP"}},_key:"ZgxO06"};
},{"./src/molecules/compose/styles/atomic_editor.css":"./molecules/compose/styles/atomic_editor"}],154:[function(require,module,exports){
module.exports={className:{default:{errorContainer:"H_6D6F W_6D6F",errorWrapper:"H_6D6F W_6D6F D_F gl_C ab_C P_Z17Hvh7",errorMessage:"A_6FsP Q_fq7",emptyBodyRetry:"r_P C_Z2aVTcY"}},_key:"Z1fhFdm"};
},{"./src/molecules/compose/styles/atomic_error.css":"./molecules/compose/styles/atomic_error"}],"./molecules/compose/styles/expanded_more_tools":[function(require,module,exports){
module.exports={className:{default:{rightAlignIcon:"h_2gl0WC",menuIcon:"D_X H_6NIX",menuLabel:"y_Sa94g A_6DUj C_Z1TsNWR Q_fq7",menuItem:"D_F ab_C r_P Y_eTB I4_2iedUU H_6NIX",emptyMenuItem:"Y_eTB H_6NIX",menuContainer:"D_F ek_EZ M_1ghjXT",spaceBetween:"W_fq7",sectionDivider:"D_B z_Z163u0T Y_6DEy U_eo6 E_69H5",backButtonLabel:"y_Sa94g A_6DUj C_Z1TsNWR",colorMenuBackButton:"D_F ab_C r_P Y_69bz U_fq7 Q_36JN3",fontMenuBackButton:"D_F ab_C r_P"}},_key:"Zgrtnw"};
},{"./src/molecules/compose/styles/atomic_expanded_more_tools.css":"./molecules/compose/styles/atomic_expanded_more_tools"}],155:[function(require,module,exports){
module.exports={className:{default:{input:"D_F ab_CI Y_eo6 em_N m_Z1a7UWG"},hasFocus:{input:"bj_Z2aVTcY"}},_key:"LcqnV"};
},{"./src/molecules/compose/styles/atomic_focus_bordered.css":"./molecules/compose/styles/atomic_focus_bordered"}],"./molecules/compose/styles/font_name_size_menuitem":[function(require,module,exports){
module.exports={className:{default:{menuItem:"C_Z291T0t H_6UbO i_6UbO N_fq7 D_F ab_C",checkmarkWrapper:"D_X E_fq7 i_0"},"selected-false":{checkmarkWrapper:"W_6LEV"},"kind-tiny":{menuItem:"A_6DEy"},"kind-small":{menuItem:"A_6EqO"},"kind-medium":{menuItem:"A_6Fd5"},"kind-large":{menuItem:"A_6MGW"},"kind-xlarge":{menuItem:"H_72FG i_72FG A_6UbO"},"kind-huge":{menuItem:"H_7ceA i_7ceA A_74JI"},"kind-modern":{menuItem:"y_1ACvVU"},"kind-modernwide":{menuItem:"y_ZISf5J"},"kind-classic":{menuItem:"y_ZYqQIR"},"kind-classicwide":{menuItem:"y_ZNDoVU"},"kind-courier":{menuItem:"y_16XJVH"},"kind-garamond":{menuItem:"y_1i8dl0"},"kind-lucida":{menuItem:"y_Z2hYH8W"}},_key:"T5DGz"};
},{"./src/molecules/compose/styles/atomic_font_name_size_menuitem.css":"./molecules/compose/styles/atomic_font_name_size_menuitem"}],"./molecules/compose/styles/go_to_link":[function(require,module,exports){
module.exports={className:{default:{container:"p_a D_F I_52qC b_Z14vXdP j_ZqTdtW Z_f8a P_Z1E2YFn",linkWrapper:"C_Z1Vx4Yg",link:"C_Z2aVTcY a_3rdfm J_x o_h G_e D_X f_r",control:"Q_6Eb4 u_b C_Z2aVTcY r_P"}},_key:"1RctxH"};
},{"./src/molecules/compose/styles/atomic_go_to_link.css":"./molecules/compose/styles/atomic_go_to_link"}],156:[function(require,module,exports){
module.exports={className:{default:{container:"en_0",inputDark:"C_Z291T0t",additionalOptionsButtonWrapper:"D_F p_a L_371PO B_dBP P_eo6",additionalOptionsListWrapper:"P_3Y3Gk",ccContainer:"D_F ab_C em_N",subject:"G_e y_1ACvVU A_6EqO C_Z1TsNWR ir_0 P_0 C3_Z291T0t bj3_Z291T0t b_0 j_n d_72FG em_N",extraRecipientsBtn:"en_0 Q_fq7 E_eo6 Y_6DEy U_6DEy A_6DUj y_1ACvVU C_ZxFlP3 P_ZvFAnJ b_n q_T r_P",composeHeaderTop:"p_R",composeSubject:"p_R",ccButton:"C_Z1TsNWR je_0 jb_0 cn_0 q_T en_0 r_P",ccButtonNotLast:"x_ZGN9rt C_Z1TsNWR je_0 jb_0 cn_0 q_T en_0 r_P",xButton:"en_0",xButtonWrapper:"p_a R_fq7 T_fq7"},"filled-subject":{subject:"C_Z291T0t"},isSubjectDisabled:{subject:"C_Z1Vx4Yg"}},_key:"u3bRl"};
},{"./src/molecules/compose/styles/atomic_header.css":"./molecules/compose/styles/atomic_header"}],"./molecules/compose/styles/hyperlink_dropdown":[function(require,module,exports){
module.exports={className:{default:{container:"I_52qC b_Z14vXdP j_ZqTdtW Z_f8a p_a D_F ek_BB P_1iBkeu",button:"q_ZpQYvz e_dRA k_w r_P H_6NIX s_7ceA Y_6Eb4 A_6EqO b_0 C_Z1TsNWR",item:"H_6UbO W_3rBgu jb_fq7 p_R",testLink:"r_P f_r p_a C_Z2aVTcY R_0 P_Z1bIOLs q_2uyuKK m_2fAfSG",textInput:"z_0 x_0 n_0 m_2u057p H_6D6F W_6D6F A_6EqO bj3_Z2aVTcY",linkInput:"z_0 x_0 n_0 m_2u057p H_6D6F W_6D6F A_6EqO W3_eTL bj3_Z2aVTcY",close:"t_r E_36JN3 Q_0"},saveBtnEnabled:{button:"q_Z2aVTcY C_52qC"}},_key:"2nglpn"};
},{"./src/molecules/compose/styles/atomic_hyperlink_dropdown.css":"./molecules/compose/styles/atomic_hyperlink_dropdown"}],"./molecules/compose/styles/hyperlink_plugin":[function(require,module,exports){
module.exports={className:{default:{container:"D_F ek_BB em_N"}},_key:"1Nkogp"};
},{"./src/molecules/compose/styles/atomic_hyperlink_plugin.css":"./molecules/compose/styles/atomic_hyperlink_plugin"}],157:[function(require,module,exports){
module.exports={className:{default:{loadingContainer:"je_74JI W_6D6F"}},_key:"1LglKj"};
},{"./src/molecules/compose/styles/atomic_index.css":"./molecules/compose/styles/atomic_index"}],158:[function(require,module,exports){
module.exports={className:{default:{module:"C_Z1TsNWR D_F ab_C em_N",label:"E_6Fd5 r_P en_0 ac_CI i_6VdP C4_Z2aVTcY",children:"em_N D_F ab_C"},active:{module:"C_Z291T0t",label:"C_Z2aVTcY"}},_key:"Z1LDYR6"};
},{"./src/molecules/compose/styles/atomic_labeled_input.css":"./molecules/compose/styles/atomic_labeled_input"}],"./molecules/compose/styles/more_tools":[function(require,module,exports){
module.exports={className:{default:{icon:"D_X M_3gIMd O_cMu O4_N I4_2iedUU O0_N I0_7l9bL",sectionDivider:"M_3gIMd",rightAlignIcon:"h_2gl0WC"}},_key:"24Ks6J"};
},{"./src/molecules/compose/styles/atomic_more_tools.css":"./molecules/compose/styles/atomic_more_tools"}],"./molecules/compose/styles/toolbar":[function(require,module,exports){
module.exports={className:{default:{composeToolbar:"z_Z14vXdP D_F ab_C I_52qC W_6D6F p_R B_0",sendButton:"q_Z2aVTcY e_dRA k_w r_P H_6VdP s_3mS2U en_0 M_1gLo4F V_M cZ1RN91d_n y_1ACvVU A_6EqO u_e69 b_0 C_52qC I4_Z29WjXl ir3_2d4VCo it3_dRA",status:"Q_fq7 E_fq7 C_Z1TsNWR",spacer:"em_N",sectionDivider:"M_1Eu7sD n_Z14vXdP H_6MGW",formattingTools:"en_N J_x o_h cZ1RN91d_n",icon:"D_X M_3gIMd V_GI O_cMu O4_N I4_2iedUU O0_N I0_7l9bL ir3_2d4VCo it3_dRA",deleteButton:"en_0 P_0 b_0 q_n M_3gIMd O_cMu O4_N I4_2iedUU O0_N I0_7l9bL ir3_2d4VCo it3_dRA"},"kind-MESSAGE":{composeToolbar:"W_A z_n i_N H_72FG",toolbarContainer:"gl_C z_2w4l8N"},disabled:{composeToolbar:"cZW7ROP_n O_od"},fixed:{composeToolbar:"p_f Z_e69",toolbarPlaceholder:"W_6D6F H_7qGO"}},_key:"Ct7AA"};
},{"./src/molecules/compose/styles/atomic_toolbar.css":"./molecules/compose/styles/atomic_toolbar"}],"./molecules/compose/styles/uploader":[function(require,module,exports){
module.exports={className:{default:{container:"p_R D_F ab_C P_eo6 o_h",input:"p_a T_0 L_0 O_0 r_P P_1mPDMf o_h W_0 H_0"}},_key:"Z26Mf44"};
},{"./src/molecules/compose/styles/atomic_uploader.css":"./molecules/compose/styles/atomic_uploader"}],"./molecules/compose/utils/utils":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _utils=require("../../../platform/utils"),_constants=require("../constants"),_compose=require("../../../platform/mail_constants/compose.js");exports.default={makeArray:function(t){return""===t||null===t||void 0===t?[]:Array.isArray(t)?t.slice(0):[t]},getInvalidEmails:function(){var t=[];return Array.prototype.slice.call(arguments).forEach(function(e){t=t.concat(e)}),t.map(function(t){var e=t.email;return e}).filter(function(t){return!(0,_utils.isValidEmail)(t)})},_getAccountFieldFromSelection:function(t,e){var n=void 0;return e&&(n=t.find(function(t){var n=t.email;return n===e})),n||(n=t.find(function(t){var e=t.isSending;return!!e})),n||1!==t.length||(n=t[0]),n},getFromAddress:function(t,e){return this._getAccountFieldFromSelection(t,e)},getSixDigitHexColor:function(t){var e=void 0,n=void 0;if("number"==typeof t){for(t=t.toString(16);t.length<6;)t="0"+t;t=t.substr(4,2)+t.substr(2,2)+t.substr(0,2),t="#"+t}return"string"==typeof t&&(t.indexOf("rgb")>-1&&(e=t.split("(")[1].split(")")[0],e=e.split(","),n=e.map(function(t){return t=parseInt(t,10).toString(16),1===t.length?"0"+t:t}),t="#"+n.join("")),4===t.length)?t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:t},getInitialFocusRef:function(t){var e=_constants.FocusableRefs.EDITOR;return t.focusSubject?e=_constants.FocusableRefs.SUBJECT:0===t.initialTo.length?e=_constants.FocusableRefs.TO:0===t.initialSubject.length&&(e=_constants.FocusableRefs.SUBJECT),e},addressHTMLString:function(t){var e=t.name,n=t.email;return e||(e='"'+n+'"'),e+" &lt;"+n+"&gt;"},getCaretCoordinates:function(t){var e=window.getSelection(),n=t.getBoundingClientRect(),r=0,i=0;if(e&&e.rangeCount){var o=e.getRangeAt(0).cloneRange();if(o.getClientRects){o.collapse(!0);var a=o.getClientRects();if(a.length>0){var s=a[0];r=s.left-n.left,i=s.top-n.top}}if(0===r&&0===i){var u=document.createElement("span");if(u.getClientRects){u.appendChild(document.createTextNode("")),o.insertNode(u);var c=u.getClientRects(),l=u.parentNode;if(c.length>0){var f=c[0];r=f.left-n.left,i=f.top-n.top}l.removeChild(u),l.normalize()}}}return{x:r,y:i}},getFontSizeStyle:function(t){var e=Math.min(Number(t),7),n=_compose.FontSizes.find(function(t){return t.fontSize===e});return n?n.cssName:"medium"},isJSONString:function(t){try{return JSON.parse(t),!0}catch(t){return!1}},mergeRecipientsSecureStatus:function(t,e,n){return t.map(function(t){return t.hasEncryptionError=n&&e[t.email]===!1,t})}},module.exports=exports.default;
},{"../../../platform/mail_constants/compose.js":"./platform/mail_constants/compose","../../../platform/utils":"./platform/utils","../constants":"./molecules/compose/constants"}],159:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_isEqual=require("lodash/isEqual"),_isEqual2=_interopRequireDefault(_isEqual),_object=require("../../platform/utils/object"),_mail_constants=require("../../platform/mail_constants"),_types=require("../../types"),_contactcard=require("../../atoms/contactcard.jsx"),_contactcard2=_interopRequireDefault(_contactcard),_pills=require("../../atoms/utils/pills"),_actions=require("../hover_card/actions"),ContactCard=_react2.default.createClass({displayName:"ContactCard",contextTypes:{executeAction:_react.PropTypes.func.isRequired,notifyPopoverChanged:_react.PropTypes.func},shouldComponentUpdate:function(t){return this.props.emailAddress!==t.emailAddress||this.props.contactState!==t.contactState||!(0,_isEqual2.default)(this.props.contact,t.contact)||this.props.isInRightRail!==t.isInRightRail||this.props.isCompose!==t.isCompose},componentDidMount:function(){var t=this.props,e=t.contactState,a=t.emailAddress,o=t.isCompose;e===_mail_constants.RecordStates.DOES_NOT_EXIST&&this.context.executeAction(_actions.getContactDetails,{email:a,isCompose:o})},componentDidUpdate:function(){var t=this.context.notifyPopoverChanged;t&&t()},render:function(){var t=this.props,e=t.contactState,a=t.contact,o=t.isInRightRail;if(e===_mail_constants.RecordStates.LOADED){a.email=a.emails[0];var r=(0,_pills.preparePillContact)(a),i=r.name,s=r.email;return _react2.default.createElement(_contactcard2.default,{name:i,email:s,contact:a,isInRightRail:o})}return null}});exports.default=ContactCard,module.exports=exports.default;
},{"../../atoms/contactcard.jsx":69,"../../atoms/utils/pills":102,"../../platform/mail_constants":"./platform/mail_constants","../../platform/utils/object":"./platform/utils/object","../../types":"./types","../hover_card/actions":"./molecules/hover_card/actions","lodash/isEqual":"./node_modules/lodash/isEqual.js","react":"./node_modules/react/react.js"}],"./molecules/contact_picker/constants":[function(require,module,exports){
"use strict";exports.__esModule=!0;var itemCountIncreaseByEachTime=exports.itemCountIncreaseByEachTime=20,MAX_SELECTED_CONTACT=exports.MAX_SELECTED_CONTACT=100,ALL_CONTACTS_KEY=exports.ALL_CONTACTS_KEY="allContacts";
},{}],"./molecules/date_time_label":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function isToday(e,t){return e.getTime()>=t}function isCurrentYear(e,t){return new Date(t).getUTCFullYear()===e.getUTCFullYear()}function getLongLabel(e,t,a){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"date_at_time",defaultMessage:"\n                {date} at {time}\n            ",values:{date:isCurrentYear(e,t)?_react2.default.createElement(_reactIntl.FormattedDate,{value:e,timeZone:a,day:"numeric",month:"short"}):_react2.default.createElement(_reactIntl.FormattedDate,{value:e,timeZone:a,day:"numeric",month:"short",year:"numeric"}),time:_react2.default.createElement(_reactIntl.FormattedTime,{value:e,timeZone:a,hour:"numeric",minute:"numeric"})}})}function getShortLabel(e,t,a){return isToday(e,t)?_react2.default.createElement(_reactIntl.FormattedTime,{value:e,timeZone:a,hour:"numeric",minute:"2-digit"}):isCurrentYear(e,t)?_react2.default.createElement(_reactIntl.FormattedDate,{value:e,timeZone:a,day:"numeric",month:"short"}):_react2.default.createElement(_reactIntl.FormattedDate,{value:e,timeZone:a,day:"numeric",month:"numeric",year:"numeric"})}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_reactIntl=require("react-intl"),_application=require("../../stores/application"),_application2=_interopRequireDefault(_application),_date=require("../../platform/utils/date"),DateTimeLabel=_react2.default.createClass({displayName:"DateTimeLabel",shouldComponentUpdate:function(e){var t=this.props;return e.date.getTime()!==t.date.getTime()||e.offset!==t.offset||e.timezone!==t.timezone||e.long!==t.long},render:function(){var e=this.props,t=e.date,a=e.long,r=e.offset,n=e.timezone,i=(0,_date.getStartOfToday)({offset:r,timezone:n});return a?getLongLabel(t,i,this.props.timezone||"UTC"):getShortLabel(t,i,this.props.timezone||"UTC")}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(DateTimeLabel,[_application2.default],function(e){var t=e.getStore(_application2.default).getDateFormattingOption();return t}),module.exports=exports.default;
},{"../../platform/utils/date":"./platform/utils/date","../../stores/application":"./stores/application","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/emoji_picker/actions":[function(require,module,exports){
"use strict";function emojiPickerClosed(i,o){i.dispatch(_react_action_constants.mail.EMOJI_PICKER_CLOSED,o)}function emojiPickerOpened(i,o){i.dispatch(_react_action_constants.mail.EMOJI_PICKER_OPENED,o)}function addEmojiToBody(i,o){var e=o.csid,t=o.emoji;i.dispatch(_react_action_constants.mail.EMOJI_ADDED,{csid:e,emoji:t})}function inlinedEmojiAdded(i,o){var e=o.csid;i.dispatch(_react_action_constants.mail.EMOJI_INLINED_LOADED,{csid:e})}exports.__esModule=!0,exports.emojiPickerClosed=emojiPickerClosed,exports.emojiPickerOpened=emojiPickerOpened,exports.addEmojiToBody=addEmojiToBody,exports.inlinedEmojiAdded=inlinedEmojiAdded;var _react_action_constants=require("../../platform/react_action_constants");
},{"../../platform/react_action_constants":"./platform/react_action_constants"}],"./molecules/emoji_picker":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_constants=require("../../platform/rapid_client/constants"),_reactIntl=require("react-intl"),_fuji_icon_button=require("../../atoms/fuji_icon_button"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_actions=require("./actions.js"),_fuji_icon=require("../../atoms/constants/fuji_icon"),_lazy_component=require("../../atoms/lazy_component"),_popover_container=require("../../atoms/popover/popover_container.jsx"),_popover_container2=_interopRequireDefault(_popover_container),_popover_content=require("../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover_anchor=require("../../atoms/popover/popover_anchor.jsx"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_loading_indicator=require("../../atoms/loading_indicator.jsx"),_loading_indicator2=_interopRequireDefault(_loading_indicator),_popover=require("../../atoms/constants/popover"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_emoji=require("./styles/emoji"),_emoji2=_interopRequireDefault(_emoji),classNames=(0,_css2.default)(_emoji2.default),strings=(0,_reactIntl.defineMessages)({emojiPicker:{id:"emoji.emojipicker.title",defaultMessage:"Emoji Picker Button"}}),EmojiPicker=_react2.default.createClass({displayName:"EmojiPicker",contextTypes:{executeAction:_react.PropTypes.func.isRequired,intl:_reactIntl.intlShape.isRequired},closePicker:function(){this.refs.emojiPopoverContainer.hide(_popover.Triggers.CLICK);var e={mKey:_constants.MKEYS.EMOJI_CLOSE,sec:_constants.SEC_VALUES.COMPOSE_MSG,interactionType:_constants.INTERACTION_TYPES.click};this.props.focusBackEditor(),this.context.executeAction(_actions.emojiPickerClosed,{i13nModel:e})},render:function(){var e=this.context.intl.formatMessage;return _react2.default.createElement("div",null,_react2.default.createElement(_popover_container2.default,{ref:"emojiPopoverContainer"},_react2.default.createElement(_popover_anchor2.default,{"data-test-id":"emoji-picker-anchor"},_react2.default.createElement(_fuji_icon_button2.default,{"data-test-id":"emoji-picker-button",title:e(strings.emojiPicker),"aria-label":e(strings.emojiPicker),kind:_fuji_icon.Kinds.COMPOSE_EMOJI,size:_fuji_icon.Sizes.XS,colorState:_fuji_icon.ColorStates.NORMAL})),_react2.default.createElement(_popover_content2.default,{permittedArrowDirections:[_popover.PermittedArrowDirections.DOWN],hideArrow:!0,triggerOn:_popover.Triggers.CLICK,"data-test-id":"emoji-pop-up"},_react2.default.createElement(_lazy_component.LazyComponent,_extends({import:"./emoji_popup.jsx"},this.props,{closePicker:this.closePicker,"data-test-id":"emoji-lazy-component",_moduleGetter:function(){return require("./emoji_popup.jsx")}}),_react2.default.createElement(_lazy_component.When,{loading:!0},_react2.default.createElement("div",{className:classNames.lazyStyle},_react2.default.createElement(_loading_indicator2.default,null)))))))}});exports.default=EmojiPicker,module.exports=exports.default;
},{"../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../atoms/constants/popover":"./atoms/constants/popover","../../atoms/fuji_icon_button":"./atoms/fuji_icon_button","../../atoms/lazy_component":"./atoms/lazy_component","../../atoms/loading_indicator.jsx":"./atoms/loading_indicator","../../atoms/popover/popover_anchor.jsx":"./atoms/popover/popover_anchor","../../atoms/popover/popover_container.jsx":"./atoms/popover/popover_container","../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../platform/rapid_client/constants":"./platform/rapid_client/constants","./actions.js":"./molecules/emoji_picker/actions","./emoji_popup.jsx":"./molecules/emoji_picker/emoji_popup","./styles/emoji":"./molecules/emoji_picker/styles/emoji","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/emoji_picker/styles/emoji":[function(require,module,exports){
module.exports={className:{default:{headerContainer:"H_6NYI D_F ek_EZ gl_FM",categoryTitle:"A_6EqO i_6Fd5 y_rBP3E P_Z2iz9Nk C_Z1TsNWR",emojiBox:"z_Z14vXdP m_Z14vXdP je_e8l X_6DEy",emojiList:"ha_n D_X K_3rtg7 iz_FF P_0 M_Z1jSMQK",emojiLi:"W_73HH H_6VdP D_X",emojiDiv:"P_10b9G9 W_6MGW H_6MGW r_P D_X P4_12AAt W4_6UbO H4_6UbO",emojiContainer:"k_w p_a B_0 j_nWwhY I_52qC Q_69H5 W_3vrvs",categoryButton:"c27KHO0_n b_0 M_0 P_0 i_0 I_T y_1ACvVU A_6EqO r_P C_q ir3_2d4VCo",categoryContent:"D_F ab_C gl_C W_6D6F",categoryImage:"D_X em_N W_6Fd5 H_6Fd5 P_dRA",categoryContainer:"ha_n M_0 D_F P_2drJFI",categories:"r_P D_X H_6LUG i_6LUG E_6MGW F_Z1UCW0o",categorySelected:"r_P D_X H_6LUG i_6LUG E_6MGW F_Z1UCW0o m_mRxou",closeWrapper:"N_eo6 je_eo6",lazyStyle:"k_w p_a B_0 j_nWwhY I_52qC Q_69H5 W_3vrvs H_3vxXj D_F ab_C gl_C"}},_key:"zd8pl"};
},{"./src/molecules/emoji_picker/styles/atomic_emoji.css":"./molecules/emoji_picker/styles/atomic_emoji"}],"./molecules/empty_folder_video/constants":[function(require,module,exports){
"use strict";exports.__esModule=!0;var ChannelList=exports.ChannelList=["Featured","News","Finance","Sports","Lifestyles","Entertainment"],PLAYER_L=exports.PLAYER_L={WIDTH:"640px",HEIGHT:"360px"},PLAYER_S=exports.PLAYER_S={WIDTH:"480px",HEIGHT:"270px"},PLAYER_BREAKPOINT=exports.PLAYER_BREAKPOINT=1360,PLAYER_CONFIG=exports.PLAYER_CONFIG={autoplay:!0,mute:!0,playlistUI:{show:!0,position:"bottom"},YVAP:{accountId:"1097",timeout:20,vpaidTimeout:20},site:"Mail",html5:!1,expName:"mailemptyfolderHTML5"};
},{}],"./molecules/feature_cue/actions":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function writeUDB(t,e,_,a,n){var r,s;return t.udbClient.write((s={},s[_constants.UDBKeys.YM_MAIL_SCOUT]=(r={},r[e]=n||Math.round(Date.now()/1e3),r),s)).then(function(){t.dispatch(_)}).catch(function(){t.dispatch(a)})}function closeFeatureCue(t,e){var _=e.name,a=e.userAction,n=e.userResponse,r=t.getStore(_features2.default);if("click"===a){if(t.dispatch(_react_action_constants.mail.FEATURE_TRY_NOW_REQUESTED,{name:_,fromFeature:_}),n||r.isPersistent(_))return writeUDB(t,_,_react_action_constants.mail.FEATURE_CUE_MARK_AS_SUCCESS_SUCCEEDED,_react_action_constants.mail.FEATURE_CUE_MARK_AS_SUCCESS_FAILED,n)}else if(t.dispatch(_react_action_constants.mail.FEATURE_CLOSED,{name:_}),n||r.isPersistent(_))return writeUDB(t,_,_react_action_constants.mail.FEATURE_CUE_MARK_AS_CLOSE_SUCCEEDED,_react_action_constants.mail.FEATURE_CUE_MARK_AS_CLOSE_FAILED,n)}function markFeatureAsShown(t,e){var _=e.name,a=t.getStore(_features2.default);if(t.dispatch(_react_action_constants.mail.FEATURE_CUE_MARK_AS_SHOWN_REQUESTED,{name:_}),!a.isPersistent(_))return writeUDB(t,_,_react_action_constants.mail.FEATURE_CUE_MARK_AS_SHOWN_SUCCEEDED,_react_action_constants.mail.FEATURE_CUE_MARK_AS_SHOWN_FAILED)}exports.__esModule=!0,exports.closeFeatureCue=closeFeatureCue,exports.markFeatureAsShown=markFeatureAsShown;var _react_action_constants=require("../../platform/react_action_constants"),_constants=require("../../platform/udb_client/constants"),_features=require("../../stores/features"),_features2=_interopRequireDefault(_features);
},{"../../platform/react_action_constants":"./platform/react_action_constants","../../platform/udb_client/constants":"./platform/udb_client/constants","../../stores/features":"./stores/features"}],"./molecules/feature_cue/styles/information_cue":[function(require,module,exports){
module.exports={className:{default:{container:"I_52qC P_yJhcT s_3qWeB a_3zJDR D_F ek_BB em_N W_3rRhf",buttonContainer:"D_F gl_FM Y_6Eb4",header:"i_6MGW A_6FsP u_e69 C_Z291T0t U_fq7",body:"A_6EqO i_6FIA C_Z291T0t",actionContainer:"D_F M_ZfmI8S",pagination:"P_Z1crMe6 C_ZvsWfq",hotspotContainer:"D_F ek_EZ a_3zBDu",hostspotInfoWrapper:"I_52qC P_yJhcT s_3qWeB a_3zJDR D_F ek_BB em_N",svgStyle:"I_Z2aVTcY e_v8Hnf W_fq7 H_q em_0",svgStyleBackground:"I_Z2aVTcY P_yJhcT s_3qWeB a_3zJDR D_F ek_BB W_3rRhf j_Z12qqTV e_dRA",close:"p_a R_eo6 T_eTB",textCuebody:"y_Sa94g A_6FsP C_52qC i_6MGW",preTourContainer:"j_2b7cyR B_73HH L_6Fd5 p_a Z_7G9R"},svgStyleWithoutImage:{body:"i_6FIA A_6EqO C_Z291T0t a_3rBM0"},svgStyleImage:{svgStyle:"D_F gl_C ab_C I_Z2aVTcY e_v8Hnf s_3mT4V em_0"}},_key:"ZmVWMG"};
},{"./src/molecules/feature_cue/styles/atomic_information_cue.css":"./molecules/feature_cue/styles/atomic_information_cue"}],160:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_create_folder=require("../styles/create_folder"),_create_folder2=_interopRequireDefault(_create_folder),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_fuji_icon=require("../../../atoms/constants/fuji_icon"),_reactIntl=require("react-intl"),_folder_input=require("./folder_input.jsx"),_folder_input2=_interopRequireDefault(_folder_input),_themes=require("../../../platform/theming/themes"),strings=(0,_reactIntl.defineMessages)({create_new_folder:{id:"create_new_folder",defaultMessage:"Create new folder"},create_folder_label:{id:"create_folder_label",defaultMessage:"New Folder"},create_folder_input_aria_label:{id:"create_folder_input_aria_label",defaultMessage:"Enter folder name [Press enter to create folder]"}}),CreateFolder=_react2.default.createClass({displayName:"CreateFolder",contextTypes:{intl:_reactIntl.intlShape.isRequired,getCss:_react.PropTypes.func,getThemeMode:_react.PropTypes.func},getInitialState:function(){return{createMode:!1}},enableCreateMode:function(){this.setState({createMode:!0})},disableCreateMode:function(){this.setState({createMode:!1})},createFolder:function(e){var t=e.folderName,r=e.i13nModel;r=Object.assign({actionData:{depth:0}},r),this.disableCreateMode(),this.props.onCreate({folderName:t,i13nModel:r})},handleKeyDown:function(e){"Enter"!==e.key||this.state.createMode||(e.stopPropagation(),this.enableCreateMode())},renderNewFolderButton:function(e){var t=this.context.intl.formatMessage,r=this.context.getThemeMode(),a=r===_themes.ThemeModes.LIGHT?_fuji_icon.ColorStates.IMPROVED_GRAY_DARK:_fuji_icon.ColorStates.INHERITED;return _react2.default.createElement("div",{"data-iskeynav":!0,onClick:this.enableCreateMode,className:e.newFolderContainer},_react2.default.createElement(_fuji_icon_button2.default,{kind:_fuji_icon.Kinds.ADD,size:_fuji_icon.Sizes.XS,colorState:a,"aria-label":t(strings.create_new_folder),title:t(strings.create_new_folder),paddingLess:!0}),t(strings.create_folder_label))},render:function(){var e=this.props.indentation,t=this.context.getCss(_create_folder2.default,{indentation:e}),r=this.context.intl.formatMessage;return _react2.default.createElement("div",{className:t.container,onKeyDown:this.handleKeyDown,"data-test-id":"create-folder-container"},this.state.createMode?_react2.default.createElement(_folder_input2.default,{onInputSubmit:this.createFolder,onDismiss:this.disableCreateMode,placeholder:r(strings.create_new_folder),ariaLabel:r(strings.create_folder_input_aria_label),indentation:e,isScrolling:this.props.isScrolling}):this.renderNewFolderButton(t))}});exports.default=CreateFolder,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../platform/theming/themes":"./platform/theming/themes","../styles/create_folder":171,"./folder_input.jsx":163,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],161:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_fluxibleRouter=require("fluxible-router"),_folder_item=require("../styles/folder_item"),_folder_item2=_interopRequireDefault(_folder_item),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_folder_label=require("../../../atoms/folder_label.jsx"),_folder_label2=_interopRequireDefault(_folder_label),_folder_input=require("./folder_input.jsx"),_folder_input2=_interopRequireDefault(_folder_input),_unread_count=require("../../../atoms/unread_count.jsx"),_unread_count2=_interopRequireDefault(_unread_count),_folder_menu=require("./folder_menu.jsx"),_folder_menu2=_interopRequireDefault(_folder_menu),_button=require("../../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_loading_indicator=require("../../../atoms/loading_indicator.jsx"),_loading_indicator2=_interopRequireDefault(_loading_indicator),_logger=require("../../../platform/logger"),_logger2=_interopRequireDefault(_logger),_utils=require("../../../platform/utils"),_constants=require("../../../platform/rapid_client/constants.js"),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_folder=require("../../../platform/utils/folder"),_list=require("../../../platform/utils/list"),_object=require("../../../platform/utils/object"),_mail_constants=require("../../../platform/mail_constants"),_asymmetric_popover=require("../../../atoms/popover/asymmetric_popover.jsx"),_asymmetric_popover2=_interopRequireDefault(_asymmetric_popover),_popover=require("../../../atoms/constants/popover"),_actions=require("../../message_toolbar/actions"),_actions2=_interopRequireDefault(_actions),_constants2=require("../../message_toolbar/constants"),_constants3=_interopRequireDefault(_constants2),_mail_ui_vars=require("../../../platform/utils/mail_ui_vars"),_themes=require("../../../platform/theming/themes"),_constants4=require("../constants"),NOOP=function(){},strings=(0,_reactIntl.defineMessages)({folder_tooltip:{id:"folder_tooltip",defaultMessage:"{folderName}{isSelected} - {totalNum, plural,\n                =0 {{emailType, select,\n                           Draft {no drafts}\n                           other {no emails}}}\n                =1 {{emailType, select,\n                           Draft {{totalNum, number} draft}\n                           other {{totalNum, number} email}}}\n                =-1 {{emailType, select,\n                           Draft {}\n                           other {}}}\n                other {{emailType, select,\n                           Draft {{totalNum, number} drafts}\n                           other {{totalNum, number} emails}}}\n            } {unreadTooltip} {folderStateTooltip}"},unread_tooltip:{id:"unread_tooltip",defaultMessage:"{numUnreads, plural,\n                other {(# unread)}\n            }"},folder_is_open:{id:"folder_is_open",defaultMessage:"Folder is expanded. Collapse its contents using left arrow."},selected_folder:{id:"selected_folder",defaultMessage:", selected"},folder_is_closed:{id:"folder_is_closed",defaultMessage:"Folder is collapsed. Expand its contents using right arrow."},show_folders:{id:"show_folders",defaultMessage:"Click to show folders"},hide_folders:{id:"hide_folders",defaultMessage:"Click to hide folders"},rename_folder_input_placeholder:{id:"rename_folder_input_placeholder",defaultMessage:"Rename folder"},rename_folder_input_aria_label:{id:"rename_folder_input_aria_label",defaultMessage:"Enter folder name [Press enter to rename folder]"},rename_folder_dismiss_input:{id:"rename_folder_dismiss_input",defaultMessage:"Dismiss input"},show_folder_menu:{id:"show_folder_menu",defaultMessage:"Show folder menu"},empty_trash_tooltip:{id:"empty_trash_tooltip",defaultMessage:"Empty Trash folder"},empty_spam_tooltip:{id:"empty_spam_tooltip",defaultMessage:"Empty Spam folder"}}),Folder=_react2.default.createClass({displayName:"Folder",contextTypes:{executeAction:_react.PropTypes.func,intl:_reactIntl.intlShape.isRequired,getCss:_react.PropTypes.func,getThemeMode:_react.PropTypes.func},componentWillReceiveProps:function(e){this.props.folder.unread!==e.folder.unread&&e.folder.unread<0&&_logger2.default.error("The user received a negative folder count.")},componentWillUnmount:function(){this.targets=null},getDefaultProps:function(){return{onClick:NOOP,onRenameStart:NOOP,onRenameSubmit:NOOP,onRenameCancel:NOOP,renamingFolder:!1,isActive:!1,isActualFolder:!0,showFolderMenu:!1,depth:0,hasChildren:!1}},getInitialState:function(){return{dragover:!1}},_getChevronTitle:function(){var e=this.context.intl.formatMessage;switch(this.props.chevron){case _mail_constants.Chevron.LEFT:return e(strings.show_folders);case _mail_constants.Chevron.DOWN:return e(strings.hide_folders);default:return""}},getTitleText:function(){var e=this.props,t=e.folder,r=e.isActive,o=this.context.intl.formatMessage,a="",n="",s=r?o(strings.selected_folder):null;switch(this.props.chevron){case _mail_constants.Chevron.LEFT:n=o(strings.folder_is_closed);break;case _mail_constants.Chevron.DOWN:n=o(strings.folder_is_open);break;default:n=""}switch((0,_folder.getPrimaryFolderType)(t)){case _mail_constants.FolderTypes.DRAFT:case _mail_constants.FolderTypes.SENT:case _mail_constants.FolderTypes.BULK:case _mail_constants.FolderTypes.TRASH:case _mail_constants.FolderTypes.ARCHIVE:break;default:a=o(strings.unread_tooltip,{numUnreads:(0,_folder.getFolderMessageCount)(t)})}return o(strings.folder_tooltip,{folderName:t.name,emailType:t.id,totalNum:t.total,unreadTooltip:a,folderStateTooltip:n,isSelected:s})},_getI13nModel:function(){var e=(0,_folder.getPrimaryFolderType)(this.props.folder),t=_constants.MKEYS[e+"_FOLDER"],r=this.props.folder.isSystem?_constants.SEC_VALUES.LEFTRAIL_SYSFOLDER:_constants.SEC_VALUES.LEFTRAIL_USERFOLDER,o={depth:this.props.depth};return{mKey:t,sec:r,actionData:o}},handleKeyDown:function(e){switch(e.key){case" ":case"Enter":e.stopPropagation(),this.handleNavClick(e);break;case"ArrowLeft":case"ArrowRight":e.stopPropagation(),this.props.onToggleExpansion(e);break;default:return}},handleNavClick:function(e){e.preventDefault();var t=this._getI13nModel();t.interactionType=(0,_utils.getInteractionFromEvent)(e),this.props.onClick(e,this.props.folder.id,t)},handleDoubleClick:function(e){e.stopPropagation(),this.props.folder.isSystem||this.props.hasChildren||this.props.onRenameStart()},handleRename:function(e){var t=e.folderName,r=e.i13nModel;r=Object.assign({actionData:{depth:this.props.depth}},r),this.props.onRenameSubmit({originalFolderName:this.props.folder.name,newFolderName:t,folderId:this.props.folder.id,i13nModel:r})},renderInput:function(){var e=this.context.intl.formatMessage;return _react2.default.createElement(_folder_input2.default,{onInputSubmit:this.handleRename,onDismiss:this.props.onRenameCancel,initialFolderName:this.props.folder.name,placeholder:e(strings.rename_folder_input_placeholder),ariaLabel:e(strings.rename_folder_input_aria_label),cancelTitle:e(strings.rename_folder_dismiss_input)})},renderLabel:function(e){var t=this.props,r=t.folder,o=t.chevron,a=this.props.chevron!==_mail_constants.Chevron.NONE;return _react2.default.createElement("div",{className:e.labelContainer,title:this.getTitleText()},a?_react2.default.createElement(_button2.default,{title:this._getChevronTitle(),onClick:this.props.onToggleExpansion,className:e.chevron,"data-test-id":"folder-expand-btn"},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.CHEVRON_UP,colorState:_fuji_icon3.ColorStates.INHERITED,size:_fuji_icon3.Sizes.XS,rotate:o===_mail_constants.Chevron.DOWN?_fuji_icon3.Rotate.D180:_fuji_icon3.Rotate.D90})):null,_react2.default.createElement("span",{className:e.label},_react2.default.createElement(_folder_label2.default,{folderDisplayType:(0,_folder.getFolderDisplayType)(r),name:r.name,"data-test-id":"folder-label"})))},shouldHandleDrag:function(){var e=this.props.folder,t=e.types;return!(t.indexOf(_mail_constants.FolderTypes.SENT)>=0||t.indexOf(_mail_constants.FolderTypes.DRAFT)>=0)},handleDrop:function(e){if(e.preventDefault(),this.shouldHandleDrag()){var t=e.dataTransfer.getData("text"),r=this.props.selection,o=r&&Object.keys(r),a=this.props.folder.id;o&&o.length>0&&this.context.executeAction(_actions2.default[_constants3.default.LIST].move,{destinationFolderId:a,listId:t,messageGroupIds:o}),this.targets=[],this.setState({dragover:!1})}},handleDragEnter:function(e){e.preventDefault(),this.shouldHandleDrag()&&(this.targets||(this.targets=[]),this.targets.push(e.currentTarget),1===this.targets.length&&this.setState({dragover:!0}))},handleDragLeave:function(e){e.preventDefault(),this.shouldHandleDrag()&&this.targets&&(this.targets.pop(),0===this.targets.length&&this.setState({dragover:!1}))},handleDragOver:function(e){e.preventDefault(),this.shouldHandleDrag()&&(this.state.dragover||this.setState({dragover:!0}))},shouldRenderTrashCanIcon:function(){var e=this.props,t=e.isHovered,r=e.showFolderMenu,o=e.isRefreshing,a=e.folder;return!(o||!r||!t||a.types.indexOf(_mail_constants.FolderTypes.TRASH)===-1&&a.types.indexOf(_mail_constants.FolderTypes.BULK)===-1)},handleEmptyFolder:function(e){e.preventDefault(),this.props.folder.total>0&&this.props.onClear(this.props.folder)},renderFolderStateIcon:function(e){var t=this,r=this.props,o=r.isHovered,a=r.showFolderMenu,n=r.isRefreshing,s=r.folder,i=r.isActive,l=this.context.intl.formatMessage,d=!(n||o||a),_=this.shouldRenderTrashCanIcon();if(n)return _react2.default.createElement("div",{className:e.loader},_react2.default.createElement(_loading_indicator2.default,{size:_loading_indicator.Sizes.S,"data-test-id":"folder-loading-indicator"}));if(d)return _react2.default.createElement("span",{className:e.unreadWrapper},_react2.default.createElement(_unread_count2.default,{value:(0,_folder.getFolderMessageCount)(s),isActive:i,highlight:this.props.highlightUnreadCount,whiteBackground:this.context.getThemeMode()!==_themes.ThemeModes.LIGHT}));if(_){var u=l(s.types.indexOf(_mail_constants.FolderTypes.TRASH)>=0?strings.empty_trash_tooltip:strings.empty_spam_tooltip);return _react2.default.createElement("span",{className:e.trashIconWrapper,title:u},_react2.default.createElement(_fuji_icon_button2.default,{"data-test-id":"trashcan-icon",kind:_fuji_icon3.Kinds.DELETE,size:_fuji_icon3.Sizes.XXS,colorState:_fuji_icon3.ColorStates.INHERITED,onClick:this.handleEmptyFolder,title:u,ariaLabel:u}))}return _react2.default.createElement("div",{className:e.folderMenu},_react2.default.createElement(_asymmetric_popover2.default,{permittedArrowDirections:[_popover.PermittedArrowDirections.UP,_popover.PermittedArrowDirections.DOWN],triggerOn:_asymmetric_popover.OnTriggers.CLICK,triggerOff:_asymmetric_popover.OffTriggers.CLICK,arrowSize:_popover.ArrowSizes.XS,offset:4*_mail_ui_vars.GRID_UNIT,align:_popover.Align.CENTER,overflowScroll:!1,onShown:function(){return t.props.handleMenuVisibility(!0)},onHide:function(){return t.props.handleMenuVisibility(!1)}},_react2.default.createElement("div",{className:e.folderMenuIcon,"data-test-id":"folder-menu-hook"},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.INPUT_ARROW_DOWN,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.INHERITED,title:l(strings.show_folder_menu),ariaLabel:l(strings.show_folder_menu)})),_react2.default.createElement(_folder_menu2.default,{"data-test-id":"folder-menu",folder:this.props.folder,onDelete:this.props.onDelete,onSubfolderCreate:this.props.onSubfolderCreate,onFolderMenuShow:this.props.onFolderMenuShow,onMarkRead:this.props.onMarkRead,onArchive:this.props.onArchive,onClear:this.props.onClear,onShow:this.props.onFolderMenuShow,onRename:this.props.onRenameStart,hasChildren:this.props.hasChildren,depth:this.props.depth})))},getContainerClassName:function(e){var t=this.props.isActive,r=this.state.dragover;return r?t?e.activeDragoverContainer:e.dragoverContainer:t?e.activeContainer:e.container},render:function(){var e=this,t=this.props,r=t.folder,o=t.depth,a=t.isActive,n=t.isActualFolder,s=t.showFolderMenu,i=t.sortOrder,l=t.hasChildren,d=this.props.chevron!==_mail_constants.Chevron.NONE,_=void 0;r.isSystem&&!l||(_=0===o?d?_constants4.TOPFOLDER_WITH_ICON:_constants4.TOPFOLDER_WITHOUT_ICON:d?_constants4.SUBFOLDER_WITH_ICON:_constants4.SUBFOLDER_WITHOUT_ICON);var u=this.context.getCss(_folder_item2.default,{indentation:_,showFolderMenu:s,isActive:a});return this.props.renamingFolder?this.renderInput():n?_react2.default.createElement("div",{className:this.getContainerClassName(u),"data-test-folder-container":r.name,"data-test-id":"folder-item-container",onMouseEnter:function(){return e.props.handleHover(!0)},onMouseLeave:function(){return e.props.handleHover(!1)},onDragOver:this.handleDragOver,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop,"data-iskeynav":!0,tabIndex:-1},_react2.default.createElement(_fluxibleRouter.NavLink,{routeName:_mail_constants.RouteNames.FOLDER,navParams:{fid:(0,_list.serializeListIdForFolderRoute)((0,_list.getListIdFromFolderId)(r.id,i))},className:a?u.activeNavContainer:u.navContainer,"data-test-folder-name":r.name,"data-test-id":"folder-list-item",onFocus:this.props.onFocus,onClick:this.handleNavClick,onDoubleClick:this.handleDoubleClick,onKeyDown:this.handleKeyDown,"aria-label":this.getTitleText(),"data-test-unread-count":r.unread,"data-test-total-count":r.total,"data-test-is-active":a,tabIndex:-1},this.renderLabel(u)),this.renderFolderStateIcon(u)):_react2.default.createElement("div",{className:u.folderLabelContainer},_react2.default.createElement("span",{className:u.label},_react2.default.createElement(_folder_label2.default,{folderDisplayType:(0,_folder.getFolderDisplayType)(r),name:r.name,"data-test-id":"folder-label"})))}});exports.default=Folder,module.exports=exports.default;
},{"../../../atoms/button.jsx":"./atoms/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/popover":"./atoms/constants/popover","../../../atoms/folder_label.jsx":"./atoms/folder_label","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../atoms/loading_indicator.jsx":"./atoms/loading_indicator","../../../atoms/popover/asymmetric_popover.jsx":"./atoms/popover/asymmetric_popover","../../../atoms/unread_count.jsx":100,"../../../platform/logger":"./platform/logger","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/rapid_client/constants.js":"./platform/rapid_client/constants","../../../platform/theming/themes":"./platform/theming/themes","../../../platform/utils":"./platform/utils","../../../platform/utils/folder":"./platform/utils/folder","../../../platform/utils/list":"./platform/utils/list","../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../../platform/utils/object":"./platform/utils/object","../../message_toolbar/actions":219,"../../message_toolbar/constants":223,"../constants":169,"../styles/folder_item":173,"./folder_input.jsx":163,"./folder_menu.jsx":165,"fluxible-router":"./node_modules/fluxible-router/index.js","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],162:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_folder_tree=require("../styles/folder_tree"),_folder_tree2=_interopRequireDefault(_folder_tree),_folder=require("./folder.jsx"),_folder2=_interopRequireDefault(_folder),_mail_constants=require("../../../platform/mail_constants"),_constants=require("../constants"),strings=(0,_reactIntl.defineMessages)({folders_label:{id:"folders_label",defaultMessage:"Folders"}}),FolderContainer=_react2.default.createClass({displayName:"FolderContainer",contextTypes:{intl:_reactIntl.intlShape.isRequired,getCss:_react.PropTypes.func},getInitialState:function(){return{expanded:this.props.showCustomFolders}},expand:function(){this.state.expanded||this.toggle()},collapse:function(){this.state.expanded&&this.toggle()},toggle:function(){var e=this.state.expanded;this.props.onToggleCustomFolders(!e),this.setState({expanded:!e})},handleClick:function(e){e.stopPropagation(),e.preventDefault(),this.toggle()},handleKeyDown:function(e){switch(e.preventDefault(),e.key){case" ":case"Enter":this.toggle();break;case"ArrowLeft":this.collapse();break;case"ArrowRight":this.expand();break;default:return}},render:function(){var e=this.context.intl.formatMessage,t=this.context.getCss(_folder_tree2.default,{indentation:_constants.INDENTATION_NONE}),a={id:"-1",types:[_mail_constants.FolderTypes.USER],name:e(strings.folders_label),isSystem:!1,total:-1};return _react2.default.createElement("div",null,_react2.default.createElement("div",{"data-iskeynav":!0,onKeyDown:this.handleKeyDown,className:t.folderContainer},_react2.default.createElement(_folder2.default,{isActive:!1,folder:a,onToggleExpansion:function(){},chevron:_mail_constants.Chevron.NONE,isActualFolder:!1}),_react2.default.createElement("span",{"data-test-id":"toggle-folder-tree",className:t.toggleFolderTree,onClick:this.handleClick},this.state.expanded?_react2.default.createElement(_reactIntl.FormattedMessage,{id:"hide_label",defaultMessage:"Hide"}):_react2.default.createElement(_reactIntl.FormattedMessage,{id:"show_label",defaultMessage:"Show"}))),this.props.children&&this.state.expanded?_react2.default.createElement("ul",{className:t.folderTree,"data-test-id":"custom-folder-list"},_react2.default.createElement("li",null,this.props.children)):null)}});exports.default=FolderContainer,module.exports=exports.default;
},{"../../../platform/mail_constants":"./platform/mail_constants","../constants":169,"../styles/folder_tree":176,"./folder.jsx":161,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],163:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_folder_input=require("../styles/folder_input"),_folder_input2=_interopRequireDefault(_folder_input),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_constants=require("./../constants"),_fuji_icon=require("../../../atoms/constants/fuji_icon"),_bidi_input=require("../../../atoms/bidi_input.jsx"),_bidi_input2=_interopRequireDefault(_bidi_input),_utils=require("../../../platform/utils"),_popover_container=require("../../../atoms/popover/popover_container.jsx"),_popover_container2=_interopRequireDefault(_popover_container),_popover_anchor=require("../../../atoms/popover/popover_anchor.jsx"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_popover_content=require("../../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover=require("../../../atoms/constants/popover"),_mail_ui_vars=require("../../../platform/utils/mail_ui_vars"),_themes=require("../../../platform/theming/themes"),keyCodeMap={ESCAPE:27,ENTER:13,TAB:9},invalid_chars="/ \\ %",strings=(0,_reactIntl.defineMessages)({folder_dismiss_input:{id:"folder_dismiss_input",defaultMessage:"Dismiss input"},folder_submit_input:{id:"folder_submit_input",defaultMessage:"Submit input"},folder_invalid_chars:{id:"folder_invalid_chars",defaultMessage:"Folder names may not contain {invalid_chars}"}}),FolderInput=_react2.default.createClass({displayName:"FolderInput",getDefaultProps:function(){return{indentation:_constants.INDENTATION_NONE}},contextTypes:{intl:_reactIntl.intlShape.isRequired,getThemeMode:_react.PropTypes.func},getInitialState:function(){return{folderName:this.props.initialFolderName||""}},handleKeyDown:function(e){e.keyCode===keyCodeMap.ESCAPE&&this.props.onDismiss(),e.keyCode!==keyCodeMap.ENTER&&e.keyCode!==keyCodeMap.TAB||this.performFolderOperation(e)},handleChange:function(e){this.setState({folderName:e.target.value})},handleBlur:function(e){if(e.relatedTarget&&e.relatedTarget.parentNode!==this.containerNode)return""===this.state.folderName.trim()?this.props.onDismiss():void this.performFolderOperation(e)},performFolderOperation:function(e){var t=this.state.folderName,r={interactionType:(0,_utils.getInteractionFromEvent)(e)};(0,_utils.isValidFolderName)(t)&&this.props.onInputSubmit({folderName:t.trim(),i13nModel:r})},focusInput:function(e){e&&e.focus()},render:function(){var e=this,t=this.context.intl.formatMessage,r=(0,_utils.isValidFolderName)(this.state.folderName),i=(0,_css2.default)(_folder_input2.default,{invalidFolderName:this.state.folderName&&!r,validFolderName:r,indentation:this.props.indentation}),o=this.props.onDismiss,a=this.context.getThemeMode(),n=a===_themes.ThemeModes.LIGHT?_fuji_icon.ColorStates.NORMAL:_fuji_icon.ColorStates.INVERTED,s=t(strings.folder_submit_input),l=t(strings.folder_dismiss_input);return _react2.default.createElement("div",{className:i.container,ref:function(t){return e.containerNode=t}},_react2.default.createElement(_fuji_icon_button2.default,{onClick:o,kind:_fuji_icon.Kinds.CLOSE_MINI,size:_fuji_icon.Sizes.XS,colorState:n,"aria-label":l,title:l,"data-test-id":"icon-btn-close",className:i.closeButton,paddingLess:!0}),_react2.default.createElement(_popover_container2.default,{className:i.popoverContainer},_react2.default.createElement(_popover_anchor2.default,null,_react2.default.createElement("div",{className:i.inputSubmitContainer},_react2.default.createElement("div",{className:i.inputContainer},_react2.default.createElement(_bidi_input2.default,{className:i.input,type:"text",ref:this.focusInput,value:this.state.folderName,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,placeholder:this.props.placeholder,"aria-label":this.props.ariaLabel})),_react2.default.createElement(_fuji_icon_button2.default,{onClick:this.performFolderOperation,kind:_fuji_icon.Kinds.ENTER,colorState:_fuji_icon.ColorStates.INVERTED,size:_fuji_icon.Sizes.XXS,className:i.okIcon,title:s,"aria-label":s}))),!this.state.folderName||this.props.isScrolling||r?null:_react2.default.createElement(_popover_content2.default,{triggerOn:_popover.Triggers.MOUNT,permittedArrowDirections:[_popover.PermittedArrowDirections.UP,_popover.PermittedArrowDirections.DOWN],zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH},_react2.default.createElement("div",{className:i.popover},_react2.default.createElement(_reactIntl.FormattedMessage,_extends({},strings.folder_invalid_chars,{values:{invalid_chars:invalid_chars}}))))))}});exports.default=FolderInput,module.exports=exports.default;
},{"../../../atoms/bidi_input.jsx":"./atoms/bidi_input","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/popover":"./atoms/constants/popover","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../atoms/popover/popover_anchor.jsx":"./atoms/popover/popover_anchor","../../../atoms/popover/popover_container.jsx":"./atoms/popover/popover_container","../../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../../platform/theming/themes":"./platform/theming/themes","../../../platform/utils":"./platform/utils","../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../styles/folder_input":172,"./../constants":169,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],164:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_folder_tree=require("../styles/folder_tree"),_folder_tree2=_interopRequireDefault(_folder_tree),_reactIntl=require("react-intl"),_object=require("../../../platform/utils/object"),_mail_constants=require("../../../platform/mail_constants"),_types=require("../../../types"),_folder_tree_node=require("./folder_tree_node"),_folder_tree_node2=_interopRequireDefault(_folder_tree_node),_lazy_component=require("../../../atoms/lazy_component"),_popover_content=require("../../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover=require("../../../atoms/constants/popover"),_mail_ui_vars=require("../../../platform/utils/mail_ui_vars"),_array=require("../../../platform/utils/array"),_web_storage=require("../../../platform/web_storage"),COLLAPSED_LIST_SIZE=5,SHOW_ALL="showAllSystemFolders",FolderList=_react2.default.createClass({displayName:"FolderList",contextTypes:{intl:_reactIntl.intlShape.isRequired,getCss:_react.PropTypes.func},getInitialState:function(){var e=(0,_array.append)(this.props.expandedFolders),t=!this.props.collapsible||"true"===(0,_web_storage.readFromLocalStorage)(SHOW_ALL);return{expandedFolders:e,showAll:t}},toggleExpansion:function(e,t){var r=this.state.expandedFolders,o=void 0;o=t?(0,_array.append)(r,e):(0,_array.remove)(r,r.indexOf(e),1),this.setState({expandedFolders:o}),this.props.onFolderExpandToggle(e,t)},toggleShowAll:function(){var e=this.state.showAll;this.setState({showAll:!e}),(0,_web_storage.writeToLocalStorage)("showAllSystemFolders",(!e).toString())},getFolderTreeNodes:function(e){var t=this,r=e.folderNodes,o=e.onOpen,n=e.onRename,l=e.onDelete,a=e.onMarkRead,d=e.onArchive,s=e.onClear,i=e.onSubfolderCreate,u=e.onFolderMenuShow,p=e.highlightFolderId,_=e.folderRefreshing,f=e.onSmartViewOpen,c=e.selection,h=this.flattenAndFilterNodes(r,0);return h.map(function(e,r){var h=e.depth,g=e.folderNode;return _react2.default.createElement(_folder_tree_node2.default,{key:g.folder.id,folderNode:g,onOpen:o,onRename:n,onDelete:l,onMarkRead:a,onArchive:d,onClear:s,onSubfolderCreate:i,highlightFolderId:p,sortOrder:t.props.sortOrder,folderRefreshing:_,index:r,onSmartViewOpen:f,onFolderMenuShow:u,depth:h,toggleExpansion:t.toggleExpansion,expanded:t.state.expandedFolders.indexOf(g.folder.id)!==-1,showStarredCue:t.props.showStarredCue,ref:g.folder.name.toLowerCase()+"Button",selection:c})})},flattenAndFilterNodes:function(e,t){for(var r=[],o=0;o<e.length;o++){var n=e[o],l=this.state.expandedFolders.indexOf(n.folder.id)!==-1;r.push({depth:t,folderNode:n}),n.children.length>0&&l&&(r=r.concat(this.flattenAndFilterNodes(n.children,t+1)))}return r},onSubfolderCreate:function(e){var t=e.folder,r=e.subfolderName,o=e.i13nModel;this.toggleExpansion(t.id,!0),this.props.onSubfolderCreate({folder:t,subfolderName:r,i13nModel:o})},updateContent:function(){this.refs._content.updatePosition()},renderStarredCue:function(){return this.props.showStarredCue&&this.refs.starredButton?_react2.default.createElement(_popover_content2.default,{popoverAnchor:this.refs.starredButton,triggerOn:_popover.Triggers.MOUNT,permittedArrowDirections:[_popover.PermittedArrowDirections.LEFT],ref:"_content",zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../../scout_cue/",cueName:"starredCue",onShow:this.updateContent,close:this.refs.starredButton.props.folderNode.folder.id===this.props.highlightFolderId,_moduleGetter:function(){return require("../../scout_cue/")}})):null},render:function(){var e=this.props,t=e.indentation,r=e.folderNodes,o=e.onOpen,n=e.onRename,l=e.onDelete,a=e.onMarkRead,d=e.onArchive,s=e.onClear,i=e.highlightFolderId,u=e.folderRefreshing,p=e.onFolderMenuShow,_=e.onSmartViewOpen,f=e.selection,c=e.collapsible,h=this.context.getCss(_folder_tree2.default,{indentation:t}),g=this.getFolderTreeNodes({folderNodes:r,onOpen:o,onRename:n,onDelete:l,onMarkRead:a,onArchive:d,onClear:s,onSubfolderCreate:this.onSubfolderCreate,highlightFolderId:i,folderRefreshing:u,onFolderMenuShow:p,onSmartViewOpen:_,selection:f}),m=this.state.showAll;return r.length?_react2.default.createElement("ul",{className:h.folderTree},m?g:g.slice(0,COLLAPSED_LIST_SIZE),this.renderStarredCue(),c&&g.length>COLLAPSED_LIST_SIZE?_react2.default.createElement("li",{onClick:this.toggleShowAll,className:h.collapseFolders,"data-test-id":m?"folder-list-collapse":"folder-list-expand"},m?_react2.default.createElement(_reactIntl.FormattedMessage,{id:"less_label",defaultMessage:"Less"}):_react2.default.createElement(_reactIntl.FormattedMessage,{id:"more_label",defaultMessage:"More"})):null):null}});exports.default=FolderList,module.exports=exports.default;
},{"../../../atoms/constants/popover":"./atoms/constants/popover","../../../atoms/lazy_component":"./atoms/lazy_component","../../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/array":"./platform/utils/array","../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../../platform/utils/object":"./platform/utils/object","../../../platform/web_storage":"./platform/web_storage","../../../types":"./types","../../scout_cue/":"./molecules/scout_cue","../styles/folder_tree":176,"./folder_tree_node":166,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],165:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function noop(){}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_folder_label=require("../../../atoms/folder_label"),_folder_label2=_interopRequireDefault(_folder_label),_navigable_list=require("../../../atoms/navigable_list.jsx"),_navigable_list2=_interopRequireDefault(_navigable_list),_menu_item=require("../../../atoms/menu/menu_item.jsx"),_menu_item2=_interopRequireDefault(_menu_item),_navigable_list3=require("../../../atoms/constants/navigable_list"),_list_item=require("../../../atoms/list_item.jsx"),_list_item2=_interopRequireDefault(_list_item),_folder_menu=require("../styles/folder_menu.js"),_folder_menu2=_interopRequireDefault(_folder_menu),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_folder=require("../../../platform/utils/folder"),_mail_constants=require("../../../platform/mail_constants"),_utils=require("../../../platform/utils"),classNames=(0,_css2.default)(_folder_menu2.default),FolderMenu=_react2.default.createClass({displayName:"FolderMenu",handleDeleteClick:function(e){e.preventDefault();var t={interactionType:(0,_utils.getInteractionFromEvent)(e),actionData:{depth:this.props.depth}};this.props.onDelete({folder:this.props.folder,i13nModel:t})},handleRenameClick:function(e){e.preventDefault(),this.props.onRename()},handleSubfolderClick:function(e){e.preventDefault(),this.props.onSubfolderCreate()},handleMarkReadClick:function(e){e.preventDefault();var t={interactionType:(0,_utils.getInteractionFromEvent)(e),actionData:{numMsg:this.props.folder.unread}};this.props.onMarkRead({folder:this.props.folder,i13nModel:t})},handleArchiveClick:function(e){e.preventDefault(),this.props.onArchive(this.props.folder)},handleClearClick:function(e){e.preventDefault(),this.props.onClear(this.props.folder)},getMarkAsReadMenuItem:function(e){var t=0===this.props.folder.total||0===this.props.folder.unread;return _react2.default.createElement(_menu_item2.default,{key:e,name:"mark_folder_read",disabled:t,onClick:this.handleMarkReadClick},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"mark_folder_read",defaultMessage:"Mark emails as read"}))},getArchiveMenuItem:function(e){var t=(0,_folder.getPrimaryFolderType)(this.props.folder),a=0===this.props.folder.total;return _react2.default.createElement(_menu_item2.default,{key:e,name:"archive_folder_messages",disabled:a,onClick:this.handleArchiveClick},t===_mail_constants.FolderTypes.INBOX?_react2.default.createElement(_reactIntl.FormattedMessage,{id:"archive_inbox_messages",defaultMessage:"Clean your Inbox"}):_react2.default.createElement(_reactIntl.FormattedMessage,{id:"archive_folder_messages",defaultMessage:"Archive all emails"}))},getDeleteMenuItem:function(e){var t=(0,_folder.getPrimaryFolderType)(this.props.folder),a=0===this.props.folder.total;return _react2.default.createElement(_menu_item2.default,{key:e,name:"delete_folder_messages",disabled:a,onClick:this.handleClearClick},t===_mail_constants.FolderTypes.BULK||t===_mail_constants.FolderTypes.TRASH?_react2.default.createElement(_reactIntl.FormattedMessage,{id:"folder_menu.empty_folder_messages",defaultMessage:"Empty {folderName}",values:{folderName:_react2.default.createElement(_folder_label2.default,{folderDisplayType:t,name:this.props.folder.name})}}):_react2.default.createElement(_reactIntl.FormattedMessage,{id:"delete_folder_messages",defaultMessage:"Delete all emails"}))},getRenameFolderMenuItem:function(e){var t=this.props.hasChildren;return _react2.default.createElement(_menu_item2.default,{key:e,name:"rename_folder",disabled:t,onClick:this.handleRenameClick},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"rename_folder",defaultMessage:"Rename folder"}))},getMoveFolderMenuItem:function(e){return _react2.default.createElement(_menu_item2.default,{key:e,disabled:!0,onClick:noop},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"move_folder",defaultMessage:"Move folder"}))},getDeleteFolderMenuItem:function(e){var t=this.props,a=t.folder,r=t.hasChildren,l=r||a.total>0;return _react2.default.createElement(_menu_item2.default,{key:e,name:"delete_folder",disabled:l,onClick:this.handleDeleteClick},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"delete_folder",defaultMessage:"Delete folder"}))},getCreateFolderMenuItem:function(e){return _react2.default.createElement(_menu_item2.default,{key:e,name:"create_subfolder",onClick:this.handleSubfolderClick,"data-test-id":"create-subfolder"},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"create_subfolder",defaultMessage:"Create subfolder"}))},getSeparatorItem:function(e){return _react2.default.createElement(_list_item2.default,{key:e,className:classNames.separator})},renderMenuItems:function(){var e=this,t=(0,_folder.getFolderMenuItems)(this.props.folder),a=[];return t.map(function(t,r){switch(t){case _mail_constants.FolderMenuItems.MARK_READ:a.push(e.getMarkAsReadMenuItem(r));break;case _mail_constants.FolderMenuItems.ARCHIVE:a.push(e.getArchiveMenuItem(r));break;case _mail_constants.FolderMenuItems.DELETE:a.push(e.getDeleteMenuItem(r));break;case _mail_constants.FolderMenuItems.RENAME_FOLDER:a.push(e.getRenameFolderMenuItem(r));break;case _mail_constants.FolderMenuItems.MOVE_FOLDER:a.push(e.getMoveFolderMenuItem(r));break;case _mail_constants.FolderMenuItems.DELETE_FOLDER:a.push(e.getDeleteFolderMenuItem(r));break;case _mail_constants.FolderMenuItems.CREATE_FOLDER:a.push(e.getCreateFolderMenuItem(r));break;case _mail_constants.FolderMenuItems.SEPARATOR:a.push(e.getSeparatorItem(r))}}),a},render:function(){return _react2.default.createElement("div",{className:classNames.container},_react2.default.createElement(_navigable_list2.default,{kind:_navigable_list3.Kinds.MENU,focusOnMount:!0,onShow:this.props.onShow},this.renderMenuItems()))}});exports.default=FolderMenu,module.exports=exports.default;
},{"../../../atoms/constants/navigable_list":"./atoms/constants/navigable_list","../../../atoms/folder_label":"./atoms/folder_label","../../../atoms/list_item.jsx":"./atoms/list_item","../../../atoms/menu/menu_item.jsx":79,"../../../atoms/navigable_list.jsx":"./atoms/navigable_list","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils":"./platform/utils","../../../platform/utils/folder":"./platform/utils/folder","../styles/folder_menu.js":175,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],166:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_folder=require("./folder.jsx"),_folder2=_interopRequireDefault(_folder),_smartview=require("../../../apps/mail/controller_views/smartview.jsx"),_smartview2=_interopRequireDefault(_smartview),_mail_constants=require("../../../platform/mail_constants"),_smartview3=require("../../../platform/utils/smartview"),_object=require("../../../platform/utils/object"),_types=require("../../../types"),_folder_input=require("./folder_input.jsx"),_folder_input2=_interopRequireDefault(_folder_input),_constants=require("./../constants"),highlightUnreadCountFolders={},strings=(0,_reactIntl.defineMessages)({create_new_folder:{id:"create_new_folder",defaultMessage:"Create new folder"},create_folder_input_aria_label:{id:"create_folder_input_aria_label",defaultMessage:"Enter folder name [Press enter to create folder]"}}),FolderTreeNode=_react2.default.createClass({displayName:"FolderTreeNode",contextTypes:{intl:_reactIntl.intlShape.isRequired},getInitialState:function(){return{creatingSubfolder:!1,renamingFolder:!1,isMenuVisible:!1,isHovered:!1}},componentWillReceiveProps:function(e){var t=e.folderNode.folder;this.shouldHighlightUnreadCount(t)&&(highlightUnreadCountFolders[t.id]=!0)},shouldComponentUpdate:function(e,t){return this.props.folderNode.folder.id!==e.folderNode.folder.id||this.props.sortOrder!==e.sortOrder||this.props.folderNode.folder.unread!==e.folderNode.folder.unread||this.props.folderNode.folder.total!==e.folderNode.folder.total||this.props.folderNode.folder.name!==e.folderNode.folder.name||this.props.folderNode.children.length!==e.folderNode.children.length||this.props.expanded!==e.expanded||this.props.highlightFolderId!==e.highlightFolderId||this.props.folderRefreshing!==e.folderRefreshing||this.props.selection!==e.selection||this.state.highlightUnreadCount!==t.highlightUnreadCount||this.state.creatingSubfolder!==t.creatingSubfolder||this.state.renamingFolder!==t.renamingFolder||this.state.isMenuVisible!==t.isMenuVisible||this.state.isHovered!==t.isHovered},shouldHighlightUnreadCount:function(e){var t=this.props.folderNode.folder;return e.highestModSeq!==t.highestModSeq&&e.uidNext!==t.uidNext&&e.unread>0&&this.props.highlightFolderId!==e.id},handleToggle:function(e){var t=this.props.folderNode.folder.id;e.stopPropagation(),e.preventDefault(),e.key?"ArrowRight"!==e.key||this.props.expanded?"ArrowLeft"===e.key&&this.props.expanded&&this.props.toggleExpansion(t,!1):this.props.toggleExpansion(t,!0):this.props.toggleExpansion(t,!this.props.expanded)},handleCreateSubfolderStart:function(){this.setState({creatingSubfolder:!0})},handleRenameFolderStart:function(){this.setState({renamingFolder:!0})},handleRenameFolderSubmit:function(e){var t=e.originalFolderName,r=e.newFolderName,o=e.folderId,i=e.i13nModel;t!==r&&this.props.onRename({originalFolderName:t,newFolderName:r,folderId:o,i13nModel:i}),this.setState({renamingFolder:!1})},handleRenameFolderCancel:function(){this.setState({renamingFolder:!1})},handleCreateSubfolderDone:function(e){var t=e.folderName,r=e.i13nModel;this.setState({creatingSubfolder:!1}),r=Object.assign({actionData:{depth:this.props.depth+1}},r),this.props.onSubfolderCreate({folder:this.props.folderNode.folder,subfolderName:t,i13nModel:r})},handleCreateSubfolderDismiss:function(){this.setState({creatingSubfolder:!1})},handleMenuVisibility:function(e){this.setState({isMenuVisible:e})},handleHover:function(e){this.setState({isHovered:e})},handleFolderOpen:function(e,t,r){var o=this.props.folderNode.folder;highlightUnreadCountFolders[o.id]&&(highlightUnreadCountFolders[o.id]=!1),this.props.onOpen(e,t,r)},getChevronState:function(){var e=!!this.props.folderNode.children.length,t=_mail_constants.Chevron.NONE;return e&&(t=this.props.expanded?_mail_constants.Chevron.DOWN:_mail_constants.Chevron.LEFT),t},render:function(){var e=this.context.intl.formatMessage,t=this.props.folderNode,r=t.folder,o=t.children,i={padding:"0 0 0 "+16*this.props.depth+"px"};return _react2.default.createElement("li",{style:i},r.isSmartView?_react2.default.createElement(_smartview2.default,{onClick:this.props.onSmartViewOpen,type:(0,_smartview3.getSmartViewType)(r),total:r.total,isActive:this.props.highlightFolderId===r.id,handleHover:this.handleHover}):_react2.default.createElement(_folder2.default,{folder:r,sortOrder:this.props.sortOrder,hasChildren:o.length>0,depth:this.props.depth,onClick:this.handleFolderOpen,onRenameStart:this.handleRenameFolderStart,onRenameSubmit:this.handleRenameFolderSubmit,onRenameCancel:this.handleRenameFolderCancel,renamingFolder:this.state.renamingFolder,isActive:this.props.highlightFolderId===r.id,isRefreshing:this.props.highlightFolderId===r.id&&this.props.folderRefreshing,chevron:this.getChevronState(),onToggleExpansion:this.handleToggle,handleMenuVisibility:this.handleMenuVisibility,handleHover:this.handleHover,showFolderMenu:this.state.isHovered||this.state.isMenuVisible,onDelete:this.props.onDelete,onSubfolderCreate:this.handleCreateSubfolderStart,onMarkRead:this.props.onMarkRead,onFolderMenuShow:this.props.onFolderMenuShow,onArchive:this.props.onArchive,onClear:this.props.onClear,isHovered:this.state.isHovered,selection:this.props.selection,highlightUnreadCount:highlightUnreadCountFolders[r.id]||!1}),this.state.creatingSubfolder?_react2.default.createElement(_folder_input2.default,{onInputSubmit:this.handleCreateSubfolderDone,onDismiss:this.handleCreateSubfolderDismiss,placeholder:e(strings.create_new_folder),ariaLabel:e(strings.create_folder_input_aria_label),indentation:_constants.INDENTATION_NORMAL}):null)}});exports.default=FolderTreeNode,module.exports=exports.default;
},{"../../../apps/mail/controller_views/smartview.jsx":43,"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/object":"./platform/utils/object","../../../platform/utils/smartview":"./platform/utils/smartview","../../../types":"./types","./../constants":169,"./folder.jsx":161,"./folder_input.jsx":163,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],167:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_fluxibleRouter=require("fluxible-router"),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_smart_view=require("../styles/smart_view"),_smart_view2=_interopRequireDefault(_smart_view),_mail_constants=require("../../../platform/mail_constants"),_smartview=require("../../../platform/utils/smartview"),_list=require("../../../platform/utils/list"),_lazy_component=require("../../../atoms/lazy_component"),NOOP=function(){},strings=(0,_reactIntl.defineMessages)({UNREAD:{id:"smart_view_unread_tooltip",defaultMessage:"Unread - Click to see unread mails"},smart_view_selected_UNREAD:{id:"smart_view_selected_unread_tooltip",defaultMessage:"Unread, selected - Showing unread mails"},STARRED:{id:"smart_view_starred_tooltip",defaultMessage:"Starred - Click to see starred mails"},smart_view_selected_STARRED:{id:"smart_view_selected_starred_tooltip",defaultMessage:"Starred, selected - Showing starred mails"},DOCUMENTS:{id:"smart_view_document_tooltip",defaultMessage:"Documents - Click to see all documents"},smart_view_selected_DOCUMENTS:{id:"smart_view_selected_document_tooltip",defaultMessage:"Documents, selected - Showing all documents"},PHOTOS:{id:"smart_view_photos_tooltip",defaultMessage:"Photos - Click to see all Photos"},smart_view_selected_PHOTOS:{id:"smart_view_selected_photos_tooltip",defaultMessage:"Photos, selected - Showing all Photos"},TUTORIAL:{id:"smart_view_tutorial_tooltip",defaultMessage:"Tutorials - Click to see all tutorial videos"},smart_view_selected_TUTORIAL:{id:"smart_view_selected_tutorial_tooltip",defaultMessage:"Tutorial, selected - Showing the tutorial video"},smart_view_UNREAD:{id:"smart_view_unread",defaultMessage:"Unread"},smart_view_STARRED:{id:"smart_view_starred",defaultMessage:"Starred"},show_folder_menu:{id:"show_folder_menu",defaultMessage:"Show folder menu"},smart_view_DOCUMENTS:{id:"smart_view_document",defaultMessage:"Documents"},smart_view_PHOTOS:{id:"smart_view_photos",defaultMessage:"Photos"},smart_view_TUTORIAL:{id:"smart_view_tutorial",defaultMessage:"Tutorials"}}),SmartView=_react2.default.createClass({displayName:"SmartView",contextTypes:{intl:_reactIntl.intlShape.isRequired,getCss:_react.PropTypes.func,getThemeMode:_react.PropTypes.func},getDefaultProps:function(){return{onClick:NOOP,isActive:!1,showDocumentsBadge:!1}},getTitleText:function(){var e=this.context.intl.formatMessage,t=this.props,a=t.isActive,i=t.type;return e(a?strings["smart_view_selected_"+i]:strings[i])},getFujiIconKind:function(e){switch(e){case"DOCUMENTS":return _fuji_icon3.Kinds.DOCUMENTS_S;case"PHOTOS":return _fuji_icon3.Kinds.TAB_IMAGES;case"TUTORIAL":return _fuji_icon3.Kinds.CAL_MAYBE;default:return""}},handleKeyDown:function(e){switch(e.key){case" ":case"Enter":e.stopPropagation(),this.props.onClick(e,this.props.type);break;default:return}},handleNavClick:function(e){this.props.onClick(e,this.props.type)},handleHover:function(e){this.props.handleHover(e)},renderLabel:function(e){var t=this.props.type,a=this.context.intl.formatMessage(strings["smart_view_"+t]),i=_react2.default.createElement("span",null,a);return _react2.default.createElement("div",{className:e.labelContainer,title:this.getTitleText()},_react2.default.createElement("span",{className:e.label},i))},getListId:function(){var e=this.props,t=e.type,a=e.activeAccount,i={accountIds:[a.id]},s=(0,_smartview.getSmartViewSearchQuery)(t,i),r=(0,_list.serializeListIdForRoute)((0,_list.convertSearchQueryToListId)(s));return r},getIconColor:function(){var e=void 0;return e="LIGHT"===this.context.getThemeMode()?this.props.isActive?_fuji_icon3.ColorStates.NORMAL:_fuji_icon3.ColorStates.DISABLED:this.props.isActive?_fuji_icon3.ColorStates.INVERTED:_fuji_icon3.ColorStates.SMARTVIEW_DARK},getIcon:function(e,t,a,i,s,r,o){return"DOCUMENTS"===o&&this.props.showDocumentsBadge?_react2.default.createElement("div",{className:e.badgeContainer,"data-test-id":"hotspots-badge"},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../../feature_cue/atoms/badge",cueName:"HSDocumentsBadge",size:_fuji_icon3.Sizes.XS,kind:_fuji_icon3.Kinds.DOCUMENTS_S,_moduleGetter:function(){return require("../../feature_cue/atoms/badge")}},_react2.default.createElement(_lazy_component.When,{loading:!0},_react2.default.createElement("span",{className:e.smartViewIcon},_react2.default.createElement(_fuji_icon2.default,{kind:a,size:i,title:s,colorState:r}))))):t?_react2.default.createElement("span",{className:e.smartViewIcon},_react2.default.createElement(_fuji_icon2.default,{kind:a,size:i,title:s,colorState:r})):null},render:function(){var e=this.props,t=e.type,a=e.isActive,i=this.getFujiIconKind(t),s=this.getIconColor(),r=!!i,o=!r&&a,n=this.context.getCss(_smart_view2.default,{isActive:a,isActiveAndNoIcon:o,hasIcon:r}),l=this.getListId();return _react2.default.createElement(_fluxibleRouter.NavLink,{routeName:t===_mail_constants.SmartViewTypes.TUTORIAL?_mail_constants.RouteNames.TUTORIAL:_mail_constants.RouteNames.SEARCH,onMouseEnter:this.handleHover.bind(this,!0),onMouseLeave:this.handleHover.bind(this,!1),navParams:{query:l},className:a?n.activeContainer:n.container,"data-test-smartview-type":t,"data-test-id":"smartview-list-item",onClick:this.handleNavClick,onKeyDown:this.handleKeyDown,"aria-label":this.getTitleText(),"data-test-is-active":a,"data-iskeynav":!0,tabIndex:-1},this.getIcon(n,r,i,_fuji_icon3.Sizes.XS,this.getTitleText(),s,t),this.renderLabel(n))}});exports.default=SmartView,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/lazy_component":"./atoms/lazy_component","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/list":"./platform/utils/list","../../../platform/utils/smartview":"./platform/utils/smartview","../../feature_cue/atoms/badge":"./molecules/feature_cue/atoms/badge","../styles/smart_view":177,"fluxible-router":"./node_modules/fluxible-router/index.js","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],168:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_smartview_list=require("../styles/smartview_list"),_smartview_list2=_interopRequireDefault(_smartview_list),_reactIntl=require("react-intl"),_constants=require("../constants"),_smartview=require("../../../platform/utils/smartview"),_smartview2=require("../../../apps/mail/controller_views/smartview.jsx"),_smartview3=_interopRequireDefault(_smartview2),_lazy_component=require("../../../atoms/lazy_component"),_popover_content=require("../../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover=require("../../../atoms/constants/popover"),_mail_constants=require("../../../platform/mail_constants"),_mail_ui_vars=require("../../../platform/utils/mail_ui_vars"),strings=(0,_reactIntl.defineMessages)({views_label:{id:"views_label",defaultMessage:"Views"},views_is_open:{id:"views_is_open",defaultMessage:"Views is expanded. Collapse its contents using left arrow."},views_is_close:{id:"views_is_close",defaultMessage:"Views is collapase. Expand its contents using right arrow."}}),SmartviewList=_react2.default.createClass({displayName:"SmartviewList",contextTypes:{intl:_reactIntl.intlShape.isRequired,getCss:_react.PropTypes.func},getInitialState:function(){return{expanded:!0,isHovered:!1}},expand:function(){this.state.expanded||this.setState({expanded:!0})},collapse:function(){this.state.expanded&&this.setState({expanded:!1})},toggleExpand:function(){this.setState({expanded:!this.state.expanded})},handleClick:function(e){e.stopPropagation(),e.preventDefault(),this.toggleExpand()},handleKeyDown:function(e){switch(e.key){case" ":case"Enter":e.stopPropagation(),e.preventDefault(),this.toggleExpand();break;case"Arrowleft":e.stopPropagation(),e.preventDefault(),this.collapse();break;case"ArrowRight":e.stopPropagation(),e.preventDefault(),this.expand();break;default:return}},handleHover:function(e){this.setState({isHoverd:e})},getTitleText:function(){var e=this.context.intl.formatMessage;return e(this.state.expanded?strings.views_is_open:strings.views_is_close)},renderLabel:function(e){var t=this.context.intl.formatMessage,a=t(strings.views_label),r=_react2.default.createElement("span",null,a);return _react2.default.createElement("div",{className:e.labelContainer,title:this.getTitleText()},_react2.default.createElement("span",{className:e.label},r),_react2.default.createElement("span",{"data-test-id":"toggle-smartview-list",className:e.toggleSmartViews,onClick:this.handleClick},this.state.expanded?_react2.default.createElement(_reactIntl.FormattedMessage,{id:"hide_views_label",defaultMessage:"Hide"}):_react2.default.createElement(_reactIntl.FormattedMessage,{id:"show_views_label",defaultMessage:"Show"})))},renderSmartviews:function(){var e=this,t=this.props,a=t.smartViews,r=t.onSmartViewOpen,s=t.highlightSmartView;return a.map(function(t){var a=t.folder;return _react2.default.createElement("li",{key:a.id},_react2.default.createElement(_smartview3.default,{onClick:r,type:(0,_smartview.getSmartViewType)(a),isActive:s===a.id,handleHover:e.handleHover,total:a.total,ref:a.name.toLowerCase()+"Button"}),a.name===_mail_constants.SmartViewTypes.PHOTOS?e.renderPhotosCue():null,a.name===_mail_constants.SmartViewTypes.DOCUMENTS?e.renderHSDocumentsCue():null)})},updateContent:function(){this.refs._content.updatePosition()},renderPhotosCue:function(){return this.props.showPhotosCue&&this.refs.photosButton?_react2.default.createElement(_popover_content2.default,{popoverAnchor:this.refs.photosButton,triggerOn:_popover.Triggers.MOUNT,permittedArrowDirections:[_popover.PermittedArrowDirections.LEFT],ref:"_content",zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../../scout_cue/",cueName:"photosCue",onShow:this.updateContent,close:this.refs.photosButton.props.isActive,_moduleGetter:function(){return require("../../scout_cue/")}})):null},renderHSDocumentsCue:function(){return this.props.showHSDocumentsCue&&this.refs.documentsButton?_react2.default.createElement(_popover_content2.default,{popoverAnchor:this.refs.documentsButton,triggerOn:_popover.Triggers.MOUNT,permittedArrowDirections:[_popover.PermittedArrowDirections.LEFT],ref:"_content",zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH,bg:_popover.BackgroundKinds.GRADIENT},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../../scout_cue/",cueName:"HSDocumentsCue",onShow:this.updateContent,_moduleGetter:function(){return require("../../scout_cue/")}})):null},render:function(){var e=this.context.getCss(_smartview_list2.default,{indentation:_constants.INDENTATION_NONE});return _react2.default.createElement("div",null,_react2.default.createElement("div",{"data-iskeynav":!0,"data-test-id":"keyboard-toggle-smartview-list",onKeyDown:this.handleKeyDown,className:e.smartviewContainer},this.renderLabel(e)),this.state.expanded?_react2.default.createElement("ul",{className:e.smartviewList},this.renderSmartviews()):null)}});exports.default=SmartviewList,module.exports=exports.default;
},{"../../../apps/mail/controller_views/smartview.jsx":43,"../../../atoms/constants/popover":"./atoms/constants/popover","../../../atoms/lazy_component":"./atoms/lazy_component","../../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../../platform/utils/smartview":"./platform/utils/smartview","../../scout_cue/":"./molecules/scout_cue","../constants":169,"../styles/smartview_list":178,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],169:[function(require,module,exports){
"use strict";exports.__esModule=!0;var INDENTATION_NORMAL=exports.INDENTATION_NORMAL="INDENTATION_NORMAL",INDENTATION_NONE=exports.INDENTATION_NONE="INDENTATION_NONE",TOPFOLDER_WITH_ICON=exports.TOPFOLDER_WITH_ICON="TOPFOLDER_WITH_ICON",TOPFOLDER_WITHOUT_ICON=exports.TOPFOLDER_WITHOUT_ICON="TOPFOLDER_WITHOUT_ICON",SUBFOLDER_WITH_ICON=exports.SUBFOLDER_WITH_ICON="SUBFOLDER_WITH_ICON",SUBFOLDER_WITHOUT_ICON=exports.SUBFOLDER_WITHOUT_ICON="SUBFOLDER_WITHOUT_ICON";
},{}],170:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_folder=require("../../platform/utils/folder"),_object=require("../../platform/utils/object"),_mail_constants=require("../../platform/mail_constants"),_folder_list=require("./atoms/folder_list.jsx"),_folder_list2=_interopRequireDefault(_folder_list),_create_folder=require("./atoms/create_folder.jsx"),_create_folder2=_interopRequireDefault(_create_folder),_folder_container=require("./atoms/folder_container.jsx"),_folder_container2=_interopRequireDefault(_folder_container),_smartview_list=require("./atoms/smartview_list.jsx"),_smartview_list2=_interopRequireDefault(_smartview_list),_constants=require("./constants"),_folder_list3=require("./styles/folder_list"),_folder_list4=_interopRequireDefault(_folder_list3),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),classNames=(0,_css2.default)(_folder_list4.default),Folders=_react2.default.createClass({displayName:"Folders",contextTypes:{executeAction:_react.PropTypes.func,config:_react.PropTypes.object},getSmartViews:function(){var e=(0,_folder.getSmartViewsForDisplay)();if(!this.context.config.tutorial){var r=e.findIndex(function(e){return e.folder.id===_mail_constants.SmartViewTypes.TUTORIAL});e.splice(r,1)}return e},render:function(){var e,r=this.props.folders,t=(0,_folder.getCustomFoldersForDisplay)(r),o=this.getSmartViews(),s=(0,_folder.getPrimaryFoldersAndSmartViewsForDisplay)(r,(e={},e[_mail_constants.SmartViewTypes.UNREAD]=this.props.unreadCountForAccount,e));return _react2.default.createElement("div",{className:"folder-list "+classNames.scrollOuter,"data-test-id":"folder-list"},_react2.default.createElement(_folder_list2.default,{highlightFolderId:this.props.highlightFolderId,sortOrder:this.props.sortOrder,folderRefreshing:this.props.folderRefreshing,folderNodes:s,onOpen:this.props.onFolderOpen,onSmartViewOpen:this.props.onSmartViewOpen,onRename:this.props.onFolderRename,onDelete:this.props.onFolderDelete,onMarkRead:this.props.onFolderMarkRead,onArchive:this.props.onFolderArchive,onClear:this.props.onFolderClear,onSubfolderCreate:this.props.onSubfolderCreate,onFolderMenuShow:this.props.onFolderMenuShow,indentation:_constants.INDENTATION_NONE,showStarredCue:this.props.showStarredCue,expandedFolders:this.props.expandedFolders,onFolderExpandToggle:this.props.onFolderExpandToggle,selection:this.props.selection,collapsible:this.context.config.collapsibleSystemFolders}),this.context.config.smartViews?_react2.default.createElement("div",null,_react2.default.createElement("div",{className:classNames.listSpacer}),_react2.default.createElement(_smartview_list2.default,{smartViews:o,onSmartViewOpen:this.props.onSmartViewOpen,highlightSmartView:this.props.highlightFolderId,showPhotosCue:this.props.showPhotosCue,showStarredCue:this.props.showStarredCue,showHSDocumentsCue:this.props.showHSDocumentsCue})):null,_react2.default.createElement("div",{className:classNames.listSpacer}),_react2.default.createElement(_folder_container2.default,{showCustomFolders:this.props.showCustomFolders,onToggleCustomFolders:this.props.onToggleCustomFolders},_react2.default.createElement(_create_folder2.default,{onCreate:this.props.onFolderCreate,indentation:_constants.INDENTATION_NORMAL,isScrolling:this.props.isScrolling}),t.length>0?_react2.default.createElement(_folder_list2.default,{expandedFolders:this.props.expandedFolders,onFolderExpandToggle:this.props.onFolderExpandToggle,highlightFolderId:this.props.highlightFolderId,sortOrder:this.props.sortOrder,folderRefreshing:this.props.folderRefreshing,folderNodes:t,onOpen:this.props.onFolderOpen,onRename:this.props.onFolderRename,onDelete:this.props.onFolderDelete,onMarkRead:this.props.onFolderMarkRead,onArchive:this.props.onFolderArchive,onClear:this.props.onFolderClear,onSubfolderCreate:this.props.onSubfolderCreate,onFolderMenuShow:this.props.onFolderMenuShow,indentation:_constants.INDENTATION_NORMAL,selection:this.props.selection,collapsible:!1}):null))}});exports.default=Folders,module.exports=exports.default;
},{"../../platform/mail_constants":"./platform/mail_constants","../../platform/utils/folder":"./platform/utils/folder","../../platform/utils/object":"./platform/utils/object","./atoms/create_folder.jsx":160,"./atoms/folder_container.jsx":162,"./atoms/folder_list.jsx":164,"./atoms/smartview_list.jsx":168,"./constants":169,"./styles/folder_list":174,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],171:[function(require,module,exports){
module.exports={className:{default:{container:"D_F ab_C H_6NIX N_fq7 C_Z1YRXYn I4_2iedUU",newFolderContainer:"D_F ab_C r_P cdPFi_Z291T0t ir3_2d4VCo it3_dRA I4_n"},"indentation-INDENTATION_NORMAL":{newFolderContainer:"P_ZmsKgw"},"themeMode-MEDIUM":{container:"C_2sqbRh",newFolderContainer:"cdPFi_2sqbRh ir3_Z1a7UWG"},"themeMode-DARK":{container:"C_2sqbRh",newFolderContainer:"cdPFi_2sqbRh ir3_Z1a7UWG"},"themeCombo-LIGHT_DEFAULT":{container:"I4_2iedUU",activeContainer:"n_Z1dQEKn I_2ieeaE I4_2iedUU",dragoverContainer:"I_2iedUU",activeDragoverContainer:"n_Z1dQEKn I_2iedUU"},"themeCombo-MEDIUM_DEFAULT":{container:"I4_2iedUU",activeContainer:"n_Z1dQEKn I_2ieeaE I4_2iedUU",dragoverContainer:"I_2iedUU",activeDragoverContainer:"n_Z1dQEKn I_2iedUU"},"themeCombo-DARK_DEFAULT":{container:"I4_2iedUU",activeContainer:"n_Z1dQEKn I_2ieeaE I4_2iedUU",dragoverContainer:"I_2iedUU",activeDragoverContainer:"n_Z1dQEKn I_2iedUU"},"themeCombo-LIGHT_SUNRISE":{container:"I4_iPGvQ",activeContainer:"n_zIfvL I_iPGKA I4_iPGvQ",dragoverContainer:"I_iPGvQ",activeDragoverContainer:"n_zIfvL I_iPGvQ"},"themeCombo-MEDIUM_SUNRISE":{container:"I4_iPGvQ",activeContainer:"n_zIfvL I_iPGKA I4_iPGvQ",dragoverContainer:"I_iPGvQ",activeDragoverContainer:"n_zIfvL I_iPGvQ"},"themeCombo-DARK_SUNRISE":{container:"I4_iPGvQ",activeContainer:"n_zIfvL I_iPGKA I4_iPGvQ",dragoverContainer:"I_iPGvQ",activeDragoverContainer:"n_zIfvL I_iPGvQ"},"themeCombo-LIGHT_AQUA_GREEN":{container:"I4_2sGXKL",activeContainer:"n_ZXCGpT I_2sGY0v I4_2sGXKL",dragoverContainer:"I_2sGXKL",activeDragoverContainer:"n_ZXCGpT I_2sGXKL"},"themeCombo-MEDIUM_AQUA_GREEN":{container:"I4_2sGXKL",activeContainer:"n_ZXCGpT I_2sGY0v I4_2sGXKL",dragoverContainer:"I_2sGXKL",activeDragoverContainer:"n_ZXCGpT I_2sGXKL"},"themeCombo-DARK_AQUA_GREEN":{container:"I4_2sGXKL",activeContainer:"n_ZXCGpT I_2sGY0v I4_2sGXKL",dragoverContainer:"I_2sGXKL",activeDragoverContainer:"n_ZXCGpT I_2sGXKL"},"themeCombo-LIGHT_AQUA_BLUE":{container:"I4_ZzKE3L",activeContainer:"n_Z1aUIMt I_ZzKDO2 I4_ZzKE3L",dragoverContainer:"I_ZzKE3L",activeDragoverContainer:"n_Z1aUIMt I_ZzKE3L"},"themeCombo-MEDIUM_AQUA_BLUE":{container:"I4_ZzKE3L",activeContainer:"n_Z1aUIMt I_ZzKDO2 I4_ZzKE3L",dragoverContainer:"I_ZzKE3L",activeDragoverContainer:"n_Z1aUIMt I_ZzKE3L"},"themeCombo-DARK_AQUA_BLUE":{container:"I4_ZzKE3L",activeContainer:"n_Z1aUIMt I_ZzKDO2 I4_ZzKE3L",dragoverContainer:"I_ZzKE3L",activeDragoverContainer:"n_Z1aUIMt I_ZzKE3L"},"themeCombo-LIGHT_DEEP_PURPLE":{container:"I4_Z1I2xFu",activeContainer:"n_pU8rS I_Z1I2xqK I4_Z1I2xFu",dragoverContainer:"I_Z1I2xFu",activeDragoverContainer:"n_pU8rS I_Z1I2xFu"},"themeCombo-MEDIUM_DEEP_PURPLE":{container:"I4_Z1I2xFu",activeContainer:"n_pU8rS I_Z1I2xqK I4_Z1I2xFu",dragoverContainer:"I_Z1I2xFu",activeDragoverContainer:"n_pU8rS I_Z1I2xFu"},"themeCombo-DARK_DEEP_PURPLE":{container:"I4_Z1I2xFu",activeContainer:"n_pU8rS I_Z1I2xqK I4_Z1I2xFu",dragoverContainer:"I_Z1I2xFu",activeDragoverContainer:"n_pU8rS I_Z1I2xFu"},"themeCombo-LIGHT_BLUE_NIGHT":{container:"I4_NDpE4",activeContainer:"n_Z14uK9Y I_NDpSN I4_NDpE4",dragoverContainer:"I_NDpE4",activeDragoverContainer:"n_Z14uK9Y I_NDpE4"},"themeCombo-MEDIUM_BLUE_NIGHT":{container:"I4_NDpE4",activeContainer:"n_Z14uK9Y I_NDpSN I4_NDpE4",dragoverContainer:"I_NDpE4",activeDragoverContainer:"n_Z14uK9Y I_NDpE4"},"themeCombo-DARK_BLUE_NIGHT":{container:"I4_NDpE4",activeContainer:"n_Z14uK9Y I_NDpSN I4_NDpE4",dragoverContainer:"I_NDpE4",activeDragoverContainer:"n_Z14uK9Y I_NDpE4"}},_key:"1BuDGj"};
},{"./src/molecules/folder_list/styles/atomic_create_folder.css":"./molecules/folder_list/styles/atomic_create_folder"}],172:[function(require,module,exports){
module.exports={className:{default:{container:"D_F ab_C",closeButton:"en_0",inputContainer:"D_F b_0 em_N",inputSubmitContainer:"D_F em_N ab_C b_2w4l8N",input:"W_6D6F k_w H_6LEV y_1ACvVU X_eo6 b_0",okIcon:"I_ZroviD en_0 W_6LEV H_6LEV",popoverContainer:"D_F",popover:"P_eTB C_ZnTFMv W_3na5G k_w A_6Eb4"},invalidFolderName:{inputSubmitContainer:"b_Z1222NH"},validFolderName:{okIcon:"I_Z2aVTcY"},"indentation-INDENTATION_NORMAL":{container:"P_ZmsKgw"}},_key:"10GmEu"};
},{"./src/molecules/folder_list/styles/atomic_folder_input.css":"./molecules/folder_list/styles/atomic_folder_input"}],173:[function(require,module,exports){
module.exports={className:{default:{container:"D_F p_R k_w r_P H_6NIX W_6D6F X_6DEy N_fq7 ab_C ir3_2d4VCo it3_dBP I4_2iedUU",activeContainer:"D_F p_R k_w r_P H_6NIX W_6D6F X_6DEy N_fq7 ab_C ir3_2d4VCo it3_dBP I4_2iedUU n_Z1dQEKn I_2ieeaE",dragoverContainer:"D_F p_R k_w r_P H_6NIX W_6D6F X_6DEy N_fq7 ab_C ir3_2d4VCo it3_dBP I4_2iedUU I_2iedUU",activeDragoverContainer:"D_F p_R k_w r_P H_6NIX W_6D6F X_6DEy N_fq7 ab_C ir3_2d4VCo it3_dBP I4_2iedUU n_Z1dQEKn I_2iedUU",labelContainer:"D_F W_6D6F ab_C i_6FIA p_R",activeLabelContainer:"D_F W_6D6F ab_C i_6FIA p_R",folderLabelContainer:"D_F W_6D6F ab_C i_6FIA p_R",label:"E_6VdP G_e J_x o_h H_6FIA",chevron:"c27KHO0_n I_T b_0 P_0 E_0 D_F cdPFi_Z1YRXYn",folderMenu:"c27KHO0_n I_T b_0 X_fq7 v_h D_F em_N gl_CH je_e8l p_a T_0 R_0",folderMenuIcon:"cdPFi_Z26U5se r_P E_fq7 cdPFi4_Z291T0t",loader:"p_a T_eo6 R_6Eb4",unreadWrapper:"p_a T_eo6 R_fq7 H_6FIA",navContainer:"W_6D6F C_Z1YRXYn",activeNavContainer:"W_6D6F C_Z291T0t u_b",trashIconWrapper:"D_F em_N gl_CH cdPFi_Z26U5se r_P cdPFi4_ZkiIcp"},isActive:{labelContainer:"Q_689y",unreadWrapper:"T_eDQ"},"indentation-TOPFOLDER_WITH_ICON":{container:"X_0",activeContainer:"X_0",dragoverContainer:"X_0",activeDragoverContainer:"X_0"},"indentation-TOPFOLDER_WITHOUT_ICON":{container:"X_6LEV",activeContainer:"X_6LEV",dragoverContainer:"X_6LEV",activeDragoverContainer:"X_6LEV"},"indentation-SUBFOLDER_WITH_ICON":{container:"X_0",activeContainer:"X_0",dragoverContainer:"X_0",activeDragoverContainer:"X_0"},"indentation-SUBFOLDER_WITHOUT_ICON":{container:"X_6EGz",activeContainer:"X_6EGz",dragoverContainer:"X_6EGz",activeDragoverContainer:"X_6EGz"},showFolderMenu:{folderMenu:"v_v"},"themeMode-MEDIUM":{container:"C_2sqbRh ir3_Z1a7UWG",activeContainer:"C_52qC ir3_Z1a7UWG",navContainer:"C_2sqbRh ir3_Z1a7UWG",activeNavContainer:"C_52qC ir3_Z1a7UWG",dragoverContainer:"C_2sqbRh",activeDragoverContainer:"C_52qC",folderLabelContainer:"C_2sqbQg",chevron:"cdPFi_2sqbRh",folderMenuIcon:"cdPFi_ZpQYvz cdPFi4_52qC",trashIconWrapper:"cdPFi_ZpQYvz cdPFi4_Zkij7I"},"themeMode-DARK":{container:"C_2sqbRh ir3_Z1a7UWG",activeContainer:"C_52qC ir3_Z1a7UWG",navContainer:"C_2sqbRh ir3_Z1a7UWG",activeNavContainer:"C_52qC ir3_Z1a7UWG",dragoverContainer:"C_2sqbRh",activeDragoverContainer:"C_52qC",folderLabelContainer:"C_2sqbQg",chevron:"cdPFi_2sqbRh",folderMenuIcon:"cdPFi_ZpQYvz cdPFi4_52qC",trashIconWrapper:"cdPFi_ZpQYvz cdPFi4_Zkij7I"},"themeCombo-LIGHT_DEFAULT":{container:"I4_2iedUU",activeContainer:"n_Z1dQEKn I_2ieeaE I4_2iedUU",dragoverContainer:"I_2iedUU",activeDragoverContainer:"n_Z1dQEKn I_2iedUU"},"themeCombo-MEDIUM_DEFAULT":{container:"I4_2iedUU",activeContainer:"n_Z1dQEKn I_2ieeaE I4_2iedUU",dragoverContainer:"I_2iedUU",activeDragoverContainer:"n_Z1dQEKn I_2iedUU"},"themeCombo-DARK_DEFAULT":{container:"I4_2iedUU",activeContainer:"n_Z1dQEKn I_2ieeaE I4_2iedUU",dragoverContainer:"I_2iedUU",activeDragoverContainer:"n_Z1dQEKn I_2iedUU"},"themeCombo-LIGHT_SUNRISE":{container:"I4_iPGvQ",activeContainer:"n_zIfvL I_iPGKA I4_iPGvQ",dragoverContainer:"I_iPGvQ",activeDragoverContainer:"n_zIfvL I_iPGvQ"},"themeCombo-MEDIUM_SUNRISE":{container:"I4_iPGvQ",activeContainer:"n_zIfvL I_iPGKA I4_iPGvQ",dragoverContainer:"I_iPGvQ",activeDragoverContainer:"n_zIfvL I_iPGvQ"},"themeCombo-DARK_SUNRISE":{container:"I4_iPGvQ",activeContainer:"n_zIfvL I_iPGKA I4_iPGvQ",dragoverContainer:"I_iPGvQ",activeDragoverContainer:"n_zIfvL I_iPGvQ"},"themeCombo-LIGHT_AQUA_GREEN":{container:"I4_2sGXKL",activeContainer:"n_ZXCGpT I_2sGY0v I4_2sGXKL",dragoverContainer:"I_2sGXKL",activeDragoverContainer:"n_ZXCGpT I_2sGXKL"},"themeCombo-MEDIUM_AQUA_GREEN":{container:"I4_2sGXKL",activeContainer:"n_ZXCGpT I_2sGY0v I4_2sGXKL",dragoverContainer:"I_2sGXKL",activeDragoverContainer:"n_ZXCGpT I_2sGXKL"},"themeCombo-DARK_AQUA_GREEN":{container:"I4_2sGXKL",activeContainer:"n_ZXCGpT I_2sGY0v I4_2sGXKL",dragoverContainer:"I_2sGXKL",activeDragoverContainer:"n_ZXCGpT I_2sGXKL"},"themeCombo-LIGHT_AQUA_BLUE":{container:"I4_ZzKE3L",activeContainer:"n_Z1aUIMt I_ZzKDO2 I4_ZzKE3L",dragoverContainer:"I_ZzKE3L",activeDragoverContainer:"n_Z1aUIMt I_ZzKE3L"},"themeCombo-MEDIUM_AQUA_BLUE":{container:"I4_ZzKE3L",activeContainer:"n_Z1aUIMt I_ZzKDO2 I4_ZzKE3L",dragoverContainer:"I_ZzKE3L",activeDragoverContainer:"n_Z1aUIMt I_ZzKE3L"},"themeCombo-DARK_AQUA_BLUE":{container:"I4_ZzKE3L",activeContainer:"n_Z1aUIMt I_ZzKDO2 I4_ZzKE3L",dragoverContainer:"I_ZzKE3L",activeDragoverContainer:"n_Z1aUIMt I_ZzKE3L"},"themeCombo-LIGHT_DEEP_PURPLE":{container:"I4_Z1I2xFu",activeContainer:"n_pU8rS I_Z1I2xqK I4_Z1I2xFu",dragoverContainer:"I_Z1I2xFu",activeDragoverContainer:"n_pU8rS I_Z1I2xFu"},"themeCombo-MEDIUM_DEEP_PURPLE":{container:"I4_Z1I2xFu",activeContainer:"n_pU8rS I_Z1I2xqK I4_Z1I2xFu",dragoverContainer:"I_Z1I2xFu",activeDragoverContainer:"n_pU8rS I_Z1I2xFu"},"themeCombo-DARK_DEEP_PURPLE":{container:"I4_Z1I2xFu",activeContainer:"n_pU8rS I_Z1I2xqK I4_Z1I2xFu",dragoverContainer:"I_Z1I2xFu",activeDragoverContainer:"n_pU8rS I_Z1I2xFu"},"themeCombo-LIGHT_BLUE_NIGHT":{container:"I4_NDpE4",activeContainer:"n_Z14uK9Y I_NDpSN I4_NDpE4",dragoverContainer:"I_NDpE4",activeDragoverContainer:"n_Z14uK9Y I_NDpE4"},"themeCombo-MEDIUM_BLUE_NIGHT":{container:"I4_NDpE4",activeContainer:"n_Z14uK9Y I_NDpSN I4_NDpE4",dragoverContainer:"I_NDpE4",activeDragoverContainer:"n_Z14uK9Y I_NDpE4"},"themeCombo-DARK_BLUE_NIGHT":{container:"I4_NDpE4",activeContainer:"n_Z14uK9Y I_NDpSN I4_NDpE4",dragoverContainer:"I_NDpE4",activeDragoverContainer:"n_Z14uK9Y I_NDpE4"}},_key:"Z2sOXpi"};
},{"./src/molecules/folder_list/styles/atomic_folder_item.css":"./molecules/folder_list/styles/atomic_folder_item"}],174:[function(require,module,exports){
module.exports={className:{default:{scrollOuter:"p_R k_w W_6D6F",listSpacer:"H_6Fd5"}},_key:"Z1b0Hro"};
},{"./src/molecules/folder_list/styles/atomic_folder_list.css":"./molecules/folder_list/styles/atomic_folder_list"}],175:[function(require,module,exports){
module.exports={className:{default:{container:"P_3Y3Gk",separator:"m_Z14vXdP M_3HLUz"}},_key:"220Q4E"};
},{"./src/molecules/folder_list/styles/atomic_folder_menu.css":"./molecules/folder_list/styles/atomic_folder_menu"}],176:[function(require,module,exports){
module.exports={className:{default:{folderTree:"hd_n P_ZmsKgw M_0",folderContainer:"H_6NIX D_F ab_C ir3_2d4VCo it3_dRA",toggleFolderTree:"N_fq7 A_6DUj C_ZvsWfq r_P",collapseFolders:"H_6MWH X_6DEy A_6DUj C_ZvsWfq r_P D_F ab_C"},"indentation-INDENTATION_NONE":{folderTree:"P_0"},"themeMode-MEDIUM":{folderContainer:"ir3_Z1a7UWG",toggleFolderTree:"C_2sqbPK",collapseFolders:"C_2sqbPK"},"themeMode-DARK":{folderContainer:"ir3_Z1a7UWG",toggleFolderTree:"C_2sqbPK",collapseFolders:"C_2sqbPK"}},_key:"242oft"};
},{"./src/molecules/folder_list/styles/atomic_folder_tree.css":"./molecules/folder_list/styles/atomic_folder_tree"}],177:[function(require,module,exports){
module.exports={className:{default:{container:"D_F k_w W_6D6F H_6NIX X_6DEy N_fq7 ab_C C_Z1YRXYn ir3_2d4VCo it3_dRA I4_2iedUU",activeContainer:"D_F k_w W_6D6F H_6NIX X_6DEy N_fq7 ab_C C_Z291T0t ir3_2d4VCo it3_dRA I4_2iedUU u_b n_Z1dQEKn I_2ieeaE",labelContainer:"D_F W_6D6F ab_C i_6FIA",label:"G_e J_x o_h E_eo6 H_6FIA",smartViewIcon:"c27KHO0_n I_T N_fq7 b_0 D_F em_N gl_CH",badgeContainer:"a_6NIX h_1UBaXG"},isActive:{smartViewIcon:"Q_68F4"},isActiveAndNoIcon:{labelContainer:"Q_689y"},hasIcon:{container:"X_fq7"},"themeMode-MEDIUM":{container:"C_2sqbRh ir3_Z1a7UWG",activeContainer:"C_52qC ir3_Z1a7UWG"},"themeMode-DARK":{container:"C_2sqbRh ir3_Z1a7UWG",activeContainer:"C_52qC ir3_Z1a7UWG"},"themeCombo-LIGHT_DEFAULT":{container:"I4_2iedUU",activeContainer:"n_Z1dQEKn I_2ieeaE I4_2iedUU",dragoverContainer:"I_2iedUU",activeDragoverContainer:"n_Z1dQEKn I_2iedUU"},"themeCombo-MEDIUM_DEFAULT":{container:"I4_2iedUU",activeContainer:"n_Z1dQEKn I_2ieeaE I4_2iedUU",dragoverContainer:"I_2iedUU",activeDragoverContainer:"n_Z1dQEKn I_2iedUU"},"themeCombo-DARK_DEFAULT":{container:"I4_2iedUU",activeContainer:"n_Z1dQEKn I_2ieeaE I4_2iedUU",dragoverContainer:"I_2iedUU",activeDragoverContainer:"n_Z1dQEKn I_2iedUU"},"themeCombo-LIGHT_SUNRISE":{container:"I4_iPGvQ",activeContainer:"n_zIfvL I_iPGKA I4_iPGvQ",dragoverContainer:"I_iPGvQ",activeDragoverContainer:"n_zIfvL I_iPGvQ"},"themeCombo-MEDIUM_SUNRISE":{container:"I4_iPGvQ",activeContainer:"n_zIfvL I_iPGKA I4_iPGvQ",dragoverContainer:"I_iPGvQ",activeDragoverContainer:"n_zIfvL I_iPGvQ"},"themeCombo-DARK_SUNRISE":{container:"I4_iPGvQ",activeContainer:"n_zIfvL I_iPGKA I4_iPGvQ",dragoverContainer:"I_iPGvQ",activeDragoverContainer:"n_zIfvL I_iPGvQ"},"themeCombo-LIGHT_AQUA_GREEN":{container:"I4_2sGXKL",activeContainer:"n_ZXCGpT I_2sGY0v I4_2sGXKL",dragoverContainer:"I_2sGXKL",activeDragoverContainer:"n_ZXCGpT I_2sGXKL"},"themeCombo-MEDIUM_AQUA_GREEN":{container:"I4_2sGXKL",activeContainer:"n_ZXCGpT I_2sGY0v I4_2sGXKL",dragoverContainer:"I_2sGXKL",activeDragoverContainer:"n_ZXCGpT I_2sGXKL"},"themeCombo-DARK_AQUA_GREEN":{container:"I4_2sGXKL",activeContainer:"n_ZXCGpT I_2sGY0v I4_2sGXKL",dragoverContainer:"I_2sGXKL",activeDragoverContainer:"n_ZXCGpT I_2sGXKL"},"themeCombo-LIGHT_AQUA_BLUE":{container:"I4_ZzKE3L",activeContainer:"n_Z1aUIMt I_ZzKDO2 I4_ZzKE3L",dragoverContainer:"I_ZzKE3L",activeDragoverContainer:"n_Z1aUIMt I_ZzKE3L"},"themeCombo-MEDIUM_AQUA_BLUE":{container:"I4_ZzKE3L",activeContainer:"n_Z1aUIMt I_ZzKDO2 I4_ZzKE3L",dragoverContainer:"I_ZzKE3L",activeDragoverContainer:"n_Z1aUIMt I_ZzKE3L"},"themeCombo-DARK_AQUA_BLUE":{container:"I4_ZzKE3L",activeContainer:"n_Z1aUIMt I_ZzKDO2 I4_ZzKE3L",dragoverContainer:"I_ZzKE3L",activeDragoverContainer:"n_Z1aUIMt I_ZzKE3L"},"themeCombo-LIGHT_DEEP_PURPLE":{container:"I4_Z1I2xFu",activeContainer:"n_pU8rS I_Z1I2xqK I4_Z1I2xFu",dragoverContainer:"I_Z1I2xFu",activeDragoverContainer:"n_pU8rS I_Z1I2xFu"},"themeCombo-MEDIUM_DEEP_PURPLE":{container:"I4_Z1I2xFu",activeContainer:"n_pU8rS I_Z1I2xqK I4_Z1I2xFu",dragoverContainer:"I_Z1I2xFu",activeDragoverContainer:"n_pU8rS I_Z1I2xFu"},"themeCombo-DARK_DEEP_PURPLE":{container:"I4_Z1I2xFu",activeContainer:"n_pU8rS I_Z1I2xqK I4_Z1I2xFu",dragoverContainer:"I_Z1I2xFu",activeDragoverContainer:"n_pU8rS I_Z1I2xFu"},"themeCombo-LIGHT_BLUE_NIGHT":{container:"I4_NDpE4",activeContainer:"n_Z14uK9Y I_NDpSN I4_NDpE4",dragoverContainer:"I_NDpE4",activeDragoverContainer:"n_Z14uK9Y I_NDpE4"},"themeCombo-MEDIUM_BLUE_NIGHT":{container:"I4_NDpE4",activeContainer:"n_Z14uK9Y I_NDpSN I4_NDpE4",dragoverContainer:"I_NDpE4",activeDragoverContainer:"n_Z14uK9Y I_NDpE4"},"themeCombo-DARK_BLUE_NIGHT":{container:"I4_NDpE4",activeContainer:"n_Z14uK9Y I_NDpSN I4_NDpE4",dragoverContainer:"I_NDpE4",activeDragoverContainer:"n_Z14uK9Y I_NDpE4"}},_key:"Z1sUkRo"};
},{"./src/molecules/folder_list/styles/atomic_smart_view.css":"./molecules/folder_list/styles/atomic_smart_view"}],178:[function(require,module,exports){
module.exports={className:{default:{smartviewList:"hd_n P_0 M_0",smartviewContainer:"H_6NIX D_F ab_C ir3_2d4VCo it3_dRA",toggleSmartViews:"N_fq7 A_6DUj C_ZvsWfq r_P",labelContainer:"D_F W_6D6F ab_C i_6FIA",label:"em_N G_e J_x o_h E_fq7 H_6FIA",chevron:"c27KHO0_n I_T b_0 P_0 E_0 D_F"},"indentation-INDENTATION_NONE":{folderTree:"P_0"},"themeMode-MEDIUM":{smartviewContainer:"C_2sqbPK ir3_Z1a7UWG",toggleSmartViews:"C_2sqbPK"},"themeMode-DARK":{smartviewContainer:"C_2sqbPK ir3_Z1a7UWG",toggleSmartViews:"C_2sqbPK"}},_key:"Z1DcbTA"};
},{"./src/molecules/folder_list/styles/atomic_smartview_list.css":"./molecules/folder_list/styles/atomic_smartview_list"}],"./molecules/gif/actions":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function handleGifFetchSucceeded(e,t){var i,r,a=e.context,s=e.altListId,n=e.query,o=e.preloadItems,c=void 0!==o&&o;t.hasOwnProperty("body")&&(t=t.body);var _=_mail_constants.ListFilters.WITH_KEYWORD,l=_mail_constants.ListFilters.WITH_KEYWORD_RELEVANCE,d=c?l:_;a.dispatch(_react_action_constants.mail.GIF_FETCH_SUCCEEDED,{listId:s,results:t,query:n,response:(r={},r[_mail_constants.ListContentTypes.GIFS]=(i={},i[d]=t,i),r)})}function handleGifFetchFailed(e,t){var i=e.context,r=e.altListId,a=e.query;i.dispatch(_react_action_constants.mail.GIF_FETCH_FAILED,{err:t,listId:r,query:a})}function fetchGifFromCategory(e,t){var i=t.topItemsUrl,r=t.altListId,a=t.query;return e.dispatch(_react_action_constants.mail.GIF_FETCH_REQUESTED,{listId:r,query:a}),e.gifCategoriesClient.getGifCategoryPreloadImages(i).then(handleGifFetchSucceeded.bind(null,{context:e,altListId:r,query:a,preloadItems:!0})).catch(handleGifFetchFailed.bind(null,{context:e,altListId:r,query:a}))}function fetchGIF(e,t){var i=t.query,r=t.fromCategory,a=t.moreItems;i=i.toLowerCase().trim();var s=e.getStore(_mail2.default),n=e.getStore(_user_preferences2.default).getMailboxes()[0].id,o=e.getStore(_pages2.default),c=o.getActivePageRoute(),_=(0,_list.getListIdFromRoute)(c),l=i,d=_mail_constants.ListContentTypes.GIFS,u=(0,_list.recreateListId)(_,{listContentType:d,keyword:l}),f=s.getItemListData(u)||{},I=f.hasMoreItems,m=void 0!==I&&I,g=f.items,p=void 0===g?[]:g,h=f.nextItemsUrl,E=void 0===h?"":h,C=s.getItemListState(u);if(r&&i){var F=s.getGifCategoryState(i),G=F.category,y=F.state;if(y===_index.RecordStates.DOES_NOT_EXIST||y===_index.RecordStates.ERROR){var q=G.topItemsUrl;return fetchGifFromCategory(e,{topItemsUrl:q,altListId:u,mailboxId:n,query:i})}}else if(!m&&C===_index.RecordStates.LOADED&&p.length)return;if(!E||a)return e.dispatch(_react_action_constants.mail.GIF_FETCH_REQUESTED,{listId:u,query:i}),e.bootcampClient.request("searchGifs",{mailboxId:n,query:i,nextItemsUrl:E}).then(handleGifFetchSucceeded.bind(null,{context:e,altListId:u,query:i})).catch(handleGifFetchFailed.bind(null,{context:e,altListId:u,query:i}))}function fetchGifCategories(e){var t=e.getStore(_mail2.default),i=t.getGifCategories();if(!i.length)return e.gifCategoriesClient.getGifCategories().then(function(t){var i=t.body.categories;return e.dispatch(_react_action_constants.mail.GIF_CATEGORIES_CONTENT_FETCH_SUCCEEDED,{categories:i})}).catch(function(t){return e.dispatch(_react_action_constants.mail.GIF_CATEGORIES_CONTENT_FETCH_FAILED,{err:t})})}function addGifToBody(e,t){var i=t.csid,r=t.gif;e.dispatch(_react_action_constants.mail.GIF_ADDED,{csid:i,gif:r})}exports.__esModule=!0,exports.fetchGIF=fetchGIF,exports.fetchGifCategories=fetchGifCategories,exports.addGifToBody=addGifToBody;var _react_action_constants=require("../../platform/react_action_constants"),_user_preferences=require("../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_mail_constants=require("../../platform/mail_constants"),_mail=require("../../stores/mail"),_mail2=_interopRequireDefault(_mail),_list=require("../../platform/utils/list"),_pages=require("../../stores/pages"),_pages2=_interopRequireDefault(_pages),_index=require("../../platform/mail_constants/index");
},{"../../platform/mail_constants":"./platform/mail_constants","../../platform/mail_constants/index":"./platform/mail_constants","../../platform/react_action_constants":"./platform/react_action_constants","../../platform/utils/list":"./platform/utils/list","../../stores/mail":"./stores/mail","../../stores/pages":"./stores/pages","../../stores/user_preferences":"./stores/user_preferences"}],"./molecules/gif":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.DEBOUCE_RATE=exports.DEFAULT_CATEGORY=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_actions=require("./actions"),_constants=require("../../platform/rapid_client/constants"),_reactIntl=require("react-intl"),_lazy_component=require("../../atoms/lazy_component"),_fuji_icon=require("../../atoms/fuji_icon"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_button=require("../../atoms/button"),_button2=_interopRequireDefault(_button),_button3=require("../../atoms/constants/button"),_rapid_client=require("../../platform/rapid_client"),_rapid_client2=_interopRequireDefault(_rapid_client),_fuji_icon3=require("../../atoms/constants/fuji_icon"),strings=(0,_reactIntl.defineMessages)({gifPicker:{id:"gif.gifpicker.title",defaultMessage:"Gif Picker Button"}}),DEFAULT_CATEGORY=exports.DEFAULT_CATEGORY="Popular",DEBOUCE_RATE=exports.DEBOUCE_RATE=500,GifPicker=_react2.default.createClass({displayName:"GifPicker",contextTypes:{executeAction:_react.PropTypes.func,intl:_reactIntl.intlShape.isRequired},getInitialState:function(){return this._timer=null,this._fetched=!1,{query:"",queryInput:"",selectedCategory:DEFAULT_CATEGORY,menuOpen:!1}},componentWillMount:function(){this.context.executeAction(_actions.fetchGifCategories)},handleGifClick:function(e){this.props.onGifClick(e),this.toggleMenu()},onCategoryClick:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.fetchGIF({query:e.searchQuery,fromCategory:t,i13nModel:{mKey:_constants.MKEYS.GIF_CATEGORY,sec:_constants.SEC_VALUES.COMPOSE_TOOLBAR,interactionType:_constants.INTERACTION_TYPES.click}}),this.setState({query:e.searchQuery,selectedCategory:e.title,queryInput:""})},fetchGIF:function(e){this.context.executeAction(_actions.fetchGIF,e)},toggleMenu:function(){var e=this,t=this.state.menuOpen;t?this.setState({menuOpen:!t,query:"",queryInput:"",selectedCategory:DEFAULT_CATEGORY},function(){return e.props.focusBackEditor()}):(this.setState({menuOpen:!t}),_rapid_client2.default.sendI13nModel({i13nModel:{mKey:_constants.MKEYS.GIF_OPEN,sec:_constants.SEC_VALUES.COMPOSE_MSG,interactionType:_constants.INTERACTION_TYPES.click}}),this._fetched||(this.fetchGIF({query:""}),this._fetched=!0))},handleSearchChange:function(e){clearTimeout(this._timer);var t="";e?(this.setState({queryInput:e,selectedCategory:""}),t=e):this.setState({queryInput:"",selectedCategory:DEFAULT_CATEGORY}),this._timer=setTimeout(function(e){this.fetchGIF({query:e,i13nModel:{mKey:_constants.MKEYS.GIF_SEARCH,sec:_constants.SEC_VALUES.COMPOSE_TOOLBAR,interactionType:_constants.INTERACTION_TYPES.keydown}}),this.setState({query:e})}.bind(this,t),DEBOUCE_RATE)},render:function(){var e=this.state.menuOpen,t=this.context.intl.formatMessage;return _react2.default.createElement("div",null,_react2.default.createElement(_button2.default,{"data-test-id":"gif-button",title:t(strings.gifPicker),"aria-label":t(strings.gifPicker),onClick:this.toggleMenu,kind:e?_button3.Kinds.ICON_HIGHLIGHTED:_button3.Kinds.ICON},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.GIF_BOX,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.NORMAL})),e?_react2.default.createElement(_lazy_component.LazyComponent,_extends({import:"../../apps/mail/controller_views/gif_picker.jsx"},this.state,this.props,{fetchGIF:this.fetchGIF,toggleMenu:this.toggleMenu,onCategoryClick:this.onCategoryClick,handleSearchChange:this.handleSearchChange,handleGifClick:this.handleGifClick,_moduleGetter:function(){return require("../../apps/mail/controller_views/gif_picker.jsx")}})):null)}});exports.default=GifPicker;
},{"../../apps/mail/controller_views/gif_picker.jsx":"./apps/mail/controller_views/gif_picker","../../atoms/button":"./atoms/button","../../atoms/constants/button":"./atoms/constants/button","../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../atoms/fuji_icon":"./atoms/fuji_icon","../../atoms/lazy_component":"./atoms/lazy_component","../../platform/rapid_client":"./platform/rapid_client","../../platform/rapid_client/constants":"./platform/rapid_client/constants","./actions":"./molecules/gif/actions","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],179:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_assets=require("../../platform/assets"),_account_menu=require("../../atoms/account_menu.jsx"),_account_menu2=_interopRequireDefault(_account_menu),_types=require("../../types"),_xavatar=require("../../atoms/xavatar.jsx"),_xavatar2=_interopRequireDefault(_xavatar),_fuji_icon=require("../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../atoms/constants/fuji_icon"),_fluxibleRouter=require("fluxible-router"),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),_keyboard_navigation_focus_group=require("../../atoms/keyboard_navigation_focus_group.jsx"),_fuji_icon_button=require("../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_navigable_list=require("../../atoms/navigable_list.jsx"),_navigable_list2=_interopRequireDefault(_navigable_list),_navigable_list3=require("../../atoms/constants/navigable_list"),_popover_container=require("../../atoms/popover/popover_container.jsx"),_popover_container2=_interopRequireDefault(_popover_container),_popover_anchor=require("../../atoms/popover/popover_anchor.jsx"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_popover_content=require("../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover=require("../../atoms/constants/popover"),_utils=require("../../platform/utils/"),_constants=require("../../platform/rapid_client/constants"),_actions=require("../../apps/mail/actions"),_header=require("./styles/header"),_header2=_interopRequireDefault(_header),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),strings=(0,_reactIntl.defineMessages)({yahooMailBrandName:{id:"mail.yahoo_mail_brand_name",defaultMessage:"Yahoo Mail"},mini_apps:{id:"appheader.mini_apps",defaultMessage:"Apps"},mail_icon:{id:"appheader.mail_icon",defaultMessage:"Mail"},contacts_icon:{id:"appheader.contacts_icon",defaultMessage:"Contacts"},calendar_icon:{id:"appheader.calendar_icon",defaultMessage:"Calendar"},notepad_icon:{id:"appheader.notepad_icon",defaultMessage:"Notepad"},messenger_icon:{id:"appheader.messenger_icon",defaultMessage:"Messenger"},news_feed_icon:{id:"appheader.news_feed_icon",defaultMessage:"News Feed"}}),MailAppHeader=_react2.default.createClass({displayName:"MailAppHeader",contextTypes:{config:_react.PropTypes.object,executeAction:_react.PropTypes.func,intl:_reactIntl.intlShape.isRequired},shouldComponentUpdate:function(e){return this.props.primaryAccountAddress!==e.primaryAccountAddress||this.props.name.first!==e.name.first||this.props.name.last!==e.name.last||this.props.partnerBrand!==e.partnerBrand||this.props.defaultRouteURL!==e.defaultRouteURL||this.props.tabsVisible!==e.tabsVisible||this.props.onNavClick!==e.onNavClick},_getAltText:function(e,t){return""===t?e:t+" | "+e},onAccountMenuShow:function(){this.context.executeAction(_actions.handleAccountMenuShow,{i13nModel:{mKey:_constants.MKEYS.ACCOUNT_SETTINGS,sec:_constants.SEC_VALUES.HEADER_SETTINGS}})},onLogout:function(e){this.context.executeAction(_actions.handleLogout,{i13nModel:{mKey:_constants.MKEYS.SIGNOUT,sec:_constants.SEC_VALUES.HEADER_SETTINGS,interactionType:(0,_utils.getInteractionFromEvent)(e)}})},onLogoClick:function(e){this.context.executeAction(_actions.handleHeaderNavigation,{i13nModel:{mKey:_constants.MKEYS.YMAIL_LOGO,sec:_constants.SEC_VALUES.HEADER,interactionType:(0,_utils.getInteractionFromEvent)(e)}}),"function"==typeof this.props.onNavClick&&this.props.onNavClick(e)},handleAppLinkItemClick:function(e,t,a){this.context.executeAction(_actions.handleHeaderNavigation,{i13nModel:{mKey:t,sec:_constants.SEC_VALUES.HEADER_NAV,interactionType:(0,_utils.getInteractionFromEvent)(e)}}),"function"==typeof a&&a(e)},_renderAppLinkItem:function(e,t,a){var n=e.href,i=e.kind,o=e.text,r=e.callback,s=e.isActive,c=e.mKey,_=this,l=this.context.intl.formatMessage,u=void 0;return u=s?t?_fuji_icon3.ColorStates.NORMAL:_fuji_icon3.ColorStates.INVERTED:t?_fuji_icon3.ColorStates.DISABLED:_fuji_icon3.ColorStates.INVERTED_DIM,_react2.default.createElement("li",{key:n,className:t?null:a.iconWrapper},_react2.default.createElement("a",{onClick:function(e){return _.handleAppLinkItemClick(e,c,r)},href:n,className:t?a.mailAppsPopoverLink:a.iconNavLink,"aria-label":l(o),title:l(o),target:i,"data-iskeynav":!0,tabIndex:-1},_react2.default.createElement(_fuji_icon2.default,{colorState:u,kind:i,size:_fuji_icon3.Sizes.XS}),t?_react2.default.createElement("span",{className:a.mailAppsPopoverItemLabel},s?_react2.default.createElement("strong",null,l(o)):l(o)):null))},_renderAppLinkItems:function(e){var t=this,a=(0,_css2.default)(_header2.default,{tabsVisible:this.props.tabsVisible}),n=this.context.config,i=[{href:this.props.defaultRouteURL,kind:_fuji_icon3.Kinds.INBOX,text:strings.mail_icon,callback:this.props.onNavClick,isActive:!0,mKey:_constants.MKEYS.MAIL_ICON},{href:"https://address.yahoo.com/",kind:_fuji_icon3.Kinds.CONTACTS,text:strings.contacts_icon,mKey:_constants.MKEYS.CONTACTS_ICON},{href:n.calendarURL,kind:_fuji_icon3.Kinds.CALENDAR,text:strings.calendar_icon,mKey:_constants.MKEYS.CALENDAR_ICON},{href:"https://calendar.yahoo.com/?view=notepad",kind:_fuji_icon3.Kinds.NOTEPAD,text:strings.notepad_icon,mKey:_constants.MKEYS.NOTEPAD_ICON},{href:"https://messenger.yahoo.com/",kind:_fuji_icon3.Kinds.MESSENGER,text:strings.messenger_icon,mKey:_constants.MKEYS.MESSENGER_ICON}];return i.map(function(n){return t._renderAppLinkItem(n,e,a)})},render:function(){var e=this.props,t=e.primaryAccountAddress,a=e.name,n=e.tabsVisible,i=this.context.intl.formatMessage,o=(0,_css2.default)(_header2.default,{tabsVisible:n});return _react2.default.createElement("header",{className:o.header},_react2.default.createElement("div",{className:o.brandSideContainer},_react2.default.createElement("div",{className:o.logo},_react2.default.createElement(_fluxibleRouter.NavLink,{href:this.props.defaultRouteURL,onClick:this.onLogoClick,"aria-label":this._getAltText(i(strings.yahooMailBrandName),this.props.partnerBrand),tabIndex:-1},_react2.default.createElement("img",{className:o.logoImage,alt:this._getAltText(i(strings.yahooMailBrandName),this.props.partnerBrand),src:(0,_assets.getURL)("/img/logo_yahoo.png")}))),_react2.default.createElement("div",{className:o.mailAppsCompact},_react2.default.createElement(_popover_container2.default,null,_react2.default.createElement(_popover_anchor2.default,null,_react2.default.createElement(_fuji_icon_button2.default,{kind:_fuji_icon3.Kinds.APP_HIDDEN,title:i(strings.mini_apps),colorState:_fuji_icon3.ColorStates.INVERTED,tabIndex:_mail_ui_vars.TabIndices.APP_HEADER_MAIL_APPS})),_react2.default.createElement(_popover_content2.default,{triggerOn:_popover.Triggers.CLICK,permittedArrowDirections:[_popover.PermittedArrowDirections.UP],align:_popover.Align.START,offset:4*_mail_ui_vars.GRID_UNIT,zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH,"data-test-id":"mail-apps-popover"},_react2.default.createElement("div",{className:o.popoverListWrapper},_react2.default.createElement(_navigable_list2.default,{kind:_navigable_list3.Kinds.MENU,focusOnMount:!0},this._renderAppLinkItems(!0)))))),_react2.default.createElement(_keyboard_navigation_focus_group.KeyboardNavigationFocusGroup,{axis:_keyboard_navigation_focus_group.NAVIGATION_AXES.HORIZONTAL,"data-test-id":"app-header",groupTabIndex:_mail_ui_vars.TabIndices.APP_HEADER_MAIL_APPS},_react2.default.createElement("ul",{className:o.mailApps},this._renderAppLinkItems(!1)))),_react2.default.createElement("div",{className:o.searchCenterContainer},_react2.default.createElement("div",{className:o.searchContainer},this.props.searchComponent)),_react2.default.createElement("div",{className:o.accountToolsSideContainer},_react2.default.createElement("div",{className:o.avatar},_react2.default.createElement(_xavatar2.default,{contact:{email:t},size:_xavatar.Sizes.M}),_react2.default.createElement(_account_menu2.default,{primaryAccountAddress:t,name:a,onAccountMenuShow:this.onAccountMenuShow,onLogout:this.onLogout})),_react2.default.createElement("div",{className:o.settingsLink},this.context.config.settings?this.props.settingsMenuComponent:null)))}});exports.default=MailAppHeader,module.exports=exports.default;
},{"../../apps/mail/actions":"./apps/mail/actions","../../atoms/account_menu.jsx":64,"../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../atoms/constants/navigable_list":"./atoms/constants/navigable_list","../../atoms/constants/popover":"./atoms/constants/popover","../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../atoms/keyboard_navigation_focus_group.jsx":"./atoms/keyboard_navigation_focus_group","../../atoms/navigable_list.jsx":"./atoms/navigable_list","../../atoms/popover/popover_anchor.jsx":"./atoms/popover/popover_anchor","../../atoms/popover/popover_container.jsx":"./atoms/popover/popover_container","../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../atoms/xavatar.jsx":"./atoms/xavatar","../../platform/assets":"./platform/assets","../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../platform/utils/":"./platform/utils","../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../types":"./types","./styles/header":180,"fluxible-router":"./node_modules/fluxible-router/index.js","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],180:[function(require,module,exports){
module.exports={className:{default:{header:"D_F ab_C H_7He5 a_1Ie4E3 M_1EAG48 W_6D6F",brandSideContainer:"D_F ab_C em_N ej_1LWoB0",searchCenterContainer:"em_N en_0 ej_1LWoB0 s_3z5BY p_R",accountToolsSideContainer:"D_F ab_C em_N ej_1LWoB0 gl_CH",logo:"en_0 W_3o4BO H_q k_w D_F ab_C gl_C",logoImage:"H_72FG",mailApps:"D_n en_0 ab_C hd_n em_N P_0 M_Z1fegk0 c26zcWk_F",mailAppsCompact:"D_X c26zcWk_n",popoverListWrapper:"P_3Y3Gk",mailAppsPopoverLink:"P_ZlO2l1 D_F ab_C em_N q4_Znwqu5 q3_Znwqu5 ir3_2d4VCo",mailAppsPopoverItemLabel:"A_6EqO X_eo6",iconWrapper:"E_6LEV",iconNavLink:"i_0 W_6LEV H_6LEV D_X ir3_Z27CUfh it3_eo6",avatar:"M_1Eu6qC D_F",settingsLink:"D_F E_6LEV"},tabsVisible:{header:"H_7zJd"}},_key:"1NfMtp"};
},{"./src/molecules/header/styles/atomic_header.css":"./molecules/header/styles/atomic_header"}],"./molecules/hover_card/actions":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function getContactDetails(t,a){var e=a.email,i=a.isCompose;if((0,_utils.isValidEmail)(e)){var s=t.getStore(_mail2.default),n=s.getContactRecordState(e);if(n!==_mail_constants.RecordStates.LOADING&&n!==_mail_constants.RecordStates.LOADED)return t.dispatch(_react_action_constants.mail.CONTACT_DETAIL_FETCH_REQUESTED,{email:e}),t.autoSuggestClient.contactDetails({email:e,isCompose:i}).then(function(a){t.dispatch(_react_action_constants.mail.CONTACT_DETAIL_FETCH_SUCCEEDED,a)}).catch(function(){return t.dispatch(_react_action_constants.mail.CONTACT_DETAIL_FETCH_FAILED,{email:e})})}}exports.__esModule=!0,exports.getContactDetails=getContactDetails;var _react_action_constants=require("../../platform/react_action_constants"),_mail_constants=require("../../platform/mail_constants"),_mail=require("../../stores/mail"),_mail2=_interopRequireDefault(_mail),_utils=require("../../platform/utils");
},{"../../platform/mail_constants":"./platform/mail_constants","../../platform/react_action_constants":"./platform/react_action_constants","../../platform/utils":"./platform/utils","../../stores/mail":"./stores/mail"}],181:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.DELAY_FOR_CONTACT_CARD=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_asymmetric_popover=require("../../atoms/popover/asymmetric_popover"),_asymmetric_popover2=_interopRequireDefault(_asymmetric_popover),_popover=require("../../atoms/constants/popover"),_utils=require("../../platform/utils"),_email_pill=require("./styles/email_pill"),_email_pill2=_interopRequireDefault(_email_pill),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_contact_card=require("../../apps/mail/controller_views/contact_card"),_contact_card2=_interopRequireDefault(_contact_card),DELAY_FOR_CONTACT_CARD=exports.DELAY_FOR_CONTACT_CARD=200,classNames=(0,_css2.default)(_email_pill2.default),EmailPill=_react2.default.createClass({displayName:"EmailPill",render:function(){var e=this.props,r=e.email,t=e.isCompose,a=e.isDragged;return!t||(0,_utils.isValidEmail)(r)?_react2.default.createElement(_asymmetric_popover2.default,{arrowSize:_popover.ArrowSizes.M,permittedArrowDirections:[_popover.PermittedArrowDirections.ANY],triggerOn:a?_asymmetric_popover.OnTriggers.NONE:_asymmetric_popover.OnTriggers.HOVER_DELAYED,triggerDelayTime:DELAY_FOR_CONTACT_CARD,triggerOff:_asymmetric_popover.OffTriggers.HOVER_OUT|_asymmetric_popover.OffTriggers.DRAG_START},_react2.default.createElement("span",{className:classNames.anchor},this.props.children),_react2.default.createElement(_contact_card2.default,{emailAddress:r,isCompose:t,withBackground:!1})):_react2.default.createElement("span",{className:classNames.anchor},this.props.children)}});exports.default=EmailPill;
},{"../../apps/mail/controller_views/contact_card":23,"../../atoms/constants/popover":"./atoms/constants/popover","../../atoms/popover/asymmetric_popover":"./atoms/popover/asymmetric_popover","../../platform/utils":"./platform/utils","./styles/email_pill":182,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],182:[function(require,module,exports){
module.exports={className:{default:{anchor:"D_F"}},_key:"Z1NP9TF"};
},{"./src/molecules/hover_card/styles/atomic_email_pill.css":"./molecules/hover_card/styles/atomic_email_pill"}],"./molecules/item_list/actions":[function(require,module,exports){
"use strict";function scrollPage(t,a){var s=a.listId;t.dispatch(_react_action_constants.mail.ITEM_LIST_PAGE_SCROLLED,{listId:s})}exports.__esModule=!0,exports.scrollPage=scrollPage;var _react_action_constants=require("../../platform/react_action_constants");
},{"../../platform/react_action_constants":"./platform/react_action_constants"}],"./molecules/item_list/atoms/list_error":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ListError(e,t){var r=e.onRetry,a=t.getCss(_item_list2.default);return _react2.default.createElement("div",{"data-test-id":"message-group-list-error",className:a.errorContainer},_react2.default.createElement("p",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"folder_loading_error",defaultMessage:"An error occurred while trying to fetch the items in this list."})),_react2.default.createElement("a",{"data-test-id":"list-loading-error-retry",className:a.listLoadingRetry,onClick:r},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"list_loading_error_retry",defaultMessage:"Retry"})))}exports.__esModule=!0,exports.default=ListError;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_item_list=require("../styles/item_list"),_item_list2=_interopRequireDefault(_item_list);ListError.contextTypes={getCss:_react.PropTypes.func},module.exports=exports.default;
},{"../styles/item_list":"./molecules/item_list/styles/item_list","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/item_list/atoms/list_loading":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_loading_indicator=require("../../../atoms/loading_indicator.jsx"),_loading_indicator2=_interopRequireDefault(_loading_indicator),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_item_list=require("../styles/item_list"),_item_list2=_interopRequireDefault(_item_list),classNames=(0,_css2.default)(_item_list2.default),TIME_TO_BE_CONSIDERED_LONG=1e3,ListLoading=_react2.default.createClass({displayName:"ListLoading",getInitialState:function(){return{takesLong:!1}},componentDidMount:function(){this.timeout=setTimeout(function(){this.setState({takesLong:!0})}.bind(this),TIME_TO_BE_CONSIDERED_LONG)},componentWillUnmount:function(){clearTimeout(this.timeout)},render:function(){return _react2.default.createElement("div",{className:classNames.loadingContainer},this.state.takesLong&&_react2.default.createElement(_loading_indicator2.default,null))}});exports.default=ListLoading,module.exports=exports.default;
},{"../../../atoms/loading_indicator.jsx":"./atoms/loading_indicator","../styles/item_list":"./molecules/item_list/styles/item_list","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./molecules/item_list/atoms/list_separator":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_constants=require("../constants"),_object=require("../../../platform/utils/object"),_invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_list_separator=require("../styles/list_separator"),_list_separator2=_interopRequireDefault(_list_separator),strings=(0,_reactIntl.defineMessages)({herochunk:{id:"herochunk",defaultMessage:"Top results"},timechunk_today:{id:"timechunk_today",defaultMessage:"Today"},timechunk_yesterday:{id:"timechunk_yesterday",defaultMessage:"Yesterday"},timechunk_earlier_this_week:{id:"timechunk_earlier_this_week",defaultMessage:"Earlier this week"},timechunk_this_week:{id:"timechunk_this_week",defaultMessage:"This week"},timechunk_last_week:{id:"timechunk_last_week",defaultMessage:"Last week"},timechunk_earlier_in_month:{id:"timechunk_earlier_in_month",defaultMessage:"Earlier in {message}"},timechunk_earlier_in_year:{id:"timechunk_earlier_in_year",defaultMessage:"Earlier in {message}"},timechunk_days:{id:"timechunk_days",defaultMessage:"{weekday, select,\n            0 {Sunday}\n            1 {Monday}\n            2 {Tuesday}\n            3 {Wednesday}\n            4 {Thursday}\n            5 {Friday}\n            6 {Saturday}\n        }"},timechunk_months:{id:"timechunk_months",defaultMessage:"{month, select,\n            0 {January}\n            1 {February}\n            2 {March}\n            3 {April}\n            4 {May}\n            5 {June}\n            6 {July}\n            7 {August}\n            8 {September}\n            9 {October}\n            10 {November}\n            11 {December}\n        }"}}),ListSeparator=_react2.default.createClass({displayName:"ListSeparator",contextTypes:{intl:_reactIntl.intlShape.isRequired,getCss:_react.PropTypes.func},getDefaultProps:function(){return{separatorType:_constants.ListSeparatorTypes.TIMECHUNK}},shouldComponentUpdate:function(e){return this.props.separatorType!==e.separatorType||this.props.separatorData.type!==e.separatorData.type||this.props.separatorData.value!==e.separatorData.value},getTimeChunkMessage:function(e){var t=this.props.separatorData,a=this.context.intl,s=a.formatMessage,r=a.formatDate,n=null;switch(t.type){case _constants.TimeChunk.Types.DAY:n=s(strings.timechunk_days,{weekday:t.value});break;case _constants.TimeChunk.Types.MONTH:case _constants.TimeChunk.Types.EARLIER_IN_MONTH:n=s(strings.timechunk_months,{month:t.value});break;case _constants.TimeChunk.Types.EARLIER_IN_YEAR:case _constants.TimeChunk.Types.YEAR:n=r(new Date(t.value,1,1).getTime(),{year:"numeric"})}var i=t.type?strings["timechunk_"+t.type.toLowerCase()]:null,u=null;return i?u=_react2.default.createElement(_reactIntl.FormattedMessage,_extends({},i,{className:e.label,values:{message:n}})):n&&(u=_react2.default.createElement("span",{className:e.label},n)),u},getHeroChunkMessage:function(e){var t=this.props.separatorData;switch(t.type){case _constants.HeroChunk.Types.HERO_HEADER:var a=this.context.intl.formatMessage,s=a(strings.herochunk,{hero:t.value}),r=strings.herochunk,n=null;return r?n=_react2.default.createElement(_reactIntl.FormattedMessage,_extends({},r,{className:e.label,values:{message:s}})):s&&(n=_react2.default.createElement("span",{className:e.label},s)),n;case _constants.HeroChunk.Types.HERO_DIVIDER:return _react2.default.createElement("div",{className:e.heroDivider});default:(0,_invariant2.default)(!1,"Unexpected hero chunk type need to expand switch")}},render:function(){var e=this.context.getCss(_list_separator2.default),t=this.props.separatorType,a=this.props.separatorEnhancement,s=a?e.enhancedContainer:e.container,r=null;switch(t){case _constants.ListSeparatorTypes.TIMECHUNK:r=this.getTimeChunkMessage(e);break;case _constants.ListSeparatorTypes.HEROCHUNK:r=this.getHeroChunkMessage(e)}return r?_react2.default.createElement("div",{className:s},r):null}});exports.default=ListSeparator,module.exports=exports.default;
},{"../../../platform/invariant":"./platform/invariant","../../../platform/utils/object":"./platform/utils/object","../constants":"./molecules/item_list/constants","../styles/list_separator":"./molecules/item_list/styles/list_separator","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/item_list/constants":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.HighlightPositions=exports.TIMECHUNK_MIN_ITEMS=exports.ListSeparatorTypes=exports.HeroChunk=exports.TimeChunk=void 0;var _object=require("../../platform/utils/object"),TimeChunk=exports.TimeChunk={Types:(0,_object.mirrorKeys)(["TODAY","YESTERDAY","DAY","MONTH","EARLIER_THIS_WEEK","THIS_WEEK","LAST_WEEK","EARLIER_IN_MONTH","EARLIER_IN_YEAR","MONTH","YEAR"]),Day:{SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6},Month:{JAN:0,FEB:1,MAR:2,APR:3,MAY:4,JUN:5,JUL:6,AUG:7,SEP:8,OCT:9,NOV:10,DEC:11}},HeroChunk=exports.HeroChunk={Types:(0,_object.mirrorKeys)(["HERO_HEADER","HERO_DIVIDER"])},ListSeparatorTypes=exports.ListSeparatorTypes=(0,_object.mirrorKeys)(["TIMECHUNK","HEROCHUNK"]),TIMECHUNK_MIN_ITEMS=exports.TIMECHUNK_MIN_ITEMS=4,HighlightPositions=exports.HighlightPositions=(0,_object.mirrorKeys)(["LEFT","CENTER","RIGHT","NONE"]);
},{"../../platform/utils/object":"./platform/utils/object"}],"./molecules/item_list":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_debounce=require("lodash/debounce"),_debounce2=_interopRequireDefault(_debounce),_infinite_list_view=require("../list_view/infinite_list_view.jsx"),_infinite_list_view2=_interopRequireDefault(_infinite_list_view),_types=require("../../types"),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),_loading_indicator=require("../../atoms/loading_indicator.jsx"),_loading_indicator2=_interopRequireDefault(_loading_indicator),_list_separator=require("./atoms/list_separator.jsx"),_list_separator2=_interopRequireDefault(_list_separator),_flex_spacer=require("../../atoms/flex_spacer.jsx"),_flex_spacer2=_interopRequireDefault(_flex_spacer),_svg_image=require("../../atoms/svg_image.jsx"),_svg_image2=_interopRequireDefault(_svg_image),_list_error=require("./atoms/list_error.jsx"),_list_error2=_interopRequireDefault(_list_error),_list_loading=require("./atoms/list_loading.jsx"),_list_loading2=_interopRequireDefault(_list_loading),_svg_image3=require("../../atoms/constants/svg_image"),_reactIntl=require("react-intl"),_timechunk=require("./utils/timechunk"),_list=require("../../platform/utils/list"),_mail_constants=require("../../platform/mail_constants"),_actions=require("./actions.js"),_item_list=require("./styles/item_list"),_item_list2=_interopRequireDefault(_item_list),NOOP=function(){},SCROLLABLE_AREA_PADDING_TOP=12,PAGE_DEBOUNCE_TIME=200,strings=(0,_reactIntl.defineMessages)({empty_list_alt:{id:"item_list.empty_list_alt",defaultMessage:"No items"}}),ItemList=_react2.default.createClass({displayName:"ItemList",contextTypes:{executeAction:_react.PropTypes.func,intl:_reactIntl.intlShape,config:_react.PropTypes.object,locale:_types.LocaleShape,getCss:_react.PropTypes.func},getDefaultProps:function(){return{onSelect:NOOP,onSelectAll:NOOP,getCursorMoveUnit:function(){return 1},translateCursorIndex:function(e){return e},onScrollTopChange:NOOP,getPropsForMask:NOOP,items:[],height:0}},componentDidMount:function(){this.lastPageScrollTop=0,this.debouncedScrollTop=(0,_debounce2.default)(this.onScrollTop,PAGE_DEBOUNCE_TIME)},onLoadMore:function(){var e=this.props,t=e.listId,r=e.items,i=e.actions,s=e.itemsToFetch;this.context.executeAction(i.loadMoreMessagesAfterScroll,{listId:t,offset:r.length,count:s})},organizeItemList:function(){var e=this.props,t=e.items,r=e.listId,i=e.hasTimeChunking,s=e.hasAds,n=e.getTimeStampFromItem,a=e.dateFormattingOption,o=this.context.locale.firstDay;if(0===t.length||!s&&!i)return t;if(s&&!i)return[{listAd:!0}].concat(t);var l=(0,_list.getSortOrderFromListId)(r),_=l===_mail_constants.SortOrder.DATE_DESC;return(0,_timechunk.getOrganizedItemList)({items:t,isDescending:_,hasAds:s,getTimeStampFromItem:n,dateFormattingOption:a,firstDay:o})},translateCursorIndex:function(e){var t=this.props,r=t.cursorIndex,i=t.hasTimeChunking,s=t.hasAds,n=t.items;return r<0?r:i?this.props.translateCursorIndex(e.findIndex(function(e){return e===n[r]}),e):this.props.translateCursorIndex(s?r+1:r,e)},getHeightForIndex:function(e,t){var r=this.getItemsForIndex(e,t);return r&&r.listSeparator?_mail_ui_vars.ITEM_LIST_SEPARATOR_HEIGHT:this.props.getHeightForIndex(e,t)},getItemsForIndex:function(e,t){return this.props.getItemsForIndex(e,t)},getIdForIndex:function(e,t){if(t<0)return"empty";if(e[t]&&e[t].listAd)return"gemini";if(e[t]&&e[t].listSeparator){var r=e[t].listSeparator,i=r.type,s=r.value;return"separator_"+i+"_"+s}return e[t].id||t},isSectionHeader:function(e,t){var r=this.getItemsForIndex(e,t);return r&&r.listSeparator},renderItem:function(e,t){var r=this.getItemsForIndex(e,t),i=r.listSeparator;if(i){var s=i.separatorData;return _react2.default.createElement(_list_separator2.default,_extends({},i,{key:s.type+"-"+s.value}))}return this.props.renderItem(r,t)},renderEmptyList:function(e){var t=this.context.intl.formatMessage;return _react2.default.createElement("div",{className:e.emptyListContainer,"data-test-id":"message-list-empty"},_react2.default.createElement(_flex_spacer2.default,null),_react2.default.createElement("div",{className:e.emptyListText,"data-test-id":"empty-list-message"},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"message_list.empty_folder",defaultMessage:"Nothing to see here!"})),_react2.default.createElement("div",{className:e.emptyListImage},_react2.default.createElement(_svg_image2.default,{kind:_svg_image3.Kinds.EMPTY_FOLDER,width:160,height:160,altText:t(strings.empty_list_alt)})),_react2.default.createElement(_flex_spacer2.default,null))},handleCursorMove:function(e){var t=this.props,r=t.actions,i=t.listId,s=this.props.getCursorMoveUnit(e);this.context.executeAction(r.moveCursor,{listId:i,movement:e,unit:s})},handleShiftNavigate:function(e){var t=this.props,r=t.actions,i=t.listId;this.context.executeAction(r.selectMove,{listId:i,movement:e})},handleLoadingErrorRetry:function(){this.context.executeAction(this.props.actions.retryLoading,{listId:this.props.listId})},onScrollTop:function(e){var t=this.props.listId;Math.abs(e-this.lastPageScrollTop)>this.context.config.itemListPageThreshold&&(this.context.executeAction(_actions.scrollPage,{listId:t}),this.lastPageScrollTop=e)},handleScrollTopChange:function(e){this.props.onScrollTopChange(),this.debouncedScrollTop(e)},render:function(){var e=this,t=this.props,r=t.hasMoreItems,i=t.state,s=t.hasTimeChunking,n=t.items,a=t.height,o=this.context.getCss(_item_list2.default);if(i===_mail_constants.RecordStates.DOES_NOT_EXIST||i===_mail_constants.RecordStates.LOADING)return _react2.default.createElement(_list_loading2.default,null);if(i===_mail_constants.RecordStates.ERROR)return _react2.default.createElement(_list_error2.default,{onRetry:this.handleLoadingErrorRetry});if(!n.length&&!r)return this.renderEmptyList(o);var l=this.organizeItemList();return _react2.default.createElement(_infinite_list_view2.default,{onSelect:t.onSelect,onSelectAll:t.onSelectAll,onOpen:t.onOpen,onShiftNavigate:this.handleShiftNavigate,onCursorMove:this.handleCursorMove,infiniteScrollProps:{initialRenderCount:t.initialRenderCount,loadThreshold:t.loadThreshold,contentInsetTop:s?0:SCROLLABLE_AREA_PADDING_TOP,initialIndexForTab:l.findIndex(function(e){return!e.listAd&&!e.listSeparator}),size:t.getItemListSize(l),getHeightForIndex:function(t){return e.getHeightForIndex(l,t)},getElementForIndex:function(t){return e.renderItem(l,t)},getIdForIndex:function(t){return e.getIdForIndex(l,t)},isSectionHeader:function(t){return e.isSectionHeader(l,t)},cursorIndex:this.translateCursorIndex(l),groupTabIndex:_mail_ui_vars.TabIndices.MESSAGE_LIST_MAIN,hasMoreItems:r,onLoadMore:this.onLoadMore,onScroll:this.props.onScroll,onScrollTopChange:this.handleScrollTopChange,LoadMoreClass:_react2.default.createElement("div",{className:t.loadMoreContainer},_react2.default.createElement(_loading_indicator2.default,null)),layoutKey:this.props.layoutKey+a,bufferSize:this.context.config.bufferSize}})}});exports.default=ItemList,module.exports=exports.default;
},{"../../atoms/constants/svg_image":"./atoms/constants/svg_image","../../atoms/flex_spacer.jsx":"./atoms/flex_spacer","../../atoms/loading_indicator.jsx":"./atoms/loading_indicator","../../atoms/svg_image.jsx":"./atoms/svg_image","../../platform/mail_constants":"./platform/mail_constants","../../platform/utils/list":"./platform/utils/list","../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../types":"./types","../list_view/infinite_list_view.jsx":"./molecules/list_view/infinite_list_view","./actions.js":"./molecules/item_list/actions","./atoms/list_error.jsx":"./molecules/item_list/atoms/list_error","./atoms/list_loading.jsx":"./molecules/item_list/atoms/list_loading","./atoms/list_separator.jsx":"./molecules/item_list/atoms/list_separator","./styles/item_list":"./molecules/item_list/styles/item_list","./utils/timechunk":"./molecules/item_list/utils/timechunk","lodash/debounce":"./node_modules/lodash/debounce.js","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/item_list/styles/item_list":[function(require,module,exports){
module.exports={className:{default:{loadMoreContainer:"H_sL D_F ab_C gl_C",emptyListContainer:"D_F em_N ek_BB p_R T_e5X h_ZBOl0O",emptyListText:"t_C A_6FsP U_6MGW",emptyListImage:"t_C",loadingContainer:"je_74JI W_6D6F",errorContainer:"je_74JI W_6D6F t_C A_6FsP",listLoadingRetry:"S_U r_P"},"themeMode-DARK":{emptyListText:"C_52qC",errorContainer:"C_52qC",listLoadingRetry:"C_52qC"}},_key:"Z2mDbHE"};
},{"./src/molecules/item_list/styles/atomic_item_list.css":"./molecules/item_list/styles/atomic_item_list"}],"./molecules/item_list/styles/list_separator":[function(require,module,exports){
module.exports={className:{default:{container:"H_6VdP k_w I_52qC je_6Eb4 X_fq7 C_Z1YRXYn A_6EqO u_b",enhancedContainer:"D34_F dq34_hP p34_a H34_eo6 W34_6D6F T34_68F4 I34_2spJWC H_6VdP k_w I_52qC je_6Eb4 X_fq7 C_Z1YRXYn A_6EqO u_b",label:"",heroDivider:"H_eo6 W_6D6F I_Z1YRXYn"},"themeMode-DARK":{container:"I_T C_52qC"}},_key:"Z1pcKos"};
},{"./src/molecules/item_list/styles/atomic_list_separator.css":"./molecules/item_list/styles/atomic_list_separator"}],"./molecules/item_list/utils/highlight":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getHighlightPosition(e,t){var i=-1;if(t&&e){var r=e.indexOf("^_");if(r!==-1){var n=e.length;i=r/n}}return i>.66?_constants.HighlightPositions.RIGHT:i>.33?_constants.HighlightPositions.CENTER:i>=0?_constants.HighlightPositions.LEFT:_constants.HighlightPositions.NONE}function splitByMatchDelimiter(e){return e.split(/(\^_[^^]*?\^_)/g)}function replaceMatchesWithWrappedBlocks(e,t){return splitByMatchDelimiter(e).map(function(e){return 0===e.indexOf("^_")?_react2.default.createElement("span",{key:e,className:t,"data-test-id":"highlight"},e.replace(removerRegex,"")):e})}function getHighlightedBlocks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1],i=arguments[2];return e&&t?replaceMatchesWithWrappedBlocks(e,i):e}function removeHighlightDelimiters(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){var t=splitByMatchDelimiter(e).map(function(e){return 0===e.indexOf("^_")?e.replace(removerRegex,""):e});return t.join("")}return e}exports.__esModule=!0,exports.getHighlightPosition=getHighlightPosition,exports.getHighlightedBlocks=getHighlightedBlocks,exports.removeHighlightDelimiters=removeHighlightDelimiters;var _react=require("react"),_react2=_interopRequireDefault(_react),_constants=require("../constants"),removerRegex=/^\^_+|\^_+$/g;
},{"../constants":"./molecules/item_list/constants","react":"./node_modules/react/react.js"}],"./molecules/item_list/utils/timechunk":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function fillZeros(e){for(var t=new Array(e);e--;)t[e]=0;return t}function getCurrentWeekItemCount(e){var t=e.items,n=e.isDescending,r=e.getTimeStampFromItem,a=e.dateFormattingOption,s=void 0===a?{offset:0}:a,i=e.firstDay,u=(0,_date.getStartOfToday)(s),o=(0,_date.timeShiftToUTC)(u,s),p=o.getUTCDay(),T=(p-i+7)%7,c=u-T*MILLISECONDS_IN_DAY,_=fillZeros(T+1),m=n?t:t.slice().reverse();return m.some(function(e){var t=r(e);if(!(t>=c))return!0;var n=getBasicTimeChunk(t,s,i),a=(n.value-i+7)%7;_[a]++}),_}function getOrganizedItemList(e){var t=e.items,n=e.isDescending,r=e.hasAds,a=e.getTimeStampFromItem,s=e.dateFormattingOption,i=void 0===s?{offset:0}:s,u=e.firstDay,o=[],p=getCurrentWeekItemCount({items:t,isDescending:n,getTimeStampFromItem:a,dateFormattingOption:i,firstDay:u}),T=createCurrentWeekMap(p),c={type:null};return t.forEach(function(e){var t=a(e),n=void 0;if(e.isHero)n=getHeroChunk(),(0,_invariant2.default)(!c.type||c.type===_constants.HeroChunk.Types.HERO_DIVIDER||c.type===_constants.HeroChunk.Types.HERO_HEADER,"expect hero chunks all first");else{var s=getBasicTimeChunk(t,i,u,c);n=getSpecificTimeChunk(s,T,u)}c.type===n.type&&c.value===n.value||(o.push({listSeparator:{separatorType:e.isHero?_constants.ListSeparatorTypes.HEROCHUNK:_constants.ListSeparatorTypes.TIMECHUNK,separatorData:n,separatorEnhancement:c.type===_constants.HeroChunk.Types.HERO_HEADER&&n.type!==_constants.HeroChunk.Types.HERO_HEADER}}),null===c.type&&r&&o.push({listAd:!0})),o.push(e),c=n}),o}function getHeroChunk(e){return{type:e?_constants.HeroChunk.Types.HERO_DIVIDER:_constants.HeroChunk.Types.HERO_HEADER,value:0}}function getBasicTimeChunk(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(0,_date.getStartOfToday)(t),s=(0,_date.timeShiftToUTC)(a,t),i=s.getUTCMonth(),u=s.getUTCFullYear(),o=s.getUTCDay(),p=(0,_date.timeShiftToUTC)(e,t),T=p.getUTCFullYear(),c=p.getUTCMonth(),_=p.getUTCDay(),m=(o-n+7)%7,C=s.getTime()-m*MILLISECONDS_IN_DAY,h=C-7*MILLISECONDS_IN_DAY;return p.getTime()>=C?{type:_constants.TimeChunk.Types.DAY,value:_,month:c}:p.getTime()>h?{type:_constants.TimeChunk.Types.LAST_WEEK,month:c}:T===u?r.month===c||r.type===_constants.TimeChunk.Types.EARLIER_IN_MONTH&&r.value===c?{type:_constants.TimeChunk.Types.EARLIER_IN_MONTH,value:c}:i-c<6?{type:_constants.TimeChunk.Types.MONTH,value:c}:{type:_constants.TimeChunk.Types.EARLIER_IN_YEAR,value:T}:{type:_constants.TimeChunk.Types.YEAR,value:T}}function createCurrentWeekMap(e){var t=e.length-1,n=e.map(function(e,n){switch(n){case t:return _constants.TimeChunk.Types.TODAY;case t-1:return _constants.TimeChunk.Types.YESTERDAY;default:return _constants.TimeChunk.Types.DAY}}),r=0,a=-1,s=-1;e.forEach(function(e,n){e>0&&(t!==n&&e<4&&r>0&&(a=n),s=n,r+=e)});for(var i=a===s?_constants.TimeChunk.Types.THIS_WEEK:_constants.TimeChunk.Types.EARLIER_THIS_WEEK,u=0;u<=a;u++)n[u]=i;return n}function getSpecificTimeChunk(e,t,n){var r=e.type,a=e.value;if(r===_constants.TimeChunk.Types.DAY){var s=(a-n+7)%7;return t[s]!==_constants.TimeChunk.Types.DAY?{type:t[s],value:-1}:{type:t[s],value:a}}return e}exports.__esModule=!0,exports.getCurrentWeekItemCount=getCurrentWeekItemCount,exports.getOrganizedItemList=getOrganizedItemList,exports.getHeroChunk=getHeroChunk,exports.getBasicTimeChunk=getBasicTimeChunk,exports.createCurrentWeekMap=createCurrentWeekMap,exports.getSpecificTimeChunk=getSpecificTimeChunk;var _constants=require("../constants"),_date=require("../../../platform/utils/date"),_invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),MILLISECONDS_IN_DAY=864e5;
},{"../../../platform/invariant":"./platform/invariant","../../../platform/utils/date":"./platform/utils/date","../constants":"./molecules/item_list/constants"}],"./molecules/keyboard_shortcut_manager/actions":[function(require,module,exports){
"use strict";function bindShortcut(t,n){t.dispatch(_react_action_constants.mail.KEY_DID_BIND,n)}function bindShortcutUpdate(t,n){t.dispatch(_react_action_constants.mail.KEY_DID_UPDATE,n)}function unbindShortcut(t,n){t.dispatch(_react_action_constants.mail.KEY_DID_UNBIND,n)}exports.__esModule=!0,exports.bindShortcut=bindShortcut,exports.bindShortcutUpdate=bindShortcutUpdate,exports.unbindShortcut=unbindShortcut;var _react_action_constants=require("../../platform/react_action_constants");
},{"../../platform/react_action_constants":"./platform/react_action_constants"}],183:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_modal=require("../../../atoms/modal.jsx"),_modal2=_interopRequireDefault(_modal),_search_input=require("./search_input.jsx"),_search_input2=_interopRequireDefault(_search_input),_keyboard_shortcut_group=require("../keyboard_shortcut_group.jsx"),_keyboard_shortcut_group2=_interopRequireDefault(_keyboard_shortcut_group),_cheatsheet_header=require("./cheatsheet_header.jsx"),_cheatsheet_header2=_interopRequireDefault(_cheatsheet_header),_key_section=require("./key_section.jsx"),_key_section2=_interopRequireDefault(_key_section),_keyboard_shortcuts=require("../../../platform/keyboard_shortcuts"),_object=require("../../../platform/utils/object"),_trie=require("../../../platform/xobni_client/trie"),_trie2=_interopRequireDefault(_trie),_cheatsheet=require("../styles/cheatsheet"),_cheatsheet2=_interopRequireDefault(_cheatsheet),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),CHEATSHEET_KEY="SHIFT+/",strings=(0,_reactIntl.defineMessages)({filterPlaceholder:{id:"shortcut.filter",defaultMessage:"Search shortcuts, e.g. open an email"}}),generalShortcuts=(0,_keyboard_shortcuts.createShortcutGroup)({invisible:!0,keys:{showCheatsheet:{key:CHEATSHEET_KEY}}}),Cheatsheet=_react2.default.createClass({displayName:"Cheatsheet",contextTypes:{intl:_reactIntl.intlShape,os:_react.PropTypes.string.isRequired},getInitialState:function(){return{shown:!1,filterQuery:"",coldStart:!0}},componentWillMount:function(){this.descriptionDb=new _trie2.default},componentDidUpdate:function(e,t){var r=this.state,a=r.shown,s=r.coldStart;t.shown===a||s||this.setState({coldStart:!1})},toggleCheatsheet:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.setState({shown:!this.state.shown,filterQuery:""},function(){t.state.shown&&t.refs.search.focus()})},handleDismiss:function(){this.setState({shown:!1,filterQuery:""})},handleModalKeyDown:function(e){e.shiftKey&&191===e.which&&this.handleDismiss()},setDictionary:function(e,t){this.state.coldStart&&this.descriptionDb.insert(e.toLowerCase(),t)},handleFilterChange:function(e){var t=e.target.value.trim();t!==this.state.filterQuery&&this.setState({filterQuery:t})},render:function(){var e=this,t=this.context.intl.formatMessage,r=this.props.allKeys,a=this.state,s=a.shown,i=a.filterQuery,o=(0,_css2.default)(_cheatsheet2.default),n=[];if(i){var u=this.descriptionDb.find(i.toLowerCase());n=(0,_object.values)(r).map(function(e){var t=e.group,r=e.keys;return{group:t,keys:r.filter(function(e){var t=e.id;return u.indexOf(t)>=0})}}).filter(function(e){var t=e.keys;return t.length})}else n=(0,_object.values)(r);return n=n.sort(function(e,t){var r=e.group,a=t.group;return r.priority-a.priority}),_react2.default.createElement(_keyboard_shortcut_group2.default,{keys:[generalShortcuts.showCheatsheet(this.toggleCheatsheet)]},s?_react2.default.createElement(_modal2.default,{onClose:this.handleDismiss,onKeyDown:this.handleModalKeyDown},_react2.default.createElement("div",{className:o.container},_react2.default.createElement("div",{className:o.header},_react2.default.createElement(_cheatsheet_header2.default,{onClose:this.handleDismiss})),_react2.default.createElement("section",{className:o.cheatContent},_react2.default.createElement("div",{className:o.filterSection},_react2.default.createElement(_search_input2.default,{ref:"search",onChange:this.handleFilterChange,placeholder:t(strings.filterPlaceholder)})),_react2.default.createElement("div",{className:o.keysetContainer},n.map(function(t){return _react2.default.createElement(_key_section2.default,{key:t.group.id,keyGroup:t,searching:!!i,setSearchableText:e.setDictionary})}))))):null)}});exports.default=Cheatsheet,module.exports=exports.default;
},{"../../../atoms/modal.jsx":"./atoms/modal","../../../platform/keyboard_shortcuts":"./platform/keyboard_shortcuts","../../../platform/utils/object":"./platform/utils/object","../../../platform/xobni_client/trie":326,"../keyboard_shortcut_group.jsx":"./molecules/keyboard_shortcut_manager/keyboard_shortcut_group","../styles/cheatsheet":190,"./cheatsheet_header.jsx":184,"./key_section.jsx":185,"./search_input.jsx":187,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],184:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function CheatsheetHeader(e,t){var a=e.onClose,s=t.intl.formatMessage;return _react2.default.createElement("header",{className:classNames.header},_react2.default.createElement("div",{className:classNames.text},_react2.default.createElement("div",{className:classNames.heading},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcuts.header",defaultMessage:"Keyboard Shortcuts"})),_react2.default.createElement("div",{className:classNames.subheading},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcuts.open_close",defaultMessage:"Press '?' to open this window"}))),_react2.default.createElement("div",null,_react2.default.createElement("div",null,_react2.default.createElement(_fuji_icon_button2.default,{onClick:a,kind:_fuji_icon.Kinds.CLOSE,size:_fuji_icon.Sizes.XS,colorState:_fuji_icon.ColorStates.INVERTED,title:s(strings.close)}))))}exports.__esModule=!0,exports.default=CheatsheetHeader;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_fuji_icon=require("../../../atoms/constants/fuji_icon"),_cheatsheet_header=require("../styles/cheatsheet_header"),_cheatsheet_header2=_interopRequireDefault(_cheatsheet_header),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),classNames=(0,_css2.default)(_cheatsheet_header2.default),strings=(0,_reactIntl.defineMessages)({close:{id:"shortcut.close",defaultMessage:"Close the keyboard shortcut cheatsheet"}});CheatsheetHeader.contextTypes={intl:_reactIntl.intlShape},module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../styles/cheatsheet_header":191,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],185:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function renderKey(e,t,r){return 0===r.length?null:_react2.default.createElement("li",{className:e.column,"data-test-id":"shortcut-group-column"},_react2.default.createElement("ul",{className:e.listView},r.map(function(e){return _react2.default.createElement(_key_set2.default,{key:e.id,shortcutKey:e,setSearchableText:t})})))}function KeySection(e,t){var r=e.keyGroup,a=r.group,s=r.keys,c=e.searching,i=e.setSearchableText,n=(0,_css2.default)(_key_section2.default,{searching:c}),l=t.intl.formatMessage,u=Math.ceil(s.length/2);return _react2.default.createElement("div",{key:a.id,className:n.sectionContainer},_react2.default.createElement("div",{className:n.sectionHeading},l(a.description)),_react2.default.createElement("ul",{className:n.twoColumnList},renderKey(n,i,s.slice(0,u)),renderKey(n,i,s.slice(u))))}exports.__esModule=!0,exports.default=KeySection;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_key_section=require("../styles/key_section"),_key_section2=_interopRequireDefault(_key_section),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_key_set=require("./key_set.jsx"),_key_set2=_interopRequireDefault(_key_set);KeySection.contextTypes={intl:_reactIntl.intlShape,os:_react.PropTypes.string.isRequired},module.exports=exports.default;
},{"../styles/key_section":192,"./key_set.jsx":186,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],186:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function KeySet(e,t){var r=e.shortcutKey,a=e.setSearchableText,s=r.id,n=r.description,o=r.key,l=t.intl.formatMessage,i=n;if(n.type===_reactIntl.FormattedMessage)i=_react2.default.cloneElement(n,null,function(){var e=Array.prototype.slice.call(arguments).map(extractTranslationFromFormattedMessage.bind(null,l)).join("");return a(e,s),_react2.default.createElement.apply(_react2.default,["span",null].concat(Array.prototype.slice.call(arguments)))});else if(_react2.default.isValidElement(n)){var c=extractTranslationFromFormattedMessage(l,n);a(c,s)}else{var u=l(n);i=u,a(u,s)}return _react2.default.createElement("li",{className:classNames.keyRow},_react2.default.createElement("span",{className:classNames.description},i),_react2.default.createElement(_shortcut_key2.default,{shortcutString:o}))}function extractTranslationFromFormattedMessage(e,t){return _react2.default.isValidElement(t)?t.type!==_reactIntl.FormattedMessage?_react2.default.Children.map(t.props.children,function(t){return extractTranslationFromFormattedMessage(e,t)}).join(""):((0,_invariant2.default)(0===Object.keys(t.props.values).length,"Cheatsheet translation extraction\n            does not support deeply nested rich text translation.\n            Please make it only two levels deep at maximum."),e(t.props)):"object"===("undefined"==typeof t?"undefined":_typeof(t))?e(t):t}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.default=KeySet;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_shortcut_key=require("./shortcut_key.jsx"),_shortcut_key2=_interopRequireDefault(_shortcut_key),_key_set=require("../styles/key_set"),_key_set2=_interopRequireDefault(_key_set),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),classNames=(0,_css2.default)(_key_set2.default);KeySet.contextTypes={intl:_reactIntl.intlShape,os:_react.PropTypes.string.isRequired},module.exports=exports.default;
},{"../../../platform/invariant":"./platform/invariant","../styles/key_set":193,"./shortcut_key.jsx":188,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],187:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_search_input=require("../styles/search_input"),_search_input2=_interopRequireDefault(_search_input),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),classNames=(0,_css2.default)(_search_input2.default),SearchInput=_react2.default.createClass({displayName:"SearchInput",focus:function(){this.refs.input.focus()},render:function(){var e=this.props;return _react2.default.createElement("div",{className:classNames.searchContainer},_react2.default.createElement("input",_extends({},e,{ref:"input",className:classNames.input,type:"text"})),_react2.default.createElement("span",{className:classNames.magnifying},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.SEARCH,size:_fuji_icon3.Sizes.XXS})))}});exports.default=SearchInput,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../styles/search_input":194,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],188:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ShortcutKey(e,t){var a=e.shortcutString,s=t.intl.formatMessage,r={},c=t.os;return a.split(_constants.MULTI_KEY_DELIMITER).forEach(function(e){var t=e.trim();if(SPECIAL_NAME_FOR_SHORTCUT[t])return void(r[SPECIAL_NAME_FOR_SHORTCUT[t]]=[]);if(!(c===_mail_constants.OSKeys.MAC&&t.toLowerCase().indexOf("ctrl")!==-1||c!==_mail_constants.OSKeys.MAC&&t.toLowerCase().indexOf("meta")!==-1)){var a=t.split(_constants.COMBINATION_DELIMITER),s=1===a.length?a:a.slice(0,-1),n=s.map(function(e){return SpecialNameForKey[e]||e.toLowerCase()}).join(" "+_constants.COMBINATION_DELIMITER+" ");r[n]||(r[n]=[]),a.length>1&&a.slice(-1).forEach(function(e){r[n].push(SpecialNameForKey[e]||e.toLowerCase())})}}),_react2.default.createElement("span",{className:classNames.keyGroups,"data-test-id":"cheat-key"},Object.keys(r).map(function(e,t){var a=r[e];return _react2.default.createElement("span",{key:t,className:classNames.keyGroup},t>0&&_react2.default.createElement("span",{className:classNames.delimit},s(strings.or)),_react2.default.createElement("span",{className:classNames.key},e),a.length>0&&_react2.default.createElement("span",{className:classNames.delimit},_constants.COMBINATION_DELIMITER),a.length>0&&_react2.default.createElement("span",{className:classNames.vertical},a.map(function(e,a){var s=[classNames.key,a>0?classNames.marginTop:""].join(" ");return _react2.default.createElement("span",{key:t+"-"+a,className:s},e)})))}))}exports.__esModule=!0,exports.default=ShortcutKey;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_constants=require("../../../platform/keyboard_shortcuts/constants"),_shortcut_key=require("../styles/shortcut_key"),_shortcut_key2=_interopRequireDefault(_shortcut_key),_mail_constants=require("../../../platform/mail_constants"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),classNames=(0,_css2.default)(_shortcut_key2.default),SPECIAL_NAME_FOR_SHORTCUT={"SHIFT+/":"?"},SpecialNameForKey={META:" Command",SHIFT:" Shift",BACKSPACE:" Backspace",SPACE:" Space",DEL:" Del",ENTER:" Enter",UP:" Up",DOWN:" Down",LEFT:" Left",RIGHT:" Right",PERIOD:".",COMMA:","},strings=(0,_reactIntl.defineMessages)({or:{id:"shortcut.or",defaultMessage:"or"}});ShortcutKey.contextTypes={intl:_reactIntl.intlShape,os:_react.PropTypes.string.isRequired},module.exports=exports.default;
},{"../../../platform/keyboard_shortcuts/constants":"./platform/keyboard_shortcuts/constants","../../../platform/mail_constants":"./platform/mail_constants","../styles/shortcut_key":195,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/keyboard_shortcut_manager/keyboard_shortcut_group":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_object=require("../../platform/utils/object"),_actions=require("./actions"),KeyboardShortcutGroup=_react2.default.createClass({displayName:"KeyboardShortcutGroup",contextTypes:{executeAction:_react2.default.PropTypes.func},componentDidMount:function(){this.context.executeAction(_actions.bindShortcut,{keys:this.props.keys})},componentWillReceiveProps:function(e){var t=this.props.keys,o=e.keys,r=Object.create(null);t.forEach(function(e){r[e.id]=e});var n=[];o.forEach(function(e){e.id in r?delete r[e.id]:n.push(e)});var c=(0,_object.values)(r);(c.length||n.length)&&this.context.executeAction(_actions.bindShortcutUpdate,{oldKeys:c,newKeys:n})},componentWillUnmount:function(){this.context.executeAction(_actions.unbindShortcut,{keys:this.props.keys})},render:function(){return this.props.children||null}});exports.default=KeyboardShortcutGroup,module.exports=exports.default;
},{"../../platform/utils/object":"./platform/utils/object","./actions":"./molecules/keyboard_shortcut_manager/actions","react":"./node_modules/react/react.js"}],189:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getStateFromStores(e){var t=e.getStore(_keyboard_shortcuts2.default),r=t.getKeyboardShortcuts();return{keyBindings:r}}exports.__esModule=!0,exports._KeyboardShortcutManager=void 0,exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_keyboard_shortcuts=require("../../stores/keyboard_shortcuts"),_keyboard_shortcuts2=_interopRequireDefault(_keyboard_shortcuts),_keyboard_shortcuts3=require("../../platform/keyboard_shortcuts"),_cheatsheet=require("./atoms/cheatsheet.jsx"),_cheatsheet2=_interopRequireDefault(_cheatsheet),_utils=require("./utils/utils.js"),ModifierKeys=["altKey","ctrlKey","metaKey","shiftKey"],KeyMap={191:"/",27:"ESC",32:"SPACE",8:"BACKSPACE",13:"ENTER",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",46:"DEL",188:"COMMA",190:"PERIOD"},_KeyboardShortcutManager=_react2.default.createClass({displayName:"_KeyboardShortcutManager",contextTypes:{os:_react2.default.PropTypes.string.isRequired},componentWillMount:function(){this.allShortcuts=(0,_keyboard_shortcuts3.__dangerouslyGetManifest)()},componentDidMount:function(){window.addEventListener("keydown",this.onKeyDown)},componentWillUnmount:function(){window.removeEventListener("keydown",this.onKeyDown)},onKeyDown:function(e){if(!(0,_utils.shouldIgnoreKeyDown)(e.target)){var t=KeyMap[e.which]||String.fromCharCode(e.which).toUpperCase(),r=this.props.keyBindings[t];r&&r.some(function(t){if(ModifierKeys.every(function(r){return t[r]===e[r]}))return t.callback(e),!0})}},render:function(){return _react2.default.createElement(_cheatsheet2.default,{allKeys:this.allShortcuts,activeKeys:this.props.keyBindings})}});exports._KeyboardShortcutManager=_KeyboardShortcutManager;var KeyboardShortcutManager=(0,_fluxibleAddonsReact.connectToStores)(_KeyboardShortcutManager,[_keyboard_shortcuts2.default],getStateFromStores);exports.default=KeyboardShortcutManager;
},{"../../platform/keyboard_shortcuts":"./platform/keyboard_shortcuts","../../stores/keyboard_shortcuts":331,"./atoms/cheatsheet.jsx":183,"./utils/utils.js":196,"fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js"}],190:[function(require,module,exports){
module.exports={className:{default:{container:"s_3Lic3 H_HMYSt k_w I_52qC D_F ek_BB ab_FT",cheatContent:"P_1EutVf U_72FG D_F ek_BB en_N ej_0 em_N",keysetContainer:"iz_A W_6D6F em_N ej_0",header:"en_0",filterSection:"en_0"}},_key:"ZIdXmv"};
},{"./src/molecules/keyboard_shortcut_manager/styles/atomic_cheatsheet.css":"./molecules/keyboard_shortcut_manager/styles/atomic_cheatsheet"}],191:[function(require,module,exports){
module.exports={className:{default:{header:"D_F ab_C W_6D6F k_w C_52qC aw_Z1Skzn2 P_nzg7u",text:"em_N D_F ek_BB ab_CI",heading:"A_6FsP u_b U_fq7",subheading:"A_6Eb4"}},_key:"Z1N2Pju"};
},{"./src/molecules/keyboard_shortcut_manager/styles/atomic_cheatsheet_header.css":"./molecules/keyboard_shortcut_manager/styles/atomic_cheatsheet_header"}],192:[function(require,module,exports){
module.exports={className:{default:{twoColumnList:"D_F ha_n P_0 gl_FM eo_HB o_h M_1A1TYO",column:"em_N en_N s_3rRhf",spacer:"ej_6LEV en_0",sectionContainer:"U_6TFj",sectionHeading:"A_6EWk C_Z291T0t U_6Fd5",listView:"hd_n X_0"},searching:{twoColumnList:"ek_BB"}},_key:"1UraCA"};
},{"./src/molecules/keyboard_shortcut_manager/styles/atomic_key_section.css":"./molecules/keyboard_shortcut_manager/styles/atomic_key_section"}],193:[function(require,module,exports){
module.exports={className:{default:{keyRow:"D_F ab_C M_3Y3Gk em_N",description:"A_6Eb4 C_Z291T0t E_fq7"}},_key:"Z1SW0Db"};
},{"./src/molecules/keyboard_shortcut_manager/styles/atomic_key_set.css":"./molecules/keyboard_shortcut_manager/styles/atomic_key_set"}],194:[function(require,module,exports){
module.exports={className:{default:{searchContainer:"H_6UbO M_1JP1a2 p_R",input:"W_6D6F H_6D6F k_w li_6UbO y_1ACvVU",magnifying:"p_a L_0 T_0 cZW7ROP_n H_6D6F D_F ab_C P_3gJOe"}},_key:"1bDRlP"};
},{"./src/molecules/keyboard_shortcut_manager/styles/atomic_search_input.css":"./molecules/keyboard_shortcut_manager/styles/atomic_search_input"}],195:[function(require,module,exports){
module.exports={className:{default:{delimit:"M_3gJOe A_6DUj",keyGroups:"D_F",keyGroup:"D_F ab_C",vertical:"D_F ek_BB ab_CI",key:"A_6DUj i_6DUj I_ZnkeaL j_1ifozK y_2tAGiz H_6FIA P_3gJOe k_w e_dRA J_x D_F ab_C",marginTop:"Y_fq7"}},_key:"ZGBct9"};
},{"./src/molecules/keyboard_shortcut_manager/styles/atomic_shortcut_key.css":"./molecules/keyboard_shortcut_manager/styles/atomic_shortcut_key"}],196:[function(require,module,exports){
"use strict";function shouldIgnoreKeyDown(e){return!!IGNORE_KEY_ON_NODE_NAME[e.nodeName]||"true"===e.contentEditable}exports.__esModule=!0,exports.shouldIgnoreKeyDown=shouldIgnoreKeyDown;var IGNORE_KEY_ON_NODE_NAME={INPUT:!0,TEXTAREA:!0};
},{}],"./molecules/list_view/infinite_list_view":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_keyboard_shortcut_group=require("../keyboard_shortcut_manager/keyboard_shortcut_group.jsx"),_keyboard_shortcut_group2=_interopRequireDefault(_keyboard_shortcut_group),_keyboard_shortcuts=require("../../platform/keyboard_shortcuts"),_reactIntl=require("react-intl"),_mail_constants=require("../../platform/mail_constants"),_keyboard_shortcut_groups=require("../../platform/keyboard_shortcut_groups"),_infinite_scroll=require("../../atoms/infinite_scroll.jsx"),_infinite_scroll2=_interopRequireDefault(_infinite_scroll),NOOP=function(){},navigationShortcuts=(0,_keyboard_shortcuts.createShortcutGroup)({invisible:!0,keys:{scrollTop:{key:"META+UP"},scrollBottom:{key:"META+DOWN"},cursorUp:{key:"UP,COMMA"},cursorDown:{key:"DOWN,PERIOD"}}}),selectionShortcuts=(0,_keyboard_shortcuts.createShortcutGroup)({group:_keyboard_shortcut_groups.Selection,keys:{select:{key:"SPACE",description:_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.select",defaultMessage:"{one} email",values:{one:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.select_strong_one",defaultMessage:"One"}))}})},selectAll:{key:"META+A,CTRL+A",description:_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.select_all",defaultMessage:"{allEmails} in view",values:{allEmails:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.select_all_strong_mails",defaultMessage:"All emails"}))}})},selectUp:{key:"SHIFT+UP",description:_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.consecutive_select",defaultMessage:"{consecutive} emails",values:{consecutive:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.consecutive_select_strong",defaultMessage:"Consecutive"}))}})},selectDown:{key:"SHIFT+DOWN",description:_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.consecutive_select",defaultMessage:"{consecutive} emails",values:{consecutive:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.consecutive_select_strong",defaultMessage:"Consecutive"}))}})}}}),generalShortcuts=(0,_keyboard_shortcuts.createShortcutGroup)({group:_keyboard_shortcut_groups.General,keys:{open:{key:"ENTER",description:_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.open",defaultMessage:"{open} an email",values:{open:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.open_strong",defaultMessage:"Open"}))}})}}}),InfiniteListView=_react2.default.createClass({displayName:"InfiniteListView",getDefaultProps:function(){return{onSelect:NOOP}},_onOpen:function(e){this.props.onOpen(e)},_onSelect:function(e){e.preventDefault(),this.props.onSelect()},_onSelectAll:function(e){e.preventDefault(),this.props.onSelectAll()},_onNavigate:function(e,t){t.preventDefault(),this.props.onCursorMove(e)},_onShiftNavigate:function(e,t){t.preventDefault(),this.props.onShiftNavigate(e)},_selectFirstItem:function(){this.props.onCursorMove(_mail_constants.CursorMovement.DOWN)},render:function(){var e=this.props.infiniteScrollProps;return _react2.default.createElement(_keyboard_shortcut_group2.default,{keys:[navigationShortcuts.scrollTop(this._onNavigate.bind(this,_mail_constants.CursorMovement.FIRST)),navigationShortcuts.scrollBottom(this._onNavigate.bind(this,_mail_constants.CursorMovement.LAST)),navigationShortcuts.cursorUp(this._onNavigate.bind(this,_mail_constants.CursorMovement.UP)),navigationShortcuts.cursorDown(this._onNavigate.bind(this,_mail_constants.CursorMovement.DOWN)),selectionShortcuts.selectUp(this._onShiftNavigate.bind(this,_mail_constants.CursorMovement.UP)),selectionShortcuts.selectDown(this._onShiftNavigate.bind(this,_mail_constants.CursorMovement.DOWN)),selectionShortcuts.select(this._onSelect),selectionShortcuts.selectAll(this._onSelectAll),generalShortcuts.open(this._onOpen)]},_react2.default.createElement(_infinite_scroll2.default,_extends({},e,{selectFirstItem:this._selectFirstItem})))}});exports.default=InfiniteListView,module.exports=exports.default;
},{"../../atoms/infinite_scroll.jsx":"./atoms/infinite_scroll","../../platform/keyboard_shortcut_groups":"./platform/keyboard_shortcut_groups","../../platform/keyboard_shortcuts":"./platform/keyboard_shortcuts","../../platform/mail_constants":"./platform/mail_constants","../keyboard_shortcut_manager/keyboard_shortcut_group.jsx":"./molecules/keyboard_shortcut_manager/keyboard_shortcut_group","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],197:[function(require,module,exports){
"use strict";function shareCard(t,a){var i=a.initialSubject,e=a.initialBody;t.dispatch(_react_action_constants.mail.NAVIGATE_TO_COMPOSE_REQUESTED,{csid:(0,_utils.generateUID)(),initialSubject:i,initialBody:{content:e}})}exports.__esModule=!0,exports.shareCard=shareCard;var _react_action_constants=require("../../platform/react_action_constants"),_utils=require("../../platform/utils");
},{"../../platform/react_action_constants":"./platform/react_action_constants","../../platform/utils":"./platform/utils"}],198:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _types=require("../../../types"),_email_pill=require("../../hover_card/email_pill.jsx"),_email_pill2=_interopRequireDefault(_email_pill),React=require("react"),styles=require("../styles/address_field"),getCss=require("react-atomic-css/css"),MAX_NUM_OF_CONTACTS=5,AddressField=React.createClass({displayName:"AddressField",getInitialState:function(){return{opened:!1}},handleToggle:function(e){e.preventDefault(),e.stopPropagation(),this.setState({opened:!this.state.opened})},render:function(){var e=getCss(styles),t=this.props.addresses,a=this.state.opened?t.length:MAX_NUM_OF_CONTACTS,s=[React.createElement("span",{key:"label-"+this.props.label,className:e.label},this.props.label)];return t.slice(0,a).forEach(function(t,a,l){s.push(React.createElement(_email_pill2.default,{key:t.email,isCompose:!1,email:t.email},React.createElement("span",{className:e.email,key:a,title:t.email,"data-test-id":"message-to"},t.name||t.email))),a<l.length-1&&s.push(React.createElement("span",{key:a+"-sep",className:e.separator},","))}),t.length>a?s.push(React.createElement("button",{key:"and-more","data-test-id":"and-more",onClick:this.handleToggle,className:e.button},"and ",t.length-MAX_NUM_OF_CONTACTS," more...")):this.state.opened&&s.push(React.createElement("button",{key:"and-more-hide","data-test-id":"and-more-hide",onClick:this.handleToggle,className:e.button},"Hide")),React.createElement("div",{className:e.container},s)}});exports.default=AddressField,module.exports=exports.default;
},{"../../../types":"./types","../../hover_card/email_pill.jsx":181,"../styles/address_field":205,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./molecules/message_card/atoms/blocked_image_banner":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_blocked_image_banner=require("../styles/blocked_image_banner"),_blocked_image_banner2=_interopRequireDefault(_blocked_image_banner),_button=require("../../../atoms/button"),_button2=_interopRequireDefault(_button),_button3=require("../../../atoms/constants/button"),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),classNames=(0,_css2.default)(_blocked_image_banner2.default),strings=(0,_reactIntl.defineMessages)({blockedImageMessageTitle:{id:"blocked_image_banner.message",defaultMessage:"This message contains blocked images."}}),BlockedImageBanner=function(e,t){var a=e.onShowImages,s=e.onChangeImageSetting,n=t.intl,r=n.formatMessage(strings.blockedImageMessageTitle);return _react2.default.createElement("div",{className:classNames.container,"data-test-id":"blocked-image-banner"},_react2.default.createElement(_fuji_icon2.default,{size:_fuji_icon3.Sizes.XS,kind:_fuji_icon3.Kinds.ATTACH_IMAGE_48,colorState:_fuji_icon3.ColorStates.COOL_FAINT}),_react2.default.createElement("p",{title:r,className:classNames.message},r),_react2.default.createElement("div",{className:classNames.noShrink},_react2.default.createElement(_button2.default,{kind:_button3.Kinds.CHROMELESS,onClick:a},_react2.default.createElement("span",{"data-test-id":"show-image-button",className:classNames.button},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"blocked_image_banner.show_images",defaultMessage:"Show images"})))),_react2.default.createElement(_reactIntl.FormattedMessage,{id:"blocked_image_banner.or_text",defaultMessage:"or"}),_react2.default.createElement("div",{className:classNames.noShrink},_react2.default.createElement(_button2.default,{kind:_button3.Kinds.CHROMELESS,onClick:s},_react2.default.createElement("span",{"data-test-id":"always-show-image-button",className:classNames.button},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"blocked_image_banner.change_setting",defaultMessage:"Always show images"})))))};BlockedImageBanner.contextTypes={intl:_reactIntl.intlShape.isRequired},exports.default=BlockedImageBanner,module.exports=exports.default;
},{"../../../atoms/button":"./atoms/button","../../../atoms/constants/button":"./atoms/constants/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../styles/blocked_image_banner":"./molecules/message_card/styles/blocked_image_banner","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/message_card/atoms/body":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.mapStateToProps=exports.Body=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_reactRedux=require("react-redux"),_types=require("../../../types"),_dompurifier=require("dompurifier"),_pgp_parser=require("../../../platform/utils/pgp_parser.js"),_pgp_parser2=_interopRequireDefault(_pgp_parser),_message_quote_finder=require("../../../platform/utils/message_quote_finder"),_lazy_component=require("../../../atoms/lazy_component"),_loading_indicator=require("../../../atoms/loading_indicator.jsx"),_loading_indicator2=_interopRequireDefault(_loading_indicator),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_fuji_icon=require("../../../atoms/constants/fuji_icon"),_content=require("./content.jsx"),_content2=_interopRequireDefault(_content),_utils=require("../../../platform/utils"),_mail_constants=require("../../../platform/mail_constants"),_reducers_selectors=require("../../../reducers_selectors"),_blocked_image_banner=require("./blocked_image_banner"),_blocked_image_banner2=_interopRequireDefault(_blocked_image_banner),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_body=require("../styles/body"),_body2=_interopRequireDefault(_body),classNames=(0,_css2.default)(_body2.default),strings=(0,_reactIntl.defineMessages)({hideQuote:{id:"hide_quote",defaultMessage:"Hide original message"},showQuote:{id:"show_quote",defaultMessage:"Show original message"}}),Body=exports.Body=_react2.default.createClass({displayName:"Body",contextTypes:{config:_react.PropTypes.object.isRequired,intl:_reactIntl.intlShape.isRequired},getInitialState:function(){return{quoteExpanded:this.props.quoteExpanded||!1,mounted:!1}},getDefaultProps:function(){return{onShowImages:_utils.NOOP,onShowQuotedText:_utils.NOOP,onChangeImageSetting:_utils.NOOP}},componentDidMount:function(){this.setState({mounted:!0})},_areImagesBlocked:function(e){var t=e.htmlAnnotations,a=void 0===t?[]:t;return a.some(function(e){var t=e.type;return"blocked"===t})},toggleQuote:function(e){e.preventDefault(),e.stopPropagation();var t=this.state.quoteExpanded,a=this.props,n=a.onShowQuotedText,r=a.isSecure,o=a.hasFullBody;return t||o||n({full:!0,secure:r}),this.setState({quoteExpanded:!t}),!1},renderBodyContent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this.props,n=a.onHrefLinkClick,r=a.onMailtoClick,o=a.headers;return this.isSecureMode&&(0,_pgp_parser.hasPGPAsciiArmor)(e)?_react2.default.createElement(_lazy_component.LazyComponent,{import:"./body_pieces.jsx",isQuoted:!t,headers:o,content:e,onMailtoClick:r,_moduleGetter:function(){return require("./body_pieces.jsx")}},_react2.default.createElement(_lazy_component.When,{loading:!0},_react2.default.createElement("div",null,_react2.default.createElement(_loading_indicator2.default,null)))):_react2.default.createElement(_content2.default,{className:t,dangerouslySetInnerHTML:{__html:e},onHrefLinkClick:n,onMailtoClick:r})},_separateMixedContentInNonQuote:function(e){var t=e.messageAbove,a=e.messageBelow,n=!1,r=!1,o="";return t=(0,_dompurifier.getInertElement)(t).innerText,(0,_pgp_parser2.default)(t,function(e){var s=e.start,i=e.end;o=t.slice(s,i),o.trim()&&!n&&(a=t.slice(i)+a,t='<div class="'+classNames.textContainer+'">'+o+"</div>",r=!0)},function(e){var s=e.normalized,i=e.end;r||(o=t.slice(i),a=o.trim()?'<div class="'+classNames.textContainer+'">'+o+"</div>"+a:a,t=s,n=!0)},1),{messageAbove:t,messageBelow:this.state.quoteExpanded?a:"",expandable:!!a}},componentDidUpdate:function(e,t){this.props.body.html===e.body.html&&this.state.quoteExpanded===t.quoteExpanded||this.enhanceCards()},onLinkEnhancerUtilsLoad:function(e){var t=e.enhanceCardsInTree;this.enhanceCardsInTree=t,this.enhanceCards()},enhanceCards:function(){return!!this.enhanceCardsInTree&&(this.enhanceCardsInTree(this.messageBody,this,this.props.onShareCard,this.context.intl.formatMessage),!0)},render:function(){var e=this,t=this.context.config,a=this.state,n=a.quoteExpanded,r=a.mounted,o=this.props,s=o.onShowImages,i=o.onChangeImageSetting,u=o.renderAttachments,l=o.removeCollapseButton,d=o.body,c=o.hasFullBody,_=!!t&&t.linkEnhancer;this.isSecureMode=!!t&&t.secureMode!==_mail_constants.SecureMode.DISABLED;var m=this._areImagesBlocked(d||{}),p=(0,_message_quote_finder.divideMessage)(d.html,d.htmlAnnotations,n);if(this.isSecureMode&&(0,_pgp_parser.hasPGPAsciiArmor)(p.messageAbove)){if(!r)return _react2.default.createElement("div",null,_react2.default.createElement(_loading_indicator2.default,null));p=this._separateMixedContentInNonQuote(p)}var f=p,g=f.messageAbove,h=f.messageBelow,q=f.expandable,y=this.context.intl.formatMessage(n?strings.hideQuote:strings.showQuote),b=classNames.leftRightPadding;return _react2.default.createElement("div",{"data-test-id":"message-view-body"},m&&_react2.default.createElement("div",{className:b},_react2.default.createElement(_blocked_image_banner2.default,{onChangeImageSetting:i,onShowImages:s.bind(null,{secure:!1,full:c})})),_react2.default.createElement("div",{ref:function(t){return e.messageBody=t},className:"msg-body "+classNames.bodyContainer,"data-test-id":"message-view-body-content"},this.renderBodyContent(g,b),!l&&q&&_react2.default.createElement("div",{className:b},_react2.default.createElement(_fuji_icon_button2.default,{"data-norrin-quoted-button":!0,className:classNames.button,kind:_fuji_icon.Kinds.CHEVRON_UP,size:_fuji_icon.Sizes.XS,rotate:n?_fuji_icon.Rotate.D180:_fuji_icon.Rotate.D90,colorState:_fuji_icon.ColorStates.DISABLED,title:y,onClick:this.toggleQuote},y)),""!==h&&_react2.default.createElement("div",{className:b},this.renderBodyContent(h))),u?_react2.default.createElement("div",{className:b},u()):null,_?_react2.default.createElement(_lazy_component.LazyComponent,{import:"../../../platform/link_enhancer/utils_loader.jsx",onLoad:this.onLinkEnhancerUtilsLoad,_moduleGetter:function(){return require("../../../platform/link_enhancer/utils_loader.jsx")}}):null)}}),mapStateToProps=exports.mapStateToProps=function(e,t){var a=(0,_reducers_selectors.selectors)(e),n=a.getMessageBodiesSelectors,r=n(),o=r.get(t.messageId),s=r.hasFullBody(t.messageId),i=r.isSecureMessage(t.messageId);return{body:o,isSecure:i,hasFullBody:s}};exports.default=(0,_reactRedux.connect)(mapStateToProps)(Body);
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../atoms/lazy_component":"./atoms/lazy_component","../../../atoms/loading_indicator.jsx":"./atoms/loading_indicator","../../../platform/link_enhancer/utils_loader.jsx":"./platform/link_enhancer/utils_loader","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils":"./platform/utils","../../../platform/utils/message_quote_finder":"./platform/utils/message_quote_finder","../../../platform/utils/pgp_parser.js":"./platform/utils/pgp_parser","../../../reducers_selectors":"./reducers_selectors","../../../types":"./types","../styles/body":"./molecules/message_card/styles/body","./blocked_image_banner":"./molecules/message_card/atoms/blocked_image_banner","./body_pieces.jsx":"./molecules/message_card/atoms/body_pieces","./content.jsx":"./molecules/message_card/atoms/content","dompurifier":"./node_modules/dompurifier","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js","react-redux":"./node_modules/react-redux/lib/index.js"}],199:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function BodyError(e){var t=e.onRetry;return _react2.default.createElement("div",{"data-test-id":"message-view-error",className:classNames.emptyBody},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.EXCLAMATION_ALT,size:_fuji_icon3.Sizes.S,colorState:_fuji_icon3.ColorStates.COOL_FAINT}),_react2.default.createElement("span",{className:classNames.emptyBodyMessage},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"message.error_message",defaultMessage:"We couldn't load this message. {retry}",values:{retry:_react2.default.createElement("a",{className:classNames.emptyBodyRetry,onClick:t,"data-test-id":"body-error-retry"},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"message.retry_message",defaultMessage:"Retry!"}))}})))}exports.__esModule=!0,exports.default=BodyError;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_body=require("../styles/body"),_body2=_interopRequireDefault(_body),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),classNames=(0,_css2.default)(_body2.default);module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../styles/body":"./molecules/message_card/styles/body","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],200:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_loading_indicator=require("../../../atoms/loading_indicator.jsx"),_loading_indicator2=_interopRequireDefault(_loading_indicator),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_body=require("../styles/body"),_body2=_interopRequireDefault(_body),classNames=(0,_css2.default)(_body2.default),TIME_TO_BE_CONSIDERED_LONG=1e3,BodyLoading=_react2.default.createClass({displayName:"BodyLoading",getInitialState:function(){return{takesLong:!1}},componentDidMount:function(){this.timeout=setTimeout(function(){this.setState({takesLong:!0})}.bind(this),TIME_TO_BE_CONSIDERED_LONG)},componentWillUnmount:function(){clearTimeout(this.timeout)},render:function(){return _react2.default.createElement("div",{className:classNames.loadingContainer},this.state.takesLong&&_react2.default.createElement(_loading_indicator2.default,null))}});exports.default=BodyLoading,module.exports=exports.default;
},{"../../../atoms/loading_indicator.jsx":"./atoms/loading_indicator","../styles/body":"./molecules/message_card/styles/body","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./molecules/message_card/atoms/content":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_utils=require("../../../platform/utils"),_message_pane_warnings=require("../../../atoms/message_pane_warnings"),_message_pane_warnings2=_interopRequireDefault(_message_pane_warnings),reMailtoProtocol=/^\s*mailto:/i,BodyContent=_react2.default.createClass({displayName:"BodyContent",contextTypes:{config:_react.PropTypes.object},getInitialState:function(){return{warningType:null}},getDefaultProps:function(){return{className:"",onHrefLinkClick:_utils.NOOP,onMailtoClick:_utils.NOOP}},componentDidMount:function(){var e=this.messageBody;e&&(e.addEventListener("submit",this._handleFormWarning,!0),e.addEventListener("focus",this._handlePasswordWarning,!0))},componentWillUnmount:function(){var e=this.messageBody;e&&(e.removeEventListener("submit",this._handleFormWarning,!0),e.removeEventListener("focus",this._handlePasswordWarning,!0))},_isYahooUrl:function(e){var t=document.createElement("a");t.setAttribute("href",e);var n=t.hostname,a=/\.yahoo\.com$/i;return a.test(n)},_handleFormWarning:function(e){var t=e.target;if(!this._isYahooUrl(t.action))return e.preventDefault(),e.stopPropagation(),this.setState({warningType:_message_pane_warnings.WarningTypes.FORM,targetElement:t}),!1},_handlePasswordWarning:function(e){var t=e.target,n=t.tagName,a=t.type,r=t.warningShown;if("INPUT"===n&&"password"===a&&!r)return this.setState({warningType:_message_pane_warnings.WarningTypes.PASSWORD,targetElement:t}),!1},handleKeyDown:function(e){e.stopPropagation()},handleBodyClick:function(e){var t=e.target,n=e.preventDefault,a=e.stopPropagation;if("A"===t.nodeName){if(t.hasAttribute("ymailto")||t.href&&reMailtoProtocol.test(t.href)){n(),a();var r=t.getAttribute("ymailto")||t.href;return void this.props.onMailtoClick(r)}if(t.hasAttribute("href"))return void this.props.onHrefLinkClick(t.getAttribute("href"))}t.parentElement!==this.wrapper&&this.handleBodyClick({target:t.parentElement,preventDefault:n,stopPropagation:a})},handleDialogClose:function(){this.setState({warningType:null,targetElement:null})},render:function(){var e=this,t=this.state,n=t.warningType,a=t.targetElement,r=this.props.dangerouslySetInnerHTML.__html;return _react2.default.createElement("div",{className:this.props.className,onKeyDown:this.handleKeyDown,ref:function(t){return e.wrapper=t}},n?_react2.default.createElement(_message_pane_warnings2.default,{warningType:n,targetElement:a,onDialogClose:this.handleDialogClose}):null,_react2.default.createElement("div",{ref:function(t){return e.messageBody=t},onClickCapture:this.handleBodyClick,dangerouslySetInnerHTML:{__html:r}}))}});exports.default=BodyContent,module.exports=exports.default;
},{"../../../atoms/message_pane_warnings":"./atoms/message_pane_warnings","../../../platform/utils":"./platform/utils","react":"./node_modules/react/react.js"}],201:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_types=require("../../../types"),_date_time_label=require("../../date_time_label"),_date_time_label2=_interopRequireDefault(_date_time_label),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_flex_spacer=require("../../../atoms/flex_spacer.jsx"),_flex_spacer2=_interopRequireDefault(_flex_spacer),_xavatar=require("../../../atoms/xavatar.jsx"),_xavatar2=_interopRequireDefault(_xavatar),_address_field=require("./address_field.jsx"),_address_field2=_interopRequireDefault(_address_field),_email_pill=require("../../hover_card/email_pill.jsx"),_email_pill2=_interopRequireDefault(_email_pill),_highlight=require("../../item_list/utils/highlight"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_header=require("../styles/header"),_header2=_interopRequireDefault(_header),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),strings=(0,_reactIntl.defineMessages)({message_is_read:{id:"message_is_read",defaultMessage:"This message is read"},message_is_not_read:{id:"message_is_not_read",defaultMessage:"This message is not read"},mark_as_read:{id:"mark_as_read",defaultMessage:"Mark as Read"},mark_as_unread:{id:"mark_as_unread",defaultMessage:"Mark as Unread"},message_is_starred:{id:"message_is_starred",defaultMessage:"This message is starred"},message_is_not_starred:{id:"message_is_not_starred",defaultMessage:"This message is not starred"},mark_as_starred:{id:"mark_as_starred",defaultMessage:"Star"},mark_as_unstarred:{id:"mark_as_unstarred",defaultMessage:"Clear Star"},message_to:{id:"message_to",defaultMessage:"To:"},message_cc:{id:"message_cc",defaultMessage:"Cc"},message_bcc:{id:"message_bcc",defaultMessage:"Bcc"},message_header_count_label:{id:"message_header_count_label",defaultMessage:"Message {idx} of {totalMessages}"},message_header_label:{id:"message_header_label",defaultMessage:"Message"},message_has_attachment:{id:"message_has_attachment",defaultMessage:"Message has {attachmentCount, plural,\n            =1 {an attachment}\n            other {attachments}\n        }"},header_print_message:{id:"header_print_message",defaultMessage:"Print"}}),Header=_react2.default.createClass({displayName:"Header",contextTypes:{config:_react.PropTypes.object.isRequired,intl:_reactIntl.intlShape.isRequired},handleStarClick:function(e){e.stopPropagation(),this.props.onToggleStar(e)},handlePrintClick:function(e){e.stopPropagation(),this.props.onPrint(e)},handleReadClick:function(e){e.stopPropagation(),this.props.onToggleRead(e)},handleKeyDown:function(e){switch(e.key){case"Enter":e.preventDefault(),e.stopPropagation(),this.props.onToggleExpand();break;default:return}},renderPrintButton:function(){var e=this.context.intl.formatMessage,a=(0,_css2.default)(_header2.default);return this.props.expanded&&this.props.onPrint?_react2.default.createElement("div",{className:a.print},_react2.default.createElement(_fuji_icon_button2.default,{kind:_fuji_icon3.Kinds.PRINTER,size:_fuji_icon3.Sizes.XS,title:e(strings.header_print_message),ariaLabel:e(strings.header_print_message),colorState:_fuji_icon3.ColorStates.INHERITED,onClick:this.handlePrintClick,paddingLess:!0})):null},render:function(){var e=this.context.intl.formatMessage,a=this.props,t=a.message,s=a.expanded,r=a.onToggleExpand,i=a.onToggleStar,l=a.onToggleRead,_=a.expandable,n=a.idx,d=a.totalMessages,c=t.headers,o=c.from,u=c.to,m=c.cc,f=c.bcc,g=c.date,h=t.flags,p=h.flagged,E=h.read,x=!0,b=(0,_highlight.getHighlightPosition)(t.snippet,x),j=(0,_css2.default)(_header2.default,{expanded:s,expandable:_,flagged:p,highlightPosition:b}),k=this.context.config.conversations?strings.message_header_count_label:strings.message_header_label,M=(t.attachments||[]).length,q=new Date(1e3*g);return _react2.default.createElement("header",{className:j.header,onClick:_?r:null,onKeyDown:_?this.handleKeyDown:null,"aria-label":e(k,{idx:n+1,totalMessages:d})},_react2.default.createElement("span",{className:j.avatar},_react2.default.createElement(_xavatar2.default,{contact:{email:o[0]&&o[0].email}})),l?_react2.default.createElement("div",{className:j.readUnread},_react2.default.createElement(_fuji_icon_button2.default,{"data-test-id":"icon-btn-read",title:e(strings[E?"mark_as_unread":"mark_as_read"]),"aria-label":e(strings[E?"message_is_read":"message_is_not_read"]),"aria-pressed":!E,kind:_fuji_icon3.Kinds.CIRCLE,colorState:E?_fuji_icon3.ColorStates.FAINT:_fuji_icon3.ColorStates.SELECTED,size:_fuji_icon3.Sizes.XS,onClick:this.handleReadClick,paddingLess:!0})):null,_react2.default.createElement("div",{className:j.flexVertical},_react2.default.createElement("div",{className:j.fromRow},_react2.default.createElement("span",{"data-test-id":"message-from",className:j.fromField},o[0]?_react2.default.createElement(_email_pill2.default,{isCompose:!1,email:o[0].email},o[0]&&o[0].name?_react2.default.createElement("span",null,o[0].name,s&&_react2.default.createElement("span",{className:j.fromEmail},"<",o[0].email,">")):o[0].email):null)),!s&&_react2.default.createElement("div",{className:j.snippetContainer,"data-test-id":"snippet"},_react2.default.createElement("div",{className:j.snippet},(0,_highlight.getHighlightedBlocks)(t.snippet,x,j.highlightedTerm))),!s&&_react2.default.createElement(_flex_spacer2.default,null),s&&u.length>0&&_react2.default.createElement(_address_field2.default,{label:e(strings.message_to),addresses:u}),s&&m.length>0&&_react2.default.createElement(_address_field2.default,{label:e(strings.message_cc),addresses:m}),s&&f.length>0&&_react2.default.createElement(_address_field2.default,{label:e(strings.message_bcc),addresses:f})),s&&_react2.default.createElement(_flex_spacer2.default,null),this.renderPrintButton(),M>0?_react2.default.createElement("div",{className:j.attachment},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.ATTACHMENT,size:_fuji_icon3.Sizes.XXS,title:e(strings.message_has_attachment,{attachmentCount:M}),ariaLabel:e(strings.message_has_attachment,{attachmentCount:M})})):null,_react2.default.createElement("div",{className:j.date,"data-test-id":"message-date"},_react2.default.createElement(_date_time_label2.default,{date:q,long:!0})),i?_react2.default.createElement("div",{className:j.star},_react2.default.createElement(_fuji_icon_button2.default,{title:e(strings[p?"mark_as_unstarred":"mark_as_starred"]),"aria-label":e(strings[p?"message_is_starred":"message_is_not_starred"]),"aria-pressed":p,kind:_fuji_icon3.Kinds.STAR,size:_fuji_icon3.Sizes.XS,colorState:p?_fuji_icon3.ColorStates.STARRED:_fuji_icon3.ColorStates.FAINT,onClick:this.handleStarClick,paddingLess:!0})):null)}});exports.default=Header,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/flex_spacer.jsx":"./atoms/flex_spacer","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../atoms/xavatar.jsx":"./atoms/xavatar","../../../types":"./types","../../date_time_label":"./molecules/date_time_label","../../hover_card/email_pill.jsx":181,"../../item_list/utils/highlight":"./molecules/item_list/utils/highlight","../styles/header":206,"./address_field.jsx":198,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],202:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_popover_container=require("../../../atoms/popover/popover_container.jsx"),_popover_container2=_interopRequireDefault(_popover_container),_popover_anchor=require("../../../atoms/popover/popover_anchor.jsx"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_popover_content=require("../../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_more_menu=require("../styles/more_menu"),_more_menu2=_interopRequireDefault(_more_menu),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_popover=require("../../../atoms/constants/popover"),_fuji_icon=require("../../../atoms/constants/fuji_icon"),_reactIntl=require("react-intl"),_lazy_component=require("../../../atoms/lazy_component"),_loading_indicator=require("../../../atoms/loading_indicator.jsx"),_loading_indicator2=_interopRequireDefault(_loading_indicator),classNames=(0,_css2.default)(_more_menu2.default),strings=(0,_reactIntl.defineMessages)({more_menu_label:{id:"more_menu_label",defaultMessage:"More"}}),MessageToolbarMoreMenu=_react2.default.createClass({displayName:"MessageToolbarMoreMenu",contextTypes:{executeAction:_react.PropTypes.func,intl:_reactIntl.intlShape.isRequired},render:function(){var e=this.context.intl.formatMessage;return _react2.default.createElement(_popover_container2.default,{className:classNames.popoverContainer},_react2.default.createElement(_popover_anchor2.default,null,_react2.default.createElement(_fuji_icon_button2.default,{kind:_fuji_icon.Kinds.MORE,size:_fuji_icon.Sizes.XS,title:e(strings.more_menu_label),"aria-label":e(strings.more_menu_label),colorState:_fuji_icon.ColorStates.INHERITED,paddingLess:!0,"data-test-id":"more-card-trigger"})),_react2.default.createElement(_popover_content2.default,{triggerOn:_popover.Triggers.CLICK,onMouseEnter:this.props.onMoreMenuEnter,onMouseLeave:this.props.onMoreMenuLeave,permittedArrowDirections:[_popover.PermittedArrowDirections.DOWN],align:_popover.Align.START,offset:16,"data-test-id":"more-card-menu"},_react2.default.createElement(_lazy_component.LazyComponent,_extends({import:"./more_menu_items.jsx"},this.props,{_moduleGetter:function(){return require("./more_menu_items.jsx")}}),_react2.default.createElement(_lazy_component.When,{loading:!0},_react2.default.createElement(_loading_indicator2.default,null)))))}});exports.default=MessageToolbarMoreMenu,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/popover":"./atoms/constants/popover","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../atoms/lazy_component":"./atoms/lazy_component","../../../atoms/loading_indicator.jsx":"./atoms/loading_indicator","../../../atoms/popover/popover_anchor.jsx":"./atoms/popover/popover_anchor","../../../atoms/popover/popover_container.jsx":"./atoms/popover/popover_container","../../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../styles/more_menu":"./molecules/message_card/styles/more_menu","./more_menu_items.jsx":"./molecules/message_card/atoms/more_menu_items","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],203:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_navigable_list=require("../../../atoms/navigable_list.jsx"),_navigable_list2=_interopRequireDefault(_navigable_list),_navigable_list3=require("../../../atoms/constants/navigable_list"),_list_item=require("../../../atoms/list_item.jsx"),_list_item2=_interopRequireDefault(_list_item),_list_item3=require("../../../atoms/constants/list_item"),_flex_spacer=require("../../../atoms/flex_spacer.jsx"),_flex_spacer2=_interopRequireDefault(_flex_spacer),_more_menu=require("./more_menu.jsx"),_more_menu2=_interopRequireDefault(_more_menu),_fuji_icon=require("../../../atoms/constants/fuji_icon"),_toolbar=require("../styles/toolbar"),_toolbar2=_interopRequireDefault(_toolbar),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),classNames=(0,_css2.default)(_toolbar2.default),strings=(0,_reactIntl.defineMessages)({message_reply:{id:"message_reply",defaultMessage:"Reply"},message_reply_all:{id:"message_reply_all",defaultMessage:"Reply all"},message_forward:{id:"message_forward",defaultMessage:"Forward"},more_menu_label:{id:"more_menu_label",defaultMessage:"More"}}),MessageToolbar=_react2.default.createClass({displayName:"MessageToolbar",contextTypes:{intl:_reactIntl.intlShape.isRequired},getDefaultProps:function(){return{replyEnabled:!0,replyAllEnabled:!0,forwardEnabled:!0}},render:function(){var e=this.context.intl,t=e.formatMessage,a=this.props,l=a.onReply,s=a.onReplyAll,r=a.onForward,i=a.onArchive,_=a.onDelete,n=a.onPrint,o=a.onRawMessage,u=a.forwardEnabled,c=a.replyEnabled,d=a.replyAllEnabled;return _react2.default.createElement("div",{className:classNames.wrapper,"data-test-id":"card-toolbar"},_react2.default.createElement(_flex_spacer2.default,null),_react2.default.createElement("div",{className:classNames.container},_react2.default.createElement(_navigable_list2.default,{kind:_navigable_list3.Kinds.TOOLBAR,tabIndex:0},_react2.default.createElement(_list_item2.default,{kind:_list_item3.Kinds.TOOLBAR_ITEM},_react2.default.createElement("span",{className:classNames.toolbarItem},_react2.default.createElement(_fuji_icon_button2.default,{"data-test-id":"card-toolbar-button-reply",kind:_fuji_icon.Kinds.REPLY,size:_fuji_icon.Sizes.XS,title:t(strings.message_reply),"aria-label":t(strings.message_reply),colorState:_fuji_icon.ColorStates.INHERITED,onClick:l,disabled:!c,paddingLess:!0}))),_react2.default.createElement(_list_item2.default,{kind:_list_item3.Kinds.TOOLBAR_ITEM},_react2.default.createElement("span",{className:classNames.toolbarItem},_react2.default.createElement(_fuji_icon_button2.default,{"data-test-id":"card-toolbar-button-reply-all",kind:_fuji_icon.Kinds.REPLY_ALL,size:_fuji_icon.Sizes.XS,title:t(strings.message_reply_all),"aria-label":t(strings.message_reply_all),colorState:_fuji_icon.ColorStates.INHERITED,onClick:s,disabled:!d,paddingLess:!0}))),_react2.default.createElement(_list_item2.default,{kind:_list_item3.Kinds.TOOLBAR_ITEM},_react2.default.createElement("span",{className:classNames.toolbarItem},_react2.default.createElement(_fuji_icon_button2.default,{"data-test-id":"card-toolbar-button-forward",kind:_fuji_icon.Kinds.FORWARD,size:_fuji_icon.Sizes.XS,title:t(strings.message_forward),"aria-label":t(strings.message_forward),colorState:_fuji_icon.ColorStates.INHERITED,onClick:r,disabled:!u,paddingLess:!0}))),_react2.default.createElement(_list_item2.default,{kind:_list_item3.Kinds.TOOLBAR_ITEM},_react2.default.createElement("span",{className:classNames.moreMenuItem},_react2.default.createElement(_more_menu2.default,{"data-iskeynav":!0,onArchive:i,onDelete:_,onPrint:n,onRawMessage:o,onMoreMenuEnter:this.props.onMoreMenuEnter,onMoreMenuLeave:this.props.onMoreMenuLeave})))),_react2.default.createElement(_flex_spacer2.default,null),_react2.default.createElement("hr",{className:classNames.bottomLine})),_react2.default.createElement(_flex_spacer2.default,null))}});exports.default=MessageToolbar,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/list_item":"./atoms/constants/list_item","../../../atoms/constants/navigable_list":"./atoms/constants/navigable_list","../../../atoms/flex_spacer.jsx":"./atoms/flex_spacer","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../atoms/list_item.jsx":"./atoms/list_item","../../../atoms/navigable_list.jsx":"./atoms/navigable_list","../styles/toolbar":208,"./more_menu.jsx":202,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],204:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_types=require("../../types"),_header=require("./atoms/header.jsx"),_header2=_interopRequireDefault(_header),_body=require("./atoms/body.jsx"),_body2=_interopRequireDefault(_body),_body_loading=require("./atoms/body_loading.jsx"),_body_loading2=_interopRequireDefault(_body_loading),_body_error=require("./atoms/body_error.jsx"),_body_error2=_interopRequireDefault(_body_error),_toolbar=require("./atoms/toolbar.jsx"),_toolbar2=_interopRequireDefault(_toolbar),_message=require("../../actions/message"),MessageActions=_interopRequireWildcard(_message),_settings=require("../../actions/settings"),_actions=require("./actions"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_message_card=require("./styles/message_card"),_message_card2=_interopRequireDefault(_message_card),_mail_constants=require("../../platform/mail_constants"),_keyboard_shortcuts=require("../../platform/keyboard_shortcuts"),_keyboard_shortcut_groups=require("../../platform/keyboard_shortcut_groups"),_utils=require("../../platform/utils"),_constants=require("../../platform/rapid_client/constants"),_constants2=require("../../platform/keyboard_shortcuts/constants");(0,_keyboard_shortcuts.createShortcutGroup)({group:_keyboard_shortcut_groups.Action,keys:Object.assign({star:{key:"L",description:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.toggle_flag",defaultMessage:"Star/Unstar"}))}},_constants2.commonMessageActionKeys)});var MessageCardSec=_constants.SEC_VALUES.MSG_BODY,MessageCard=_react2.default.createClass({displayName:"MessageCard",getDefaultProps:function(){return{active:!1,canTakeFocus:!1}},getInitialState:function(){return this.canTakeFocus=this.props.canTakeFocus,{showToolbar:!1}},handleBlur:function(){this.canTakeFocus=!0},focus:function(){!this.canTakeFocus&&this.refs.content&&this.refs.content.focus()},componentDidMount:function(){this.focus()},componentDidUpdate:function(){this.focus()},contextTypes:{executeAction:_react.PropTypes.func.isRequired},handleToggleRead:function(e){var t=this.props,a=t.message,s=t.messageGroupId,n=a.flags.read?MessageActions.markAsUnread:MessageActions.markAsRead,o={mKey:a.flags.read?_constants.MKEYS.MSG_HDR_MARK_UNREAD:_constants.MKEYS.MSG_HDR_MARK_READ,sec:MessageCardSec,mKeyGroup:a.flags.read?_constants.MKEY_GROUPS.mark_unread:_constants.MKEY_GROUPS.mark_read,interactionType:(0,_utils.getInteractionFromEvent)(e)};e.preventDefault(),e.stopPropagation(),this.context.executeAction(n,{messageIds:[a.id],itemId:s,i13nModel:o})},handleReply:function(e){var t=this.props,a=t.messageGroupId,s=t.message,n={mKey:_constants.MKEYS.MSG_REPLY,sec:MessageCardSec,mKeyGroup:_constants.MKEY_GROUPS.reply,interactionType:(0,_utils.getInteractionFromEvent)(e)};e.preventDefault(),e.stopPropagation(),this.context.executeAction(MessageActions.reply,{messageGroupId:a,message:s,i13nModel:n})},handleReplyAll:function(e){var t=this.props,a=t.messageGroupId,s=t.message,n={mKey:_constants.MKEYS.MSG_REPLY_ALL,sec:MessageCardSec,mKeyGroup:_constants.MKEY_GROUPS.replyAll,interactionType:(0,_utils.getInteractionFromEvent)(e)};e.preventDefault(),e.stopPropagation(),this.context.executeAction(MessageActions.replyAll,{messageGroupId:a,message:s,i13nModel:n})},handleForward:function(e){var t=this.props,a=t.messageGroupId,s=t.message,n={mKey:_constants.MKEYS.MSG_FORWARD,sec:MessageCardSec,mKeyGroup:_constants.MKEY_GROUPS.forward,interactionType:(0,_utils.getInteractionFromEvent)(e)};e.preventDefault(),e.stopPropagation(),this.context.executeAction(MessageActions.forward,{messageGroupId:a,message:s,i13nModel:n})},handleArchive:function(e){var t=this.props,a=t.messageGroupId,s=t.message,n=t.listId,o=t.navigateOnMessageAction;e.preventDefault(),e.stopPropagation(),o(),this.context.executeAction(MessageActions.archiveMessagesFromView,{messageIds:[s.id],messageGroupIds:[a],listId:n})},handleShareCard:function(e,t){this.context.executeAction(_actions.shareCard,{initialSubject:e,initialBody:t})},isPermanentDelete:function(e){return e.indexOf(_mail_constants.FolderTypes.BULK)>-1||e.indexOf(_mail_constants.FolderTypes.TRASH)>-1||e.indexOf(_mail_constants.FolderTypes.DRAFT)>-1},handleDelete:function(e){var t=this.props,a=t.messageGroupId,s=t.message,n=t.listId,o=t.navigateOnMessageAction;e.preventDefault(),e.stopPropagation(),o(),this.context.executeAction(MessageActions.deleteMessagesFromView,{messageIds:[s.id],messageGroupIds:[a],listId:n,permanent:this.isPermanentDelete(s.folder.types),async:!1})},handlePrint:function(e,t){var a={sec:MessageCardSec,interactionType:(0,_utils.getInteractionFromEvent)(e)};a.mKey="toolbar"===t?"TOOLBAR_MORE_MENU_PRINT":"MSG_HDR_PRINT",e.preventDefault(),e.stopPropagation();var s=this.props,n=s.messageGroupId,o=s.message;this.context.executeAction(MessageActions.printMessage,{messageGroupId:n,message:o,i13nModel:a})},handleRawMessage:function(e){var t=this.props.message;e.preventDefault(),e.stopPropagation(),this.context.executeAction(MessageActions.openRawMessage,{messageId:t.id})},handleStar:function(e){var t=this.props.message,a={mKey:t.flags.flagged?_constants.MKEYS.MSG_HDR_MARK_UNSTAR:_constants.MKEYS.MSG_HDR_MARK_STAR,sec:MessageCardSec,mKeyGroup:t.flags.flagged?_constants.MKEY_GROUPS.mark_unstar:_constants.MKEY_GROUPS.mark_star,interactionType:(0,_utils.getInteractionFromEvent)(e)};e.preventDefault(),e.stopPropagation(),this.context.executeAction(t.flags.flagged?MessageActions.markAsUnflagged:MessageActions.markAsFlagged,{messageIds:[t.id],i13nModel:a})},handleClick:function(){this.props.onClick()},handleKeyDown:function(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)){switch(e.key){case"Enter":e.preventDefault(),e.stopPropagation(),this.props.onToggleExpand()}var t=String.fromCharCode(e.which);if("K"===t)return this.handleToggleRead(e);if("L"===t)return this.handleStar(e);if(this.props.bodyState===_mail_constants.RecordStates.LOADED)switch(t){case"R":this.handleReply(e);break;case"A":this.handleReplyAll(e);break;case"F":this.handleForward(e);break;case"P":this.handlePrint(e)}}},handleHrefLinkClick:function(e){var t=this.props.message;this.context.executeAction(MessageActions.clickMessageBodyLink,{hrefLink:e,message:t,i13nModel:{mKey:_constants.MKEYS.OPEN_LINK,sec:_constants.SEC_VALUES.MSG_BODY}})},handleToolbarOnMouseEnter:function(){this.setState({showToolbar:!0})},handleToolbarOnMouseLeave:function(){this.setState({showToolbar:!1})},handleMoreMenuEnter:function(){this.props.active||this.setState({showToolbar:!0})},handleMoreMenuLeave:function(){this.props.active||this.setState({showToolbar:!1})},handleChangeImageSetting:function(){this.context.executeAction(_settings.updateShowImageSetting,{value:_mail_constants.ShowImageSettings.ALWAYS})},handleReloadMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.full,s=t.secure,n=this.props.listId;this.context.executeAction(MessageActions.getMessageBodies,{listId:n,full:a,secure:s,messageIds:[e]})},render:function(){var e=this,t=this.props,a=t.message,s=t.bodyState,n=t.renderAttachmentTray,o=t.expandable,r=t.expanded,i=t.active,c=t.idx,l=t.totalMessages,d=i||this.state.showToolbar,u=(0,_css2.default)(_message_card2.default,{active:i}),_=null;if(r)switch(s){case _mail_constants.RecordStates.ERROR:_=_react2.default.createElement(_body_error2.default,{onRetry:this.handleReloadMessage.bind(this,a.id)});break;case _mail_constants.RecordStates.LOADED:_=_react2.default.createElement("div",{"data-test-id":"message-body-container",onMouseEnter:this.handleToolbarOnMouseEnter,onMouseLeave:this.handleToolbarOnMouseLeave},_react2.default.createElement(_body2.default,{headers:a.headers,messageId:a.id,renderAttachments:n,onMailtoClick:this.props.onMailtoClick,onHrefLinkClick:this.handleHrefLinkClick,onChangeImageSetting:this.handleChangeImageSetting,onShareCard:this.handleShareCard,onShowQuotedText:this.handleReloadMessage.bind(this,a.id),onShowImages:this.handleReloadMessage.bind(this,a.id)}),_react2.default.createElement("div",{className:u.toolbarHoverArea,"data-test-id":"toolbar-hover-area"},d?_react2.default.createElement(_toolbar2.default,{onReply:this.handleReply,onReplyAll:this.handleReplyAll,onForward:this.handleForward,onArchive:this.handleArchive,onDelete:this.handleDelete,onRawMessage:this.handleRawMessage,onPrint:function(t){return e.handlePrint(t,"toolbar")},onMoreMenuEnter:this.handleMoreMenuEnter,onMoreMenuLeave:this.handleMoreMenuLeave}):null));break;default:_=_react2.default.createElement(_body_loading2.default,null)}return _react2.default.createElement("div",{ref:"content","data-test-id":"message-view","data-test-expanded":r,className:u.messageCardContainer+" message-view","data-iskeynav":!0,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,onClick:this.handleClick,tabIndex:-1},_react2.default.createElement(_header2.default,{message:a,expanded:r,idx:c,totalMessages:l,onToggleStar:this.handleStar,onToggleRead:this.handleToggleRead,onToggleExpand:this.props.onToggleExpand,expandable:o,onPrint:function(t){return e.handlePrint(t,"header")}}),_)}});exports.default=MessageCard,module.exports=exports.default;
},{"../../actions/message":"./actions/message","../../actions/settings":"./actions/settings","../../platform/keyboard_shortcut_groups":"./platform/keyboard_shortcut_groups","../../platform/keyboard_shortcuts":"./platform/keyboard_shortcuts","../../platform/keyboard_shortcuts/constants":"./platform/keyboard_shortcuts/constants","../../platform/mail_constants":"./platform/mail_constants","../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../platform/utils":"./platform/utils","../../types":"./types","./actions":197,"./atoms/body.jsx":"./molecules/message_card/atoms/body","./atoms/body_error.jsx":199,"./atoms/body_loading.jsx":200,"./atoms/header.jsx":201,"./atoms/toolbar.jsx":203,"./styles/message_card":207,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],205:[function(require,module,exports){
module.exports={className:{default:{container:"d_6FIA i_6FIA D_F eo_HB",email:"C4_Z2aVTcY",separator:"E_fq7",label:"u_b E_eo6 C_Z1TsNWR",button:"Q_eo6 P_3gIMd e_dRA I4_Z2aVTcY C4_52qC r_P y_1ACvVU A_6EqO b_0 I_T"}},_key:"Z1CM4I2"};
},{"./src/molecules/message_card/styles/atomic_address_field.css":"./molecules/message_card/styles/atomic_address_field"}],"./molecules/message_card/styles/blocked_image_banner":[function(require,module,exports){
module.exports={className:{default:{container:"D_Z1YJkyX ab_C A_6EqO k_w H_6UbO gl_FM e_dRA b_Z14vXdP Q_6MGW U_6Eb4 P_ZGAgNS",message:"P_0 o_h J_x G_e M_ZmsKgw",button:"C_Z2aVTcY M_3gJOe",noShrink:"en_0"}},_key:"mGb9h"};
},{"./src/molecules/message_card/styles/atomic_blocked_image_banner.css":"./molecules/message_card/styles/atomic_blocked_image_banner"}],"./molecules/message_card/styles/body":[function(require,module,exports){
module.exports={className:{default:{leftRightPadding:"jb_0 X_6MGW N_6Fd5",bodyContainer:"P_wpofO iy_A",flexVertical:"D_F ek_BB",emptyBody:"A_6FsP P_Z17Hvh7 D_F ek_EZ gl_C ab_C",emptyBodyRetry:"r_P C_Z2aVTcY",emptyBodyMessage:"Q_fq7 E_fq7",button:"A_6DUj C_Z1TsNWR Q_36Jhx",textContainer:"J_EN"}},_key:"Z24zUTa"};
},{"./src/molecules/message_card/styles/atomic_body.css":"./molecules/message_card/styles/atomic_body"}],206:[function(require,module,exports){
module.exports={className:{default:{header:"r_P D_F W_6D6F p_R P_3Y3Gk ir_0",fromField:"u_b en_0 C4_Z2aVTcY",fromEmail:"u_N",snippet:"J_x o_h C_Z1TsNWR",snippetContainer:"J_x o_h G_e Q_fq7",fromRow:"D_F en_0 E_6MGW",avatar:"en_0 Q_fq7 i_0",date:"D_F en_0 M_3gJOe A_6Eb4 C_Z1TsNWR",readUnread:"D_F ac_FT ab_CI en_0",star:"D_F ab_CI Y_689y en_0",attachment:"D_F en_0 s_6Fd5 M_Ue8I8",print:"en_0 s_6Fd5 H_6Fd5 M_3gJOe cdPFi_Z291T0t O_cMr O4_cMu",flexVertical:"o_h D_F em_N E_fq7",highlightedTerm:"I_2ieea9 D_X P_3zDxc"},"expandable-false":{header:"r_BN"},"expanded-false":{flexVertical:"ab_C",readUnread:"ab_C",star:"ab_C",date:"ab_C",attachment:"ab_C"},expanded:{header:"P_Zjgzuf",flexVertical:"ek_BB"},"highlightPosition-LEFT":{snippet:"Q_0 E_36IIE t_l"},"highlightPosition-CENTER":{snippet:"Q_36IIE E_36IIE t_C"},"highlightPosition-RIGHT":{snippet:"Q_36IIE E_0 t_r"}},_key:"ZCldpg"};
},{"./src/molecules/message_card/styles/atomic_header.css":"./molecules/message_card/styles/atomic_header"}],207:[function(require,module,exports){
module.exports={className:{default:{messageCardContainer:"p_R b_efTvb I_52qC em_N X_fq7 N_6LEV ir3_Z1gmY1F it3_689y",toolbarHoverArea:"H_7jIs D_F ab_C Q_69H5 E_36RhU"},active:{messageCardContainer:"b_2w4l8N p_R j_ZlOSbd"}},_key:"Z18xUz"};
},{"./src/molecules/message_card/styles/atomic_message_card.css":"./molecules/message_card/styles/atomic_message_card"}],"./molecules/message_card/styles/more_menu":[function(require,module,exports){
module.exports={className:{default:{popoverContainer:"D_F cdPFi_Z1RVMOO cdPFi4_Z2aVTcY",separator:"m_Z14vXdP M_3HLUz",popoverContent:"P_3Y3Gk"}},_key:"Z1dF06J"};
},{"./src/molecules/message_card/styles/atomic_more_menu.css":"./molecules/message_card/styles/atomic_more_menu"}],208:[function(require,module,exports){
module.exports={className:{default:{wrapper:"D_F W_6D6F r_BN gl_C",container:"D_F ab_C en_0 b_Z14vXdP e_3mS2U I_52qC P_Z1otBpf",bottomLine:"M_0 P_0 cn_0",label:"X_eo6",toolbarItem:"r_P D_F M_1Eu5U7 cdPFi_Z1RVMOO cdPFi4_Z2aVTcY",moreMenuItem:"r_P D_F M_oRiNT"}},_key:"l0AJt"};
},{"./src/molecules/message_card/styles/atomic_toolbar.css":"./molecules/message_card/styles/atomic_toolbar"}],209:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function GroupError(e){var r=e.onRetry;return _react2.default.createElement("div",{className:classNames.empty,"data-test-id":"group-error"},_react2.default.createElement("p",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"group_error.failed_to_load",defaultMessage:"We couldn't load this message."})),_react2.default.createElement("a",{className:classNames.emptyRetry,onClick:r,"data-test-id":"group-error-retry"},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"group_error.retry",defaultMessage:"Retry"})))}exports.__esModule=!0,exports.default=GroupError;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_message_group_view=require("../styles/message_group_view"),_message_group_view2=_interopRequireDefault(_message_group_view),classNames=(0,_css2.default)(_message_group_view2.default);module.exports=exports.default;
},{"../styles/message_group_view":"./molecules/message_group_view/styles/message_group_view","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],210:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_keyboard_navigation_focus_group=require("../../../atoms/keyboard_navigation_focus_group.jsx"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_message_group_header=require("../styles/message_group_header"),_message_group_header2=_interopRequireDefault(_message_group_header),_mail_ui_vars=require("../../../platform/utils/mail_ui_vars"),_fuji_icon=require("../../../atoms/constants/fuji_icon"),strings=(0,_reactIntl.defineMessages)({message_is_read:{id:"message_is_read",defaultMessage:"This message is read"},message_is_not_read:{id:"message_is_not_read",defaultMessage:"This message is not read"},mark_as_read:{id:"mark_as_read",defaultMessage:"Mark as Read"},mark_as_unread:{id:"mark_as_unread",defaultMessage:"Mark as Unread"},message_is_starred:{id:"message_is_starred",defaultMessage:"This message is starred"},message_is_not_starred:{id:"message_is_not_starred",defaultMessage:"This message is not starred"},mark_as_starred:{id:"mark_as_starred",defaultMessage:"Star"},mark_as_unstarred:{id:"mark_as_unstarred",defaultMessage:"Clear Star"}}),classNames=(0,_css2.default)(_message_group_header2.default),MessageGroupHeader=_react2.default.createClass({displayName:"MessageGroupHeader",contextTypes:{intl:_reactIntl.intlShape.isRequired},getDefaultProps:function(){return{compactGroupHeader:!1,messageGroupDestination:""}},handleStarClick:function(e){e.stopPropagation(),this.props.onToggleGroupStar(e)},handleReadClick:function(e){e.stopPropagation(),this.props.onToggleGroupRead(e)},render:function(){var e=this.props,a=e.subject,s=e.messageCount,t=e.isRead,r=e.flagged,i=e.compactGroupHeader,_=this.props.messageGroupDestination,n=this.context.intl.formatMessage,u=(0,_css2.default)(_message_group_header2.default,{compactGroupHeader:i});return _react2.default.createElement(_keyboard_navigation_focus_group.KeyboardNavigationFocusGroup,{axis:_keyboard_navigation_focus_group.NAVIGATION_AXES.HORIZONTAL,groupTabIndex:_mail_ui_vars.TabIndices.MESSAGE_GROUP_HEADER},_react2.default.createElement("header",{"data-test-id":"message-group-header",className:classNames.groupHeader},_react2.default.createElement("div",{className:classNames.readUnread},_react2.default.createElement(_fuji_icon_button2.default,{"data-test-id":"icon-btn-read",title:n(strings[t?"mark_as_unread":"mark_as_read"]),"aria-label":n(strings[t?"message_is_read":"message_is_not_read"]),"aria-pressed":!t,kind:_fuji_icon.Kinds.CIRCLE,size:_fuji_icon.Sizes.XS,colorState:t?_fuji_icon.ColorStates.FAINT:_fuji_icon.ColorStates.SELECTED,paddingLess:!0,onClick:this.handleReadClick,"data-iskeynav":!0})),_react2.default.createElement("div",{className:classNames.subjectRow},_react2.default.createElement("span",{"data-test-id":"message-group-subject",className:classNames.subject,title:a||""},a?_react2.default.createElement("span",{"data-test-id":"message-group-subject-text"},a):_react2.default.createElement("span",null,_react2.default.createElement("span",null,"("),_react2.default.createElement("span",{className:classNames.noSubject},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"message.no_subject",defaultMessage:"No Subject"})),_react2.default.createElement("span",null,")")),s>1?_react2.default.createElement("span",{"data-test-id":"message-group-count",className:classNames.messageCount},s):null)),_react2.default.createElement("div",{className:classNames.endSideButtonGroup},_react2.default.createElement("div",{className:u.messageGroupDestinationRow},_react2.default.createElement("span",{"data-test-id":"message-group-destination",className:classNames.messageGroupDestination,title:_||""},_)),_react2.default.createElement(_fuji_icon_button2.default,{title:n(strings[r?"mark_as_unstarred":"mark_as_starred"]),"aria-label":n(strings[r?"message_is_starred":"message_is_not_starred"]),"aria-pressed":r,kind:_fuji_icon.Kinds.STAR,size:_fuji_icon.Sizes.XS,colorState:r?_fuji_icon.ColorStates.STARRED:_fuji_icon.ColorStates.FAINT,paddingLess:!0,onClick:this.handleStarClick,"data-iskeynav":!0}))))}});exports.default=MessageGroupHeader,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../atoms/keyboard_navigation_focus_group.jsx":"./atoms/keyboard_navigation_focus_group","../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../styles/message_group_header":215,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],211:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_toolbar=require("../../compose/atoms/toolbar.jsx"),_toolbar2=_interopRequireDefault(_toolbar),_navigable_list=require("../../../atoms/navigable_list.jsx"),_navigable_list2=_interopRequireDefault(_navigable_list),_navigable_list3=require("../../../atoms/constants/navigable_list"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_quick_reply=require("../styles/quick_reply"),_quick_reply2=_interopRequireDefault(_quick_reply),classNames=(0,_css2.default)(_quick_reply2.default),NOOP=function(){},QuickReply=_react2.default.createClass({displayName:"QuickReply",contextTypes:{config:_react.PropTypes.object,intl:_reactIntl.intlShape.isRequired,executeAction:_react.PropTypes.func.isRequired},handleClick:function(e){e.preventDefault(),e.stopPropagation(),this.props.onReplyAll(e)},handleButtonGroupClick:function(e){var t=e.target.getAttribute("data-kind");e.preventDefault(),e.stopPropagation(),"reply"===t?this.props.onReply(e):"replyAll"===t?this.props.onReplyAll(e):"forward"===t&&this.props.onForward(e)},render:function(){var e=this.context.config,t=e.emoji,a=e.gif,l=e.stationery;return _react2.default.createElement("div",{className:classNames.container,"data-test-id":"quick-reply",onClick:this.handleClick},_react2.default.createElement("div",{"data-test-id":"quick-reply-button-group",className:classNames.buttonGroup,onClick:this.handleButtonGroupClick},_react2.default.createElement(_navigable_list2.default,{kind:_navigable_list3.Kinds.TOOLBAR,tabIndex:0},_react2.default.createElement(_reactIntl.FormattedHTMLMessage,{id:"reply_replyall_forward",defaultMessage:'<li class="{listItemClass}"><button tabIndex="-1" data-kind="reply" class="{buttonClass}">Reply</button>, </li><li class="{listItemClass}"><button tabIndex="-1" data-kind="replyAll" class="{buttonClass}">Reply All</button> or </li><li class="{listItemClass}"><button tabIndex="-1" data-kind="forward" class="{buttonClass}">Forward</button></li>',values:{buttonClass:classNames.button,listItemClass:classNames.listItem}}))),_react2.default.createElement(_toolbar2.default,{formatState:{},onExecuteAction:NOOP,focusOnEditor:NOOP,disabled:!0,stationeryEnabled:l,gifFinderEnabled:a,emojiEnabled:t}))}});exports.default=QuickReply,module.exports=exports.default;
},{"../../../atoms/constants/navigable_list":"./atoms/constants/navigable_list","../../../atoms/navigable_list.jsx":"./atoms/navigable_list","../../compose/atoms/toolbar.jsx":"./molecules/compose/atoms/toolbar","../styles/quick_reply":216,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],212:[function(require,module,exports){
"use strict";exports.__esModule=!0;var SUPER_COLLAPSE_MIN_GROUP_SIZE=exports.SUPER_COLLAPSE_MIN_GROUP_SIZE=10,VISIBLE_STACK_SENDERS=exports.VISIBLE_STACK_SENDERS=10,SUPER_COLLAPSED_MIN_STACK_SIZE=exports.SUPER_COLLAPSED_MIN_STACK_SIZE=2;
},{}],213:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactIntl=require("react-intl"),_types=require("../../types"),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),_message=require("../../actions/message"),MessageAction=_interopRequireWildcard(_message),_actions=require("../../apps/mail/actions"),_message_group=require("../../platform/utils/message_group"),_keyboard_shortcuts=require("../../platform/keyboard_shortcuts"),_keyboard_shortcut_groups=require("../../platform/keyboard_shortcut_groups"),_keyboard_shortcut_group=require("../keyboard_shortcut_manager/keyboard_shortcut_group.jsx"),_keyboard_shortcut_group2=_interopRequireDefault(_keyboard_shortcut_group),_keyboard_navigation_focus_group=require("../../atoms/keyboard_navigation_focus_group.jsx"),_message_group_header=require("./atoms/message_group_header.jsx"),_message_group_header2=_interopRequireDefault(_message_group_header),_quick_reply=require("./atoms/quick_reply.jsx"),_quick_reply2=_interopRequireDefault(_quick_reply),_constants=require("../message_toolbar/constants"),_constants2=_interopRequireDefault(_constants),_message_card=require("../message_card"),_message_card2=_interopRequireDefault(_message_card),_attachment_tray=require("../attachment_tray"),_attachment_tray2=_interopRequireDefault(_attachment_tray),_smart_scroll=require("../compose/smart_scroll.jsx"),_smart_scroll2=_interopRequireDefault(_smart_scroll),_senders=require("../message_list/atoms/senders.jsx"),_senders2=_interopRequireDefault(_senders),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_message_group_view=require("./styles/message_group_view"),_message_group_view2=_interopRequireDefault(_message_group_view),_mail_constants=require("../../platform/mail_constants"),_invariant=require("../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_constants3=require("../../platform/rapid_client/constants"),_utils=require("../../platform/utils"),_route=require("../../platform/utils/route"),_before_route_change=require("../../apps/mail/molecules/before_route_change"),_before_route_change2=_interopRequireDefault(_before_route_change),_constants4=require("./constants"),_message_group2=require("../../actions/message_group"),MessageGroupActions=_interopRequireWildcard(_message_group2),_attachment=require("../../actions/attachment"),composeModes=_mail_constants.Compose.Modes,shortcuts=(0,_keyboard_shortcuts.createShortcutGroup)({group:_keyboard_shortcut_groups.AttachmentPreview,keys:{openPreview:{key:"CTRL+P,META+P",description:_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.previewr_open",defaultMessage:"Open Preview"})}}}),strings=(0,_reactIntl.defineMessages)({conversation_view_label:{id:"message_group_view.conversation_view",defaultMessage:"Conversation View"},message_view_label:{id:"message_group_view.message_view",defaultMessage:"Message View"}}),DELAY_ON_VISIBILITY_CHANGE=1e3,MessageGroupView=_react2.default.createClass({displayName:"MessageGroupView",contextTypes:{executeAction:_react.PropTypes.func.isRequired,navigateTo:_react.PropTypes.func.isRequired,intl:_reactIntl.intlShape.isRequired,config:_react.PropTypes.object.isRequired,getCss:_react.PropTypes.func},getInitialState:function(){var e=this.props.cards;return{activeItem:e[e.length-1].cardId,messagesMarkedAsUnread:[]}},componentWillReceiveProps:function(e){this.props.markAsReadOnUnmount?this.setState({messagesMarkedAsUnread:this.getUserInitiatedUnreadStatus(this.props.messageGroup.messages||[],e.messageGroup.messages)}):this.markNewlyLoadedBodiesAsRead(e,this.props);var t=this.props.cards,s=e.cards;t.length>0&&t.slice(-1)[0].cardId!==s.slice(-1)[0].cardId&&this.context.executeAction(MessageGroupActions.changeMessageGroupCardExpansions,{listId:this.props.listId,messageGroupId:this.props.messageGroup.id,cardIds:s.slice(-1).map(function(e){return e.cardId}),newState:_mail_constants.CARD_EXPANSION_STATES.EXPANDED})},componentDidMount:function(){this.props.markAsReadOnUnmount||this.markNewlyLoadedBodiesAsRead(this.props,{bodyStates:{}});var e=this.state.activeItem,t=this.props.cards,s=t.find(function(e){var t=e.message;return t&&!t.flags.read});s&&(e=s.cardId,this.setState({activeItem:e}));var a=(0,_reactDom.findDOMNode)(this.refs[e]),r=(0,_reactDom.findDOMNode)(this._scrollContainer);r.scrollTop=a.offsetTop-_constants.TOOLBAR_HEIGHT,this.fetchBodies({cardExpansions:{}})},componentDidUpdate:function(e){this.fetchBodies(e),this._updateSmartScroll()},componentWillUnmount:function(){this.props.markAsReadOnUnmount&&this.markNewlyLoadedBodiesAsRead(this.props,{bodyStates:{},isAppVisible:this.props.isAppVisible})},getUnsavedData:function(){return{mailtoAttr:this.mailtoAttr,message:this.message}},fetchBodies:function(e){var t=e.cardExpansions,s=this.props,a=s.bodyStates,r=s.cards,n=s.listId,o=s.cardExpansions,i=r.filter(function(e){var t=e.composeData;return!t}).filter(function(e){var s=e.message,r=s.id;return t[r]!==o[r]&&o[r]===_mail_constants.CARD_EXPANSION_STATES.EXPANDED&&(a[r]===_mail_constants.RecordStates.DOES_NOT_EXIST||a[r]===_mail_constants.RecordStates.ERROR)}).map(function(e){var t=e.message;return t.id});i.length&&this.context.executeAction(MessageAction.getMessageBodies,{listId:n,messageIds:i})},previewAttachment:function(e,t){var s=this.props.messageGroup,a=this.context.config.attachmentPreview,r={mKey:_constants3.MKEYS.OPEN_DOC_PREVIEW,sec:_constants3.SEC_VALUES.ATTM_PREVIEW,interactionType:t};a&&this.context.executeAction(_attachment.previewAttachment,{attachmentId:e,messageGroupId:s.id,i13nModel:r,fullScreenMode:!1})},renderAttachments:function(e){var t=e.attachments,s=e.folder,a="undefined"!=typeof s&&s.types.filter(function(e){return e===_mail_constants.FolderTypes.BULK}).length>0;return t&&t.length?_react2.default.createElement(_attachment_tray2.default,{attachments:t,readOnly:!0,allowDownload:!a,mayContainVirus:a,message:e,onAttachmentPreview:this.previewAttachment}):null},handleMailtoClick:function(e,t){if(t){var s=(0,_utils.generateUID)();this.mailtoAttr=t,this.message=e,this.context.navigateTo({route:(0,_route.buildComposeRouteFromCsid)(s)})}},renderCard:function(e,t,s){var a=this.props,r=a.cards,n=a.bodyStates,o=a.isDraftMessage,i=a.listId,c=a.messageGroup,d=a.windowDimensions,u=a.hasAttachmentPreview,_=a.canTakeFocus,l=a.navigateOnMessageAction,p=t.cardId,m=this.state.activeItem===p,g=void 0,h=this.props.cardExpansions[p],f=o[p],A=n[p],E=t.message,v=this.context.config.conversations;if(t.composeData||f&&A===_mail_constants.RecordStates.ERROR){var S=this.context.getCss(_message_group_view2.default,{conseqCompose:s&&!!s.composeData,active:m,isDraftError:A===_mail_constants.RecordStates.ERROR}),M=t.composeData,R=!1;M&&(R=M.composeMode===composeModes.REPLY||M.composeMode===composeModes.REPLY_ALL||M.composeMode===composeModes.FORWARD||M.composeMode===composeModes.EDIT&&c.messages.length>1&&v),g=_react2.default.createElement("div",{ref:p,className:S.composeCard,onFocus:this.handleCardActivation.bind(this,t)},_react2.default.createElement(_smart_scroll2.default,_extends({},t.composeProps,{key:p,ref:"compose-"+p,listId:i,cardId:p,message:E,composeDataState:A||_mail_constants.RecordStates.LOADED,composeData:M,showCloseButton:!1,onClose:this.handleComposeClose,scrollContainer:this._scrollContainer,windowDimensions:d,hasAttachmentPreview:u,isSubjectEditingDisabled:R})))}else g=_react2.default.createElement(_message_card2.default,{ref:p,listId:i,messageGroupId:c.id,message:E,idx:t.idx,totalMessages:t.total,bodyState:A,expanded:h===_mail_constants.CARD_EXPANSION_STATES.EXPANDED,expandable:r.length>1,onToggleExpand:this.handleMessageCardExpansion.bind(this,t),onCardActivation:this.handleCardActivation.bind(this,t),onClick:this.handleCardActivation.bind(this,t),onMailtoClick:this.handleMailtoClick.bind(this,E),renderAttachmentTray:this.renderAttachments.bind(this,E),active:m,canTakeFocus:_,navigateOnMessageAction:l});return _react2.default.createElement("li",{key:p,className:e.messageCard},g)},_updateSmartScroll:function(){var e=this;Object.keys(this.refs).forEach(function(t){0===t.indexOf("compose-")&&e.refs[t]&&e.refs[t].update()})},handleStackExpand:function(e,t){t.preventDefault(),this.context.executeAction(MessageGroupActions.changeMessageGroupCardExpansions,{listId:this.props.listId,messageGroupId:this.props.messageGroup.id,cardIds:e.cards.map(function(e){return e.cardId}),newState:_mail_constants.CARD_EXPANSION_STATES.COLLAPSED})},handleComposeClose:function(){var e=this.props.cards;(!e||e.length<=1)&&this.context.executeAction(_actions.closeActivePage)},handleMessageCardExpansion:function(e){var t=e.cardId,s=t,a=this.props.cardExpansions[t],r=a===_mail_constants.CARD_EXPANSION_STATES.EXPANDED?_mail_constants.CARD_EXPANSION_STATES.COLLAPSED:_mail_constants.CARD_EXPANSION_STATES.EXPANDED;this.context.executeAction(MessageGroupActions.changeMessageGroupCardExpansions,{listId:this.props.listId,messageGroupId:this.props.messageGroup.id,cardIds:[t],newState:r}),this.setState({activeItem:s})},handleCardActivation:function(e){this.setState({activeItem:e.cardId}),this.context.executeAction(MessageGroupActions.focusMessageCard,{card:e})},handleKeyDown:function(e,t){switch(t.key){case"Enter":return t.preventDefault(),t.stopPropagation(),void this.handleStackExpand(e,t);default:return}},renderStack:function(e,t){return _react2.default.createElement("li",{className:e.stack,key:t.cards[0].cardId,onClick:this.handleStackExpand.bind(this,t),onKeyDown:this.handleKeyDown.bind(this,t),"data-test-id":"super-collapse-card","data-iskeynav":!0},_react2.default.createElement("div",{className:e.stackLine}),_react2.default.createElement("span",{className:e.stackLabel},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"super_collapsed_label",defaultMessage:"+{messageNum, number} from {senderList}",values:{messageNum:t.cards.length,senderList:_react2.default.createElement(_senders2.default,{visibleNum:_constants4.VISIBLE_STACK_SENDERS,senders:(0,_message_group.getParticipants)(t.cards.map(function(e){return(0,_invariant2.default)(!e.isDraft,"Stacking drafts is not supported"),e.message})),myAddresses:this.props.myAddresses})}})),_react2.default.createElement("div",{className:e.stackLine}))},renderCardStacks:function(e){var t=this,s=this.props.cards.reduce(function(e,s){var a=t.props.cardExpansions[s.cardId],r=e[e.length-1];return r&&a===r.cardExpansion||(r={cardExpansion:a,cards:[]},e.push(r)),r.cards.push(s),e},[]).map(function(s){return s.cardExpansion!==_mail_constants.CARD_EXPANSION_STATES.STACKED||s.cards.length<_constants4.SUPER_COLLAPSED_MIN_STACK_SIZE||t.props.cards.length<_constants4.SUPER_COLLAPSE_MIN_GROUP_SIZE?s.cards.map(function(s,a,r){return t.renderCard(e,s,r[a+1])}):t.renderStack(e,s)});return Array.prototype.concat.apply([],s)},markNewlyLoadedBodiesAsRead:function(e,t){var s=this,a=e.messageGroup,r=e.bodyStates,n=e.isAppVisible,o=t.bodyStates,i=t.isAppVisible,c=this.state.messagesMarkedAsUnread;if(n){var d=a.messages.filter(function(e){return!(e.flags.read||r[e.id]!==_mail_constants.RecordStates.LOADED||o[e.id]===r[e.id]&&i||c.indexOf(e.id)!==-1)});d.length&&setTimeout(function(){s.context.executeAction(MessageAction.markAsRead,{itemId:a.id,messageIds:d.map(function(e){return e.id})})},i?0:DELAY_ON_VISIBILITY_CHANGE)}},getUserInitiatedUnreadStatus:function(e,t){var s=this.state.messagesMarkedAsUnread,a=[].concat(s);return t.forEach(function(t){if(!t.flags.read){var s=e.find(function(e){return e.id===t.id&&e.flags.read!==t.flags.read});s&&a.push(s.id)}}),a},_executeGroupAction:function(e,t){var s=t.i13nModel,a=this.props.messageGroup;this.context.executeAction(e,{messageGroupIds:[a.id],i13nModel:s})},handleReply:function(e){var t={mKey:_constants3.MKEYS.QUICK_REPLY,sec:_constants3.SEC_VALUES.QUICK_COMPOSE,mKeyGroup:_constants3.MKEY_GROUPS.reply,interaction_type:(0,_utils.getInteractionFromEvent)(e)};this.context.executeAction(MessageGroupActions.replyToLastMessage,{messageGroupId:this.props.messageGroup.id,i13nModel:t})},handleReplyAll:function(e){var t={mKey:_constants3.MKEYS.QUICK_REPLYALL,sec:_constants3.SEC_VALUES.QUICK_COMPOSE,mKeyGroup:_constants3.MKEY_GROUPS.replyAll,interaction_type:(0,_utils.getInteractionFromEvent)(e)};this.context.executeAction(MessageGroupActions.replyAllToLastMessage,{messageGroupId:this.props.messageGroup.id,i13nModel:t})},handleForward:function(e){var t={mKey:_constants3.MKEYS.QUICK_FORWARD,sec:_constants3.SEC_VALUES.QUICK_COMPOSE,mKeyGroup:_constants3.MKEY_GROUPS.forward,interaction_type:(0,_utils.getInteractionFromEvent)(e)};this.context.executeAction(MessageGroupActions.forwardLastMessage,{messageGroupId:this.props.messageGroup.id,i13nModel:t})},handleToggleGroupRead:function(e){e.preventDefault();var t=this.props.messageGroup,s=t.messages[0].flags.read,a=s?MessageGroupActions.markMessageGroupsAsUnread:MessageGroupActions.markMessageGroupsAsRead;this._executeGroupAction(a,{i13nModel:{mKey:s?_constants3.MKEYS.MSG_GRP_HDR_MARK_UNREAD:_constants3.MKEYS.MSG_GRP_HDR_MARK_READ,sec:_constants3.SEC_VALUES.MSG_BODY,mKeyGroup:s?_constants3.MKEY_GROUPS.mark_unread:_constants3.MKEY_GROUPS.mark_read}})},handleToggleGroupStar:function(e){e.preventDefault();var t=this.props.messageGroup,s=t.messages[0].flags.flagged,a=s?MessageGroupActions.markMessageGroupsAsUnflagged:MessageGroupActions.markMessageGroupsAsFlagged;this._executeGroupAction(a,{i13nModel:{mKey:s?_constants3.MKEYS.MSG_GRP_HDR_MARK_UNSTAR:_constants3.MKEYS.MSG_GRP_HDR_MARK_STAR,sec:_constants3.SEC_VALUES.MSG_BODY,mKeyGroup:s?_constants3.MKEY_GROUPS.mark_unstar:_constants3.MKEY_GROUPS.mark_star}})},_shouldShowLabels:function(){var e=this.props,t=e.hasAttachmentPreview,s=e.windowDimensions;return!t||s.innerWidth>=1280},_getFirstAttachment:function(){var e=this.props.messageGroup.messages||[],t=e.find(function(e){return e.attachments&&e.attachments.length});return t&&t.attachments[0]},_lastCardIsCompose:function(){var e=this.props.cards,t=e[e.length-1];return Boolean(t.composeData)},render:function(){var e=this,t=this.context.getCss(_message_group_view2.default),s=this.props,a=s.messageGroup,r=s.folderType,n=s.ToolbarControllerView,o=s.listId,i=s.compactGroupHeader,c=s.hasAttachmentPreview,d=s.messageGroupDestination,u=s.navigateOnMessageAction,_=this.context.config.conversations,l=r===_mail_constants.FolderTypes.BULK,p=this._getFirstAttachment();return _react2.default.createElement(_before_route_change2.default,{getUnsavedData:this.getUnsavedData},_react2.default.createElement("div",{className:t.container,"data-test-id":"message-group-view"},n&&_react2.default.createElement(n,{listId:o,kind:_constants2.default.MESSAGE_VIEW,activeGroupId:a.id,showLabels:this._shouldShowLabels(),hideCloseButton:c,navigateOnMessageAction:u}),_react2.default.createElement(_keyboard_shortcut_group2.default,{keys:[shortcuts.openPreview(function(t){t.preventDefault(),p&&e.previewAttachment(p.id,(0,_utils.getInteractionFromEvent)(t))})]},_react2.default.createElement("div",{role:"main","data-test-id":"message-group-view-scroller","aria-label":this.context.intl.formatMessage(_?strings.conversation_view_label:strings.message_view_label),ref:function(t){e._scrollContainer=t},className:t.scrollView},_react2.default.createElement(_message_group_header2.default,{subject:(0,_message_group.getMetadata)(a).subject,messageGroupDestination:d,compactGroupHeader:i,messageCount:a.messages.length,onToggleGroupRead:this.handleToggleGroupRead,onToggleGroupStar:this.handleToggleGroupStar,isRead:(0,_message_group.getMetadata)(a).flags.read,flagged:(0,_message_group.getMetadata)(a).flags.flagged}),_react2.default.createElement(_keyboard_navigation_focus_group.KeyboardNavigationFocusGroup,{groupTabIndex:_mail_ui_vars.TabIndices.MESSAGE_LIST_MAIN,circularNavigation:!1},_react2.default.createElement("ul",{className:(0,_classnames2.default)(t.cardsContainer,{danger:l}),"data-test-id":"cards"},this.renderCardStacks(t)),!this._lastCardIsCompose()&&_?_react2.default.createElement(_quick_reply2.default,{onReply:this.handleReply,onReplyAll:this.handleReplyAll,onForward:this.handleForward}):null)))))}});exports.default=MessageGroupView,module.exports=exports.default;
},{"../../actions/attachment":"./actions/attachment","../../actions/message":"./actions/message","../../actions/message_group":"./actions/message_group","../../apps/mail/actions":"./apps/mail/actions","../../apps/mail/molecules/before_route_change":"./apps/mail/molecules/before_route_change","../../atoms/keyboard_navigation_focus_group.jsx":"./atoms/keyboard_navigation_focus_group","../../platform/invariant":"./platform/invariant","../../platform/keyboard_shortcut_groups":"./platform/keyboard_shortcut_groups","../../platform/keyboard_shortcuts":"./platform/keyboard_shortcuts","../../platform/mail_constants":"./platform/mail_constants","../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../platform/utils":"./platform/utils","../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../platform/utils/message_group":"./platform/utils/message_group","../../platform/utils/route":"./platform/utils/route","../../types":"./types","../attachment_tray":123,"../compose/smart_scroll.jsx":148,"../keyboard_shortcut_manager/keyboard_shortcut_group.jsx":"./molecules/keyboard_shortcut_manager/keyboard_shortcut_group","../message_card":204,"../message_list/atoms/senders.jsx":"./molecules/message_list/atoms/senders","../message_toolbar/constants":223,"./atoms/message_group_header.jsx":210,"./atoms/quick_reply.jsx":211,"./constants":212,"./styles/message_group_view":"./molecules/message_group_view/styles/message_group_view","classnames":"./node_modules/classnames/index.js","react":"./node_modules/react/react.js","react-dom":"./node_modules/react-dom/index.js","react-intl":"./node_modules/react-intl/lib/index.js"}],214:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_mail_constants=require("../../platform/mail_constants"),_message_group=require("../../platform/utils/message_group"),_index=require("./index.jsx"),_index2=_interopRequireDefault(_index),_group_error=require("./atoms/group_error.jsx"),_group_error2=_interopRequireDefault(_group_error),_loading_indicator=require("../../atoms/loading_indicator.jsx"),_loading_indicator2=_interopRequireDefault(_loading_indicator),_types=require("../../types"),MessageGroupPreview=_react2.default.createClass({displayName:"MessageGroupPreview",handleErrorRetry:function(){},renderError:function(){var e=this;return _react2.default.createElement(_group_error2.default,{onRetry:function(){return e.handleErrorRetry()}})},renderLoading:function(){return _react2.default.createElement(_loading_indicator2.default,null)},render:function(){var e=this.props,r=e.groupState,t=e.messageGroup;switch(r){case _mail_constants.RecordStates.DOES_NOT_EXIST:case _mail_constants.RecordStates.LOADING:return this.renderLoading();case _mail_constants.RecordStates.ERROR:return this.renderError();case _mail_constants.RecordStates.LOADED:default:var a=(0,_message_group.onlyDrafts)(t);return _react2.default.createElement(_index2.default,_extends({},this.props,{key:a?t.messages[0].csid:t.id}))}}});exports.default=MessageGroupPreview,module.exports=exports.default;
},{"../../atoms/loading_indicator.jsx":"./atoms/loading_indicator","../../platform/mail_constants":"./platform/mail_constants","../../platform/utils/message_group":"./platform/utils/message_group","../../types":"./types","./atoms/group_error.jsx":209,"./index.jsx":213,"react":"./node_modules/react/react.js"}],215:[function(require,module,exports){
module.exports={className:{default:{groupHeader:"D_F m_Z12nDQf P_Z1A2bQX I_52qC ab_CI",subjectRow:"D_F ab_C em_N o_h A_6FsP P_3Y3Gk",subject:"en_N i_3mCHE",noSubject:"M_3gI0W",messageCount:"em_0 ac_C D_X i_6FIA P_3gJiI e_fFR Q_fq7 E_eTB A_6DUj I_ZpQYvz",readUnread:"D_F ab_C en_0 E_eo6 Y_fq7",messageGroupDestinationRow:"D_F ab_C em_N en_0 o_h M_Z2q6hl",messageGroupDestination:"t_r A_6EqO C_Z1TsNWR cZ1RzsTJ_1ACvVU G_e J_x o_h",endSideButtonGroup:"D_F ab_C Y_eTB en_0"},compactGroupHeader:{messageGroupDestinationRow:"M_Z2qsJW"}},_key:"hLnFV"};
},{"./src/molecules/message_group_view/styles/atomic_message_group_header.css":"./molecules/message_group_view/styles/atomic_message_group_header"}],"./molecules/message_group_view/styles/message_group_view":[function(require,module,exports){
module.exports={className:{default:{container:"D_F ek_BB p_a Z_0 L_0 R_0 T_0 B_0 cZ1RN91d_GG I_ZnwrMC",cardsContainer:"hd_n M_0 X_0",composeCard:"D_F ek_BB gl_C d_3vFsb b_Z14vXdP e_dRA I_52qC",messageCard:"m_Z12nDQf D_F ek_BB ir_0",stack:"I_52qC t_C r_P D_F ab_C P_1EuKY1 H_6TFj p_R ir3_2d4VCo it3_689y",stackLine:"H_dBP em_N z_Z14vXdP",stackLabel:"em_0 M_1Eu7Y9 C_Z1Xxgu2",scrollView:"iz_A em_0",empty:"W_6D6F t_C A_6FsP P_Z17Hvh7",emptyRetry:"S_U r_P"},conseqCompose:{composeCard:"cn_ZvFCRQ"},active:{composeCard:"b_2w4l8N j_ZlOSbd"},isDraftError:{composeCard:"d_3mS2U P_aFwN2"},"themeMode-DARK":{container:"I_T"}},_key:"1UjUb9"};
},{"./src/molecules/message_group_view/styles/atomic_message_group_view.css":"./molecules/message_group_view/styles/atomic_message_group_view"}],216:[function(require,module,exports){
module.exports={className:{default:{container:"D_F ek_BB r_P P_ZVpSLT I_52qC m_Z14vXdP",buttonGroup:"D_F en_0 u_b C_Z1TsNWR U_7rdk",listItem:"D_I r_BN",button:"r_P u_b C_Z2aVTcY b_0 P_0 M_0 H_6Nds A_6EqO I_T C4_Z29WjXl ir3_2d4VCo it3_dBP",comma:"u_b C_Z1TsNWR"}},_key:"Z8BcJe"};
},{"./src/molecules/message_group_view/styles/atomic_quick_reply.css":"./molecules/message_group_view/styles/atomic_quick_reply"}],"./molecules/message_list/actions":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function retryLoading(t,e){var s=e.listId;t.dispatch(_react_action_constants.mail.CHANGE_FOLDER_REQUESTED,{listId:s});var r=(0,_list.getFolderIdFromListId)(s),a=t.getStore(_user_preferences2.default).getMailboxes()[0].id,o=t.config.messageFetchCount,i=0;return t.mailAPIClient.request("messageGroups.getList",{folderId:r,mailboxId:a,count:o,offset:i,conversationsMode:t.config.conversations}).then(function(e){var r=e.messageGroupList,a=e.hasMoreItems;t.dispatch(_react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED,{listId:s,messageGroupList:r,hasMoreItems:a})}).catch(function(e){t.dispatch(_react_action_constants.mail.CHANGE_FOLDER_FAILED,{listId:s,error:e})})}function changeSortOrder(t,e){var s=e.sortOrder;t.dispatch(_react_action_constants.mail.LIST_SORT_ORDER_CHANGE_REQUESTED,{sortOrder:s})}function toggleSelection(t,e){var s=e.listId,r=e.messageGroupIds;t.dispatch(_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_SELECTED,{listId:s,messageGroupIds:r})}function selectRange(t,e){var s=e.listId,r=e.targetGroupId;t.dispatch(_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_RANGE_SELECTED,{listId:s,targetGroupId:r})}function selectNone(t,e){var s=e.listId;t.dispatch(_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_NONE_SELECTED,{listId:s})}function selectRead(t,e){var s=e.listId;t.dispatch(_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_READ_SELECTED,{listId:s})}function selectUnread(t,e){var s=e.listId;t.dispatch(_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_UNREAD_SELECTED,{listId:s})}function selectStarred(t,e){var s=e.listId;t.dispatch(_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_STARRED_SELECTED,{listId:s})}function selectUnstarred(t,e){var s=e.listId;t.dispatch(_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_UNSTARRED_SELECTED,{listId:s})}function selectMove(t,e){var s=e.listId,r=e.movement;t.dispatch(_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_SELECT_CURSOR_MOVED,{listId:s,movement:r})}function selectAll(t,e){var s=e.listId;t.dispatch(_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_ALL_SELECTED,{listId:s})}function moveCursor(t,e){var s=e.listId,r=e.movement,a=e.unit;t.dispatch(_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_CURSOR_MOVED,{listId:s,movement:r,unit:a})}function itemDragStart(t,e){var s=e.listId,r=e.messageGroupIds;t.dispatch(_react_action_constants.mail.ITEMS_DRAG_STARTED,{listId:s,messageGroupIds:r})}exports.__esModule=!0,exports.loadMoreMessagesAfterScroll=void 0,exports.retryLoading=retryLoading,exports.changeSortOrder=changeSortOrder,exports.toggleSelection=toggleSelection,exports.selectRange=selectRange,exports.selectNone=selectNone,exports.selectRead=selectRead,exports.selectUnread=selectUnread,exports.selectStarred=selectStarred,exports.selectUnstarred=selectUnstarred,exports.selectMove=selectMove,exports.selectAll=selectAll,exports.moveCursor=moveCursor,exports.itemDragStart=itemDragStart;var _react_action_constants=require("../../platform/react_action_constants"),_user_preferences=require("../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_mail=require("../../stores/mail"),_mail2=_interopRequireDefault(_mail),_list=require("../../platform/utils/list"),loadMoreMessagesAfterScroll=exports.loadMoreMessagesAfterScroll=function(){var t=void 0,e=function(e,s){var r=s.listId,a=s.offset,o=s.count;clearTimeout(t);var i=e.getStore(_mail2.default);if(i.isAsyncTaskPending())return void(t=setTimeout(function(){return loadMoreMessagesAfterScroll(e,{listId:r,offset:a,count:o})},1e3));var n=e.getStore(_user_preferences2.default),c=n.getMailboxes()[0].id,_={folderId:(0,_list.getFolderIdFromListId)(r),mailboxId:c,sortOrder:(0,_list.getSortOrderFromListId)(r),count:o,offset:a,conversationsMode:e.config.conversations};return e.mailAPIClient.request("messageGroups.getList",_).then(function(t){var s=t.messageGroupList,a=t.hasMoreItems;return e.dispatch(_react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS,{listId:r,messageGroupList:s,hasMoreItems:a})}).catch(function(t){e.dispatch(_react_action_constants.mail.MORE_MESSAGES_REQUEST_FAILED,{listId:r,error:t})})};return e}();
},{"../../platform/react_action_constants":"./platform/react_action_constants","../../platform/utils/list":"./platform/utils/list","../../stores/mail":"./stores/mail","../../stores/user_preferences":"./stores/user_preferences"}],"./molecules/message_list/atoms/attachment_icon":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_attachment_icon=require("../styles/attachment_icon"),_attachment_icon2=_interopRequireDefault(_attachment_icon),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_reactIntl=require("react-intl"),_types=require("../../../types"),_asymmetric_popover=require("../../../atoms/popover/asymmetric_popover.jsx"),_asymmetric_popover2=_interopRequireDefault(_asymmetric_popover),_popover=require("../../../atoms/constants/popover"),_attachments=require("../../../platform/utils/attachments"),_item=require("../../attachment_tray/atoms/item.jsx"),_item2=_interopRequireDefault(_item),_constants=require("../../../platform/rapid_client/constants"),_carousel=require("../../../atoms/carousel"),_carousel2=_interopRequireDefault(_carousel),_mail_ui_vars=require("../../../platform/utils/mail_ui_vars"),ATTACHMENT_ITEM_WIDTH=100,ATTACHMENT_NAV_WIDTH=30,AttachmentIcon=function(e,t){function a(t,a){var r=e.messageGroup,i=r.id,n=Object.assign({mKey:_constants.MKEYS.ATTACHMENT_LIGHTBOX_OPEN,sec:_constants.SEC_VALUES.MSG_LIST_MSG,interactionType:a});e.onAttachmentPreviewClick({attachmentId:t,messageGroupId:i,i13nModel:n})}var r=e.attachmentTraySize,i=t.getCss(_attachment_icon2.default),n=(0,_attachments.getAttachmentsForMessageListPreview)(e.attachments,t.config.previewableInlineAttachmentSize),c=n.map(function(t,r){return _react2.default.createElement("span",{key:r,className:i.attachmentItem,"data-test-id":"attachment-item-"+r},_react2.default.createElement(_item2.default,{attachment:t,readOnly:!0,allowDownload:!1,onRemove:function(){},onClick:a.bind(null,t.id),isPreviewEnabled:!e.isSpam,previewWithoutDownload:!0,smallPreview:!0}))});return n.length&&!e.isHovered?_react2.default.createElement(_asymmetric_popover2.default,{arrowSize:_popover.ArrowSizes.M,permittedArrowDirections:[_popover.PermittedArrowDirections.UP,_popover.PermittedArrowDirections.DOWN],triggerOn:_asymmetric_popover.OnTriggers.HOVER_DELAYED,triggerDelayTime:200,triggerOff:_asymmetric_popover.OffTriggers.HOVER_OUT,align:_popover.Align.END,offset:16,persistent:!0,isArrowVisible:!1,zAltitude:_mail_ui_vars.ZIndices.POPOVER.MEDIUM},_react2.default.createElement("span",{"data-test-id":"attachment-icon",className:i.attachmentIcon},_react2.default.createElement(_fuji_icon2.default,{kind:(0,_attachments.getBestAttachmentIconKind)(e.attachments),size:_fuji_icon3.Sizes.XS,colorState:e.isDarkThemeMode?_fuji_icon3.ColorStates.FAINT:_fuji_icon3.ColorStates.DISABLED}),_react2.default.createElement("span",{className:i.accessible},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"msg_has_attachments",defaultMessage:"Message has attachments"}))),_react2.default.createElement("div",{"data-test-id":"attachment-popover"},n.length>r?_react2.default.createElement("div",{style:{width:2*ATTACHMENT_NAV_WIDTH+ATTACHMENT_ITEM_WIDTH*r},className:i.attachmentsCarouselContainer},_react2.default.createElement(_carousel2.default,{itemWidth:ATTACHMENT_ITEM_WIDTH},c)):_react2.default.createElement("div",{className:i.attachmentsPopoverContainer},c))):n.length?null:_react2.default.createElement("span",{className:i.accessible,"data-test-id":"accessible-no-attachment"},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"msg_no_attachment",defaultMessage:"No attachment"}))};AttachmentIcon.defaultProps={isHovered:!1,attachmentTraySize:3},AttachmentIcon.contextTypes={getCss:_react.PropTypes.func,config:_react.PropTypes.object},exports.default=AttachmentIcon,module.exports=exports.default;
},{"../../../atoms/carousel":"./atoms/carousel","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/popover":"./atoms/constants/popover","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/popover/asymmetric_popover.jsx":"./atoms/popover/asymmetric_popover","../../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../../platform/utils/attachments":"./platform/utils/attachments","../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../../types":"./types","../../attachment_tray/atoms/item.jsx":"./molecules/attachment_tray/atoms/item","../styles/attachment_icon":"./molecules/message_list/styles/attachment_icon","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],217:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_message_list=require("../styles/message_list"),_message_list2=_interopRequireDefault(_message_list),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),classNames=(0,_css2.default)(_message_list2.default),DragIcon=_react2.default.createClass({displayName:"DragIcon",render:function(){return(this.props.x||this.props.y)&&(this.iconStyles={left:this.props.x,top:this.props.y}),_react2.default.createElement("div",{className:this.iconStyles&&classNames.dragIcon,style:this.iconStyles?this.iconStyles:{}},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.INBOX,size:_fuji_icon3.Sizes.XS}),_react2.default.createElement("b",{className:classNames.counter},this.props.count))}});exports.default=DragIcon,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../styles/message_list":"./molecules/message_list/styles/message_list","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],"./molecules/message_list/atoms/item":[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.mapStateToProps=exports.MessageItem=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactRedux=require("react-redux"),_fluxibleRouter=require("fluxible-router"),_reactIntl=require("react-intl"),_debounce=require("lodash/debounce"),_debounce2=_interopRequireDefault(_debounce),_message_group=require("../../../platform/utils/message_group"),_object=require("../../../platform/utils/object"),_folder=require("../../../platform/utils/folder"),_utils=require("../../../platform/utils"),_types=require("../../../types"),_mail_constants=require("../../../platform/mail_constants"),_constants=require("../constants"),Constants=_interopRequireWildcard(_constants),_button=require("../../../atoms/button"),_button2=_interopRequireDefault(_button),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_checkbox=require("../../../atoms/checkbox.jsx"),_checkbox2=_interopRequireDefault(_checkbox),_date_time_label=require("../../date_time_label"),_date_time_label2=_interopRequireDefault(_date_time_label),_senders=require("./senders.jsx"),_senders2=_interopRequireDefault(_senders),_message_item=require("../styles/message_item"),_message_item2=_interopRequireDefault(_message_item),_senders3=require("../utils/senders"),_folder_label=require("../../../atoms/folder_label.jsx"),_folder_label2=_interopRequireDefault(_folder_label),_highlight=require("../../item_list/utils/highlight"),_generic=require("../../../platform/utils/generic"),_themes=require("../../../platform/theming/themes"),_strings=require("../../../molecules/advanced_search_pane/atoms/strings"),_strings2=_interopRequireDefault(_strings),_account=require("../../../platform/utils/account"),_read_icon=require("./read_icon.jsx"),_read_icon2=_interopRequireDefault(_read_icon),_star_icon=require("./star_icon.jsx"),_star_icon2=_interopRequireDefault(_star_icon),_search_icon=require("./search_icon.jsx"),_search_icon2=_interopRequireDefault(_search_icon),_trash_icon=require("./trash_icon.jsx"),_trash_icon2=_interopRequireDefault(_trash_icon),_attachment_icon=require("./attachment_icon.jsx"),_attachment_icon2=_interopRequireDefault(_attachment_icon),_reducers_selectors=require("../../../reducers_selectors"),NOOP=function(){},localeProviderMap={},strings=(0,_reactIntl.defineMessages)({email_aria_label:{id:"email_aria_label",defaultMessage:"{senderNames}'s email"},deselectionAriaLabel:{id:"deselect_message",defaultMessage:"Deselect message"},selectionAriaLabel:{id:"select_message",defaultMessage:"Select message"}}),debouncedDelete=(0,_debounce2.default)(function(){var e=void 0;try{e=new MouseEvent("mouseover",{bubbles:!0,cancelable:!0,view:window})}catch(t){e=document.createEvent("MouseEvent"),e.initMouseEvent("mouseover",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null)}document.activeElement.dispatchEvent(e),setTimeout(function(){return document.activeElement.dispatchEvent(e)},0)},100,{leading:!0}),MessageItem=exports.MessageItem=_react2.default.createClass({displayName:"MessageItem",contextTypes:{intl:_reactIntl.intlShape.isRequired,getCss:_react.PropTypes.func,getThemeMode:_react.PropTypes.func,config:_react.PropTypes.object},shouldComponentUpdate:function(e,t){var a=this.props.messageGroup===e.messageGroup;return this.context.config.scrollPerf&&(a=this.props.csmIds===e.csmIds&&this.props.isRead===e.isRead&&this.props.isStarred===e.isStarred),!a||this.props.tabIndex!==e.tabIndex||this.props.snippetsEnabled!==e.snippetsEnabled||this.props.layout!==e.layout||this.props.selected!==e.selected||this.props.active!==e.active||this.state.hover!==t.hover},getInitialState:function(){return{hover:!1}},getDefaultProps:function(){return{isScrolling:NOOP,isDragging:NOOP,onInteraction:NOOP}},handleCheckboxClicked:function(e){var t=this.props.messageGroup;e.preventDefault(),e.stopPropagation(),e.shiftKey?this.props.onShiftClick(t):this.props.onCheckboxClick(t,{interactionType:(0,_utils.getInteractionFromEvent)(e)})},handleReadIconClicked:function(e){var t=this.props.messageGroup;e.preventDefault(),e.stopPropagation(),this.props.onReadClick(t,{interactionType:(0,_utils.getInteractionFromEvent)(e)})},handleStarIconClicked:function(e){var t=this.props.messageGroup;e.preventDefault(),e.stopPropagation(),this.props.onStarClick(t,{interactionType:(0,_utils.getInteractionFromEvent)(e)})},handleDeleteIconClicked:function(e){var t=this.props.messageGroup;e.preventDefault(),e.stopPropagation(),this.props.onDeleteClick(t,{interactionType:(0,_utils.getInteractionFromEvent)(e)}),debouncedDelete()},handleContactSearchClicked:function(e){var t=this.props.messageGroup;e.preventDefault(),e.stopPropagation(),this.props.onContactSearchClick(t,{interactionType:(0,_utils.getInteractionFromEvent)(e)})},handleSubjectSearchClicked:function(e){var t=this.props.messageGroup;e.preventDefault(),e.stopPropagation(),this.props.onSubjectSearchClick(t,{interactionType:(0,_utils.getInteractionFromEvent)(e)})},handleOnClick:function(e){var t=this.props,a=t.onClick,s=t.messageGroup;e.stopPropagation(),e.preventDefault(),e.shiftKey?this.props.onShiftClick(s):a(s,{interactionType:(0,_utils.getInteractionFromEvent)(e)})},handleAccessibilityOnClick:function(e){this.handleOnClick(e)},handleOnDoubleClick:function(e){var t=this.props,a=t.onDoubleClick,s=t.messageGroup;e.stopPropagation(),e.preventDefault(),e.shiftKey?this.props.onShiftClick(s):a(s,{interactionType:(0,_utils.getInteractionFromEvent)(e)})},renderMessageCount:function(e,t,a){return _react2.default.createElement("span",{"data-test-id":"message-count",className:e>1?t:a,role:"gridcell"},_react2.default.createElement("span",{className:a,"data-test-id":"accessible-message-count"},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"msg_count",values:{messageCount:e},defaultMessage:"{messageCount, plural,\n                                            one {# message}\n                                            other {# messages}\n                                        }"})),e>1?_react2.default.createElement("span",{"aria-hidden":"true","data-test-id":"visible-message-count"},e):null)},renderDraftLabel:function(e,t,a){return _react2.default.createElement("span",{"data-test-id":"draft-indicator",className:e?t:a},e?_react2.default.createElement(_reactIntl.FormattedMessage,{id:"msg_has_draft",defaultMessage:"DRAFT"}):null)},renderSubject:function(e,t,a){return _react2.default.createElement("span",{"data-test-id":"message-subject",className:a.subject,onClick:this.handleAccessibilityOnClick,role:"gridcell",title:(0,_highlight.removeHighlightDelimiters)(e)},e?(0,_highlight.getHighlightedBlocks)(e,t,a.highlightedTerm):_react2.default.createElement("span",null,_react2.default.createElement("span",null,"("),_react2.default.createElement("span",{className:a.noSubject},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"message.no_subject",defaultMessage:"No Subject"})),_react2.default.createElement("span",null,")")))},renderMessageDestinationLabel:function(e){var t=this.props.messageDestinationLabel;switch(t){case Constants.MessageDestinationLabels.ACCOUNT:return this.renderAccountLabel(e);case Constants.MessageDestinationLabels.FOLDER:return this.renderFolderLabel(e);case Constants.MessageDestinationLabels.NONE:return null}},renderAccountLabel:function(e){var t=this.props,a=t.accounts,s=t.messageGroup,r=s.messages[0].folder,i=a.find(function(e){return e.id===r.accountId}),n=this.context.intl,o=n.formatMessage,l=n.locale,c=localeProviderMap[l];if(!c){var d;c=localeProviderMap[l]=(d={},d[_mail_constants.EmailProviders.YAHOO]=o(_strings2.default.yahoo_account_description),d[_mail_constants.EmailProviders.YAHOO_SB]=o(_strings2.default.yahoo_account_description),d[_mail_constants.EmailProviders.OUTLOOK]=o(_strings2.default.outlook_account_description),d[_mail_constants.EmailProviders.AOL]=o(_strings2.default.aol_account_description),d[_mail_constants.EmailProviders.GOOGLE]=o(_strings2.default.gmail_account_description),d[_mail_constants.EmailProviders.GOOGLE_APP]=o(_strings2.default.gmail_account_description),d)}var u=i.description||c[(0,_account.getProviderFromAccount)(i)];return _react2.default.createElement("div",{className:e.messageDestinationLabel,"data-test-id":"account"},_react2.default.createElement("span",{title:u+"/"+r.name},u))},renderFolderLabel:function(e){var t=this.props.messageGroup,a=(0,_message_group.getMetadata)(t),s=a.folder;return _react2.default.createElement("div",{className:e.messageDestinationLabel,title:s.name,"data-test-id":"folder"},_react2.default.createElement(_folder_label2.default,{folderDisplayType:(0,_folder.getFolderDisplayType)(s),name:s.name}))},render:function(){var e=this,t=this.props,a=t.messageGroup,s=t.selected,r=t.active,i=t.route,n=t.myAddresses,o=t.highlightSearchTerm,l=t.folderType,c=t.listId,d=t.layout,u=t.isBriefView,_=t.isCompactLayout,m=t.isConversationMode,p=t.snippetsEnabled,h=t.onDragStart,g=t.onDrag,f=t.onDragEnd,b=t.hideSearchIcon,C=t.attachmentTraySize,v=p&&!u,E=this.context.intl.formatMessage,k=(0,_message_group.getMetadata)(a,{listId:c}),D=this.props,M=D.isRead,S=D.isStarred;this.context.config.scrollPerf||(M=k.flags.read,S=k.flags.flagged);var y=k.hasVerifiedMessage,T=d===_mail_constants.MessageListLayout.COMPACT_SLIM||d===_mail_constants.MessageListLayout.COMPACT_SNIPPET_SLIM,I=d===_mail_constants.MessageListLayout.COMPACT_NORMAL||d===_mail_constants.MessageListLayout.COMPACT_SNIPPET_NORMAL,L=d===_mail_constants.MessageListLayout.COMPACT_RELAXED||d===_mail_constants.MessageListLayout.COMPACT_SNIPPET_RELAXED,P=d===_mail_constants.MessageListLayout.SLIM&&!T,q=k.hasDraft,N=k.participants,x=k.recipients,O=(0,_highlight.getHighlightPosition)(k.snippetWithMatchDelimiter,o),A=1===a.messages.length,R=this.context.getThemeMode()===_themes.ThemeModes.DARK,j=r&&R,F=s&&R,G=this.state.hover&&!this.props.isScrolling()&&!this.props.isDragging(),w=G&&R,H=G&&_,B=l===_mail_constants.FolderTypes.SENT?(0,_senders3.sentParticipants)({recipients:x,participants:N,myAddresses:n}):N,K=B.map(function(e){return e.name}).join(", "),U=B&&B.length&&(0,_senders3.dedupSenders)(B),W=U&&1===U.length&&(!_||1===a.messages.length)&&n&&!b,z=!m&&!_&&!u,Y=G&&z,X=(0,_message_group.getAttachmentsWithFileNames)(a),J=X.length>0&&!u&&!G&&_,V=this.context.getCss(_message_item2.default,{isStarred:S,isRead:M,selected:s,active:r,highlightPosition:O,isCompactLayout:_,layout:d,hasJustOneMessage:A,isCompactSlimLayout:T,isCompactNormalLayout:I,isCompactRelaxedLayout:L,isNonCompactSlimLayout:P,borderless:u,activeAndDark:j,selectedAndDark:F,showSubjectSearchAndHovered:Y,isHovered:G,isCompactHovered:H,darkAndHovered:w,isCompactHasAttachmentIcon:J}),Q=l===_mail_constants.FolderTypes.BULK;return _react2.default.createElement(_fluxibleRouter.NavLink,{role:"row","data-test-id":"message-list-item","data-test-active":s,"data-test-starred":S,"data-test-read":M,tabIndex:this.props.tabIndex,"aria-label":E(strings.email_aria_label,{senderNames:K}),routeName:i.name,navParams:i.params,onClick:this.handleOnClick,onDoubleClick:this.handleOnDoubleClick,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onMouseOver:function(){e.state.hover||e.props.isScrolling()||e.props.isDragging()||e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},className:V.container+" message-list-item",onDragStart:h,onDrag:(0,_generic.supportsSetDragImage)()?void 0:g,onDragEnd:f},u?null:_react2.default.createElement("div",{className:V.gridB1},_react2.default.createElement("div",{"data-test-id":"icon-btn-checkbox-container",className:V.check,role:"gridcell",onClick:this.handleCheckboxClicked,onDoubleClick:this.handleCheckboxClicked},_react2.default.createElement(_checkbox2.default,{"data-test-id":"icon-btn-checkbox","aria-label":E(s?strings.deselectionAriaLabel:strings.selectionAriaLabel),isChecked:!!s,onClick:this.handleCheckboxClicked,onDoubleClick:this.handleCheckboxClicked,isInverted:R,className:V.checkbox})),y?_react2.default.createElement(_button2.default,{"data-test-id":"icon-btn-ybadge",className:V.ybadgeIcon},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.YBADGE,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.YBADGE})):_react2.default.createElement("div",{className:V.readIcon,role:"gridcell"},_react2.default.createElement(_read_icon2.default,{isHovered:G,isRead:M,isDarkThemeMode:R,onClick:this.handleReadIconClicked})),_react2.default.createElement("div",{className:V.senders,"data-test-id":"senders"},_react2.default.createElement(_senders2.default,{isRead:M,senders:B,myAddresses:n,onClick:this.handleAccessibilityOnClick}),H?_react2.default.createElement(_search_icon2.default,{isHovered:G,showSearch:W,isCompact:_,isDarkThemeMode:R,onClick:this.handleContactSearchClicked}):null,_?this.renderMessageCount(a.messages.length,V.messageCount,V.accessible):null,_?this.renderDraftLabel(q,V.draftIndicator,V.accessible):null),_?null:_react2.default.createElement(_search_icon2.default,{isHovered:G,showSearch:W,searchType:_mail_constants.SearchTypes.CONTACT,isCompact:_,isDarkThemeMode:R,onClick:this.handleContactSearchClicked})),u?null:_react2.default.createElement("div",{className:V.starIcon,role:"gridcell"},_react2.default.createElement(_star_icon2.default,{isHovered:G,isStarred:S,isDarkThemeMode:R,onClick:this.handleStarIconClicked})),_react2.default.createElement("div",{className:V.gridB2},_react2.default.createElement("div",{className:V.message},_react2.default.createElement("div",{className:V.subjectContainer},this.renderSubject(k.subjectWithMatchDelimiter,o,V),_?null:this.renderMessageCount(a.messages.length,V.messageCount,V.accessible),_?null:this.renderDraftLabel(q,V.draftIndicator,V.accessible)),_react2.default.createElement("span",{className:V.subjectSearchIcon},_react2.default.createElement(_search_icon2.default,{isHovered:G,showSearch:z,searchType:_mail_constants.SearchTypes.SUBJECT,isCompact:_,isDarkThemeMode:R,onClick:this.handleSubjectSearchClicked})),v?_react2.default.createElement("div",{className:V.snippetContainer,"data-test-id":"snippet"},_react2.default.createElement("div",{className:V.snippet,onClick:this.handleAccessibilityOnClick,role:"gridcell"},(0,_highlight.getHighlightedBlocks)(k.snippetWithMatchDelimiter,o,V.highlightedTerm))):null),this.renderMessageDestinationLabel(V),u?null:_react2.default.createElement("div",{className:V.attachmentIcon,"data-test-id":"attach-icon-wrapper",role:"gridcell"},_react2.default.createElement(_attachment_icon2.default,{attachments:X,isHovered:H,isDarkThemeMode:R,onAttachmentPreviewClick:this.props.onAttachmentPreviewClick,messageGroup:a,isSpam:Q,attachmentTraySize:C})),_react2.default.createElement("span",{className:V.dateWrapper+" date",style:G?{display:"none"}:{},role:"gridcell"},_react2.default.createElement(_date_time_label2.default,{"data-test-id":"date-time-label",date:new Date(1e3*k.date)})),!u&&!_&&_react2.default.createElement("div",{className:V.iconB2,role:"gridcell"},_react2.default.createElement(_trash_icon2.default,{isHovered:G,isCompact:_,isDarkThemeMode:R,onClick:this.handleDeleteIconClicked}))),!u&&_&&_react2.default.createElement("div",{className:V.iconB2,role:"gridcell"},_react2.default.createElement(_trash_icon2.default,{isHovered:G,isCompact:_,isDarkThemeMode:R,onClick:this.handleDeleteIconClicked})))}}),mapStateToProps=exports.mapStateToProps=function(e,t){var a=(0,_reducers_selectors.selectors)(e),s=a.getMessageGroupsSelectors,r=a.getMessagesSelectors,i=a.getFeaturesSelectors;if(!i().isEnabled("scrollPerf"))return{};var n=s(),o=n.getCsmIdsFromMessageGroupId,l=o(t.messageGroup.id);return{csmIds:l,isRead:!l.some(function(e){return!r().getFlags(e).read}),isStarred:l.some(function(e){return r().getFlags(e).flagged})}};exports.default=(0,_reactRedux.connect)(mapStateToProps)(MessageItem);
},{"../../../atoms/button":"./atoms/button","../../../atoms/checkbox.jsx":"./atoms/checkbox","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/folder_label.jsx":"./atoms/folder_label","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../molecules/advanced_search_pane/atoms/strings":"./molecules/advanced_search_pane/atoms/strings","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/theming/themes":"./platform/theming/themes","../../../platform/utils":"./platform/utils","../../../platform/utils/account":"./platform/utils/account","../../../platform/utils/folder":"./platform/utils/folder","../../../platform/utils/generic":"./platform/utils/generic","../../../platform/utils/message_group":"./platform/utils/message_group","../../../platform/utils/object":"./platform/utils/object","../../../reducers_selectors":"./reducers_selectors","../../../types":"./types","../../date_time_label":"./molecules/date_time_label","../../item_list/utils/highlight":"./molecules/item_list/utils/highlight","../constants":"./molecules/message_list/constants","../styles/message_item":"./molecules/message_list/styles/message_item","../utils/senders":"./molecules/message_list/utils/senders","./attachment_icon.jsx":"./molecules/message_list/atoms/attachment_icon","./read_icon.jsx":"./molecules/message_list/atoms/read_icon","./search_icon.jsx":"./molecules/message_list/atoms/search_icon","./senders.jsx":"./molecules/message_list/atoms/senders","./star_icon.jsx":"./molecules/message_list/atoms/star_icon","./trash_icon.jsx":"./molecules/message_list/atoms/trash_icon","fluxible-router":"./node_modules/fluxible-router/index.js","lodash/debounce":"./node_modules/lodash/debounce.js","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js","react-redux":"./node_modules/react-redux/lib/index.js"}],"./molecules/message_list/atoms/read_icon":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_read_icon=require("../styles/read_icon"),_read_icon2=_interopRequireDefault(_read_icon),_button=require("../../../atoms/button"),_button2=_interopRequireDefault(_button),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_reactIntl=require("react-intl"),strings=(0,_reactIntl.defineMessages)({markAsRead:{id:"mark_as_read",defaultMessage:"Mark as read"},markAsUnread:{id:"mark_as_unread",defaultMessage:"Mark as unread"},msgIsRead:{id:"msg_is_read",defaultMessage:"This message is read"},msgIsNotRead:{id:"msg_is_not_read",defaultMessage:"This message is not read"}}),ReadIcon=function(e,a){var t=e.isDarkThemeMode,s=a.getCss(_read_icon2.default,{isDarkThemeMode:t}),i=a.intl.formatMessage,r=null;return r=e.isRead?e.isHovered?_react2.default.createElement("span",null,_react2.default.createElement(_fuji_icon2.default,{"data-test-read":e.isRead,kind:_fuji_icon3.Kinds.CIRCLE,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.INHERITED}),_react2.default.createElement("span",{className:s.accessible,"aria-label":i(e.isRead?strings.msgIsRead:strings.msgIsNotRead)})):_react2.default.createElement("span",{className:s.accessible,"aria-label":i(strings.msgIsRead)}):_react2.default.createElement("span",null,_react2.default.createElement(_fuji_icon2.default,{"data-test-read":e.isRead,kind:_fuji_icon3.Kinds.CIRCLE,size:_fuji_icon3.Sizes.XS,colorState:t?_fuji_icon3.ColorStates.SELECTED_DARK_THEME_MODE:_fuji_icon3.ColorStates.SELECTED}),_react2.default.createElement("span",{className:s.accessible,"aria-label":i(strings.msgIsNotRead)})),_react2.default.createElement(_button2.default,{"data-test-id":"icon-btn-read",title:i(e.isRead?strings.markAsUnread:strings.markAsRead),onClick:e.onClick,onDoubleClick:e.onClick,className:s.readIcon},r)};ReadIcon.defaultProps={isHovered:!1,isCompact:!1},ReadIcon.contextTypes={intl:_reactIntl.intlShape,getCss:_react.PropTypes.func},exports.default=ReadIcon,module.exports=exports.default;
},{"../../../atoms/button":"./atoms/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../styles/read_icon":"./molecules/message_list/styles/read_icon","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/message_list/atoms/search_icon":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_search_icon=require("../styles/search_icon"),_search_icon2=_interopRequireDefault(_search_icon),_button=require("../../../atoms/button"),_button2=_interopRequireDefault(_button),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_mail_constants=require("../../../platform/mail_constants"),_reactIntl=require("react-intl"),strings=(0,_reactIntl.defineMessages)({searchByContact:{id:"search_by_contact",defaultMessage:"Search for messages from this sender"},searchBySubject:{id:"search_by_subject",defaultMessage:"Search for messages with this subject"}}),SearchIcon=function(e,t){var a=e.isDarkThemeMode,r=e.searchType===_mail_constants.SearchTypes.SUBJECT,c=t.getCss(_search_icon2.default,{isDarkThemeMode:a}),s=t.intl.formatMessage;return e.showSearch&&e.isHovered?_react2.default.createElement(_button2.default,{"data-test-id":"icon-btn-search",title:s(r?strings.searchBySubject:strings.searchByContact),onClick:e.onClick,onDoubleClick:e.onClick,className:e.isCompact?c.contactSearchIconCompact:c.searchIcon},_react2.default.createElement("span",null,_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.SEARCH_MINI,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.INHERITED}))):null};SearchIcon.defaultProps={isHovered:!1,isCompact:!1},SearchIcon.contextTypes={intl:_reactIntl.intlShape,getCss:_react.PropTypes.func},exports.default=SearchIcon,module.exports=exports.default;
},{"../../../atoms/button":"./atoms/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../platform/mail_constants":"./platform/mail_constants","../styles/search_icon":"./molecules/message_list/styles/search_icon","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/message_list/atoms/senders":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_types=require("../../../types"),_senders=require("../styles/senders"),_senders2=_interopRequireDefault(_senders),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_senders3=require("../utils/senders"),_reactIntl=require("react-intl"),strings=(0,_reactIntl.defineMessages)({comma:{id:"mail_app.comma_with_space",defaultMessage:",\\u0020"},me:{id:"mail_app.me",defaultMessage:"me"},and:{id:"mail_app.and",defaultMessage:"\\u0020and\\u0020"}}),SEPARATOR=" .. ",TRUNCATOR=".",TRUNCATE_LENGTH=10,SendersList=_react2.default.createClass({displayName:"SendersList",getDefaultProps:function(){return{visibleNum:3,myAddresses:{},transparent:!1}},contextTypes:{intl:_reactIntl.intlShape},getSenderLabelText:function(e){var t=e.name,s=e.email,r=this.props.myAddresses,n=this.context.intl.formatMessage,i=void 0;return i=r[s]?n(strings.me):t?t.split(" ")[0]:s.split("@")[0],i.length>TRUNCATE_LENGTH+TRUNCATOR.length?i.slice(0,TRUNCATE_LENGTH)+TRUNCATOR:i},trimIndicesToVisible:function(e,t){var s=this.props.visibleNum;return e.length<=s-1?t:t.slice(0,e[0].recent?s-1:s)},getLabel:function(e,t){var s=e?"span":"strong";return _react2.default.createElement(s,0,t)},getSenderLabels:function(e){var t=this,s=this.props,r=s.myAddresses,n=s.isRead,i=this.context.intl.formatMessage;if(0===e.length)return null;if(1===e.length){var a=e[0],l=a.email,u=r[l]?i(strings.me):null,d=u||a.name||a.email;return this.getLabel(n,d)}var o=[],c=(0,_senders3.dedupSenders)(e),p=(0,_senders3.createPriorityIndices)(c),m=c.map(function(e){return t.getSenderLabelText(e)}),f=this.trimIndicesToVisible(c,p).sort(),_=0;return f.forEach(function(e,t){var s=m[e];e>_+1?o.push(SEPARATOR):t>0&&o.push(i(strings.comma)),o.push(s),_=e}),this.getLabel(n,o.join(""))},getSenderTooltip:function(e){var t=this,s=this.context.intl.formatMessage,r=(0,_senders3.dedupSenders)(e),n="";if(r)if(n=r.map(function(e){return t.getSenderLabelText(e)}),n=n.filter(function(e,t,s){return s.indexOf(e)===t}),1===n.length)n=r[0].email;else{var i=n.pop();n=n.join(s(strings.comma))+s(strings.and)+i}return n},render:function(){var e=(0,_css2.default)(_senders2.default,{transparent:this.props.transparent}),t=this.props,s=t.senders,r=t.onClick,n=this.getSenderTooltip(s);return _react2.default.createElement("span",{className:e.participants,onClick:r,role:"gridcell",title:n},this.getSenderLabels(s))}});exports.default=SendersList,module.exports=exports.default;
},{"../../../types":"./types","../styles/senders":"./molecules/message_list/styles/senders","../utils/senders":"./molecules/message_list/utils/senders","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/message_list/atoms/star_icon":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_star_icon=require("../styles/star_icon"),_star_icon2=_interopRequireDefault(_star_icon),_button=require("../../../atoms/button"),_button2=_interopRequireDefault(_button),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_reactIntl=require("react-intl"),strings=(0,_reactIntl.defineMessages)({markAsStarred:{id:"mark_as_starred",defaultMessage:"Mark as starred"},markAsUnstarred:{id:"mark_as_unstarred",defaultMessage:"Clear star"},msgIsStarred:{id:"msg_is_starred",defaultMessage:"Starred"},msgIsNotStarred:{id:"msg_is_not_starred",defaultMessage:"Not starred"}}),StarIcon=function(e,t){var a=e.isDarkThemeMode,r=t.getCss(_star_icon2.default,{isDarkThemeMode:a}),s=t.intl.formatMessage,i=null;return i=e.isStarred?_react2.default.createElement("span",null,_react2.default.createElement(_fuji_icon2.default,{"data-test-starred":e.isStarred,kind:_fuji_icon3.Kinds.STAR,size:_fuji_icon3.Sizes.XS,colorState:a?_fuji_icon3.ColorStates.STARRED_DARK:_fuji_icon3.ColorStates.STARRED}),_react2.default.createElement("span",{className:r.accessible,"aria-label":s(strings.msgIsStarred)})):e.isHovered?_react2.default.createElement("span",null,_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.STAR,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.INHERITED}),_react2.default.createElement("span",{className:r.accessible,"aria-label":s(e.isStarred?strings.msgIsStarred:strings.msgIsNotStarred)})):_react2.default.createElement("span",{className:r.accessible,"aria-label":s(strings.msgIsNotStarred)}),_react2.default.createElement(_button2.default,{"data-test-id":"icon-btn-star",title:s(e.isStarred?strings.markAsUnstarred:strings.markAsStarred),onClick:e.onClick,onDoubleClick:e.onClick,className:r.starIcon},i)};StarIcon.defaultProps={isHovered:!1},StarIcon.contextTypes={intl:_reactIntl.intlShape,getCss:_react.PropTypes.func},exports.default=StarIcon,module.exports=exports.default;
},{"../../../atoms/button":"./atoms/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../styles/star_icon":"./molecules/message_list/styles/star_icon","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/message_list/atoms/trash_icon":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_trash_icon=require("../styles/trash_icon"),_trash_icon2=_interopRequireDefault(_trash_icon),_button=require("../../../atoms/button"),_button2=_interopRequireDefault(_button),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_reactIntl=require("react-intl"),strings=(0,_reactIntl.defineMessages)({deleteMsg:{id:"delete_msg",defaultMessage:"Delete this message"}}),TrashIcon=function(e,t){var a=e.isDarkThemeMode,s=t.getCss(_trash_icon2.default,{isDarkThemeMode:a}),r=t.intl.formatMessage;return e.isHovered?_react2.default.createElement(_button2.default,{"data-test-id":"icon-btn-trash",title:r(strings.deleteMsg),onClick:e.onClick,onDoubleClick:e.onClick,className:e.isCompact?s.trashIconCompact:s.trashIcon},_react2.default.createElement("span",{className:s.trashCenter},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.DELETE,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.INHERITED,"aria-label":r(strings.deleteMsg)}))):_react2.default.createElement(_button2.default,{className:s.trashIconAccessible,onClick:e.onClick},_react2.default.createElement("span",{className:s.accessible,"aria-label":r(strings.deleteMsg)}))};TrashIcon.defaultProps={isHovered:!1,isCompact:!1},TrashIcon.contextTypes={intl:_reactIntl.intlShape,getCss:_react.PropTypes.func},exports.default=TrashIcon,module.exports=exports.default;
},{"../../../atoms/button":"./atoms/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../styles/trash_icon":"./molecules/message_list/styles/trash_icon","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/message_list/constants":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.ITEM_DELETE_ANIMATION_DURATION=exports.INTERACTION_GROUP_UNFLAGGED=exports.INTERACTION_GROUP_FLAGGED=exports.INTERACTION_GROUP_READ=exports.INTERACTION_GROUP_UNREAD=exports.INTERACTION_GROUP_DELETE=exports.INTERACTION_GROUP_MOVE=exports.INTERACTION_GROUP_NOT_SPAM=exports.INTERACTION_GROUP_SPAM=exports.INTERACTION_SELECTION_TOGGLED=void 0;var _object=require("../../platform/utils/object"),INTERACTION_SELECTION_TOGGLED=exports.INTERACTION_SELECTION_TOGGLED="INTERACTION_SELECTION_TOGGLED",INTERACTION_GROUP_SPAM=exports.INTERACTION_GROUP_SPAM="INTERACTION_GROUP_SPAM",INTERACTION_GROUP_NOT_SPAM=exports.INTERACTION_GROUP_NOT_SPAM="INTERACTION_GROUP_NOT_SPAM",INTERACTION_GROUP_MOVE=exports.INTERACTION_GROUP_MOVE="INTERACTION_GROUP_MOVE",INTERACTION_GROUP_DELETE=exports.INTERACTION_GROUP_DELETE="INTERACTION_GROUP_DELETE",INTERACTION_GROUP_UNREAD=exports.INTERACTION_GROUP_UNREAD="INTERACTION_GROUP_UNREAD",INTERACTION_GROUP_READ=exports.INTERACTION_GROUP_READ="INTERACTION_GROUP_READ",INTERACTION_GROUP_FLAGGED=exports.INTERACTION_GROUP_FLAGGED="INTERACTION_GROUP_FLAGGED",INTERACTION_GROUP_UNFLAGGED=exports.INTERACTION_GROUP_UNFLAGGED="INTERACTION_GROUP_UNFLAGGED",ITEM_DELETE_ANIMATION_DURATION=exports.ITEM_DELETE_ANIMATION_DURATION=.4;exports.MessageDestinationLabels=(0,_object.mirrorKeys)(["ACCOUNT","FOLDER","NONE"]);
},{"../../platform/utils/object":"./platform/utils/object"}],218:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_reactIntl=require("react-intl"),_types=require("../../types"),_item_list=require("../item_list"),_item_list2=_interopRequireDefault(_item_list),_item=require("./atoms/item.jsx"),_item2=_interopRequireDefault(_item),_drag_icon=require("./atoms/drag_icon.jsx"),_drag_icon2=_interopRequireDefault(_drag_icon),_message_group=require("../../platform/utils/message_group"),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),uiVar=_interopRequireWildcard(_mail_ui_vars),_mail_constants=require("../../platform/mail_constants"),_constants=require("./constants"),Constants=_interopRequireWildcard(_constants),_object=require("../../platform/utils/object"),_generic=require("../../platform/utils/generic"),_route=require("../../platform/utils/route"),_actions=require("../../apps/mail/molecules/mail_reader/actions"),_keyboard_shortcut_group=require("../../molecules/keyboard_shortcut_manager/keyboard_shortcut_group.jsx"),_keyboard_shortcut_group2=_interopRequireDefault(_keyboard_shortcut_group),_keyboard_shortcuts=require("../../platform/keyboard_shortcuts"),_keyboard_shortcut_groups=require("../../platform/keyboard_shortcut_groups"),_constants2=require("../../platform/rapid_client/constants"),_senders=require("./utils/senders"),_pencil_ad=require("../ads/pencil_ad.jsx"),_pencil_ad2=_interopRequireDefault(_pencil_ad),_ad_feedback=require("../ads/ad_feedback.jsx"),_ad_feedback2=_interopRequireDefault(_ad_feedback),_confirm=require("../../atoms/dialog/confirm.jsx"),_confirm2=_interopRequireDefault(_confirm),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_message_list=require("./styles/message_list"),_message_list2=_interopRequireDefault(_message_list),_attachment=require("../../actions/attachment"),_before_route_change=require("../../apps/mail/molecules/before_route_change"),_before_route_change2=_interopRequireDefault(_before_route_change),_key_codes=require("../../atoms/constants/key_codes.js"),_strings=require("../../molecules/message_toolbar/strings"),_strings2=_interopRequireDefault(_strings),classNames=(0,_css2.default)(_message_list2.default),messageListShortcuts=(0,_keyboard_shortcuts.createShortcutGroup)({group:_keyboard_shortcut_groups.Action,keys:{toggleRead:{key:"K",description:_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.shortcut_toggle_read",defaultMessage:"Mark as {readUnread}",values:{readUnread:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.toggle_read_strong",defaultMessage:"Read/Unread"}))}})},toggleFlag:{key:"L",description:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.toggle_flag",defaultMessage:"Star/Unstar"}))}}}),_isScrolling=!1,_isDragging=!1,MessageList=_react2.default.createClass({displayName:"MessageList",contextTypes:{executeAction:_react.PropTypes.func,navigateTo:_react.PropTypes.func.isRequired,intl:_reactIntl.intlShape.isRequired,config:_react.PropTypes.object},getDefaultProps:function(){return{highlightSearchTerm:!1}},getInitialState:function(){return{showDeleteConfirm:!1,idsToDelete:[]}},getUnsavedData:function(){return{activeItemId:this.activeItemId}},getActionCreator:function(e){var t=this.props.actions;switch(e){case Constants.INTERACTION_GROUP_DELETE:return t.deleteMessageGroups;case Constants.INTERACTION_GROUP_MOVE:return t.moveMessageGroups;case Constants.INTERACTION_GROUP_SPAM:return t.markMessageGroupsAsSpam;case Constants.INTERACTION_GROUP_NOT_SPAM:return t.markMessageGroupsAsNotSpam;case Constants.INTERACTION_GROUP_READ:return t.markMessageGroupsAsRead;case Constants.INTERACTION_GROUP_UNREAD:return t.markMessageGroupsAsUnread;case Constants.INTERACTION_GROUP_FLAGGED:return t.markMessageGroupsAsFlagged;case Constants.INTERACTION_GROUP_UNFLAGGED:return t.markMessageGroupsAsUnflagged;case Constants.INTERACTION_SELECTION_TOGGLED:return t.toggleSelection;default:throw new TypeError("Unknown interaction type: "+e)}},handleMessageGroupInteraction:function(e,t){var s=t.messageGroup,n=t.i13nModel;return this.handleMultipleMessageGroupInteraction(e,{messageGroupIds:[s.id],i13nModel:n})},handleMultipleMessageGroupInteraction:function(e,t){var s=t.messageGroupIds,n=t.i13nModel,a={listId:this.props.listId,messageGroupIds:s};return n&&(a.i13nModel=n),e===Constants.INTERACTION_GROUP_DELETE?this.handleDelete(a):void this.context.executeAction(this.getActionCreator(e),a)},_onActionOnSelectedMessages:function(e,t){var s=t.allTrueInteraction,n=t.otherInteraction,a=this.context.executeAction,r=this.props,i=r.messageGroups,o=r.cursorIndex,c=r.itemSelection,l=r.listId,u=i[o],_={};i.forEach(function(e,t){var s=e.id;return _[s]=t});var d=Object.keys(c).map(function(e){return _[e]}).map(function(e){return i[e]});!d.length&&u&&(d=[u]);var g=d.some(function(t){return!e(t)}),h=g?n:s,m=g?d.filter(function(t){return!e(t)}):d;if(m.length>0){var p={listId:l,messageGroupIds:m.map(function(e){return e.id})};if(h===Constants.INTERACTION_GROUP_DELETE)return this.handleDelete(p);a(this.getActionCreator(h),p)}},handleDelete:function(e){var t=this.context.executeAction,s=e.messageGroupIds;return e.permanent=this.props.permDelete,!this.state.showDeleteConfirm&&(this.props.permDelete||s.length>=this.context.config.bulkActionDialogThreshold)?void this.setState({showDeleteConfirm:!0,idsToDelete:s}):(t(this.getActionCreator(Constants.INTERACTION_GROUP_DELETE),e),void this.hideDeleteConfirm())},handleShortcutDeleteMessages:function(){this._onActionOnSelectedMessages(function(){return!0},{allTrueInteraction:Constants.INTERACTION_GROUP_DELETE})},handleShortcutReadMessages:function(e){e.preventDefault(),this._onActionOnSelectedMessages(function(e){return(0,_message_group.getFlags)(e).read},{allTrueInteraction:Constants.INTERACTION_GROUP_UNREAD,otherInteraction:Constants.INTERACTION_GROUP_READ})},handleShortcutFlagMessages:function(e){e.preventDefault(),this._onActionOnSelectedMessages(function(e){return(0,_message_group.getFlags)(e).flagged},{allTrueInteraction:Constants.INTERACTION_GROUP_UNFLAGGED,otherInteraction:Constants.INTERACTION_GROUP_FLAGGED})},handleShiftClick:function(e){var t=this.props,s=t.actions,n=t.listId;this.context.executeAction(s.selectRange,{listId:n,targetGroupId:e.id})},handleMessageOpen:function(e,t){var s=this.props,n=s.previewpane,a=s.listId,r=s.openedGroupId,i=e.id;n===_mail_constants.PreviewPaneSettings.NO?this._openMessageGroup(i,t):r!==i&&this.context.executeAction(_actions.previewMessage,{listId:a,itemId:i,i13nModel:Object.assign({mKey:_constants2.MKEYS.OPEN_MSG,sec:_constants2.SEC_VALUES.MSG_LIST_MSG,mKeyGroup:_constants2.MKEY_GROUPS.open_msg},t)})},handleOnDoubleClick:function(e,t){this._openMessageGroup(e.id,t)},handleCursorOpen:function(e){var t=this.props,s=t.messageGroups,n=t.cursorIndex,a=s[n];a&&e.target.className.indexOf("message-list-item")!==-1&&(e.preventDefault(),this._openMessageGroup(a.id,{i13nModel:{interactionType:_constants2.INTERACTION_TYPES.nav}}))},_openMessageGroup:function(e,t){var s=t.i13nModel,n=this.props.messageGroupRoutes,a=n[e];this.activeItemId=e,this.context.navigateTo({route:a,i13nModel:Object.assign({mKey:_constants2.MKEYS.OPEN_MSG,sec:_constants2.SEC_VALUES.MSG_LIST_MSG,mKeyGroup:_constants2.MKEY_GROUPS.open_msg},s)})},handleItemSelect:function(){var e=this.props,t=e.actions,s=e.messageGroups,n=e.cursorIndex,a=e.listId,r=s[n];r&&this.context.executeAction(t.toggleSelection,{listId:a,messageGroupIds:[r.id]})},handleItemSelectAll:function(){var e=this.props,t=e.actions,s=e.listId;this.context.executeAction(t.selectAll,{listId:s})},handleCheckboxClick:function(e,t){this.handleMessageGroupInteraction(Constants.INTERACTION_SELECTION_TOGGLED,{messageGroup:e,i13nModel:_extends({},t,{mKey:_constants2.MKEYS.SELECT_MSG,sec:_constants2.SEC_VALUES.MSG_LIST_MSG})})},handleReadClick:function(e,t){var s=(0,_message_group.getMetadata)(e,{listId:this.props.listId}),n=s.flags;this.handleMessageGroupInteraction(n.read?Constants.INTERACTION_GROUP_UNREAD:Constants.INTERACTION_GROUP_READ,{messageGroup:e,i13nModel:_extends({},t,{mKey:n.read?_constants2.MKEYS.MARK_MSG_UNREAD:_constants2.MKEYS.MARK_MSG_READ,sec:_constants2.SEC_VALUES.MSG_LIST_MSG,mKeyGroup:n.read?_constants2.MKEY_GROUPS.mark_unread:_constants2.MKEY_GROUPS.mark_read})})},handleStarClick:function(e,t){var s=(0,_message_group.getMetadata)(e,{listId:this.props.listId}),n=s.flags;this.handleMessageGroupInteraction(n.flagged?Constants.INTERACTION_GROUP_UNFLAGGED:Constants.INTERACTION_GROUP_FLAGGED,{messageGroup:e,i13nModel:_extends({},t,{mKey:n.flagged?_constants2.MKEYS.MARK_MSG_UNSTARRED:_constants2.MKEYS.MARK_MSG_STARRED,sec:_constants2.SEC_VALUES.MSG_LIST_MSG,mKeyGroup:n.flagged?_constants2.MKEY_GROUPS.mark_unstar:_constants2.MKEY_GROUPS.mark_star})})},handleTrashClick:function(e,t){this.handleMessageGroupInteraction(Constants.INTERACTION_GROUP_DELETE,{messageGroup:e,i13nModel:_extends({},t,{mKey:_constants2.MKEYS.MSG_LIST_DEL,sec:_constants2.SEC_VALUES.MSG_LIST_MSG,mKeyGroup:_constants2.MKEY_GROUPS.delete})})},handleAttachmentPreviewClick:function(e){var t=e.attachmentId,s=e.messageGroupId,n=e.i13nModel;this.context.executeAction(_attachment.previewAttachment,{attachmentId:t,messageGroupId:s,i13nModel:n,fullScreenMode:!0})},handleDragStart:function(e,t){var s,n=Object.assign({},this.props.itemSelection,(s={},s[t.id]=!0,s)),a=this.props,r=a.listId,i=a.actions;this.context.executeAction(i.itemDragStart,{listId:r,messageGroupIds:[t.id]}),this.dragIcon||(this.dragIcon=document.createElement("div"),document.body.appendChild(this.dragIcon)),(0,_generic.supportsSetDragImage)()?(this.renderDragIcon(Object.keys(n).length),e.dataTransfer.setDragImage(this.dragIcon,-10,-10)):(e.target.style.visibility="hidden",this.setTargetVisible(e.target)),e.dataTransfer.setData("text",r),e.dataTransfer.effectAllowed="move"},handleContactSearchClick:function(e,t){var s=(0,_message_group.getMetadata)(e,{listId:this.props.listId}),n=s.participants,a=s.recipients,r=this.props,i=r.folderType,o=r.myAddresses,c=i===_mail_constants.FolderTypes.SENT?(0,_senders.sentParticipants)({recipients:a,participants:n,myAddresses:o}):n,l={};c[0]&&(l={emailAddresses:c[0].email,name:c[0].name||c[0].email}),this.context.navigateTo({route:(0,_route.buildSearchRouteFromQuery)(l),i13nModel:_extends({},t,{mKey:_constants2.MKEYS.CONTACT_SEARCH,sec:_constants2.SEC_VALUES.MSG_LIST_MSG,mKeyGroup:_constants2.MKEY_GROUPS.search})})},handleSubjectSearchClick:function(e,t){var s=(0,_message_group.getMetadata)(e,{listId:this.props.listId}),n={keyword:'subject: "'+s.subject+'"'};this.context.navigateTo({route:(0,_route.buildSearchRouteFromQuery)(n),i13nModel:_extends({},t,{mKey:_constants2.MKEYS.SUBJECT_SEARCH,sec:_constants2.SEC_VALUES.MSG_LIST_MSG,mKeyGroup:_constants2.MKEY_GROUPS.search})})},setTargetVisible:function(e){setTimeout(function(){e.style.visibility="visible"},0)},handleDrag:function(e,t){var s,n=Object.assign({},this.props.itemSelection,(s={},s[t.id]=!0,s)),a=Object.keys(n).length;_reactDom2.default.render(_react2.default.createElement(_drag_icon2.default,{count:a,x:e.pageX+10,y:e.pageY+10}),this.dragIcon)},handleDragEnd:function(){this.removeDragIcon(),_isDragging=!1},renderDragIcon:function(e){_reactDom2.default.render(_react2.default.createElement(_drag_icon2.default,{count:e}),this.dragIcon)},removeDragIcon:function(){this.dragIcon&&(_reactDom2.default.unmountComponentAtNode(this.dragIcon),document.body.removeChild(this.dragIcon),this.dragIcon=null)},getLayoutAndMessageItemHeight:function(){var e=this.isCompactLayout(this.props.previewpane),t=this.props,s=t.snippetsEnabled,n=t.msgListDensity,a=void 0,r=void 0,i=void 0;return i=n===_mail_constants.MessageListDensity.SLIM?"SLIM":n===_mail_constants.MessageListDensity.RELAXED?"RELAXED":"NORMAL",e?s?(a=_mail_constants.MessageListLayout["COMPACT_SNIPPET_"+i],r=uiVar["MESSAGE_LIST_ITEM_COMPACT_SNIPPET_"+i+"_HEIGHT"]):(a=_mail_constants.MessageListLayout["COMPACT_"+i],r=uiVar["MESSAGE_LIST_ITEM_COMPACT_"+i+"_HEIGHT"]):(a=_mail_constants.MessageListLayout[""+i],r=uiVar["MESSAGE_LIST_ITEM_"+i+"_HEIGHT"]),{layout:a,messageItemHeight:r}},isScrolling:function(){return _isScrolling},isDragging:function(){return _isDragging},renderItem:function(e){var t=this,s=this.props,n=s.messageGroupRoutes,a=s.myAddresses,r=s.highlightSearchTerm,i=s.accounts,o=s.folderType,c=s.itemSelection,l=s.openedGroupId,u=s.messageDestinationLabel,_=s.listId,d=s.previewpane,g=s.snippetsEnabled,h=s.hideSearchIcon,m=s.windowDimensions,p=n[e.id],f=this.getLayoutAndMessageItemHeight(),I=f.layout;return _react2.default.createElement(_item2.default,{key:e.id,listId:_,messageGroup:e,active:!Object.keys(c).length&&e.id===l,selected:!!c[e.id],hovered:!0,route:p,isScrolling:this.isScrolling,onInteraction:this.handleMessageGroupInteraction,myAddresses:a,highlightSearchTerm:r,messageDestinationLabel:u,layout:I,isCompactLayout:this.isCompactLayout(d),isConversationMode:this.context.config.conversations,accounts:i,onClick:this.handleMessageOpen,onDoubleClick:this.handleOnDoubleClick,onShiftClick:this.handleShiftClick,folderType:o,snippetsEnabled:g,onMouseDown:function(){_isDragging=!0},onMouseUp:function(){_isDragging=!1},isDragging:this.isDragging,onDragStart:function(s){return t.handleDragStart(s,e)},onDrag:function(s){(0,_generic.supportsSetDragImage)()||t.handleDrag(s,e)},onDragEnd:function(e){return t.handleDragEnd(e)},onCheckboxClick:this.handleCheckboxClick,onReadClick:this.handleReadClick,onStarClick:this.handleStarClick,onDeleteClick:this.handleTrashClick,onContactSearchClick:this.handleContactSearchClick,onSubjectSearchClick:this.handleSubjectSearchClick,hideSearchIcon:h,onAttachmentPreviewClick:this.handleAttachmentPreviewClick,attachmentTraySize:m.innerWidth>uiVar.NARROW_SCREEN_WIDTH?4:3})},renderAd:function(){var e=this.props,t=e.previewpane,s=e.adFeedbackStarted,n=e.adFeedbackSubmitted,a=e.adFeedbackBeacon,r=e.pencilAdData,i=e.adRotationId,o=e.feedbackEnabled,c=e.listId,l=this.isCompactLayout(t);return s||n?_react2.default.createElement(_ad_feedback2.default,{key:"ad-feedback",adFeedbackSubmitted:n,isCompactLayout:l,adFeedbackBeacon:a}):_react2.default.createElement(_pencil_ad2.default,{key:"pencil",id:"PENCIL",pencilAdData:r,adRotationId:i,isCompactLayout:l,feedbackEnabled:o,listId:c})},isCompactLayout:function(e){return e===_mail_constants.PreviewPaneSettings.RIGHT},hideDeleteConfirm:function(){this.setState({showDeleteConfirm:!1,idsToDelete:[]})},renderDeleteConfirm:function(){var e=this;if(this.state.showDeleteConfirm){var t=this.context.intl.formatMessage,s=this.state.idsToDelete,n=this.props,a=n.permDelete,r=n.listId,i={conversations:this.context.config.conversations,count:s.length};return _react2.default.createElement(_confirm2.default,{title:t(_strings2.default.confirm_delete_title,i),message:a?t(_strings2.default.confirm_permanently_delete_messages,i):t(_strings2.default.confirm_delete_messages,i),onConfirm:function(){return e.handleDelete({listId:r,messageGroupIds:s})},onAbort:this.hideDeleteConfirm})}return null},handleKeyDown:function(e){e.keyCode!==_key_codes.KEYCODE.BACKSPACE&&e.keyCode!==_key_codes.KEYCODE.DELETE||(e.preventDefault(),e.stopPropagation(),this.handleShortcutDeleteMessages())},renderItemList:function(){var e=this,t=this.props,s=t.hasMoreItems,n=t.previewpane,a=t.listId,r=t.messageGroups,i=t.adFeedbackStarted,o=t.adFeedbackSubmitted,c=this.isCompactLayout(n),l=this.getLayoutAndMessageItemHeight(),u=l.messageItemHeight;return _react2.default.createElement(_item_list2.default,_extends({onSelect:this.handleItemSelect,onSelectAll:this.handleItemSelectAll,onOpen:this.handleCursorOpen,initialRenderCount:this.context.config.messageInitialRenderCount,loadThreshold:this.context.config.messageScrollLoadThreshold,renderItem:function(t){return t&&t.listAd?e.renderAd():e.renderItem(t)},getHeightForIndex:function(e,t){return e[t]&&e[t].listAd?i&&!o?c?uiVar.MESSAGE_LIST_COMPACT_FEEDBACK_FORM_HEIGHT:uiVar.MESSAGE_LIST_FEEDBACK_FORM_HEIGHT:c?uiVar.MESSAGE_LIST_COMPACT_GEMINI_AD_HEIGHT:uiVar.MESSAGE_LIST_GEMINI_AD_HEIGHT:u},getItemListSize:function(e){return e.length},getItemsForIndex:function(e,t){return e[t]},getTimeStampFromItem:function(e){return 1e3*(0,_message_group.getMetadata)(e,{listId:a}).date},hasMoreItems:s,itemsToFetch:_mail_constants.DEFAULT_MESSAGES_TO_FETCH,items:r,layoutKey:n,Element:function(){},onScroll:function(){_isScrolling=!0},onScrollTopChange:function(){_isScrolling=!1}},t))},render:function(){return _react2.default.createElement(_before_route_change2.default,{getUnsavedData:this.getUnsavedData},_react2.default.createElement("div",{className:classNames.container,"data-test-id":"message-group-list-container",onKeyDown:this.handleKeyDown},_react2.default.createElement(_keyboard_shortcut_group2.default,{keys:[messageListShortcuts.toggleRead(this.handleShortcutReadMessages),messageListShortcuts.toggleFlag(this.handleShortcutFlagMessages)]},this.renderItemList()),this.renderDeleteConfirm()))}});exports.default=MessageList,module.exports=exports.default;
},{"../../actions/attachment":"./actions/attachment","../../apps/mail/molecules/before_route_change":"./apps/mail/molecules/before_route_change","../../apps/mail/molecules/mail_reader/actions":52,"../../atoms/constants/key_codes.js":"./atoms/constants/key_codes","../../atoms/dialog/confirm.jsx":"./atoms/dialog/confirm","../../molecules/keyboard_shortcut_manager/keyboard_shortcut_group.jsx":"./molecules/keyboard_shortcut_manager/keyboard_shortcut_group","../../molecules/message_toolbar/strings":"./molecules/message_toolbar/strings","../../platform/keyboard_shortcut_groups":"./platform/keyboard_shortcut_groups","../../platform/keyboard_shortcuts":"./platform/keyboard_shortcuts","../../platform/mail_constants":"./platform/mail_constants","../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../platform/utils/generic":"./platform/utils/generic","../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../platform/utils/message_group":"./platform/utils/message_group","../../platform/utils/object":"./platform/utils/object","../../platform/utils/route":"./platform/utils/route","../../types":"./types","../ads/ad_feedback.jsx":107,"../ads/pencil_ad.jsx":116,"../item_list":"./molecules/item_list","./atoms/drag_icon.jsx":217,"./atoms/item.jsx":"./molecules/message_list/atoms/item","./constants":"./molecules/message_list/constants","./styles/message_list":"./molecules/message_list/styles/message_list","./utils/senders":"./molecules/message_list/utils/senders","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-dom":"./node_modules/react-dom/index.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/message_list/styles/attachment_icon":[function(require,module,exports){
module.exports={className:{default:{accessible:"p_a L_Z1r6ru5 T_A W_dBP H_dBP o_h",attachmentIcon:"D_F",attachmentsCarouselContainer:"D_F H_3mT4V P_3gIMd",attachmentsPopoverContainer:"D_F P_1Eu5U7",attachmentItem:"P_V9iAe M_3gIgH r_P"}},_key:"mCSbU"};
},{"./src/molecules/message_list/styles/atomic_attachment_icon.css":"./molecules/message_list/styles/atomic_attachment_icon"}],"./molecules/message_list/styles/message_item":[function(require,module,exports){
module.exports={className:{default:{container:"D_F r_P ab_C H_6TV4 bn_dBP bm_FJ bj_2spJWC p_R A_6EqO i_6FIA o_h X_eo6 h_Z1H3PfF I3_Znwqu5 ir3_2d4VCo it3_689y",check:"en_0 i_0 H_6D6F E_689y Z_f8a k_w",checkbox:"H_6D6F",ybadgeIcon:"P_0 q_T b_0 r_P D_F en_0 ab_C W_6LEV A_0 H_6D6F Q_6Eb4 E_eo6",attachmentIcon:"s_6LEV en_0 i_0 M_3gJOe",gridB1:"D_F o_h ab_C H_6D6F a_3vhr3 em_qk ej_0",gridB2:"D_F o_h ab_C H_6D6F em_sL ej_0",participants:"o_h J_x G_AY em_N",dateWrapper:"ab_C gl_CH D_F em_0 en_0 s_7jIs N_fq7 Q_fq7 A_6DUj C_Z1TsNWR",message:"D_F ab_C o_h H_6D6F em_N E_fq7 J_x",subjectContainer:"en_0 a_6D6F D_F ab_C",subject:"o_h G_e J_x en_N",snippet:"J_x o_h C_Z1TsNWR",snippetContainer:"J_x o_h G_e Q_fq7",messageCount:"en_0 P_3gJiI Q_fq7 e_fFR A_6DUj I_ZpQYvz",accessible:"p_a L_Z1r6ru5 T_A W_dBP H_dBP o_h",draftIndicator:"en_0 J_x C_ZnTFMv s_6NIX A_fq7 cZ1RN91d_n lo_GT cZ1HOHqP_Zc28mn gp_3bdM8 u_e69 Q_fq7",senders:"D_F o_h G_e em_N",noSubject:"M_3gI0W",highlightedTerm:"I_2ieea9 D_X P_3zDxc",messageDestinationLabel:"M_3gJOe o_h J_x G_e W_7yHc en_0"},"layout-1":{container:"H_6Mrc"},"layout-3":{container:"H_73rW"},isCompactLayout:{check:"D_X p_a L_dRA T_dm5",checkbox:"H_A",gridB2:"gl_CH em_U",readIcon:"D_X H_6LEV p_a T_fq7 L_6Fd5",ybadgeIcon:"D_X H_6LEV p_a T_fq7 L_6Fd5",starIcon:"D_X H_6LEV p_a Q_6Eb4 T_6Ntd L_6Eb4",maskStarIconWhenStarred:"D_X H_6LEV p_a Q_6Eb4 T_6Ntd L_6Eb4 O_0",draftIndicator:"D_X",senders:"p_a L_74JI T_fq7 a_e91 J_x G_e",subjectContainer:"D_B p_a T_6NIX L_74JI a_eFx J_x o_h G_e",snippetContainer:"p_a Q_0 T_74JI L_74JI a_eFx",attachmentIcon:"p_a M_0 X_fq7 N_eDQ R_eo6 B_fam",messageCount:"D_X",dateWrapper:"p_a T_fq7 R_eo6 t_r"},isCompactSlimLayout:{check:"T_dm5",readIcon:"T_eo6",ybadgeIcon:"T_eo6",starIcon:"T_6Mbr",senders:"T_eo6",subjectContainer:"T_6Mbr",snippetContainer:"T_72FG",dateWrapper:"T_eo6",attachmentIcon:"B_eTB"},isCompactNormalLayout:{check:"je_e8l",readIcon:"T_fam",ybadgeIcon:"T_fam",starIcon:"T_6Ntd",senders:"T_fam",subjectContainer:"T_6Ntd",snippetContainer:"T_74ed",dateWrapper:"T_fam",attachmentIcon:"B_fq7"},isCompactRelaxedLayout:{container:"i_6LEV",check:"je_eo6",readIcon:"T_fq7",ybadgeIcon:"T_fq7",starIcon:"T_6NIX",senders:"T_fq7",messageCount:"P_3gJyt",subjectContainer:"T_6NIX",snippetContainer:"T_74JI",dateWrapper:"T_fq7",attachmentIcon:"B_6DEy"},"layout-4":{container:"H_74tX"},"layout-5":{container:"H_7bXP"},"layout-6":{container:"H_7cul"},"layout-7":{container:"H_7jsH"},"layout-8":{container:"H_7qWz"},"layout-9":{container:"H_7sv6"},"isRead-false":{subject:"u_b",participants:"u_b",participantSolo:"u_b"},hasJustOneMessage:{messageCount:"W_0 O_0"},"highlightPosition-LEFT":{snippet:"Q_0 E_36IIE t_l"},"highlightPosition-CENTER":{snippet:"Q_36IIE E_36IIE t_C"},"highlightPosition-RIGHT":{snippet:"Q_36IIE E_0 t_r"},isNonCompactSlimLayout:{checkbox:"je_Cd90f jb_Cd90f"},isHovered:{container:"I_Znwqu5"},showSubjectSearchAndHovered:{subjectContainer:"a_1BBI71",subjectSearchIcon:"Q_68F4 E_69H5"},selected:{container:"I_ZpgeKK I4_ZpgeKK"},active:{container:"I_ZpgeKK"},darkAndHovered:{container:"I_ZS2gnO"},"themeMode-DARK":{container:"C_ZpQYvz bj_ajOPR I3_ZS2g95 ir3_Z1a7UWG",highlightedTerm:"I_ajP6C",messageCount:"C_52qC I_2sqbOe",draftIndicator:"C_Zkij7I",snippet:"C_ZvsWfq",dateWrapper:"C_2sqbQg"},selectedAndDark:{container:"I_ZS2g95 I4_ZS2g95"},activeAndDark:{container:"I_ZS2g95"},borderless:{container:"bm_n"},isCompactHasAttachmentIcon:{subjectContainer:"a_1C0Rfo",snippetContainer:"a_1C0Rfo"},isCompactHovered:{subjectContainer:"a_ZLhQ7h",snippetContainer:"a_ZLhQ7h",iconB2:"p_R D_F ek_EZ ab_C H_6D6F"}},_key:"Z1i3nfG"};
},{"./src/molecules/message_list/styles/atomic_message_item.css":"./molecules/message_list/styles/atomic_message_item"}],"./molecules/message_list/styles/message_list":[function(require,module,exports){
module.exports={className:{default:{container:"W_6D6F H_6D6F cZ1RN91d_GG p_a o_h",msgDragProxy:"p_a Z_3n0uA P_eo6 b_Z14vXdP",counter:"C_52qC en_0 P_3gJiI e_fFR A_6DUj I_Z2aVTcY O_N D_X",dragIcon:"Z_3n0uA cdPFi_Z291T0t"},isBriefView:{container:"p_CS H_CS en_0 M_1UgtIa",list:"p_CS W_3v1qi I_52qC o_h",briefHeader:"M_1d6dau A_6EqO",briefContent:"M_1d6dau",briefFooter:"D_F gl_CH M_Z1jXKuU A_6Eb4 C_Z2aVTcY"},isBriefViewAndDark:{list:"I_sgPuT",briefHeader:"C_ZpQYvz",link:"C_Z21zYBA"},"themeMode-DARK":{dragIcon:"cdPFi_ZpQYvz"}},_key:"cIlzr"};
},{"./src/molecules/message_list/styles/atomic_message_list.css":"./molecules/message_list/styles/atomic_message_list"}],"./molecules/message_list/styles/read_icon":[function(require,module,exports){
module.exports={className:{default:{accessible:"p_a L_Z1r6ru5 T_A W_dBP H_dBP o_h",readIcon:"P_0 q_T b_0 r_P D_F en_0 ab_C W_6LEV A_0 H_6D6F Q_6Eb4 E_eo6 cdPFi_ZpQYvz cdPFi4_Z1TsNWR"},"isRead-false":{readIcon:"cdPFi_Z2aVTcY cdPFi4_Z2aVTcY"},isDarkThemeMode:{readIcon:"cdPFi_ak5kB cdPFi4_ak5m8"}},_key:"Z2asTm1"};
},{"./src/molecules/message_list/styles/atomic_read_icon.css":"./molecules/message_list/styles/atomic_read_icon"}],"./molecules/message_list/styles/search_icon":[function(require,module,exports){
module.exports={className:{default:{searchIcon:"D_F gl_C ab_C k_BF q_T b_0 r_P A_0 cdPFi_Z1TsNWR cdPFi4_Z2aVTcY P_3gIMd Q_eo6",contactSearchIconCompact:"D_Z1YJkyX gl_C ab_C k_BF q_T b_0 r_P A_0 cdPFi_Z1TsNWR cdPFi4_Z2aVTcY Q_eo6 P_0"},isDarkThemeMode:{searchIcon:"cdPFi_ak5kB cdPFi4_ak5m8",contactSearchIconCompact:"cdPFi_ak5kB cdPFi4_ak5m8"}},_key:"2dNdlX"};
},{"./src/molecules/message_list/styles/atomic_search_icon.css":"./molecules/message_list/styles/atomic_search_icon"}],"./molecules/message_list/styles/senders":[function(require,module,exports){
module.exports={className:{default:{participants:"o_h J_x em_N"},transparent:{participants:"em_0 v_h"}},_key:"rQEOQ"};
},{"./src/molecules/message_list/styles/atomic_senders.css":"./molecules/message_list/styles/atomic_senders"}],"./molecules/message_list/styles/star_icon":[function(require,module,exports){
module.exports={className:{default:{accessible:"p_a L_Z1r6ru5 T_A W_dBP H_dBP o_h",starIcon:"k_BF q_T b_0 r_P D_F en_0 ab_C W_6LEV A_0 P_3gIMd E_eo6 H_6D6F cdPFi_ZpQYvz cdPFi4_Z1TsNWR"},isDarkThemeMode:{starIcon:"cdPFi_ak5kB cdPFi4_ak5m8"}},_key:"ZTdPgm"};
},{"./src/molecules/message_list/styles/atomic_star_icon.css":"./molecules/message_list/styles/atomic_star_icon"}],"./molecules/message_list/styles/trash_icon":[function(require,module,exports){
module.exports={className:{default:{trashIcon:"I_T r_P b_0 cdPFi_Z1TsNWR cdPFi4_ZkiIcp P_eo6 Q_6Fd5 W_7jIs",trashIconAccessible:"I_T r_P b_0 cdPFi_Z1TsNWR cdPFi4_ZkiIcp P_0",trashCenter:"D_F ab_C gl_C H_6D6F",trashIconClickArea:"D_F cdPFi4_ZkiIcp",trashIconCompact:"I_T r_P b_0 cdPFi_Z1TsNWR cdPFi4_ZkiIcp D_F gl_F W_6D6F P_fq7 M_18qTTf"},isDarkThemeMode:{trashIcon:"cdPFi_ZpQYvz cdPFi4_Zkij7I",trashIconCompact:"cdPFi_ZpQYvz cdPFi4_Zkij7I"}},_key:"Z2vfet2"};
},{"./src/molecules/message_list/styles/atomic_trash_icon.css":"./molecules/message_list/styles/atomic_trash_icon"}],"./molecules/message_list/utils/senders":[function(require,module,exports){
"use strict";function _getKeyForDedupMap(e){return e.email+"@"+e.name}function dedupSenders(e){var r,n=e.length;if(n<=1)return e;var t=e[0],i=(r={},r[_getKeyForDedupMap(t)]=t,r[_getKeyForDedupMap(e[n-1])]=e[n-1],r),a=[t];return e.slice(1,n-1).forEach(function(e){var r=_getKeyForDedupMap(e),n=i[r];(n!==t&&!n||!n.recent&&e.recent)&&(i[r]=e)}),e.slice(1,n-1).forEach(function(e){var r=_getKeyForDedupMap(e);i[r]===e&&a.push(e)}),a.push(e[n-1]),a.every(function(e){var r=e.email,n=e.recent,i=e.name;return t.email===r&&t.recent===n&&t.name===i})?[t]:a}function createPriorityIndices(e){if(1===e.length)return[0];for(var r=[0,e.length-1],n=2,t=1;t<e.length-1;t++){var i=e[t];i.recent?(r.splice(n,0,t),n++):r.push(t)}return r}function mergeSenders(){for(var e={},r=[],n=0,t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];return i.forEach(function(t){t.forEach(function(t){var i=e[t.email];return void 0!==i?void(r[i].recent=r[i].recent||t.recent):(e[t.email]=n,r[n]=Object.assign({},t),void n++)})}),r}function sentParticipants(e){var r=e.recipients,n=e.participants,t=e.myAddresses,i=mergeSenders(r,n);if(i.length){var a=i.filter(function(e){return!t[e.email]});a.length&&(i=a)}return i}exports.__esModule=!0,exports.dedupSenders=dedupSenders,exports.createPriorityIndices=createPriorityIndices,exports.sentParticipants=sentParticipants;
},{}],219:[function(require,module,exports){
"use strict";function _interopRequireWildcard(s){if(s&&s.__esModule)return s;var e={};if(null!=s)for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);return e.default=s,e}function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}exports.__esModule=!0;var _normalizedListAction,_ToolbarKinds$LIST$To,_constants=require("./constants"),_constants2=_interopRequireDefault(_constants),_folder_message_list=require("../../actions/folder_message_list"),_message_group=require("../../actions/message_group"),MessageGroupAction=_interopRequireWildcard(_message_group),_actions=require("../../apps/mail/actions"),MailActions=_interopRequireWildcard(_actions),_react_action_constants=require("../../platform/react_action_constants"),_actions2=require("../../apps/mail/molecules/mail_reader/actions"),_mail_constants=require("../../platform/mail_constants"),commonActions={toolbarMenuShown:function(s){s.dispatch(_react_action_constants.mail.MESSAGE_LIST_TOOLBAR_MENU_SHOWN)}},normalizedListActions=(_normalizedListAction={archive:_folder_message_list.ListActions.archiveMessageGroups,restore:_folder_message_list.ListActions.restoreMessageGroups,delete:_folder_message_list.ListActions.deleteMessageGroups,markAsSpam:_folder_message_list.ListActions.markMessageGroupsAsSpam,markAsNotSpam:_folder_message_list.ListActions.markMessageGroupsAsNotSpam,move:_folder_message_list.ListActions.moveMessageGroups,close:MailActions.closeActivePage},_normalizedListAction[_mail_constants.SortOrder.DATE_DESC]=_folder_message_list.ListActions.changeSortOrder,_normalizedListAction[_mail_constants.SortOrder.DATE_ASC]=_folder_message_list.ListActions.changeSortOrder,_normalizedListAction[_mail_constants.SortOrder.UNREAD]=_folder_message_list.ListActions.changeSortOrder,_normalizedListAction[_mail_constants.SortOrder.STARRED]=_folder_message_list.ListActions.changeSortOrder,_normalizedListAction[_mail_constants.SortOrder.SENDER]=_folder_message_list.ListActions.changeSortOrder,_normalizedListAction[_mail_constants.SortOrder.SUBJECT]=_folder_message_list.ListActions.changeSortOrder,_normalizedListAction[_mail_constants.SortOrder.ATTACHMENT]=_folder_message_list.ListActions.changeSortOrder,_normalizedListAction[_mail_constants.SortOrder.RELEVANCE]=_folder_message_list.ListActions.changeSortOrder,_normalizedListAction[_constants.SelectionTypes.ALL]=_folder_message_list.ListActions.selectAll,_normalizedListAction[_constants.SelectionTypes.NONE]=_folder_message_list.ListActions.selectNone,_normalizedListAction[_constants.SelectionTypes.READ]=_folder_message_list.ListActions.selectRead,_normalizedListAction[_constants.SelectionTypes.UNREAD]=_folder_message_list.ListActions.selectUnread,_normalizedListAction[_constants.SelectionTypes.STARRED]=_folder_message_list.ListActions.selectStarred,_normalizedListAction[_constants.SelectionTypes.UNSTARRED]=_folder_message_list.ListActions.selectUnstarred,_normalizedListAction),replyActions={reply:MessageGroupAction.replyToLastMessage,replyAll:MessageGroupAction.replyAllToLastMessage,forward:MessageGroupAction.forwardLastMessage,changeAllCardExpansions:MessageGroupAction.changeAllCardExpansions};exports.default=(_ToolbarKinds$LIST$To={},_ToolbarKinds$LIST$To[_constants2.default.LIST]=Object.assign({},commonActions,normalizedListActions),_ToolbarKinds$LIST$To[_constants2.default.LIST_WITH_PREVIEW_RIGHT]=Object.assign({},commonActions,replyActions,normalizedListActions,{close:_actions2.closePreviewMessage}),_ToolbarKinds$LIST$To[_constants2.default.LIST_WITH_PREVIEW_BOTTOM]=Object.assign({},commonActions,replyActions,normalizedListActions),_ToolbarKinds$LIST$To[_constants2.default.MESSAGE_VIEW]=Object.assign({},commonActions,replyActions,{archive:MessageGroupAction.archiveMessageGroupsFromView,restore:MessageGroupAction.restoreMessageGroupsFromView,delete:MessageGroupAction.deleteMessageGroupsFromView,markAsSpam:MessageGroupAction.markMessageGroupsAsSpamFromView,markAsNotSpam:MessageGroupAction.markMessageGroupsAsNotSpamFromView,move:MessageGroupAction.moveMessageGroupsFromView,close:MailActions.closeActivePage}),_ToolbarKinds$LIST$To),module.exports=exports.default;
},{"../../actions/folder_message_list":"./actions/folder_message_list","../../actions/message_group":"./actions/message_group","../../apps/mail/actions":"./apps/mail/actions","../../apps/mail/molecules/mail_reader/actions":52,"../../platform/mail_constants":"./platform/mail_constants","../../platform/react_action_constants":"./platform/react_action_constants","./constants":223}],220:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_themes=require("../../../platform/theming/themes"),_fuji_icon=require("../../../atoms/constants/fuji_icon"),strings=(0,_reactIntl.defineMessages)({restore_msgs:{id:"restore_from_archive",defaultMessage:"Restore selected messages to Inbox"},archive_msgs:{id:"archive_msgs",defaultMessage:"Archive the selected messages"}}),ArchiveButton=_react2.default.createClass({displayName:"ArchiveButton",contextTypes:{intl:_reactIntl.intlShape.isRequired,getThemeMode:_react.PropTypes.func},getDefaultProps:function(){return{showLabel:!0}},_renderLabel:function(){var e=this.props.restore;return e?_react2.default.createElement(_reactIntl.FormattedMessage,{id:"archive_button.restore_label",defaultMessage:"Restore to Inbox"}):_react2.default.createElement(_reactIntl.FormattedMessage,{id:"archive_button.archive_label",defaultMessage:"Archive"})},render:function(){var e=this.context.intl.formatMessage,t=this.props,r=t.restore,s=t.disabled,a=t.onClick,i=t.showLabel,o=e(r?strings.restore_msgs:strings.archive_msgs),n=this.context.getThemeMode()===_themes.ThemeModes.DARK;return _react2.default.createElement(_fuji_icon_button2.default,{"data-iskeynav":!0,"data-test-id":"toolbar-"+(r?"archive-restore":"archive"),"aria-label":o,title:o,kind:r?_fuji_icon.Kinds.RESTORE_TO_INBOX:_fuji_icon.Kinds.ARCHIVE,disabled:s,onClick:a,size:_fuji_icon.Sizes.XS,colorState:_fuji_icon.ColorStates.INHERITED,isOnDarkBackground:n},i&&this._renderLabel())}});exports.default=ArchiveButton,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../platform/theming/themes":"./platform/theming/themes","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/message_toolbar/atoms/delete_button":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_themes=require("../../../platform/theming/themes"),_fuji_icon=require("../../../atoms/constants/fuji_icon"),strings=(0,_reactIntl.defineMessages)({perm_delete_msgs:{id:"perm_delete_msgs",defaultMessage:"Permanently delete the selected messages"},delete_msgs:{id:"delete_msgs",defaultMessage:"Delete the selected messages"}}),DeleteButton=_react2.default.createClass({displayName:"DeleteButton",getDefaultProps:function(){return{showLabel:!0}},contextTypes:{intl:_reactIntl.intlShape.isRequired,getThemeMode:_react.PropTypes.func},render:function(){var e=this.context.intl.formatMessage,t=this.props,s=t.permanent,a=t.disabled,r=t.onClick,i=t.showLabel,n=e(s?strings.perm_delete_msgs:strings.delete_msgs),l=s?"perm-delete":"delete",o=this.context.getThemeMode()===_themes.ThemeModes.DARK;return _react2.default.createElement(_fuji_icon_button2.default,{"data-iskeynav":!0,"data-test-id":"toolbar-"+l,"aria-label":n,title:n,kind:_fuji_icon.Kinds.DELETE,disabled:a,onClick:r,size:_fuji_icon.Sizes.XS,colorState:_fuji_icon.ColorStates.INHERITED,isOnDarkBackground:o},i?_react2.default.createElement(_reactIntl.FormattedMessage,{id:"delete_icon_label",defaultMessage:"Delete"}):null)}});exports.default=DeleteButton,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../platform/theming/themes":"./platform/theming/themes","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],221:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_mail_ui_vars=require("../../../platform/utils/mail_ui_vars"),_fuji_icon=require("../../../atoms/constants/fuji_icon"),_button=require("../../../atoms/constants/button"),_list_item=require("../../../atoms/constants/list_item"),_button2=require("../../../atoms/button.jsx"),_button3=_interopRequireDefault(_button2),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_advanced_checkbox=require("../../../atoms/advanced_checkbox.jsx"),_advanced_checkbox2=_interopRequireDefault(_advanced_checkbox),_list_item2=require("../../../atoms/list_item.jsx"),_list_item3=_interopRequireDefault(_list_item2),_navigable_list=require("../../../atoms/navigable_list.jsx"),_navigable_list2=_interopRequireDefault(_navigable_list),_popover_container=require("../../../atoms/popover/popover_container.jsx"),_popover_container2=_interopRequireDefault(_popover_container),_popover_anchor=require("../../../atoms/popover/popover_anchor.jsx"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_popover_content=require("../../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover=require("../../../atoms/constants/popover"),_selection_controls=require("../styles/selection_controls"),_selection_controls2=_interopRequireDefault(_selection_controls),_themes=require("../../../platform/theming/themes"),strings=(0,_reactIntl.defineMessages)({select_messages:{id:"selection_controls.menu",defaultMessage:"Select messages"},select_all:{id:"selection_controls.select_all_messages",defaultMessage:"Select all messages"},deselect_all:{id:"selection_controls.deselect_all_messages",defaultMessage:"Deselect all messages"}}),SelectionControls=_react2.default.createClass({displayName:"SelectionControls",contextTypes:{intl:_reactIntl.intlShape.isRequired,getCss:_react.PropTypes.func,getThemeMode:_react.PropTypes.func},getDefaultProps:function(){return{onMenuShow:function(){}}},handleCheckboxClicked:function(e){var t=this.props,a=t.onSelectNone,r=t.onSelectAll,l=t.itemsSelected;e.preventDefault(),e.stopPropagation(),l?a(e,!0):r(e,!0)},render:function(){var e=this.context.getCss(_selection_controls2.default),t=this.context.getThemeMode()===_themes.ThemeModes.DARK,a=this.context.intl.formatMessage,r=this.props,l=r.itemsSelected,n=r.allItemsSelected,s=_advanced_checkbox.CheckTypes.NONE;return l&&n?s=_advanced_checkbox.CheckTypes.ALL:l&&(s=_advanced_checkbox.CheckTypes.PARTIAL),_react2.default.createElement("div",{className:e.container},_react2.default.createElement("ul",{className:e.list},_react2.default.createElement(_list_item3.default,{kind:_list_item.Kinds.MESSAGE_SELECTION_CHECKBOX},_react2.default.createElement("span",{className:e.checkboxWrapper},_react2.default.createElement(_advanced_checkbox2.default,{type:s,highContrast:!0,isInverted:t,onClick:this.handleCheckboxClicked,"aria-label":a(l?strings.deselect_all:strings.select_all),isOnDarkBackground:t,"data-iskeynav":!0,paddingLess:!0}))),_react2.default.createElement(_list_item3.default,{kind:_list_item.Kinds.MESSAGE_SELECTION_CHEVRON},_react2.default.createElement(_popover_container2.default,null,_react2.default.createElement(_popover_anchor2.default,null,_react2.default.createElement("span",{className:e.chevronWrapper},_react2.default.createElement(_fuji_icon_button2.default,{kind:_fuji_icon.Kinds.CHEVRON_UP,size:_fuji_icon.Sizes.XS,rotate:_fuji_icon.Rotate.D180,title:a(strings.select_messages),"aria-label":a(strings.select_messages),colorState:_fuji_icon.ColorStates.INHERITED,isOnDarkBackground:t,"data-iskeynav":!0,"data-test-id":"selection-controls-menu-button",paddingLess:!0}))),_react2.default.createElement(_popover_content2.default,{permittedArrowDirections:[_popover.PermittedArrowDirections.UP,_popover.PermittedArrowDirections.DOWN],triggerOn:_popover.Triggers.CLICK,offset:4*_mail_ui_vars.GRID_UNIT,align:_popover.Align.START,zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH,onShow:this.props.onMenuShow},_react2.default.createElement("div",{className:e.popoverListWrapper},_react2.default.createElement(_navigable_list2.default,{focusOnMount:!0,"data-test-id":"selection-controls-menu"},_react2.default.createElement(_list_item3.default,{name:"select-all"},_react2.default.createElement(_button3.default,{onClick:this.props.onSelectAll,kind:_button.Kinds.MENUITEM},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"select_all",defaultMessage:"All"}))),_react2.default.createElement(_list_item3.default,{name:"select-none"},_react2.default.createElement(_button3.default,{onClick:this.props.onSelectNone,kind:_button.Kinds.MENUITEM},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"select_none",defaultMessage:"None"}))),_react2.default.createElement(_list_item3.default,{name:"select-read"},_react2.default.createElement(_button3.default,{onClick:this.props.onSelectRead,kind:_button.Kinds.MENUITEM},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"select_read",defaultMessage:"Read"}))),_react2.default.createElement(_list_item3.default,{name:"select-unread"},_react2.default.createElement(_button3.default,{onClick:this.props.onSelectUnread,kind:_button.Kinds.MENUITEM},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"select_unread",defaultMessage:"Unread"}))),_react2.default.createElement(_list_item3.default,{name:"select-starred"},_react2.default.createElement(_button3.default,{onClick:this.props.onSelectStarred,kind:_button.Kinds.MENUITEM},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"select_starred",defaultMessage:"Starred"}))),_react2.default.createElement(_list_item3.default,{name:"select-unstarred"},_react2.default.createElement(_button3.default,{onClick:this.props.onSelectUnstarred,kind:_button.Kinds.MENUITEM},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"select_unstarred",defaultMessage:"Unstarred"}))))))))))}});exports.default=SelectionControls,module.exports=exports.default;
},{"../../../atoms/advanced_checkbox.jsx":"./atoms/advanced_checkbox","../../../atoms/button.jsx":"./atoms/button","../../../atoms/constants/button":"./atoms/constants/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/list_item":"./atoms/constants/list_item","../../../atoms/constants/popover":"./atoms/constants/popover","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../atoms/list_item.jsx":"./atoms/list_item","../../../atoms/navigable_list.jsx":"./atoms/navigable_list","../../../atoms/popover/popover_anchor.jsx":"./atoms/popover/popover_anchor","../../../atoms/popover/popover_container.jsx":"./atoms/popover/popover_container","../../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../../platform/theming/themes":"./platform/theming/themes","../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../styles/selection_controls":225,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],222:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_themes=require("../../../platform/theming/themes"),_fuji_icon=require("../../../atoms/constants/fuji_icon"),strings=(0,_reactIntl.defineMessages)({mark_msgs_as_spam:{id:"mark_msgs_as_spam",defaultMessage:"Mark as SPAM"},mark_msgs_as_not_spam:{id:"mark_msgs_as_not_spam",defaultMessage:"Mark as Not SPAM"}}),SpamButton=_react2.default.createClass({displayName:"SpamButton",getDefaultProps:function(){return{showLabel:!0}},contextTypes:{intl:_reactIntl.intlShape.isRequired,getThemeMode:_react.PropTypes.func},_renderLabel:function(){var e=this.props.markAsSpam;return e?_react2.default.createElement(_reactIntl.FormattedMessage,{id:"spam_icon_label",defaultMessage:"Spam"}):_react2.default.createElement(_reactIntl.FormattedMessage,{id:"not_spam_icon_label",defaultMessage:"Not Spam"})},render:function(){var e=this.context.intl.formatMessage,t=this.props,a=t.disabled,s=t.markAsSpam,r=t.onClick,n=t.showLabel,_=e(s?strings.mark_msgs_as_spam:strings.mark_msgs_as_not_spam),i=s?"spam":"not-spam",o=this.context.getThemeMode()===_themes.ThemeModes.DARK;return _react2.default.createElement(_fuji_icon_button2.default,{"data-iskeynav":!0,"data-test-id":"toolbar-"+i,"aria-label":_,title:_,kind:_fuji_icon.Kinds.SPAM,disabled:a,onClick:r,size:_fuji_icon.Sizes.XS,colorState:_fuji_icon.ColorStates.INHERITED,isOnDarkBackground:o},n&&this._renderLabel())}});exports.default=SpamButton,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../platform/theming/themes":"./platform/theming/themes","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],223:[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.UIActions=exports.SelectionTypes=exports.TOOLBAR_HEIGHT=void 0;var _HAS_GROUP_SELECTION,_HAS_SORT,_HAS_CLOSE,_HAS_SINGLE_GROUP_ACT,_HAS_EXPAND_COLLAPSE,_HAS_PREVIOUS_NEXT,_object=require("../../platform/utils/object"),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),Kinds=(0,_object.mirrorKeys)(["MESSAGE_VIEW","LIST","LIST_WITH_PREVIEW_RIGHT","LIST_WITH_PREVIEW_BOTTOM"]),TOOLBAR_HEIGHT=exports.TOOLBAR_HEIGHT=13*_mail_ui_vars.GRID_UNIT,SelectionTypes=exports.SelectionTypes=(0,_object.mirrorKeys)(["ALL","NONE","READ","UNREAD","STARRED","UNSTARRED"]),UIActions=exports.UIActions={HAS_GROUP_SELECTION:(_HAS_GROUP_SELECTION={},_HAS_GROUP_SELECTION[Kinds.LIST]=!0,_HAS_GROUP_SELECTION[Kinds.LIST_WITH_PREVIEW_RIGHT]=!0,_HAS_GROUP_SELECTION[Kinds.LIST_WITH_PREVIEW_BOTTOM]=!0,_HAS_GROUP_SELECTION),HAS_SORT:(_HAS_SORT={},_HAS_SORT[Kinds.LIST]=!0,_HAS_SORT[Kinds.LIST_WITH_PREVIEW_RIGHT]=!0,_HAS_SORT[Kinds.LIST_WITH_PREVIEW_BOTTOM]=!0,_HAS_SORT),HAS_CLOSE:(_HAS_CLOSE={},_HAS_CLOSE[Kinds.LIST_WITH_PREVIEW_RIGHT]=!0,_HAS_CLOSE[Kinds.MESSAGE_VIEW]=!0,_HAS_CLOSE),HAS_SINGLE_GROUP_ACTIONS:(_HAS_SINGLE_GROUP_ACT={},_HAS_SINGLE_GROUP_ACT[Kinds.LIST_WITH_PREVIEW_RIGHT]=!0,_HAS_SINGLE_GROUP_ACT[Kinds.LIST_WITH_PREVIEW_BOTTOM]=!0,_HAS_SINGLE_GROUP_ACT[Kinds.MESSAGE_VIEW]=!0,_HAS_SINGLE_GROUP_ACT),HAS_EXPAND_COLLAPSE:(_HAS_EXPAND_COLLAPSE={},_HAS_EXPAND_COLLAPSE[Kinds.LIST_WITH_PREVIEW_RIGHT]=!0,_HAS_EXPAND_COLLAPSE[Kinds.LIST_WITH_PREVIEW_BOTTOM]=!0,_HAS_EXPAND_COLLAPSE[Kinds.MESSAGE_VIEW]=!0,_HAS_EXPAND_COLLAPSE),HAS_PREVIOUS_NEXT:(_HAS_PREVIOUS_NEXT={},_HAS_PREVIOUS_NEXT[Kinds.MESSAGE_VIEW]=!0,_HAS_PREVIOUS_NEXT)};exports.default=Kinds;
},{"../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../platform/utils/object":"./platform/utils/object"}],224:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_strings=require("./strings"),_strings2=_interopRequireDefault(_strings),_constants=require("./constants"),_constants2=_interopRequireDefault(_constants),_actions=require("./actions"),_actions2=_interopRequireDefault(_actions),_object=require("../../platform/utils/object"),_list=require("../../platform/utils/list"),_selection_controls=require("./atoms/selection_controls.jsx"),_selection_controls2=_interopRequireDefault(_selection_controls),_archive_button=require("./atoms/archive_button.jsx"),_archive_button2=_interopRequireDefault(_archive_button),_delete_button=require("./atoms/delete_button.jsx"),_delete_button2=_interopRequireDefault(_delete_button),_spam_button=require("./atoms/spam_button.jsx"),_spam_button2=_interopRequireDefault(_spam_button),_keyboard_navigation_focus_group=require("../../atoms/keyboard_navigation_focus_group.jsx"),_list_item=require("../../atoms/list_item.jsx"),_list_item2=_interopRequireDefault(_list_item),_button=require("../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_fuji_icon=require("../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon_button=require("../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_navigable_list=require("../../atoms/navigable_list.jsx"),_navigable_list2=_interopRequireDefault(_navigable_list),_popover_container=require("../../atoms/popover/popover_container.jsx"),_popover_container2=_interopRequireDefault(_popover_container),_popover_anchor=require("../../atoms/popover/popover_anchor.jsx"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_popover_content=require("../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover=require("../../atoms/constants/popover"),_folder_menu=require("../../atoms/folder_menu.jsx"),_folder_menu2=_interopRequireDefault(_folder_menu),_more_menu=require("../more_menu"),_more_menu2=_interopRequireDefault(_more_menu),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),_themes=require("../../platform/theming/themes"),_mail_constants=require("../../platform/mail_constants"),_types=require("../../types"),_keyboard_shortcut_group=require("../../molecules/keyboard_shortcut_manager/keyboard_shortcut_group.jsx"),_keyboard_shortcut_group2=_interopRequireDefault(_keyboard_shortcut_group),_keyboard_shortcuts=require("../../platform/keyboard_shortcuts"),_keyboard_shortcut_groups=require("../../platform/keyboard_shortcut_groups"),_utils=require("../../platform/utils"),_constants3=require("../../platform/rapid_client/constants"),_button3=require("../../atoms/constants/button"),_fuji_icon3=require("../../atoms/constants/fuji_icon"),_message_toolbar=require("./styles/message_toolbar"),_message_toolbar2=_interopRequireDefault(_message_toolbar),_constants4=require("../../platform/keyboard_shortcuts/constants"),_confirm=require("../../atoms/dialog/confirm.jsx"),_confirm2=_interopRequireDefault(_confirm),MsgListBulkActionSec=_constants3.SEC_VALUES.MSG_LIST_BULK_ACTION,MsgReadToolbarSec=_constants3.SEC_VALUES.MSG_READ_TOOLBAR,MOVE_SHORTCUT="D",ARCHIVE_SHORTCUT="E",shortcuts=(0,_keyboard_shortcuts.createShortcutGroup)({group:_keyboard_shortcut_groups.Action,keys:Object.assign({},_constants4.commonMessageActionKeys,{escapeToFolder:{key:"ESC",description:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.message_group_escape_message",defaultMessage:"Escape to previous view"}))},delete:{key:"BACKSPACE, DEL",description:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.message_group_delete",defaultMessage:"Delete"}))},archiveMessageGroup:{key:ARCHIVE_SHORTCUT,description:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.message_group_archive",defaultMessage:"Archive"}))},restoreMessageGroup:{key:"CTRL+E,META+E",description:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.message_group_restore",defaultMessage:"Restore to inbox"}))},openMoveMenu:{key:MOVE_SHORTCUT,description:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.open_move_menu",defaultMessage:"Open Move Menu"}))},openFilterEnabledMoveMenu:{key:"SHIFT+"+MOVE_SHORTCUT,description:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.open_move_menu",defaultMessage:"Open Move Menu"}))},previous:{key:"LEFT",description:_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.previous",defaultMessage:"Go to {previous} message or conversation",values:{previous:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.previous_bold",defaultMessage:"previous"}))}})},next:{key:"RIGHT",description:_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.next",defaultMessage:"Go to {next} message or conversation",values:{next:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.next_bold",defaultMessage:"next"}))}})}})}),SORT_ORDERS=(0,_object.values)(_mail_constants.SortOrder),MessageToolbar=_react2.default.createClass({displayName:"MessageToolbar",contextTypes:{navigateTo:_react.PropTypes.func.isRequired,executeAction:_react.PropTypes.func.isRequired,intl:_reactIntl.intlShape.isRequired,config:_react.PropTypes.object.isRequired,getCss:_react.PropTypes.func,getThemeMode:_react.PropTypes.func},getDefaultProps:function(){return{disabledFolderIdsForMove:[],availableSortOrders:[],currentSortOrder:_mail_constants.SortOrder.DATE_DESC,showLabels:!0,showActionLabels:!0,hideCloseButton:!1,navigateOnMessageAction:function(){}}},getInitialState:function(){return{showDeleteConfirm:!1,moveMenuActive:!1,moveMenuFilterFocused:!1}},getClassNames:function(){var e=this.props,t=e.showLabels,s=e.showActionLabels,n=e.enabledActions,o=this.enableTriageActions(),a=this.isListVerticalPreviewMode(),i=this.isFullMessageViewMode();return this.context.getCss(_message_toolbar2.default,{hamSpamDisabled:!n.ham&&!n.spam&&o,archiveRestoreDisabled:!n.archive&&!n.restore&&o,moveDisabled:!n.move&&o,deletePermDisabled:!n.delete&&!n.permDelete&&o,groupActionsActive:this.enableGroupActions(),triageActionsActive:o,showTriageActionsLabels:t&&s,verticalSortView:this.isVerticalSortView(),verticalSelectionControlView:this.isverticalSelectionControlView(),selectionControlDisabled:this.disableSelectionControl(),previousDisabled:!n.previous,nextDisabled:!n.next,fullMessageView:i,listWithVerticalPreview:a,listWithNonVerticalPreview:!a&&!i})},getItemSpaceBasedOnPreviewPaneOffset:function(){var e=this.props.previewPaneOffset,t={};return this.isListVerticalPreviewMode()&&(t={flexBasis:e/2+"%"}),t},isListVerticalPreviewMode:function(){return this.props.kind===_constants2.default.LIST_WITH_PREVIEW_RIGHT},isFullMessageViewMode:function(){return this.props.kind===_constants2.default.MESSAGE_VIEW},enableGroupActions:function(){return""!==this.props.activeGroupId&&0===this.props.selectedGroupIds.length},isVerticalSortView:function(){return this.props.kind===_constants2.default.LIST_WITH_PREVIEW_RIGHT},isverticalSelectionControlView:function(){return this.props.kind===_constants2.default.LIST_WITH_PREVIEW_RIGHT},enableTriageActions:function(){return""!==this.props.activeGroupId||this.props.selectedGroupIds.length>0},enableSingleGroupActions:function(){var e=this.props.kind,t=this.props.enabledActions.raf;return _constants.UIActions.HAS_SINGLE_GROUP_ACTIONS[e]&&t},disableSelectionControl:function(){var e=(0,_list.getListContentTypeFromListId)(this.props.listId);return e===_mail_constants.ListContentTypes.IMAGES||e===_mail_constants.ListContentTypes.DOCUMENTS},getActionCreators:function(){return _actions2.default[this.props.kind]},getActionableGroupIds:function(){var e=this.props,t=e.activeGroupId,s=e.selectedGroupIds;return t?[t]:s},getMkeys:function(){var e;return e={},e[_constants.SelectionTypes.ALL+"-checkbox"]=_constants3.MKEYS.TOOLBAR_SELECTALL_MSG,e[_constants.SelectionTypes.NONE+"-checkbox"]=_constants3.MKEYS.TOOLBAR_SELECT_NONE,e[_constants.SelectionTypes.ALL]=_constants3.MKEYS.TOOLBAR_BULK_CONTEXT_ALL,e[_constants.SelectionTypes.NONE]=_constants3.MKEYS.TOOLBAR_BULK_CONTEXT_NONE,e[_constants.SelectionTypes.READ]=_constants3.MKEYS.TOOLBAR_BULK_CONTEXT_READ,e[_constants.SelectionTypes.UNREAD]=_constants3.MKEYS.TOOLBAR_BULK_CONTEXT_UNREAD,e[_constants.SelectionTypes.STARRED]=_constants3.MKEYS.TOOLBAR_BULK_CONTEXT_STARRED,e[_constants.SelectionTypes.UNSTARRED]=_constants3.MKEYS.TOOLBAR_BULK_CONTEXT_UNSTARRED,e[_mail_constants.SortOrder.DATE_DESC]=_constants3.MKEYS.TOOLBAR_SORT_NEW,e[_mail_constants.SortOrder.DATE_ASC]=_constants3.MKEYS.TOOLBAR_SORT_OLD,e[_mail_constants.SortOrder.UNREAD]=_constants3.MKEYS.TOOLBAR_SORT_UNREAD,e[_mail_constants.SortOrder.STARRED]=_constants3.MKEYS.TOOLBAR_SORT_STARRED,e},isBulkAction:function(){var e=this.context.config.bulkActionDialogThreshold,t=this.props,s=t.activeGroupId,n=t.selectedGroupIds;return!s&&n.length>=e},isPermDelete:function(){var e=this.props.enabledActions;return!e.delete&&e.permDelete},isSpam:function(){var e=this.props.enabledActions;return!!e.spam||!e.ham},isRestore:function(){var e=this.props.enabledActions;return!e.archive&&e.restore},onToolbarMenuShow:function(e){var t={MoveMenu:{mKey:_constants3.MKEYS.TOOLBAR_MOVE_MENU,sec:MsgListBulkActionSec},MoreMenu:{mKey:_constants3.MKEYS.TOOLBAR_MORE_MENU,sec:MsgListBulkActionSec},SelectionMenu:{mKey:_constants3.MKEYS.TOOLBAR_BULK_CONTEXT_MENU,sec:MsgListBulkActionSec},SortMenu:{mKey:_constants3.MKEYS.TOOLBAR_SORT_MENU,sec:_constants3.SEC_VALUES.MSG_LIST_SORT}};if(t[e]){var s=t[e],n=s.mKey,o=s.sec;this.context.executeAction(this.getActionCreators().toolbarMenuShown,{i13nModel:{mKey:n,sec:o}})}},handleSelection:function(e,t,s){var n=this.getMkeys(),o=s?e+"-checkbox":""+e;this.context.executeAction(this.getActionCreators()[e],{listId:this.props.listId,i13nModel:{mKey:n[o],sec:MsgListBulkActionSec,interactionType:(0,_utils.getInteractionFromEvent)(t)}})},handleSingleGroupAction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_constants3.INTERACTION_TYPES.click,s=this.props,n=s.listId,o=s.activeGroupId;if(o){var a={mKey:_constants3.MKEYS["TOOLBAR_"+e.toUpperCase()],sec:MsgReadToolbarSec,mKeyGroup:_constants3.MKEY_GROUPS[e],interactionType:t};this.context.executeAction(this.getActionCreators()[e],{listId:n,messageGroupId:o,i13nModel:a})}},handleArchive:function(e){e.preventDefault(),this.props.navigateOnMessageAction();var t=this.getActionCreators(),s=this.getActionableGroupIds(),n={mKey:_constants3.MKEYS.TOOLBAR_ARCHIVE,sec:MsgListBulkActionSec,mKeyGroup:_constants3.MKEY_GROUPS.archive,interactionType:(0,_utils.getInteractionFromEvent)(e)};s.length&&this.context.executeAction(this.isRestore()?t.restore:t.archive,{listId:this.props.listId,messageGroupIds:s,i13nModel:n}),this.setState({moveMenuActive:!1,moveMenuFilterFocused:!1})},handleMove:function(e,t){t.preventDefault(),this.props.navigateOnMessageAction(),this.context.executeAction(this.getActionCreators().move,{destinationFolderId:e,listId:this.props.listId,messageGroupIds:this.getActionableGroupIds(),i13nModel:{mKey:_constants3.MKEYS.TOOLBAR_MOVE,sec:MsgListBulkActionSec,mKeyGroup:_constants3.MKEY_GROUPS.move,interactionType:(0,_utils.getInteractionFromEvent)(t)}})},handleSpam:function(e){e.preventDefault();var t=this.getActionCreators();this.props.navigateOnMessageAction(),this.context.executeAction(this.isSpam()?t.markAsSpam:t.markAsNotSpam,{listId:this.props.listId,messageGroupIds:this.getActionableGroupIds(),i13nModel:{mKey:this.isSpam()?_constants3.MKEYS.TOOLBAR_SPAM:_constants3.MKEYS.TOOLBAR_NOT_SPAM,sec:MsgListBulkActionSec,mKeyGroup:this.isSpam()?_constants3.MKEY_GROUPS.mark_spam:null,interactionType:(0,_utils.getInteractionFromEvent)(e)}})},handleDelete:function(e){e.preventDefault();var t=this.props,s=t.listId,n=t.navigateOnMessageAction,o=this.getActionableGroupIds(),a=this.isBulkAction();if((this.isPermDelete()||a)&&!this.state.showDeleteConfirm)return void this.setState({showDeleteConfirm:!0});var i={mKey:_constants3.MKEYS.TOOLBAR_DELETE,sec:MsgListBulkActionSec,mKeyGroup:_constants3.MKEY_GROUPS.delete,interactionType:(0,_utils.getInteractionFromEvent)(e)};n(),this.context.executeAction(this.getActionCreators().delete,{listId:s,messageGroupIds:o,permanent:this.isPermDelete(),i13nModel:i}),this.hideDeleteConfirm()},hideDeleteConfirm:function(){this.setState({showDeleteConfirm:!1})},handleSort:function(e,t){var s=this.getActionCreators(),n=this.getMkeys();this.context.executeAction(s[t],{sortOrder:t}),this.context.navigateTo({route:this.props.getListRoute({sortOrder:t}),i13nModel:{mKey:n[t],sec:_constants3.SEC_VALUES.MSG_LIST_SORT,interactionType:(0,_utils.getInteractionFromEvent)(e)}})},handleFilterChange:function(e,t){var s,n=(0,_list.getListContentTypeFromListId)(this.props.listId),o=(s={},s[_mail_constants.ListContentTypes.MESSAGES]="msg",s[_mail_constants.ListContentTypes.DOCUMENTS]="docs",s[_mail_constants.ListContentTypes.IMAGES]="photo",s),a=_constants3.MKEYS["FILTER_"+t],i=a?{mKey:a,sec:_constants3.SEC_VALUES.MSG_LIST_BULK_ACTION,interactionType:(0,_utils.getInteractionFromEvent)(e),actionData:{cntxt:o[n]||o[_mail_constants.ListContentTypes.MESSAGES]}}:null;this.context.navigateTo({route:{name:_mail_constants.RouteNames.SEARCH,params:{query:(0,_list.serializeListIdForRoute)((0,_list.recreateListId)(this.props.listId,{listFilter:t}))}},i13nModel:i})},handleClose:function(e){this.context.executeAction(this.getActionCreators().close,{listId:this.props.listId,i13nModel:{mKey:_constants3.MKEYS.TOOLBAR_CLOSE_MSG,sec:MsgReadToolbarSec,interactionType:(0,_utils.getInteractionFromEvent)(e)}})},handleNext:function(){this.props.loadMoreIfNeeded(),this.props.onNextItem()},handleMoveMenuToggle:function(e){e.stopPropagation(),this.setState({moveMenuActive:!this.state.moveMenuActive&&this.enableTriageActions()})},handleMoveMenuShow:function(e){var t=this.enableTriageActions(),s={moveMenuActive:t};e&&(s.moveMenuFilterFocused=t),this.setState(s),this.onToolbarMenuShow("MoveMenu")},handleMoveMenuHide:function(){this.setState({moveMenuActive:!1,moveMenuFilterFocused:!1})},handleExpandContractClick:function(e){e.stopPropagation(),this.context.executeAction(this.getActionCreators().changeAllCardExpansions,{listId:this.props.listId,messageGroupId:this.props.activeGroupId,newState:this.props.enabledActions.collapseAll?_mail_constants.CARD_EXPANSION_STATES.COLLAPSED:_mail_constants.CARD_EXPANSION_STATES.EXPANDED})},renderExpandMessages:function(e){var t=this.props.enabledActions,s=this.context.intl.formatMessage,n=this.context.getThemeMode()===_themes.ThemeModes.DARK;return t.collapseAll||t.expandAll?_react2.default.createElement("div",{className:e.expandCollapse},_react2.default.createElement(_fuji_icon_button2.default,{title:s(_strings2.default[t.collapseAll?"collapse_list":"expand_list"]),"aria-label":s(_strings2.default[t.collapseAll?"list_is_expanded":"list_is_collapsed"]),kind:t.collapseAll?_fuji_icon3.Kinds.COLLAPSE_LIST:_fuji_icon3.Kinds.EXPAND_LIST,size:_fuji_icon3.Sizes.XS,paddingLess:!1,colorState:_fuji_icon3.ColorStates.INHERITED,onClick:this.handleExpandContractClick,"data-iskeynav":!0,isOnDarkBackground:n})):null},renderSelectionControls:function(e){var t=this,s=(0,_list.getListContentTypeFromListId)(this.props.listId);if((0,_list.getReferrerFromListId)(this.props.listId)===_mail_constants.ListReferrer.SMARTVIEW)switch(s){case _mail_constants.ListContentTypes.IMAGES:case _mail_constants.ListContentTypes.DOCUMENTS:return null}return _react2.default.createElement("div",{className:e.selectionControlsWrapper},_react2.default.createElement(_selection_controls2.default,{onMenuShow:this.onToolbarMenuShow.bind(null,"SelectionMenu"),onSelectAll:function(e,s){return t.handleSelection(_constants.SelectionTypes.ALL,e,s)},onSelectNone:function(e,s){return t.handleSelection(_constants.SelectionTypes.NONE,e,s)},onSelectRead:function(e){return t.handleSelection(_constants.SelectionTypes.READ,e)},onSelectUnread:function(e){return t.handleSelection(_constants.SelectionTypes.UNREAD,e)},onSelectStarred:function(e){return t.handleSelection(_constants.SelectionTypes.STARRED,e)},onSelectUnstarred:function(e){return t.handleSelection(_constants.SelectionTypes.UNSTARRED,e)},itemsSelected:this.props.selectedGroupIds.length>0,allItemsSelected:this.props.allItemsSelected}))},renderArchive:function(e){var t=this,s=this.props,n=s.showLabels,o=s.showActionLabels,a=s.enabledActions,i=function(e){return t.handleArchive(e)},r=[],l=a.restore||a.archive;return a.restore?r.push(shortcuts.restoreMessageGroup(i)):a.archive&&r.push(shortcuts.archiveMessageGroup(i)),_react2.default.createElement(_list_item2.default,null,_react2.default.createElement(_keyboard_shortcut_group2.default,{keys:r},_react2.default.createElement("div",{className:e.archiveRestore},_react2.default.createElement(_archive_button2.default,{disabled:!this.enableTriageActions()||!l,onClick:i,restore:this.isRestore(),showLabel:n&&o}))))},renderMoveMenu:function(e){var t=this.context.intl.formatMessage,s=this.props,n=s.enabledActions,o=s.disabledFolderIdsForMove,a=s.folders,i=s.showLabels,r=s.showActionLabels;return _react2.default.createElement(_list_item2.default,{name:"move-menu-item"},_react2.default.createElement("div",{className:e.move},_react2.default.createElement(_folder_menu2.default,{"data-iskeynav":!0,title:t(_strings2.default.move_msgs),label:i&&r?_react2.default.createElement(_reactIntl.FormattedMessage,{id:"move_menu_icon_label",defaultMessage:"Move"}):null,folders:a,disabledFolderIds:o,excludedFolderTypes:[_mail_constants.FolderTypes.DRAFT,_mail_constants.FolderTypes.SENT],tabIndex:-1,disabled:!this.enableTriageActions()||!n.move,isMenuActive:this.state.moveMenuActive,isFilterFocused:this.state.moveMenuFilterFocused,onClick:this.handleMove,onMenuShow:this.handleMoveMenuShow,onMenuHide:this.handleMoveMenuHide,onMenuToggle:this.handleMoveMenuToggle,hasShortcuts:!0,primaryShortcutKey:MOVE_SHORTCUT,archiveShortcutKey:ARCHIVE_SHORTCUT})))},renderDelete:function(e){var t=this.props,s=t.enabledActions,n=t.showLabels,o=t.showActionLabels,a=s.permDelete||s.delete;return _react2.default.createElement(_list_item2.default,{name:this.isPermDelete()?"perm-delete":"delete"},_react2.default.createElement("div",{className:e.deletePerm},_react2.default.createElement(_delete_button2.default,{disabled:!this.enableTriageActions()||!a,onClick:this.handleDelete,permanent:this.isPermDelete(),showLabel:n&&o})))},renderSpam:function(e){var t=this.props,s=t.enabledActions,n=t.showLabels,o=t.showActionLabels,a=s.spam||s.ham;return _react2.default.createElement(_list_item2.default,{name:this.isSpam()?"not-spam":"spam"},_react2.default.createElement("div",{className:e.hamSpam},_react2.default.createElement(_spam_button2.default,{disabled:!this.enableTriageActions()||!a,markAsSpam:this.isSpam(),onClick:this.handleSpam,showLabel:n&&o})))},renderMoreMenu:function(e){return _react2.default.createElement(_list_item2.default,{name:"more-menu-item"},_react2.default.createElement("div",{className:e.more},_react2.default.createElement(_more_menu2.default,{"data-iskeynav":!0,disabled:!this.enableTriageActions(),selectedGroupIds:this.getActionableGroupIds(),onMenuShow:this.onToolbarMenuShow.bind(null,"MoreMenu"),messageIds:this.props.messageIds})))},renderSortMenu:function(){var e=this,t=this.context.getThemeMode()===_themes.ThemeModes.DARK,s=this.context.intl.formatMessage,n=this.props,o=n.availableSortOrders,a=n.currentSortOrder,i=n.showLabels,r=i?s(_strings2.default.sort_menu):null,l=this.getClassNames(),c=this.getItemSpaceBasedOnPreviewPaneOffset(),u=o.map(function(t){return _react2.default.createElement(_list_item2.default,{key:t,name:"sort-by-"+t},_react2.default.createElement(_button2.default,{"data-test-id":"sort-by-"+t,kind:_button3.Kinds.MENUITEM,onClick:function(s){return e.handleSort(s,t)},style:{position:"relative"}},t===a?_react2.default.createElement("span",{className:l.sortByMenuItemIcon},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.CHECKMARK,size:_fuji_icon3.Sizes.XXS,colorState:_fuji_icon3.ColorStates.NORMAL})):null,_react2.default.createElement("span",{className:l.sortByMenuItemLabel},s(_strings2.default["sort_by_"+t]))))});return _react2.default.createElement("div",{style:c,className:l.viewMenu},_react2.default.createElement("div",{className:l.sortMenuContainer},_react2.default.createElement(_popover_container2.default,null,_react2.default.createElement(_popover_anchor2.default,null,_react2.default.createElement(_button2.default,{"data-test-id":"toolbar-sort-menu-button",kind:_button3.Kinds.CHROMELESS,tabIndex:"-1","data-iskeynav":!0,isOnDarkBackground:t},_react2.default.createElement("span",{className:l.sortByMenu},r,_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.CHEVRON_UP,size:_fuji_icon3.Sizes.XS,rotate:_fuji_icon3.Rotate.D180,colorState:_fuji_icon3.ColorStates.INHERITED})))),_react2.default.createElement(_popover_content2.default,{triggerOn:_popover.Triggers.CLICK,permittedArrowDirections:[_popover.PermittedArrowDirections.UP],offset:4*_mail_ui_vars.GRID_UNIT,align:_popover.Align.END,zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH,"data-test-id":"toolbar-sort-popover",onShow:this.onToolbarMenuShow.bind(null,"SortMenu")},_react2.default.createElement("div",{className:l.popoverListWrapper},_react2.default.createElement(_navigable_list2.default,{focusOnMount:!0,"data-test-id":"toolbar-sort-menu"},u))))))},renderListFilter:function(){var e=this,t=this.context.intl.formatMessage,s=(0,_list.getListFilterFromListId)(this.props.listId).toLowerCase(),n=this.getClassNames(),o=_react2.default.createElement(_list_item2.default,{key:s,name:"list-filter-"+s},_react2.default.createElement(_button2.default,{"data-test-id":"list-filter-from",kind:_button3.Kinds.MENUITEM,onClick:function(t){return e.handleFilterChange(t,_mail_constants.ListFilters.FROM)}},t(_strings2.default.list_filter_from)),_react2.default.createElement(_button2.default,{"data-test-id":"list-filter-to",kind:_button3.Kinds.MENUITEM,onClick:function(t){return e.handleFilterChange(t,_mail_constants.ListFilters.TO)}},t(_strings2.default.list_filter_to)),_react2.default.createElement(_button2.default,{"data-test-id":"list-filter-all",kind:_button3.Kinds.MENUITEM,onClick:function(t){return e.handleFilterChange(t,_mail_constants.ListFilters.ALL)}},t(_strings2.default.list_filter_all)));return _react2.default.createElement("div",{className:n.listFilterViewMenu},_react2.default.createElement(_popover_container2.default,null,_react2.default.createElement(_popover_anchor2.default,null,_react2.default.createElement(_button2.default,{"data-test-id":"toolbar-list-filter-button",kind:_button3.Kinds.CHROMELESS,tabIndex:"-1","data-iskeynav":!0},_react2.default.createElement("span",{className:n.listFilterMenu},t(_strings2.default["list_filter_"+s]),_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.CHEVRON_UP,size:_fuji_icon3.Sizes.XS,rotate:_fuji_icon3.Rotate.D180,colorState:_fuji_icon3.ColorStates.INHERITED})))),_react2.default.createElement(_popover_content2.default,{triggerOn:_popover.Triggers.CLICK,offset:5*_mail_ui_vars.GRID_UNIT,align:_popover.Align.CENTER,zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH,"data-test-id":"toolbar-list-filter-popover"},_react2.default.createElement("div",{className:n.popoverListWrapper},_react2.default.createElement(_navigable_list2.default,{focusOnMount:!0,"data-test-id":"toolbar-list-filter-menu"},o)))))},renderListHeading:function(){var e=(0,_list.getListContentTypeFromListId)(this.props.listId),t=this.context.intl.formatMessage,s=this.getClassNames();switch(e){case _mail_constants.ListContentTypes.IMAGES:return _react2.default.createElement("span",{className:s.listHeading},t(_strings2.default.photos));case _mail_constants.ListContentTypes.DOCUMENTS:return _react2.default.createElement("span",{className:s.listHeading},t(_strings2.default.documents))}},renderTriageActions:function(){var e=this.getClassNames();return _react2.default.createElement("ul",{className:e.triageActionList},this.renderArchive(e),this.renderMoveMenu(e),this.renderDelete(e),this.renderSpam(e),this.renderMoreMenu(e))},renderDeleteConfirm:function(){if(this.state.showDeleteConfirm){var e=this.context.intl.formatMessage,t=this.context.config.conversations,s=this.getActionableGroupIds(),n={conversations:t,count:s.length};return _react2.default.createElement(_confirm2.default,{title:e(_strings2.default.confirm_delete_title),message:this.props.enabledActions.permDelete?e(_strings2.default.confirm_permanently_delete_messages,n):e(_strings2.default.confirm_delete_messages,n),onConfirm:this.handleDelete,onAbort:this.hideDeleteConfirm})}return null},renderSingleGroupActions:function(){var e=this,t=this.context.intl.formatMessage,s=this.getClassNames(),n=[{kind:_fuji_icon3.Kinds.REPLY,action:"reply",stringKey:"message_reply"},{kind:_fuji_icon3.Kinds.REPLY_ALL,action:"replyAll",stringKey:"message_reply_all"},{kind:_fuji_icon3.Kinds.FORWARD,action:"forward",stringKey:"message_forward"}],o=this.context.getThemeMode()===_themes.ThemeModes.DARK,a=n.map(function(n){var a=n.kind,i=n.action,r=n.stringKey,l=t(_strings2.default[r]);return _react2.default.createElement(_list_item2.default,{name:a,key:a,className:s.singleGroupItem},_react2.default.createElement(_fuji_icon_button2.default,{"data-iskeynav":!0,"data-test-id":"toolbar-"+a,"aria-label":l,title:l,kind:a,size:_fuji_icon3.Sizes.XS,disabled:!e.enableGroupActions(),onClick:function(t){return e.handleSingleGroupAction(i,(0,_utils.getInteractionFromEvent)(t))},colorState:_fuji_icon3.ColorStates.INHERITED,isOnDarkBackground:o}))});return _react2.default.createElement("div",{className:s.singleGroupActions},_react2.default.createElement("ul",{key:"group-actions",className:s.singleGroupActionList},a))},renderPreviousNext:function(e){var t=this.context.intl.formatMessage,s=this.context.config.conversations,n={conversations:s},o=!this.props.enabledActions.previous,a=!this.props.enabledActions.next;return _react2.default.createElement(_keyboard_shortcut_group2.default,{keys:[shortcuts.previous(this.props.onPreviousItem),shortcuts.next(this.handleNext)]},_react2.default.createElement("div",{className:e.nextPrevContainer},_react2.default.createElement("span",{className:o?e.nextPrevDisabled:e.nextPrev},_react2.default.createElement(_fuji_icon_button2.default,{"data-iskeynav":!0,"data-test-id":"toolbar-previous",kind:_fuji_icon3.Kinds.INPUT_ARROW_DOWN,rotate:_fuji_icon3.Rotate.D180,paddingLess:!0,disabled:o,size:_fuji_icon3.Sizes.S,onClick:this.props.onPreviousItem,title:t(_strings2.default.previous,n),"aria-label":t(_strings2.default.previous,n),colorState:_fuji_icon3.ColorStates.INHERITED})),_react2.default.createElement("span",{className:a?e.nextPrevDisabled:e.nextPrev},_react2.default.createElement(_fuji_icon_button2.default,{"data-iskeynav":!0,"data-test-id":"toolbar-next",kind:_fuji_icon3.Kinds.INPUT_ARROW_DOWN,paddingLess:!0,disabled:a,size:_fuji_icon3.Sizes.S,onClick:this.handleNext,title:t(_strings2.default.next,n),"aria-label":t(_strings2.default.next,n),colorState:_fuji_icon3.ColorStates.INHERITED}))))},getKeyboardShortcutGroupKeys:function(){return this.enableSingleGroupActions()?[shortcuts.escapeToFolder(this.handleClose),shortcuts.delete(this.handleDelete),shortcuts.reply(this.handleSingleGroupAction.bind(null,"reply",_constants3.INTERACTION_TYPES.shortcut)),shortcuts.replyAll(this.handleSingleGroupAction.bind(null,"replyAll",_constants3.INTERACTION_TYPES.shortcut)),shortcuts.forward(this.handleSingleGroupAction.bind(null,"forward",_constants3.INTERACTION_TYPES.shortcut)),shortcuts.openMoveMenu(this.handleMoveMenuShow.bind(null,!1)),shortcuts.openFilterEnabledMoveMenu(this.handleMoveMenuShow.bind(null,!0))]:[shortcuts.escapeToFolder(this.handleClose),shortcuts.delete(this.handleDelete),shortcuts.openMoveMenu(this.handleMoveMenuShow.bind(null,!1)),shortcuts.openFilterEnabledMoveMenu(this.handleMoveMenuShow.bind(null,!0))]},renderCheckboxAndFilters:function(){var e=this.props,t=e.kind,s=e.showListFilter,n=this.getClassNames(),o=this.getItemSpaceBasedOnPreviewPaneOffset();if(_constants.UIActions.HAS_GROUP_SELECTION[t]||s)return _react2.default.createElement("div",{style:o,className:n.cboxWrapper},_constants.UIActions.HAS_GROUP_SELECTION[t]&&this.renderSelectionControls(n),s&&this.renderListFilter())},renderUsabiltyOptions:function(){var e=this.getClassNames(),t=this.context.intl.formatMessage,s=this.props,n=s.kind,o=s.hideCloseButton,a=this.context.getThemeMode()===_themes.ThemeModes.DARK;if(_constants.UIActions.HAS_EXPAND_COLLAPSE[n]||_constants.UIActions.HAS_PREVIOUS_NEXT[n]||_constants.UIActions.HAS_CLOSE[n]&&!o)return _react2.default.createElement("div",{className:e.usabiltyOptions},_constants.UIActions.HAS_EXPAND_COLLAPSE[n]&&this.renderExpandMessages(e),_constants.UIActions.HAS_PREVIOUS_NEXT[n]&&this.renderPreviousNext(e),_constants.UIActions.HAS_CLOSE[n]&&!o?_react2.default.createElement("div",{"data-test-id":"close-wrapper",className:e.closeWrapper},_react2.default.createElement(_fuji_icon_button2.default,{"data-iskeynav":!0,"data-test-id":"toolbar-close",disabled:!this.enableGroupActions(),kind:_fuji_icon3.Kinds.CLOSE,size:_fuji_icon3.Sizes.XS,onClick:this.handleClose,title:t(_strings2.default.close),"aria-label":t(_strings2.default.close),colorState:_fuji_icon3.ColorStates.INHERITED,isOnDarkBackground:a})):null)},render:function(){var e=this.getClassNames(),t=this.props,s=t.kind,n=t.BackToList,o=this.getKeyboardShortcutGroupKeys();return _react2.default.createElement(_keyboard_shortcut_group2.default,{keys:o},_react2.default.createElement(_keyboard_navigation_focus_group.KeyboardNavigationFocusGroup,{axis:_keyboard_navigation_focus_group.NAVIGATION_AXES.HORIZONTAL,circularNavigation:!1,className:e.container,"data-test-id":"message-toolbar",groupTabIndex:_mail_ui_vars.TabIndices.MESSAGE_LIST_TOOLBAR,role:"toolbar"},this.renderCheckboxAndFilters(),n,this.enableSingleGroupActions()&&this.renderSingleGroupActions(),_react2.default.createElement("div",{className:e.mainActionControls},this.props.showTriageActions?this.renderTriageActions():null,this.props.showListHeading?this.renderListHeading():null),_constants.UIActions.HAS_SORT[s]&&this.renderSortMenu(),this.renderUsabiltyOptions(),_react2.default.createElement("hr",{className:e.bottomLine}),this.renderDeleteConfirm()))}});exports.default=MessageToolbar,module.exports=exports.default;
},{"../../atoms/button.jsx":"./atoms/button","../../atoms/constants/button":"./atoms/constants/button","../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../atoms/constants/popover":"./atoms/constants/popover","../../atoms/dialog/confirm.jsx":"./atoms/dialog/confirm","../../atoms/folder_menu.jsx":71,"../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../atoms/keyboard_navigation_focus_group.jsx":"./atoms/keyboard_navigation_focus_group","../../atoms/list_item.jsx":"./atoms/list_item","../../atoms/navigable_list.jsx":"./atoms/navigable_list","../../atoms/popover/popover_anchor.jsx":"./atoms/popover/popover_anchor","../../atoms/popover/popover_container.jsx":"./atoms/popover/popover_container","../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../molecules/keyboard_shortcut_manager/keyboard_shortcut_group.jsx":"./molecules/keyboard_shortcut_manager/keyboard_shortcut_group","../../platform/keyboard_shortcut_groups":"./platform/keyboard_shortcut_groups","../../platform/keyboard_shortcuts":"./platform/keyboard_shortcuts","../../platform/keyboard_shortcuts/constants":"./platform/keyboard_shortcuts/constants","../../platform/mail_constants":"./platform/mail_constants","../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../platform/theming/themes":"./platform/theming/themes","../../platform/utils":"./platform/utils","../../platform/utils/list":"./platform/utils/list","../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../platform/utils/object":"./platform/utils/object","../../types":"./types","../more_menu":227,"./actions":219,"./atoms/archive_button.jsx":220,"./atoms/delete_button.jsx":"./molecules/message_toolbar/atoms/delete_button","./atoms/selection_controls.jsx":221,"./atoms/spam_button.jsx":222,"./constants":223,"./strings":"./molecules/message_toolbar/strings","./styles/message_toolbar":"./molecules/message_toolbar/styles/message_toolbar","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/message_toolbar/strings":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _reactIntl=require("react-intl");exports.default=(0,_reactIntl.defineMessages)({move_msgs:{id:"move_msgs",defaultMessage:"Move the selected messages to another folder"},mark_msgs_as_spam:{id:"mark_msgs_as_spam",defaultMessage:"Mark as SPAM"},mark_msgs_as_not_spam:{id:"mark_msgs_as_not_spam",defaultMessage:"Mark as Not SPAM"},confirm_delete_title:{id:"message_list.confirm_delete_title",defaultMessage:"Delete message"},confirm_delete_messages:{id:"message_list.confirm_delete_messages",defaultMessage:"\n            Are you sure you want to move {conversations, select,\n                true {{count, plural,\n                    one {conversation}\n                    other {# conversations}\n                }}\n                false {{count, plural,\n                    one {message}\n                    other {# messages}\n                }}\n            } to Trash?\n        "},confirm_permanently_delete_messages:{id:"message_list.confirm_permanently_delete_messages",defaultMessage:"\n            Are you sure you want to permanently delete {conversations, select,\n                true {{count, plural,\n                    one {conversation}\n                    other {# conversations}\n                }}\n                false {{count, plural,\n                    one {message}\n                    other {# messages}\n                }}\n            }\n        "},sort_menu:{id:"sort_menu",defaultMessage:"Sort"},sort_by_date_desc:{id:"sort_by_date_desc",defaultMessage:"Date: Newest on Top"},sort_by_date_asc:{id:"sort_by_date_asc",defaultMessage:"Date: Oldest on Top"},sort_by_unread:{id:"sort_by_unread",defaultMessage:"Unread"},sort_by_flagged:{id:"sort_by_flagged",defaultMessage:"Starred"},sort_by_sender:{id:"sort_by_sender",defaultMessage:"Sender"},sort_by_subject:{id:"sort_by_subject",defaultMessage:"Subject"},sort_by_asc:{id:"sort_by_asc",defaultMessage:"Date: Oldest on Top"},sort_by_desc:{id:"sort_by_desc",defaultMessage:"Date: Newest on Top"},sort_by_relevance:{id:"sort_by_relevance",defaultMessage:"Relevance"},sort_by_attachment:{id:"sort_by_attachment",defaultMessage:"Attachments"},list_filter_from:{id:"list_filter_from",defaultMessage:"From"},list_filter_to:{id:"list_filter_to",defaultMessage:"To"},list_filter_all:{id:"list_filter_all",defaultMessage:"All"},delete_msg_group:{id:"delete_msg_group",defaultMessage:"Delete all these messages"},move_msg_group:{id:"move_msg_group",defaultMessage:"Move these messages to another folder"},close:{id:"close",defaultMessage:"Close"},message_reply:{id:"message_reply",defaultMessage:"Reply"},message_reply_all:{id:"message_reply_all",defaultMessage:"Reply all"},message_forward:{id:"message_forward",defaultMessage:"Forward"},previous:{id:"button.previous",defaultMessage:"Previous {conversations, select,\n                true {conversation}\n                false {message}\n            } [ , ]"},next:{id:"button.next",defaultMessage:"Next {conversations, select,\n                true {conversation}\n                false {message}\n            } [ . ]"},expand_list:{id:"expand_list",defaultMessage:"Expand message cards"},collapse_list:{id:"collapse_list",defaultMessage:"Collapse message cards"},list_is_expanded:{id:"list_is_expanded",defaultMessage:"Conversation is expanded"},list_is_collapsed:{id:"list_is_collapsed",defaultMessage:"Conversation is collapsed"},photos:{id:"photos_label",defaultMessage:"Photos from email"},documents:{id:"document_label",defaultMessage:"Documents from email"}}),module.exports=exports.default;
},{"react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/message_toolbar/styles/message_toolbar":[function(require,module,exports){
module.exports={className:{default:{container:"ab_C k_w D_F H_7bcz en_0 P_2bJhi p_R m_Z14vXdP I_52qC",cboxWrapper:"D_F",usabiltyOptions:"D_F t_r",selectionControlsWrapper:"Q_6EGz",viewMenu:"E_eo6 en_0",listFilterViewMenu:"E_eo6 en_0",mainActionControls:"D_F em_N gl_C",singleGroupActionList:"hd_n D_F ab_C M_0 P_0 O_6uB4 r_n cZW7ROP_n",triageActionList:"hd_n D_F ab_C M_0 P_0 O_6uB4 r_n cZW7ROP_n",closeWrapper:"O_6uB4 cdPFi4_Z2aVTcY",hamSpam:"M_3gIMd cdPFi_Z1RVMOO C_Z1RVMOO C4_Z2aVTcY cdPFi4_Z2aVTcY",archiveRestore:"M_3gIMd cdPFi_Z1RVMOO C_Z1RVMOO C4_Z2aVTcY cdPFi4_Z2aVTcY",deletePerm:"M_3gIMd cdPFi_Z1RVMOO C_Z1RVMOO C4_Z2aVTcY cdPFi4_Z2aVTcY",move:"M_3gIMd cdPFi_Z1RVMOO C_Z1RVMOO C4_Z2aVTcY cdPFi4_Z2aVTcY",more:"M_3gIMd cdPFi_Z1RVMOO C_Z1RVMOO C4_Z2aVTcY cdPFi4_Z2aVTcY",expandCollapse:"M_0 cdPFi_Z1RVMOO C_Z1RVMOO C4_Z2aVTcY cdPFi4_Z2aVTcY",bottomLine:"M_0 P_0 cn_0 D_n",sortByMenu:"D_F ab_C y_1ACvVU X_eo6 A_6EqO cdPFi_Z1RVMOO C_Z1RVMOO C4_Z2aVTcY cdPFi4_Z2aVTcY",nextPrev:"cdPFi_Z1RVMOO cdPFi4_Z2aVTcY",nextPrevDisabled:"cdPFi_sgPuo r_BN cZW7ROP_n",sortByMenuItemIcon:"A_0 p_a T_0 B_0 L_fq7 D_F ab_C",sortByMenuItemLabel:"X_6Eb4",popoverListWrapper:"P_3Y3Gk",singleGroupActions:"D_F",singleGroupItem:"D_F M_3gIMd cdPFi_Z1RVMOO cdPFi4_Z2aVTcY",listFilterMenu:"D_F ab_C y_1ACvVU X_6FIA A_6EqO lo_AT cdPFi_Z1RVMOO C_Z1RVMOO C4_Z2aVTcY cdPFi4_Z2aVTcY",nextPrevContainer:"D_F P_3gIMd",listHeading:"A_6FsP"},"themeMode-DARK":{container:"I_T m_ZYfFSw C_52qC cdPFi_52qC",singleGroupItem:"cdPFi_ZpQYvz cdPFi4_52qC",hamSpam:"M_3gIMd cdPFi_ZpQYvz C_ZpQYvz C4_52qC cdPFi4_52qC",archiveRestore:"M_3gIMd cdPFi_ZpQYvz C_ZpQYvz C4_52qC cdPFi4_52qC",deletePerm:"M_3gIMd cdPFi_ZpQYvz C_ZpQYvz C4_52qC cdPFi4_52qC",move:"M_3gIMd cdPFi_ZpQYvz C_ZpQYvz C4_52qC cdPFi4_52qC",more:"M_3gIMd cdPFi_ZpQYvz C_ZpQYvz C4_52qC cdPFi4_52qC",expandCollapse:"M_0 cdPFi_ZpQYvz C_ZpQYvz C4_52qC cdPFi4_52qC",sortByMenu:"cdPFi_ZpQYvz C_ZpQYvz C4_52qC cdPFi4_52qC",listFilterMenu:"cdPFi_ZpQYvz C_ZpQYvz C4_52qC cdPFi4_52qC",nextPrev:"cdPFi_ZpQYvz cdPFi4_52qC",nextPrevDisabled:"cdPFi_ZpQYvz O_cMr r_BN cZW7ROP_n",closeWrapper:"cdPFi_ZpQYvz cdPFi4_52qC"},fullMessageView:{container:"gl_FM"},listWithVerticalPreview:{cboxWrapper:"ip_N ej_d70",viewMenu:"ip_O t_r ej_d70 E_0",singleGroupActions:"ip_P Q_fq7",mainActionControls:"em_N ip_Q",usabiltyOptions:"ip_R",sortMenuContainer:"N_6MGW"},listWithNonVerticalPreview:{container:"gl_FM"},verticalSelectionControlView:{listFilterViewMenu:"p_CS T_6Fd5",listFilterMenu:"X_fq7"},hamSpamDisabled:{hamSpam:"r_n O_6uB4 cZW7ROP_n"},archiveRestoreDisabled:{archiveRestore:"r_n O_6uB4 cZW7ROP_n"},moveDisabled:{move:"r_n O_6uB4 cZW7ROP_n"},deletePermDisabled:{deletePerm:"r_n O_6uB4 cZW7ROP_n"},groupActionsActive:{singleGroupActionList:"O_N r_BN cZW7ROP_A"},triageActionsActive:{triageActionList:"O_N r_BN cZW7ROP_A",closeWrapper:"O_N"},selectionControlDisabled:{selectionControlsWrapper:"hd_n D_F ab_C M_0 P_0 O_6uB4 r_n cZW7ROP_n"},showTriageActionsLabels:{hamSpam:"M_1MYwXA",archiveRestore:"M_1MYwXA",deletePerm:"M_1MYwXA",move:"M_1MYwXA",more:"M_1MYwXA"}},_key:"Z1AgC9z"};
},{"./src/molecules/message_toolbar/styles/atomic_message_toolbar.css":"./molecules/message_toolbar/styles/atomic_message_toolbar"}],225:[function(require,module,exports){
module.exports={className:{default:{container:"D_F",popoverListWrapper:"P_3Y3Gk",list:"hd_n D_F ab_C M_0 P_0",checkboxWrapper:"D_F",chevronWrapper:"D_F cdPFi_Z1Xxgu2 cdPFi4_Z2aVTcY"},"themeMode-DARK":{chevronWrapper:"cdPFi_ZpQYvz cdPFi4_52qC"}},_key:"ZrlMA4"};
},{"./src/molecules/message_toolbar/styles/atomic_selection_controls.css":"./molecules/message_toolbar/styles/atomic_selection_controls"}],226:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function enabledActions(e){var a=e.kind,s=e.activeGroup,r=e.cards,t=e.cardExpansions,n=e.primaryFolderType,l=a!==_constants2.default.LIST&&Boolean(r)&&s&&s.messages.length>1;if(a===_constants2.default.MESSAGE_VIEW){if(!s)return{};var o=(0,_message_group.onlySpam)(s),_=!o&&(0,_message_group.onlyDrafts)(s),d=!_&&(0,_message_group.onlyTrash)(s),p=n===_mail_constants.FolderTypes.ARCHIVE,c=_||d||o,i=l&&!(0,_cards.allCardsExpanded)(r,t);return{spam:!o&&!_,ham:o&&!_,move:!_,archive:!(_||o||d||p),restore:o||d||p,delete:!c,permDelete:c,raf:!o&&!_,expandAll:i,collapseAll:l&&!i}}var u=Boolean(n),m=n===_mail_constants.FolderTypes.DRAFT,f=n===_mail_constants.FolderTypes.TRASH,T=n===_mail_constants.FolderTypes.ARCHIVE,g=n===_mail_constants.FolderTypes.BULK,A=n===_mail_constants.FolderTypes.SENT,y=m||f||g,v=!!l&&!(0,_cards.allCardsExpanded)(r,t);return{spam:!u||!m&&!g&&!A,ham:g&&!A,move:!u||!m,archive:!u||!m&&!T&&!g&&!f,restore:T||g||f,delete:!u||!y,permDelete:y,raf:a!==_constants2.default.LIST&&(!u||!g&&!m),expandAll:v,collapseAll:l&&!v}}exports.__esModule=!0,exports.enabledActions=enabledActions;var _constants=require("./constants"),_constants2=_interopRequireDefault(_constants),_message_group=require("../../platform/utils/message_group"),_cards=require("../../platform/utils/cards"),_mail_constants=require("../../platform/mail_constants");
},{"../../platform/mail_constants":"./platform/mail_constants","../../platform/utils/cards":"./platform/utils/cards","../../platform/utils/message_group":"./platform/utils/message_group","./constants":223}],227:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_popover_container=require("../../atoms/popover/popover_container.jsx"),_popover_container2=_interopRequireDefault(_popover_container),_popover_anchor=require("../../atoms/popover/popover_anchor.jsx"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_popover_content=require("../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_fuji_icon_button=require("../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_popover=require("../../atoms/constants/popover"),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),_more_menu=require("./styles/more_menu"),_more_menu2=_interopRequireDefault(_more_menu),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_lazy_component=require("../../atoms/lazy_component"),_loading_indicator=require("../../atoms/loading_indicator.jsx"),_loading_indicator2=_interopRequireDefault(_loading_indicator),_themes=require("../../platform/theming/themes"),_fuji_icon=require("../../atoms/constants/fuji_icon"),_reactIntl=require("react-intl"),classNames=(0,_css2.default)(_more_menu2.default),strings=(0,_reactIntl.defineMessages)({more_menu_label:{id:"more_menu_label",defaultMessage:"More"}}),MoreMenu=_react2.default.createClass({displayName:"MoreMenu",contextTypes:{executeAction:_react.PropTypes.func,intl:_reactIntl.intlShape.isRequired,config:_react.PropTypes.object,getThemeMode:_react.PropTypes.func},getDefaultProps:function(){return{onMenuShow:function(){}}},render:function(){var e=this.context.intl.formatMessage,t=this.props.disabled,r=this.context.getThemeMode()===_themes.ThemeModes.DARK;return _react2.default.createElement(_popover_container2.default,{className:classNames.popoverContainer},_react2.default.createElement(_popover_anchor2.default,null,_react2.default.createElement(_fuji_icon_button2.default,{"data-iskeynav":!0,"aria-label":e(strings.more_menu_label),title:e(strings.more_menu_label),"data-test-id":"more-menu-button",disabled:t,kind:_fuji_icon.Kinds.MORE,size:_fuji_icon.Sizes.XS,colorState:_fuji_icon.ColorStates.INHERITED,isOnDarkBackground:r})),_react2.default.createElement(_popover_content2.default,{triggerOn:_popover.Triggers.CLICK,permittedArrowDirections:[_popover.PermittedArrowDirections.UP],zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH,onShow:this.props.onMenuShow},_react2.default.createElement(_lazy_component.LazyComponent,_extends({import:"./more_menu_items.jsx"},this.props,{_moduleGetter:function(){return require("./more_menu_items.jsx")}}),_react2.default.createElement(_lazy_component.When,{loading:!0},_react2.default.createElement(_loading_indicator2.default,null)))))}});exports.default=MoreMenu,module.exports=exports.default;
},{"../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../atoms/constants/popover":"./atoms/constants/popover","../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../atoms/lazy_component":"./atoms/lazy_component","../../atoms/loading_indicator.jsx":"./atoms/loading_indicator","../../atoms/popover/popover_anchor.jsx":"./atoms/popover/popover_anchor","../../atoms/popover/popover_container.jsx":"./atoms/popover/popover_container","../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../platform/theming/themes":"./platform/theming/themes","../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","./more_menu_items.jsx":"./molecules/more_menu/more_menu_items","./styles/more_menu":"./molecules/more_menu/styles/more_menu","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./molecules/more_menu/styles/more_menu":[function(require,module,exports){
module.exports={className:{default:{popoverContainer:"D_F",popoverContent:"P_3Y3Gk"}},_key:"2oJIEc"};
},{"./src/molecules/more_menu/styles/atomic_more_menu.css":"./molecules/more_menu/styles/atomic_more_menu"}],228:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_debounce=require("lodash/debounce"),_debounce2=_interopRequireDefault(_debounce),_types=require("../../types"),_folder_list=require("../../molecules/folder_list"),_folder_list2=_interopRequireDefault(_folder_list),_folder_label=require("../../atoms/folder_label"),_folder_label2=_interopRequireDefault(_folder_label),_ads=require("../../molecules/ads"),_compose_link=require("../../atoms/compose_link.jsx"),_compose_link2=_interopRequireDefault(_compose_link),_overlay=require("../../atoms/overlay.jsx"),_overlay2=_interopRequireDefault(_overlay),_account_switcher=require("../../atoms/account_switcher.jsx"),_account_switcher2=_interopRequireDefault(_account_switcher),_navigation=require("./styles/navigation"),_navigation2=_interopRequireDefault(_navigation),_information_cue=require("../feature_cue/styles/information_cue"),_information_cue2=_interopRequireDefault(_information_cue),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),_array=require("../../platform/utils/array"),_keyboard_navigation_focus_group=require("../../atoms/keyboard_navigation_focus_group.jsx"),_folder=require("../../actions/folder"),_settings=require("../../actions/settings"),_folder2=require("../../platform/utils/folder"),_object=require("../../platform/utils/object"),_reactIntl=require("react-intl"),_keyboard_shortcuts=require("../../platform/keyboard_shortcuts"),_keyboard_shortcut_groups=require("../../platform/keyboard_shortcut_groups"),_keyboard_shortcut_group=require("../keyboard_shortcut_manager/keyboard_shortcut_group.jsx"),_keyboard_shortcut_group2=_interopRequireDefault(_keyboard_shortcut_group),_mail_constants=require("../../platform/mail_constants"),_confirm=require("../../atoms/dialog/confirm"),_confirm2=_interopRequireDefault(_confirm),_utils=require("../../platform/utils"),_constants=require("../../platform/rapid_client/constants.js"),_lazy_component=require("../../atoms/lazy_component"),_popover_content=require("../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover=require("../../atoms/constants/popover"),_route=require("../../platform/utils/route"),_fuji_icon=require("../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../atoms/constants/fuji_icon"),_utils2=require("./utils"),STOP_SCROLL_DETECT_DELEY=250,strings=(0,_reactIntl.defineMessages)({confirm_folder_delete_all_title:{id:"confirm.folder_delete_all_title",defaultMessage:"Delete all emails"},confirm_folder_archive_all_title:{id:"confirm.folder_archive_all_title",defaultMessage:"Archive all emails"},confirm_inbox_archive_all_personalized_title:{id:"confirm.confirm_inbox_archive_all_personalized_title",defaultMessage:"{sendingName}, let's clean your Inbox"},confirm_inbox_archive_all_title:{id:"confirm.inbox_archive_all_title",defaultMessage:"Let's clean your Inbox"},archive_emails_button_label:{id:"confirm.archive_emails_button_label",defaultMessage:"Archive emails"}}),shortcuts=(0,_keyboard_shortcuts.createShortcutGroup)({group:_keyboard_shortcut_groups.General,keys:{openCompose:{key:"N",description:_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.open_compose",defaultMessage:"Start a {newConvo}",values:{newConvo:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.open_compose_strong",defaultMessage:"New Email Conversation"}))}})},openInbox:{key:"M",description:_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.open_inbox",defaultMessage:"Go to {inbox}",values:{inbox:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.open_box_strong",defaultMessage:"Inbox"}))}})}}}),Navigation=_react2.default.createClass({displayName:"Navigation",contextTypes:{executeAction:_react.PropTypes.func,navigateTo:_react.PropTypes.func.isRequired,registerUnsavedDataHandler:_react.PropTypes.func.isRequired,getCss:_react.PropTypes.func,intl:_reactIntl.intlShape.isRequired,config:_react.PropTypes.object},getDefaultProps:function(){return{showComposeBadge:!1}},getInitialState:function(){return{scrollingUnder:!1,confirmRequested:!1,isScrolling:!1,toggleAccountsList:!0}},componentDidMount:function(){this.detectScrollStop=(0,_debounce2.default)(this.detectScrollStop,STOP_SCROLL_DETECT_DELEY),this.unsavedDataHandler=this.context.registerUnsavedDataHandler(this.registerUnsavedData)},componentWillUnmount:function(){return this.unsavedDataHandler.remove()},registerUnsavedData:function(){if(this.files)return{files:this.files}},handleComposeLinkClick:function(e){e.preventDefault();var t={mKey:_constants.MKEYS.COMPOSE_BUTTON,sec:_constants.SEC_VALUES.LEFTRAIL_COMPOSE,mKeyGroup:_constants.MKEY_GROUPS.compose,interaction_type:(0,_utils.getInteractionFromEvent)(e)};this.props.navigateToNewCompose({i13nModel:t})},handleComposeDrop:function(e){e.preventDefault();var t=e.dataTransfer,o=this.props.navigateToNewCompose,r=Array.prototype.slice.call(t&&t.types||[]);if(r.some(function(e){return"Files"===e})){var n=Array.prototype.slice.call(t.files);this.files=n,o()}},handleDragOver:function(e){e.preventDefault()},handleDragScroll:function(e){if(e.preventDefault(),e&&e.clientY){var t=this.refs.folderList,o=t.scrollTop,r=t.scrollHeight,n=(0,_utils2.updateScrollOnDragOver)(e.clientY,t.getBoundingClientRect(),o,r);o!==n&&(t.scrollTop=n)}},handleDragEnter:function(e){e.preventDefault()},handleFolderClick:function(e,t,o){e.preventDefault(),this.props.navigateToFolder(t,{i13nModel:o})},handleSmartViewClick:function(e,t){var o=void 0;e.preventDefault();var r={UNREAD:_constants.MKEYS.UNREAD_SMARTVIEW,STARRED:_constants.MKEYS.STARRED_SMARTVIEW,PHOTOS:_constants.MKEYS.PHOTO_SMARTVIEW,DOCUMENTS:_constants.MKEYS.DOCUMENT_SMARTVIEW,TUTORIAL:_constants.MKEYS.TUTORIAL_SMARTVIEW},n=r[t];n&&(o={mKey:n,sec:_constants.SEC_VALUES.LEFTRAIL_SMARTVIEW,interactionType:(0,_utils.getInteractionFromEvent)(e)},t!==_mail_constants.SmartViewTypes.TUTORIAL&&(o.mKeyGroup=_constants.MKEY_GROUPS.search));var a=this.props.activeAccount,s={accountIds:a.id};this.context.navigateTo({route:(0,_route.buildSmartViewRoute)(t,s),i13nModel:o})},handleFolderDelete:function(e){var t=e.folder,o=e.i13nModel;o=Object.assign({mKey:_constants.MKEYS.FOLDER_CONTEXTMENU_DELETE,sec:_constants.SEC_VALUES.LEFTRAIL_CONTEXTMENU,mKeyGroup:_constants.MKEY_GROUPS.delete_fldr},o),this.context.executeAction(_folder.deleteFolder,{folder:t,i13nModel:o})},handleFolderMenuShow:function(){var e={mKey:_constants.MKEYS.FOLDER_CONTEXTMENU,sec:_constants.SEC_VALUES.LEFTRAIL_CONTEXTMENU};this.context.executeAction(_folder.showFolderMenu,{i13nModel:e})},handleFolderCreate:function(e){var t=e.folderName,o=e.i13nModel,r=this.props.activeAccount;o=Object.assign({mKey:_constants.MKEYS.ADD_FOLDER,sec:_constants.SEC_VALUES.LEFTRAIL_USERFOLDER,mKeyGroup:_constants.MKEY_GROUPS.create_fldr},o),this.context.executeAction(_folder.createFolder,{folderName:(0,_folder2.getFolderName)(t,r),accountId:r.id,i13nModel:o})},handleSubfolderCreate:function(e){var t=e.folder,o=e.subfolderName,r=e.i13nModel,n=this.props.activeAccount,a=(0,_folder2.buildFolderPath)(t.id,this.props.folders);r=Object.assign({mKey:_constants.MKEYS.ADD_FOLDER,sec:_constants.SEC_VALUES.LEFTRAIL_USERFOLDER,mKeyGroup:_constants.MKEY_GROUPS.create_fldr},r),this.context.executeAction(_folder.createFolder,{folderName:(0,_folder2.getFolderName)(o,n,a),accountId:n.id,i13nModel:r})},handleFolderRename:function(e){var t=e.originalFolderName,o=e.newFolderName,r=e.folderId,n=e.i13nModel,a=this.props.activeAccount,s=(0,_folder2.buildFolderPath)(r,this.props.folders),l=s.substr(0,s.lastIndexOf(t)-1)||"";n=Object.assign({mKey:_constants.MKEYS.FOLDER_CONTEXTMENU_RENAME,sec:_constants.SEC_VALUES.LEFTRAIL_CONTEXTMENU,mKeyGroup:_constants.MKEY_GROUPS.rename_fldr},n),this.context.executeAction(_folder.renameFolder,{folderName:(0,_folder2.getFolderName)(o,a,l),folderId:r,i13nModel:n})},handleFolderMarkRead:function(e){var t=e.folder,o=e.i13nModel;o=Object.assign({mKey:_constants.MKEYS.FOLDER_CONTEXTMENU_ALL_READ,sec:_constants.SEC_VALUES.LEFTRAIL_CONTEXTMENU,mKeyGroup:_constants.MKEY_GROUPS.mark_read},o),this.context.executeAction(_folder.markFolderAsRead,{folder:t,i13nModel:o})},handleFolderArchive:function(e){var t=this.state.selectedFolder,o={mKey:_constants.MKEYS.FOLDER_CONTEXTMENU_ALL_ARCHIVE,sec:_constants.SEC_VALUES.LEFTRAIL_CONTEXTMENU,interactionType:(0,_utils.getInteractionFromEvent)(e),mKeyGroup:_constants.MKEY_GROUPS.archive,actionData:{numMsg:t.total}};this.context.executeAction(_folder.archiveAllMessages,{folder:t,i13nModel:o}),this.hideConfirm()},handleExpandFolderToggle:function(e,t){var o=this.props.expandedFolders,r=this.props.folders.some(function(t){return t.folder.id===e});if(r){var n=o.indexOf(e),a=n!==-1,s=void 0;if(t&&!a)s=(0,_array.append)(o,e);else{if(t||!a)return;s=(0,_array.remove)(o,n,1)}this.context.executeAction(_settings.updateExpandedFoldersSetting,s)}},handleToggleCustomFolders:function(e){this.context.executeAction(_settings.updateShowCustomFoldersSetting,{value:e})},handleToggleAccountsLinkClick:function(e){e.preventDefault();var t={mKey:this.state.toggleAccountsList?_constants.MKEYS.COLLAPSE_ACCOUNT_SWITCHER:_constants.MKEYS.EXPAND_ACCOUNT_SWITCHER,sec:_constants.SEC_VALUES.LEFTRAIL_ACCOUNTS,interactionType:(0,_utils.getInteractionFromEvent)(e)};this.context.executeAction(_folder.toggleAccountsList,{i13nModel:t}),this.setState({toggleAccountsList:!this.state.toggleAccountsList})},showConfirmDialog:function(e,t){this.setState({confirmRequested:!0,confirmType:e,selectedFolder:t})},hideConfirm:function(){this.setState({confirmRequested:!1,confirmType:null,selectedFolder:null})},handleFolderClear:function(e){var t=this.state.selectedFolder,o=(0,_folder2.getPrimaryFolderType)(t),r=o===_mail_constants.FolderTypes.BULK||o===_mail_constants.FolderTypes.TRASH,n={mKey:r?_constants.MKEYS.FOLDER_CONTEXTMENU_EMPTY:_constants.MKEYS.FOLDER_CONTEXTMENU_ALL_DELETE,sec:_constants.SEC_VALUES.LEFTRAIL_CONTEXTMENU,interactionType:(0,_utils.getInteractionFromEvent)(e),mKeyGroup:_constants.MKEY_GROUPS.delete,actionData:{numMsg:t.total}};this.context.executeAction(_folder.deleteAllMessages,{folder:t,i13nModel:n}),this.hideConfirm()},navigateToInbox:function(e){this.handleFolderClick(e,_mail_constants.SystemFolders.INBOX,{mKey:_constants.MKEYS.INBOX_FOLDER,sec:_constants.SEC_VALUES.LEFTRAIL_SYSFOLDER,interactionType:(0,_utils.getInteractionFromEvent)(e)})},detectScrollStop:function(){this.setState({isScrolling:!1})},handleScroll:function(){var e=this.refs.folderList.scrollTop,t=this.state.isScrolling;t||this.setState({isScrolling:!0}),this.detectScrollStop(),this.state.scrollingUnder&&e<1?this.setState({scrollingUnder:!1}):!this.state.scrollingUnder&&e>0&&this.setState({scrollingUnder:!0})},renderConfirmDialog:function(){var e=this.context.intl.formatMessage,t=this.state,o=t.selectedFolder,r=t.confirmType,n=this.props.conversationSetting,a=(0,_folder2.getPrimaryFolderType)(o),s=_react2.default.createElement("strong",null,_react2.default.createElement(_folder_label2.default,{folderDisplayType:a,name:o.name})),l=(0,_folder2.isPermDeleteFolderType)(a);switch(r){case _mail_constants.ConfirmIds.CLEAR_FOLDER:return _react2.default.createElement(_confirm2.default,{title:e(strings.confirm_folder_delete_all_title),onConfirm:this.handleFolderClear,onAbort:this.hideConfirm},l?_react2.default.createElement(_reactIntl.FormattedMessage,{id:"confirm.folder_delete_all_message",defaultMessage:"Are you sure you want to delete all\n                                {emailsNum, plural,\n                                    one {# conversation}\n                                    other {# conversations}\n                                } from {folderName}?",values:{emailsNum:o.total,folderName:s,conversations:n}}):_react2.default.createElement(_reactIntl.FormattedMessage,{id:"confirm.folder_delete_move_all_message",defaultMessage:"Are you sure you want to delete all\n                                {emailsNum, plural,\n                                    one {# conversation}\n                                    other {# conversations}\n                                }, moving them from {folderName} to the Trash?",values:{emailsNum:o.total,folderName:s,conversations:n}}));case _mail_constants.ConfirmIds.ARCHIVE_FOLDER:var i=(0,_folder2.getPrimaryFolderType)(o),c=i===_mail_constants.FolderTypes.INBOX,d=strings.confirm_inbox_archive_all_title,_=strings.confirm_inbox_archive_all_personalized_title,u=strings.confirm_folder_archive_all_title,f=strings.archive_emails_button_label,m=this.props.activeAccount.sendingName,p=void 0;return p=c?m?_:d:u,_react2.default.createElement(_confirm2.default,{title:e(p,{sendingName:m}),onConfirm:this.handleFolderArchive,onAbort:this.hideConfirm,hideIcon:!0,acceptLabel:f},c?_react2.default.createElement(_reactIntl.FormattedMessage,{id:"confirm.inbox_archive_all_message",defaultMessage:"You can start with a clean inbox by archiving all\n                                        {emailsNum, plural,\n                                            one {# conversation}\n                                            other {# conversations}\n                                        } (instead of deleting).\n                                        Don't worry, to find them later, simply go to the Archive folder.",values:{emailsNum:o.total,folderName:s,conversations:n}}):_react2.default.createElement(_reactIntl.FormattedMessage,{id:"confirm.folder_archive_all_message",defaultMessage:"Are you sure you want to archive all\n                                    {emailsNum, plural,\n                                        one {# conversation}\n                                        other {# conversations}\n                                    }, moving them from {folderName} to your Archive folder?",values:{emailsNum:o.total,folderName:s,conversations:n}}));default:return null}},renderComposeCue:function(){var e=this.props.navigateToNewCompose;return this.props.showHSComposeCue&&this.composeBtn?_react2.default.createElement(_popover_content2.default,{popoverAnchor:this.composeBtn,align:_popover.Align.CENTER,triggerOn:_popover.Triggers.MOUNT,permittedArrowDirections:[_popover.PermittedArrowDirections.LEFT],bg:_popover.BackgroundKinds.GRADIENT,zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../../molecules/scout_cue/",cueName:"HSComposeCue",navigateToNewCompose:e,_moduleGetter:function(){return require("../../molecules/scout_cue/")}})):null},renderPreTourCue:function(){var e=this.context.getCss(_information_cue2.default);return this.props.showHSPreTourCue?_react2.default.createElement(_overlay2.default,null,_react2.default.createElement("div",{className:e.preTourContainer},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../../molecules/scout_cue/",cueName:"HSPreTourCue",firstName:this.props.activeAccount.sendingName,_moduleGetter:function(){return require("../../molecules/scout_cue/")}}))):null},shouldRenderAccountSwitcher:function(){var e=this.props.rootAccounts.filter(function(e){return e.status===_mail_constants.AccountStatus.ENABLED});return e.length>1},render:function(){var e=this,t=this.context.getCss(_navigation2.default,{scrollingUnder:this.state.scrollingUnder}),o=this.context.config;return _react2.default.createElement(_keyboard_shortcut_group2.default,{keys:[shortcuts.openCompose(this.handleComposeLinkClick),shortcuts.openInbox(this.navigateToInbox)]},_react2.default.createElement(_keyboard_navigation_focus_group.KeyboardNavigationFocusGroup,{"data-test-id":"navigation",className:t.container+" navigation",circularNavigation:!1,groupTabIndex:_mail_ui_vars.TabIndices.FOLDER_LIST},_react2.default.createElement("div",{ref:function(t){e.composeBtn=t}},_react2.default.createElement(_compose_link2.default,{onClick:this.handleComposeLinkClick,handleDrop:this.handleComposeDrop,handleDragOver:this.handleDragOver,handleDragEnter:this.handleDragEnter,showComposeBadge:this.props.showComposeBadge}),this.renderComposeCue()),_react2.default.createElement("div",{className:t.shadow}),_react2.default.createElement("div",{className:t.folderList,onScroll:this.handleScroll,"data-test-id":"left-rail-scrolling-container",ref:"folderList",onDragOver:this.handleDragScroll},this.shouldRenderAccountSwitcher()?_react2.default.createElement(_account_switcher2.default,{activeAccountId:this.props.activeAccount.id,rootAccounts:this.props.rootAccounts,accountDefaultFolders:this.props.accountDefaultFolders,toggleAccountsList:this.state.toggleAccountsList,expiredAccounts:this.props.expiredAccounts,onClick:this.handleFolderClick}):null,this.shouldRenderAccountSwitcher()?_react2.default.createElement("div",{className:t.divider,onClick:this.handleToggleAccountsLinkClick},_react2.default.createElement("button",{className:t.moreButton,"data-iskeynav":!0}),_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.MORE,colorState:_fuji_icon3.ColorStates.INHERITED,className:t.moreIcon})):null,_react2.default.createElement(_folder_list2.default,{folders:this.props.folders,sortOrder:this.props.folderListSortOrder,mailboxId:this.props.mailboxId,unreadCountForAccount:this.props.unreadCountForAccount,highlightFolderId:this.props.highlightFolderId,folderRefreshing:this.props.folderRefreshing,onFolderOpen:this.handleFolderClick,onFolderDelete:this.handleFolderDelete,onFolderCreate:this.handleFolderCreate,onFolderMarkRead:this.handleFolderMarkRead,onFolderArchive:this.showConfirmDialog.bind(this,_mail_constants.ConfirmIds.ARCHIVE_FOLDER),onFolderClear:this.showConfirmDialog.bind(this,_mail_constants.ConfirmIds.CLEAR_FOLDER),onSubfolderCreate:this.handleSubfolderCreate,onFolderMenuShow:this.handleFolderMenuShow,onFolderRename:this.handleFolderRename,onSmartViewOpen:this.handleSmartViewClick,onFolderExpandToggle:this.handleExpandFolderToggle,onToggleCustomFolders:this.handleToggleCustomFolders,showPhotosCue:this.props.showPhotosCue,showStarredCue:this.props.showStarredCue,showHSDocumentsCue:this.props.showHSDocumentsCue,expandedFolders:this.props.expandedFolders,showCustomFolders:this.props.showCustomFolders,isScrolling:this.state.isScrolling,selection:this.props.selection}),this.props.hasAds?_react2.default.createElement("div",{className:t.adTL},_react2.default.createElement(_ads.Tl1AdComponent,null)):_react2.default.createElement("div",{className:t.adTL}),this.state.confirmRequested?this.renderConfirmDialog():null,o.feedbackPanel?_react2.default.createElement("div",{ref:function(t){e.feedbackBtn=t}},_react2.default.createElement(_lazy_component.LazyComponent,{defer:!0,import:"../../molecules/feedback_panel/index.jsx",_moduleGetter:function(){return require("../../molecules/feedback_panel/index.jsx")}})):null,this.renderPreTourCue())))}});exports.default=Navigation,module.exports=exports.default;
},{"../../actions/folder":"./actions/folder","../../actions/settings":"./actions/settings","../../atoms/account_switcher.jsx":65,"../../atoms/compose_link.jsx":68,"../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../atoms/constants/popover":"./atoms/constants/popover","../../atoms/dialog/confirm":"./atoms/dialog/confirm","../../atoms/folder_label":"./atoms/folder_label","../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../atoms/keyboard_navigation_focus_group.jsx":"./atoms/keyboard_navigation_focus_group","../../atoms/lazy_component":"./atoms/lazy_component","../../atoms/overlay.jsx":"./atoms/overlay","../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../molecules/ads":115,"../../molecules/feedback_panel/index.jsx":"./molecules/feedback_panel","../../molecules/folder_list":170,"../../molecules/scout_cue/":"./molecules/scout_cue","../../platform/keyboard_shortcut_groups":"./platform/keyboard_shortcut_groups","../../platform/keyboard_shortcuts":"./platform/keyboard_shortcuts","../../platform/mail_constants":"./platform/mail_constants","../../platform/rapid_client/constants.js":"./platform/rapid_client/constants","../../platform/utils":"./platform/utils","../../platform/utils/array":"./platform/utils/array","../../platform/utils/folder":"./platform/utils/folder","../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../platform/utils/object":"./platform/utils/object","../../platform/utils/route":"./platform/utils/route","../../types":"./types","../feature_cue/styles/information_cue":"./molecules/feature_cue/styles/information_cue","../keyboard_shortcut_manager/keyboard_shortcut_group.jsx":"./molecules/keyboard_shortcut_manager/keyboard_shortcut_group","./styles/navigation":229,"./utils":230,"lodash/debounce":"./node_modules/lodash/debounce.js","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],229:[function(require,module,exports){
module.exports={className:{default:{container:"p_R Z_0 em_N W_6D6F D_F ek_BB",shadow:"O_0 Z_N p_a T_73HH W_6D6F H_fq7 aw_FpCA3",folderList:"Y_fq7 P_Z1jXKuU D_B iz_A iy_h it_68UO",divider:"M_ZyFsHm q_ak5k6 r_P cdPFi_Z26U5tf t_C H_0 p_R P_dRA q4_52qC cdPFi4_Z26U5rI",moreButton:"b_n r_P P_dRA p_R H_6Fd5 T_69H5 q_T W_6D6F ir3_2d4VCo",moreIcon:"p_a T_68F4 L_dRK W_6Eb4 H_6Eb4",adTL:"Y_6TFj U_7iGr"},scrollingUnder:{shadow:"O_N"},"themeMode-MEDIUM":{container:"C_52qC",divider:"q_Z221Km9 cdPFi_ak5jA q4_ZS20V7 cdPFi4_ak5l7",moreButton:"ir3_Z1a7UWG"},"themeMode-DARK":{container:"C_52qC",divider:"q_Z221Km9 cdPFi_ak5jA q4_ZS20V7 cdPFi4_ak5l7",moreButton:"ir3_Z1a7UWG"}},_key:"1NbDKO"};
},{"./src/molecules/navigation/styles/atomic_navigation.css":"./molecules/navigation/styles/atomic_navigation"}],230:[function(require,module,exports){
"use strict";exports.__esModule=!0;var updateScrollOnDragOver=exports.updateScrollOnDragOver=function(r,t,e,o){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=t.top,n=t.bottom,u=t.height,p=u/8,s=10,v=0;return r<=l+p?(v=a?l/r*s:s,e-=v,e<0&&(e=0)):r>=n-p&&(v=a?r/n*s:s,e+u!==o&&(e+=v)),Math.floor(e)};
},{}],231:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function SendSuccess(e,t){var a=e.nextUrl,s=t.navigateTo;return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.send_success_notification_with_link",defaultMessage:"Your {message} has been sent.",values:{message:a?_react2.default.createElement(_fluxibleRouter.NavLink,{href:a,className:classNames.link,"data-test-id":"navigate-button",onClick:function(e){e.preventDefault(),s({url:a})}},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.send_success_notification_message_link",defaultMessage:"message"})):_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.send_success_notification_message_link",defaultMessage:"message"})}})}function InlineImgFailure(e,t){var a=e.onClose,s=e.filename,i=e.dataId,n=e.csid,c=t.executeAction;return _react2.default.createElement("div",{"data-test-id":"notification-img-upload-failure"},_react2.default.createElement("div",{className:classNames.notificationTitle},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.inline_image_upload_or_download_failure_notification_title",defaultMessage:"Image upload failed"})),_react2.default.createElement("div",{className:classNames.notificationSubText},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.inline_image_upload_fail_notification",defaultMessage:"Failed to upload {filename}.",values:{filename:s||"image"}}),"",_react2.default.createElement("span",{onClick:function(){c(_actions.removeInlineImage,{dataId:i,csid:n}),a()},className:classNames.link,"data-test-id":"notification-remove-img"},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.inline_image_remove",defaultMessage:"Remove"}))))}exports.__esModule=!0,exports.SendSuccess=SendSuccess,exports.InlineImgFailure=InlineImgFailure;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleRouter=require("fluxible-router"),_reactIntl=require("react-intl"),_actions=require("../compose/actions.js"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_actionable_compose_notifications=require("./styles/actionable_compose_notifications"),_actionable_compose_notifications2=_interopRequireDefault(_actionable_compose_notifications),classNames=(0,_css2.default)(_actionable_compose_notifications2.default);SendSuccess.contextTypes={navigateTo:_react.PropTypes.func},InlineImgFailure.contextTypes={executeAction:_react.PropTypes.func};
},{"../compose/actions.js":"./molecules/compose/actions","./styles/actionable_compose_notifications":247,"fluxible-router":"./node_modules/fluxible-router/index.js","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],232:[function(require,module,exports){
"use strict";function closeNotification(t,o){var i=o.notification;t.dispatch(_react_action_constants.mail.NOTIFICATION_CLOSED,{notification:i})}exports.__esModule=!0,exports.closeNotification=closeNotification;var _react_action_constants=require("../../platform/react_action_constants");
},{"../../platform/react_action_constants":"./platform/react_action_constants"}],233:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function InfectedFiles(e){var t=e.infectedFileName;return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"attachment_tray.infected_files",values:{infectedFileName:t},defaultMessage:"File infected - {infectedFileName}"})}exports.__esModule=!0,exports.InfectedFiles=InfectedFiles;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl");
},{"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],234:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function NoAddress(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.send_email_address_missing_notification",defaultMessage:"Please add at least one email address before sending."})}function MaxRecipientsExceeded(){return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:classNames.notificationTitle},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.send_recipients_exceeded_notification_title",defaultMessage:"Send Error: Too many recipients for this email"})),_react2.default.createElement("div",{className:classNames.notificationSubText},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.send_recipients_exceeded_notification_subtext",defaultMessage:"Please reduce the number of recipients and try to send again."}),_react2.default.createElement("br",null),_react2.default.createElement(_button2.default,{kind:_button3.Kinds.CHROMELESS,"data-test-id":"compose_learn_more_btn",onClick:function(){return window.open(LEARN_MORE_URL,"_blank")}},_react2.default.createElement("span",{className:classNames.button},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.learn_more_url",defaultMessage:"Learn more"})))))}function InvalidAddresses(e){var t=e.invalidAddresses,a=void 0===t?[]:t,s={};a.forEach(function(e,t,a){var r="_"+t;s[r]=_react2.default.createElement("span",null,e),t<a.length-1&&(s[r+"-delim"]=_react2.default.createElement(_reactIntl.FormattedMessage,{id:"email_separator",defaultMessage:"\n                        {isLast, select,\n                            false {,\\u0020}\n                            true {, and\\u0020}}\n                    ",values:{isLast:t===a.length-2}}))});var r=(0,_reactAddonsCreateFragment2.default)(s);return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.send_email_address_correction_notification",defaultMessage:"Please correct these email addresses before sending: {emailList}",values:{emailList:_react2.default.createElement("span",null,r)}})}function Send(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.sending_email_status",defaultMessage:"Sending..."})}function SendFailure(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"compose.send_failure_notification",defaultMessage:"We encountered issues while sending message."})}function SaveSuccess(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.draft_saved",defaultMessage:"Message saved as draft."})}function SaveFailure(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.draft_save_failed",defaultMessage:"Message cannot be saved as draft."})}function SaveToInboxSuccess(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.saved_to_inbox",defaultMessage:"Message saved to inbox."})}function SaveToInboxFailure(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.save_to_inbox_failed",defaultMessage:"Message cannot be saved to inbox."})}function DeleteDraftSuccess(e){var t=e.messageIds;return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.delete_draft_success",defaultMessage:"{count, plural, one {Draft} other {Drafts}} permanently deleted.",values:{count:t.length}})}function DeleteDraftFailure(e){var t=e.messageIds;return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.delete_draft_failure",defaultMessage:"Unable to delete the {count, plural, one {draft} other {drafts}}.",values:{count:t.length}})}exports.__esModule=!0,exports.NoAddress=NoAddress,exports.MaxRecipientsExceeded=MaxRecipientsExceeded,exports.InvalidAddresses=InvalidAddresses,exports.Send=Send,exports.SendFailure=SendFailure,exports.SaveSuccess=SaveSuccess,exports.SaveFailure=SaveFailure,exports.SaveToInboxSuccess=SaveToInboxSuccess,exports.SaveToInboxFailure=SaveToInboxFailure,exports.DeleteDraftSuccess=DeleteDraftSuccess,exports.DeleteDraftFailure=DeleteDraftFailure;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactAddonsCreateFragment=require("react-addons-create-fragment"),_reactAddonsCreateFragment2=_interopRequireDefault(_reactAddonsCreateFragment),_reactIntl=require("react-intl"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_compose_notifications=require("./styles/compose_notifications"),_compose_notifications2=_interopRequireDefault(_compose_notifications),_button=require("../../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_button3=require("../../../atoms/constants/button"),classNames=(0,_css2.default)(_compose_notifications2.default),LEARN_MORE_URL="https://help.yahoo.com/kb/mail/sln3353.html";
},{"../../../atoms/button.jsx":"./atoms/button","../../../atoms/constants/button":"./atoms/constants/button","./styles/compose_notifications":240,"react":"./node_modules/react/react.js","react-addons-create-fragment":"./node_modules/react-addons-create-fragment/index.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],235:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function FolderCreateSuccess(e){var r=e.folderName,a=_react2.default.createElement("strong",null,r);return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"folder.create_success",defaultMessage:"{folderName} folder created",values:{folderName:a}})}function FolderCreateFailure(e){var r=e.folderName,a=_react2.default.createElement("strong",null,r);return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"folder.create_failure",defaultMessage:"Failed creating {folderName} folder",values:{folderName:a}})}function FolderRenameSuccess(e){var r=e.newFolderName,a=e.originalFolderName,l=_react2.default.createElement("strong",null,r),t=_react2.default.createElement("strong",null,a);return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"folder.rename_success",defaultMessage:"Folder {originalFolderName} renamed to {newFolderName}",values:{newFolderName:l,originalFolderName:t}})}function FolderRenameFailure(e){var r=e.newFolderName,a=e.originalFolderName,l=_react2.default.createElement("strong",null,r),t=_react2.default.createElement("strong",null,a);return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"folder.rename_failure",defaultMessage:"Failed renaming folder {originalFolderName} to {newFolderName}",values:{newFolderName:l,originalFolderName:t}})}function FolderDeleteSuccess(e){var r=e.folderName,a=_react2.default.createElement("strong",null,r);return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"folder.delete_success",defaultMessage:"{folderName} folder deleted",values:{folderName:a}})}function FolderDeleteFailure(e){var r=e.folderName,a=_react2.default.createElement("strong",null,r);return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"folder.delete_failure",defaultMessage:"Failed deleting {folderName} folder",values:{folderName:a}})}function FolderMarkReadSuccess(e){var r=e.folderName,a=_react2.default.createElement("strong",null,r);return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"folder.mark_read_success",defaultMessage:"Folder {folderName} was marked as read",values:{folderName:a}})}function FolderMarkReadFailure(e){var r=e.folderName,a=_react2.default.createElement("strong",null,r);return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"folder.mark_read_failure",defaultMessage:"Failed marking folder {folderName} as read",values:{folderName:a}})}function FolderArchiveSuccess(e){var r=e.folderName,a=_react2.default.createElement("strong",null,r);return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"folder.archive_success",defaultMessage:"Messages in folder {folderName} were moved to archive",values:{folderName:a}})}function FolderArchiveFailure(e){var r=e.folderName,a=_react2.default.createElement("strong",null,r);return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"folder.archive_failure",defaultMessage:"Failed moving folder {folderName} messages to archive",values:{folderName:a}})}function FolderClearSuccess(e){var r=e.folderName,a=_react2.default.createElement("strong",null,r);return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"folder.clear_success",defaultMessage:"Folder {folderName} was cleared",values:{folderName:a}})}function FolderClearFailure(e){var r=e.folderName,a=_react2.default.createElement("strong",null,r);return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"folder.clear_failure",defaultMessage:"Failed clearing folder {folderName}",values:{folderName:a}})}exports.__esModule=!0,exports.FolderCreateSuccess=FolderCreateSuccess,exports.FolderCreateFailure=FolderCreateFailure,exports.FolderRenameSuccess=FolderRenameSuccess,exports.FolderRenameFailure=FolderRenameFailure,exports.FolderDeleteSuccess=FolderDeleteSuccess,exports.FolderDeleteFailure=FolderDeleteFailure,exports.FolderMarkReadSuccess=FolderMarkReadSuccess,exports.FolderMarkReadFailure=FolderMarkReadFailure,exports.FolderArchiveSuccess=FolderArchiveSuccess,exports.FolderArchiveFailure=FolderArchiveFailure,exports.FolderClearSuccess=FolderClearSuccess,exports.FolderClearFailure=FolderClearFailure;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl");
},{"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],236:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.NoInternet=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),NoInternet=exports.NoInternet=_react2.default.createClass({displayName:"NoInternet",render:function(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.no_internet",defaultMessage:"No internet connection."})}});
},{"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],237:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function MessagesMoveFailure(e){var t=e.conversations,a=e.count;return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.move_message_failure",defaultMessage:"Unable to move {conversations, select, true {{count, plural, one {conversation} other {conversations} }} false {{count, plural, one {message} other {messages} }} } to the selected folder.",values:{conversations:t,count:a}})}function MarkSpamSuccess(e){var t=e.conversations,a=e.count;return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.markSpam_success",defaultMessage:"{conversations, select, true {{count, plural, one {Conversation is} other {Conversations are} }} false {{count, plural, one {Message is} other {Messages are} }} } successfully marked as Spam",values:{conversations:t,count:a}})}function MarkSpamFailure(e){var t=e.conversations,a=e.count;return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.markSpam_failure",defaultMessage:"Unable to mark the {conversations, select, true {{count, plural, one {conversation} other {conversations} }} false {{count, plural, one {message} other {messages} }} } as Spam.",values:{conversations:t,count:a}})}function NotSpamSuccess(e){var t=e.conversations,a=e.count;return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.notSpam_success",defaultMessage:"{conversations, select, true {{count, plural, one {Conversation is} other {Conversations are} }} false {{count, plural, one {Message is} other {Messages are} }} } moved to Inbox",values:{conversations:t,count:a}})}function NotSpamFailure(e){var t=e.conversations,a=e.count;return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.notSpam_failure",defaultMessage:"Unable to move {conversations, select, true {{count, plural, one {conversation} other {conversations} }} false {{count, plural, one {message} other {messages} }} } to Inbox",values:{conversations:t,count:a}})}function ArchiveFailure(e){var t=e.conversations,a=e.count;return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.archive_failure",defaultMessage:"Unable to Archive the {conversations, select, true {{count, plural, one {conversation} other {# conversations} }} false {{count, plural, one {message} other {messages} }} }.",values:{conversations:t,count:a}})}function RestoreInboxSuccess(e){var t=e.conversations,a=e.count;return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.restore_inbox_success",defaultMessage:"{conversations, select, true {{count, plural, one {Conversation} other {# conversations} }} false {{count, plural, one {Message} other {# messages} }} } moved to Inbox",values:{conversations:t,count:a}})}function RestoreInboxFailure(e){var t=e.conversations,a=e.count;return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.restore_inbox_failure",defaultMessage:"Unable to move {conversations, select, true {{count, plural, one {conversation} other {# conversations} }} false {{count, plural, one {message} other {messages} }} } to Inbox",values:{conversations:t,count:a}})}function DeleteFailure(e){var t=e.conversations,a=e.count;return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.delete_failure",defaultMessage:"Unable to delete the {conversations, select, true {{count, plural, one {conversation} other {# conversations} }} false {{count, plural, one {message} other {# messages} }} }.",values:{conversations:t,count:a}})}function UndoMoveSuccess(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.undo_success",defaultMessage:"Undo succeeded"})}function UndoMoveFailure(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.undo_failed",defaultMessage:"Undo failed"})}function GeminiSponsoredAssetFailed(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.geminiSponsoredAssetFailed",defaultMessage:"Ad asset load failed"})}exports.__esModule=!0,exports.MessagesMoveFailure=MessagesMoveFailure,exports.MarkSpamSuccess=MarkSpamSuccess,exports.MarkSpamFailure=MarkSpamFailure,exports.NotSpamSuccess=NotSpamSuccess,exports.NotSpamFailure=NotSpamFailure,exports.ArchiveFailure=ArchiveFailure,exports.RestoreInboxSuccess=RestoreInboxSuccess,exports.RestoreInboxFailure=RestoreInboxFailure,exports.DeleteFailure=DeleteFailure,exports.UndoMoveSuccess=UndoMoveSuccess,exports.UndoMoveFailure=UndoMoveFailure,exports.GeminiSponsoredAssetFailed=GeminiSponsoredAssetFailed;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl");
},{"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],238:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_notification=require("./styles/notification"),_notification2=_interopRequireDefault(_notification),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_object=require("../../../platform/utils/object"),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_mail_constants=require("../../../platform/mail_constants"),strings=(0,_reactIntl.defineMessages)({close:{id:"notification.close",defaultMessage:"Close notification"}}),Notification=_react2.default.createClass({displayName:"Notification",contextTypes:{intl:_reactIntl.intlShape.isRequired},getDefaultProps:function(){return{sticky:!1,requireInteraction:!1,type:_mail_constants.NotificationTypes.NORMAL}},render:function(){var e=this.props,t=e.type,i=e.icon,n=e.sticky,o=(0,_css2.default)(_notification2.default,{type:t}),a=this.context.intl.formatMessage(strings.close),c=i;return c||t===_mail_constants.NotificationTypes.ADVISORY||(c=t===_mail_constants.NotificationTypes.WARNING?_fuji_icon3.Kinds.EXCLAMATION_ALT:_fuji_icon3.Kinds.CHECKMARK),_react2.default.createElement("div",{className:o.container},_react2.default.createElement("div",{className:o.innerContainer},c?_react2.default.createElement("div",{className:o.icon,role:"presentation"},_react2.default.createElement(_fuji_icon2.default,{kind:c,size:_fuji_icon3.Sizes.S,colorState:_fuji_icon3.ColorStates.INVERTED})):null,_react2.default.createElement("div",{className:o.content},this.props.children),n?null:_react2.default.createElement("div",{className:o.close},_react2.default.createElement(_fuji_icon_button2.default,{kind:_fuji_icon3.Kinds.CLOSE_MINI,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.NORMAL,title:a,role:"presentation",onClick:this.props.onClose}))))}});exports.default=Notification,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/object":"./platform/utils/object","./styles/notification":241,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],239:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function SettingsFilterSaved(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.settings_filter_saved",defaultMessage:"Message filter has been saved successfully"})}function SettingsVacationResponseSaved(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.settings_vacation_response_saved",defaultMessage:"Vacation response has been saved successfully"})}function resendConfirmEmailSucceed(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.settings_resend_confirm_succeed",defaultMessage:"Confirmation email sent."})}function resendConfirmEmailFailed(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.settings_resend_confirm_failed",defaultMessage:"Confirmation email sent failed."})}function AccountReauthSucceeded(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.settings_account_reauth_succeed",defaultMessage:"Mailbox reauthorized. Sync will begin soon."})}function AccountReauthFailed(e){var t=e.error,a=e.provider,n=e.email;switch(t){case 412:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.settings_cancel_permission",defaultMessage:"Account connection cancelled."});case 403:return _react2.default.createElement("div",{className:classNames.errorWrapper},_react2.default.createElement("div",{className:classNames.errorHeader},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.settings_different_id_header",defaultMessage:"{email} could not be added",values:{email:n}})),_react2.default.createElement("div",{className:classNames.errorBody},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.settings_different_id",defaultMessage:"You are currently signed into a different {provider}\n                        account.{nextLine}Please {sign_out} of that account and retry.",values:{provider:(0,_account.getProviderName)(a),nextLine:_react2.default.createElement("br",null),sign_out:_react2.default.createElement("a",{className:classNames.link,target:"_blank",href:_mail_constants.IMAP_SETTINGS[a].providerUrl},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.settings_sign_out",defaultMessage:"sign out"}))}})));case 503:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.provider_not_available",defaultMessage:"Yahoo cannot connect to {provider} at this time. Please try to connect your account later.",values:{provider:(0,_account.getProviderName)(a)}});case 409:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.account_conflict",defaultMessage:"This account is already connected"});default:return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.account_general_error",defaultMessage:"Unable to add mailbox. Please try again later."})}}exports.__esModule=!0,exports.SettingsFilterSaved=SettingsFilterSaved,exports.SettingsVacationResponseSaved=SettingsVacationResponseSaved,exports.resendConfirmEmailSucceed=resendConfirmEmailSucceed,exports.resendConfirmEmailFailed=resendConfirmEmailFailed,exports.AccountReauthSucceeded=AccountReauthSucceeded,exports.AccountReauthFailed=AccountReauthFailed;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_settings_notifications=require("./styles/settings_notifications"),_settings_notifications2=_interopRequireDefault(_settings_notifications),_account=require("../../../platform/utils/account"),_mail_constants=require("../../../platform/mail_constants"),classNames=(0,_css2.default)(_settings_notifications2.default);
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/account":"./platform/utils/account","./styles/settings_notifications":242,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],240:[function(require,module,exports){
module.exports={className:{default:{notificationTitle:"t_CS A_6EWk C_Z291T0t u_e69 i_6TFj",notificationSubText:"t_CS A_6EqO",button:"C_Z2aVTcY A_6EqO"}},_key:"Z4U2H9"};
},{"./src/molecules/notification/atoms/styles/atomic_compose_notifications.css":"./molecules/notification/atoms/styles/atomic_compose_notifications"}],241:[function(require,module,exports){
module.exports={className:{default:{icon:"C_52qC en_0 P_3gJOe ac_FT ab_C D_F gl_C ba_6Eor",container:"D_X k_w p_R a_3PmnJ",innerContainer:"D_F ab_C gl_C q_52qC j_1zwO34 e_dRA o_h",content:"em_N D_F P_Z2baRGn A_6EWk i_6Mbr C_Z291T0t o_h",close:"P_C04i4 ac_CI",link:"C_Z2aVTcY"},"type-NORMAL":{icon:"I_1mrWUc aw_buWz3"},"type-ADVISORY":{icon:"I_Z1Bab0a aw_Z1vTr7U"},"type-WARNING":{icon:"I_Z9gXar aw_TD3i8"}},_key:"1HK58N"};
},{"./src/molecules/notification/atoms/styles/atomic_notification.css":"./molecules/notification/atoms/styles/atomic_notification"}],242:[function(require,module,exports){
module.exports={className:{default:{link:"C_Z2aVTcY Q_dRA u_e69 r_P",errorWrapper:"t_l",errorHeader:"u_e69 U_eo6",errorBody:"A_6EqO i_6Fd5"}},_key:"2bqA1X"};
},{"./src/molecules/notification/atoms/styles/atomic_settings_notifications.css":"./molecules/notification/atoms/styles/atomic_settings_notifications"}],243:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function UnsubscribeMultipleListsCleaned(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.unsub_lists_cleaned",defaultMessage:"Enjoy your cleaner Inbox! Glad that was useful. New recommendations tomorrow!"})}function UnsubscribeSingleListCleaned(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.unsub_list_cleaned",defaultMessage:"Enjoy your cleaner Inbox! We'll have new recommendations tomorrow."})}function UnsubscribeDialogClosed(){return _react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.unsub_dialog_closed",defaultMessage:"Great! Glad you still like those emails. We'll have new recommendations tomorrow."})}exports.__esModule=!0,exports.UnsubscribeMultipleListsCleaned=UnsubscribeMultipleListsCleaned,exports.UnsubscribeSingleListCleaned=UnsubscribeSingleListCleaned,exports.UnsubscribeDialogClosed=UnsubscribeDialogClosed;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl");
},{"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],244:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.ExceptionOccurred=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_button=require("../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_button3=require("../../atoms/constants/button"),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_exception_notifications=require("./styles/exception_notifications"),_exception_notifications2=_interopRequireDefault(_exception_notifications),classNames=(0,_css2.default)(_exception_notifications2.default),ExceptionOccurred=exports.ExceptionOccurred=_react2.default.createClass({displayName:"ExceptionOccurred",handleSplunkSearch:function(){window.open(this.props.splunkUrl,"_blank")},render:function(){return _react2.default.createElement("div",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.exception_occurred",defaultMessage:"Javascript exception occurred."}),"",_react2.default.createElement(_button2.default,{kind:_button3.Kinds.CHROMELESS,"data-test-id":"search-btn",onClick:this.handleSplunkSearch},_react2.default.createElement("span",{className:classNames.button},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.exception_run_diagnostics",defaultMessage:"Run diagnostics"}))))}});
},{"../../atoms/button.jsx":"./atoms/button","../../atoms/constants/button":"./atoms/constants/button","./styles/exception_notifications":248,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],245:[function(require,module,exports){
"use strict";function _interopRequireWildcard(i){if(i&&i.__esModule)return i;var t={};if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t.default=i,t}function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function getRole(i){var t=i.type,o=i.requireInteraction;return o?"alertdialog":t===_mail_constants.NotificationTypes.NORMAL?"status":"alert"}function getStateFromStores(i){return{notification:i.getStore(_notification4.default).get(),multiTask:i.getStore(_user_preferences2.default).getMultiTaskModeSetting()}}exports.__esModule=!0;var _extends=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(i[e]=o[e])}return i},_NOTIF_ID_TO_COMPONEN;exports.getStateFromStores=getStateFromStores;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleAddonsReact=require("fluxible-addons-react"),_reactAddonsCreateFragment=require("react-addons-create-fragment"),_reactAddonsCreateFragment2=_interopRequireDefault(_reactAddonsCreateFragment),_notification=require("./styles/notification"),_notification2=_interopRequireDefault(_notification),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_notification3=require("../../stores/notification"),_notification4=_interopRequireDefault(_notification3),_user_preferences=require("../../stores/user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_layer=require("../../atoms/layer.jsx"),_layer2=_interopRequireDefault(_layer),_actions=require("./actions"),_notification5=require("./atoms/notification.jsx"),_notification6=_interopRequireDefault(_notification5),_mail_constants=require("../../platform/mail_constants"),_types=require("../../types"),_constants=require("../../platform/rapid_client/constants"),_general_notifications=require("./atoms/general_notifications.jsx"),GeneralNotifications=_interopRequireWildcard(_general_notifications),_compose_notifications=require("./atoms/compose_notifications.jsx"),ComposeNotifications=_interopRequireWildcard(_compose_notifications),_exception_notifications=require("./exception_notifications.jsx"),ExceptionNotifications=_interopRequireWildcard(_exception_notifications),_actionable_compose_notifications=require("./actionable_compose_notifications"),ActionableComposeNotifications=_interopRequireWildcard(_actionable_compose_notifications),_folder_notifications=require("./atoms/folder_notifications.jsx"),FolderNotifications=_interopRequireWildcard(_folder_notifications),_message_notifications=require("./atoms/message_notifications.jsx"),MessageNotifications=_interopRequireWildcard(_message_notifications),_attachment_notifications=require("./atoms/attachment_notifications.jsx"),AttachmentNotifications=_interopRequireWildcard(_attachment_notifications),_notifications=require("../timezone_check/notifications"),TimezoneNotifications=_interopRequireWildcard(_notifications),_message_undo_notifications=require("./message_undo_notifications"),MessageUndoNotifications=_interopRequireWildcard(_message_undo_notifications),_async_task=require("../../apps/mail/controller_views/async_task"),_async_task2=_interopRequireDefault(_async_task),_settings_notifications=require("./atoms/settings_notifications.jsx"),SettingsNotifications=_interopRequireWildcard(_settings_notifications),_unsubscribe_notifications=require("./atoms/unsubscribe_notifications.jsx"),UnsubscribeNotifications=_interopRequireWildcard(_unsubscribe_notifications),NOTIF_ID_TO_COMPONENT=(_NOTIF_ID_TO_COMPONEN={},_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.ATTACHMENT_VIRUS_DETECTED]=AttachmentNotifications.InfectedFiles,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.COMPOSE_NO_ADDRESS_DETECTED]=ComposeNotifications.NoAddress,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.COMPOSE_RECIPIENT_LIMIT_EXCEEDED]=ComposeNotifications.MaxRecipientsExceeded,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.COMPOSE_ADDRESSING_FAILED]=ComposeNotifications.InvalidAddresses,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.COMPOSE_SEND]=ComposeNotifications.Send,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.COMPOSE_SEND_SUCCEEDED]=ActionableComposeNotifications.SendSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.COMPOSE_SEND_FAILED]=ComposeNotifications.SendFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.INLINE_IMAGE_LOAD_FAILURE]=ActionableComposeNotifications.InlineImgFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.SAVE_DRAFT_SUCCESS]=ComposeNotifications.SaveSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.SAVE_DRAFT_FAILURE]=ComposeNotifications.SaveFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.SAVE_TO_INBOX_SUCCESS]=ComposeNotifications.SaveToInboxSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.SAVE_TO_INBOX_FAILURE]=ComposeNotifications.SaveToInboxFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.DELETE_DRAFT_SUCCESS]=ComposeNotifications.DeleteDraftSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.DELETE_DRAFT_FAILURE]=ComposeNotifications.DeleteDraftFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.ARCHIVE_FOLDER_SUCCEEDED]=FolderNotifications.FolderArchiveSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.ARCHIVE_FOLDER_FAILED]=FolderNotifications.FolderArchiveFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.CREATE_FOLDER_SUCCEEDED]=FolderNotifications.FolderCreateSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.CREATE_FOLDER_FAILED]=FolderNotifications.FolderCreateFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.RENAME_FOLDER_SUCCEEDED]=FolderNotifications.FolderRenameSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.RENAME_FOLDER_FAILED]=FolderNotifications.FolderRenameFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.DELETE_FOLDER_SUCCEEDED]=FolderNotifications.FolderDeleteSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.DELETE_FOLDER_FAILED]=FolderNotifications.FolderDeleteFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.MARK_READ_FOLDER_SUCCEEDED]=FolderNotifications.FolderMarkReadSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.MARK_READ_FOLDER_FAILED]=FolderNotifications.FolderMarkReadFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.CLEAR_FOLDER_SUCCEEDED]=FolderNotifications.FolderClearSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.CLEAR_FOLDER_FAILED]=FolderNotifications.FolderClearFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.BULK_PROGRESS]=_async_task2.default,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.OFFLINE]=GeneralNotifications.NoInternet,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.TIMEZONE_CHANGE_REQUESTED]=TimezoneNotifications.TimezoneChangeRequestedNotification,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.TIMEZONE_CHANGE_SUCCESS]=TimezoneNotifications.TimezoneChangeSuccessNotification,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.TIMEZONE_CHANGE_FAILURE]=TimezoneNotifications.TimezoneChangeFailureNotification,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.MESSAGES_MARK_SPAM_SUCCEEDED]=MessageNotifications.MarkSpamSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.MESSAGES_MARK_SPAM_FAILED]=MessageNotifications.MarkSpamFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.MESSAGES_MARK_NOT_SPAM_SUCCEEDED]=MessageNotifications.NotSpamSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.MESSAGES_MARK_NOT_SPAM_FAILED]=MessageNotifications.NotSpamFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.MESSAGES_MOVE_SUCCEEDED]=MessageUndoNotifications.MessagesMoveSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.MESSAGES_MOVE_FAILED]=MessageNotifications.MessagesMoveFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.ARCHIVE_MESSAGES_SUCCESS]=MessageUndoNotifications.ArchiveSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.ARCHIVE_MESSAGES_FAILURE]=MessageNotifications.ArchiveFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.RESTORE_INBOX_MESSAGES_SUCCESS]=MessageNotifications.RestoreInboxSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.RESTORE_INBOX_MESSAGES_FAILURE]=MessageNotifications.RestoreInboxFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.DELETE_MESSAGES_SUCCESS]=MessageUndoNotifications.DeleteSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.DELETE_MESSAGES_FAILURE]=MessageNotifications.DeleteFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.UNDO_MOVE_SUCCESS]=MessageNotifications.UndoMoveSuccess,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.UNDO_MOVE_FAILURE]=MessageNotifications.UndoMoveFailure,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.GEMINI_SPONSORED_ASSET_FAILED]=MessageNotifications.GeminiSponsoredAssetFailed,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.UNSUBSCRIBE_MULTIPLE_LISTS_CLEANED]=UnsubscribeNotifications.UnsubscribeMultipleListsCleaned,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.UNSUBSCRIBE_SINGLE_LIST_CLEANED]=UnsubscribeNotifications.UnsubscribeSingleListCleaned,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.UNSUBSCRIBE_DIALOG_CLOSED]=UnsubscribeNotifications.UnsubscribeDialogClosed,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.SETTINGS_SAVE_FILTERS_SUCCEEDED]=SettingsNotifications.SettingsFilterSaved,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.SETTINGS_SAVE_VACATION_PREFERENCES_SUCCEEDED]=SettingsNotifications.SettingsVacationResponseSaved,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.RESEND_CONFIRM_EMAIL_SUCCEEDED]=SettingsNotifications.resendConfirmEmailSucceed,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.RESEND_CONFIRM_EMAIL_FAILED]=SettingsNotifications.resendConfirmEmailFailed,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.REAUTH_ACCOUNT_SUCCEEDED]=SettingsNotifications.AccountReauthSucceeded,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.REAUTH_ACCOUNT_FAILED]=SettingsNotifications.AccountReauthFailed,_NOTIF_ID_TO_COMPONEN[_mail_constants.NotificationIds.EXCEPTION_OCCURRED]=ExceptionNotifications.ExceptionOccurred,_NOTIF_ID_TO_COMPONEN),NotificationWrapper=_react2.default.createClass({displayName:"NotificationWrapper",contextTypes:{executeAction:_react.PropTypes.func,config:_react.PropTypes.object},shouldComponentUpdate:function(i){return i.notification!==this.props.notification||i.appName!==this.props.appName},handleNotificationClose:function(i){i.messageId===_mail_constants.NotificationIds.UNSUBSCRIBE_DIALOG_CLOSED||i.messageId===_mail_constants.NotificationIds.UNSUBSCRIBE_SINGLE_LIST_CLEANED||i.messageId===_mail_constants.NotificationIds.UNSUBSCRIBE_MULTIPLE_LISTS_CLEANED?this.context.executeAction(_actions.closeNotification,{notification:i,i13nModel:{mKey:_constants.MKEYS.UNSUB_ALL_DONE,sec:_constants.SEC_VALUES.UNSUB_PANE}}):this.context.executeAction(_actions.closeNotification,{notification:i})},wrapInModal:function(i,t){return this.props.notification.modal?_react2.default.createElement("div",{className:i.modal,"data-test-id":"modal",role:"presentation"},t):t},render:function(){var i=this.props,t=i.notification,o=i.appName,e=i.multiTask,_=this.context.config.conversations,a={alert:_react2.default.createElement(_layer2.default,{role:"alert"}),status:_react2.default.createElement(_layer2.default,{role:"status"})};if(!t)return _react2.default.createElement("div",null,(0,_reactAddonsCreateFragment2.default)(a));var n=(0,_css2.default)(_notification2.default,{appName:o,multiTask:e}),s=NOTIF_ID_TO_COMPONENT[t.messageId];if(!s)throw new Error("Could not find a notification component for "+t.messageId);var c=this.wrapInModal(n,_react2.default.createElement("div",{className:n.alert,"data-test-id":"notifications"},_react2.default.createElement(_notification6.default,_extends({onClose:this.handleNotificationClose.bind(this,t)},t),_react2.default.createElement(s,_extends({conversations:_},t.data,{onClose:this.handleNotificationClose.bind(this,t)}))))),N=getRole(t);return a[N]=_react2.default.createElement(_layer2.default,{role:N},c),_react2.default.createElement("div",null,(0,_reactAddonsCreateFragment2.default)(a))}});exports.default=(0,_fluxibleAddonsReact.connectToStores)(NotificationWrapper,[_notification4.default,_user_preferences2.default],getStateFromStores);
},{"../../apps/mail/controller_views/async_task":20,"../../atoms/layer.jsx":"./atoms/layer","../../platform/mail_constants":"./platform/mail_constants","../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../stores/notification":341,"../../stores/user_preferences":"./stores/user_preferences","../../types":"./types","../timezone_check/notifications":266,"./actionable_compose_notifications":231,"./actions":232,"./atoms/attachment_notifications.jsx":233,"./atoms/compose_notifications.jsx":234,"./atoms/folder_notifications.jsx":235,"./atoms/general_notifications.jsx":236,"./atoms/message_notifications.jsx":237,"./atoms/notification.jsx":238,"./atoms/settings_notifications.jsx":239,"./atoms/unsubscribe_notifications.jsx":243,"./exception_notifications.jsx":244,"./message_undo_notifications":246,"./styles/notification":249,"fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","react":"./node_modules/react/react.js","react-addons-create-fragment":"./node_modules/react-addons-create-fragment/index.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js"}],246:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.MessagesMoveSuccess=exports.ArchiveSuccess=exports.DeleteSuccess=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_undo_button=require("./undo_button"),_undo_button2=_interopRequireDefault(_undo_button),_folder_label=require("../../atoms/folder_label"),_folder_label2=_interopRequireDefault(_folder_label),_folder=require("../../platform/utils/folder"),DeleteSuccess=exports.DeleteSuccess=_react2.default.createClass({displayName:"DeleteSuccess",render:function(){var e=this.props,t=e.conversations,a=e.count,o=e.undoPayload,s=e.permanent,r=e.onClose;return _react2.default.createElement("div",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.delete_success",defaultMessage:"{conversations, select, true {{count, plural, one {Conversation} other {# conversations} }} false {{count, plural, one {Message} other {# messages} }} } deleted.",values:{conversations:t,count:a}}),"",!s&&o&&_react2.default.createElement(_undo_button2.default,{undoPayload:o,onClose:r}))}}),ArchiveSuccess=exports.ArchiveSuccess=_react2.default.createClass({displayName:"ArchiveSuccess",render:function(){var e=this.props,t=e.conversations,a=e.count,o=e.undoPayload,s=e.onClose;return _react2.default.createElement("div",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.archive_success",defaultMessage:"{conversations, select, true {{count, plural, one {Conversation} other {# conversations} }} false {{count, plural, one {Message} other {# messages} }} } moved to Archive.",values:{conversations:t,count:a}}),"",_react2.default.createElement(_undo_button2.default,{undoPayload:o,onClose:s}))}}),MessagesMoveSuccess=exports.MessagesMoveSuccess=_react2.default.createClass({displayName:"MessagesMoveSuccess",render:function(){var e=this.props,t=e.folder,a=e.count,o=e.conversations,s=e.undoPayload,r=e.onClose;return _react2.default.createElement("div",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"notification.move_message_success",defaultMessage:"{conversations, select, true {{count, plural, one {Conversation} other {# conversations} }} false {{count, plural, one {Message} other {# messages} }} } moved to {destinationFolderName}.",values:{destinationFolderName:_react2.default.createElement("strong",null,_react2.default.createElement(_folder_label2.default,{folderDisplayType:(0,_folder.getFolderDisplayType)(t),name:t.name})),conversations:o,count:a}}),"",_react2.default.createElement(_undo_button2.default,{undoPayload:s,onClose:r}))}});
},{"../../atoms/folder_label":"./atoms/folder_label","../../platform/utils/folder":"./platform/utils/folder","./undo_button":250,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],247:[function(require,module,exports){
module.exports={className:{default:{link:"C_Z2aVTcY r_P",notificationTitle:"t_CS A_6EWk C_Z291T0t u_e69 i_6TFj",notificationSubText:"t_CS A_6EqO"}},_key:"Zimn2X"};
},{"./src/molecules/notification/styles/atomic_actionable_compose_notifications.css":"./molecules/notification/styles/atomic_actionable_compose_notifications"}],248:[function(require,module,exports){
module.exports={className:{default:{button:"C_Z2aVTcY A_6EWk"}},_key:"1iekj1"};
},{"./src/molecules/notification/styles/atomic_exception_notifications.css":"./molecules/notification/styles/atomic_exception_notifications"}],249:[function(require,module,exports){
module.exports={className:{default:{alert:"p_f T_7kKt L_0 R_0 H_0 Z_djS t_C jn_1HWwRx D_F gl_C",modal:"p_f T_0 R_0 B_0 L_0 Z_3mRud q_Z26U5rI",undo:"C_Z2aVTcY A_6EWk"},"appName-COMPOSE_APP":{alert:"T_6NIX"},multiTask:{alert:"T_7jIs"}},_key:"Z1jurjF"};
},{"./src/molecules/notification/styles/atomic_notification.css":"./molecules/notification/styles/atomic_notification"}],250:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_button=require("../../atoms/constants/button"),_button2=require("../../atoms/button"),_button3=_interopRequireDefault(_button2),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_notification=require("./styles/notification"),_notification2=_interopRequireDefault(_notification),_utils=require("../../platform/utils"),_constants=require("../../platform/rapid_client/constants"),classNames=(0,_css2.default)(_notification2.default),UndoButton=_react2.default.createClass({displayName:"UndoButton",contextTypes:{executeAction:_react.PropTypes.func},undo:function(t){var e=this.props.undoPayload,n=e.undoMap,o=e.actionCreator,a=e.destinationFolderType,r={mKey:_constants.MKEYS.UNDO_ACTION,sec:_constants.SEC_VALUES.MSG_LIST_NOTIFICATION,interactionType:(0,_utils.getInteractionFromEvent)(t)};this.props.onClose(),this.context.executeAction(o,{undoMap:n,i13nModel:r,destinationFolderType:a})},render:function(){return _react2.default.createElement(_button3.default,{"aria-hidden":!0,"data-test-id":"undo-button",kind:_button.Kinds.CHROMELESS,onClick:this.undo},_react2.default.createElement("span",{className:classNames.undo},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"notifications.undo",defaultMessage:"Undo"})))}});exports.default=UndoButton,module.exports=exports.default;
},{"../../atoms/button":"./atoms/button","../../atoms/constants/button":"./atoms/constants/button","../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../platform/utils":"./platform/utils","./styles/notification":249,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],251:[function(require,module,exports){
"use strict";function updateOnlineStatus(t,n){var a=n.online;t.dispatch(_react_action_constants.mail.ONLINE_STATUS_CHANGED,{online:a})}exports.__esModule=!0,exports.updateOnlineStatus=updateOnlineStatus;var _react_action_constants=require("../../platform/react_action_constants");
},{"../../platform/react_action_constants":"./platform/react_action_constants"}],252:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_http_transport=require("../../platform/http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_actions=require("./actions"),_ping=require("./ping"),POLLING_INTERVAL=1e4,OfflineChecker=_react2.default.createClass({displayName:"OfflineChecker",contextTypes:{executeAction:_react.PropTypes.func},getInitialState:function(){return{checking:!1}},shouldComponentUpdate:function(){return!1},componentDidMount:function(){window.addEventListener("offline",this.handleOfflineEvent),window.addEventListener("online",this.handleOnlineEvent),_http_transport2.default.on("error",this.handleNetworkRequestFailure),_http_transport2.default.on("success",this.handleNetworkRequestSuccess)},componentWillUnmount:function(){window.removeEventListener("offline",this.handleOfflineEvent),window.removeEventListener("online",this.handleOnlineEvent),_http_transport2.default.off("error",this.handleNetworkRequestFailure),_http_transport2.default.off("success",this.handleNetworkRequestSuccess)},handleOfflineEvent:function(){this.state.checking&&this.stopChecking(),this.setOffline()},handleOnlineEvent:function(){this.startChecking()},handleNetworkRequestFailure:function(e){e.url!==_ping.STATUS_PAGE_URL&&this.startChecking()},handleNetworkRequestSuccess:function(){this.state.checking&&(this.stopChecking(),this.setOnline())},check:function(){var e=this;(0,_ping.ping)().then(function(){e.stopChecking(),e.setOnline()},function(){e.state.checking&&(e.setOffline(),setTimeout(e.check,POLLING_INTERVAL))})},startChecking:function(){this.state.checking||(this.setState({checking:!0}),this.check())},stopChecking:function(){this.setState({checking:!1})},setOnline:function(){this.context.executeAction(_actions.updateOnlineStatus,{online:!0})},setOffline:function(){this.context.executeAction(_actions.updateOnlineStatus,{online:!1})},render:function(){return null}});exports.default=OfflineChecker,module.exports=exports.default;
},{"../../platform/http_transport":"./platform/http_transport","./actions":251,"./ping":253,"react":"./node_modules/react/react.js"}],253:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function ping(){return new _http_transport2.default("HEAD",STATUS_PAGE_URL,{timeout:CHECK_TIMEOUT}).send()}exports.__esModule=!0,exports.STATUS_PAGE_URL=void 0,exports.ping=ping;var _http_transport=require("../../platform/http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_assets=require("../../platform/assets"),CHECK_TIMEOUT=9e3,STATUS_PAGE_URL=exports.STATUS_PAGE_URL=(0,_assets.getURL)("/html/status.html");
},{"../../platform/assets":"./platform/assets","../../platform/http_transport":"./platform/http_transport"}],254:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleRouter=require("fluxible-router"),Pager=_react2.default.createClass({displayName:"Pager",contextTypes:{executeAction:_react.PropTypes.func},shouldComponentUpdate:function(e){return this.props.nextPage!==e.nextPage&&e.nextPage},componentDidUpdate:function(){var e=this.props.nextPage;this.context.executeAction(_fluxibleRouter.navigateAction,{routeName:e.route.name,params:e.route.params,query:e.route.query,page:e})},render:function(){return null}});exports.default=Pager,module.exports=exports.default;
},{"fluxible-router":"./node_modules/fluxible-router/index.js","react":"./node_modules/react/react.js"}],255:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_types=require("../../types"),_reactIntl=require("react-intl"),_search_box=require("../search_box"),_search_box2=_interopRequireDefault(_search_box),_search=require("../../actions/search"),_route=require("../../platform/utils/route"),_keyboard_shortcut_group=require("../keyboard_shortcut_manager/keyboard_shortcut_group.jsx"),_keyboard_shortcut_group2=_interopRequireDefault(_keyboard_shortcut_group),_keyboard_shortcuts=require("../../platform/keyboard_shortcuts"),_keyboard_shortcut_groups=require("../../platform/keyboard_shortcut_groups"),shortcuts=(0,_keyboard_shortcuts.createShortcutGroup)({group:_keyboard_shortcut_groups.General,keys:{focusOnSearch:{key:"S,/",description:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.focus_search",defaultMessage:"Search"}))}}}),FR_CODE="uh-mail-web",FR2_CODE="p:ml,m:sb",Search=_react2.default.createClass({displayName:"Search",contextTypes:{getStore:_react2.default.PropTypes.func.isRequired,executeAction:_react.PropTypes.func,navigateTo:_react2.default.PropTypes.func.isRequired},getDefaultProps:function(){return{searchQuery:{},suggestionsCache:{}}},getInitialState:function(){var e=this.props.searchQuery,t=e.keyword,r=void 0===t?"":t;return{suggestionsQuery:r}},handleSearchSubmit:function(e){var t=e.query,r=e.i13nModel,o=(0,_route.buildSearchRouteFromQuery)(t);o||(o=(0,_route.buildSearchRouteFromQuery)({accountIds:this.props.accountList.map(function(e){return e.id})})),this.context.navigateTo({route:o,i13nModel:r})},handleSearchChange:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.suggestionsKeyword,a=void 0===o?"":o;this.setState({suggestionsQuery:a||e},function(){t.context.executeAction(_search.requestSuggestions,{query:t.state.suggestionsQuery})})},handleWebSearch:function(e){var t=encodeURIComponent(e),r=encodeURIComponent(FR_CODE),o=encodeURIComponent(FR2_CODE),a="https://search.yahoo.com/search?p="+t+"&fr="+r+"&fr2="+o;window.open(a,"_blank")},focusOnSearch:function(e){e.preventDefault(),this.refs.searchBox.focus()},render:function(){var e=this.state.suggestionsQuery,t=this.props.suggestionsCache[e]||[],r=this.props.importantContacts||[];return _react2.default.createElement(_keyboard_shortcut_group2.default,{keys:[shortcuts.focusOnSearch(this.focusOnSearch)]},_react2.default.createElement(_search_box2.default,_extends({},this.props,{suggestions:t,importantContacts:r,onSearchSubmit:this.handleSearchSubmit,onSearchChange:this.handleSearchChange,onWebSearchSubmit:this.handleWebSearch,ref:"searchBox"})))}});exports.default=Search,module.exports=exports.default;
},{"../../actions/search":11,"../../platform/keyboard_shortcut_groups":"./platform/keyboard_shortcut_groups","../../platform/keyboard_shortcuts":"./platform/keyboard_shortcuts","../../platform/utils/route":"./platform/utils/route","../../types":"./types","../keyboard_shortcut_manager/keyboard_shortcut_group.jsx":"./molecules/keyboard_shortcut_manager/keyboard_shortcut_group","../search_box":256,"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],256:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.PILL_TYPES=exports.strings=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},_suggestionTypeRapidK,_reactIntl=require("react-intl"),_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_merge=require("react-atomic-css/merge"),_merge2=_interopRequireDefault(_merge),_search_box=require("./styles/search_box"),_search_box2=_interopRequireDefault(_search_box),_auto_suggest_contact=require("../compose/styles/auto_suggest_contact"),_auto_suggest_contact2=_interopRequireDefault(_auto_suggest_contact),_fuji_icon_button=require("../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_types=require("../../types"),_mail_constants=require("../../platform/mail_constants"),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),_suggestions=require("../../platform/utils/suggestions"),_account=require("../../platform/utils/account"),_overlay=require("../../atoms/overlay.jsx"),_overlay2=_interopRequireDefault(_overlay),_suggestion_item=require("../../atoms/suggestion_item.jsx"),_suggestion_item2=_interopRequireDefault(_suggestion_item),_advanced_search_button=require("../../atoms/advanced_search_button.jsx"),_advanced_search_button2=_interopRequireDefault(_advanced_search_button),_lazy_component=require("../../atoms/lazy_component"),_fuji_icon=require("../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../atoms/constants/fuji_icon"),_list=require("../../platform/utils/list"),_corners=require("../../atoms/constants/corners"),_folder=require("../../platform/utils/folder"),_string=require("../../platform/utils/string"),_reactYPills=require("react-y-pills"),_object=require("../../platform/utils/object"),_invariant=require("../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_pill=require("../../atoms/pill.jsx"),_pill2=_interopRequireDefault(_pill),_getEventKey=require("react-dom/lib/getEventKey"),_getEventKey2=_interopRequireDefault(_getEventKey),_actions=require("../../apps/mail/actions"),_utils=require("../../platform/utils/"),_constants=require("../../platform/rapid_client/constants"),_popover_content=require("../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover_container=require("../../atoms/popover/popover_container.jsx"),_popover_container2=_interopRequireDefault(_popover_container),_popover_anchor=require("../../atoms/popover/popover_anchor.jsx"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_popover=require("../../atoms/constants/popover"),_strings=require("../../molecules/advanced_search_pane/atoms/strings"),_strings2=_interopRequireDefault(_strings),pillClassNames=(0,_css2.default)(_auto_suggest_contact2.default),strings=exports.strings=(0,_reactIntl.defineMessages)({search_button_title:{id:"search.search_button_title",defaultMessage:"Search"},search_placeholder:{id:"search.search_placeholder",defaultMessage:"Find messages, documents, photos or people"},search_keyword_placeholder:{id:"search.keyword_placeholder",defaultMessage:"Add keywords"},suggestions_available:{id:"search.suggestions_available",defaultMessage:"{suggestionsNum, plural,\n                            =0 {No suggestions are available.}\n                            one {# suggestion is available.}\n                            other {# suggestions are available. Use up and down arrows to select.}\n                        }"}}),SEARCH_HEADER_SEC=_constants.SEC_VALUES.HEADER_SEARCH,suggestionTypeRapidKey=(_suggestionTypeRapidK={},_suggestionTypeRapidK[_mail_constants.SuggestionType.PERSON]="P",_suggestionTypeRapidK[_mail_constants.SuggestionType.KEYWORD]="K",_suggestionTypeRapidK[_mail_constants.SuggestionType.WEB_SEARCH]="W",_suggestionTypeRapidK),PILL_TYPES=exports.PILL_TYPES=(0,_object.mirrorKeys)(["CONTACT","FOLDER"]),SearchBox=_react2.default.createClass({displayName:"SearchBox",contextTypes:{config:_react.PropTypes.object,executeAction:_react.PropTypes.func,intl:_reactIntl.intlShape.isRequired},getInitialState:function(){var e=this.props.searchQuery,t=e.keyword,a=void 0===t?"":t,s=e.name,n=void 0===s?"":s,i=e.emailAddresses,r=void 0===i?[]:i,o=e.accountIds,l=void 0===o?[]:o,c=e.folders,u=void 0===c?[]:c,d=l&&1===l.length,_=d&&l[0]||"",h=u[0],p=void 0===h?"":h;return{inputValue:a,pillContact:{name:n,emailAddresses:r,type:PILL_TYPES.CONTACT},activeSuggestion:null,showInputHint:!1,showAdvancedSearchPane:!1,searchBoxDimensions:null,pillFolder:{accountId:_,folderId:p,type:PILL_TYPES.FOLDER}}},getDefaultProps:function(){return{suggestions:[],importantContacts:[],suggestionsQuery:"",searchQuery:{},onSearchChange:function(){},showSearchBadge:!1}},componentDidMount:function(){var e=this.refs.searchField;if(e){var t=_reactDom2.default.findDOMNode(e),a=t.getBoundingClientRect();this.setState({searchBoxDimensions:a})}},componentWillReceiveProps:function(e){var t=e.searchQuery,a=e.isWindowResizingDone,s=this.props,n=s.searchQuery,i=s.onSearchChange,r=(0,_list.convertSearchQueryToListId)(n),o=(0,_list.convertSearchQueryToListId)(t),l=t.accountIds,c=l&&1===l.length;if(r!==o&&this.setState({inputValue:t.keyword,pillContact:{name:t.name,emailAddresses:t.emailAddresses,type:PILL_TYPES.CONTACT},pillFolder:{accountId:c&&l[0]||"",folderId:t.folders&&t.folders[0]||"",type:PILL_TYPES.FOLDER}},i(t.keyword,{suggestionsKeyword:""})),a){var u=_reactDom2.default.findDOMNode(this.refs.searchField).getBoundingClientRect();this.setState({showAdvancedSearchPane:!1,searchBoxDimensions:u})}},handleSearchFocus:function(e){this.context.executeAction(_actions.handleSearchBarFocus,{i13nModel:{mKey:_constants.MKEYS.SEARCH_BAR,sec:SEARCH_HEADER_SEC,interactionType:(0,_utils.getInteractionFromEvent)(e)}}),this.props.onFocus&&this.props.onFocus(e)},handleBasicSearchSubmit:function(e){this.handleSearchSubmit({i13nModel:{mKey:_constants.MKEYS.SEARCH_BUTTON,interactionType:(0,_utils.getInteractionFromEvent)(e)}})},handleAdvancedSearchSubmit:function(e){this.handleSearchSubmit({i13nModel:{mKey:_constants.MKEYS.ADVANCED_SEARCH_BUTTON,interactionType:(0,_utils.getInteractionFromEvent)(e)}})},handleSearchSubmit:function(e){var t=this,a=this.state,s=a.pillContact,n=a.pillFolder,i=a.inputValue,r={emailAddresses:s.emailAddresses,name:s.name,keyword:i};n.accountId&&Object.assign(r,{accountIds:[n.accountId]}),n.folderId&&Object.assign(r,{folders:[n.folderId]}),this.setState({showInputHint:!1,showAdvancedSearchPane:!1},function(){t.props.onSearchSubmit({query:r,i13nModel:Object.assign({sec:SEARCH_HEADER_SEC,mKeyGroup:_constants.MKEY_GROUPS.search},e.i13nModel)})}),document.activeElement&&document.activeElement.blur()},handleSearchChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.suggestionsKeyword,s=void 0===a?"":a,n=t.folders,i=t.accountIds,r=this.props.onSearchChange,o={inputValue:e,showInputHint:!0};n&&Object.assign(o,{pillFolder:{accountId:"",folderId:n[0]||"",type:PILL_TYPES.FOLDER}}),i&&Object.assign(o,{pillFolder:{accountId:i[0]||"",folderId:"",type:PILL_TYPES.FOLDER}}),this.setState(o,function(){r(e,{suggestionsKeyword:s})})},handleWebSearch:function(){var e=this.state.inputValue;this.props.onWebSearchSubmit(e)},handleSearchSuggestionSelect:function(e){var t=this,a=this.getSuggestions(),s=this.state,n=s.pillFolder,i=s.inputValue;if(e===_mail_constants.SuggestionType.WEB_SEARCH)return void this.handleWebSearch();var r=a[e-1],o=a.map(function(e){return suggestionTypeRapidKey[e.type]}),l=a.map(function(e){switch(e.type){case _mail_constants.SuggestionType.PERSON:var a=t.suggestionValue(e),s=a.name;return s;case _mail_constants.SuggestionType.KEYWORD:var n=e.name;return n;default:(0,_invariant2.default)(!1,"All suggestion type must be handled here.")}}),c={mKey:r.type===_mail_constants.SuggestionType.PERSON?_constants.MKEYS.SEARCH_PEOPLE_SUGGEST:_constants.MKEYS.SEARCH_KWRD_SUGGEST,sec:SEARCH_HEADER_SEC,mKeyGroup:_constants.MKEY_GROUPS.search,actionData:{suggPos:e,prefix:i,suggType:o,suggVal:l}},u={};switch(n.accountId&&(u=_extends({},u,{accountIds:[n.accountId]})),n.folderId&&(u=_extends({},u,{folders:[n.folderId]})),r.type){case _mail_constants.SuggestionType.PERSON:var d=this.suggestionValue(r),_=d.emailAddresses,h=d.name;u=_extends({},u,{emailAddresses:_,name:h}),this.props.onSearchSubmit({query:u,i13nModel:c}),this.setState({pillContact:{name:h,emailAddresses:_},activeSuggestion:null,inputValue:""});break;case _mail_constants.SuggestionType.KEYWORD:var p=r.name;u=_extends({},u,{keyword:p}),this.props.onSearchSubmit({query:u,i13nModel:c}),this.setState({activeSuggestion:null,inputValue:""});break;default:(0,_invariant2.default)(!1,"All suggestion type must be handled here.")}},handleAdvancedSearchKeyDown:function(e){switch((0,_getEventKey2.default)(e)){case"Escape":this.setState({showAdvancedSearchPane:!1});break;case"Enter":(this.state.inputValue||this.state.pillFolder.accountId||this.state.pillFolder.folderId)&&this.handleAdvancedSearchSubmit(e);break;case"Tab":e.preventDefault()}},isCursorEndOfInput:function(e){var t=e.target.selectionEnd,a=this.state.inputValue;return t===a.length},handleKeydown:function(e){var t=void 0,a=this.getSuggestions();switch(e.key){case"Enter":this.handleBasicSearchSubmit(e);break;case"ArrowUp":case"ArrowDown":break;case"ArrowRight":if(this.isCursorEndOfInput(e)&&a&&a[0]){var s=this.suggestionValue(a[0]),n=s.name;this.setState({inputValue:n||this.state.inputValue,activeSuggestion:null})}break;case"Tab":!this.hasPillContact()&&a&&a[0]&&(this.handleSearchSuggestionSelect(1),e.preventDefault());break;case"Escape":this.setState({activeSuggestion:null});break;case"Backspace":var i=this.getPills();if(t={inputValue:this.getTypeaheadDisplayText(),activeSuggestion:null},""===this.state.inputValue&&i.length){var r=i[i.length-1];switch(r.type){case PILL_TYPES.FOLDER:t.pillFolder={};break;case PILL_TYPES.CONTACT:t.pillContact={};break;default:(0,_invariant2.default)(!1,"all pill types should be handled here")}}this.setState(t);break;default:this.setState({inputValue:this.getTypeaheadDisplayText(),activeSuggestion:null})}},renderSuggestion:function(e,t){var a=this.state.inputValue;return _react2.default.createElement(_reactYPills.Option,{key:t,value:t+1},_react2.default.createElement(_suggestion_item2.default,{suggestion:e,inputValue:a}))},getSuggestions:function(){var e=this.props,t=e.suggestions,a=e.importantContacts,s=this.state.inputValue;return(0,_suggestions.getReconciledSuggestions)(t,a,s)},renderContactPill:function(e,t,a,s){var n=e.emailAddresses&&e.emailAddresses[0],i=e.name||n,r=i;if(n)return _react2.default.createElement(_pill2.default,{value:i,title:n?i+" <"+n+">":r,useEllipsis:!0,maxWidth:_mail_ui_vars.PillMaxWidths.L,contactEmail:n,isLastElement:t===a.length-1,isSelected:s,onPillRemove:this.clearContactPill})},renderPill:function(e,t,a,s){return e.type===PILL_TYPES.FOLDER?this.renderFolderPill(e,t,a,s):e.type===PILL_TYPES.CONTACT?this.renderContactPill(e,t,a,s):null},clearContactPill:function(){this.setState({pillContact:{}})},clearFolderPill:function(){this.setState({pillFolder:{}})},hasPillContact:function(){var e=this.state.pillContact,t=e.name,a=e.emailAddresses,s=void 0===a?[]:a;return!(!t&&!s[0])},hasPillFolder:function(){var e=this.props.accountList,t=this.state.pillFolder,a=t.accountId,s=t.folderId;return!!(a&&1!==e.length||s)},getAccountDescription:function(e){var t=this.context.intl.formatMessage,a=e.description,s=(0,_account.getProviderFromAccount)(e);if(a)return a;switch(s){case _mail_constants.EmailProviders.YAHOO:case _mail_constants.EmailProviders.YAHOO_SB:return t(_strings2.default.yahoo_account_description);case _mail_constants.EmailProviders.GOOGLE:case _mail_constants.EmailProviders.GOOGLE_APP:return t(_strings2.default.gmail_account_description);case _mail_constants.EmailProviders.OUTLOOK:return t(_strings2.default.outlook_account_description);case _mail_constants.EmailProviders.AOL:return t(_strings2.default.aol_account_description);default:return t(_strings2.default.unknown_account_description)}},normalizeFolderPill:function(){var e=this.state.pillFolder,t=e.accountId,a=e.folderId,s=this.props,n=s.accountList,i=s.folderList,r=void 0,o=void 0;if(t&&(o=n.find(function(e){return e.id===t}),r=this.getAccountDescription(o)),a){var l=(0,_folder.flattenFolderTree)(i),c=l[a];o=n.find(function(e){return e.id===c.accountId}),r=1===n.length?c.name:this.getAccountDescription(o)+"/"+c.name}var u=r,d=o.email;return{label:u,email:d,type:PILL_TYPES.FOLDER}},renderFolderPill:function(e,t,a,s){var n=e.label,i=e.email;return _react2.default.createElement(_pill2.default,{value:n,title:n,useEllipsis:!0,maxWidth:_mail_ui_vars.PillMaxWidths.L,contactEmail:i,isLastElement:t===a.length-1,isSelected:s,onPillRemove:this.clearFolderPill,isFolderPill:!0,pillFujiKind:_fuji_icon3.Kinds.FOLDER,pillFujiColorState:_fuji_icon3.ColorStates.SECOND_LEVEL_GRAY,pillFujiSize:_fuji_icon3.Sizes.XXS})},getPills:function(){var e=[];return this.hasPillFolder()&&e.push(this.normalizeFolderPill(this.state.pillFolder)),this.hasPillContact()&&e.push(this.state.pillContact),e},renderWebSearchSuggestion:function(){var e=_mail_constants.SuggestionType.WEB_SEARCH,t=this.state.inputValue,a=this.getSuggestions(),s=(0,_css2.default)(_search_box2.default,{showPeopleSuggestion:a.length>0&&!this.hasPillContact()});return _react2.default.createElement(_reactYPills.Option,{value:e},_react2.default.createElement("div",{className:s.suggestionWebOptionBorder}),_react2.default.createElement("div",{className:s.suggestionWebOption},_react2.default.createElement("span",{className:s.suggestionWebIcon},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.SEARCH_WEB,size:_fuji_icon3.Sizes.S,colorState:_fuji_icon3.ColorStates.NORMAL_LESS_DIM})),_react2.default.createElement("span",{className:s.suggestionWebLabel},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"search.search_web_query",defaultMessage:"Search the web for {formattedWebSearchQuery}",values:{formattedWebSearchQuery:_react2.default.createElement("span",{className:s.suggestionWebQuery},_react2.default.createElement("b",null,_react2.default.createElement("q",null,t)))}}))))},suggestionValue:function(e){var t=e.name,a=e.emailIds;return{name:t,emailAddresses:a}},getInputHint:function(){var e=this.state,t=e.inputValue,a=e.showInputHint,s=e.activeSuggestion,n=e.showAdvancedSearchPane,i=this.getSuggestions();if(!i||!i[0])return"";var r=this.suggestionValue(i[0]),o=r.name,l=r.emailAddresses,c=void 0===l?[]:l,u=c[0],d=new RegExp("^"+(0,_string.escapeRegExp)(t),"i");return!t||!a||s||this.hasPillContact()||n?"":d.test(o)?t+o.slice(t.length):d.test(u)?t+u.slice(t.length):""},updatedSelectedSuggestion:function(e){var t=this.getSuggestions();this.hasPillContact()||this.setState({activeSuggestion:t[e]})},getTypeaheadDisplayText:function(){var e=this.state,t=e.activeSuggestion,a=e.inputValue;return t&&this.suggestionValue(t).name||a},focus:function(){this.refs.input.focus()},handleAdvancedSearchButtonClick:function(e){var t=e.i13nModel,a=this.state.showAdvancedSearchPane;this.setState({showAdvancedSearchPane:!a}),this.context.executeAction(_actions.handleSearchBarFocus,{i13nModel:Object.assign({sec:SEARCH_HEADER_SEC},t)})},handleAdvancedSearchPaneClick:function(e){var t=e.overlayClicked;t||this.setState({showAdvancedSearchPane:!1})},renderAdvancedSearch:function(){var e=[],t=(0,_suggestions.filterPeopleSuggestions)(this.props.suggestions);t=(0,_suggestions.flattenPeopleSuggestionsByEmailId)(t);var a=this.state,s=a.showAdvancedSearchPane,n=a.searchBoxDimensions,i=a.inputValue,r=a.pillFolder,o=r.accountId,l=r.folderId;if(e.push(_react2.default.createElement(_advanced_search_button2.default,{tabIndex:_mail_ui_vars.TabIndices.APP_HEADER_SEARCHBOX,key:"advanced-search-button",onClick:this.handleAdvancedSearchButtonClick,chevronDown:!s})),s){var c={width:n.width},u={inputValue:i,accountIds:o?[o]:[],folders:l?[l]:[]};e.push(_react2.default.createElement(_overlay2.default,{key:"advanced-search-pane",alignTo:this.refs.searchField,alignmentPoints:[_corners.Corners.TopLeft,_corners.Corners.BottomLeft],useShim:!0,onClick:this.handleAdvancedSearchPaneClick,onKeyDown:this.handleAdvancedSearchKeyDown},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../advanced_search_pane/index.js",style:c,folderList:this.props.folderList,accountList:this.props.accountList,searchInput:u,suggestions:t,onSearchChange:this.handleSearchChange,onSearchSubmit:this.handleAdvancedSearchSubmit,_moduleGetter:function(){return require("../advanced_search_pane/index.js")}})))}return e},getFujiIcon:function(e,t){return this.props.showHSSearchCue?_react2.default.createElement(_popover_container2.default,null,_react2.default.createElement(_popover_anchor2.default,null,_react2.default.createElement(_fuji_icon_button2.default,{className:e.searchButton,"data-test-id":"search-basic-btn",tabIndex:_mail_ui_vars.TabIndices.APP_HEADER_SEARCHBOX,title:t(strings.search_button_title),"aria-label":t(strings.search_button_title),kind:_fuji_icon3.Kinds.SEARCH,size:_fuji_icon3.Sizes.S,onClick:this.handleBasicSearchSubmit,colorState:_fuji_icon3.ColorStates.INVERTED,"data-iskeynav":!0,paddingLess:!0})),this.renderSearchCue()):_react2.default.createElement(_fuji_icon_button2.default,{className:e.searchButton,"data-test-id":"search-basic-btn",tabIndex:_mail_ui_vars.TabIndices.APP_HEADER_SEARCHBOX,title:t(strings.search_button_title),"aria-label":t(strings.search_button_title),kind:_fuji_icon3.Kinds.SEARCH,size:_fuji_icon3.Sizes.S,onClick:this.handleBasicSearchSubmit,colorState:_fuji_icon3.ColorStates.INVERTED,"data-iskeynav":!0,paddingLess:!0})},renderSearchCue:function(){return _react2.default.createElement(_popover_content2.default,{persistent:!0,align:_popover.Align.CENTER,triggerOn:_popover.Triggers.MOUNT,permittedArrowDirections:[_popover.PermittedArrowDirections.UP],zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../scout_cue/",cueName:"HSSearchCue",onTryButton:this.focus,_moduleGetter:function(){return require("../scout_cue/")}}))},render:function(){var e=this.context.intl.formatMessage,t=this.state.inputValue,a=this.context.config.advancedMailSearch,s=this.hasPillContact()?strings.search_keyword_placeholder:strings.search_placeholder,n=(0,_css2.default)(_search_box2.default,{hasPill:this.hasPillContact()||this.hasPillFolder()}),i=this.context.intl.formatMessage(strings.suggestions_available,{suggestionsNum:this.getSuggestions().length});return _react2.default.createElement("div",{className:n.container,"data-test-id":"search-box"},_react2.default.createElement("div",{className:n.searchInputContainer,ref:"searchField"},_react2.default.createElement(_reactYPills.Pills,{ref:"input",multiple:!1,initialActiveIndex:-1,className:(0,_merge2.default)(pillClassNames.pills,n.pills),containerClassName:(0,_merge2.default)(pillClassNames.pillsContainer,n.pillsContainer),containerChildClassName:pillClassNames.pillsContainerChild,pillClassName:pillClassNames.pillOuter,placeholder:e(s),typeaheadInputClassName:n.searchInput,typeaheadInputContainerClassName:n.typeaheadInputContainer,typeaheadInputHintClassName:n.searchHint,typeaheadDropDownClassName:n.suggestionDropdown,inputValue:this.getTypeaheadDisplayText(),onFocus:this.handleSearchFocus,onInputKeyDown:this.handleKeydown,onInputChange:this.handleSearchChange,selected:this.getPills(),onSelect:this.handleSearchSuggestionSelect,inputTabIndex:_mail_ui_vars.TabIndices.APP_HEADER_SEARCHBOX,hintValue:this.getInputHint(),onActiveIndexChange:this.updatedSelectedSuggestion,renderPill:this.renderPill,messageForIncomingOptions:i,typeaheadAriaStatusClassName:n.typeaheadAriaStatus},this.hasPillContact()?null:this.getSuggestions().map(this.renderSuggestion),t&&this.renderWebSearchSuggestion()),a?this.renderAdvancedSearch():null),this.props.showSearchBadge?_react2.default.createElement("div",{onClick:this.handleBasicSearchSubmit,className:n.searchButton,"data-test-id":"hotspots-badge"},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../feature_cue/atoms/badge",cueName:"HSSearchBadge",size:_fuji_icon3.Sizes.S,kind:_fuji_icon3.Kinds.SEARCH,bigBadge:!0,_moduleGetter:function(){return require("../feature_cue/atoms/badge")}},_react2.default.createElement(_lazy_component.When,{loading:!0},this.getFujiIcon(n,e)))):this.getFujiIcon(n,e))}});exports.default=SearchBox;
},{"../../apps/mail/actions":"./apps/mail/actions","../../atoms/advanced_search_button.jsx":67,"../../atoms/constants/corners":"./atoms/constants/corners","../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../atoms/constants/popover":"./atoms/constants/popover","../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../atoms/lazy_component":"./atoms/lazy_component","../../atoms/overlay.jsx":"./atoms/overlay","../../atoms/pill.jsx":"./atoms/pill","../../atoms/popover/popover_anchor.jsx":"./atoms/popover/popover_anchor","../../atoms/popover/popover_container.jsx":"./atoms/popover/popover_container","../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../atoms/suggestion_item.jsx":"./atoms/suggestion_item","../../molecules/advanced_search_pane/atoms/strings":"./molecules/advanced_search_pane/atoms/strings","../../platform/invariant":"./platform/invariant","../../platform/mail_constants":"./platform/mail_constants","../../platform/rapid_client/constants":"./platform/rapid_client/constants","../../platform/utils/":"./platform/utils","../../platform/utils/account":"./platform/utils/account","../../platform/utils/folder":"./platform/utils/folder","../../platform/utils/list":"./platform/utils/list","../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../platform/utils/object":"./platform/utils/object","../../platform/utils/string":"./platform/utils/string","../../platform/utils/suggestions":"./platform/utils/suggestions","../../types":"./types","../advanced_search_pane/index.js":"./molecules/advanced_search_pane","../compose/styles/auto_suggest_contact":151,"../feature_cue/atoms/badge":"./molecules/feature_cue/atoms/badge","../scout_cue/":"./molecules/scout_cue","./styles/search_box":257,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-atomic-css/merge":"./node_modules/react-atomic-css/merge.js","react-dom":"./node_modules/react-dom/index.js","react-dom/lib/getEventKey":"./node_modules/react-dom/lib/getEventKey.js","react-intl":"./node_modules/react-intl/lib/index.js","react-y-pills":"./node_modules/react-y-pills/build/src/index.js"}],257:[function(require,module,exports){
module.exports={className:{default:{container:"D_F en_0 H_74JI p_R",searchButton:"en_0 I_2sqbOJ u_b k_w ck_dRA bl_dRA J_x W_7GHz H_74JI gl_C M_0 D_F cZ1RN91d_n A_6EqO y_1ACvVU b_0 C_52qC r_P I4_2sqbPK ir3_2d4VCo it3_dRA",searchInputContainer:"D_F W_6D6F s_3z5BY cj_dRA bk_dRA k_w b_0 I_52qC p_R",searchInput:"k_w W_6D6F P_Z1E2YFn i_6LEV M_0 b_0 A_6EWk y_1ACvVU I_T p_R Z_N",searchHint:"k_w W_6D6F P_Z1E2YFn i_6LEV M_0 b_0 A_6EWk y_1ACvVU I_T C_Z1AHs3T p_a q_T L_0 Z_0",suggestionDropdown:"W_Z2mrcQq Z_fcS I_52qC k_w ha_n L_0 T_750t M_0 P_Z2rzFgL b_Z14vXdP e_dRA j_Zm8rYD p_a o_A",suggestionWebOption:"P_fQq0A k_w W_6D6F D_F ab_C H_73HH r_P q4_2ieea9 cZ1WADfW_2ieea9",suggestionWebIcon:"X_eTB N_eTB E_fq7",suggestionWebLabel:"J_x G_e o_h",suggestionWebQuery:"C_Z291T0t",suggestionDetails:"C_ZxFlP3 Q_fq7",pills:"ab_C",pillsContainer:"eo_x el_EZ",typeaheadInputContainer:"p_R",typeaheadAriaStatus:"L_Z1yJMeR p_a"},showPeopleSuggestion:{suggestionWebOptionBorder:"M_Z2rzCvT z_Z14vXdP"},hasPill:{searchInput:"P_fq7",searchHint:"P_fq7",pillsContainer:"Q_fq7"}},_key:"1Qe5lU"};
},{"./src/molecules/search_box/styles/atomic_search_box.css":"./molecules/search_box/styles/atomic_search_box"}],258:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_search_header=require("../../atoms/search_header.jsx"),_search_header2=_interopRequireDefault(_search_header),_list=require("../../platform/utils/list"),_route=require("../../platform/utils/route"),_mail_constants=require("../../platform/mail_constants"),SearchHeader=_react2.default.createClass({displayName:"SearchHeader",contextTypes:{executeAction:_react.PropTypes.func,navigateTo:_react.PropTypes.func.isRequired},handleContentTypeChange:function(e){var t=e.listContentType,r=e.i13nModel;this.context.navigateTo({route:{name:_mail_constants.RouteNames.SEARCH,params:{query:(0,_list.serializeListIdForRoute)((0,_list.recreateListId)(this.props.listId,{listContentType:t}))}},i13nModel:r})},handleContactClick:function(e){var t=e.email,r=e.name;this.context.navigateTo({route:(0,_route.buildSearchRouteFromQuery)({emailAddresses:t,name:r})})},render:function(){return _react2.default.createElement(_search_header2.default,{suggestedWords:this.props.suggestedWords,onContentTypeChange:this.handleContentTypeChange,onContactClick:this.handleContactClick,isPeopleSearch:(0,_list.isPeopleSearch)(this.props.listId),activeContentType:(0,_list.getListContentTypeFromListId)(this.props.listId),suggestedContacts:this.props.suggestedContacts,showSearchCue:this.props.showSearchCue,showHSNarrowSearchCue:this.props.showHSNarrowSearchCue})}});exports.default=SearchHeader,module.exports=exports.default;
},{"../../atoms/search_header.jsx":81,"../../platform/mail_constants":"./platform/mail_constants","../../platform/utils/list":"./platform/utils/list","../../platform/utils/route":"./platform/utils/route","react":"./node_modules/react/react.js"}],"./molecules/settings/styles/settings_menu":[function(require,module,exports){
module.exports={className:{default:{settingsGearIcon:"D_F",label:"N_fq7 u_b A_6EqO cZ1W8EHk_n",settingsLabelIconContainer:"D_F ab_C cdPFi_Z2aVTcY C_Z2aVTcY r_P",chevronIcon:"Q_A",menuContainer:"W_3vaYc",menuContainerLazy:"W_3vaYc d_3z5BY D_F ab_C gl_C",menuList:"M_0 P_0 hd_n",menuItemHeader:"M_0 D_F ab_C u_dPo k_w A_6EqO H_72FG P_1EudUu C_Z26U5qH m_Z12nDQf",menuItem:"M_0 r_BN u_b A_6EqO P_1EudUu H_73HH i_73HH C_Z26U5qH z_Z12nDQf",menuItemQuickAccess:"r_BN o_A q_ZnkeaL K_3vFXG P_22E7lI c272488_n",menuItemFooter:"M_0 u_e69 A_6DUj H_73HH i_73HH P_Z1fehm1 z_Z12nDQf",menuLinkWrapper:"D_B C4_Z2aVTcY",link:"C_Z1Vx4Yg E_6MGW C4_Z2aVTcY r_P",badgeContainer:"h_Zc8u05"},"themeMode-MEDIUM":{settingsGearIcon:"cdPFi_52qC",label:"C_52qC"},"themeMode-DARK":{settingsGearIcon:"cdPFi_52qC",label:"C_52qC"},"theme-DEFAULT":{settingsLabelIconContainer:"C4_Z29WjXl cdPFi4_Z29WjXl"},verticalLayout:{label:"D_n",settingsLabelIconContainer:"jb_6FIA"},"themeCombo-LIGHT_DEFAULT":{settingsLabelIconContainer:"cdPFi_Z2aVTcY C_Z2aVTcY"},"themeCombo-LIGHT_SUNRISE":{settingsLabelIconContainer:"cdPFi_ZmlXUP C_ZmlXUP"},"themeCombo-LIGHT_AQUA_GREEN":{settingsLabelIconContainer:"cdPFi_Z1UHURv C_Z1UHURv"},"themeCombo-LIGHT_AQUA_BLUE":{settingsLabelIconContainer:"cdPFi_Z280Xf5 C_Z280Xf5"},"themeCombo-LIGHT_DEEP_PURPLE":{settingsLabelIconContainer:"cdPFi_Zwa5YI C_Zwa5YI"},"themeCombo-LIGHT_BLUE_NIGHT":{settingsLabelIconContainer:"cdPFi_Z21zYBA C_Z21zYBA"}},_key:"Z19CRmL"};
},{"./src/molecules/settings/styles/atomic_settings_menu.css":"./molecules/settings/styles/atomic_settings_menu"}],"./molecules/stationery/theme_picker":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_fuji_icon=require("../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_menu_button=require("../../atoms/menu/menu_button.jsx"),_menu_button2=_interopRequireDefault(_menu_button),_lazy_component=require("../../atoms/lazy_component"),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),_fuji_icon3=require("../../atoms/constants/fuji_icon"),_popover_content=require("../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover=require("../../atoms/constants/popover"),strings=(0,_reactIntl.defineMessages)({theme_picker:{id:"compose.theme_picker",defaultMessage:"Stationery"}}),ThemePicker=_react2.default.createClass({displayName:"ThemePicker",contextTypes:{intl:_reactIntl.intlShape.isRequired},getInitialState:function(){return{menuOpen:!1}},_toggleMenu:function(){var e=!this.state.menuOpen;this.setState({menuOpen:e}),e||this.props.focusBackEditor()},renderStationeryCue:function(){return this.props.showStationeryCue&&this.refs.button?_react2.default.createElement(_popover_content2.default,{popoverAnchor:this.refs.button,align:_popover.Align.CENTER,triggerOn:_popover.Triggers.MOUNT,permittedArrowDiretions:[_popover.PermittedArrowDirections.DOWN,_popover.PermittedArrowDirections.RIGHT],zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../scout_cue",cueName:"stationeryCue",close:this.state.menuOpen,onTryNow:this._toggleMenu,_moduleGetter:function(){return require("../scout_cue")}})):null},renderHotSpotStationeryCue:function(){return this.props.showHSStationeryCue&&this.refs.button?_react2.default.createElement(_popover_content2.default,{popoverAnchor:this.refs.button,align:_popover.Align.CENTER,triggerOn:_popover.Triggers.MOUNT,permittedArrowDiretions:[_popover.PermittedArrowDirections.DOWN,_popover.PermittedArrowDirections.RIGHT],zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH},_react2.default.createElement(_lazy_component.LazyComponent,{import:"../scout_cue",cueName:"HSStationeryCue",onTryButton:this._toggleMenu,_moduleGetter:function(){return require("../scout_cue")}})):null},render:function(){var e=this.context.intl.formatMessage;return _react2.default.createElement("div",null,_react2.default.createElement(_menu_button2.default,{ref:"button","data-test-id":"stationery-button",title:e(strings.theme_picker),"aria-label":e(strings.theme_picker),onClick:this._toggleMenu},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.STATIONERY,size:_fuji_icon3.Sizes.XS,colorState:_fuji_icon3.ColorStates.NORMAL})),this.renderStationeryCue(),this.renderHotSpotStationeryCue(),this.state.menuOpen||this.props.autoApplyDefaultTheme?_react2.default.createElement(_lazy_component.LazyComponent,{import:"./stationery.jsx",onThemeChange:this.props.onThemeChange,defaultTheme:this.props.stationeryDefaultTheme,selectedTheme:this.props.stationeryTheme,autoApplyDefaultTheme:this.props.autoApplyDefaultTheme,onHide:this._toggleMenu,width:this.props.width,left:this.props.left,_moduleGetter:function(){return require("./stationery.jsx")}}):null)}});exports.default=ThemePicker,module.exports=exports.default;
},{"../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../atoms/constants/popover":"./atoms/constants/popover","../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../atoms/lazy_component":"./atoms/lazy_component","../../atoms/menu/menu_button.jsx":"./atoms/menu/menu_button","../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../scout_cue":"./molecules/scout_cue","./stationery.jsx":"./molecules/stationery/stationery","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],259:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_fluxibleRouter=require("fluxible-router"),_reactIntl=require("react-intl"),_fuji_icon_button=require("../../../atoms/fuji_icon_button.jsx"),_fuji_icon_button2=_interopRequireDefault(_fuji_icon_button),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_object=require("../../../platform/utils/object"),_mail_constants=require("../../../platform/mail_constants"),_constants=require("../constants"),_tab_button=require("../styles/tab_button"),_tab_button2=_interopRequireDefault(_tab_button),_themes=require("../../../platform/theming/themes"),strings=(0,_reactIntl.defineMessages)({noSubject:{id:"tab.title.no_subject",defaultMessage:"No Subject"},loading:{id:"tab.title.loading",defaultMessage:"Loading"},error:{id:"tab.title.error",defaultMessage:"Error"},newDraft:{id:"tab.title.new_draft",defaultMessage:"New Subject"},closeTab:{id:"tab.label.close",defaultMessage:"Close tab"},searchDefault:{id:"tab.title.search_default",defaultMessage:"All"},settings:{id:"tab.title.settings",defaultMessage:"Settings"},sponsoredAd:{id:"tab.title.sponsored_ad",defaultMessage:"Sponsored"}}),TabButton=_react2.default.createClass({displayName:"TabButton",getInitialState:function(){return{hover:!1}},contextTypes:{intl:_reactIntl.intlShape,getCss:_react.PropTypes.func,getThemeMode:_react.PropTypes.func},handleClose:function(e){e.stopPropagation(),this.props.onClose(e)},handleHoverChange:function(e){this.setState({hover:e})},render:function(){var e=this.context.intl.formatMessage,t=this.props,a=t.isActive,s=t.isCloseable,i=t.onClick,n=t.url,o=t.titleType,r=t.decorator,l=t.kind,c=t.title,_=t.widthOverride,u=r!==_mail_constants.TabButtonDecorators.NONE,d=l===_constants.TabKinds.BAR&&a,b=this.context.getThemeMode()===_themes.ThemeModes.DARK,f=this.context.getCss(_tab_button2.default,{kind:l,activeBar:d,decoratedMenu:u&&l===_constants.TabKinds.MENU,decoratedBar:u&&l===_constants.TabKinds.BAR,activeHover:a&&this.state.hover,activeMenu:l===_constants.TabKinds.MENU&&a,inactiveHover:!a&&this.state.hover}),T=c,h=_fuji_icon3.ColorStates.DARK,m=void 0;switch(r){case _mail_constants.TabButtonDecorators.SEARCH:m=_fuji_icon3.Kinds.SEARCH_MINI;break;case _mail_constants.TabButtonDecorators.COMPOSE:m=_fuji_icon3.Kinds.COMPOSE}switch(o){case _mail_constants.TabTitleTypes.NO_SUBJECT:T=e(strings.noSubject);break;case _mail_constants.TabTitleTypes.LOADING:T=e(strings.loading);break;case _mail_constants.TabTitleTypes.ERROR:T=e(strings.error);break;case _mail_constants.TabTitleTypes.NEW_DRAFT:T=e(strings.newDraft);break;case _mail_constants.TabTitleTypes.SEARCH_DEFAULT:T=e(strings.searchDefault);break;case _mail_constants.TabTitleTypes.SETTINGS:T=e(strings.settings);break;case _mail_constants.TabTitleTypes.SPONSORED_AD:T=e(strings.sponsoredAd)}return l===_constants.TabKinds.BAR&&(h=a?_fuji_icon3.ColorStates.INHERITED:_fuji_icon3.ColorStates.INVERTED),_react2.default.createElement(_fluxibleRouter.NavLink,{"data-test-id":"tab-item","data-test-active":a,href:n,style:{width:_},className:b&&l===_constants.TabKinds.BAR?f.darkThemeModeTab:f.tab,onClick:i,onMouseOver:this.handleHoverChange.bind(this,!0),onMouseLeave:this.handleHoverChange.bind(this,!1),title:T},r!==_mail_constants.TabButtonDecorators.NONE?_react2.default.createElement("span",{className:f.decorator},_react2.default.createElement(_fuji_icon2.default,{kind:m,size:_fuji_icon3.Sizes.XS,colorState:h})):null,b?_react2.default.createElement("span",{className:d?f.darkThemeModeActiveBarText:f.text},T):_react2.default.createElement("span",{className:d?f.activeBarText:f.text},T),s?_react2.default.createElement(_fuji_icon_button2.default,{onClick:this.handleClose,className:f.close,kind:_fuji_icon3.Kinds.CLOSE_MINI,size:_fuji_icon3.Sizes.XS,colorState:h,"aria-label":e(strings.closeTab),title:e(strings.closeTab)}):null)}});exports.default=TabButton,module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/fuji_icon_button.jsx":"./atoms/fuji_icon_button","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/theming/themes":"./platform/theming/themes","../../../platform/utils/object":"./platform/utils/object","../constants":261,"../styles/tab_button":263,"fluxible-router":"./node_modules/fluxible-router/index.js","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],260:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_mail_ui_vars=require("../../../platform/utils/mail_ui_vars"),_fuji_icon=require("../../../atoms/fuji_icon.jsx"),_fuji_icon2=_interopRequireDefault(_fuji_icon),_fuji_icon3=require("../../../atoms/constants/fuji_icon"),_object=require("../../../platform/utils/object"),_mail_constants=require("../../../platform/mail_constants"),_constants=require("../constants"),_popover_content=require("../../../atoms/popover/popover_content.jsx"),_popover_content2=_interopRequireDefault(_popover_content),_popover_container=require("../../../atoms/popover/popover_container.jsx"),_popover_container2=_interopRequireDefault(_popover_container),_popover_anchor=require("../../../atoms/popover/popover_anchor.jsx"),_popover_anchor2=_interopRequireDefault(_popover_anchor),_popover=require("../../../atoms/constants/popover"),_button=require("../../../atoms/button.jsx"),_button2=_interopRequireDefault(_button),_button3=require("../../../atoms/constants/button"),_tab_button=require("./tab_button.jsx"),_tab_button2=_interopRequireDefault(_tab_button),_tabs_menu=require("../styles/tabs_menu"),_tabs_menu2=_interopRequireDefault(_tabs_menu),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),classNames=(0,_css2.default)(_tabs_menu2.default),TabType=_react.PropTypes.shape({title:_react.PropTypes.string,titleType:_react.PropTypes.oneOf((0,_object.values)(_mail_constants.TabTitleTypes)).isRequired,url:_react.PropTypes.string.isRequired}),TabsMenu=_react2.default.createClass({displayName:"TabsMenu",renderTabButtons:function(e,t){var a=this.props,r=a.onSelection,s=a.onClose;return e.map(function(e){var a=e.title,o=e.titleType,n=e.url,l=e.decorator,_=e.active;return _react2.default.createElement("li",{className:classNames.tabItem,key:n},_react2.default.createElement(_tab_button2.default,{onClick:r.bind(null,t?_constants.TabKinds.BAR:_constants.TabKinds.MENU,e),isCloseable:!0,isActive:_,onClose:s.bind(null,e),title:a,titleType:o,decorator:l,kind:_constants.TabKinds.MENU,url:n}))})},render:function(){var e=this.props,t=e.remainingTabs,a=e.barTabs,r=e.onCloseAll;return _react2.default.createElement(_popover_container2.default,{className:classNames.menuContainer},_react2.default.createElement(_popover_anchor2.default,null,_react2.default.createElement(_button2.default,{"data-test-id":"tabs-menu-button",tabIndex:0,kind:_button3.Kinds.CHROMELESS,className:classNames.menuButton},_react2.default.createElement("span",{className:classNames.menuSpan},_react2.default.createElement("span",{className:classNames.chevron},_react2.default.createElement(_fuji_icon2.default,{kind:_fuji_icon3.Kinds.CHEVRON_UP,size:_fuji_icon3.Sizes.XS,rotate:_fuji_icon3.Rotate.D180,colorState:_fuji_icon3.ColorStates.INVERTED}))))),_react2.default.createElement(_popover_content2.default,{triggerOn:_popover.Triggers.CLICK,offset:3*_mail_ui_vars.GRID_UNIT,align:_popover.Align.END,permittedArrowDirections:[_popover.PermittedArrowDirections.UP],zAltitude:_mail_ui_vars.ZIndices.POPOVER.HIGH},_react2.default.createElement("ul",{"data-test-id":"tabs-menu",className:classNames.tabList},this.renderTabButtons(t,!1),this.renderTabButtons(a,!0),_react2.default.createElement("li",{className:classNames.rule}),_react2.default.createElement("li",null,_react2.default.createElement(_button2.default,{"data-test-id":"tabs-close-all",onClick:r,className:classNames.closeAllButton},_react2.default.createElement("span",{className:classNames.closeAllText},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"tabs.menu_close_all",defaultMessage:"Close all tabs"})))))))}});exports.default=TabsMenu,module.exports=exports.default;
},{"../../../atoms/button.jsx":"./atoms/button","../../../atoms/constants/button":"./atoms/constants/button","../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../atoms/constants/popover":"./atoms/constants/popover","../../../atoms/fuji_icon.jsx":"./atoms/fuji_icon","../../../atoms/popover/popover_anchor.jsx":"./atoms/popover/popover_anchor","../../../atoms/popover/popover_container.jsx":"./atoms/popover/popover_container","../../../atoms/popover/popover_content.jsx":"./atoms/popover/popover_content","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../../platform/utils/object":"./platform/utils/object","../constants":261,"../styles/tabs_menu":265,"./tab_button.jsx":259,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],261:[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.TAB_RIGHT_MARGIN=exports.TabKinds=void 0;var _object=require("../../platform/utils/object"),TabKinds=exports.TabKinds=(0,_object.mirrorKeys)(["BAR","MENU"]),TAB_RIGHT_MARGIN=exports.TAB_RIGHT_MARGIN=2;
},{"../../platform/utils/object":"./platform/utils/object"}],262:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_tab_button=require("./atoms/tab_button.jsx"),_tab_button2=_interopRequireDefault(_tab_button),_tabs_menu=require("./atoms/tabs_menu.jsx"),_tabs_menu2=_interopRequireDefault(_tabs_menu),_tabs=require("./styles/tabs"),_tabs2=_interopRequireDefault(_tabs),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_reactAddonsCreateFragment=require("react-addons-create-fragment"),_reactAddonsCreateFragment2=_interopRequireDefault(_reactAddonsCreateFragment),_object=require("../../platform/utils/object"),_types=require("../../types"),_mail_constants=require("../../platform/mail_constants"),_constants=require("./constants"),_mail_ui_vars=require("../../platform/utils/mail_ui_vars"),_application=require("../../actions/application"),TAB_MIN_WIDTH_WITH_MARGIN=_mail_ui_vars.TAB_MIN_WIDTH+_constants.TAB_RIGHT_MARGIN,TAB_MAX_WIDTH_WITH_MARGIN=_mail_ui_vars.TAB_MAX_WIDTH+_constants.TAB_RIGHT_MARGIN,classNames=(0,_css2.default)(_tabs2.default),Tabs=_react2.default.createClass({displayName:"Tabs",contextTypes:{executeAction:_react.PropTypes.func,navigateTo:_react.PropTypes.func},getInitialState:function(){return{boundingWidth:null}},getBoundingWidth:function(){this.isMounted()&&this.setState({boundingWidth:(0,_reactDom.findDOMNode)(this).getBoundingClientRect().width})},componentDidMount:function(){this.getBoundingWidth(),window.addEventListener("resize",this.getBoundingWidth)},componentWillUnmount:function(){window.removeEventListener("resize",this.getBoundingWidth)},handleSelection:function(t,e,a){a.preventDefault();var n={url:e.url};e.active||(t===_constants.TabKinds.MENU?this.context.executeAction(_application.makePageRecent,n):this.context.navigateTo(n))},handleTabClose:function(t,e){var a=t.url;e.preventDefault(),this.context.executeAction(_application.closePage,{url:a})},handleTabCloseAll:function(t){t.preventDefault(),this.context.executeAction(_application.closeAllPages)},renderToFit:function(){var t=this,e=this.props.tabContent,a=[],n=[],i=void 0;if(this.state.boundingWidth){var s=Math.floor((this.state.boundingWidth-_mail_ui_vars.TAB_MENU_WIDTH)/TAB_MAX_WIDTH_WITH_MARGIN);if(e.length>s){s=Math.floor((this.state.boundingWidth-_mail_ui_vars.TAB_MENU_WIDTH)/TAB_MIN_WIDTH_WITH_MARGIN);var r=Math.min(s,e.length),o=Math.floor((this.state.boundingWidth-_mail_ui_vars.TAB_MENU_WIDTH)/r);i=o-_constants.TAB_RIGHT_MARGIN+"px"}e.forEach(function(t){!t.active&&a.length<e.length-s?a.push(t):n.push(t)})}else n=e.slice(0,4);return(0,_reactAddonsCreateFragment2.default)({tabButtons:n.map(function(e){var a=e.title,n=e.titleType,s=e.url,r=e.active,o=e.decorator;return _react2.default.createElement("li",{key:s,className:classNames.item},_react2.default.createElement(_tab_button2.default,{onClick:function(a){return t.handleSelection(_constants.TabKinds.BAR,e,a)},isCloseable:!0,onClose:function(a){return t.handleTabClose(e,a)},title:a,titleType:n,decorator:o,url:s,kind:_constants.TabKinds.BAR,isActive:r,widthOverride:i}))}),tabMenu:e.length?_react2.default.createElement("li",{className:classNames.moreMenu},_react2.default.createElement(_tabs_menu2.default,{barTabs:n,remainingTabs:a,onSelection:this.handleSelection,onClose:this.handleTabClose,onCloseAll:this.handleTabCloseAll})):null})},render:function(){var t=this.props.tabContent;return _react2.default.createElement("ul",{className:classNames.container,"data-test-id":"tab-list","data-test-count":t.length},this.renderToFit())}});exports.default=Tabs,module.exports=exports.default;
},{"../../actions/application":"./actions/application","../../platform/mail_constants":"./platform/mail_constants","../../platform/utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../../platform/utils/object":"./platform/utils/object","../../types":"./types","./atoms/tab_button.jsx":259,"./atoms/tabs_menu.jsx":260,"./constants":261,"./styles/tabs":264,"react":"./node_modules/react/react.js","react-addons-create-fragment":"./node_modules/react-addons-create-fragment/index.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-dom":"./node_modules/react-dom/index.js"}],263:[function(require,module,exports){
module.exports={className:{default:{tab:"k_w D_F ab_C H_6D6F cj_dRA ck_dRA o_h cdPFi_52qC cdPFi4_Z291T0t",darkThemeModeTab:"k_w D_F ab_C H_6D6F cj_dRA ck_dRA o_h cdPFi_52qC cdPFi4_Z291T0t",textSvg:"em_N H_6FIA",text:"A_6EqO u_e69 E_eo6 em_N en_N o_h J_x",close:"en_0 O_0 I_T Q_36RhU O4_N P_2gqvDS",decorator:"D_F en_0 E_eo6"},"kind-MENU":{tab:"W_3qYiD P_1Eu7sD C_Z291T0t I_52qC I4_Z1owzy4 N4_6Eb4",text:"C_Z291T0t G_e"},"kind-BAR":{tab:"W_3nq6r P_fQoXz I_a0xIC I4_ak5k6",darkThemeModeTab:"W_3nq6r P_fQoXz I_sgPuo I4_sgPuT C_52qC",activeBarText:"A_6EqO u_e69 E_eo6 em_N en_N o_h J_x C_Z291T0t",darkThemeModeActiveBarText:"A_6EqO u_e69 E_eo6 em_N en_N o_h J_x C_52qC",text:"C_52qC",close:"Q4_0"},activeBar:{tab:"I_52qC I4_52qC",darkThemeModeTab:"I_ZS2fmO I4_ZS2fmO cdPFi4_52qC"},activeMenu:{text:"u_b"},decoratedMenu:{tab:"X_6Fd5"},decoratedBar:{tab:"P_3gIMd",darkThemeModeTab:"P_3gIMd"},activeHover:{tab:"r_BN",darkThemeModeTab:"r_BN",close:"O_N Q_0"},inactiveHover:{close:"O_N Q_0"}},_key:"KyAJj"};
},{"./src/molecules/tabs/styles/atomic_tab_button.css":"./molecules/tabs/styles/atomic_tab_button"}],264:[function(require,module,exports){
module.exports={className:{default:{container:"D_F hd_n P_0 M_0 o_h J_x H_6UbO",item:"H_6D6F E_dRA",svgDefs:"W_0 H_0"}},_key:"2qYHHJ"};
},{"./src/molecules/tabs/styles/atomic_tabs.css":"./molecules/tabs/styles/atomic_tabs"}],265:[function(require,module,exports){
module.exports={className:{default:{menuContainer:"D_F em_N H_6Nds s_6NIX r_P cj_dRA ck_dRA p_R je_eDQ",menuButton:"em_N r_P y_1ACvVU A_6EqO b_0 I_T",menuSpan:"p_a L_0 W_6D6F T_0 H_6D6F D_F ab_C gl_C C_52qC A_6EqO o_h",text:"Q_fq7 o_h",chevron:"D_F en_0",rule:"b_Z14vXdP cn_ZvFCRQ M_fQoXz",tabList:"ha_n M_0 P_3Y3Gk",tabItem:"H_6VdP M_Ic8v9",closeAllButton:"y_1ACvVU A_6EqO b_0 I_T t_l C_Z2aVTcY P_1Eu7sD H_6VdP W_6D6F r_P I4_Z1owzy4",closeAllText:"D_F ab_C"}},_key:"Z1JiS5V"};
},{"./src/molecules/tabs/styles/atomic_tabs_menu.css":"./molecules/tabs/styles/atomic_tabs_menu"}],"./molecules/theme_provider":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function wrappedThemeProvider(e){return _react2.default.createClass({displayName:"WrappedThemeProvider",childContextTypes:{getCss:_react.PropTypes.func,getTheme:_react.PropTypes.func,getThemeMode:_react.PropTypes.func},getChildContext:function(){var e=this;return{getCss:function(t,r){return(0,_css2.default)(t,Object.assign({},r,{themeMode:e.props.themeMode,theme:e.props.theme,themeCombo:e.props.themeMode+"_"+e.props.theme}))},getTheme:function(){return e.props.theme},getThemeMode:function(){return e.props.themeMode}}},render:function(){return _react2.default.createElement(e,_extends({key:this.props.theme+"-"+this.props.themeMode,ref:"childComponent"},this.props))}})}exports.__esModule=!0,exports.provide=exports.mapStateToProps=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};exports.wrappedThemeProvider=wrappedThemeProvider;var _react=require("react"),_react2=_interopRequireDefault(_react),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_reactRedux=require("react-redux"),_themes=require("../../platform/theming/themes"),_object=require("../../platform/utils/object"),_reducers_selectors=require("../../reducers_selectors"),mapStateToProps=exports.mapStateToProps=function(e){var t=(0,_reducers_selectors.selectors)(e),r=t.getFeaturesSelectors,o=r();return{theme:o.getSetting("theme"),themeMode:o.getSetting("themeMode")}},provide=exports.provide=function(e){return(0,_reactRedux.connect)(mapStateToProps)(wrappedThemeProvider(e))};
},{"../../platform/theming/themes":"./platform/theming/themes","../../platform/utils/object":"./platform/utils/object","../../reducers_selectors":"./reducers_selectors","react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-redux":"./node_modules/react-redux/lib/index.js"}],"./molecules/timezone_check/actions":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function storeLastObservedTimezone(e,t,n){if(e.config.udb&&(!t||t.server!==n.server||t.client!==n.client)){var r;e.udbClient.write((r={},r[_constants.UDBKeys.YM_LAST_OBSERVED_TZ]=JSON.stringify(n),r))}}function promptForPossibleTimezoneChange(e,t){var n=t.geoLocation,r=t.serverInferredTimezone,i=t.lastObservedTimezone,o=_jstz2.default.determine(),s=o&&o.name(),a=e.getStore(_mail2.default),c=a.getActiveAccountId();storeLastObservedTimezone(e,i,{client:s,server:r}),i&&(n&&r!==i.server||s!==i.client&&s!==r)&&e.dispatch(_react_action_constants.mail.TIMEZONE_CHANGE_DETECTED,{accountId:c})}function rejectTimezoneChange(e){e.dispatch(_react_action_constants.mail.PREFERRED_TIMEZONE_CHANGE_REJECTED)}exports.__esModule=!0,exports.promptForPossibleTimezoneChange=promptForPossibleTimezoneChange,exports.rejectTimezoneChange=rejectTimezoneChange;var _jstz=require("jstz"),_jstz2=_interopRequireDefault(_jstz),_constants=require("../../platform/udb_client/constants"),_react_action_constants=require("../../platform/react_action_constants"),_mail=require("../../stores/mail"),_mail2=_interopRequireDefault(_mail);
},{"../../platform/react_action_constants":"./platform/react_action_constants","../../platform/udb_client/constants":"./platform/udb_client/constants","../../stores/mail":"./stores/mail","jstz":"./node_modules/jstz/index.js"}],266:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.TimezoneChangeRequestedNotification=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_button=require("../../atoms/button"),_button2=_interopRequireDefault(_button),_button3=require("../../atoms/constants/button"),_actions=require("./actions"),_notification=require("./styles/notification"),_notification2=_interopRequireDefault(_notification),_css=require("react-atomic-css/css"),_css2=_interopRequireDefault(_css),_route=require("../../platform/utils/route"),_mail_constants=require("../../platform/mail_constants"),classNames=(0,_css2.default)(_notification2.default),TimezoneChangeRequestedNotification=exports.TimezoneChangeRequestedNotification=_react2.default.createClass({displayName:"TimezoneChangeRequestedNotification",contextTypes:{executeAction:_react.PropTypes.func,navigateTo:_react.PropTypes.func},handleChangeAccept:function(){this.context.navigateTo({route:(0,_route.buildSettingsRoute)({settingsGroupId:_mail_constants.SettingsTab.VIEWING_EMAIL,accountId:this.props.accountId})})},handleChangeReject:function(){this.context.executeAction(_actions.rejectTimezoneChange)},render:function(){return _react2.default.createElement("div",{className:classNames.container},_react2.default.createElement("span",{className:classNames.msgContainer},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"timezone.change_msg",defaultMessage:"New time zone detected."})),_react2.default.createElement(_button2.default,{kind:_button3.Kinds.CHROMELESS,onClick:this.handleChangeAccept},_react2.default.createElement("span",{"data-test-id":"primary-button",className:classNames.primaryButton},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"timezone.change_accept",defaultMessage:"Update my location"}))),_react2.default.createElement(_button2.default,{kind:_button3.Kinds.CHROMELESS,onClick:this.handleChangeReject},_react2.default.createElement("span",{"data-test-id":"secondary-button",className:classNames.secondaryButton},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"timezone.change_reject",defaultMessage:"Ignore"}))))}});
},{"../../atoms/button":"./atoms/button","../../atoms/constants/button":"./atoms/constants/button","../../platform/mail_constants":"./platform/mail_constants","../../platform/utils/route":"./platform/utils/route","./actions":"./molecules/timezone_check/actions","./styles/notification":267,"react":"./node_modules/react/react.js","react-atomic-css/css":"./node_modules/react-atomic-css/css.js","react-intl":"./node_modules/react-intl/lib/index.js"}],267:[function(require,module,exports){
module.exports={className:{default:{container:"E_fq7",msgContainer:"E_fq7",primaryButton:"A_6EWk C_Z2aVTcY P_fq7",secondaryButton:"A_6EWk P_fq7"}},_key:"m8Htr"};
},{"./src/molecules/timezone_check/styles/atomic_notification.css":"./molecules/timezone_check/styles/atomic_notification"}],268:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.createLinkEnhancerClient=exports.createYQLClient=exports.createRapidClient=exports.createGifCategoriesClient=exports.createHeartbeatAPIClient=exports.createUdbClient=exports.createVideoAPIClient=exports.createGeminiAPIClient=exports.createCredstoreClient=exports.createAutoSuggestClient=exports.createAthenaClient=exports.createBootcampClient=exports.createMailAPIClient=void 0;var _client=require("./gif_categories_client/client"),_client2=_interopRequireDefault(_client),_mail_api_client=require("./mail_api_client"),_mail_api_client2=_interopRequireDefault(_mail_api_client),_gemini_api_client=require("./gemini_api_client"),_gemini_api_client2=_interopRequireDefault(_gemini_api_client),_video_api_client=require("./video_api_client"),_video_api_client2=_interopRequireDefault(_video_api_client),_xobni_client=require("./xobni_client"),_xobni_client2=_interopRequireDefault(_xobni_client),_credstore_client=require("./credstore_client"),_credstore_client2=_interopRequireDefault(_credstore_client),_heartbeat_api_client=require("./heartbeat_api_client"),_heartbeat_api_client2=_interopRequireDefault(_heartbeat_api_client),_bootcamp_client=require("./bootcamp_client"),_bootcamp_client2=_interopRequireDefault(_bootcamp_client),_athena_client=require("./athena_client"),_athena_client2=_interopRequireDefault(_athena_client),_rapid_client=require("./rapid_client"),_rapid_client2=_interopRequireDefault(_rapid_client),_yql_client=require("./yql_client"),_yql_client2=_interopRequireDefault(_yql_client),_link_enhancer_client=require("./link_enhancer_client"),_link_enhancer_client2=_interopRequireDefault(_link_enhancer_client),_constants=require("./bootcamp_client/constants"),_udb_client=require("./udb_client"),_udb_client2=_interopRequireDefault(_udb_client),_generic=require("./utils/generic"),_mail_constants=require("./mail_constants"),createMailAPIClient=exports.createMailAPIClient=function(e,t){var i=e.loginHash,n=e.mailWssid,r=e.crumb,a=e.cookie,l=e.loggerParams,o=e.timezone,c=e.httpRetry;return new _mail_api_client2.default({appId:_mail_constants.appId,loginHash:i,wssid:n,crumb:r,cookie:a,loggerParams:(0,_generic.isBrowser)()?{}:l,loggerName:_mail_constants.ApiClientLoggerNames.MailAPIClient,timezone:o,requestQueue:t,executeRequestsSequentially:(0,_generic.isBrowser)(),httpRetry:c})},createBootcampClient=exports.createBootcampClient=function(e,t){var i=e.loginHash,n=e.mailWssid,r=e.crumb,a=e.cookie,l=e.loggerParams,o=e.timezone,c=void 0===o?{}:o,_=e.region,s=e.bootcampHost,u=e.httpRetry;return new _bootcamp_client2.default({appId:_mail_constants.appId,loginHash:i,cookie:a,crumb:r,wssid:n,bootcampHost:s,timezone:c.name,strategy:_constants.BROWSER_TO_NODE_STRATEGY,requestQueue:t,executeRequestsSequentially:(0,_generic.isBrowser)(),region:_,httpRetry:u,loggerName:_mail_constants.ApiClientLoggerNames.BootcampClient,loggerParams:(0,_generic.isBrowser)()?{}:l})},createAthenaClient=exports.createAthenaClient=function(e){var t=e.loginHash,i=e.mailWssid,n=e.crumb,r=e.cookie,a=e.athenaHost;return new _athena_client2.default({appId:_mail_constants.appId,loginHash:t,cookie:r,crumb:n,wssid:i,athenaHost:a,strategy:_constants.BROWSER_TO_NODE_STRATEGY,executeRequestsSequentially:(0,_generic.isBrowser)(),loggerName:_mail_constants.ApiClientLoggerNames.AthenaClient})},createAutoSuggestClient=exports.createAutoSuggestClient=function(e){var t=e.loginHash,i=e.crumb,n=e.mailWssid,r=e.httpRetry;return new _xobni_client2.default({loginHash:t,crumb:i,wssid:n,host:_mail_constants.XOBNI_HOST,httpRetry:r})},createCredstoreClient=exports.createCredstoreClient=function(e){var t=e.guid,i=e.loginHash,n=e.crumb,r=e.mailWssid;return new _credstore_client2.default({appId:_mail_constants.appId,crumb:n,guid:t,loginHash:i,wssid:r,host:_mail_constants.CREDSTORE_HOST})},createGeminiAPIClient=exports.createGeminiAPIClient=function(e){var t=e.loginHash,i=e.crumb,n=e.cookie,r=e.userAgent,a=e.remoteAddress,l=e.environment,o=e.region,c=e.locale,_=e.sectionIdsToCache;return new _gemini_api_client2.default({appId:_mail_constants.appId,loginHash:t,cookie:n,crumb:i,userAgent:r,remoteAddress:a,environment:l,region:o,locale:c,sectionIdsToCache:_,loggerName:_mail_constants.ApiClientLoggerNames.GeminiAPIClient})},createVideoAPIClient=exports.createVideoAPIClient=function(e){var t=e.loginHash,i=e.crumb,n=e.cookie,r=e.environment,a=e.region,l=e.locale,o=e.colo;return new _video_api_client2.default({loginHash:t,crumb:i,cookie:n,environment:r,region:a,locale:l,colo:o})},createUdbClient=exports.createUdbClient=function(e,t){var i=e.cookie,n=e.crumb,r=e.httpRetry;return new _udb_client2.default({cookie:i,crumb:n,httpRetry:r,requestQueue:t})},createHeartbeatAPIClient=exports.createHeartbeatAPIClient=function(e){var t=e.loginHash,i=e.buildNumber,n=e.launchTime,r=e.crumb;return new _heartbeat_api_client2.default({buildNumber:i,crumb:r,launchTime:n,loginHash:t,loggerName:_mail_constants.ApiClientLoggerNames.HeartbeatAPIClient})},createGifCategoriesClient=exports.createGifCategoriesClient=function(e){var t=e.locale,i=e.loginHash;return new _client2.default({appId:_mail_constants.appId,locale:t,loginHash:i,loggerName:_mail_constants.ApiClientLoggerNames.GifCategories})},createRapidClient=exports.createRapidClient=function(){return _rapid_client2.default},createYQLClient=exports.createYQLClient=function(e){var t=e.locale;return new _yql_client2.default({locale:t})},createLinkEnhancerClient=exports.createLinkEnhancerClient=function(e){var t=e.crumb;return new _link_enhancer_client2.default({crumb:t})};
},{"./athena_client":271,"./bootcamp_client":278,"./bootcamp_client/constants":277,"./credstore_client":289,"./gemini_api_client":294,"./gif_categories_client/client":297,"./heartbeat_api_client":299,"./link_enhancer_client":300,"./mail_api_client":"./platform/mail_api_client","./mail_constants":"./platform/mail_constants","./rapid_client":"./platform/rapid_client","./udb_client":312,"./utils/generic":"./platform/utils/generic","./video_api_client":318,"./xobni_client":323,"./yql_client":327}],"./platform/assets":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function makeGetAssetUrlFn(e){if(!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e)))throw new TypeError(e+" is not an object");return function(t){return e[t]?_asset_config.assetHost.replace(endSlash,"")+slash+e[t].replace(startSlash,""):t}}exports.__esModule=!0,exports.getURL=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.makeGetAssetUrlFn=makeGetAssetUrlFn;var _asset_config=require("../../config/asset_config.json"),_binary_assets=require("../../config/binary_assets.json"),_binary_assets2=_interopRequireDefault(_binary_assets),slash="/",startSlash=/^\s*\//,endSlash=/\/\s*$/,getURL=exports.getURL=makeGetAssetUrlFn(_binary_assets2.default);
},{"../../config/asset_config.json":"./config/asset_config.json","../../config/binary_assets.json":"./config/binary_assets.json"}],269:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_mail_constants=require("../mail_constants"),URL_PREFIX=_mail_constants.YCPI_PATH_PREFIX+"/athena_api",BrowserToNodeRequest=function(){function t(){_classCallCheck(this,t)}return t.prototype.unSubscribeApi=function(t){var e=t.crumb,r=URL_PREFIX+"/unsubscribe?crumb="+e,n=new _http_transport2.default("POST",r);return n.setHeader("Accept","application/json"),n.withCredentials=!0,n.send(t).then(function(t){return JSON.parse(t.text)})},t}();exports.default=BrowserToNodeRequest,module.exports=exports.default;
},{"../http_transport":"./platform/http_transport","../mail_constants":"./platform/mail_constants"}],270:[function(require,module,exports){
"use strict";exports.__esModule=!0;var REQUEST_TIMEOUT=exports.REQUEST_TIMEOUT=1e3,BROWSER_TO_NODE_STRATEGY=exports.BROWSER_TO_NODE_STRATEGY="BROWSER_TO_NODE_STRATEGY",NODE_TO_ATHENA_STRATEGY=exports.NODE_TO_ATHENA_STRATEGY="NODE_TO_ATHENA_STRATEGY",PLATFORMS=exports.PLATFORMS=["WEB_DESKTOP","WEB_MOBILE","MOBILE_IOS","MOBILE_ANDROID"];
},{}],271:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _StrategyToRequest,_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_ymreqid=require("../ymreqid"),_ymreqid2=_interopRequireDefault(_ymreqid),_mail_constants=require("../mail_constants"),_base_client=require("../base_client"),_base_client2=_interopRequireDefault(_base_client),_browser_to_node_request=require("./browser_to_node_request"),_browser_to_node_request2=_interopRequireDefault(_browser_to_node_request),_node_to_athena_request=require("./node_to_athena_request"),_node_to_athena_request2=_interopRequireDefault(_node_to_athena_request),_constants=require("./constants"),MAIL_UNSUBSCRIBE_MODULE_ID="unsubscribemail",StrategyToRequest=(_StrategyToRequest={},_StrategyToRequest[_constants.BROWSER_TO_NODE_STRATEGY]=_browser_to_node_request2.default,_StrategyToRequest[_constants.NODE_TO_ATHENA_STRATEGY]=_node_to_athena_request2.default,_StrategyToRequest),AthenaClient=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var n=_possibleConstructorReturn(this,e.call(this,r)),s=r.appId,a=r.cookie,i=r.headers,o=r.loginHash,_=r.athenaHost,u=r.timezone,l=r.strategy;return(0,_invariant2.default)(l===_constants.BROWSER_TO_NODE_STRATEGY||l===_constants.NODE_TO_ATHENA_STRATEGY,"Invalid strategy "+l),n.appId=s,n.cookie=a,n.athenaHost=_,n.timezone=u,n.strategy=l,n._request=new StrategyToRequest[l]({headers:i,athenaHost:_,cookie:a}),o&&(n.ymreqidGenerator=new _ymreqid2.default(o,_mail_constants.YMREQ_CLIENT_ID,_mail_constants.SESSION_ID)),n}return _inherits(t,e),t.prototype.getDefaultUrlParams=function(){return{appid:this.appId,crumb:this.crumb,wssid:this.wssid,clientId:MAIL_UNSUBSCRIBE_MODULE_ID,timezone:this.timezone,ymreqid:this.ymreqidGenerator.generate()}},t.prototype.request=function(e,t){return this[e](e,t)},t.prototype.unSubscribeItems=function(e,t){var r=this.getDefaultUrlParams(),n=r.wssid,s=r.crumb,a={apiName:e,wssid:n,crumb:s},i=void 0,o=void 0;if(this.strategy===_constants.BROWSER_TO_NODE_STRATEGY){var _=t.originalSendersInfo;i=_.filter(function(e){return e.name&&e.email}).map(function(e){return{email:e.email,from:e.name}}),o=this._request.unSubscribeApi(Object.assign({},r,{senders:i}))}else o=this._request.unSubscribeApi(Object.assign({},r,t));return this.logRequest(o,a),o},t.prototype.getUserSegmentData=function(e,t){var r={apiName:e},n=this._request.userSegmentApi(Object.assign({appId:this.appId},t));return this.logRequest(n,r,"userSegmentDataCall"),n},t}(_base_client2.default);exports.default=AthenaClient,module.exports=exports.default;
},{"../base_client":"./platform/base_client","../invariant":"./platform/invariant","../mail_constants":"./platform/mail_constants","../ymreqid":"./platform/ymreqid","./browser_to_node_request":269,"./constants":270,"./node_to_athena_request":272}],272:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_transforms=require("./transforms"),_constants=require("./constants"),NodeAthenaRequest=function(){function t(e){var s=e.athenaHost,r=e.cookie,n=e.headers;_classCallCheck(this,t),this.cookie=r,this.athenaHost=s,this.headers=n}return t.prototype._setCustomHeaders=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&Object.keys(e).forEach(function(s){t.setHeader(s,e[s])})},t.prototype.unSubscribeApi=function(t){var e=t.senders,s=t.wssid,r=this.athenaHost+"/v1/commsdata/getunsubsuggestions?crumb="+s,n=new _http_transport2.default("POST",r);return n.setHeader("Accept","application/json"),n.setCookieHeader(this.cookie),this._setCustomHeaders(n,this.headers),n.withCredentials=!0,n.send({senders:e}).then(function(t){return JSON.stringify((0,_transforms.transformUnSubscribeResponse)(JSON.parse(t.text)))})},t.prototype.userSegmentApi=function(t){var e=this.athenaHost+"/v1/commsdata/userprofile?",s=new _http_transport2.default("GET",e,_constants.REQUEST_TIMEOUT);return s.setHeader("Accept","application/json"),s.setCookieHeader(this.cookie),this._setCustomHeaders(s,this.headers),s.withCredentials=!0,s.send(t).then(function(t){return(0,_transforms.transformUserSegmentResponse)(JSON.parse(t.text))})},t}();exports.default=NodeAthenaRequest,module.exports=exports.default;
},{"../http_transport":"./platform/http_transport","./constants":270,"./transforms":273}],273:[function(require,module,exports){
"use strict";function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}function transformUnSubscribeResponse(r){if(r&&Array.isArray((0,_object.getIn)(r,"commsDataUnsubscribe.result.0.unsubscribe.unsubscribeList")))return(0,_object.getIn)(r,"commsDataUnsubscribe.result.0.unsubscribe.unsubscribeList");throw new _mail_error2.default("AthenaApiClient.DataError",r)}function transformUserSegmentResponse(r){if(r&&Array.isArray((0,_object.getIn)(r,"commsDataUserProfile.result.0.userProfile.attributesList"))){var e=(0,_object.getIn)(r,"commsDataUserProfile.result.0.userProfile.attributesList");return e.filter(function(r){return!(!r||!r.platform)&&_constants.PLATFORMS.indexOf(r.platform)!==-1}).reduce(function(r,e){var t;return _extends({},r,(t={},t[e.platform]=e,t))},{})}return{}}exports.__esModule=!0;var _extends=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r};exports.transformUnSubscribeResponse=transformUnSubscribeResponse,exports.transformUserSegmentResponse=transformUserSegmentResponse;var _mail_error=require("../mail_error"),_mail_error2=_interopRequireDefault(_mail_error),_object=require("../utils/object"),_constants=require("./constants");
},{"../mail_error":"./platform/mail_error","../utils/object":"./platform/utils/object","./constants":270}],"./platform/base_client":[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),_logger=require("./logger"),_logger2=_interopRequireDefault(_logger),_mail_error=require("../mail_error"),_mail_error2=_interopRequireDefault(_mail_error),_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_generic=require("../utils/generic"),_api_logger=require("../utils/api_logger"),ApiLogger=_interopRequireWildcard(_api_logger),BaseClient=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),(0,_invariant2.default)(r.loggerName,"loggerName is missing"),this.loggerName=r.loggerName,this.loggerParams=r.loggerParams||{},r.crumb&&(this.crumbValue=r.crumb),r.wssid&&(this.wssidValue=r.wssid)}return e.prototype.setRequestBlocked=function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,_generic.isBrowser)()&&(e.requestBlocked=r)},e.prototype.isRequestBlocked=function(){var r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!!(0,_generic.isBrowser)()&&(r&&e.requestBlocked)},e.prototype.getRequestBlockedPromise=function(){return Promise.reject(new _mail_error2.default("BaseClient.RequestBlocked"))},e.prototype.logRequest=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=Object.assign({},this.loggerParams,r),n=t||this.loggerName,o=_logger2.default.feature(n,i);return e.then(function(e){return o.logSuccessAndLatency(),e}).catch(function(e){throw ApiLogger.apiErrorLogger(_logger2.default,n,i,e),e})},_createClass(e,[{key:"crumb",get:function(){return this.crumbValue||""},set:function(e){e&&(this.crumbValue=e)}},{key:"wssid",get:function(){return this.wssidValue||""},set:function(e){e&&(this.wssidValue=e)}}]),e}();BaseClient.requestBlocked=!1,exports.default=BaseClient,module.exports=exports.default;
},{"../invariant":"./platform/invariant","../mail_error":"./platform/mail_error","../utils/api_logger":"./platform/utils/api_logger","../utils/generic":"./platform/utils/generic","./logger":"./platform/base_client/logger"}],"./platform/base_client/logger":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger);exports.default=_norrinLogger2.default.create("norrin/base_client"),module.exports=exports.default;
},{"norrin-logger":"./node_modules/norrin-logger/index.js"}],274:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function fireComScoreBeacon(e,r){var o=document.charset||document.defaultCharset||"",t=window.location.href,n={c1:2,c2:7241469,c5:r,c7:t,ns__t:Date.now(),ns_c:o};return e&&e.LTT!==-1&&(n.c14=e.LTT),e&&e.ageCode!==-1&&e.genderCode!==-1&&(n.c15=e.ageCode+"$"+e.genderCode),(0,_beacon.sendBeacon)("https://sb.scorecardresearch.com/p?"+_querystring2.default.stringify(n),!1)}exports.__esModule=!0,exports.fireComScoreBeacon=fireComScoreBeacon;var _beacon=require("../../../platform/utils/beacon"),_querystring=require("querystring"),_querystring2=_interopRequireDefault(_querystring);
},{"../../../platform/utils/beacon":"./platform/utils/beacon","querystring":"querystring"}],275:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function fireMarketingBeacon(){var e={src:6589630,type:"nrn",cat:"nrnfsttm",u1:window.AppBootstrapData.guidHash,u2:"",dc_lat:"",dc_rdid:"",tag_for_child_directed_treatment:"",ord:1};(0,_beacon.sendIframeBeacon)("https://6589630.fls.doubleclick.net/activityi;"+_querystring2.default.stringify(e,";")+"?")}exports.__esModule=!0,exports.fireMarketingBeacon=fireMarketingBeacon;var _beacon=require("../../../platform/utils/beacon"),_querystring=require("querystring"),_querystring2=_interopRequireDefault(_querystring);
},{"../../../platform/utils/beacon":"./platform/utils/beacon","querystring":"querystring"}],276:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_multipart_parser=require("../multipart_parser"),_multipart_parser2=_interopRequireDefault(_multipart_parser),_through=require("../../vendor/through"),_through2=_interopRequireDefault(_through),_mail_error=require("../mail_error"),_mail_error2=_interopRequireDefault(_mail_error),_mail_constants=require("../mail_constants"),_querystring=require("querystring"),_constants=require("./constants"),URL_PREFIX=_mail_constants.YCPI_PATH_PREFIX+"/bootcamp_api",BrowserToNodeRequest=function(){function t(e){var r=e.httpRetry;_classCallCheck(this,t),this.httpRetry=r}return t.prototype.searchStream=function(t,e){var r=URL_PREFIX+"/search",n=new _http_transport2.default("GET",r,{timeout:_constants.REQUEST_TIMEOUT,httpRetry:this.httpRetry}),a=0;n.setHeader("Accept","multipart/form-data"),n.withCredentials=!0;var i=n.createStream(t),o=i.pipe((0,_multipart_parser2.default)({boundary:_constants.MULTIPART_BOUNDARY,useBuffer:!1,consolidate:!0})).pipe((0,_through2.default)(function(t){try{var r=t.slice(a);if(a=t.length,0===r.length)return;var n=r.reduce(function(t,r){var n=JSON.parse(r);return e.logLatency(n),Object.keys(n).forEach(function(e){t[e]||(t[e]={}),Object.keys(n[e]).forEach(function(r){t[e][r]=n[e][r]})}),t},{});this.emit("data",n)}catch(t){this.emit("data",{status:500,error:_mail_error2.default.errorify(t)})}}));return i.on("error",function(t){return o.emit("error",t)}),o},t.prototype.itemsApi=function(t){var e=URL_PREFIX+"/items",r=new _http_transport2.default("GET",e,{httpRetry:this.httpRetry});return r.setHeader("Accept","application/json"),r.withCredentials=!0,r.send(t).then(function(t){return JSON.parse(t.text)})},t.prototype.gifsApi=function(t){var e=URL_PREFIX+"/gifs",r=new _http_transport2.default("GET",e,{httpRetry:this.httpRetry});return r.setHeader("Accept","application/json"),r.withCredentials=!0,r.send(t).then(function(t){return JSON.parse(t.text)})},t.prototype.suggestionsApi=function(t){var e=URL_PREFIX+"/suggestions",r=new _http_transport2.default("GET",e,{httpRetry:this.httpRetry});return r.setHeader("Accept","application/json"),r.withCredentials=!0,r.send(t).then(function(t){return JSON.parse(t.text)})},t.prototype.contentProvidersApi=function(t){var e=URL_PREFIX+"/contentProviders",r=new _http_transport2.default("GET",e,{httpRetry:this.httpRetry});return r.setHeader("Accept","application/json"),r.withCredentials=!0,r.send(t).then(function(t){return JSON.parse(t.text)})},t.prototype.linkContentProviderApi=function(t){var e=t.redirectUrl,r=t.errorUrl,n=t.q,a=t.unlink?"/remove":"",i=URL_PREFIX+"/contentProviders/"+t.provider+a+"?"+(0,_querystring.stringify)(n),o=new _http_transport2.default("POST",i,{httpRetry:this.httpRetry});return o.setHeader("Accept","application/json"),o.withCredentials=!0,o.send({redirectUrl:e,errorUrl:r}).then(function(t){return JSON.parse(t.text)})},t}();exports.default=BrowserToNodeRequest,module.exports=exports.default;
},{"../../vendor/through":"./vendor/through/browser","../http_transport":"./platform/http_transport","../mail_constants":"./platform/mail_constants","../mail_error":"./platform/mail_error","../multipart_parser":306,"./constants":277,"querystring":"querystring"}],277:[function(require,module,exports){
"use strict";exports.__esModule=!0;var MULTIPART_BOUNDARY=exports.MULTIPART_BOUNDARY="Boundary_721950_932302703_1435368466480",REQUEST_TIMEOUT=exports.REQUEST_TIMEOUT=3e4,BROWSER_TO_BOOTCAMP_STRATEGY=exports.BROWSER_TO_BOOTCAMP_STRATEGY="BROWSER_TO_BOOTCAMP_STRATEGY",BROWSER_TO_NODE_STRATEGY=exports.BROWSER_TO_NODE_STRATEGY="BROWSER_TO_NODE_STRATEGY",NODE_TO_BOOTCAMP_STRATEGY=exports.NODE_TO_BOOTCAMP_STRATEGY="NODE_TO_BOOTCAMP_STRATEGY";
},{}],278:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _StrategyToRequest,_base_client=require("../base_client"),_base_client2=_interopRequireDefault(_base_client),_logger=require("./logger"),_logger2=_interopRequireDefault(_logger),_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_object=require("../utils/object"),_ymreqid=require("../ymreqid"),_ymreqid2=_interopRequireDefault(_ymreqid),_mail_constants=require("../mail_constants"),_browser_to_node_request=require("./browser_to_node_request"),_browser_to_node_request2=_interopRequireDefault(_browser_to_node_request),_node_to_bootcamp_request=require("./node_to_bootcamp_request"),_node_to_bootcamp_request2=_interopRequireDefault(_node_to_bootcamp_request),_constants=require("./constants"),_omit=require("lodash/omit"),_omit2=_interopRequireDefault(_omit),_api_logger=require("../utils/api_logger"),_search_stream_logger=require("./search_stream_logger"),_search_stream_logger2=_interopRequireDefault(_search_stream_logger),_querystring=require("querystring"),MAIL_SEARCH_MODULE_ID="mailsearch",StrategyToRequest=(_StrategyToRequest={},_StrategyToRequest[_constants.BROWSER_TO_NODE_STRATEGY]=_browser_to_node_request2.default,_StrategyToRequest[_constants.NODE_TO_BOOTCAMP_STRATEGY]=_node_to_bootcamp_request2.default,_StrategyToRequest),SUPPORTED_REGIONS=(0,_object.mirrorKeys)(["us","uk","de","fr","it","es","ch","at","nl","no","dk","se","fi","au","br","hk","tw","ca","mx","ar","in","sg","ie","co","cl","ve","pe"]),BootcampAPIClient=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var s=_possibleConstructorReturn(this,e.call(this,r)),i=r.appId,o=r.cookie,a=r.headers,n=r.loginHash,u=r.bootcampHost,_=void 0===u?"https://prod1psearch.mail.yahoo.com":u,c=r.timezone,l=r.executeRequestsSequentially,d=r.requestQueue,q=r.strategy,m=r.region,p=r.parseXML,h=r.httpRetry;return(0,_invariant2.default)(q===_constants.BROWSER_TO_NODE_STRATEGY||q===_constants.NODE_TO_BOOTCAMP_STRATEGY,"Invalid strategy "+q),s.strategy=q,s._request=new StrategyToRequest[q]({headers:a,bootcampHost:_,cookie:o,httpRetry:h}),s.appId=i,s.cookie=o,s.bootcampHost=_,s.timezone=c,s.executeRequestsSequentially=l,s.requestQueue=d,s.region=m,s.parseXML=p,n&&(s.ymreqidGenerator=new _ymreqid2.default(n,_mail_constants.YMREQ_CLIENT_ID,_mail_constants.SESSION_ID)),s}return _inherits(t,e),t.prototype.getDefaultUrlParams=function(){return{appid:this.appId,crumb:this.crumb,wssid:this.wssid,clientId:MAIL_SEARCH_MODULE_ID,timezone:this.timezone,allowGoogleDocs:1,ymreqid:this.ymreqidGenerator.generate()}},t.prototype.getOffsetFromUrl=function(e){if(e){var t=(0,_querystring.parse)(e);return t&&t.cursor}return"0"},t.prototype.searchStream=function(e,t){e="search";var r=this.getDefaultUrlParams(),s=r.ymreqid,i=Object.assign({},this.loggerParams,{apiName:e,ymreqid:s,crumb:this.crumb}),o=_logger2.default.feature(_mail_constants.ApiClientLoggerNames.BootcampClient,i),a=t,n=a.expand;(0,_invariant2.default)(n,"Bootcamp SRP expand parameter is required"),t=Object.assign({},r,t);var u=Object.assign({multipart:!0},t);this.strategy===_constants.NODE_TO_BOOTCAMP_STRATEGY&&Object.assign(u,{parseXML:this.parseXML,adCount:2,sourceTag:t.sourceTag,market:SUPPORTED_REGIONS[this.region]||"us"});var _=t,c=_.folders,l=void 0===c?[]:c,d=_.accountIds,q=void 0===d?[]:d,m=_.emailAddresses,p=void 0===m?[]:m;l=[].concat(l),q=[].concat(q),p=[].concat(p),l.length?u.folders=l.join(","):q.length&&(u.accountIds=q.join(",")),p.length&&(u.contentId=p.map(function(e){return"smtp:"+e}).join(",")),u=(0,_omit2.default)(u,["referrer","name","listContentType","listFilter","emailAddresses"]);var h=new _search_stream_logger2.default(i),g=void 0;return g=this.executeRequestsSequentially?this.requestQueue.addStream(this._request.searchStream.bind(this,u,h),e):this._request.searchStream(u,h),g.on("end",o.logSuccessAndLatency),g.on("error",function(e){return(0,_api_logger.apiErrorLogger)(_logger2.default,_mail_constants.ApiClientLoggerNames.BootcampClient,i,e)}),g},t.prototype.searchItems=function(e,t){var r=this.getDefaultUrlParams(),s=r.ymreqid,i={apiName:e,ymreqid:s,crumb:this.crumb},o=void 0;return o=this.isRequestBlocked()?this.getRequestBlockedPromise():this.executeRequestsSequentially?this.requestQueue.add(this._request.itemsApi.bind(this,Object.assign({},r,t)),e):this._request.itemsApi(Object.assign({},r,t)),this.logRequest(o,i),o},t.prototype.searchGifs=function(e,t){var r=this.getDefaultUrlParams(),s=r.ymreqid,i={apiName:e,ymreqid:s,crumb:this.crumb},o=void 0;return t.offset=this.getOffsetFromUrl(t.nextItemsUrl),o=this.isRequestBlocked()?this.getRequestBlockedPromise():this.executeRequestsSequentially?this.requestQueue.add(this._request.gifsApi.bind(this,Object.assign({},r,t)),e):this._request.gifsApi(Object.assign({},r,t)),this.logRequest(o,i),o},t.prototype.searchSuggestions=function(e,t){var r=this.getDefaultUrlParams(),s=r.ymreqid,i={apiName:e,ymreqid:s,crumb:this.crumb},o=void 0;return o=this.isRequestBlocked()?this.getRequestBlockedPromise():this.executeRequestsSequentially?this.requestQueue.add(this._request.suggestionsApi.bind(this,Object.assign({},r,t)),e):this._request.suggestionsApi(Object.assign({},r,t)),this.logRequest(o,i),o},t.prototype.getContentProviders=function(e,t){var r=this.getDefaultUrlParams(),s=r.ymreqid,i={apiName:e,ymreqid:s,crumb:this.crumb},o=void 0;return o=this.isRequestBlocked()?this.getRequestBlockedPromise():this.executeRequestsSequentially?this.requestQueue.add(this._request.contentProvidersApi.bind(this,Object.assign({},r,t)),e):this._request.contentProvidersApi(Object.assign({},r,t)),this.logRequest(o,i),o},t.prototype.linkContentProvider=function(e,t){var r=this.getDefaultUrlParams(),s=r.ymreqid,i={apiName:e,ymreqid:s,crumb:this.crumb},o=void 0;return t.q=Object.assign({},r,t.q),t.unlink=t.unlink||!1,o=this.isRequestBlocked()?this.getRequestBlockedPromise():this.executeRequestsSequentially?this.requestQueue.add(this._request.linkContentProviderApi.bind(this,t),e):this._request.linkContentProviderApi(t),this.logRequest(o,i),o},t.prototype.createStream=function(e,t){return this[e](e,t)},t.prototype.request=function(e,t){return this[e](e,t)},t}(_base_client2.default);exports.default=BootcampAPIClient,module.exports=exports.default;
},{"../base_client":"./platform/base_client","../invariant":"./platform/invariant","../mail_constants":"./platform/mail_constants","../utils/api_logger":"./platform/utils/api_logger","../utils/object":"./platform/utils/object","../ymreqid":"./platform/ymreqid","./browser_to_node_request":276,"./constants":277,"./logger":279,"./node_to_bootcamp_request":281,"./search_stream_logger":282,"lodash/omit":"./node_modules/lodash/omit.js","querystring":"querystring"}],279:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger);exports.default=_norrinLogger2.default.create("norrin/bootcamp_client"),module.exports=exports.default;
},{"norrin-logger":"./node_modules/norrin-logger/index.js"}],280:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function groupMapper(e,t){return e.map(function(e){var n=e.itemType;return"THREAD"===n?{id:e.conversationId,messages:messageMapper(e.messages.reverse(),t)}:"MESSAGE"===n?{id:e.mid,messages:messageMapper([e],t)}:void 0})}function messageMapper(e){var t=function(e){return{email:e.id,name:e.name}};return e.map(function(e){var n=Number(e.creationDate)/1e3,a={id:e.mid,folder:{id:e.folderNumber.toString()},conversationId:e.conversationId,flags:{flagged:e.isFlagged,read:e.isRead},headers:{subject:e.subject||"",cc:e.ccList?e.ccList.map(t):[],bcc:e.bccList?e.bccList.map(t):[],to:e.toList?e.toList.map(t):[],from:e.fromList?e.fromList.map(t):[],date:n},snippet:e.snippet||"",attachments:attachmentMapper(e.attachments.map(function(t){return Object.assign({},t,{mid:e.mid,creationDate:e.creationDate,csid:e.csid})})).map(function(e){return e.attachment}),verifiedDomains:e.verifiedDomains||[]};return e.csid&&(a.csid=e.csid),a})}function peopleMapper(e){return e.map(function(e){var t,n,a=e.payload,i=a.id,s=(t={},t[i]=a,t),r=_mail_constants.ListContentTypes.PEOPLE,p=(n={},n[r]=[i],n),o=(0,_mapper2.default)({ep:r,contacts_info:s,contacts_by_ep:p});return{contactDetails:o}})}function attachmentMapper(e){return e.map(function(e){var t=e.mimeType.split("/"),n=t[0],a=t[1],i=e.partId,s=void 0===i?e.id:i,r=e.conversationId,p=e.csid,o=_mail_constants.Attachments.Dispositions,c=e.mid?(0,_message.convertV2IdToV3ImmutableId)(e.mid):void 0;return{attachment:{id:c?(0,_message.generateAttachmentId)({partId:s},c,!1):e.id,virus:"N",filename:e.name,size:e.size,partId:s,type:n,subtype:a,conversationId:r,csid:p,disposition:e.disposition||o.ATTACHMENT,downloadUrl:e.online?e.onlineContentLink:e.downloadLink,thumbnailUrl:e.thumbnail,isExternal:e.online||!1,creationDate:e.creationDate,documentId:e.documentId},message:{id:c,subject:e.subject}}})}function adsMapper(e){return(e||[]).map(function(e){var t=e.$;return{creativeId:t.ListingId||"",pencilAd:{adHeadline:(0,_unescape2.default)(t.title)||"",adSummary:(0,_unescape2.default)(t.description)||"",adImg:t.faviconUrl||"",adSource:t.siteHost||"",clickUrl:e.ClickUrl[0]._||"",beacon:"",impressionTrackingUrls:[],type:_constants.UsageType.PencilAdType,adFeedbackBeacon:""}}})}function gifsMapper(e){return(e||[]).map(function(e){var t=e.downloadLink,n=e.height,a=e.width,i=e.id,s=e.online,r=e.onlineContentLink,p=e.ownerId,o=e.source,c=e.thumbnail,m=e.thumbnailHeight,d=e.thumbnailWidth,u=e.thumbnails;return{downloadLink:t,height:n,width:a,id:i,online:s,onlineContentLink:r,ownerId:p,source:o,thumbnail:c,thumbnailHeight:m,thumbnailWidth:d,thumbnails:u}})}exports.__esModule=!0,exports.ItemMapper=void 0;var _ItemMapper,_unescape=require("lodash/unescape"),_unescape2=_interopRequireDefault(_unescape),_message=require("../utils/message"),_mail_constants=require("../mail_constants"),_mapper=require("../../platform/xobni_client/mapper"),_mapper2=_interopRequireDefault(_mapper),_constants=require("../gemini_api_client/constants"),ItemMapper=exports.ItemMapper=(_ItemMapper={},_ItemMapper[_mail_constants.ListContentTypes.MESSAGES]=groupMapper,_ItemMapper[_mail_constants.ListContentTypes.DOCUMENTS]=attachmentMapper,_ItemMapper[_mail_constants.ListContentTypes.IMAGES]=attachmentMapper,_ItemMapper[_mail_constants.ListContentTypes.PEOPLE]=peopleMapper,_ItemMapper[_mail_constants.ListContentTypes.ADS]=adsMapper,_ItemMapper[_mail_constants.ListContentTypes.GIFS]=gifsMapper,_ItemMapper);
},{"../../platform/xobni_client/mapper":325,"../gemini_api_client/constants":"./platform/gemini_api_client/constants","../mail_constants":"./platform/mail_constants","../utils/message":"./platform/utils/message","lodash/unescape":"./node_modules/lodash/unescape.js"}],281:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function searchTransformStream(t){return(0,_through2.default)(function(e){var r=this;try{var s=JSON.parse(e),o=s.status,a=s.response;if(401===o)throw new _mail_error2.default(_constants.AUTHENTICATION_INVALID_CREDENTIALS,{statusCode:o});if(!a||200!==o)throw new _mail_error2.default("BootcampApiClient.SearchError");if(a.verticals){var i=(0,_transforms.groupByContentType)(a.verticals,t);t.searchStreamLogger.logLatency(i),(0,_object.isEmpty)(i)||this.emit("data",JSON.stringify(i))}else if(a.ads){var n=new Buffer(a.ads,"base64").toString("ascii");t.parseXML(n,function(e,s){if(e)throw new _mail_error2.default("BootcampApiClient.SearchAdsError");var o=(0,_transforms.transformAdResponse)(s);t.searchStreamLogger.logLatency(o),r.emit("data",JSON.stringify(o))})}}catch(t){return this.emit("data",JSON.stringify({status:500,error:_mail_error2.default.errorify(t)}))}})}function _getDefaultGifUrl(t){var e=t.query,r=t.mailboxId,s=t.wssid,o=t.offset,a=Object.assign({vertical:"WEB",mimeTypes:"image/gif",source:"www@tumblr",limit:20,appid:"yourid",order:"desc",mailboxId:r,wssid:s,cursor:o},e?{query:e}:{}),i=GIF_HOST+GIF_PATHNAME+"?"+(0,_querystring.stringify)(a);return i}exports.__esModule=!0,exports.searchTransformStream=searchTransformStream;var _http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_multipart_parser=require("../multipart_parser"),_multipart_parser2=_interopRequireDefault(_multipart_parser),_multipart_generator=require("../multipart_generator"),_multipart_generator2=_interopRequireDefault(_multipart_generator),_through=require("../../vendor/through"),_through2=_interopRequireDefault(_through),_querystring=require("querystring"),_mail_error=require("../mail_error"),_mail_error2=_interopRequireDefault(_mail_error),_constants=require("../mail_error/constants"),_transforms=require("./transforms"),_omit=require("lodash/omit"),_omit2=_interopRequireDefault(_omit),_constants2=require("./constants"),_mail_constants=require("../mail_constants"),_object=require("../../platform/utils/object"),SearchSortOrderMapper={date_desc:"hero",date_asc:"time asc",attachment:"attachment desc",relevance:"score desc"},GIF_HOST="https://prod1psearch.mail.yahoo.com",GIF_PATHNAME="/v3/items",NodeToBootcampRequest=function(){function t(e){var r=e.bootcampHost,s=e.cookie,o=e.headers,a=e.httpRetry;_classCallCheck(this,t),this.cookie=s,this.bootcampHost=r,this.headers=o,this.httpRetry=a}return t.prototype._setCustomHeaders=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&Object.keys(e).forEach(function(r){t.setHeader(r,e[r])})},t.prototype.searchStream=function(t,e){var r=this.bootcampHost+"/v3/srp?",s=new _http_transport2.default("GET",r,{timeout:_constants2.REQUEST_TIMEOUT,httpRetry:this.httpRetry}),o=(0,_omit2.default)(t,"keyword");s.setHeader("Accept","multipart/form-data"),s.setCookieHeader(this.cookie),this._setCustomHeaders(s,this.headers),s.withCredentials=!0,o.query=t.keyword;var a=t.sortOrder,i=void 0===a?_mail_constants.SortOrder.DATE_DESC:a;o.order=SearchSortOrderMapper[i],"hero"===o.order&&(o.herocount=3);var n=s.createStream(o),p=n.pipe((0,_multipart_parser2.default)({boundary:_constants2.MULTIPART_BOUNDARY})).pipe(searchTransformStream({timezone:t.timezone,formatDateUsingUTC:"false"!==t.formatDateUsingUTC,parseXML:t.parseXML,searchStreamLogger:e})).pipe((0,_multipart_generator2.default)({boundary:_constants2.MULTIPART_BOUNDARY,headers:{"Content-Type":"application/json"}}));return n.on("error",function(t){return p.emit("error",t)}),p},t.prototype.itemsApi=function(t){var e=t.wssid,r=t.url+"&wssid="+e,s=new _http_transport2.default("GET",r,{httpRetry:this.httpRetry}),o=t.ymreqid,a=t.listContentType,i=t.timezone;return s.setHeader("Accept","application/json"),s.setCookieHeader(this.cookie),this._setCustomHeaders(s,this.headers),s.withCredentials=!0,s.send({ymreqid:o}).then(function(t){return JSON.stringify((0,_transforms.transformItemsResponse)(JSON.parse(t.text),{listContentType:a},{timezone:i}))})},t.prototype.gifsApi=function(t){var e=t.wssid,r=t.query,s=t.offset,o=t.mailboxId,a=t.ymreqid,i=t.timezone,n=_getDefaultGifUrl({query:r,mailboxId:o,wssid:e,offset:s}),p=new _http_transport2.default("GET",n,{httpRetry:this.httpRetry});return p.setHeader("Accept","application/json"),p.setCookieHeader(this.cookie),this._setCustomHeaders(p,this.headers),p.withCredentials=!0,p.send({ymreqid:a}).then(function(t){return JSON.stringify((0,_transforms.transformItemsResponse)(JSON.parse(t.text),{listContentType:_mail_constants.ListContentTypes.GIFS},{timezone:i}))})},t.prototype.suggestionsApi=function(t){var e=this.bootcampHost+"/v3/suggestions?",r=new _http_transport2.default("GET",e,{httpRetry:this.httpRetry});return r.setHeader("Accept","multipart/form-data"),r.setCookieHeader(this.cookie),this._setCustomHeaders(r,this.headers),r.withCredentials=!0,new Promise(function(e,s){r.createStream(Object.assign({multipart:!0},t)).on("error",s).pipe((0,_multipart_parser2.default)({boundary:_constants2.MULTIPART_BOUNDARY})).once("data",function(r){var o=void 0;try{o=(0,_transforms.transformSuggestionsResponse)(JSON.parse(r),{timezone:t.timezone})}catch(t){return s(t)}e(JSON.stringify(o))})})},t.prototype.contentProvidersApi=function(t){var e=t.appid,r=t.wssid,s=this.bootcampHost+"/v3/contentProviders",o=new _http_transport2.default("GET",s,{httpRetry:this.httpRetry});return o.setHeader("Accept","application/json"),o.setCookieHeader(this.cookie),this._setCustomHeaders(o,this.headers),o.withCredentials=!0,o.send({appid:e,wssid:r}).then(function(t){return JSON.stringify((0,_transforms.transformContentProvidersResponse)(JSON.parse(t.text)))})},t.prototype.linkContentProviderApi=function(t){var e=t.redirectUrl,r=t.errorUrl,s=t.q,o=s.appid,a=s.wssid,i=t.unlink?"/remove":"",n=this.bootcampHost+"/v3/contentProviders/"+t.provider+i+"?"+(0,_querystring.stringify)({appid:o,wssid:a}),p=new _http_transport2.default("POST",n,{httpRetry:this.httpRetry});return p.setHeader("Accept","application/json"),p.setCookieHeader(this.cookie),this._setCustomHeaders(p,this.headers),p.withCredentials=!0,p.send({redirectUrl:e,errorUrl:r}).then(function(t){return t.text})},t}();exports.default=NodeToBootcampRequest;
},{"../../platform/utils/object":"./platform/utils/object","../../vendor/through":"./vendor/through/browser","../http_transport":"./platform/http_transport","../mail_constants":"./platform/mail_constants","../mail_error":"./platform/mail_error","../mail_error/constants":"./platform/mail_error/constants","../multipart_generator":304,"../multipart_parser":306,"./constants":277,"./transforms":283,"lodash/omit":"./node_modules/lodash/omit.js","querystring":"querystring"}],282:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _logger=require("./logger"),_logger2=_interopRequireDefault(_logger),SearchStreamLogger=function(){function e(t){_classCallCheck(this,e),this.loggerParams=t,this.startTime=Date.now(),this.loggers={}}return e.prototype.logLatency=function(e){var t=this;Object.keys(e||{}).forEach(function(r){Object.keys(e[r]||{}).forEach(function(e){var o=r+"__"+e;if(!t.loggers[o]){var a=_logger2.default.feature("bootcamp_client_stream_call",Object.assign({},t.loggerParams,{contentType:r,filterType:e}),t.startTime);a.logLatency(),t.loggers[o]=!0}})})},e}();exports.default=SearchStreamLogger,module.exports=exports.default;
},{"./logger":279}],283:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function transformItemsResponse(e,t,r){var s=t.listContentType;if(!e||!s)throw new _mail_error2.default("BootcampApiClient.SearchError");var n=e.items,o=void 0===n?[]:n,i=e.totalHits,a=e.extendUrl,p=void 0===a?"":a,m=e.cursor;return{totalHits:i,offset:o.length?m:"",nextItemsUrl:p,items:_mapper.ItemMapper[s]?_mapper.ItemMapper[s](o,r):o}}function groupByContentType(e,t){var r=e.reduce(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.concat((0,_object.getIn)(t,"contentBlocks",[]))},[]);return r.reduce(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=r.blockType,n=r.filter,o=void 0===n?_mail_constants.ListFilters.WITH_KEYWORD:n,i=r.content;if(!_mail_constants.ListFilters[o])return e;if(e[s]||(e[s]={}),e[s][o]={items:[],suggestedWords:[],totalHits:0,nextItemsUrl:"",offset:0},i){var a=i.items,p=void 0===a?[]:a,m=i.suggestedWords,u=void 0===m?[]:m,l=i.extendUrl,_=void 0===l?"":l,c=i.totalHits,f=i.cursor;e[s][o]={totalHits:c,offset:p.length?f:void 0,nextItemsUrl:_,suggestedWords:u,items:_mapper.ItemMapper[s]?_mapper.ItemMapper[s](p,t):p}}return e},{})}function transformAdResponse(e){var t,r,s=(0,_object.getIn)(e,"UNIResponse.AdResponse.0.Results.0.ResultSet.0.Listing",[]),n=_mapper.ItemMapper[_mail_constants.ListContentTypes.ADS](s),o=(r={},r[_mail_constants.ListContentTypes.ADS]=(t={},t[_mail_constants.ListFilters.WITH_KEYWORD]={items:n},t),r);return o}function transformSuggestionsResponse(e){if(!e||!e.response)throw new _mail_error2.default("BootcampApiClient.SuggestionError");return e.response.suggestions}function transformContentProvidersResponse(e){return e.reduce(function(e,t){var r;return Object.assign(e,(r={},r[t.name]=t.isConnected,r))},{})}exports.__esModule=!0,exports.transformItemsResponse=transformItemsResponse,exports.groupByContentType=groupByContentType,exports.transformAdResponse=transformAdResponse,exports.transformSuggestionsResponse=transformSuggestionsResponse,exports.transformContentProvidersResponse=transformContentProvidersResponse;var _mail_constants=require("../mail_constants"),_mapper=require("./mapper"),_mail_error=require("../mail_error"),_mail_error2=_interopRequireDefault(_mail_error),_object=require("../utils/object");
},{"../mail_constants":"./platform/mail_constants","../mail_error":"./platform/mail_error","../utils/object":"./platform/utils/object","./mapper":280}],284:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function clientBootstrap(e){function t(){return{loginHash:u.loginHash,mailWssid:u.mailWssid,crumb:u.crumb,guid:u.guid,timezone:u.timezone,region:u.region,config:g,os:u.os,queryStringOverrides:u.queryStringOverrides,__initializeFeatures__:u.__initializeFeatures__,csid:(0,_utils.generateUID)(),localeData:u.localeData,cspToken:u.cspToken}}function r(t,r){if(t)throw y.logFailure(t),t;r.store||(r.store=v,r.apiClients=E);var o=r.getStore("PageStore").launchOverrideUrl;o&&o!==m+b&&history.replaceState(null,null,o),(0,_prefetch_messages2.default)(r,u),window.setTimeout(function(){_reactDom2.default.render(_react2.default.createElement(_reactIntl.IntlProvider,window.AppIntl,_react2.default.createElement(_fluxibleAddonsReact.FluxibleComponent,{context:r.getComponentContext()},_react2.default.createElement(e.component,{context:r.getComponentContext(),url:u.url}))),document.getElementById(D));var t=document.getElementById("mail-search");g.ybar&&t&&_reactDom2.default.render(_react2.default.createElement(_reactIntl.IntlProvider,window.AppIntl,_react2.default.createElement(_fluxibleAddonsReact.FluxibleComponent,{context:r.getComponentContext()},_react2.default.createElement(_search_bar_contextualized2.default,{context:r.getComponentContext(),url:u.url}))),t),y.logSuccessAndLatency()},10)}function o(e){_reactDom2.default.render(_react2.default.createElement(_reactIntl.IntlProvider,window.AppIntl,_react2.default.createElement(_fluxibleAddonsReact.FluxibleComponent,{context:e.getComponentContext()},_react2.default.createElement(_launch_error2.default,{error:d}))),document.getElementById(D))}function n(e){_norrinLogger2.default.set(c),"debug"===e.logLevel&&_norrinLogger2.default.read((0,_development_console2.default)()),_norrinLogger2.default.read((0,_browser2.default)({endpoint:_mail_constants.LOGGER_PATH,interval:5e3})),_norrinLogger2.default.level(e.logLevel||"error")}window.onerror=_uncaught_browser_error_handler.handleUncaughtBrowserError,window.YAHOO.i13n.WEBWORKER_FILE=_mail_constants.RAPID_WEBWORKER_FILE;var a=window,l=a.AppState,i=void 0===l?{}:l,u=a.AppBootstrapData,_=a.ReactIntlLocaleData,c=a.BrowserLoggerParams,s=a.LaunchErrorObj,d=void 0===s?{}:s,p=i.fluxibleState,f=i.reduxState,g=u&&u.config||p.context.plugins.MailFluxibleContextPlugin.config,m=location.pathname,b=location.search,x=new RegExp("^"+_mail_constants.YCPI_PATH_PREFIX+"/test"),h=x.test(m);h||n(g),"object"===("undefined"==typeof _?"undefined":_typeof(_))&&Object.keys(_).forEach(function(e){return(0,_reactIntl.addLocaleData)(_[e])});var q=(0,_create_fluxible_app2.default)(e),w=u.route?"launch_"+u.route.toLowerCase():"unknown",y=_logger2.default.feature(w,{ssr:!!p}),R=(0,_bootstrap_redux2.default)(u,f),v=R.store,E=R.apiClients,D=(0,_utils.getAppContainerId)(e);if(v.subscribe(_utils2.checkUserAndRefreshSession),p){var I=m+b,C=p.context.dispatcher.stores.PageStore.launchOverrideUrl||p.context.dispatcher.stores.RouteStore.currentUrl;C&&I!==C&&history.replaceState(null,null,C),q.rehydrate(p,r)}else if(u){h&&(_norrinLogger2.default.disable(),m=m.replace(x,""+_mail_constants.YCPI_PATH_PREFIX),history.replaceState(null,null,m+b));var A=q.createContext(t());A.store=v,A.apiClients=E,window.context=A,(0,_object.isEmpty)(d)?A.getActionContext().executeAction(_fluxibleRouter.navigateAction,{url:m+b},function(e){r(e,A)}):o(A)}}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.default=clientBootstrap,require("../../client/polyfills"),require("../../vendor/rapid/rapid");var _react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_reactIntl=require("react-intl"),_fluxibleAddonsReact=require("fluxible-addons-react"),_fluxibleRouter=require("fluxible-router"),_create_fluxible_app=require("./create_fluxible_app"),_create_fluxible_app2=_interopRequireDefault(_create_fluxible_app),_utils=require("../utils"),_norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger),_logger=require("../logger"),_logger2=_interopRequireDefault(_logger),_browser=require("norrin-logger/readers/browser"),_browser2=_interopRequireDefault(_browser),_development_console=require("norrin-logger/readers/development_console"),_development_console2=_interopRequireDefault(_development_console),_mail_constants=require("../mail_constants"),_uncaught_browser_error_handler=require("../../client/uncaught_browser_error_handler"),_search_bar_contextualized=require("../../apps/mail/controller_views/search_bar_contextualized"),_search_bar_contextualized2=_interopRequireDefault(_search_bar_contextualized),_bootstrap_redux=require("./bootstrap_redux"),_bootstrap_redux2=_interopRequireDefault(_bootstrap_redux),_launch_error=require("../../atoms/launch_error"),_launch_error2=_interopRequireDefault(_launch_error),_prefetch_messages=require("./utils/prefetch_messages"),_prefetch_messages2=_interopRequireDefault(_prefetch_messages),_utils2=require("./utils"),_object=require("../utils/object");module.exports=exports.default;
},{"../../apps/mail/controller_views/search_bar_contextualized":39,"../../atoms/launch_error":73,"../../client/polyfills":103,"../../client/uncaught_browser_error_handler":"./client/uncaught_browser_error_handler","../../vendor/rapid/rapid":"./vendor/rapid/rapid","../logger":"./platform/logger","../mail_constants":"./platform/mail_constants","../utils":"./platform/utils","../utils/object":"./platform/utils/object","./bootstrap_redux":285,"./create_fluxible_app":286,"./utils":287,"./utils/prefetch_messages":288,"fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","fluxible-router":"./node_modules/fluxible-router/index.js","norrin-logger":"./node_modules/norrin-logger/index.js","norrin-logger/readers/browser":"./node_modules/norrin-logger/readers/browser.js","norrin-logger/readers/development_console":"./node_modules/norrin-logger/readers/development_console.js","react":"./node_modules/react/react.js","react-dom":"./node_modules/react-dom/index.js","react-intl":"./node_modules/react-intl/lib/index.js"}],285:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _redux=require("redux"),_reduxThunk=require("redux-thunk"),_reduxThunk2=_interopRequireDefault(_reduxThunk),_logger=require("../redux_middleware/logger"),_logger2=_interopRequireDefault(_logger),_action_enhancer=require("../redux_middleware/action_enhancer"),_action_enhancer2=_interopRequireDefault(_action_enhancer),_reducers_selectors=require("../../reducers_selectors"),_reducers_selectors2=_interopRequireDefault(_reducers_selectors),_action_enhancers=require("../../action_enhancers"),_action_enhancers2=_interopRequireDefault(_action_enhancers),_api_clients=require("../api_clients"),_request_queue=require("../request_queue"),_request_queue2=_interopRequireDefault(_request_queue),_generic=require("../utils/generic"),devToolsExtension=(0,_generic.isBrowser)()&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}};exports.default=function(e,t){var r=new _request_queue2.default,i=new _request_queue2.default,n={mailAPIClient:(0,_api_clients.createMailAPIClient)(e,r),geminiAPIClient:(0,_api_clients.createGeminiAPIClient)(e,r),bootcampClient:(0,_api_clients.createBootcampClient)(e,r),athenaClient:(0,_api_clients.createAthenaClient)(e,r),autoSuggestClient:(0,_api_clients.createAutoSuggestClient)(e,r),udbClient:(0,_api_clients.createUdbClient)(e,i),heartbeatAPIClient:(0,_api_clients.createHeartbeatAPIClient)(e,r),credstoreClient:(0,_api_clients.createCredstoreClient)(e,r),rapidClient:(0,_api_clients.createRapidClient)(e,r),yqlClient:(0,_api_clients.createYQLClient)(e,r),linkEnhancerClient:(0,_api_clients.createLinkEnhancerClient)(e,r),videoAPIClient:(0,_api_clients.createVideoAPIClient)(e,r),gifCategoriesClient:(0,_api_clients.createGifCategoriesClient)(e,r)};return{store:(0,_redux.createStore)(_reducers_selectors2.default,t,(0,_redux.compose)((0,_redux.applyMiddleware)((0,_logger2.default)(e.crumb),_reduxThunk2.default.withExtraArgument(n),(0,_action_enhancer2.default)((0,_action_enhancers2.default)(e))),devToolsExtension())),apiClients:n}},module.exports=exports.default;
},{"../../action_enhancers":7,"../../reducers_selectors":"./reducers_selectors","../api_clients":268,"../redux_middleware/action_enhancer":308,"../redux_middleware/logger":309,"../request_queue":310,"../utils/generic":"./platform/utils/generic","redux":"./node_modules/redux/lib/index.js","redux-thunk":"./node_modules/redux-thunk/lib/index.js"}],286:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.default=function(e){var t=new _fluxible2.default,r=e.appRootPath||_mail_constants.DESKTOP_YCPI_PATH_PREFIX,u=(0,_cloneDeep2.default)(e.routes);Object.keys(u).forEach(function(e){var t=u[e];t.path=r+t.path,t.redirect&&(t.redirect.url=r+t.redirect.url)});var l=_fluxibleRouter.RouteStore.withStaticRoutes(u);return t.registerStore(l),e.stores.forEach(function(e){t.registerStore(e)}),t.plug((0,_fluxibleAddonsReact.batchedUpdatePlugin)()),e.plugins.forEach(function(e){t.plug(e)}),t};var _cloneDeep=require("lodash/cloneDeep"),_cloneDeep2=_interopRequireDefault(_cloneDeep),_fluxible=require("fluxible"),_fluxible2=_interopRequireDefault(_fluxible),_fluxibleRouter=require("fluxible-router"),_fluxibleAddonsReact=require("fluxible-addons-react"),_mail_constants=require("../mail_constants");module.exports=exports.default;
},{"../mail_constants":"./platform/mail_constants","fluxible":"./node_modules/fluxible/index.js","fluxible-addons-react":"./node_modules/fluxible-addons-react/index.js","fluxible-router":"./node_modules/fluxible-router/index.js","lodash/cloneDeep":"./node_modules/lodash/cloneDeep.js"}],287:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function checkUserAndRefreshSession(){if(!(0,_cookie.isSameUser)()){var e={reason:_constants.AUTH_FAIL_REASON.DIFFERENT_USER,statusCode:401},r=_logger2.default.feature("error_handler",e),o=new _mail_error2.default(_constants.AUTHENTICATION_INVALID_CREDENTIALS,e);r.logFailure(o),(0,_generic.refreshInbox)()}}exports.__esModule=!0,exports.checkUserAndRefreshSession=checkUserAndRefreshSession;var _logger=require("../../logger"),_logger2=_interopRequireDefault(_logger),_cookie=require("../../utils/cookie"),_generic=require("../../utils/generic"),_mail_error=require("../../mail_error"),_mail_error2=_interopRequireDefault(_mail_error),_constants=require("../../mail_error/constants");
},{"../../logger":"./platform/logger","../../mail_error":"./platform/mail_error","../../mail_error/constants":"./platform/mail_error/constants","../../utils/cookie":314,"../../utils/generic":"./platform/utils/generic"}],288:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function prefetchMessages(e,s){var t=e.getStore(_mail2.default),r=e.getStore(_pages2.default).getActivePageRoute(),o=(0,_list.getListIdFromRoute)(r),a=(0,_list.getListContentTypeFromListId)(o),i=a===_mail_constants.ListContentTypes.MESSAGES?t.getItemList(o):[],u=(0,_reducers_selectors.selectors)(e.store.getState()),l=u.getMessageBodiesSelectors,_=l(),g=i.slice(0,s.config.numMessageGroupsToPrefetch).reduce(function(e,s){return e.concat((0,_message_group.getIdsOfMessagesToExpand)(s))},[]).filter(function(e){return!_.doesMessageBodyExist(e)});g.length&&a===_mail_constants.ListContentTypes.MESSAGES&&e.executeAction(_message.getMessageBodies,{listId:o,messageIds:g,apiMethod:"messages.prefetchBodies"})}exports.__esModule=!0,exports.default=prefetchMessages;var _mail_constants=require("../../../platform/mail_constants"),_mail=require("../../../stores/mail"),_mail2=_interopRequireDefault(_mail),_pages=require("../../../stores/pages"),_pages2=_interopRequireDefault(_pages),_list=require("../../../platform/utils/list"),_message_group=require("../../../platform/utils/message_group"),_message=require("../../../actions/message"),_reducers_selectors=require("../../../reducers_selectors");module.exports=exports.default;
},{"../../../actions/message":"./actions/message","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/list":"./platform/utils/list","../../../platform/utils/message_group":"./platform/utils/message_group","../../../reducers_selectors":"./reducers_selectors","../../../stores/mail":"./stores/mail","../../../stores/pages":"./stores/pages"}],289:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _logger=require("./logger"),_logger2=_interopRequireDefault(_logger),_queryString=require("query-string"),_queryString2=_interopRequireDefault(_queryString),_http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_ymreqid=require("../ymreqid"),_ymreqid2=_interopRequireDefault(_ymreqid),_mail_constants=require("../mail_constants"),_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_mail_constants2=require("../../platform/mail_constants"),CredstoreClient=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.host,i=e.guid,n=e.crumb,s=e.loginHash,o=e.wssid,a=e.appId;_classCallCheck(this,t),this.ymreqidGenerator=new _ymreqid2.default(s,_mail_constants.YMREQ_CLIENT_ID,_mail_constants.SESSION_ID),this.guid=i,this.crumb=n,this.wssid=o,this.appId=a,this.credstoreHost=r}return t.prototype._log=function(t){return _logger2.default.feature(_mail_constants.ApiClientLoggerNames.CredstoreClient,{apiName:t,crumb:this.crumb,ymreqid:this.getRequestId()})},t.prototype._isEmptySuccessResponse=function(t){if(t&&t.data){var e=t.data.statusCode;return 200===e}return!1},t.prototype.transport=function t(e,r){r||(r=_http_transport.HTTP_METHODS.GET);var t=new _http_transport2.default(r,e);return t.withCredentials=!0,t},t.prototype.getRequestId=function(){return this.ymreqidGenerator.generate()},t.prototype.unlink=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.spid;(0,_invariant2.default)(r,"`spid` is a required option");var i=this._log("unlink"),n=this.credstoreHost+"/progrss/v1/credstore/user/"+this.guid+"/credential/"+r,s=this.transport(n,_http_transport.HTTP_METHODS.DELETE).send().catch(function(e){if(t._isEmptySuccessResponse(e))return e.data.responseText;throw e});return s.then(i.logSuccessAndLatency,i.logFailure),s},t.prototype.removeOAuthToken=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.domain,i=e.email;(0,_invariant2.default)(r,"`domain` is a required option"),(0,_invariant2.default)(i,"`email` is a required option");var n=this._log("removeOAuthToken"),s=_queryString2.default.stringify({property:"comms",domain:r,email:i}),o=this.credstoreHost+"/progrss/v1/credstore/user/"+this.guid+"/credential/spid?"+s,a=this.transport(o,_http_transport.HTTP_METHODS.DELETE).send().catch(function(e){if(t._isEmptySuccessResponse(e))return e.data.responseText;throw e});return a.then(n.logSuccessAndLatency,n.logFailure),a},t.prototype.getAuthorizationURL=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.provider,r=t.email,i=t.redirectUrl;(0,_invariant2.default)(e,"`provider` is a required option"),(0,_invariant2.default)(r,"`email` is a required option");var n=this._log("getAuthorizationURL"),s=_mail_constants2.IMAP_SETTINGS[e],o=s.oauthDomain,a=s.scope,u=_queryString2.default.stringify({property:"comms",appid:this.appId,wssid:this.wssid,domain:o,email:r}),p=".done="+encodeURIComponent(i+"?crumb="+encodeURIComponent(this.crumb))+(a?"&"+a:""),d=this.credstoreHost+"/progrss/v1/credstore/user/"+this.guid+"/service/spid/init?"+u,l=this.transport(d,_http_transport.HTTP_METHODS.POST).setHeader("Content-Type","text/plain").setHeader("Accept","application/json").send(p).then(function(t){return t.body.results});return l.then(n.logSuccessAndLatency,n.logFailure),l},t}();exports.default=CredstoreClient,module.exports=exports.default;
},{"../../platform/mail_constants":"./platform/mail_constants","../http_transport":"./platform/http_transport","../invariant":"./platform/invariant","../mail_constants":"./platform/mail_constants","../ymreqid":"./platform/ymreqid","./logger":290,"query-string":"./node_modules/query-string/index.js"}],290:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger);exports.default=_norrinLogger2.default.create("norrin/credstore_client"),module.exports=exports.default;
},{"norrin-logger":"./node_modules/norrin-logger/index.js"}],291:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_omit=require("lodash/omit"),_omit2=_interopRequireDefault(_omit),_generic=require("./utils/generic"),_loader=require("./loader"),_loader2=_interopRequireDefault(_loader),_generated_sequences=require("../../config/settings/generated_sequences.json"),_generated_sequences2=_interopRequireDefault(_generated_sequences),_invariant=require("../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_logger=require("../platform/logger"),_logger2=_interopRequireDefault(_logger);exports.default={name:"MailFluxibleContextPlugin",plugContext:function(e){var t=e.config,n=e.loginHash,i=e.mailWssid,o=e.crumb,r=e.guid,a=e.csid,l=e.timezone,s=e.environment,d=e.region,u=e.os,c=e.farm,_=e.partner,p=e.usmLogString,g=e.locale,f=e.localeData,y=e.cspToken,m=e.__initializeFeatures__,v=e.queryStringOverrides,b=e.buildNumber,h=e.launchTime,C=e.loggerParams;return{plugComponentContext:function(e,n){e.config=t,e.loader=new _loader2.default({disabled:t.disableLazy}),e.timezone=l,e.region=d,e.usmLogString=p,e.os=u,e.locale=Object.assign({name:g},f),e.cspToken=y,e.store=n.store;var i=e.executeAction.bind(e),o=void 0;"undefined"!=typeof window&&window.context&&window.context.getStore&&(o=window.context.getStore.bind(window.context)),e.executeAction=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];return t&&t.i13nModel&&(o&&(t.i13nModel.isBeaconEvent?n.apiClients.rapidClient.sendBeaconEvent(t,o):n.apiClients.rapidClient.sendI13nModel(t,o)),t.uiContext=t.i13nModel,t=(0,_omit2.default)(t,"i13nModel")),i(e,t,r)},e.yqlClient=n.apiClients.yqlClient,e.credstoreClient=n.apiClients.credstoreClient,e.linkEnhancerClient=n.apiClients.linkEnhancerClient},plugActionContext:function(e,n){var i=n.store;e.config=t,e.store=i;var o=i.dispatch,r=e.dispatch;i.dispatch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0;if("function"!=typeof e){try{t=o(Object.assign({},e,{type:e.__type__||e.type,__type__:e.type}))}catch(e){_logger2.default.error(e)}e.__type__?r(e.__type__,(0,_omit2.default)(e,"__type__")):r(e.type,(0,_omit2.default)(e,"type"));var i=void 0;"undefined"!=typeof window&&window.context&&window.context.getStore&&(i=window.context.getStore.bind(window.context)),i&&e&&e.i13nModel&&(e.i13nModel.isBeaconEvent?n.apiClients.rapidClient.sendBeaconEvent(e,i):n.apiClients.rapidClient.sendI13nModel(e,i),e=(0,_omit2.default)(e,"i13nModel"))}else try{t=o(e)}catch(e){_logger2.default.error(e)}return t},e.dispatch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,_invariant2.default)("undefined"!=typeof e,"Action cannot be undefined. Please check spelling of action name "+e),(0,_invariant2.default)("object"===("undefined"==typeof t?"undefined":_typeof(t))||"undefined"==typeof t,"Payloads must be objects or undefined to accommodate the architecture v3 migration.Please change action "+e+" with payload "+t),"NAVIGATE_START"===e||"NAVIGATE_SUCCESS"===e||"NAVIGATE_FAILURE"===e){var n=t.type||"";return i.dispatch(Object.assign({},t,{__type__:e,type:n}))}return(0,_invariant2.default)(!t.hasOwnProperty("type"),"`type` is a reserved property for redux actions. Please rename your property for action "+e+" with payload "+JSON.stringify(t)),i.dispatch(Object.assign({},t,{type:e}))},Object.assign(e,_extends({},n.apiClients,{csid:a}))},plugStoreContext:function(e,n){e.__initializeFeatures__=m,e.config=t,e.timezone=l,e.partner=_,e.queryStringOverrides=v,e.sequences=_generated_sequences2.default,e.store=n.store},dehydrate:function(){return{buildNumber:b,config:t,launchTime:h,loginHash:n,mailWssid:i,guid:r,crumb:o,csid:a,locale:g,localeData:f,timezone:l,region:d,usmLogString:p,cspToken:y,os:u,farm:c,partner:_,environment:s,__initializeFeatures__:m,queryStringOverrides:v,loggerParams:(0,_generic.isBrowser)()?{}:C}},rehydrate:function(e){b=e.buildNumber,t=e.config,n=e.loginHash,i=e.mailWssid,o=e.crumb,r=e.guid,a=e.csid,h=e.launchTime,g=e.locale,f=e.localeData,l=e.timezone,d=e.region,p=e.usmLogString,u=e.os,c=e.farm,_=e.partner,s=e.environment,m=e.__initializeFeatures__,v=e.queryStringOverrides,C=e.loggerParams,y=e.cspToken}}}},module.exports=exports.default;
},{"../../config/settings/generated_sequences.json":1,"../platform/invariant":"./platform/invariant","../platform/logger":"./platform/logger","./loader":302,"./utils/generic":"./platform/utils/generic","lodash/omit":"./node_modules/lodash/omit.js"}],292:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _logger=require("./logger"),_logger2=_interopRequireDefault(_logger),_http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_mail_constants=require("../mail_constants"),PROXY_API_ROUTE_BASE_ENDPOINT=_mail_constants.YCPI_PATH_PREFIX+"/gemini_api/",TIMEOUT=1e4,GEMINI_EXPIRE_TIME=6e5,BrowserProxy=function(){function e(t){var r=this,o=t.sectionIdsToCache,n=void 0===o?[5421583]:o;_classCallCheck(this,e),this.queueMap={},n&&n.forEach(function(e){r.queueMap[e]=[]})}return e.prototype.removeOldItemsFromCache=function(e){if(this.queueMap[e]){var t=Date.now();this.queueMap[e]=this.queueMap[e].filter(function(e){return t-e.timestamp<GEMINI_EXPIRE_TIME})}},e.prototype.shouldMakeGeminiRequest=function(e){return this.removeOldItemsFromCache(e),!(this.queueMap[e]&&this.queueMap[e].length)},e.prototype.storeInCache=function(e,t){var r=this;e.forEach(function(e){e.timestamp=Date.now(),r.queueMap[t].push(e)})},e.prototype.getNextAdFromCache=function(e){return this.queueMap[e]?this.queueMap[e].shift():null},e.prototype.requestFromGemini=function(e){var t=this,r=new _http_transport2.default(_http_transport.HTTP_METHODS.GET,PROXY_API_ROUTE_BASE_ENDPOINT,{timeout:TIMEOUT});return r.setHeader("Accept","application/json"),r.send(e).then(function(e){return e.body}).then(function(r){t.storeInCache(r,e.sectionId)})},e.prototype.request=function(e){var t=this,r=e.sectionId,o=this.getNextAdFromCache(r),n=void 0;if(n=o?Promise.resolve([o]):this.requestFromGemini(e).then(function(){var e=t.getNextAdFromCache(r);return e?[e]:[]}),this.shouldMakeGeminiRequest(r)){var i=_logger2.default.feature(_mail_constants.ApiClientLoggerNames.GeminiAPIClient,{apiName:"prefetch_ad",ymreqid:e.ymreqid});this.requestFromGemini(e).then(i.logSuccessAndLatency,i.logFailure)}return n},e}();exports.default=BrowserProxy,module.exports=exports.default;
},{"../http_transport":"./platform/http_transport","../mail_constants":"./platform/mail_constants","./logger":295}],"./platform/gemini_api_client/constants":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={UsageType:{HtmlPrimary:"HTML_PRIMARY",NativeAdType:"NativeAdType",PencilAdType:"PencilAdType"}},module.exports=exports.default;
},{}],293:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _querystring=require("querystring"),_querystring2=_interopRequireDefault(_querystring),_http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_mapper=require("./mapper"),_mapper2=_interopRequireDefault(_mapper),BASE_URL="http://n.gemini.yahoo.com:4080",SSI_PATH="/ssi",DEFAULT_HTTP_METHOD=_http_transport.HTTP_METHODS.GET,TIMEOUT=1e3,GEMINI_PARAM_MAP={bucket:"bk",apiVersion:"ve",size:"sz",sectionId:"se",creativeCode:"cc",adCount:"tk",propertyName:"ui",siteLanguage:"sl",countryCode:"co",requestId:"ri",publisherInfo:"pb",contentInHttps:"hs",forceFilter:"ff",format:"format",nonRevenue:"nr"},GeminiRequest={Transport:_http_transport2.default,request:function(e){return GeminiRequest._sendRequest(e).then(GeminiRequest._constructAdObject)},_sendRequest:function(e){(0,_invariant2.default)(e.ymreqid,"ymreqid is required for making requests to Gemini ssi"),(0,_invariant2.default)(e.userAgent,"userAgent is required for making requests to Gemini ssi");var r=new GeminiRequest.Transport(DEFAULT_HTTP_METHOD,BASE_URL+SSI_PATH,TIMEOUT);return r.setHeader("Accept","application/json"),r.setHeader("X-Forwarded-For",e.remoteAddress),r.setHeader("User-Agent",e.userAgent),e.cookie&&!e.forceFilter&&r.setHeader("Cookie",e.cookie),r.send(GeminiRequest._getQueryParams(e))},getForceFilter:function(e){var r=_querystring2.default.stringify({useForceFilter:!0,forceFilter:"creative_id:"+e,useSpaceBall:!1,useFrequencyCapping:!1,useBudget:!1,useDeviceTargeting:!1,useBooleanQueries:!1,useSegmentsTargeting:!1,useBudgetCampaignFineThrottling:!1,useCF:!1,honorBlacklistedProperties:!1,dedupOnTitleSummaryHash:!1,"grouping.maxCreativesPerAdvertiser":5});return new Buffer(r).toString("base64")},_getQueryParams:function(e){var r=Object.assign({format:"json",apiVersion:2,size:"3x3",sectionId:5443516,creativeCode:"STRM",adCount:2,propertyName:"mail_norrin",siteLanguage:e.locale,countryCode:e.region,requestId:e.ymreqid,publisherInfo:"||978500286|STRM|",contentInHttps:1},e);"devbox"===e.environment&&(r.nonRevenue=1),r.forceFilter&&(r.forceFilter=GeminiRequest.getForceFilter(r.forceFilter),r.nonRevenue=2);var t={};for(var n in r)GEMINI_PARAM_MAP[n]&&(t[GEMINI_PARAM_MAP[n]]=r[n]);return t},_constructAdObject:function(e){var r=[];return e&&e.body&&e.body.ads&&(r=(0,_mapper2.default)(e.body.ads)),r}};exports.default=GeminiRequest,module.exports=exports.default;
},{"../http_transport":"./platform/http_transport","../invariant":"./platform/invariant","./mapper":296,"querystring":"querystring"}],294:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0,exports.STRATEGIES=void 0;var _base_client=require("../base_client"),_base_client2=_interopRequireDefault(_base_client),_ymreqid=require("../ymreqid"),_ymreqid2=_interopRequireDefault(_ymreqid),_object=require("../utils/object"),_generic=require("../utils/generic"),_gemini_request=require("./gemini_request.js"),_browser_proxy=require("./browser_proxy.js"),_browser_proxy2=_interopRequireDefault(_browser_proxy),_mail_constants=require("../mail_constants"),STRATEGIES=exports.STRATEGIES=(0,_object.mirrorKeys)(["NODE_TO_GEMINI","BROWSER_TO_NODE"]),GeminiAPIClient=function(e){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];_classCallCheck(this,r);var o=_possibleConstructorReturn(this,e.call(this,t));return o.strategy=i||o.getDefaultStrategy(),o.browserProxy=new _browser_proxy2.default(t),o.REQUESTS={Gemini:_gemini_request.request,BrowserProxy:o.browserProxy.request},o.validateStrategy(o.strategy),o.appId=_mail_constants.appId,o.cookie=t.cookie,o.environment=t.environment,o.locale=t.locale,o.region=t.region,o.remoteAddress=t.remoteAddress,o.userAgent=t.userAgent,t.loginHash&&(o.ymreqidGenerator=new _ymreqid2.default(t.loginHash,_mail_constants.YMREQ_CLIENT_ID,_mail_constants.SESSION_ID)),o}return _inherits(r,e),r.prototype.getDefaultStrategy=function(){return(0,_generic.isBrowser)()?STRATEGIES.BROWSER_TO_NODE:STRATEGIES.NODE_TO_GEMINI},r.prototype.validateStrategy=function(e){if("string"!=typeof e||!STRATEGIES[e])throw new Error("strategy has to be one of "+JSON.stringify(Object.keys(STRATEGIES)));if((0,_generic.isBrowser)()&&e===STRATEGIES.NODE_TO_GEMINI)throw new Error(STRATEGIES.NODE_TO_GEMINI+" strategy can not be used in the browser");if(!(0,_generic.isBrowser)()&&e===STRATEGIES.BROWSER_TO_NODE)throw new Error(STRATEGIES.BROWSER_TO_NODE+" strategies can not be used on the server")},r.prototype.request=function e(r,t){var e=void 0;if(!this.ymreqidGenerator)throw new Error("`ymreqid` cannot be generated. making a request or initialize GeminiAPIClient with `loginHash`, so that it can generate a new one");var i=this.ymreqidGenerator.generate(),o=this.crumb,n=Object.assign({},r,{ymreqid:i,appId:_mail_constants.appId,crumb:o});switch(this.strategy){case STRATEGIES.NODE_TO_GEMINI:Object.assign(n,{userAgent:this.userAgent,remoteAddress:this.remoteAddress,cookie:this.cookie,environment:this.environment,region:this.region,locale:this.locale}),e=this.REQUESTS.Gemini;break;case STRATEGIES.BROWSER_TO_NODE:e=this.REQUESTS.BrowserProxy.bind(this.browserProxy)}var s=e(n),a={ymreqid:i,crumb:o,intl:this.region};return t&&t.adPosition&&(a.adPosition=t.adPosition),this.logRequest(s,a),s},r}(_base_client2.default);exports.default=GeminiAPIClient;
},{"../base_client":"./platform/base_client","../mail_constants":"./platform/mail_constants","../utils/generic":"./platform/utils/generic","../utils/object":"./platform/utils/object","../ymreqid":"./platform/ymreqid","./browser_proxy.js":292,"./gemini_request.js":293}],295:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger);exports.default=_norrinLogger2.default.create("norrin/gemini_client"),module.exports=exports.default;
},{"norrin-logger":"./node_modules/norrin-logger/index.js"}],296:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getAssetInfo(e){return!Array.isArray(e.assets)||e.assets.length<=0?{}:e.assets.map(function(e){return e.mediaInfo.map(function(r){return r.usageType=e.usageType,r}).reduce(function(e,r){return r.url?r:e},{})}).reduce(function(e,r){return r.usageType===_constants.UsageType.HtmlPrimary?r:e},{})}function parseAdTag(e){var r=void 0;try{r=JSON.parse(e)}catch(e){_logger2.default.error("Gemini ad tag is not valid JSON")}return r}function nativeAdMapper(e,r){if(r){var a=e.actionUrls,t=getAssetInfo(r),n=t.url,i=new RegExp("(.png|.gif|.jpg|.jpeg)$","i"),s="";return n&&n.match(i)&&(s=['<a target="_blank" href="'+r.clickUrl+'">','<img src="'+t.url+'" style="display: block; margin: auto; max-width: 100%;"/>',"</a>"].join("")),{contentType:t.contentType||"",url:t.url||"",usageType:t.usageType||"",geminiSponsoredAsset:s,actionUrls:a}}}function pencilAdMapper(e,r){if(r)return r.secThumbnailImage=/^https:\/\//.test(r.secThumbnailImage)?r.secThumbnailImage:"",{adHeadline:r.headline||"",adSummary:r.summary||"",adImg:r.secThumbnailImage||r.secImage||"",adSource:r.source||"",clickUrl:r.clickUrl||"",creativeId:e.creativeId.toString(),impressionTrackingUrls:r.imprTrackingUrls?r.imprTrackingUrls:[r.imprTrackingUrl],adFeedbackBeacon:r.ad_feedback_beacon||""}}function adMapper(e){return Array.isArray(e)?e.map(function(e,r){var a=parseAdTag(e.tag);if(a){var t=nativeAdMapper(e,a),n=pencilAdMapper(e,a);return n.beacon=e.beacon.replace("$(AD_POSN)",r+1)||"",n.type=t.usageType===_constants.UsageType.HtmlPrimary&&t.url?_constants.UsageType.NativeAdType:_constants.UsageType.PencilAdType,{creativeId:e.creativeId.toString(),nativeAd:t,pencilAd:n}}}).filter(Boolean):[]}exports.__esModule=!0,exports.default=adMapper;var _logger=require("../logger"),_logger2=_interopRequireDefault(_logger),_constants=require("./constants");module.exports=exports.default;
},{"../logger":"./platform/logger","./constants":"./platform/gemini_api_client/constants"}],297:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_base_client=require("../base_client"),_base_client2=_interopRequireDefault(_base_client),_http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_ymreqid=require("../ymreqid"),_ymreqid2=_interopRequireDefault(_ymreqid),_mail_constants=require("../mail_constants"),GIF_CATEGORIES_URL="https://content.msg.yahoo.com/gifs",TIMEOUT=3e4,GifCategories=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,r)),o=r.appId,i=r.locale,a=r.loginHash;return n.appid=o,n.lang=i,n.ymreqidGenerator=new _ymreqid2.default(a,_mail_constants.YMREQ_CLIENT_ID,_mail_constants.SESSION_ID),n}return _inherits(e,t),e.prototype.getGifCategories=function(){var t={ymreqid:this.ymreqidGenerator.generate()},e=_extends({},t,{lang:this.lang,appid:this.appid}),r=new _http_transport2.default(_http_transport.HTTP_METHODS.GET,GIF_CATEGORIES_URL,{timeout:TIMEOUT});r.setHeader("Accept","application/json"),r.withCredentials=!0;var n=r.send(e);return this.logRequest(n,t),n},e.prototype.getGifCategoryPreloadImages=function(t){var e={ymreqid:this.ymreqidGenerator.generate()},r=_extends({},e,{appid:this.appid}),n=new _http_transport2.default(_http_transport.HTTP_METHODS.GET,t,{timeout:TIMEOUT});n.setHeader("Accept","application/json");var o=n.send(r);return this.logRequest(o,e,"gif_top_items_json_url_call"),o},e}(_base_client2.default);exports.default=GifCategories,module.exports=exports.default;
},{"../base_client":"./platform/base_client","../http_transport":"./platform/http_transport","../mail_constants":"./platform/mail_constants","../ymreqid":"./platform/ymreqid"}],298:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_mail_constants=require("../mail_constants"),DEFAULT_HTTP_METHOD=_http_transport.HTTP_METHODS.GET,TIMEOUT=3e3,HB_PARAMS=["version","launchtime","ymreqid","crumb"],HeartbeatRequest={Transport:_http_transport2.default,request:function(t){return HeartbeatRequest._sendRequest(t)},_sendRequest:function(t){var e=new HeartbeatRequest.Transport(DEFAULT_HTTP_METHOD,_mail_constants.HEARTBEAT_PATH,TIMEOUT),r=HB_PARAMS.reduce(function(e,r){return e[r]=t[r],e},{});return e.setHeader("Accept","application/json"),e.send(r)}};exports.default=HeartbeatRequest,module.exports=exports.default;
},{"../http_transport":"./platform/http_transport","../mail_constants":"./platform/mail_constants"}],299:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _base_client=require("../base_client"),_base_client2=_interopRequireDefault(_base_client),_mail_constants=require("../mail_constants"),_ymreqid=require("../ymreqid"),_ymreqid2=_interopRequireDefault(_ymreqid),_heartbeat_request=require("./heartbeat_request.js"),_generic=require("../utils/generic"),ONE_HOUR=36e5,HeartbeatAPIClient=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var n=_possibleConstructorReturn(this,e.call(this,r));return n.emergencyRefresh=!1,r.loginHash&&(n.ymreqidGenerator=new _ymreqid2.default(r.loginHash,_mail_constants.YMREQ_CLIENT_ID,_mail_constants.SESSION_ID)),(0,_generic.isBrowser)()&&setInterval(function(){n.request({version:r.buildNumber,launchtime:r.launchTime}).then(function(e){n.emergencyRefresh=e},function(){n.emergencyRefresh=!1})},ONE_HOUR),n}return _inherits(t,e),t.prototype.request=function(e){var t={crumb:this.crumb,ymreqid:this.ymreqidGenerator.generate()},r=Object.assign({},e,t),n=(0,_heartbeat_request.request)(r);return this.logRequest(n,t),n.then(function(e){return!!e.body.emergencyRefresh}).catch(function(){return!1})},t}(_base_client2.default);exports.default=HeartbeatAPIClient,module.exports=exports.default;
},{"../base_client":"./platform/base_client","../mail_constants":"./platform/mail_constants","../utils/generic":"./platform/utils/generic","../ymreqid":"./platform/ymreqid","./heartbeat_request.js":298}],"./platform/http_transport/adapters/superagent/base":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _superagent=require("superagent"),_superagent2=_interopRequireDefault(_superagent),_superagent_error=require("./superagent_error"),_utoa=require("../../../utoa"),_utoa2=_interopRequireDefault(_utoa),_constants=require("../../constants"),SuperagentAdapterBase=function(){function e(){_classCallCheck(this,e)}return e.prototype.send=function(e){var t=this;return new Promise(function(r,n){var o=t._getRequest(e);o.end(function(e,s){var a=(0,_superagent_error.handleError)(e,s,o);return a?n(a):void r(t._mapResponse(s))})})},e.prototype._getRequest=function(e){var t=e.method,r=e.url,n=e.body,o=e.withCredentials,s=e.headers,a=e.fields,u=e.attachments,i=e.parser,p=e.httpRetry,_=void 0===p?0:p,c=e.timeout,d=void 0===c?_constants.REQUEST_TIMEOUT:c,f=_superagent2.default[this._getMethodName(t)](r);return this._setBody(f,t,n),o&&f.withCredentials(),this._setHeaders(f,s),this._setFields(f,a),this._setAttachments(f,u),this._setParser(f,i),this._setRetry(f,_),f.timeout(d),f},e.prototype._getMethodName=function(e){return e=e.toLowerCase(),"delete"===e&&(e="del"),e},e.prototype._mapResponse=function(e){return{body:e.body,text:e.text,status:e.status,headers:e.headers}},e.prototype._setBody=function(e,t,r){~_constants.QUERY_STRING_METHODS.indexOf(this._getMethodName(t))?e.query(r):e.send(r)},e.prototype._setHeaders=function(e,t){t&&Object.keys(t).forEach(function(r){e.unset(r),e.set(r,t[r])})},e.prototype._setFields=function(e,t){t&&Object.keys(t).forEach(function(r){e.field(r,t[r])})},e.prototype._setAttachments=function(e,t){t&&Object.keys(t).forEach(function(r){var n=(0,_utoa2.default)(t[r].name),o="=?UTF-8?b?"+n+"?=";e.attach(r,t[r],o)})},e.prototype._setParser=function(e,t){t&&e.parse(function(e,r){e.text="",e.on("data",function(t){e.text+=t}),e.on("end",function(){t(e.text,r)})})},e.prototype._setRetry=function(e,t){e.retry(t)},e}();exports.default=SuperagentAdapterBase,module.exports=exports.default;
},{"../../../utoa":"./platform/utoa/browser","../../constants":"./platform/http_transport/constants","./superagent_error":"./platform/http_transport/adapters/superagent/superagent_error","superagent":"./node_modules/superagent"}],"./platform/http_transport/adapters/superagent/browser":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _through=require("../../../../vendor/through"),_through2=_interopRequireDefault(_through),_base=require("./base"),_base2=_interopRequireDefault(_base),_superagent_error=require("./superagent_error"),SuperagentAdapter=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(t,e),t.prototype.createStream=function(e){var t=this._getRequest(e),r=(0,_through2.default)();return t.on("progress",function(e){r.emit("data",e.currentTarget.responseText)}),t.end(function(e,o){var n=(0,_superagent_error.handleError)(e,o,t);return n?void setTimeout(function(){r.emit("error",n)},0):void setTimeout(function(){r.emit("end")},0)}),r},t}(_base2.default);exports.default=SuperagentAdapter,module.exports=exports.default;
},{"../../../../vendor/through":"./vendor/through/browser","./base":"./platform/http_transport/adapters/superagent/base","./superagent_error":"./platform/http_transport/adapters/superagent/superagent_error"}],"./platform/http_transport/adapters/superagent/superagent_error":[function(require,module,exports){
"use strict";function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}function handleError(r,e,t){var n=null;return n||(n=_handleOutboundError(r)),n||(n=_handleServerNotFound(r)),n||(n=_handleConnectionRefusedError(r)),n||(n=_handleTimeoutError(r)),n||(n=_handleJSONParseError(r)),n||(n=_handleCrumbError(e)),n||(n=_handleAuthenticationError(e)),n||(n=_handleWssidReissueError(e)),n||(n=_handleNotOkStatusError(e)),n||(n=_handleContentTypeError(e,t)),n||(n=_handleGenericError(r,e)),n}function _handleOutboundError(r){if(r&&r.crossDomain)return new _mail_error2.default("HttpTransport.OutboundError")}function _handleServerNotFound(r){if(r&&"ENOTFOUND"===r.code)return new _mail_error2.default("HttpTransport.ServerNotFound")}function _handleConnectionRefusedError(r){if(r&&"ECONNREFUSED"===r.code)return new _mail_error2.default("HttpTransport.ConnectionRefused",r.message)}function _handleTimeoutError(r){if(r&&"ECONNABORTED"===r.code)return new _mail_error2.default("HttpTransport.ConnectionTimedOut",r.message)}function _handleJSONParseError(r){if(r&&(r.parse||"SyntaxError"===r.name))return new _mail_error2.default("HttpTransport.JSONParseError",r.message,{statusCode:r.statusCode,responseText:r.rawResponse})}function _handleCrumbError(r){var e=r&&r.status;if(403===e){var t=(0,_object.getIn)(r,"body.name");if(t===_constants.AUTHENTICATION_INVALID_CRUMB)return new _mail_error2.default(_constants.AUTHENTICATION_INVALID_CRUMB,{data:r.body.data,statusCode:e})}}function _handleAuthenticationError(r){var e=r&&r.status;if(401===e||403===e){var t=401===e?"INVALID_COOKIE":"EMPTY_COOKIE",n=(0,_object.getIn)(r,"body.error.code");return"EC-4008"===n&&(t=n),new _mail_error2.default(_constants.AUTHENTICATION_INVALID_CREDENTIALS,{reason:t,statusCode:e})}}function _handleWssidReissueError(r){var e=r&&r.status;if(400===e&&r.body&&r.body.name===_constants.AUTHENTICATION_WSSID_REISSUE)return new _mail_error2.default(r.body.name,{wssid:r.body.data.wssid,statusCode:e})}function _handleContentTypeError(r,e){var t=e&&e.header&&(e.header.Accept||e.header.accept||""),n=r&&r.type||"";if(t&&n&&n.toLowerCase().indexOf(t.toLowerCase())<0)return new _mail_error2.default("HttpTransport.ContentTypeError",{html:r.text,headers:r.headers,statusCode:r.status})}function _handleNotOkStatusError(r){if(r&&200!==r.status)return new _mail_error2.default("HttpTransport.NotOkStatusCode",{responseText:r.text,body:r.body,statusCode:r.status})}function _handleGenericError(r,e){if(r||!e)return new _mail_error2.default("Generic",r&&r.name+": "+r.message||"")}exports.__esModule=!0,exports.handleError=handleError;var _mail_error=require("../../../mail_error"),_mail_error2=_interopRequireDefault(_mail_error),_object=require("../../../utils/object"),_constants=require("../../../mail_error/constants");
},{"../../../mail_error":"./platform/mail_error","../../../mail_error/constants":"./platform/mail_error/constants","../../../utils/object":"./platform/utils/object"}],"./platform/http_transport/constants":[function(require,module,exports){
"use strict";exports.__esModule=!0;var QUERY_STRING_METHODS=exports.QUERY_STRING_METHODS=["get","head"],REQUEST_TIMEOUT=exports.REQUEST_TIMEOUT=3e4;
},{}],"./platform/http_transport":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function HttpTransport(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.timeout,s=void 0===i?_constants.REQUEST_TIMEOUT:i,n=r.httpRetry,o=void 0===n?0:n;this.adapter=new _superagent2.default,this.withCredentials=!1,this._method=t.toUpperCase(),(0,_invariant2.default)(HTTP_METHODS[this._method],"Invalid HTTP method. Valid options are: "+JSON.stringify(Object.keys(HTTP_METHODS))),this._timeout=s,this._url=e,this._headers={},this._fields={},this._attachments={},this._body=null,this._httpRetry=o}exports.__esModule=!0,exports.HTTP_METHODS=void 0;var _superagent=require("./adapters/superagent"),_superagent2=_interopRequireDefault(_superagent),_object=require("../utils/object"),_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_jvent=require("jvent"),_jvent2=_interopRequireDefault(_jvent),_cookie=require("cookie"),_constants=require("./constants"),HTTP_METHODS=exports.HTTP_METHODS=(0,_object.mirrorKeys)(["GET","HEAD","POST","PUT","PATCH","DELETE"]),emitter=new _jvent2.default;HttpTransport.prototype.setHeader=function(t,e){return this._headers[t]=e,this},HttpTransport.prototype.setCookieHeader=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if((0,_invariant2.default)(t,"Cookie should not be empty"),this.setHeader("Cookie",t),e){var r=(0,_cookie.parse)(t),i=r.SSL,s=void 0===i?"":i;s&&this.setHeader("SSLCOOKIE","SSL="+s)}},HttpTransport.prototype.setField=function(t,e){return this._fields[t]=e,this},HttpTransport.prototype.setAttachment=function(t,e){return this._attachments[t]=e,this},HttpTransport.prototype.setParser=function(t){return this._parser=t,this},HttpTransport.prototype.setRetry=function(t){return this._httpRetry=t,this},HttpTransport.prototype.send=function(t){var e=this;t&&(this._body=t);var r={withCredentials:!!this.withCredentials,method:this._method,url:this._url,headers:this._headers,fields:this._fields,attachments:this._attachments,parser:this._parser,body:this._body,timeout:this._timeout,httpRetry:this._httpRetry},i=this.adapter.send(r);return i.then(function(){emitter.emit("success")},function(t){t.url=e._url,emitter.emit("error",t)}),i},HttpTransport.prototype.createStream=function(t){t&&(this._body=t);var e={withCredentials:!!this.withCredentials,method:this._method,url:this._url,headers:this._headers,fields:this._fields,attachments:this._attachments,parser:this._parser,body:this._body,timeout:this._timeout},r=this.adapter.createStream(e);return r.on("error",function(t){return emitter.emit("error",t)}),r},HttpTransport.on=function(){emitter.on.apply(emitter,arguments)},HttpTransport.off=function(){emitter.off.apply(emitter,arguments)},HttpTransport.emit=function(){emitter.emit.apply(emitter,arguments)},exports.default=HttpTransport;
},{"../invariant":"./platform/invariant","../utils/object":"./platform/utils/object","./adapters/superagent":"./platform/http_transport/adapters/superagent/browser","./constants":"./platform/http_transport/constants","cookie":"./node_modules/cookie/index.js","jvent":"./node_modules/jvent/index.js"}],"./platform/invariant":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default=function(e,t){if(!e)throw new Error(t)},module.exports=exports.default;
},{}],"./platform/keyboard_shortcut_groups":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.AttachmentPreview=exports.Action=exports.Selection=exports.General=void 0;var _reactIntl=require("react-intl"),strings=(0,_reactIntl.defineMessages)({general:{id:"shortcut_group.general",defaultMessage:"General"},selection:{id:"shortcut_group.selection",defaultMessage:"Checking/Unchecking"},action:{id:"shortcut_group.actions",defaultMessage:"Actions"},attachmentPreview:{id:"shortcut_group.attachmentPreview",defaultMessage:"Attachment Preview"}}),General=exports.General={priority:0,id:"general",description:strings.general},Selection=exports.Selection={priority:1,id:"selection",description:strings.selection},Action=exports.Action={priority:2,id:"action",description:strings.action},AttachmentPreview=exports.AttachmentPreview={priority:3,id:"attachmentPreview",description:strings.attachmentPreview};
},{"react-intl":"./node_modules/react-intl/lib/index.js"}],"./platform/keyboard_shortcuts/constants":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.commonMessageActionKeys=exports.COMBINATION_DELIMITER=exports.MULTI_KEY_DELIMITER=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),MULTI_KEY_DELIMITER=exports.MULTI_KEY_DELIMITER=",",COMBINATION_DELIMITER=exports.COMBINATION_DELIMITER="+",commonMessageActionKeys=exports.commonMessageActionKeys={reply:{key:"R",description:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.reply",defaultMessage:"Reply"}))},replyAll:{key:"A",description:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.reply_all",defaultMessage:"Reply All"}))},forward:{key:"F",description:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.forward",defaultMessage:"Forward"}))},print:{key:"P",description:_react2.default.createElement("strong",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"shortcut.print",defaultMessage:"Print"}))}};
},{"react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./platform/keyboard_shortcuts":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function validate(e,t,r){(0,_invariant2.default)(e||"object"===("undefined"==typeof t?"undefined":_typeof(t))&&"string"==typeof t.description.id,"The 'group' has to be an object returned by React Intl's defineMessages. Currently we got "+t),Object.keys(r).forEach(function(t){var n=r[t];(0,_invariant2.default)(e||_react2.default.isValidElement(n.description)||"object"===_typeof(n.description)&&"string"==typeof n.description.id,"The 'message' has to be an object returned by React Intl's defineMessages\n            or has to be an instance of a React element (FormattedMessage). Currently, the key is "+t)})}function findDuplicateKeyMatchingDescription(e,t){for(var r=0;r<e.length;r++){var n=e[r],a=n.description;if(a===t)return n;if(!(_react2.default.isValidElement(a)&&a.type!==_reactIntl.FormattedMessage||_react2.default.isValidElement(t)&&t.type!==_reactIntl.FormattedMessage)){var i=_react2.default.isValidElement(a)?a.props.id:a.id,o=_react2.default.isValidElement(t)?t.props.id:t.id;if(i===o)return n}}}function _storeIntoShortcutManifest(e,t,r){var n={};if(Object.keys(r).forEach(function(e){n[e]=++_keyCounter}),e===!0)return n;var a=t.id,i=_manifests[a];return i||(_manifests[t.id]=i={group:t,keys:[]}),Object.keys(r).forEach(function(e){var t=r[e],a=t.key,o=t.description,s=findDuplicateKeyMatchingDescription(i.keys,o);if(s)s.key.indexOf(a)<0&&(s.key+=_constants.MULTI_KEY_DELIMITER+a);else{var c=n[e],u={id:c,key:a,description:o};i.keys.indexOf(u)===-1&&i.keys.push(u)}}),n}function _createMetaForManager(e,t){var r={};return Object.keys(e).forEach(function(n){var a=e[n].key,i=t[n];r[n]=function(e){return{id:i,key:a,callback:e}}}),r}function createShortcutGroup(e){var t=e.invisible,r=e.group,n=e.keys;validate(t,r,n);var a=_storeIntoShortcutManifest(t,r,n);return _createMetaForManager(n,a)}function __dangerouslyGetManifest(){return _manifests}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.createShortcutGroup=createShortcutGroup,exports.__dangerouslyGetManifest=__dangerouslyGetManifest;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactIntl=require("react-intl"),_constants=require("./constants"),_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_manifests={},_keyCounter=0;
},{"../invariant":"./platform/invariant","./constants":"./platform/keyboard_shortcuts/constants","react":"./node_modules/react/react.js","react-intl":"./node_modules/react-intl/lib/index.js"}],"./platform/lazy_loading/constants":[function(require,module,exports){
"use strict";exports.__esModule=!0;var lazyLoadingNamespace=exports.lazyLoadingNamespace="__lazyBundles";
},{}],"./platform/lazy_loading/resolver":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function getBundleMapURL(t){return _mail_constants.YCPI_PATH_PREFIX+"/"+t.toLowerCase()+"-bundles.json"}function resolveBundleURL(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.bundleMapURL;return n?fetchJSON(n).then(function(e){return window[_constants.lazyLoadingNamespace]=e,getBundleURL(t,e)}):new Promise(function(e){return e(getBundleURL(t,window[_constants.lazyLoadingNamespace]))})}function fetchJSON(t){return new _http_transport2.default("GET",t).setHeader("Accept","application/json").send().then(function(t){return JSON.parse(t.text)})}function getBundleURL(t,e){var n=e.urls[e.urlIndexForEntry[t]];if(!n)throw new Error("Unknown bundle URL for module "+t);return n}exports.__esModule=!0,exports.getBundleMapURL=getBundleMapURL,exports.default=resolveBundleURL;var _constants=require("./constants"),_mail_constants=require("../mail_constants"),_http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport);
},{"../http_transport":"./platform/http_transport","../mail_constants":"./platform/mail_constants","./constants":"./platform/lazy_loading/constants"}],300:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_mail_constants=require("../mail_constants"),_logger=require("./logger"),_logger2=_interopRequireDefault(_logger),PROXY_API_ROUTE_BASE_ENDPOINT=_mail_constants.YCPI_PATH_PREFIX+"/linkEnhancer",TIMEOUT=3500,LinkEnhancer=function(){function t(e){_classCallCheck(this,t),this.crumb=e.crumb}return t.prototype.get=function(t){var e=PROXY_API_ROUTE_BASE_ENDPOINT+"?crumb="+this.crumb+"&url="+encodeURIComponent(t),r=new _http_transport2.default(_http_transport.HTTP_METHODS.GET,e,{timeout:TIMEOUT}),n=_logger2.default.feature("lucy_client_api_call",{crumb:this.crumb}),_=r.send();return _.then(n.logSuccessAndLatency,n.logFailure),_},t}();exports.default=LinkEnhancer,module.exports=exports.default;
},{"../http_transport":"./platform/http_transport","../mail_constants":"./platform/mail_constants","./logger":301}],301:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger);exports.default=_norrinLogger2.default.create("norrin/link_enhancer"),module.exports=exports.default;
},{"norrin-logger":"./node_modules/norrin-logger/index.js"}],302:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _script_loader=require("../utils/script_loader"),_resolver=require("../lazy_loading/resolver"),_resolver2=_interopRequireDefault(_resolver),Loader=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.disabled;_classCallCheck(this,e),this._cache={},this._disabled=t}return e.prototype.locate=function(e,r){var t=r.bundleMapURL;return(0,_resolver2.default)(e,{bundleMapURL:t})},e.prototype.fetch=function(e,r){var t=r.cache;if(!t)return(0,_script_loader.loadScript)(e);var a=this._cache;return a[e]||(a[e]=(0,_script_loader.loadScript)(e)),a[e]},e.prototype.loadModule=function(e){var r=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.cache,o=void 0===a||a,l=t.bundleMapURL;if(this._disabled)return Promise.reject(new Error("Lazy loading disabled"));var i={cache:o,bundleMapURL:l};return this.locate(e,i).then(function(e){return r.fetch(e,i)})},e}();exports.default=Loader,module.exports=exports.default;
},{"../lazy_loading/resolver":"./platform/lazy_loading/resolver","../utils/script_loader":"./platform/utils/script_loader"}],"./platform/logger":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger);exports.default=_norrinLogger2.default.create("norrin/app"),module.exports=exports.default;
},{"norrin-logger":"./node_modules/norrin-logger/index.js"}],"./platform/mail_api_client/batch_request":[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_errors=require("./errors"),MailAPIErrors=_interopRequireWildcard(_errors),_mail_error=require("../mail_error"),_mail_error2=_interopRequireDefault(_mail_error),_api=require("../mail_error/api"),_api2=_interopRequireDefault(_api),_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_mail_constants=require("../mail_constants"),_querystring=require("querystring"),_querystring2=_interopRequireDefault(_querystring),_logger=require("../base_client/logger"),_logger2=_interopRequireDefault(_logger),BATCH_PATH="/ws/v3/batch",DEFAULT_HTTP_METHOD="post",DEFAULT_RESPONSE_TYPE="json",MAX_RETRIES=1,batchRequest={Transport:_http_transport2.default,METHODS:{"folders.get":require("./methods/folders/get"),"folders.delete":require("./methods/folders/delete"),"folders.create":require("./methods/folders/create"),"folders.rename":require("./methods/folders/rename"),"folderList.delete":require("./methods/list/folder_delete"),"folderList.update":require("./methods/list/folder_update"),"folderChange.getList":require("./methods/message_groups/folder_change_get_list"),"launch.skeleton":require("./methods/launch/skeleton"),"launch.defaultFolder":require("./methods/launch/default_folder"),"launch.folder":require("./methods/launch/folder"),"launch.message":require("./methods/launch/message"),"launch.compose":require("./methods/launch/compose"),"launch.messageGroup":require("./methods/launch/message_group"),"messageGroups.get":require("./methods/message_groups/get"),"messageGroups.getList":require("./methods/message_groups/get_list"),"magicTriage.getList":require("./methods/message_groups/get_list"),"mrdMessages.get":require("./methods/messages/get"),"messages.getBodies":require("./methods/messages/get_bodies"),"messages.prefetchBodies":require("./methods/messages/get_bodies"),"messages.save":require("./methods/messages/save"),"messages.saveAndSend":require("./methods/messages/save_and_send"),"messages.send":require("./methods/messages/send"),"messages.update":require("./methods/messages/update"),"messages.delete":require("./methods/messages/delete"),"messages.trashAndDelete":require("./methods/messages/trash_and_delete"),"messages.saveRawMessage":require("./methods/messages/save_raw_message"),"messages.undo":require("./methods/messages/undo/undo"),"undo.list":require("./methods/messages/undo/get_list"),"document.fetch":require("./methods/document/fetch"),"task.status":require("./methods/task/status"),"task.abort":require("./methods/task/abort"),"settings.get":require("./methods/settings/get"),"settings.saveVacationPreferences":require("./methods/settings/save_vacation_preferences"),"settings.saveMessageFilters":require("./methods/settings/save_message_filters"),"settings.saveBlockedSenders":require("./methods/settings/save_delivery_blocked_senders"),"settings.saveWebMailboxAttributes":require("./methods/settings/save_web_mailbox_attributes"),"settings.getFeatureAttributes":require("./methods/settings/get_feature_attributes"),"settings.addAccount":require("./methods/settings/add_account"),"settings.updateAccount":require("./methods/settings/update_account"),"settings.deleteAccount":require("./methods/settings/delete_account"),"settings.setBaseName":require("./methods/settings/set_base_name"),"settings.resendConfirmEmail":require("./methods/settings/resend_confirm_email"),"unseenCount.reset":require("./methods/decos/update"),"account.getAlerts":require("./methods/account_alerts/get"),"account.updateAlerts":require("./methods/account_alerts/update")},request:function(e,t,r,s){if(!batchRequest.METHODS[e])throw new Error("Invalid method '"+e+"'.\n                List of available methods: "+JSON.stringify(Object.keys(batchRequest.METHODS)));var a=batchRequest._getEndpoint(e,r),o=batchRequest.METHODS[e];if(!o.getBatchPayload)throw new TypeError("Method "+e+" does not implement the required function `getBatchPayload`");var i=o.getBatchPayload(t),n=Object.assign({},i,{responseType:DEFAULT_RESPONSE_TYPE}),u=0;return batchRequest._request(e,a,n,r,s,o,t,u)},_request:function(e,t,r,s,a,o,i,n){var u=Object.assign({},batchRequest._getCustomHeaders(o,i),s.headers);return batchRequest._sendRequest(t,r,s,a,u).then(function(u){var d=u.body.result.responses,l=batchRequest._generateSuccessAndFailureResponses(d),_=batchRequest._getError(o,l,i);if(_){if(batchRequest._isRetryable(_)){var c=Object.assign({},s.loggerParams,{apiName:e,retryCount:n,statusCode:u.status,errorCode:_.errorCode});if(_logger2.default.error("mail_api_client_retry",{data:c}),n<MAX_RETRIES)return batchRequest._request(e,t,r,s,a,o,i,++n)}throw _}return o.transformResponses(l,_extends({},s,i))}).catch(function(t){var r=MailAPIErrors.handleTransportError(t,e)||t;throw r=_mail_error2.default.errorify(r)})},_generateSuccessAndFailureResponses:function(e){var t={successMap:{},failureMap:{}};return e.forEach(function(e){e.httpCode<400?t.successMap[e.id]=e:t.failureMap[e.id]=e}),t},_getError:function(e,t,r){var s=t.failureMap,a=Object.keys(s).length;return e.getBatchError?e.getBatchError(t,r):a?new _api2.default("The response returned from JEDI contains errors.",s):null},_isRetryable:function(e){var t=e.failureMap,r=e.isRetryable;return r&&Object.keys(t).every(function(e){var r=t[e];if(999===r.httpCode||429===r.httpCode)return!1;if(!r.response.error)return!0;var s=r.response.error.code,a=s.split("-")[0];return"EP-5000"===s||"EC"!==a&&"EP"!==a&&"EB-6000"!==s&&"EB-6003"!==s})},_getCustomHeaders:function(e,t){var r=null;return e.getHeaders&&(r=e.getHeaders(t)),r},_setCustomHeaders:function(e,t){t&&Object.keys(t).forEach(function(r){e.setHeader(r,t[r])})},_sendRequest:function(e,t,r,s,a){var o=new batchRequest.Transport(DEFAULT_HTTP_METHOD,e,{timeout:r.timeout,httpRetry:r.httpRetry});return r.cookie&&o.setCookieHeader(r.cookie),o.setHeader("Accept","application/json"),batchRequest._setCustomHeaders(o,a),o.setField("batchJson",JSON.stringify(t)),s&&s.forEach(function(e){o.setAttachment(encodeURIComponent(e.name),e)}),o.send()},_getEndpoint:function(e,t){var r=t.appId,s=void 0===r?"":r,a=t.wssid,o=void 0===a?"":a,i=t.ymreqid,n=void 0===i?"":i,u=t.useHostname,d=void 0!==u&&u,l=d?"http://"+_mail_constants.JWS_HOST:"";(0,_invariant2.default)(o,"wssid is required for making request to JEDI"),(0,_invariant2.default)(n,"ymreqid is required for making request to JEDI");var _={name:e,appId:s,ymreqid:n,wssid:o};return l+BATCH_PATH+"?"+_querystring2.default.stringify(_)}};exports.default=batchRequest,module.exports=exports.default;
},{"../base_client/logger":"./platform/base_client/logger","../http_transport":"./platform/http_transport","../invariant":"./platform/invariant","../mail_constants":"./platform/mail_constants","../mail_error":"./platform/mail_error","../mail_error/api":"./platform/mail_error/api","./errors":"./platform/mail_api_client/errors","./methods/account_alerts/get":"./platform/mail_api_client/methods/account_alerts/get","./methods/account_alerts/update":"./platform/mail_api_client/methods/account_alerts/update","./methods/decos/update":"./platform/mail_api_client/methods/decos/update","./methods/document/fetch":"./platform/mail_api_client/methods/document/fetch","./methods/folders/create":"./platform/mail_api_client/methods/folders/create","./methods/folders/delete":"./platform/mail_api_client/methods/folders/delete","./methods/folders/get":"./platform/mail_api_client/methods/folders/get","./methods/folders/rename":"./platform/mail_api_client/methods/folders/rename","./methods/launch/compose":"./platform/mail_api_client/methods/launch/compose","./methods/launch/default_folder":"./platform/mail_api_client/methods/launch/default_folder","./methods/launch/folder":"./platform/mail_api_client/methods/launch/folder","./methods/launch/message":"./platform/mail_api_client/methods/launch/message","./methods/launch/message_group":"./platform/mail_api_client/methods/launch/message_group","./methods/launch/skeleton":"./platform/mail_api_client/methods/launch/skeleton","./methods/list/folder_delete":"./platform/mail_api_client/methods/list/folder_delete","./methods/list/folder_update":"./platform/mail_api_client/methods/list/folder_update","./methods/message_groups/folder_change_get_list":"./platform/mail_api_client/methods/message_groups/folder_change_get_list","./methods/message_groups/get":"./platform/mail_api_client/methods/message_groups/get","./methods/message_groups/get_list":"./platform/mail_api_client/methods/message_groups/get_list","./methods/messages/delete":"./platform/mail_api_client/methods/messages/delete","./methods/messages/get":"./platform/mail_api_client/methods/messages/get","./methods/messages/get_bodies":"./platform/mail_api_client/methods/messages/get_bodies","./methods/messages/save":"./platform/mail_api_client/methods/messages/save","./methods/messages/save_and_send":"./platform/mail_api_client/methods/messages/save_and_send","./methods/messages/save_raw_message":"./platform/mail_api_client/methods/messages/save_raw_message","./methods/messages/send":"./platform/mail_api_client/methods/messages/send","./methods/messages/trash_and_delete":"./platform/mail_api_client/methods/messages/trash_and_delete","./methods/messages/undo/get_list":"./platform/mail_api_client/methods/messages/undo/get_list","./methods/messages/undo/undo":"./platform/mail_api_client/methods/messages/undo/undo","./methods/messages/update":"./platform/mail_api_client/methods/messages/update","./methods/settings/add_account":"./platform/mail_api_client/methods/settings/add_account","./methods/settings/delete_account":"./platform/mail_api_client/methods/settings/delete_account","./methods/settings/get":"./platform/mail_api_client/methods/settings/get","./methods/settings/get_feature_attributes":"./platform/mail_api_client/methods/settings/get_feature_attributes","./methods/settings/resend_confirm_email":"./platform/mail_api_client/methods/settings/resend_confirm_email","./methods/settings/save_delivery_blocked_senders":"./platform/mail_api_client/methods/settings/save_delivery_blocked_senders","./methods/settings/save_message_filters":"./platform/mail_api_client/methods/settings/save_message_filters","./methods/settings/save_vacation_preferences":"./platform/mail_api_client/methods/settings/save_vacation_preferences","./methods/settings/save_web_mailbox_attributes":"./platform/mail_api_client/methods/settings/save_web_mailbox_attributes","./methods/settings/set_base_name":"./platform/mail_api_client/methods/settings/set_base_name","./methods/settings/update_account":"./platform/mail_api_client/methods/settings/update_account","./methods/task/abort":"./platform/mail_api_client/methods/task/abort","./methods/task/status":"./platform/mail_api_client/methods/task/status","querystring":"querystring"}],"./platform/mail_api_client/blocks/add_account":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={getBlockPayload:function(e,o){var t=o.account,s=o.mailboxId;return{id:e,uri:"/ws/v3/mailboxes/@.id=="+s+"/accounts",method:"POST",payload:{account:t}}},transformResponse:function(e){return e.response.result}},module.exports=exports.default;
},{}],"./platform/mail_api_client/blocks/create_folders":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _mail_constants=require("../../mail_constants");exports.default={getBlockPayload:function(e,t){return{id:e,uri:"/ws/v3/mailboxes/@.id=="+t.mailboxId+"/folders",method:"PUT",payloadType:"embedded",payload:{folder:{types:[_mail_constants.FolderTypes.USER],acctId:t.accountId,name:t.folderName}}}},transformResponse:function(e){var t=e.response.result;return{id:t.id,unread:t.unread,total:t.total,types:t.types,name:t.name,isSystem:!1,accountId:t.acctId}}},module.exports=exports.default;
},{"../../mail_constants":"./platform/mail_constants"}],"./platform/mail_api_client/blocks/delete_account":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={getBlockPayload:function(e,o){return{id:e,uri:"/ws/v3/mailboxes/@.id=="+o.mailboxId+"/accounts/@.id=="+o.accountId,method:"DELETE"}},transformResponse:function(){return 1}},module.exports=exports.default;
},{}],"./platform/mail_api_client/blocks/delete_folders":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={getBlockPayload:function(e,o){return{id:e,uri:"/ws/v3/mailboxes/@.id=="+o.mailboxId+"/folders/@.id=="+o.folderId,method:"DELETE"}},transformResponse:function(){return 1}},module.exports=exports.default;
},{}],"./platform/mail_api_client/blocks/delete_messages":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={getBlockPayload:function(e,s){var r=s.mailboxId,o=s.messageIds,t=s.query,i=s.async;if(!o&&!t)throw new Error("POST Delete Message requires either a list of ids or a query string.");var a=[];o&&a.push("id:("+o.join(" ")+")"),t&&a.push(t);var n=encodeURIComponent(a.join(" AND ")),u={id:e,uri:"/ws/v3/mailboxes/@.id=="+r+"/messages/@.select==q?q="+n,method:"DELETE"};return i&&(u.uri+="&async=true"),u},transformResponse:function(){return 1}},module.exports=exports.default;
},{}],"./platform/mail_api_client/blocks/fetch_document":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _convertPages(e){var s={};return Object.keys(e).forEach(function(t){var a=1*t.slice(4),n=e[t].statuscode;702!==n&&(700===n?s[a]={content:e[t],state:_mail_constants.RecordStates.LOADED}:s[a]={content:null,state:_mail_constants.RecordStates.ERROR})}),s}exports.__esModule=!0;var _mail_constants=require("../../mail_constants"),_api=require("../../mail_error/api"),_api2=_interopRequireDefault(_api),RESPONSE_ERROR_INFO={802:{message:"Missing App Id",isRetryable:!0},803:{message:"Missing Document Id",isRetryable:!0},804:{message:"Missing Document URL",isRetryable:!0},805:{message:"Missing Fetch Options",isRetryable:!0},806:{message:"Inaccessible Download URL",isRetryable:!1},807:{message:"Inaccessible Download URL",isRetryable:!1},808:{message:"Invalid Fetch Options",isRetryable:!1},809:{message:"Document Read Error",isRetryable:!0},811:{message:"Error Reading Info",isRetryable:!0},812:{message:"Failed to process document",isRetryable:!0},813:{message:"Unsupported File Type",isRetryable:!1},814:{message:"Document still queued",isRetryable:!0}},DOC_ERROR_INFO={602:{message:"Document conversion failed for an unknown reason.",isRetryable:!1},605:{message:"Processing the first page of the document.",isRetryable:!0},606:{message:"The document url is not accessible.",isRetryable:!1},610:{message:"The document failed to be converted to html.",isRetryable:!1},611:{message:"The document failed to convert to PDF.",isRetryable:!1},621:{message:"Document conversion is queued",isRetryable:!0},640:{message:"PDF file is malformed.",isRetryable:!1}};exports.default={getHeaders:function(e){return{"docs-document-id":e}},getBlockPayload:function(e,s,t){return{id:e,uri:"/ws/docpreview/v2/fetch",method:"POST",payload:{start_page:s,end_page:t},payloadType:"embedded"}},transformResponse:function(e){var s=e.response,t=s.info,a=s.pages,n=null;return n=t?{statusCode:s.statuscode,code:s.code,pages:_convertPages(a),numPages:t.num_pages,height:t.dimension.h,width:t.dimension.w,exceptions:t.exceptions,sheets:t.sheetInfo||{}}:{statusCode:s.statuscode,code:s.code,pages:_convertPages(a)}},getError:function(e,s,t){var a=Object.keys(e).length?e:s,n=a[t].response,o=n.code,r=n.pages,i=n.statuscode,c=600,l=701;if(RESPONSE_ERROR_INFO.hasOwnProperty(o)){var u=RESPONSE_ERROR_INFO[o],d=u.message,R=u.isRetryable;return Object.assign(a[t],{info:{code:o,isRetryable:R}}),new _api2.default("AttachmentPreview: "+d,a,R)}if(DOC_ERROR_INFO.hasOwnProperty(i)){var m=DOC_ERROR_INFO[i],g=m.message,p=m.isRetryable;return Object.assign(a[t],{info:{code:i,isRetryable:p}}),new _api2.default("AttachmentPreview: "+g,a,p)}return i===c&&Object.keys(r).some(function(e){return r[e].statuscode===l})?(Object.assign(a[t],{info:{code:l,isRetryable:!1}}),new _api2.default("AttachmentPreview: Page has not converted\n                    even though the document is said to be successfully converted.",a,!1)):null}},module.exports=exports.default;
},{"../../mail_constants":"./platform/mail_constants","../../mail_error/api":"./platform/mail_error/api"}],"./platform/mail_api_client/blocks/get_account_alerts":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _logger=require("../../base_client/logger"),_logger2=_interopRequireDefault(_logger),_mail_constants=require("../../mail_constants");exports.default={getBlockPayload:function(e,r){return{id:e,uri:"/ws/v3/mailboxes/@.id=="+r.mailboxId+"/alerts",method:"GET"}},transformResponse:function(e){if(!e)return[];var r=e.response.result.alerts,t=[];return Array.isArray(r)&&(t=r.map(function(e){return{id:e.id,accountId:e.accountId,type:e.type,state:e.state,data:e.data}})),t},getError:function(e){if(e){var r=e.id,t=e.httpCode,o=e.response,a={apiName:r,errorCode:o&&o.error&&o.error.code,httpCode:t},n=_logger2.default.feature(_mail_constants.ApiClientLoggerNames.MailAPIClient,{data:a});n.logFailure()}return null}},module.exports=exports.default;
},{"../../base_client/logger":"./platform/base_client/logger","../../mail_constants":"./platform/mail_constants"}],"./platform/mail_api_client/blocks/get_accounts":[function(require,module,exports){
"use strict";exports.__esModule=!0;var block=exports.block={getBlockPayload:function(o,e){return{id:o,uri:"/ws/v3/mailboxes/@.id=="+e.mailboxId+"/accounts",method:"GET"}},transformResponse:function(o){return o.response.result.accounts}};
},{}],"./platform/mail_api_client/blocks/get_conversation_message_group":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _invariant=require("../../invariant"),_invariant2=_interopRequireDefault(_invariant),_mappers=require("../mappers");exports.default={getBlockPayload:function(e,r){var a=r.mailboxId,s=r.messageGroupId,i=r.isConversation;(0,_invariant2.default)(a,"mailboxId is a required field"),(0,_invariant2.default)(s,"messageGroupId is required");var n=encodeURIComponent(s),t=i?"conversationId:("+n+")":"id:("+n+")";return{id:e,uri:"/ws/v3/mailboxes/@.id=="+a+"/messages/@.select==q?q="+t,method:"GET",payloadType:"embedded"}},transformResponse:function(e,r){var a=e.response.result.messages,s=r.isConversation,i=a.map(function(e){return(0,_mappers.messageMapper)(e,r)}).reverse(),n=s?i[0].conversationId:i[0].id;return{messageGroup:{id:n,messages:i}}}},module.exports=exports.default;
},{"../../invariant":"./platform/invariant","../mappers":"./platform/mail_api_client/mappers"}],"./platform/mail_api_client/blocks/get_conversations_by_group":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getBlockPayload(e,r){var n=r.mailboxId,t=r.offset,o=r.count,a=r.folderId,s=r.sortOrder,i=r.excludeFolderTypes,d=r.ids,c="";switch((0,_invariant2.default)(n,"mailboxId is a required field"),c+=a?"folderId"+DELIMITER+a:"",c+=i?encodeURIComponent("-folderType:("+i.join(" ")+")"):"",c+=SPACE+"groupBy"+DELIMITER+"conversationId",c+=SPACE+"count"+DELIMITER+o,c+=SPACE+"offset"+DELIMITER+t,c+=d?encodeURIComponent(" conversationId:("+d.join(" ")+")"):"",s){case _mail_constants.SortOrder.DATE_ASC:c+=SPACE+"sort"+DELIMITER+"date";break;case _mail_constants.SortOrder.DATE_DESC:c+=SPACE+"-sort"+DELIMITER+"date";break;case _mail_constants.SortOrder.SENDER:case _mail_constants.SortOrder.SUBJECT:case _mail_constants.SortOrder.UNREAD:case _mail_constants.SortOrder.STARRED:c+=SPACE+"sort"+DELIMITER+s}return{id:e,uri:"/ws/v3/mailboxes/@.id=="+n+"/messages/@.select==q?q="+c,method:"GET",payloadType:"embedded"}}function transformResponse(e,r,n){var t=n.folderId,o=e.response.result,a=o.conversations,s=o.messages,i=new Map;s.forEach(function(e){return i.set(e.id,e)});var d={messageGroups:a.filter(function(e){var r=e.messageIds,n=!1;return r.forEach(function(e){i.get(e)||(n=!0)}),!n}).filter(function(e){var r=e.messageIds;return r.length>0}).map(function(e){var r=e.id,t=e.messageIds;return{id:r,messages:t.map(function(e){return(0,_mappers.messageMapper)(i.get(e),n)}).reverse()}})};if(!isNaN(r)){var c=!1;if(s.length&&t){var l=s.find(function(e){return t===e.folder.id});(0,_invariant2.default)(l,"We are looking for message in the folder and we cannot find it."),c=l.folder.total>r}d.hasMore=c}return d}exports.__esModule=!0,exports.getBlockPayload=getBlockPayload,exports.transformResponse=transformResponse;var _invariant=require("../../invariant"),_invariant2=_interopRequireDefault(_invariant),_mail_constants=require("../../mail_constants"),_mappers=require("../mappers"),DELIMITER=encodeURIComponent(":"),SPACE=encodeURIComponent(" ");
},{"../../invariant":"./platform/invariant","../../mail_constants":"./platform/mail_constants","../mappers":"./platform/mail_api_client/mappers"}],"./platform/mail_api_client/blocks/get_folders":[function(require,module,exports){
"use strict";function _normalizeFolderObject(e){var o="@B@Bulk",r="Spam",t="DELETE_IN_PROGRESS",n=e.filter(function(e){return e.status!==t}).map(function(e){var t=!0,n=e.name;return e.types.indexOf(_mail_constants.FolderTypes.USER)!==-1&&(t=!1),n===o&&(n=r),{unread:e.unread,total:e.total,types:e.types,name:n,id:e.id,isSystem:t,accountId:e.acctId,highestModSeq:e.highestModSeq,uidNext:e.uidNext}});return n}function _getFolderTreeNodes(e){var o=[],r={};return e.forEach(function(e){r[e.accountId]||(r[e.accountId]={}),r[e.accountId][e.name]=e}),e.forEach(function(e){var t=r[e.accountId],n=(0,_folder.getFolderPathParts)(e,t),a=0;(0,_folder.insertIntoFolderTree)(o,e,n,a)}),o}exports.__esModule=!0,exports.block=void 0,exports._normalizeFolderObject=_normalizeFolderObject,exports._getFolderTreeNodes=_getFolderTreeNodes;var _mail_constants=require("../../mail_constants"),_folder=require("../../utils/folder"),block=exports.block={getBlockPayload:function(e,o){return{id:e,uri:"/ws/v3/mailboxes/@.id=="+o.mailboxId+"/folders",method:"GET",payloadType:"embedded"}},transformResponse:function(e){var o=_normalizeFolderObject(e.response.result.folders);return o.sort(function(e,o){return e.name<o.name?-1:e.name>o.name?1:0}),_getFolderTreeNodes(o)}};
},{"../../mail_constants":"./platform/mail_constants","../../utils/folder":"./platform/utils/folder"}],"./platform/mail_api_client/blocks/get_mailbox_attribute":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _mail_constants=require("../../mail_constants"),_compose=require("../../mail_constants/compose"),_object=require("../../utils/object"),_invariant=require("../../invariant"),_invariant2=_interopRequireDefault(_invariant),_themes=require("../../theming/themes"),MailboxAttributeValues=(0,_object.mirrorKeys)((0,_object.values)(_mail_constants.MailboxAttributes));exports.default={getBlockPayload:function(t,e){return(0,_invariant2.default)(MailboxAttributeValues.hasOwnProperty(e.attributeId),"Unknown mailbox attribute: "+e.attributeId),{id:t,uri:"/ws/v3/mailboxes/@.id=="+e.mailboxId+"/attributes/@.id=="+e.attributeId,method:"GET"}},transformResponse:function(t){var e=t.response.result,a=e.id,i=e.value,s={};return Object.keys(_mail_constants.MailboxWebAttributes).some(function(t){return _mail_constants.MailboxAttributes[t]===a})?s[a]={value:i[a],testAndSet:i.testAndSet}:s[a]=i,a===_mail_constants.MailboxAttributes.COMPOSE_FONT_SIZE&&"16"===s[a].value&&(s[a].value=_compose.FontSizeMap[16]),a===_mail_constants.MailboxAttributes.THEME&&"purple"===s[a].value&&(s[a].value=_themes.Themes.DEFAULT),a===_mail_constants.MailboxAttributes.THEME_MODE&&"light"===s[a].value&&(s[a].value=_themes.ThemeModes.LIGHT),s}},module.exports=exports.default;
},{"../../invariant":"./platform/invariant","../../mail_constants":"./platform/mail_constants","../../mail_constants/compose":"./platform/mail_constants/compose","../../theming/themes":"./platform/theming/themes","../../utils/object":"./platform/utils/object"}],"./platform/mail_api_client/blocks/get_mailboxes":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={getBlockPayload:function(e){return{id:e,uri:"/ws/v3/mailboxes",method:"GET",payloadType:"embedded"}},transformResponse:function(e){return e.response.result.mailboxes.map(function(e){return{id:e.id,email:e.email,isPrimary:e.isPrimary,isSelected:e.isSelected}})}},module.exports=exports.default;
},{}],"./platform/mail_api_client/blocks/get_message":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _mappers=require("../mappers");exports.default={getBlockPayload:function(e,s){var r=s.mailboxId,a=s.messageId;return{id:e,uri:"/ws/v3/mailboxes/@.id=="+r+"/messages/@.id=="+a,method:"GET"}},transformResponse:function(e,s){return(0,_mappers.messageMapper)(e.response.result.message,s)}},module.exports=exports.default;
},{"../mappers":"./platform/mail_api_client/mappers"}],"./platform/mail_api_client/blocks/get_message_by_csid":[function(require,module,exports){
"use strict";function getBlockPayload(e,s){var o=s.mailboxId,r=s.csid,a=encodeURIComponent("csid:"+r+" folderType:DRAFT");return{id:e,uri:"/ws/v3/mailboxes/@.id=="+o+"/messages/@.select==q?q="+a,method:"GET"}}function transformResponse(e,s){return(0,_mappers.messageMapper)(e.response.result.messages[0],s)}exports.__esModule=!0,exports.getBlockPayload=getBlockPayload,exports.transformResponse=transformResponse;var _mappers=require("../mappers");
},{"../mappers":"./platform/mail_api_client/mappers"}],"./platform/mail_api_client/blocks/get_messages_by_group":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getBlockPayload(e,r){var o=r.mailboxId,s=r.offset,t=r.count,a=r.folderId,n=r.sortOrder,i=r.excludeFolderTypes,d=r.ids,l="";switch((0,_invariant2.default)(o,"mailboxId is a required field"),l+=a?"folderId"+DELIMITER+a:"",l+=i?encodeURIComponent("-folderType:("+i.join(" ")+")"):"",l+=SPACE+"count"+DELIMITER+t,l+=SPACE+"offset"+DELIMITER+s,l+=d?encodeURIComponent(" id:("+d.join(" ")+")"):"",n){case _mail_constants.SortOrder.DATE_ASC:l+=SPACE+"sort"+DELIMITER+"date";break;case _mail_constants.SortOrder.DATE_DESC:l+=SPACE+"-sort"+DELIMITER+"date";break;case _mail_constants.SortOrder.SENDER:case _mail_constants.SortOrder.SUBJECT:case _mail_constants.SortOrder.UNREAD:case _mail_constants.SortOrder.STARRED:l+=SPACE+"sort"+DELIMITER+n}return{id:e,uri:"/ws/v3/mailboxes/@.id=="+o+"/messages/@.select==q?q="+l,method:"GET",payloadType:"embedded"}}function transformResponse(e,r,o){var s=e.response.result.messages,t={messageGroups:s.map(function(e){return{id:e.id,messages:[(0,_mappers.messageMapper)(e,o)]}})};if(!isNaN(r)){var a=!1;s.length&&(a=s[0].folder.total>r),t.hasMore=a}return t}exports.__esModule=!0,exports.getBlockPayload=getBlockPayload,exports.transformResponse=transformResponse;var _mail_constants=require("../../mail_constants"),_invariant=require("../../invariant"),_invariant2=_interopRequireDefault(_invariant),_mappers=require("../mappers"),DELIMITER=encodeURIComponent(":"),SPACE=encodeURIComponent(" ");
},{"../../invariant":"./platform/invariant","../../mail_constants":"./platform/mail_constants","../mappers":"./platform/mail_api_client/mappers"}],"./platform/mail_api_client/blocks/get_simple_body":[function(require,module,exports){
"use strict";function transformSimpleBody(e){var s=e.htmlAnnotations.map(function(e){return e.divIds=e.divids,delete e.divids,e});return{html:e.html,htmlAnnotations:s}}exports.__esModule=!0;var _mappers=require("../mappers");exports.default={getBlockPayload:function(e,s){var t=s.mailboxId,a=s.messageId,d=s.secure,r=void 0!==d&&d,o=s.full,i=void 0===o||o,m="/ws/v3/mailboxes/@.id=="+t+"/messages/@.id=="+a+"/content/simplebody";return i&&(m+="/full"),r&&(m+="/secure"),{id:e,uri:m,method:"GET",payloadType:"embedded"}},transformResponse:function(e,s){var t=e.response.result,a=t.message,d=t.simpleBody,r=(0,_mappers.messageMapper)(a,s),o=r.attachments,i=r.headers,m=r.csid,n=r.id;return{id:n,body:transformSimpleBody(d),message:a,metadata:{attachments:o,headers:i,csid:m}}}},module.exports=exports.default;
},{"../mappers":"./platform/mail_api_client/mappers"}],"./platform/mail_api_client/blocks/rename_folders":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={getBlockPayload:function(e,d){return{id:e,uri:"/ws/v3/mailboxes/@.id=="+d.mailboxId+"/folders/"+d.folderId,method:"POST",payloadType:"embedded",payload:{folder:{name:d.folderName}}}},transformResponse:function(e){var d=e.response.result;return{id:d.id,unread:d.unread,total:d.total,types:d.types,name:d.name,isSystem:!1,accountId:d.acctId}}},module.exports=exports.default;
},{}],"./platform/mail_api_client/blocks/resend_confirm_email":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={getBlockPayload:function(e,t){var o=t.account;return{id:e,uri:o.link.href,method:"POST",payload:{account:{type:o.type,resendVerification:!0}}}},transformResponse:function(e){return e.response.result}},module.exports=exports.default;
},{}],"./platform/mail_api_client/blocks/save_mailbox_attribute":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={getBlockPayload:function(t,e){var i=e.mailboxId,a=e.value,d="/ws/v3/mailboxes/@.id=="+i+"/attributes/@.id=="+t;return{id:t,method:"POST",uri:d,payload:{id:t,link:{type:"RELATIVE",href:d},value:a}}},getChainedBlockPayload:function(t,e){var i=e.mailboxId,a=e.value,d="/ws/v3/mailboxes/@.id=="+i+"/attributes/@.id=="+t,o="GetMailboxAttribute_",r="SetMailboxAttribute_";return a.testAndSet="$(testAndSet)",{id:o+t,uri:"/ws/v3/mailboxes/@.id=="+i+"/attributes/@.id=="+t,method:"GET",filters:{select:{testAndSet:"$..value.testAndSet"}},requests:[{id:r+t,method:"POST",uri:d,payload:{id:t,link:{type:"RELATIVE",href:d},value:a}}]}},transformResponse:function(){return 1}},module.exports=exports.default;
},{}],"./platform/mail_api_client/blocks/save_message":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function createAttachmentPartElement(e){return e.map(function(e){var t=e.mimeType,a=e.name;return{contentType:t,partName:encodeURIComponent(a),payloadReference:"multipart://"+encodeURIComponent(a)}})}function createAttachmentElements(e){return e.map(function(e){var t=e.contentId,a=e.filename,n=e.disposition,s=e.messageReference,i={disposition:n,contentId:t};return s?i.messageReference=s:i.multipartName="multipart://"+encodeURIComponent(a),i})}function createRecipientObject(e){return e=_utils2.default.makeArray(e),e.map(function(e){return"string"==typeof e.email&&(e.email=e.email.trim()),e}).filter(function(e){return _utils4.default.isValidEmail(e.email)})}exports.__esModule=!0;var _utils=require("../../../molecules/compose/utils/utils"),_utils2=_interopRequireDefault(_utils),_utils3=require("../../utils"),_utils4=_interopRequireDefault(_utils3),_mappers=require("../mappers"),_attachments=require("../../utils/attachments"),_mail_constants=require("../../mail_constants"),_omit=require("lodash/omit"),_omit2=_interopRequireDefault(_omit),FLAGS={spam:"false",read:"true"};exports.default={getBlockPayload:function(e,t){var a=t.mailboxId,n=t.csid,s=t.inReplyTo,i=t.subject,r=t.to,o=t.cc,c=t.bcc,l=t.from,m=t.replyTo,u=t.html,p=t.attachments,d=void 0===p?[]:p,f=t.files,_=void 0===f?[]:f,y=t.folderId,h={partName:"jsonString",contentType:"application/json",payload:{actions:{responseMessage:!0},message:{csid:n,newMessage:!s,headers:{subject:i,from:l,replyTo:m||l,to:createRecipientObject(r),cc:createRecipientObject(o),bcc:createRecipientObject(c)},folder:{id:y},flags:FLAGS,inReplyTo:s},simpleBody:{html:u,attachments:createAttachmentElements(d.filter(function(e){var t=e.disposition,a=e.type,n=e.contentId;return!(!n&&t===_mail_constants.Attachments.Dispositions.INLINE&&a===_mail_constants.Attachments.Types.TEXT)}))}}};return h.inReplyTo||delete h.inReplyTo,{id:e,uri:"/ws/v3/mailboxes/@.id=="+a+"/messages",method:"POST",payloadType:"multipart",payloadParts:[h].concat(createAttachmentPartElement(_))}},transformResponse:function(e){var t=e.response,a=t.result.simpleBody,n=(0,_mappers.saveMessageMapper)(t.result.message);return n.attachments=(0,_attachments.transformAttachments)(n,n.attachments),{message:n,simpleBody:(0,_omit2.default)(a,"attachments")}}},module.exports=exports.default;
},{"../../../molecules/compose/utils/utils":"./molecules/compose/utils/utils","../../mail_constants":"./platform/mail_constants","../../utils":"./platform/utils","../../utils/attachments":"./platform/utils/attachments","../mappers":"./platform/mail_api_client/mappers","lodash/omit":"./node_modules/lodash/omit.js"}],"./platform/mail_api_client/blocks/save_raw_message":[function(require,module,exports){
"use strict";exports.__esModule=!0;var MIMEBODY_PART_REFERENCE="mimeMsg",FLAGS={read:!1,spam:!1,ham:!0};exports.default={getBlockPayload:function(e,a,t){var o=t.mailboxId,s=t.folderId,r=MIMEBODY_PART_REFERENCE+a,n={partName:"jsonString",contentType:"application/json",payload:{actions:{responseMessage:!0},message:{newMessage:!0,folder:{id:s},flags:FLAGS,headers:null},mimeBody:"multipart://"+r}},p={contentType:"application/octet-stream",partName:r,disposition:"form-data",payloadReference:"multipart://"+r};return{id:e,uri:"/ws/v3/mailboxes/@.id=="+o+"/messages",method:"POST",payloadType:"multipart",payloadParts:[n].concat(p)}},transformResponse:function(){return!0}},module.exports=exports.default;
},{}],"./platform/mail_api_client/blocks/send_message":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={getBlockPayload:function(e,s){var d=s.mailboxId,a=s.messageId,o=s.csid,t=s.captchaAnswer,r=s.folderId,i={id:e,uri:"/ws/v3/mailboxes/@.id=="+d+"/messages/@.id=="+a+"/send",method:"POST",payloadType:"embedded",payload:{csid:o,destinationFolder:{id:r}}};return t&&(i.payload.captcha=t),i},transformResponse:function(e){var s=e.response;return s.result.message}},module.exports=exports.default;
},{}],"./platform/mail_api_client/blocks/task_abort":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={getBlockPayload:function(e,t){var o=t.mailboxId,s=t.taskId;return{id:e,uri:"/ws/v3/mailboxes/@.id=="+o+"/tasks/@.id=="+s,method:"DELETE"}},transformResponse:function(){return 1}},module.exports=exports.default;
},{}],"./platform/mail_api_client/blocks/task_status":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={getBlockPayload:function(s,e){var r=e.mailboxId,t=e.taskId;return{id:s,uri:"/ws/v3/mailboxes/@.id=="+r+"/tasks/@.id=="+t,method:"GET"}},transformResponse:function(s){var e=s.response.result.task;return{id:e.id,link:e.link.href,status:e.status,progress:e.progress,expires:e.expiryTime}}},module.exports=exports.default;
},{}],"./platform/mail_api_client/blocks/update_account":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={getBlockPayload:function(e,t){var o=t.account,s=t.data,a={type:o.type};return Object.assign(a,s),{id:e,uri:"/ws/v3/mailboxes/@.id=="+t.mailboxId+"/accounts/@.id=="+o.id,method:"POST",payload:{account:a}}},transformResponse:function(e){return e.response.result}},module.exports=exports.default;
},{}],"./platform/mail_api_client/blocks/update_account_alerts":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={getBlockPayload:function(t,e){var r=5e3;return{id:t,uri:"/ws/v3/mailboxes/@.id=="+e.mailboxId+"/alerts/@.id=="+e.alertId,method:"POST",payload:{alert:{state:r}}}},transformResponse:function(t){if(!t)return[];var e=t.response.result.alert,r=[];return Array.isArray(e)&&(r=e.map(function(t){return{id:t.id,accountId:t.accountId,type:t.type,state:t.state,data:t.data}})),r}},module.exports=exports.default;
},{}],"./platform/mail_api_client/blocks/update_decos":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _logger=require("../../base_client/logger"),_logger2=_interopRequireDefault(_logger),_mail_constants=require("../../mail_constants");exports.default={getBlockPayload:function(e,r){var o=r.accountId,t=r.mailboxId;return{id:e,uri:"/ws/v3/mailboxes/@.id=="+t+"/decos/@.id==FTI",method:"POST",payload:{id:"FTI",counts:[{accountId:o,unseen:0}]}}},getError:function(e){if(e){var r=e.id,o=e.httpCode,t=e.response,a={apiName:r,errorCode:t&&t.error&&t.error.code,httpCode:o},n=_logger2.default.feature(_mail_constants.ApiClientLoggerNames.MailAPIClient,{data:a});n.logFailure()}return null},transformResponse:function(){return 1}},module.exports=exports.default;
},{"../../base_client/logger":"./platform/base_client/logger","../../mail_constants":"./platform/mail_constants"}],"./platform/mail_api_client/blocks/update_messages":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={getBlockPayload:function(e,s){var r=s.mailboxId,a=s.messageIds,o=s.query,d=s.destinationFolderId,t=s.flags,i=s.async;if(!a&&!o)throw new Error("POST Update Message requires either a list of ids or a query string.");var l=[];a&&l.push("id:("+a.join(" ")+")"),o&&l.push(o);var n=encodeURIComponent(l.join(" AND ")),u={id:e,uri:"/ws/v3/mailboxes/@.id=="+r+"/messages/@.select==q?q="+n,method:"POST",payloadType:"embedded",payload:{message:{}}};if(i&&(u.uri+="&async=true"),!d&&!t)throw new Error("POST Update Message requires either a folder id or flags.");return d&&(u.payload.message.folder={},u.payload.message.folder.id=d),t&&(u.payload.message.flags=t),u},transformResponse:function(){return 1}},module.exports=exports.default;
},{}],"./platform/mail_api_client/browser_proxy_request":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function BrowserProxyRequest(t,e,r,_,s,o){var n=new _http_transport2.default(HTTP_METHOD,PROXY_API_ROUTE_BASE_ENDPOINT+t+"?crumb="+_+"&ymreqid="+r+"&wssid="+s,{httpRetry:o});return n.setHeader("Accept","application/json"),n.send({params:e,ymreqid:r}).then(function(t){return t.body})}exports.__esModule=!0,exports.default=BrowserProxyRequest;var _http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_mail_constants=require("../mail_constants"),PROXY_API_ROUTE_BASE_ENDPOINT=_mail_constants.YCPI_PATH_PREFIX+"/mail_api/",HTTP_METHOD="post";module.exports=exports.default;
},{"../http_transport":"./platform/http_transport","../mail_constants":"./platform/mail_constants"}],"./platform/mail_api_client/composite/checkmail":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function request(e,t,r){var s=t.accountId,o=t.mailboxId,u=t.folderId,n=t.sortOrder,a=t.count,i=t.offset,l=t.conversationsMode,d=t.highestModSeq,f=t.resetUnseenCount,c=t.alertStoreHighestModSeq;return _batch_request2.default.request("folders.get",{mailboxId:o},r).then(function(e){var t=(0,_folder.flattenFolderTree)(e.folders),_=t[u],h=(0,_timezone.getCurrentOffset)(r.timezone),q=!(_&&void 0!==d&&_.highestModSeq===d),m=[],p=Object.keys(t).find(function(e){return t[e].types.indexOf(_mail_constants.FolderTypes.ALERTSTORE)!==-1}),b=(t[p]||"").highestModSeq,v=!(!c||!b||c===b);return q||v?(q?m.push(_batch_request2.default.request("messageGroups.getList",{mailboxId:o,folderId:u,sortOrder:n,count:a,offset:i,conversationsMode:l},r)):m.push(Promise.resolve()),v?m.push(_batch_request2.default.request("account.getAlerts",{mailboxId:o},r)):m.push(Promise.resolve([])),f&&m.push(_batch_request2.default.request("unseenCount.reset",{mailboxId:o,accountId:s},r)),Promise.all(m).then(function(t){var r=t[0],s=t[1];return _extends({currentTimezoneOffset:h},e,r,{accountAlerts:s})})):_extends({currentTimezoneOffset:h},e)})}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e};exports.default=request;var _batch_request=require("../batch_request"),_batch_request2=_interopRequireDefault(_batch_request),_folder=require("../../utils/folder"),_timezone=require("../../utils/timezone"),_mail_constants=require("../../../platform/mail_constants");module.exports=exports.default;
},{"../../../platform/mail_constants":"./platform/mail_constants","../../utils/folder":"./platform/utils/folder","../../utils/timezone":"./platform/utils/timezone","../batch_request":"./platform/mail_api_client/batch_request"}],"./platform/mail_api_client/errors":[function(require,module,exports){
"use strict";function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}function _handleWssidReissueError(r){var e=r.errorCode,o=r.statusCode;return"EC-4003"===e?new _mail_error2.default(_constants.AUTHENTICATION_WSSID_REISSUE,{wssid:r.data.body.error.details.wssid,errorCode:e,statusCode:o}):null}function _handleLaunchError(r,e){if(0===e.indexOf("launch.")){var o=r.name,t=r.statusCode,a=r.errorCode,n=15;return"HttpTransport.NotOkStatusCode"===o&&429===t&&(n=19),new _mail_error2.default(_constants.LAUNCHERROR_LAUNCH_API_FAILED,{apiName:e,code:n,errorCode:a,statusCode:t})}return null}function handleTransportError(r,e){var o=null;return o||(o=_handleWssidReissueError(r)),o||(o=_handleLaunchError(r,e)),o||r}exports.__esModule=!0,exports.handleTransportError=handleTransportError;var _mail_error=require("../mail_error"),_mail_error2=_interopRequireDefault(_mail_error),_constants=require("../mail_error/constants");
},{"../mail_error":"./platform/mail_error","../mail_error/constants":"./platform/mail_error/constants"}],"./platform/mail_api_client":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _base_client=require("../base_client"),_base_client2=_interopRequireDefault(_base_client),_ymreqid=require("../ymreqid"),_ymreqid2=_interopRequireDefault(_ymreqid),_object=require("../utils/object"),_generic=require("../utils/generic"),_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_batch_request=require("./batch_request"),_browser_proxy_request=require("./browser_proxy_request"),_browser_proxy_request2=_interopRequireDefault(_browser_proxy_request),_checkmail=require("./composite/checkmail"),_checkmail2=_interopRequireDefault(_checkmail),_mail_constants=require("../mail_constants"),_constants=require("../mail_error/constants"),MailAPIClient=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,e.call(this,r));if("string"==typeof i&&!t.STRATEGIES[i])throw new Error("strategy has to be one of "+JSON.stringify(Object.keys(t.STRATEGIES)));return s.appId=_mail_constants.appId,s.cookie=r.cookie,s.headers=r.headers||{},s.httpRetry=r.httpRetry,s.strategy=i||s._getDefaultStrategy(),s._validateStrategy(s.strategy),r.executeRequestsSequentially&&((0,_invariant2.default)(r.requestQueue,"if you are executing requests sequentially, you must pass a request queue."),s.executeRequestsSequentially=!0,s.requestQueue=r.requestQueue),r.loginHash&&(s.ymreqidGenerator=new _ymreqid2.default(r.loginHash,_mail_constants.YMREQ_CLIENT_ID,_mail_constants.SESSION_ID)),s}return _inherits(t,e),t.prototype._getDefaultStrategy=function(){return(0,_generic.isBrowser)()?t.STRATEGIES.BROWSER_TO_JEDI:t.STRATEGIES.NODE_TO_JEDI},t.prototype._validateStrategy=function(e){if((0,_generic.isBrowser)()&&e===t.STRATEGIES.NODE_TO_JEDI)throw new Error(t.STRATEGIES.NODE_TO_JEDI+" strategy can not be used in the browser");if(!(0,_generic.isBrowser)()&&[t.STRATEGIES.BROWSER_TO_NODE_TO_JEDI,t.STRATEGIES.BROWSER_TO_JEDI].indexOf(e)>-1)throw new Error(t.STRATEGIES.BROWSER_TO_NODE_TO_JEDI+" or "+t.STRATEGIES.BROWSER_TO_JEDI+" strategies can not be used on the server")},t.prototype._getRequest=function(e,r,i,s){if(i.useHostname=i.strategy===t.STRATEGIES.NODE_TO_JEDI,i.strategy===t.STRATEGIES.BROWSER_TO_NODE_TO_JEDI)return(0,_invariant2.default)(!s,"We cannot proxy a request with files."),t.REQUESTS.BrowserProxy.bind(null,e,r,i.ymreqid,this.crumb,this.wssid,i.httpRetry);var n=t.REQUESTS[e]||t.REQUESTS.Batch;return n.bind(null,e,r,i,s)},t.prototype.request=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],o={useHostname:null,ymreqid:null,cookie:this.cookie};if(!s.ymreqid&&!this.ymreqidGenerator)throw new Error("`ymreqid` is missing. You should either specify `ymreqid` in `requestConfig` object when making a request or initialize MailAPIClient with `loginHash`, so that it can generate a new one");s.crumb&&(this.crumb=s.crumb),s.wssid&&(this.wssid=s.wssid),o.appId=s.appId||this.appId,o.ymreqid=s.ymreqid||this.ymreqidGenerator.generate(),o.wssid=s.wssid||this.wssid,o.strategy=s.strategy||this.strategy,o.noRetry=s.noRetry,o.timeout=s.timeout,o.headers=s.headers||this.headers,o.httpRetry=this.httpRetry,o.loggerParams=this.loggerParams,this._validateStrategy(o.strategy);var e=this._getRequest(t,r,o,n),a={apiName:t,ymreqid:o.ymreqid,crumb:this.crumb},u=void 0;return u=this.isRequestBlocked("checkMail"!==t)?this.getRequestBlockedPromise():this.executeRequestsSequentially?this.requestQueue.add(e,t):e(),this.logRequest(u,a),u.then(function(e){return i.setRequestBlocked(!1),e},function(e){var t=e.name,r=e.statusCode;throw"HttpTransport.NotOkStatusCode"===t&&429===r&&i.setRequestBlocked(!0),t===_constants.AUTHENTICATION_WSSID_REISSUE&&(i.wssid=(0,_object.getIn)(e,"data.wssid","")),e})},t}(_base_client2.default);MailAPIClient.STRATEGIES=(0,_object.mirrorKeys)(["NODE_TO_JEDI","BROWSER_TO_NODE_TO_JEDI","BROWSER_TO_JEDI"]),MailAPIClient.REQUESTS={Batch:_batch_request.request,BrowserProxy:_browser_proxy_request2.default,checkMail:_checkmail2.default},exports.default=MailAPIClient,module.exports=exports.default;
},{"../base_client":"./platform/base_client","../invariant":"./platform/invariant","../mail_constants":"./platform/mail_constants","../mail_error/constants":"./platform/mail_error/constants","../utils/generic":"./platform/utils/generic","../utils/object":"./platform/utils/object","../ymreqid":"./platform/ymreqid","./batch_request":"./platform/mail_api_client/batch_request","./browser_proxy_request":"./platform/mail_api_client/browser_proxy_request","./composite/checkmail":"./platform/mail_api_client/composite/checkmail"}],"./platform/mail_api_client/mappers":[function(require,module,exports){
"use strict";function genericMessageMapper(e){var a={id:e.immutableid||e.id,conversationId:e.conversationId,snippet:e.snippet||"",flags:Object.assign(e.flags,{flagged:!!e.flags.flagged}),folder:{id:e.folder.id},headers:{replyTo:e.headers.replyTo||"",subject:e.headers.subject||"",from:e.headers.from||[],to:e.headers.to||[],cc:e.headers.cc||[],bcc:e.headers.bcc||[],date:Number(e.headers.internalDate),messageIdRfc822:e.headers.messageIdRfc822},attachments:[],classification:e.classification&&e.classification.category,verifiedDomains:e.verifiedDomains||[]};return e.spame&&(a.spame=e.spame),e.captcha&&(a.captcha=e.captcha),e.csid&&(a.csid=e.csid),e.attachments&&(a.attachments=transformToAttachmentType(e.attachments,a.headers.date,a.id,e.csid)),e.headers.inReplyTo&&(a.headers.inReplyTo=e.headers.inReplyTo),a}function transformToAttachmentType(e,a,s,t){return e.map(function(e){return{id:(0,_message.generateAttachmentId)(e,s,!1),virus:e.virus||"N",filename:e.filename,size:e.size,partId:e.partId,type:e.type,subtype:e.subtype,disposition:e.disposition,downloadUrl:e.downloadUrl,thumbnailUrl:e.thumbnailUrl,isExternal:!1,creationDate:1e3*a,textExtractionUrl:e.textExtractionUrl,contentId:e.contentId,documentId:e.documentId,csid:t}})}exports.__esModule=!0,exports.saveMessageMapper=exports.messageMapper=void 0;var _message=require("../utils/message");exports.messageMapper=genericMessageMapper,exports.saveMessageMapper=genericMessageMapper;
},{"../utils/message":"./platform/utils/message"}],"./platform/mail_api_client/methods/account_alerts/get":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _get_account_alerts=require("../../blocks/get_account_alerts"),_get_account_alerts2=_interopRequireDefault(_get_account_alerts),REQUEST_IDS={GetAccountAlerts:"GetAccountAlerts"};exports.default={getBatchPayload:function(t){var e=t.mailboxId;return{requests:[_get_account_alerts2.default.getBlockPayload(REQUEST_IDS.GetAccountAlerts,{mailboxId:e})]}},transformResponses:function(t){var e=t.successMap,r=[];return e[REQUEST_IDS.GetAccountAlerts]&&(r=_get_account_alerts2.default.transformResponse(e[REQUEST_IDS.GetAccountAlerts])),r},getBatchError:function(t){var e=t.failureMap,r=e[REQUEST_IDS.GetAccountAlerts];return r?_get_account_alerts2.default.getError(r):null}},module.exports=exports.default;
},{"../../blocks/get_account_alerts":"./platform/mail_api_client/blocks/get_account_alerts"}],"./platform/mail_api_client/methods/account_alerts/update":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _get_account_alerts=require("../../blocks/get_account_alerts"),_get_account_alerts2=_interopRequireDefault(_get_account_alerts),_update_account_alerts=require("../../blocks/update_account_alerts"),_update_account_alerts2=_interopRequireDefault(_update_account_alerts),REQUEST_IDS={GetAccountAlerts:"GetAccountAlerts",UpdateAccountAlerts:"UpdateAccountAlerts"};exports.default={getBatchPayload:function(t){var e=t.mailboxId,a=t.alertId;return{requests:[Object.assign({},_update_account_alerts2.default.getBlockPayload(REQUEST_IDS.UpdateAccountAlerts,{mailboxId:e,alertId:a}),{requests:[_get_account_alerts2.default.getBlockPayload(REQUEST_IDS.GetAccountAlerts,{mailboxId:e})]})]}},transformResponses:function(t){var e=t.successMap;return e[REQUEST_IDS.GetAccountAlerts]?{accountAlerts:_get_account_alerts2.default.transformResponse(e[REQUEST_IDS.GetAccountAlerts])}:{accountAlerts:[]}}},module.exports=exports.default;
},{"../../blocks/get_account_alerts":"./platform/mail_api_client/blocks/get_account_alerts","../../blocks/update_account_alerts":"./platform/mail_api_client/blocks/update_account_alerts"}],"./platform/mail_api_client/methods/decos/update":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _update_decos=require("../../blocks/update_decos"),_update_decos2=_interopRequireDefault(_update_decos),REQUEST_IDS={UnseenCountReset:"UnseenCountReset"};exports.default={getBatchPayload:function(e){var t=e.mailboxId,u=e.accountId,o=_update_decos2.default.getBlockPayload(REQUEST_IDS.UnseenCountReset,{mailboxId:t,accountId:u});return{requests:[o]}},getBatchError:function(e){var t=e.failureMap,u=t[REQUEST_IDS.UnseenCountReset];return u?_update_decos2.default.getError(u):null},transformResponses:function(){return 1}},module.exports=exports.default;
},{"../../blocks/update_decos":"./platform/mail_api_client/blocks/update_decos"}],"./platform/mail_api_client/methods/document/fetch":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _fetch_document=require("../../blocks/fetch_document"),_fetch_document2=_interopRequireDefault(_fetch_document),_api=require("../../../mail_error/api"),_api2=_interopRequireDefault(_api),REQUEST_IDS={FetchDocument:"FetchDocument"};exports.default={getHeaders:function(e){var t=e.documentId;return _fetch_document2.default.getHeaders(t)},getBatchPayload:function(e){var t=e.startPage,r=e.endPage;return{requests:[_fetch_document2.default.getBlockPayload(REQUEST_IDS.FetchDocument,t,r)]}},transformResponses:function(e){var t=e.successMap;return _fetch_document2.default.transformResponse(t[REQUEST_IDS.FetchDocument])},getBatchError:function(e){var t=e.successMap,r=e.failureMap,u=_fetch_document2.default.getError(t,r,REQUEST_IDS.FetchDocument);if(u){var a=u.isRetryable,c=u.failureMap,n=u.message,o=c[REQUEST_IDS.FetchDocument].info,s={};return o&&Object.assign(s,{documentError:o}),new _api2.default("AttachmentPreview: "+n,c,a,s)}return null}},module.exports=exports.default;
},{"../../../mail_error/api":"./platform/mail_error/api","../../blocks/fetch_document":"./platform/mail_api_client/blocks/fetch_document"}],"./platform/mail_api_client/methods/folders/create":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _create_folders=require("../../blocks/create_folders"),_create_folders2=_interopRequireDefault(_create_folders),REQUEST_IDS={CreateFolders:"CreateFolders"};exports.default={getBatchPayload:function(e){var r=e.mailboxId,t=e.accountId,o=e.folderName,a=_create_folders2.default.getBlockPayload(REQUEST_IDS.CreateFolders,{mailboxId:r,accountId:t,folderName:o});return{requests:[a]}},transformResponses:function(e){var r=e.successMap;return{folder:_create_folders2.default.transformResponse(r[REQUEST_IDS.CreateFolders])}}},module.exports=exports.default;
},{"../../blocks/create_folders":"./platform/mail_api_client/blocks/create_folders"}],"./platform/mail_api_client/methods/folders/delete":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _delete_folders=require("../../blocks/delete_folders"),_delete_folders2=_interopRequireDefault(_delete_folders),REQUEST_IDS={DeleteFolders:"DeleteFolders"};exports.default={getBatchPayload:function(e){var l=e.mailboxId,t=e.folderId,r=_delete_folders2.default.getBlockPayload(REQUEST_IDS.DeleteFolders,{mailboxId:l,folderId:t});return{requests:[r]}},transformResponses:function(){return 1}},module.exports=exports.default;
},{"../../blocks/delete_folders":"./platform/mail_api_client/blocks/delete_folders"}],"./platform/mail_api_client/methods/folders/get":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _get_folders=require("../../blocks/get_folders"),REQUEST_IDS={GetFolders:"GetFolders"};exports.default={getBatchPayload:function(e){var o=e.mailboxId,s=_get_folders.block.getBlockPayload(REQUEST_IDS.GetFolders,{mailboxId:o});return{requests:[s]}},transformResponses:function(e){var o=e.successMap;return{folders:_get_folders.block.transformResponse(o[REQUEST_IDS.GetFolders])}}},module.exports=exports.default;
},{"../../blocks/get_folders":"./platform/mail_api_client/blocks/get_folders"}],"./platform/mail_api_client/methods/folders/rename":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _rename_folders=require("../../blocks/rename_folders"),_rename_folders2=_interopRequireDefault(_rename_folders),REQUEST_IDS={RenameFolders:"RenameFolders"};exports.default={getBatchPayload:function(e){var r=e.mailboxId,o=e.folderId,a=e.folderName,l=_rename_folders2.default.getBlockPayload(REQUEST_IDS.RenameFolders,{mailboxId:r,folderId:o,folderName:a});return{requests:[l]}},transformResponses:function(e){var r=e.successMap;return{folder:_rename_folders2.default.transformResponse(r[REQUEST_IDS.RenameFolders])}}},module.exports=exports.default;
},{"../../blocks/rename_folders":"./platform/mail_api_client/blocks/rename_folders"}],"./platform/mail_api_client/methods/launch/compose":[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getBatchPayload(e){var t=e.csid;return{requests:[Object.assign({},_get_mailboxes2.default.getBlockPayload(REQUEST_IDS.GetMailboxes),{filters:{select:{mailboxId:"$..id"}},requests:[Object.assign({},getMessageByCsid.getBlockPayload(REQUEST_IDS.GetMessageByCsid,{mailboxId:"$(mailboxId)",csid:t}),{filters:{select:{messageId:"$..messages[0].id"}},requests:[_get_simple_body2.default.getBlockPayload(REQUEST_IDS.GetSimpleBody,{mailboxId:"$(mailboxId)",messageId:"$(messageId)",full:!0,secure:!1})]}),_get_folders.block.getBlockPayload(REQUEST_IDS.GetFolders,{mailboxId:"$(mailboxId)"}),_get_accounts.block.getBlockPayload(REQUEST_IDS.GetAccounts,{mailboxId:"$(mailboxId)"})].concat(_get_mailbox_attributes2.default.getBatchPayload({mailboxId:"$(mailboxId)"}).requests)})]}}function transformResponses(e,t){var s,a,o=e.successMap,r=_get_simple_body2.default.transformResponse(o[REQUEST_IDS.GetSimpleBody]),i=r.id,l=r.body,_=r.metadata,d=_get_mailbox_attributes2.default.transformResponses(Object.keys(o).filter(function(e){return 0===e.indexOf(_get_mailbox_attributes.RequestIdPrefix)}).map(function(e){return o[e]})),u=Object.assign(getMessageByCsid.transformResponse(o[REQUEST_IDS.GetMessageByCsid],t),{attachments:_.attachments});return{mailboxes:_get_mailboxes2.default.transformResponse(o[REQUEST_IDS.GetMailboxes]),folders:_get_folders.block.transformResponse(o[REQUEST_IDS.GetFolders]),accounts:_get_accounts.block.transformResponse(o[REQUEST_IDS.GetAccounts]),message:u,messageBodiesMap:(s={},s[i]=l,s),messageMetadataMap:(a={},a[i]=_,a),mailboxAttributes:d}}exports.__esModule=!0,exports.getBatchPayload=getBatchPayload,exports.transformResponses=transformResponses;var _get_mailboxes=require("../../blocks/get_mailboxes"),_get_mailboxes2=_interopRequireDefault(_get_mailboxes),_get_folders=require("../../blocks/get_folders"),_get_simple_body=require("../../blocks/get_simple_body"),_get_simple_body2=_interopRequireDefault(_get_simple_body),_get_accounts=require("../../blocks/get_accounts"),_get_message_by_csid=require("../../blocks/get_message_by_csid"),getMessageByCsid=_interopRequireWildcard(_get_message_by_csid),_get_mailbox_attributes=require("../mailbox_attributes/get_mailbox_attributes"),_get_mailbox_attributes2=_interopRequireDefault(_get_mailbox_attributes),REQUEST_IDS={GetMailboxes:"GetMailboxes",GetFolders:"GetFolders",GetUserData:"GetUserData",GetAccounts:"GetAccounts",GetSimpleBody:"GetSimpleBody",GetMessageByCsid:"GetMessageByCsid"};exports.default={getBatchPayload:getBatchPayload,transformResponses:transformResponses};
},{"../../blocks/get_accounts":"./platform/mail_api_client/blocks/get_accounts","../../blocks/get_folders":"./platform/mail_api_client/blocks/get_folders","../../blocks/get_mailboxes":"./platform/mail_api_client/blocks/get_mailboxes","../../blocks/get_message_by_csid":"./platform/mail_api_client/blocks/get_message_by_csid","../../blocks/get_simple_body":"./platform/mail_api_client/blocks/get_simple_body","../mailbox_attributes/get_mailbox_attributes":"./platform/mail_api_client/methods/mailbox_attributes/get_mailbox_attributes"}],"./platform/mail_api_client/methods/launch/default_folder":[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _get_mailboxes=require("../../blocks/get_mailboxes"),_get_mailboxes2=_interopRequireDefault(_get_mailboxes),_get_folders=require("../../blocks/get_folders"),_get_messages_by_group=require("../../blocks/get_messages_by_group"),getMessagesByGroup=_interopRequireWildcard(_get_messages_by_group),_get_conversations_by_group=require("../../blocks/get_conversations_by_group"),getConversationsByGroup=_interopRequireWildcard(_get_conversations_by_group),_get_accounts=require("../../blocks/get_accounts"),_object=require("../../../utils/object"),_folder=require("./folder"),_folder2=_interopRequireDefault(_folder),_get_mailbox_attributes=require("../mailbox_attributes/get_mailbox_attributes"),_get_mailbox_attributes2=_interopRequireDefault(_get_mailbox_attributes),_update_decos=require("../../blocks/update_decos"),_update_decos2=_interopRequireDefault(_update_decos),_get_account_alerts=require("../../blocks/get_account_alerts"),_get_account_alerts2=_interopRequireDefault(_get_account_alerts),REQUEST_IDS=(0,_object.mirrorKeys)(["GetMailboxes","GetFolders","GetMessageGroupList","GetAccounts","UnseenCountReset","GetAccountAlerts"]),FOLDER_ID_SELECTOR="$..folders[?(@.acctId=='$(accountId)' && 'INBOX' in @.types)].id";exports.default={getBatchPayload:function(e){var t=e.count,o=e.offset,r=e.sortOrder,s=e.conversationsMode,a=s?getConversationsByGroup:getMessagesByGroup;return{requests:[Object.assign({},_get_mailboxes2.default.getBlockPayload(REQUEST_IDS.GetMailboxes),{filters:{iterator:"$..mailboxes[?(@.isSelected==true)]",select:{mailboxId:"$..id"}},requests:[Object.assign({},_get_accounts.block.getBlockPayload(REQUEST_IDS.GetAccounts,{mailboxId:"$(mailboxId)"}),{filters:{select:{accountId:"$..accounts[?(@.isSelected==true)].id"}},requests:[_update_decos2.default.getBlockPayload(REQUEST_IDS.UnseenCountReset,{mailboxId:"$(mailboxId)",accountId:"$(accountId)"}),Object.assign({},_get_folders.block.getBlockPayload(REQUEST_IDS.GetFolders,{mailboxId:"$(mailboxId)"}),{filters:{select:{folderId:FOLDER_ID_SELECTOR}},requests:[a.getBlockPayload(REQUEST_IDS.GetMessageGroupList,{mailboxId:"$(mailboxId)",folderId:"$(folderId)",sortOrder:r,count:t,offset:o})]})]}),_get_account_alerts2.default.getBlockPayload(REQUEST_IDS.GetAccountAlerts,{mailboxId:"$(mailboxId)"})].concat(_get_mailbox_attributes2.default.getBatchPayload({mailboxId:"$(mailboxId)"}).requests)})]}},transformResponses:function(e,t){var o=e.successMap;return _folder2.default.transformResponses({successMap:o},Object.assign({},t,{folderId:void 0}))},getBatchError:function(e){return _folder2.default.getBatchError(e)}},module.exports=exports.default;
},{"../../../utils/object":"./platform/utils/object","../../blocks/get_account_alerts":"./platform/mail_api_client/blocks/get_account_alerts","../../blocks/get_accounts":"./platform/mail_api_client/blocks/get_accounts","../../blocks/get_conversations_by_group":"./platform/mail_api_client/blocks/get_conversations_by_group","../../blocks/get_folders":"./platform/mail_api_client/blocks/get_folders","../../blocks/get_mailboxes":"./platform/mail_api_client/blocks/get_mailboxes","../../blocks/get_messages_by_group":"./platform/mail_api_client/blocks/get_messages_by_group","../../blocks/update_decos":"./platform/mail_api_client/blocks/update_decos","../mailbox_attributes/get_mailbox_attributes":"./platform/mail_api_client/methods/mailbox_attributes/get_mailbox_attributes","./folder":"./platform/mail_api_client/methods/launch/folder"}],"./platform/mail_api_client/methods/launch/folder":[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _api=require("../../../mail_error/api"),_api2=_interopRequireDefault(_api),_get_mailboxes=require("../../blocks/get_mailboxes"),_get_mailboxes2=_interopRequireDefault(_get_mailboxes),_get_folders=require("../../blocks/get_folders"),_get_messages_by_group=require("../../blocks/get_messages_by_group"),getMessagesByGroup=_interopRequireWildcard(_get_messages_by_group),_get_conversations_by_group=require("../../blocks/get_conversations_by_group"),getConversationsByGroup=_interopRequireWildcard(_get_conversations_by_group),_get_accounts=require("../../blocks/get_accounts"),_folder=require("../../../utils/folder"),_get_mailbox_attributes=require("../mailbox_attributes/get_mailbox_attributes"),_get_mailbox_attributes2=_interopRequireDefault(_get_mailbox_attributes),_update_decos=require("../../blocks/update_decos"),_update_decos2=_interopRequireDefault(_update_decos),_get_account_alerts=require("../../blocks/get_account_alerts"),_get_account_alerts2=_interopRequireDefault(_get_account_alerts),_mail_constants=require("../../../mail_constants"),REQUEST_IDS={GetMailboxes:"GetMailboxes",GetFolders:"GetFolders",GetMessageGroupList:"GetMessageGroupList",GetAccounts:"GetAccounts",UnseenCountReset:"UnseenCountReset",GetAccountAlerts:"GetAccountAlerts"};exports.default={getBatchPayload:function(e){var t=e.folderId,o=e.count,s=e.offset,r=e.sortOrder,a=e.conversationsMode,u=a?getConversationsByGroup:getMessagesByGroup;return{requests:[Object.assign({},_get_mailboxes2.default.getBlockPayload(REQUEST_IDS.GetMailboxes),{filters:{iterator:"$..mailboxes[?(@.isSelected==true)]",select:{mailboxId:"$..id"}},requests:[_get_folders.block.getBlockPayload(REQUEST_IDS.GetFolders,{mailboxId:"$(mailboxId)"}),u.getBlockPayload(REQUEST_IDS.GetMessageGroupList,{mailboxId:"$(mailboxId)",folderId:t,sortOrder:r,count:o,offset:s}),Object.assign({},_get_accounts.block.getBlockPayload(REQUEST_IDS.GetAccounts,{mailboxId:"$(mailboxId)"}),{filters:{select:{accountId:"$..accounts[?(@.isSelected==true)].id"}},requests:[_update_decos2.default.getBlockPayload(REQUEST_IDS.UnseenCountReset,{mailboxId:"$(mailboxId)",accountId:"$(accountId)"})]}),_get_account_alerts2.default.getBlockPayload(REQUEST_IDS.GetAccountAlerts,{mailboxId:"$(mailboxId)"})].concat(_get_mailbox_attributes2.default.getBatchPayload({mailboxId:"$(mailboxId)",attributes:_mail_constants.LaunchMailboxAttributes}).requests)})]}},transformResponses:function(e,t){var o=e.successMap,s=t.offset,r=t.count,a=t.conversationsMode,u=_get_folders.block.transformResponse(o[REQUEST_IDS.GetFolders]),l=_get_accounts.block.transformResponse(o[REQUEST_IDS.GetAccounts]),_=s+r,i=a?getConversationsByGroup:getMessagesByGroup,n=_get_account_alerts2.default.transformResponse(o[REQUEST_IDS.GetAccountAlerts]);t.folderId=t.folderId||(0,_folder.getDefaultFolder)(l,u).id;var c=i.transformResponse(o[REQUEST_IDS.GetMessageGroupList],_,t),d=c.messageGroups,g=c.hasMore,b=_get_mailbox_attributes2.default.transformResponses(Object.keys(o).filter(function(e){return 0===e.indexOf(_get_mailbox_attributes.RequestIdPrefix)}).map(function(e){return o[e]}));return{mailboxes:_get_mailboxes2.default.transformResponse(o[REQUEST_IDS.GetMailboxes]),accounts:l,folders:u,messageGroups:d,hasMoreItems:g,mailboxAttributes:b,accountAlerts:n}},getBatchError:function(e){var t=e.failureMap,o=Object.keys(t).length,s=t[REQUEST_IDS.UnseenCountReset],r=t[REQUEST_IDS.GetAccountAlerts];return s||r?(s&&_update_decos2.default.getError(s),r&&_get_account_alerts2.default.getError(r),null):o?new _api2.default("One or more batch requests failed",t):null}},module.exports=exports.default;
},{"../../../mail_constants":"./platform/mail_constants","../../../mail_error/api":"./platform/mail_error/api","../../../utils/folder":"./platform/utils/folder","../../blocks/get_account_alerts":"./platform/mail_api_client/blocks/get_account_alerts","../../blocks/get_accounts":"./platform/mail_api_client/blocks/get_accounts","../../blocks/get_conversations_by_group":"./platform/mail_api_client/blocks/get_conversations_by_group","../../blocks/get_folders":"./platform/mail_api_client/blocks/get_folders","../../blocks/get_mailboxes":"./platform/mail_api_client/blocks/get_mailboxes","../../blocks/get_messages_by_group":"./platform/mail_api_client/blocks/get_messages_by_group","../../blocks/update_decos":"./platform/mail_api_client/blocks/update_decos","../mailbox_attributes/get_mailbox_attributes":"./platform/mail_api_client/methods/mailbox_attributes/get_mailbox_attributes"}],"./platform/mail_api_client/methods/launch/message":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _get_mailboxes=require("../../blocks/get_mailboxes"),_get_mailboxes2=_interopRequireDefault(_get_mailboxes),_get_folders=require("../../blocks/get_folders"),_get_simple_body=require("../../blocks/get_simple_body"),_get_simple_body2=_interopRequireDefault(_get_simple_body),_get_accounts=require("../../blocks/get_accounts"),_get_message=require("../../blocks/get_message"),_get_message2=_interopRequireDefault(_get_message),_get_mailbox_attributes=require("../mailbox_attributes/get_mailbox_attributes"),_get_mailbox_attributes2=_interopRequireDefault(_get_mailbox_attributes),_mail_constants=require("../../../mail_constants"),REQUEST_IDS={GetMailboxes:"GetMailboxes",GetFolders:"GetFolders",GetAccounts:"GetAccounts",GetSimpleBody:"GetSimpleBody",GetMessage:"GetMessage"};exports.default={getBatchPayload:function(e){var t=e.messageId;return{requests:[Object.assign({},_get_mailboxes2.default.getBlockPayload(REQUEST_IDS.GetMailboxes),{filters:{select:{mailboxId:"$..id"}},requests:[_get_message2.default.getBlockPayload(REQUEST_IDS.GetMessage,{mailboxId:"$(mailboxId)",messageId:t}),_get_simple_body2.default.getBlockPayload(REQUEST_IDS.GetSimpleBody,{mailboxId:"$(mailboxId)",messageId:t,full:!0}),_get_folders.block.getBlockPayload(REQUEST_IDS.GetFolders,{mailboxId:"$(mailboxId)"}),_get_accounts.block.getBlockPayload(REQUEST_IDS.GetAccounts,{mailboxId:"$(mailboxId)"})].concat(_get_mailbox_attributes2.default.getBatchPayload({mailboxId:"$(mailboxId)",attributes:_mail_constants.LaunchMailboxAttributes}).requests)})]}},transformResponses:function(e){var t,s,a=e.successMap,o=_get_simple_body2.default.transformResponse(a[REQUEST_IDS.GetSimpleBody]),l=o.id,_=o.body,i=o.metadata,r=_get_mailbox_attributes2.default.transformResponses(Object.keys(a).filter(function(e){return 0===e.indexOf(_get_mailbox_attributes.RequestIdPrefix)}).map(function(e){return a[e]})),u=Object.assign(_get_message2.default.transformResponse(a[REQUEST_IDS.GetMessage]),{attachments:i.attachments});return{mailboxes:_get_mailboxes2.default.transformResponse(a[REQUEST_IDS.GetMailboxes]),folders:_get_folders.block.transformResponse(a[REQUEST_IDS.GetFolders]),accounts:_get_accounts.block.transformResponse(a[REQUEST_IDS.GetAccounts]),message:u,messageBodiesMap:(t={},t[l]=_,t),messageMetadataMap:(s={},s[l]=i,s),mailboxAttributes:r}}},module.exports=exports.default;
},{"../../../mail_constants":"./platform/mail_constants","../../blocks/get_accounts":"./platform/mail_api_client/blocks/get_accounts","../../blocks/get_folders":"./platform/mail_api_client/blocks/get_folders","../../blocks/get_mailboxes":"./platform/mail_api_client/blocks/get_mailboxes","../../blocks/get_message":"./platform/mail_api_client/blocks/get_message","../../blocks/get_simple_body":"./platform/mail_api_client/blocks/get_simple_body","../mailbox_attributes/get_mailbox_attributes":"./platform/mail_api_client/methods/mailbox_attributes/get_mailbox_attributes"}],"./platform/mail_api_client/methods/launch/message_group":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _get_mailboxes=require("../../blocks/get_mailboxes"),_get_mailboxes2=_interopRequireDefault(_get_mailboxes),_get_folders=require("../../blocks/get_folders"),_get_simple_body=require("../../blocks/get_simple_body"),_get_simple_body2=_interopRequireDefault(_get_simple_body),_get_accounts=require("../../blocks/get_accounts"),_get_conversation_message_group=require("../../blocks/get_conversation_message_group"),_get_conversation_message_group2=_interopRequireDefault(_get_conversation_message_group),_get_message=require("../../blocks/get_message"),_get_message2=_interopRequireDefault(_get_message),_get_mailbox_attributes=require("../mailbox_attributes/get_mailbox_attributes"),_get_mailbox_attributes2=_interopRequireDefault(_get_mailbox_attributes),_mail_constants=require("../../../mail_constants"),REQUEST_IDS={GetMailboxes:"GetMailboxes",GetFolders:"GetFolders",GetConversationMessageGroup:"GetConversationMessageGroup",GetAccounts:"GetAccounts",GetSimpleBody:"GetSimpleBody",GetMessage:"GetMessage"};exports.default={getBatchPayload:function(e){var t=e.isConversation,s=e.messageGroupId,o=[];return t?o.push(Object.assign({},_get_conversation_message_group2.default.getBlockPayload(REQUEST_IDS.GetConversationMessageGroup,{mailboxId:"$(mailboxId)",messageGroupId:s,isConversation:t}),{filters:{iterator:"$..messages[*]",select:{id:"$.id"}},requests:[_get_simple_body2.default.getBlockPayload(REQUEST_IDS.GetSimpleBody+"_$(id)",{mailboxId:"$(mailboxId)",messageId:"$(id)",full:!0})]})):(o.push(Object.assign({},_get_message2.default.getBlockPayload(REQUEST_IDS.GetMessage,{mailboxId:"$(mailboxId)",messageId:s}))),o.push(Object.assign({},_get_simple_body2.default.getBlockPayload(REQUEST_IDS.GetSimpleBody+"_"+s,{mailboxId:"$(mailboxId)",messageId:s,full:!0})))),{requests:[Object.assign({},_get_mailboxes2.default.getBlockPayload(REQUEST_IDS.GetMailboxes),{filters:{select:{mailboxId:"$..id"}},requests:[].concat(o,[_get_folders.block.getBlockPayload(REQUEST_IDS.GetFolders,{mailboxId:"$(mailboxId)"}),_get_accounts.block.getBlockPayload(REQUEST_IDS.GetAccounts,{mailboxId:"$(mailboxId)"})]).concat(_get_mailbox_attributes2.default.getBatchPayload({mailboxId:"$(mailboxId)",attributes:_mail_constants.LaunchMailboxAttributes}).requests)})]}},transformResponses:function(e,t){var s=e.successMap,o=t.isConversation,a=t.messageGroupId,_={},i={},r=void 0;r=o?_get_conversation_message_group2.default.transformResponse(s[REQUEST_IDS.GetConversationMessageGroup],{isConversation:o}).messageGroup:{id:a,messages:[_get_message2.default.transformResponse(s[REQUEST_IDS.GetMessage])]},r.messages.forEach(function(e){var t=_get_simple_body2.default.transformResponse(s[REQUEST_IDS.GetSimpleBody+"_"+e.id]);_[e.id]=t.body,i[e.id]=t.metadata});var l=_get_mailbox_attributes2.default.transformResponses(Object.keys(s).filter(function(e){return 0===e.indexOf(_get_mailbox_attributes.RequestIdPrefix)}).map(function(e){return s[e]}));return{mailboxes:_get_mailboxes2.default.transformResponse(s[REQUEST_IDS.GetMailboxes]),folders:_get_folders.block.transformResponse(s[REQUEST_IDS.GetFolders]),accounts:_get_accounts.block.transformResponse(s[REQUEST_IDS.GetAccounts]),messageGroups:[r],messageBodiesMap:_,messageMetadataMap:i,mailboxAttributes:l}}},module.exports=exports.default;
},{"../../../mail_constants":"./platform/mail_constants","../../blocks/get_accounts":"./platform/mail_api_client/blocks/get_accounts","../../blocks/get_conversation_message_group":"./platform/mail_api_client/blocks/get_conversation_message_group","../../blocks/get_folders":"./platform/mail_api_client/blocks/get_folders","../../blocks/get_mailboxes":"./platform/mail_api_client/blocks/get_mailboxes","../../blocks/get_message":"./platform/mail_api_client/blocks/get_message","../../blocks/get_simple_body":"./platform/mail_api_client/blocks/get_simple_body","../mailbox_attributes/get_mailbox_attributes":"./platform/mail_api_client/methods/mailbox_attributes/get_mailbox_attributes"}],"./platform/mail_api_client/methods/launch/skeleton":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _get_mailboxes=require("../../blocks/get_mailboxes"),_get_mailboxes2=_interopRequireDefault(_get_mailboxes),_get_folders=require("../../blocks/get_folders"),_get_accounts=require("../../blocks/get_accounts"),_get_mailbox_attributes=require("../mailbox_attributes/get_mailbox_attributes"),_get_mailbox_attributes2=_interopRequireDefault(_get_mailbox_attributes),REQUEST_IDS={GetMailboxes:"GetMailboxes",GetFolders:"GetFolders",GetAccounts:"GetAccounts"};exports.default={getBatchPayload:function(){return{requests:[Object.assign({},_get_mailboxes2.default.getBlockPayload(REQUEST_IDS.GetMailboxes),{filters:{select:{mailboxId:"$..id"}},requests:[_get_folders.block.getBlockPayload(REQUEST_IDS.GetFolders,{mailboxId:"$(mailboxId)"}),_get_accounts.block.getBlockPayload(REQUEST_IDS.GetAccounts,{mailboxId:"$(mailboxId)"})].concat(_get_mailbox_attributes2.default.getBatchPayload({mailboxId:"$(mailboxId)"}).requests)})]}},transformResponses:function(e){var t=e.successMap,o=_get_mailbox_attributes2.default.transformResponses(Object.keys(t).filter(function(e){return 0===e.indexOf(_get_mailbox_attributes.RequestIdPrefix)}).map(function(e){return t[e]}));return{mailboxes:_get_mailboxes2.default.transformResponse(t[REQUEST_IDS.GetMailboxes]),folders:_get_folders.block.transformResponse(t[REQUEST_IDS.GetFolders]),accounts:_get_accounts.block.transformResponse(t[REQUEST_IDS.GetAccounts]),mailboxAttributes:o}}},module.exports=exports.default;
},{"../../blocks/get_accounts":"./platform/mail_api_client/blocks/get_accounts","../../blocks/get_folders":"./platform/mail_api_client/blocks/get_folders","../../blocks/get_mailboxes":"./platform/mail_api_client/blocks/get_mailboxes","../mailbox_attributes/get_mailbox_attributes":"./platform/mail_api_client/methods/mailbox_attributes/get_mailbox_attributes"}],"./platform/mail_api_client/methods/list/delete":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _delete_messages=require("../../blocks/delete_messages"),_delete_messages2=_interopRequireDefault(_delete_messages),_task_status=require("../../blocks/task_status"),_task_status2=_interopRequireDefault(_task_status),_invariant=require("../../../invariant"),_invariant2=_interopRequireDefault(_invariant),REQUEST_IDS={DeleteList:"DeleteList"};exports.default={getBatchPayload:function(e){var t=e.map(function(e){var t=e.mailboxId,s=e.query,a=e.async,r=void 0===a||a;return(0,_invariant2.default)(t,"`mailboxId` missing."),(0,_invariant2.default)(s,"`query` missing."),_delete_messages2.default.getBlockPayload(REQUEST_IDS.DeleteList,{mailboxId:t,query:s,async:r})});return{requests:t}},transformResponses:function(e){var t=e.successMap,s=t[REQUEST_IDS.DeleteList];return s.response?{task:_task_status2.default.transformResponse(s)}:_delete_messages2.default.transformResponse(s)}},module.exports=exports.default;
},{"../../../invariant":"./platform/invariant","../../blocks/delete_messages":"./platform/mail_api_client/blocks/delete_messages","../../blocks/task_status":"./platform/mail_api_client/blocks/task_status"}],"./platform/mail_api_client/methods/list/folder_delete":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _delete=require("./delete"),_delete2=_interopRequireDefault(_delete),_invariant=require("../../../invariant"),_invariant2=_interopRequireDefault(_invariant);exports.default={getBatchPayload:function(e){var t=e.map(function(e){var t=e.mailboxId,a=e.folderId,r=e.async;return(0,_invariant2.default)(t,"`mailboxId` missing."),(0,_invariant2.default)(a,"`folderId` missing."),{mailboxId:t,query:"folderId:"+a,async:r}});return _delete2.default.getBatchPayload(t)},transformResponses:function(e){var t=e.successMap;return _delete2.default.transformResponses({successMap:t})}},module.exports=exports.default;
},{"../../../invariant":"./platform/invariant","./delete":"./platform/mail_api_client/methods/list/delete"}],"./platform/mail_api_client/methods/list/folder_update":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _update=require("./update"),_update2=_interopRequireDefault(_update),_invariant=require("../../../invariant"),_invariant2=_interopRequireDefault(_invariant);exports.default={getBatchPayload:function(e){var a=e.map(function(e){var a=e.mailboxId,t=e.query,r=e.destinationFolderId,n=e.flags,i=e.async;return(0,_invariant2.default)(a,"`mailboxId` missing."),(0,_invariant2.default)(t,"`query` missing."),(0,_invariant2.default)(r||n,"`destinationFolderId` or `flags` required."),{mailboxId:a,query:t,destinationFolderId:r,flags:n,async:i}});return _update2.default.getBatchPayload(a)},transformResponses:function(e){var a=e.successMap;return _update2.default.transformResponses({successMap:a})}},module.exports=exports.default;
},{"../../../invariant":"./platform/invariant","./update":"./platform/mail_api_client/methods/list/update"}],"./platform/mail_api_client/methods/list/update":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _update_messages=require("../../blocks/update_messages"),_update_messages2=_interopRequireDefault(_update_messages),_task_status=require("../../blocks/task_status"),_task_status2=_interopRequireDefault(_task_status),_invariant=require("../../../invariant"),_invariant2=_interopRequireDefault(_invariant),REQUEST_IDS={UpdateList:"UpdateList"};exports.default={getBatchPayload:function(e){var t=e.map(function(e){var t=e.mailboxId,a=e.query,s=e.destinationFolderId,r=e.flags,i=e.async,u=void 0===i||i;return(0,_invariant2.default)(t,"`mailboxId` missing."),(0,_invariant2.default)(a,"`query` missing."),(0,_invariant2.default)(s||r,"`destinationFolderId` or `flags` required."),_update_messages2.default.getBlockPayload(REQUEST_IDS.UpdateList,{mailboxId:t,query:a,destinationFolderId:s,flags:r,async:u})});return{requests:t}},transformResponses:function(e){var t=e.successMap,a=t[REQUEST_IDS.UpdateList];return a.response?{task:_task_status2.default.transformResponse(a)}:_update_messages2.default.transformResponse(a)}},module.exports=exports.default;
},{"../../../invariant":"./platform/invariant","../../blocks/task_status":"./platform/mail_api_client/blocks/task_status","../../blocks/update_messages":"./platform/mail_api_client/blocks/update_messages"}],"./platform/mail_api_client/methods/mailbox_attributes/get_mailbox_attributes":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0,exports.RequestIdPrefix=void 0;var _get_mailbox_attribute=require("../../blocks/get_mailbox_attribute"),_get_mailbox_attribute2=_interopRequireDefault(_get_mailbox_attribute),_mail_constants=require("../../../mail_constants"),RequestIdPrefix=exports.RequestIdPrefix="GetMailboxAttribute_";exports.default={getBatchPayload:function(t){var e=t.mailboxId,r=t.attributes,a=void 0===r?_mail_constants.NorrinMailboxAttributes:r;return{requests:Object.keys(a).map(function(t){var r=a[t];return _get_mailbox_attribute2.default.getBlockPayload(RequestIdPrefix+r,{mailboxId:e,attributeId:r})})}},transformResponses:function(t){return Object.assign.apply(Object,[{}].concat(t.map(function(t){return _get_mailbox_attribute2.default.transformResponse(t)})))}};
},{"../../../mail_constants":"./platform/mail_constants","../../blocks/get_mailbox_attribute":"./platform/mail_api_client/blocks/get_mailbox_attribute"}],"./platform/mail_api_client/methods/message_groups/folder_change_get_list":[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _api=require("../../../mail_error/api"),_api2=_interopRequireDefault(_api),_get_messages_by_group=require("../../blocks/get_messages_by_group"),getMessagesByGroup=_interopRequireWildcard(_get_messages_by_group),_get_conversations_by_group=require("../../blocks/get_conversations_by_group"),getConversationsByGroup=_interopRequireWildcard(_get_conversations_by_group),_update_decos=require("../../blocks/update_decos"),_update_decos2=_interopRequireDefault(_update_decos),_get_list=require("./get_list"),getList=_interopRequireWildcard(_get_list),REQUEST_IDS={GetMessageGroupList:"GetMessageGroupList",UnseenCountReset:"UnseenCountReset"};exports.default={getBatchPayload:function(e){var t=e.accountId,r=e.mailboxId,o=e.folderId,s=e.count,u=e.offset,a=e.sortOrder,n=e.conversationsMode,_=n?getConversationsByGroup:getMessagesByGroup;return{requests:[_.getBlockPayload(REQUEST_IDS.GetMessageGroupList,{mailboxId:r,folderId:o,count:s,offset:u,sortOrder:a}),_update_decos2.default.getBlockPayload(REQUEST_IDS.UnseenCountReset,{mailboxId:r,accountId:t})]}},transformResponses:function(e,t){return getList.transformResponses(e,t)},getBatchError:function(e){var t=e.failureMap,r=Object.keys(t).length,o=t[REQUEST_IDS.UnseenCountReset];return o&&1===r?_update_decos2.default.getError(o):r?new _api2.default("One or more batch requests failed",t):null}},module.exports=exports.default;
},{"../../../mail_error/api":"./platform/mail_error/api","../../blocks/get_conversations_by_group":"./platform/mail_api_client/blocks/get_conversations_by_group","../../blocks/get_messages_by_group":"./platform/mail_api_client/blocks/get_messages_by_group","../../blocks/update_decos":"./platform/mail_api_client/blocks/update_decos","./get_list":"./platform/mail_api_client/methods/message_groups/get_list"}],"./platform/mail_api_client/methods/message_groups/get":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _get_simple_body=require("../../blocks/get_simple_body"),_get_simple_body2=_interopRequireDefault(_get_simple_body),_get_conversation_message_group=require("../../blocks/get_conversation_message_group"),_get_conversation_message_group2=_interopRequireDefault(_get_conversation_message_group),REQUEST_IDS={GetConversationMessageGroup:"GetConversationMessageGroup",GetSimpleBody:"GetSimpleBody",GetMessage:"GetMessage"};exports.default={getBatchPayload:function(e){var s=e.messageGroupId,o=e.mailboxId,t=e.isConversation,a=e.secure,r=e.full,i=[];return i.push(Object.assign({},_get_conversation_message_group2.default.getBlockPayload(REQUEST_IDS.GetConversationMessageGroup,{mailboxId:o,messageGroupId:s,isConversation:t}),{filters:{iterator:"$..messages[*]",select:{id:"$.id"}},requests:[_get_simple_body2.default.getBlockPayload(REQUEST_IDS.GetSimpleBody+"_$(id)",{mailboxId:o,messageId:"$(id)",full:r,secure:a})]})),{requests:i}},transformResponses:function(e,s){var o=e.successMap,t=s.isConversation,a={},r=_get_conversation_message_group2.default.transformResponse(o[REQUEST_IDS.GetConversationMessageGroup],{isConversation:t}).messageGroup;return r.messages.forEach(function(e){var s=_get_simple_body2.default.transformResponse(o[REQUEST_IDS.GetSimpleBody+"_"+e.id]);a[e.id]=s.body,Object.assign(e.headers,s.metadata.headers)}),{messageGroup:r,messageBodiesMap:a}}},module.exports=exports.default;
},{"../../blocks/get_conversation_message_group":"./platform/mail_api_client/blocks/get_conversation_message_group","../../blocks/get_simple_body":"./platform/mail_api_client/blocks/get_simple_body"}],"./platform/mail_api_client/methods/message_groups/get_list":[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(s[o]=e[o]);return s.default=e,s}exports.__esModule=!0;var _get_messages_by_group=require("../../blocks/get_messages_by_group"),getMessagesByGroup=_interopRequireWildcard(_get_messages_by_group),_get_conversations_by_group=require("../../blocks/get_conversations_by_group"),getConversationsByGroup=_interopRequireWildcard(_get_conversations_by_group),REQUEST_IDS={GetMessageGroupList:"GetMessageGroupList"};exports.default={getBatchPayload:function(e){var s=e.mailboxId,o=e.folderId,r=e.count,t=e.offset,a=e.sortOrder,u=e.conversationsMode,n=e.excludeFolderTypes,i=e.ids,p=u?getConversationsByGroup:getMessagesByGroup;return{requests:[p.getBlockPayload(REQUEST_IDS.GetMessageGroupList,{mailboxId:s,folderId:o,count:r,offset:t,sortOrder:a,excludeFolderTypes:n,ids:i})]}},transformResponses:function(e,s){var o=e.successMap,r=s.conversationsMode,t=s.offset,a=s.count,u=t+a,n=r?getConversationsByGroup:getMessagesByGroup,i=n.transformResponse(o[REQUEST_IDS.GetMessageGroupList],u,s),p=i.messageGroups,g=i.hasMore;return{messageGroupList:p,hasMoreItems:g}}},module.exports=exports.default;
},{"../../blocks/get_conversations_by_group":"./platform/mail_api_client/blocks/get_conversations_by_group","../../blocks/get_messages_by_group":"./platform/mail_api_client/blocks/get_messages_by_group"}],"./platform/mail_api_client/methods/messages/delete":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _delete_messages=require("../../blocks/delete_messages"),_delete_messages2=_interopRequireDefault(_delete_messages),_invariant=require("../../../invariant"),_invariant2=_interopRequireDefault(_invariant),REQUEST_IDS={DeleteMessages:"DeleteMessages"};exports.default={getBatchPayload:function(e){var s=e.mailboxId,t=e.messageIds;return(0,_invariant2.default)(t.length,"`messageIds` cannot be empty when calling `DeleteMessages`"),(0,_invariant2.default)(s,"`mailboxId` missing."),{requests:[_delete_messages2.default.getBlockPayload(REQUEST_IDS.DeleteMessages,{mailboxId:s,messageIds:t})]}},transformResponses:function(){return 1}},module.exports=exports.default;
},{"../../../invariant":"./platform/invariant","../../blocks/delete_messages":"./platform/mail_api_client/blocks/delete_messages"}],"./platform/mail_api_client/methods/messages/get":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _get_mailboxes=require("../../blocks/get_mailboxes"),_get_mailboxes2=_interopRequireDefault(_get_mailboxes),_get_message=require("../../blocks/get_message"),_get_message2=_interopRequireDefault(_get_message),REQUEST_IDS={GetMailboxes:"GetMailboxes",GetMessage:"GetMessage"};exports.default={getBatchPayload:function(e){var s=e.messageId;return{requests:[Object.assign({},_get_mailboxes2.default.getBlockPayload(REQUEST_IDS.GetMailboxes),{filters:{select:{mailboxId:"$..id"}},requests:[_get_message2.default.getBlockPayload(REQUEST_IDS.GetMessage,{mailboxId:"$(mailboxId)",messageId:s})]})]}},transformResponses:function(e){var s=e.successMap,t=_get_message2.default.transformResponse(s[REQUEST_IDS.GetMessage]);return{message:t}}},module.exports=exports.default;
},{"../../blocks/get_mailboxes":"./platform/mail_api_client/blocks/get_mailboxes","../../blocks/get_message":"./platform/mail_api_client/blocks/get_message"}],"./platform/mail_api_client/methods/messages/get_bodies":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _get_simple_body=require("../../blocks/get_simple_body"),_get_simple_body2=_interopRequireDefault(_get_simple_body),_api=require("../../../mail_error/api"),_api2=_interopRequireDefault(_api),REQUEST_IDS={GetSimpleBody:"GetSimpleBody"};exports.default={getBatchPayload:function(e){var t=e.mailboxId,a=e.messageIds,s=void 0===a?[]:a,o=e.draftMessageIds,r=void 0===o?[]:o,d=e.full,i=e.secure,l=s.map(function(e,a){var s=REQUEST_IDS.GetSimpleBody+"_"+a;return _get_simple_body2.default.getBlockPayload(s,{mailboxId:t,messageId:e,full:d,secure:i})}),u=r.map(function(e,a){var o=REQUEST_IDS.GetSimpleBody+"_"+(a+s.length);return _get_simple_body2.default.getBlockPayload(o,{mailboxId:t,messageId:e,full:!0,secure:!1})});return{requests:l.concat(u)}},transformResponses:function(e,t){var a=t.messageIds,s=void 0===a?[]:a,o=t.draftMessageIds,r=void 0===o?[]:o,d=e.successMap,i={},l={},u=s.concat(r),n={},_=[];return u.forEach(function(e){n[e]=!1}),Object.keys(d).forEach(function(e){var t=_get_simple_body2.default.transformResponse(d[e]);i[t.id]=t.body,l[t.id]=t.metadata,n[t.id]=!0}),u.forEach(function(e){n[e]||_.push(e)}),{result:{messageBodiesMap:i,messageMetadataMap:l},error:{messageIds:_}}},getBatchError:function(e,t){var a=e.failureMap,s=t.messageIds,o=void 0===s?[]:s,r=t.draftMessageIds,d=void 0===r?[]:r;return Object.keys(a).length!==o.concat(d).length?null:new _api2.default("All requests in method `getBodies` failed",a)}},module.exports=exports.default;
},{"../../../mail_error/api":"./platform/mail_error/api","../../blocks/get_simple_body":"./platform/mail_api_client/blocks/get_simple_body"}],"./platform/mail_api_client/methods/messages/save":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _save_message=require("../../blocks/save_message"),_save_message2=_interopRequireDefault(_save_message),REQUEST_IDS={SaveMessage:"SaveMessage"};exports.default={getBatchPayload:function(e){return{requests:[_save_message2.default.getBlockPayload(REQUEST_IDS.SaveMessage,e)]}},transformResponses:function(e,s){var a=e.successMap,t=_save_message2.default.transformResponse(a[REQUEST_IDS.SaveMessage],s),r=t.message,o=t.simpleBody;return{message:r,simpleBody:o}}},module.exports=exports.default;
},{"../../blocks/save_message":"./platform/mail_api_client/blocks/save_message"}],"./platform/mail_api_client/methods/messages/save_and_send":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _save_message=require("../../blocks/save_message"),_save_message2=_interopRequireDefault(_save_message),_send_message=require("../../blocks/send_message"),_send_message2=_interopRequireDefault(_send_message),_get_simple_body=require("../../blocks/get_simple_body"),_get_simple_body2=_interopRequireDefault(_get_simple_body),_mail_error=require("../../../mail_error"),_mail_error2=_interopRequireDefault(_mail_error),REQUEST_IDS={SaveMessage:"SaveMessage",SendMessage:"SendMessage",GetSimpleBody:"GetSimpleBody"};exports.default={getBatchPayload:function(e){var s=e.mailboxId,a=e.sentFolderId,r=e.secure;return{requests:[Object.assign(_save_message2.default.getBlockPayload(REQUEST_IDS.SaveMessage,e),{filters:{select:{messageId:"$..message.immutableid",csid:"$..message.csid"}},suppressResponse:!0,requests:[_get_simple_body2.default.getBlockPayload(REQUEST_IDS.GetSimpleBody,{mailboxId:s,messageId:"$(messageId)",secure:r,full:!0}),_send_message2.default.getBlockPayload(REQUEST_IDS.SendMessage,{mailboxId:s,folderId:a,messageId:"$(messageId)",csid:"$(csid)"})]})]}},transformResponses:function(e,s){var a=e.successMap,r=_get_simple_body2.default.transformResponse(a[REQUEST_IDS.GetSimpleBody]),t=r.body,_=r.message;if(a[REQUEST_IDS.SendMessage]){var d=_send_message2.default.transformResponse(a[REQUEST_IDS.SendMessage],s);_.id=d.id}return{message:_,simpleBody:t}},getBatchError:function(e){var s=e.failureMap;return Object.keys(s).length&&s[REQUEST_IDS.SaveMessage]?new _mail_error2.default("MailApiClient.SaveAndSend",s):null}},module.exports=exports.default;
},{"../../../mail_error":"./platform/mail_error","../../blocks/get_simple_body":"./platform/mail_api_client/blocks/get_simple_body","../../blocks/save_message":"./platform/mail_api_client/blocks/save_message","../../blocks/send_message":"./platform/mail_api_client/blocks/send_message"}],"./platform/mail_api_client/methods/messages/save_raw_message":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _save_raw_message=require("../../blocks/save_raw_message"),_save_raw_message2=_interopRequireDefault(_save_raw_message),REQUEST_IDS={SaveRawMessage:"SaveRawMessage"};exports.default={getBatchPayload:function(e){var a=e.map(function(e,a){return _save_raw_message2.default.getBlockPayload(REQUEST_IDS.SaveRawMessage+"_"+a,a,e)});return{requests:a}},transformResponses:function(e){var a=e.successMap,s=e.failureMap;return{result:{successMap:a},error:{failureMap:s}}}},module.exports=exports.default;
},{"../../blocks/save_raw_message":"./platform/mail_api_client/blocks/save_raw_message"}],"./platform/mail_api_client/methods/messages/send":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _send_message=require("../../blocks/send_message"),_send_message2=_interopRequireDefault(_send_message),REQUEST_IDS={SendMessage:"SendMessage"};exports.default={getBatchPayload:function(e){var s=e.mailboxId,a=e.messageId,d=e.csid,t=e.captchaAnswer,r=e.sentFolderId;return{requests:[_send_message2.default.getBlockPayload(REQUEST_IDS.SendMessage,{mailboxId:s,messageId:a,csid:d,captchaAnswer:t,folderId:r})]}},transformResponses:function(e){var s=e.successMap;return{message:_send_message2.default.transformResponse(s[REQUEST_IDS.SendMessage])}}},module.exports=exports.default;
},{"../../blocks/send_message":"./platform/mail_api_client/blocks/send_message"}],"./platform/mail_api_client/methods/messages/trash_and_delete":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _update_messages=require("../../blocks/update_messages"),_update_messages2=_interopRequireDefault(_update_messages),_delete_messages=require("../../blocks/delete_messages"),_delete_messages2=_interopRequireDefault(_delete_messages),_api=require("../../../mail_error/api"),_api2=_interopRequireDefault(_api),REQUEST_IDS={UpdateMessages:"UpdateMessages",DeleteMessages:"DeleteMessages"};exports.default={getBatchPayload:function(e){var s=e.trashPayload,a=e.deletePayload,t=[];return a&&t.push(_delete_messages2.default.getBlockPayload(REQUEST_IDS.DeleteMessages,{mailboxId:a.mailboxId,messageIds:a.messageIds})),s&&(t=t.concat(s.map(function(e,s){return _update_messages2.default.getBlockPayload(REQUEST_IDS.UpdateMessages+"_"+s,e)}))),{requests:t}},transformResponses:function(e){var s=e.successMap,a=!1,t=Object.keys(s).map(function(e){return s[e].response?(a=!0,s[e].response.result):1});return a?{results:t}:1},getBatchError:function(e){var s=e.successMap,a=e.failureMap;return Object.keys(s).length?null:new _api2.default("All requests in method `messages.update` failed.",a)}},module.exports=exports.default;
},{"../../../mail_error/api":"./platform/mail_error/api","../../blocks/delete_messages":"./platform/mail_api_client/blocks/delete_messages","../../blocks/update_messages":"./platform/mail_api_client/blocks/update_messages"}],"./platform/mail_api_client/methods/messages/undo/get_list":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r.default=e,r}exports.__esModule=!0;var _get_folders=require("../../../blocks/get_folders"),_get_messages_by_group=require("../../../blocks/get_messages_by_group"),getMessagesByGroup=_interopRequireWildcard(_get_messages_by_group),_get_conversations_by_group=require("../../../blocks/get_conversations_by_group"),getConversationsByGroup=_interopRequireWildcard(_get_conversations_by_group),_api=require("../../../../mail_error/api"),_api2=_interopRequireDefault(_api),OFFSET=0,REQUEST_IDS={GetFolders:"GetFolders",GetMessageGroupList:"GetMessageGroupList"};exports.default={getBatchPayload:function(e){var r=e.mailboxId,o=e.folderId,s=e.sortOrder,t=e.count,a=e.conversationsMode,u=a?getConversationsByGroup:getMessagesByGroup,n={},i=n;return i.requests=[_get_folders.block.getBlockPayload(REQUEST_IDS.GetFolders,{mailboxId:r}),u.getBlockPayload(REQUEST_IDS.GetMessageGroupList,{mailboxId:r,folderId:o,sortOrder:s,count:t,offset:OFFSET})],n},transformResponses:function(e,r){var o=e.successMap,s=r.folderId,t=r.conversationsMode,a=r.count,u=t?getConversationsByGroup:getMessagesByGroup,n=_get_folders.block.transformResponse(o[REQUEST_IDS.GetFolders]),i=u.transformResponse(o[REQUEST_IDS.GetMessageGroupList],a,{folderId:s}),l=i.messageGroups;return{folders:n,messageGroupList:l}},getBatchError:function(e){var r=e.failureMap;return Object.keys(r).length?new _api2.default("`undo.list` failed.",r):null}},module.exports=exports.default;
},{"../../../../mail_error/api":"./platform/mail_error/api","../../../blocks/get_conversations_by_group":"./platform/mail_api_client/blocks/get_conversations_by_group","../../../blocks/get_folders":"./platform/mail_api_client/blocks/get_folders","../../../blocks/get_messages_by_group":"./platform/mail_api_client/blocks/get_messages_by_group"}],"./platform/mail_api_client/methods/messages/undo/undo":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _update_messages=require("../../../blocks/update_messages"),_update_messages2=_interopRequireDefault(_update_messages),_api=require("../../../../mail_error/api"),_api2=_interopRequireDefault(_api),REQUEST_IDS={UndoMessageOperation:"UndoMessageOperation"};exports.default={getBatchPayload:function(e){var a=e.undoMap,s=e.mailboxId,t={},r=[];return Object.keys(a).forEach(function(e,t){var u=REQUEST_IDS.UndoMessageOperation+"_"+t,o=a[e],n=_update_messages2.default.getBlockPayload(u,{mailboxId:s,destinationFolderId:e,messageIds:o});r.push(n)}),t.requests=r,t},transformResponses:function(){return 1},getBatchError:function(e){var a=e.failureMap;return Object.keys(a).length?new _api2.default("`messages.undo` failed.",a):null}},module.exports=exports.default;
},{"../../../../mail_error/api":"./platform/mail_error/api","../../../blocks/update_messages":"./platform/mail_api_client/blocks/update_messages"}],"./platform/mail_api_client/methods/messages/update":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _update_messages=require("../../blocks/update_messages"),_update_messages2=_interopRequireDefault(_update_messages),_api=require("../../../mail_error/api"),_api2=_interopRequireDefault(_api),REQUEST_IDS={UpdateMessages:"UpdateMessages"};exports.default={getBatchPayload:function(e){var s=e.map(function(e,s){return _update_messages2.default.getBlockPayload(REQUEST_IDS.UpdateMessages+"_"+s,e)});return{requests:s}},transformResponses:function(e){var s=e.successMap,t=!1,a=Object.keys(s).map(function(e){return s[e].response?(t=!0,s[e].response.result):1});return t?{results:a}:1},getBatchError:function(e){var s=e.successMap,t=e.failureMap;return Object.keys(s).length?null:new _api2.default("All requests in method `messages.update` failed.",t)}},module.exports=exports.default;
},{"../../../mail_error/api":"./platform/mail_error/api","../../blocks/update_messages":"./platform/mail_api_client/blocks/update_messages"}],"./platform/mail_api_client/methods/settings/add_account":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _add_account=require("../../blocks/add_account"),_add_account2=_interopRequireDefault(_add_account),_get_accounts=require("../../blocks/get_accounts"),_api=require("../../../mail_error/api"),_api2=_interopRequireDefault(_api),REQUEST_IDS={AddAccount:"AddAccount",GetAccounts:"GetAccounts"};exports.default={getBatchPayload:function(e){var t=e.mailboxId,c=e.account;return{requests:[Object.assign({},_add_account2.default.getBlockPayload(REQUEST_IDS.AddAccount,{account:c,mailboxId:t}),{requests:[_get_accounts.block.getBlockPayload(REQUEST_IDS.GetAccounts,e)]})]}},transformResponses:function(e){var t=e.successMap;return _get_accounts.block.transformResponse(t[REQUEST_IDS.GetAccounts])},getBatchError:function(e){var t=e.failureMap,c=t[REQUEST_IDS.AddAccount],o=t[REQUEST_IDS.GetAccounts];return c&&409!==c.httpCode||o?new _api2.default("One or more batch requests failed",t):null}},module.exports=exports.default;
},{"../../../mail_error/api":"./platform/mail_error/api","../../blocks/add_account":"./platform/mail_api_client/blocks/add_account","../../blocks/get_accounts":"./platform/mail_api_client/blocks/get_accounts"}],"./platform/mail_api_client/methods/settings/delete_account":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _delete_account=require("../../blocks/delete_account"),_delete_account2=_interopRequireDefault(_delete_account),REQUEST_IDS={DeleteAccount:"deleteAccount"};exports.default={getBatchPayload:function(e){var t=e.mailboxId,o=e.accountId;return{requests:[_delete_account2.default.getBlockPayload(REQUEST_IDS.DeleteAccount,{accountId:o,mailboxId:t})]}},transformResponses:function(){return 1}},module.exports=exports.default;
},{"../../blocks/delete_account":"./platform/mail_api_client/blocks/delete_account"}],"./platform/mail_api_client/methods/settings/get":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _get_mailbox_attributes=require("../mailbox_attributes/get_mailbox_attributes"),_get_mailbox_attributes2=_interopRequireDefault(_get_mailbox_attributes);exports.default={getBatchPayload:function(t){var e=t.mailboxId;return{requests:_get_mailbox_attributes2.default.getBatchPayload({mailboxId:e}).requests}},transformResponses:function(t){var e=t.successMap,r=_get_mailbox_attributes2.default.transformResponses(Object.keys(e).filter(function(t){return 0===t.indexOf(_get_mailbox_attributes.RequestIdPrefix)}).map(function(t){return e[t]}));return r}},module.exports=exports.default;
},{"../mailbox_attributes/get_mailbox_attributes":"./platform/mail_api_client/methods/mailbox_attributes/get_mailbox_attributes"}],"./platform/mail_api_client/methods/settings/get_feature_attributes":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _get_mailboxes=require("../../blocks/get_mailboxes"),_get_mailboxes2=_interopRequireDefault(_get_mailboxes),_get_mailbox_attributes=require("../mailbox_attributes/get_mailbox_attributes"),_get_mailbox_attributes2=_interopRequireDefault(_get_mailbox_attributes),_mail_constants=require("../../../mail_constants"),REQUEST_IDS={GetMailboxes:"GetMailboxes"};exports.default={getBatchPayload:function(){return{requests:[Object.assign({},_get_mailboxes2.default.getBlockPayload(REQUEST_IDS.GetMailboxes),{filters:{iterator:"$..mailboxes[?(@.isSelected==true)]",select:{mailboxId:"$..id"}},requests:_get_mailbox_attributes2.default.getBatchPayload({mailboxId:"$(mailboxId)",attributes:_mail_constants.FeatureMailboxAttributes}).requests})]}},transformResponses:function(e){var t=e.successMap,a=_get_mailbox_attributes2.default.transformResponses(Object.keys(t).filter(function(e){return 0===e.indexOf(_get_mailbox_attributes.RequestIdPrefix)}).map(function(e){return t[e]}));return{mailboxAttributes:a}}},module.exports=exports.default;
},{"../../../mail_constants":"./platform/mail_constants","../../blocks/get_mailboxes":"./platform/mail_api_client/blocks/get_mailboxes","../mailbox_attributes/get_mailbox_attributes":"./platform/mail_api_client/methods/mailbox_attributes/get_mailbox_attributes"}],"./platform/mail_api_client/methods/settings/resend_confirm_email":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _resend_confirm_email=require("../../blocks/resend_confirm_email"),_resend_confirm_email2=_interopRequireDefault(_resend_confirm_email),REQUEST_IDS={ResendConfirmEmail:"ResendConfirmEmail"};exports.default={getBatchPayload:function(e){var r=e.account;return{requests:[_resend_confirm_email2.default.getBlockPayload(REQUEST_IDS.ResendConfirmEmail,{account:r})]}},transformResponses:function(e){var r=e.successMap;return r[REQUEST_IDS.ResendConfirmEmail].response.result}},module.exports=exports.default;
},{"../../blocks/resend_confirm_email":"./platform/mail_api_client/blocks/resend_confirm_email"}],"./platform/mail_api_client/methods/settings/save_delivery_blocked_senders":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _save_mailbox_attribute=require("../../blocks/save_mailbox_attribute"),_save_mailbox_attribute2=_interopRequireDefault(_save_mailbox_attribute),REQUEST_IDS={DeliveryBlockedSenders:"deliveryBlockedSenders"};exports.default={getBatchPayload:function(e){var t=e.mailboxId,r=e.senders;return{requests:[_save_mailbox_attribute2.default.getBlockPayload(REQUEST_IDS.DeliveryBlockedSenders,{mailboxId:t,value:{senders:r}})]}},transformResponses:function(){return 1}},module.exports=exports.default;
},{"../../blocks/save_mailbox_attribute":"./platform/mail_api_client/blocks/save_mailbox_attribute"}],"./platform/mail_api_client/methods/settings/save_message_filters":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _save_mailbox_attribute=require("../../blocks/save_mailbox_attribute"),_save_mailbox_attribute2=_interopRequireDefault(_save_mailbox_attribute),REQUEST_IDS={MessageFilters:"messageFilters"};exports.default={getBatchPayload:function(e){var t=e.mailboxId,a=e.payload;return{requests:[_save_mailbox_attribute2.default.getBlockPayload(REQUEST_IDS.MessageFilters,{mailboxId:t,value:{filters:a}})]}},transformResponses:function(){return 1}},module.exports=exports.default;
},{"../../blocks/save_mailbox_attribute":"./platform/mail_api_client/blocks/save_mailbox_attribute"}],"./platform/mail_api_client/methods/settings/save_vacation_preferences":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _save_mailbox_attribute=require("../../blocks/save_mailbox_attribute"),_save_mailbox_attribute2=_interopRequireDefault(_save_mailbox_attribute),REQUEST_IDS={VacationPreferences:"vacationPreferences"};exports.default={getBatchPayload:function(e){var a=e.mailboxId,t=e.payload,o=t.enabled,s=t.startDate,i=t.endDate,r=t.messageBody,n=t.domainSpecificResponse.domains,d=t.domainSpecificResponse.domainMessageBody;return{requests:[_save_mailbox_attribute2.default.getBlockPayload(REQUEST_IDS.VacationPreferences,{mailboxId:a,value:{enabled:o,startDate:s,endDate:i,messageBody:r,domainSpecificResponse:{domains:n,domainMessageBody:d}}})]}},transformResponses:function(){return 1}},module.exports=exports.default;
},{"../../blocks/save_mailbox_attribute":"./platform/mail_api_client/blocks/save_mailbox_attribute"}],"./platform/mail_api_client/methods/settings/save_web_mailbox_attributes":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _save_mailbox_attribute=require("../../blocks/save_mailbox_attribute"),_save_mailbox_attribute2=_interopRequireDefault(_save_mailbox_attribute);exports.default={getBatchPayload:function(e){var t,a=e.mailboxId,r=e.id,u=e.value,o="disposableAddressesPrefix"===r?u:(t={},t[""+r]=u,t);return{requests:[_save_mailbox_attribute2.default.getChainedBlockPayload(r,{mailboxId:a,value:o})]}},transformResponses:function(){return 1}},module.exports=exports.default;
},{"../../blocks/save_mailbox_attribute":"./platform/mail_api_client/blocks/save_mailbox_attribute"}],"./platform/mail_api_client/methods/settings/set_base_name":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _mail_error=require("../../../mail_error"),_mail_error2=_interopRequireDefault(_mail_error),REQUEST_IDS={SetDeaPrefix:"SetDeaPrefix",GetDeaSuggestion:"GetDeaSuggestion",DisposableAddressesPrefix:"disposableAddressesPrefix"};exports.default={getBatchPayload:function(e){var s=e.mailboxId,r=e.baseName,t=e.domain,a=REQUEST_IDS.DisposableAddressesPrefix,i="/ws/v3/mailboxes/@.id=="+s+"/attributes/@.id=="+a;return{requests:[{id:"SetDeaPrefix",uri:i,method:"POST",payload:{id:a,link:{type:"RELATIVE",href:i},value:{deaPrefix:r,deaDomain:t}},onFailure:{id:REQUEST_IDS.GetDeaSuggestion,uri:"/ws/comms/deasuggestion/mail_cascade_yahoo/xml/v1",method:"POST",payload:{value:{ValidateFieldsRequest:{RequestVersion:"$(RequestVersion)",RequestTimestamp:"$(RequestTimestamp)",RequestSignature:"$(RequestSignature)",RequestID:"$(RequestID)",AccountID:r,RemoteIPAddress:"$(RemoteIPAddress)",PartnerName:"$(PartnerName)"}}},suppressResponse:!1},suppressResponse:!1}]}},getBatchError:function(){return!1},transformResponses:function(e){var s=e.successMap;if(!s)throw new _mail_error2.default("settings.setBaseName","baseName save failed and no suggestions were returned");var r=s[REQUEST_IDS.GetDeaSuggestion];if(!r)return{};var t=r.response.result.ValidateFieldsResponse.SuggestedIDList.SuggestedID;return{suggestions:t}}},module.exports=exports.default;
},{"../../../mail_error":"./platform/mail_error"}],"./platform/mail_api_client/methods/settings/update_account":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var u=arguments[e];for(var a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a])}return t},_update_account=require("../../blocks/update_account"),_update_account2=_interopRequireDefault(_update_account),REQUEST_IDS={GetAccount:"GetAccount",UpdateAccount:"UpdateAccount"};exports.default={getBatchPayload:function(t){var e=t.mailboxId,u=t.account,a=t.data;return{requests:[_extends({},_update_account2.default.getBlockPayload(REQUEST_IDS.UpdateAccount,{account:u,mailboxId:e,data:a}),{requests:[{id:REQUEST_IDS.GetAccount,uri:"/ws/v3/mailboxes/@.id=="+e+"/accounts/@.id=="+u.id,method:"GET"}]})]}},transformResponses:function(t){var e=t.successMap;return e[REQUEST_IDS.GetAccount].response.result}},module.exports=exports.default;
},{"../../blocks/update_account":"./platform/mail_api_client/blocks/update_account"}],"./platform/mail_api_client/methods/task/abort":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _task_abort=require("../../blocks/task_abort"),_task_abort2=_interopRequireDefault(_task_abort),REQUEST_IDS={TaskAbort:"TaskAbort"};exports.default={getBatchPayload:function(t){var e=t.mailboxId,r=t.taskId,a=_task_abort2.default.getBlockPayload(REQUEST_IDS.TaskAbort,{mailboxId:e,taskId:r});return{requests:[a]}},transformResponses:function(t){var e=t.error;return e}},module.exports=exports.default;
},{"../../blocks/task_abort":"./platform/mail_api_client/blocks/task_abort"}],"./platform/mail_api_client/methods/task/status":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _task_status=require("../../blocks/task_status"),_task_status2=_interopRequireDefault(_task_status),REQUEST_IDS={TaskStatus:"TaskStatus"};exports.default={getBatchPayload:function(t){var s=t.mailboxId,a=t.taskId,e=_task_status2.default.getBlockPayload(REQUEST_IDS.TaskStatus,{mailboxId:s,taskId:a});return{requests:[e]}},transformResponses:function(t){var s=t.successMap;return{task:_task_status2.default.transformResponse(s[REQUEST_IDS.TaskStatus])}}},module.exports=exports.default;
},{"../../blocks/task_status":"./platform/mail_api_client/blocks/task_status"}],"./platform/mail_constants/compose":[function(require,module,exports){
"use strict";exports.Fonts=[{name:"modern",label:"Modern",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},{name:"modernwide",label:"Modern Wide",fontFamily:"verdana, helvetica, sans-serif"},{name:"classic",label:"Classic",fontFamily:'"times new roman", "new york", times, serif'},{name:"classicwide",label:"Classic Wide",fontFamily:'"bookman old style", "new york", times, serif'},{name:"courier",label:"Courier New",fontFamily:'"courier new", courier, monaco, monospace, sans-serif'},{name:"garamond",label:"Garamond",fontFamily:'garamond, "new york", times, serif'},{name:"lucida",label:"Lucida Console",fontFamily:'"lucida console", sans-serif'}],exports.FontSizes=[{name:"tiny",cssName:"x-small",fontSize:1},{name:"small",cssName:"small",fontSize:2},{name:"medium",cssName:"medium",fontSize:3},{name:"large",cssName:"large",fontSize:5},{name:"xlarge",cssName:"x-large",fontSize:6},{name:"huge",cssName:"xx-large",fontSize:7}],exports.FontSizeMap={10:"1",13:"2",16:"3",24:"5",32:"6",48:"7"};
},{}],"./platform/mail_constants":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.FILTER_QUERY_PARAMS=exports.OauthWindowsStatusFunction=exports.Settings=exports.Features=exports.WSSID=exports.CRUMB_NAME=exports.QUOTED_BODY_CLASS=exports.TLD_VALUES=exports.YAHOO_COUNTRY_CODES=exports.PARTNER_DOMAINS=exports.IMAP_SETTINGS=void 0,exports.SUPPORTED_PROVIDERS=exports.YahooOfficialVerifiedDomains=exports.ApiClientLoggerNames=exports.CARD_EXPANSION_STATES=exports.DEFAULT_MESSAGES_TO_FETCH=exports.SocialAccountSPIDs=exports.SocialAccounts=exports.EmailProviders=exports.CREDSTORE_HOST=exports.JWS_HOST=exports.ErrorTypes=exports.SecureCryptoMode=exports.SecureMode=exports.AppRefreshTypes=exports.PrintTypes=exports.OSKeys=exports.BootcampSRPExpandParams=exports.FolderMenuItems=exports.Keys=exports.ListReferrer=exports.SettingsTab=exports.BulkTaskStatus=exports.BulkActionTypes=exports.MAIL_DEFAULT_ROUTE=exports.AllMailItemField=exports.AdvancedSearchFields=exports.ConfirmIds=exports.FilterOperatorTypes=exports.FilterFieldTypes=exports.FilterMatchTypes=exports.FilterActionTypes=exports.SectionUIMode=exports.AttachmentPreview=exports.MarkAsReadInterval=exports.SortSearchBy=exports.XobniState=exports.DesktopNotification=exports.MessageListLayout=exports.ActionAfterMessageMove=exports.DefaultFont=exports.MessageListDensity=exports.ShowImageSettings=exports.PreviewPaneSettings=exports.CursorMovement=exports.TabButtonDecorators=exports.TabTitleTypes=exports.SuggestionType=exports.SuggestionIntent=exports.ListFilters=exports.ListContentTypes=exports.AccountAuthTypes=exports.AccountStatus=exports.ROOT_ACCOUNT_TYPE=exports.AccountTypes=exports.ModifierKeys=exports.ResolutionTypes=exports.NotificationIds=exports.XOBNI_HOST=exports.SESSION_ID=exports.CHECK_MAIL_MESSAGES_COUNT=exports.YMREQ_CLIENT_ID=exports.SortOrder=exports.RAPID_WEBWORKER_FILE=exports.AD_FREE_MAIL_URL=exports.SPLUNK_SEARCH_LINK=exports.BETA_MAIL_URL=exports.ALPHA_MAIL_URL=exports.GLOBAL_MAIL_URL=exports.PUBLIC_PATH=exports.NORRIN_SHARE_LINK=exports.NORRIN_OPT_OUT_PATH=exports.HEARTBEAT_PATH=exports.LOGGER_PATH=exports.UNIVERSAL_YCPI_PATH_PREFIX=exports.MOBILE_YCPI_PATH_PREFIX=exports.DESKTOP_YCPI_PATH_PREFIX=exports.YCPI_PATH_PREFIX=exports.RouteNames=exports.MailboxWebAttributes=exports.MailboxAttributes=exports.NorrinMailboxAttributes=exports.LaunchMailboxAttributes=exports.FeatureMailboxAttributes=exports.Attachments=exports.SearchTypes=exports.RecordStates=exports.Chevron=exports.SystemFolders=exports.FolderDisplayTypes=exports.SmartViewTypes=exports.PrimaryFolderTypes=exports.FolderTypes=exports.Draft=exports.Compose=exports.NotificationPriorities=exports.NotificationTypes=exports.PageTypes=exports.Apps=exports.migrationAppId=exports.appId=void 0;var _SocialAccountSPIDs,_IMAP_SETTINGS,_extends=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var E=arguments[o];for(var t in E)Object.prototype.hasOwnProperty.call(E,t)&&(e[t]=E[t])}return e},_object=require("../utils/object"),appId=exports.appId="YMailNorrin",migrationAppId=exports.migrationAppId="YmailNorrinMigration",Apps=exports.Apps=(0,_object.mirrorKeys)(["MAIL_APP","COMPOSE_APP","MAIL_ENCRYPTED_APP","PLAYGROUND","MOBILE_APP"]),PageTypes=exports.PageTypes=(0,_object.mirrorKeys)(["MESSAGE","COMPOSE","SEARCH","NAVIGATION","MAIL_READER","PREVIEW","SPONSORED_MESSAGE","TUTORIAL"]),NotificationTypes=exports.NotificationTypes=(0,_object.mirrorKeys)(["NORMAL","ADVISORY","WARNING"]),NotificationPriorities=exports.NotificationPriorities={LOW:1,MEDIUM:2,HIGH:3},Compose=exports.Compose={Modes:(0,_object.mirrorKeys)(["NEW","REPLY","REPLY_ALL","FORWARD","EDIT","SPONSORED_FORWARD"])},Draft=exports.Draft={Status:(0,_object.mirrorKeys)(["DOES_NOT_EXIST","INIT","EDITED","SAVING","SAVED","SAVED_PARTIAL","SAVE_FAILED","SENDING","SEND_FAILED","SENT","CAPTCHAING"])},FolderTypes=exports.FolderTypes=(0,_object.mirrorKeys)(["INBOX","BULK","DRAFT","SENT","TRASH","ARCHIVE","TOKENCACHE","USER","STAGING","SYNC","NOTES","DELETED","CHATS","INVISIBLE","NOT_SEARCHABLE","EXTERNAL_ALL","ALERTSTORE"]),PrimaryFolderTypes=exports.PrimaryFolderTypes=(0,_object.mirrorKeys)([FolderTypes.INBOX,FolderTypes.DRAFT,FolderTypes.SENT,FolderTypes.TRASH,FolderTypes.BULK,FolderTypes.ARCHIVE,FolderTypes.TOKENCACHE,FolderTypes.USER,FolderTypes.STAGING,FolderTypes.SYNC,FolderTypes.NOTES,FolderTypes.DELETED,FolderTypes.CHATS]),SmartViewTypes=exports.SmartViewTypes=(0,_object.mirrorKeys)(["UNREAD","STARRED","DOCUMENTS","PHOTOS","TUTORIAL"]),FolderDisplayTypes=exports.FolderDisplayTypes=Object.assign((0,_object.mirrorKeys)(["ALL_MAIL"]),FolderTypes),SystemFolders=exports.SystemFolders={INBOX:"1",DRAFT:"3",SENT:"2",TRASH:"4",SPAM:"6"},Chevron=exports.Chevron=(0,_object.mirrorKeys)(["DOWN","LEFT","NONE"]),RecordStates=exports.RecordStates=(0,_object.mirrorKeys)(["DOES_NOT_EXIST","REFRESHING","LOADING","LOADED","ERROR"]),SearchTypes=exports.SearchTypes=(0,_object.mirrorKeys)(["CONTACT","SUBJECT"]),Attachments=exports.Attachments={Types:{TEXT:"text",IMAGE:"image",MESSAGE:"message",VIDEO:"video",AUDIO:"audio",APPLICATION:"application"},SubTypes:{ACROBAT:"acrobat",CALENDAR:"calendar",CSS:"css",CSV:"csv",DELIVERY_STATUS:"delivery-status",DOC:"msword",DOCX:"vnd.openxmlformats-officedocument.wordprocessingml.document",DOT:"dot",EXCEL:"excel",FRAMEMAKER:"vnd.framemaker",GDOCX:"vnd.google-apps.document",GIF:"gif",GPPT:"vnd.google-apps.presentation",GXLS:"vnd.google-apps.spreadsheet",GZIP:"x-gzip",HTML:"html",ICS:"ics",MS_WORD:"microsoft_word",MSEXCEL:"msexcel",MSTNEF:"ms-tnef",PDF:"pdf",PLAIN:"plain",PNG:"png",PPT:"vnd.ms-powerpoint",PPTX:"vnd.openxmlformats-officedocument.presentationml.presentation",PPTX_SLIDESHOW:"vnd.openxmlformats-officedocument.presentationml.slideshow",PPTX_TEMPLATE:"vnd.openxmlformats-officedocument.presentationml.template",RFC822:"rfc822",RICHTEXT:"richtext",SC2:"mswor2c sc2",TAR:"x-tar",TIFF:"tiff",VND_MS_WORD:"vnd.ms-word",VND_MSWORD:"vnd.msword",VND_PDF:"vnd.pdf",WINWORD:"winword",WORD:"word",X_COMPRESSED:"x-compressed",X_DOT:"x-dot",X_EXCEL:"x-excel",X_FM:"x-fm",X_FRAMEMAKER:"x-framemaker",X_MAKER:"x-maker",X_MS_EXCEL:"x-dos_ms_excel",X_MS_WORD:"x-msword",X_MSW6:"x-msw6",X_PDF:"x-pdf",X_RTF:"x-rtf",X_SOFFICE:"x-soffice",X_XLS:"x-xls",X_ZIP:"x-zip-compressed",XLS:"vnd.ms-excel",XLS_M:"vnd.ms-excel.sheet.macroEnabled.12",XLS_M_TEMPLATE:"vnd.ms-excel.template.macroEnabled.12",XLS_TEMPLATE:"vnd.openxmlformats-officedocument.spreadsheetml.template",XLSX:"vnd.openxmlformats-officedocument.spreadsheetml.sheet",XML:"xml",ZIP:"zip",ZZ_DOT:"zz-winassoc-dot"},Dispositions:{ATTACHMENT:"attachment",INLINE:"inline"},SimplifiedTypes:{APPLICATION:"application",IMAGE:"image",VIDEO:"video",FILE:"file",AUDIO:"audio",COMPRESSED:"compressed",CAL:"cal",PDF:"pdf",XLS:"xls",DOC:"doc",PPT:"ppt",TEXT:"text",CSV:"csv",TIFF:"tiff"}},FeatureMailboxAttributes=exports.FeatureMailboxAttributes={HAS_ADS:"hasAds"},LaunchMailboxAttributes=exports.LaunchMailboxAttributes=_extends({},FeatureMailboxAttributes,{PREVIEW_PANE:"web.mailPreviewPane",MAIL_TABS:"web.mailTabs",SNIPPETS:"web.generalSnippet",MSG_LIST_DENSITY:"web.msgsListDensity",DESKTOP_NOTIFICATION:"web.desktopNotification",SHOW_CUSTOM_FOLDERS:"web.showCustomFolders",HIDE_AD:"web.hideAd",EXPANDED_FOLDERS:"web.expandedFolders",STATIONERY_DEFAULT_THEME:"web.stationeryTheme",COMPOSE_FONT_FAMILY:"web.composeFontFamily",COMPOSE_FONT_SIZE:"web.composeFontSize",ACTION_AFTER_MSG_MOVE:"web.actionAfterMsgMove",THEME:"web.mailTheme",THEME_MODE:"web.themeMode",BLOCK_IMAGES:"web.blockImages",UNSUBSCRIBE_NOTIFICATION:"web.showUnsubscribeNotification",UNSUBSCRIBE_TIMESTAMP:"web.unsubscribeTimestamp",NUM_UNSUBSCRIBED_ITEMS:"web.numUnsubscribedItems"}),NorrinMailboxAttributes=exports.NorrinMailboxAttributes=_extends({},LaunchMailboxAttributes,{VACATION_PREFERENCES:"vacationPreferences",DELIVERY_BLOCKED_SENDERS:"deliveryBlockedSenders",MESSAGE_FILTERS:"messageFilters",DEA_BASE_NAME:"disposableAddressesPrefix",MAILBOX_SIZE:"mailboxSize",LINK_ENHANCR:"web.enableEnhancerLinkPreview",TWEET:"web.enableTweet"}),MailboxAttributes=exports.MailboxAttributes=_extends({},NorrinMailboxAttributes,{USE_RICH_TEXT:"web.useRichText",ADD_UNKNOWN_CONTACT:"web.addUnknownContact",EXPAND_SMART_VIEWS:"web.showSmartViews",XOBNI:"xobni",KEY_TASKS_PANEL:"web.keyTasksPanel",HIDE_AD:"web.hideAd",COMPOSE_SHOW_CC:"web.composeShowCc",COMPOSE_SHOW_BCC:"web.composeShowBcc",CC_ON_SEND:"web.ccOnSend",BCC_ON_SEND:"web.bccOnSend",BREAKING_NEWS:"web.breakingNews",HIDE_FACEBOOK_FOOTER:"web.autoSuggestHideFacebookFooter",HIDE_LINKEDIN_FOOTER:"web.autoSuggestHideLinkedinFooter",HIDE_LINKEDIN_RECONNECT:"web.hideLinkedinReconnect",SUPRESS_EMPTY_FOLDER_VIDEO:"web.suppressEmptyFolderVideo",SORT_SEARCH_BY:"web.searchSortBy",PEOPLE_NOTIFICATION:"web.peopleNotification",IMPORTANT_NOTIFICATION:"web.importantNotification",CANCEL_DELETE_COUNT:"web.cancelClickOnHoverDeleteCount",CONFIRM_BEFORE_DELETE:"web.confirmBeforeDelete",SHOW_EMAIL_HISTORY:"web.showEmailHistory",MARK_AS_READ_INTERVAL:"web.markAsReadInterval",SHOW_CLOUD_PERMISSION_DIALOG:"web.showCloudFilePermissionsDialog",ONBOARDING:"mailOnBoard"}),MailboxWebAttributes=exports.MailboxWebAttributes=(0,_object.mirrorKeys)(["PREVIEW_PANE","MAIL_TABS","SNIPPETS","MSG_LIST_DENSITY","LINK_ENHANCR","DESKTOP_NOTIFICATION","COMPOSE_FONT_FAMILY","COMPOSE_FONT_SIZE","EXPANDED_FOLDERS","SHOW_CUSTOM_FOLDERS","HIDE_AD","TWEET","STATIONERY_DEFAULT_THEME","ACTION_AFTER_MSG_MOVE","BLOCK_IMAGES","USE_RICH_TEXT","ADD_UNKNOWN_CONTACT","EXPAND_SMART_VIEWS","KEY_TASKS_PANEL","THEME","THEME_MODE","HIDE_AD","COMPOSE_SHOW_CC","COMPOSE_SHOW_BCC","CC_ON_SEND","BCC_ON_SEND","BREAKING_NEWS","HIDE_FACEBOOK_FOOTER","HIDE_LINKEDIN_FOOTER","HIDE_LINKEDIN_RECONNECT","SUPRESS_EMPTY_FOLDER_VIDEO","SORT_SEARCH_BY","PEOPLE_NOTIFICATION","IMPORTANT_NOTIFICATION","CANCEL_DELETE_COUNT","CONFIRM_BEFORE_DELETE","SHOW_EMAIL_HISTORY","MARK_AS_READ_INTERVAL","SHOW_CLOUD_PERMISSION_DIALOG","ONBOARDING","UNSUBSCRIBE_NOTIFICATION","UNSUBSCRIBE_TIMESTAMP","NUM_UNSUBSCRIBED_ITEMS"]),RouteNames=exports.RouteNames={BASE:"base",FOLDER:"folder",MESSAGE_FROM_FOLDER_LIST:"message_from_folder_list",MESSAGE_FROM_SEARCH_LIST:"message_from_search_list",NEW_DRAFT:"new_draft",EDIT_DRAFT:"edit_draft",SEARCH:"search",SETTINGS:"settings",ATTACHMENT:"attachment",SPONSORED_MESSAGE:"sponsored_message",SECURE_COMPOSE:"secure_compose",SECURE_BODY:"secure_body",SECURE_SETTINGS:"secure_settings",TUTORIAL:"tutorial"},YCPI_PATH_PREFIX=exports.YCPI_PATH_PREFIX="/d",DESKTOP_YCPI_PATH_PREFIX=exports.DESKTOP_YCPI_PATH_PREFIX="/d",MOBILE_YCPI_PATH_PREFIX=exports.MOBILE_YCPI_PATH_PREFIX="/m",UNIVERSAL_YCPI_PATH_PREFIX=exports.UNIVERSAL_YCPI_PATH_PREFIX="/[dm]",LOGGER_PATH=exports.LOGGER_PATH=YCPI_PATH_PREFIX+"/log",HEARTBEAT_PATH=exports.HEARTBEAT_PATH=YCPI_PATH_PREFIX+"/heartbeat",NORRIN_OPT_OUT_PATH=exports.NORRIN_OPT_OUT_PATH=YCPI_PATH_PREFIX+"/optout",NORRIN_SHARE_LINK=exports.NORRIN_SHARE_LINK="https://mg.mail.yahoo.com"+YCPI_PATH_PREFIX+"/tryNewMail",PUBLIC_PATH=exports.PUBLIC_PATH="/public",GLOBAL_MAIL_URL=exports.GLOBAL_MAIL_URL="https://mail.yahoo.com",ALPHA_MAIL_URL=exports.ALPHA_MAIL_URL="https://alpha-mg.mail.yahoo.com"+YCPI_PATH_PREFIX,BETA_MAIL_URL=exports.BETA_MAIL_URL="https://beta-mg.mail.yahoo.com"+YCPI_PATH_PREFIX,SPLUNK_SEARCH_LINK=exports.SPLUNK_SEARCH_LINK="http://yo/norrinjsesearch",AD_FREE_MAIL_URL=exports.AD_FREE_MAIL_URL="https://payments.mail.yahoo.com",RAPID_WEBWORKER_FILE=exports.RAPID_WEBWORKER_FILE=PUBLIC_PATH+"/js/rapidworker_1.2.js",SortOrder=exports.SortOrder={DATE_DESC:"date_desc",DATE_ASC:"date_asc",UNREAD:"unread",STARRED:"flagged",SENDER:"sender",SUBJECT:"subject",ATTACHMENT:"attachment",RELEVANCE:"relevance"},YMREQ_CLIENT_ID=exports.YMREQ_CLIENT_ID=28,CHECK_MAIL_MESSAGES_COUNT=exports.CHECK_MAIL_MESSAGES_COUNT=200,SESSION_ID=exports.SESSION_ID=Math.floor(65535*Math.random()),XOBNI_HOST=exports.XOBNI_HOST="https://data.mail.yahoo.com/xobni",NotificationIds=exports.NotificationIds=(0,_object.mirrorKeys)(["ARCHIVE_FOLDER_FAILED","CREATE_FOLDER_FAILED","RENAME_FOLDER_FAILED","DELETE_FOLDER_FAILED","MARK_READ_FOLDER_FAILED","CLEAR_FOLDER_FAILED","ARCHIVE_FOLDER_SUCCEEDED","CREATE_FOLDER_SUCCEEDED","RENAME_FOLDER_SUCCEEDED","DELETE_FOLDER_SUCCEEDED","MARK_READ_FOLDER_SUCCEEDED","CLEAR_FOLDER_SUCCEEDED","BULK_PROGRESS","COMPOSE_SEND","COMPOSE_SEND_SUCCEEDED","COMPOSE_SEND_FAILED","COMPOSE_ADDRESSING_FAILED","COMPOSE_NO_ADDRESS_DETECTED","COMPOSE_RECIPIENT_LIMIT_EXCEEDED","INLINE_IMAGE_LOAD_FAILURE","SAVE_DRAFT_SUCCESS","SAVE_DRAFT_FAILURE","SAVE_TO_INBOX_SUCCESS","SAVE_TO_INBOX_FAILURE","DELETE_DRAFT_SUCCESS","DELETE_DRAFT_FAILURE","MESSAGES_MARK_SPAM_SUCCEEDED","MESSAGES_MARK_SPAM_FAILED","MESSAGES_MARK_NOT_SPAM_SUCCEEDED","MESSAGES_MARK_NOT_SPAM_FAILED","MESSAGES_MOVE_SUCCEEDED","MESSAGES_MOVE_FAILED","ARCHIVE_MESSAGES_SUCCESS","ARCHIVE_MESSAGES_FAILURE","RESTORE_INBOX_MESSAGES_SUCCESS","RESTORE_INBOX_MESSAGES_FAILURE","DELETE_MESSAGES_SUCCESS","DELETE_MESSAGES_FAILURE","UNDO_MOVE_SUCCESS","UNDO_MOVE_FAILURE","GEMINI_SPONSORED_ASSET_FAILED","ATTACHMENT_VIRUS_DETECTED","OFFLINE","TIMEZONE_CHANGE_REQUESTED","TIMEZONE_CHANGE_SUCCEESS","TIMEZONE_CHANGE_FAILURE","UNSUBSCRIBE_MULTIPLE_LISTS_CLEANED","UNSUBSCRIBE_SINGLE_LIST_CLEANED","UNSUBSCRIBE_DIALOG_CLOSED","SETTINGS_SAVE_FILTERS_SUCCEEDED","SETTINGS_SAVE_VACATION_PREFERENCES_SUCCEEDED","RESEND_CONFIRM_EMAIL_SUCCEEDED","RESEND_CONFIRM_EMAIL_FAILED","REAUTH_ACCOUNT_SUCCEEDED","REAUTH_ACCOUNT_FAILED","EXCEPTION_OCCURRED"]),ResolutionTypes=exports.ResolutionTypes=(0,_object.mirrorKeys)(["LOW_RESOLUTION","ABNORMAL_ZOOM"]),ModifierKeys=exports.ModifierKeys={META:"meta",SHIFT:"shift",CTRL:"ctrl",ALT:"alt"},AccountTypes=exports.AccountTypes=(0,_object.mirrorKeys)(["FREE","IMAPIN","ALIAS","SENDAS","DEA","PARTNER","POPIN","BIZMAIL","PHONE","EXTERNAL"]),ROOT_ACCOUNT_TYPE=exports.ROOT_ACCOUNT_TYPE=[AccountTypes.PARTNER,AccountTypes.FREE,AccountTypes.IMAPIN,AccountTypes.BIZMAIL],AccountStatus=exports.AccountStatus=(0,_object.mirrorKeys)(["ENABLED","DISABLED","DELETED","PENDING","DELETE_IN_PROGRESS"]),AccountAuthTypes=exports.AccountAuthTypes=(0,_object.mirrorKeys)(["PLAIN","OAUTH2","PASSKEY"]),ListContentTypes=exports.ListContentTypes=(0,_object.mirrorKeys)(["MESSAGES","IMAGES","DOCUMENTS","LINKS","PEOPLE","EXTRACTIONS","ADS","GIFS"]),ListFilters=exports.ListFilters=(0,_object.mirrorKeys)(["FROM","TO","ALL","RELATED","WITH_KEYWORD","WITH_KEYWORD_RELEVANCE","TO_WITH_RELEVANCE","FROM_WITH_RELEVANCE","ALL_WITH_RELEVANCE"]),SuggestionIntent=exports.SuggestionIntent=(0,_object.mirrorKeys)(["PEOPLE","KEYWORD","ALL"]),SuggestionType=exports.SuggestionType=(0,_object.mirrorKeys)(["PERSON","KEYWORD","WEB_SEARCH"]),TabTitleTypes=exports.TabTitleTypes=(0,_object.mirrorKeys)(["TEXT","NEW_DRAFT","NO_SUBJECT","LOADING","SEARCH_KEYWORD","ERROR","SEARCH_DEFAULT","SETTINGS","PREVIEW","SPONSORED_AD"]),TabButtonDecorators=exports.TabButtonDecorators=(0,_object.mirrorKeys)(["NONE","SEARCH","COMPOSE"]),CursorMovement=exports.CursorMovement=(0,_object.mirrorKeys)(["UP","DOWN","FIRST","LAST","LEFT","RIGHT"]),PreviewPaneSettings=exports.PreviewPaneSettings={NO:0,RIGHT:1,BOTTOM:2},ShowImageSettings=exports.ShowImageSettings={NEVER:!0,ALWAYS:!1},MessageListDensity=exports.MessageListDensity={SLIM:1,NORMAL:2,RELAXED:3},DefaultFont=exports.DefaultFont={FAMILY:"Helvetica Neue",SIZE:"3"},ActionAfterMessageMove=exports.ActionAfterMessageMove={GO_BACK_TO_FOLDER:3,SHOW_PREVIOUS_MESSAGE:2,SHOW_NEXT_MESSAGE:1},MessageListLayout=exports.MessageListLayout=Object.assign({COMPACT_SLIM:4,COMPACT_NORMAL:5,COMPACT_RELAXED:6,COMPACT_SNIPPET_SLIM:7,COMPACT_SNIPPET_NORMAL:8,COMPACT_SNIPPET_RELAXED:9},MessageListDensity),DesktopNotification=exports.DesktopNotification={ON:1,OFF:0},XobniState=exports.XobniState=(0,_object.mirrorKeys)(["NONE","PROCESSING_BEGUN","PROCESSING_COMPLETE"]),SortSearchBy=exports.SortSearchBy={RELEVANCE:1,DATE_DESC:2,DATE_ASC:3,ATTACHMENT:4},MarkAsReadInterval=exports.MarkAsReadInterval={IMMEDIATELY:0,AFTER_2_SECONDS:2,AFTER_5_SECONDS:5,NEVER:999},AttachmentPreview=exports.AttachmentPreview={PAGES_CHUNK_SIZE:3,GAP_BETWEEN_PAGES:12,MAX_SCALE:3,MIN_SCALE:1,SCALE_STEP:.05,TOOLBAR_HEIGHT:54,Movement:(0,_object.mirrorKeys)(["PREV","NEXT","ZOOM_IN","ZOOM_OUT"]),Orientation:(0,_object.mirrorKeys)(["FIT_TO_WIDTH","FIT_TO_HEIGHT"]),Paddings:{AROUND_PAGE_WIDTH:20,AROUND_PAGE_HEIGHT:20},PreviewableTypes:[Attachments.SimplifiedTypes.IMAGE,Attachments.SimplifiedTypes.FILE,Attachments.SimplifiedTypes.PDF,Attachments.SimplifiedTypes.XLS,Attachments.SimplifiedTypes.DOC,Attachments.SimplifiedTypes.PPT,Attachments.SimplifiedTypes.TEXT]},SectionUIMode=exports.SectionUIMode=(0,_object.mirrorKeys)(["FLOW","PINNED","PUSHED"]),FilterActionTypes=exports.FilterActionTypes=(0,_object.mirrorKeys)(["MOVETOFOLDER"]),FilterMatchTypes=exports.FilterMatchTypes=(0,_object.mirrorKeys)(["ALL"]),FilterFieldTypes=exports.FilterFieldTypes=(0,_object.mirrorKeys)(["SUBJECT","SENDER","TOORCC","BODY"]),FilterOperatorTypes=exports.FilterOperatorTypes=(0,_object.mirrorKeys)(["CONTAINS","NOTCONTAINS","BEGINSWITH","ENDSWITH"]),ConfirmIds=exports.ConfirmIds=(0,_object.mirrorKeys)(["CLEAR_FOLDER","ARCHIVE_FOLDER"]),AdvancedSearchFields=exports.AdvancedSearchFields={FOLDERS:"foldersField",FROM:"fromField",TO:"toField",SUBJECT:"subjectField",KEYWORD:"keywordField",BEFORE:"beforeField",AFTER:"afterField",ATTACHMENT:"attachmentField",PHOTO:"photoField",CALENDAR_INVITE:"calendarInviteField"},AllMailItemField=exports.AllMailItemField={ALL_MAIL:"allMail"},MAIL_DEFAULT_ROUTE=exports.MAIL_DEFAULT_ROUTE={name:RouteNames.FOLDER,params:{fid:SystemFolders.INBOX}},BulkActionTypes=exports.BulkActionTypes=(0,_object.mirrorKeys)(["MARK_READ","ARCHIVE","DELETE","MESSAGES_DELETE","MESSAGES_MOVE","MESSAGES_ARCHIVE","MESSAGES_RESTORE","MESSAGES_MARK_SPAM","MESSAGES_MARK_NOT_SPAM"]),BulkTaskStatus=exports.BulkTaskStatus=(0,_object.mirrorKeys)(["INIT","PENDING","COMPLETED","FAILED","ABORTING","ABORTED","ABORT_FAILED"]),SettingsTab=exports.SettingsTab={PERSONALIZE_INBOX:"0",ACCOUNTS:"1",SECURITY:"7",NOTIFICATIONS:"2",WRITING_EMAIL:"3",VIEWING_EMAIL:"4",AUTOMATIC_REPLY:"5",FILTERS:"6",SECURITY_AND_PRIVACY:"7",SOCIAL_ACCOUNTS:"8",ENCRYPTION:"9"},ListReferrer=exports.ListReferrer={SMARTVIEW:"smartView"},Keys=exports.Keys={TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",ARROW_DOWN:"ArrowDown"},FolderMenuItems=exports.FolderMenuItems=(0,_object.mirrorKeys)(["MARK_READ","ARCHIVE","DELETE","RENAME_FOLDER","MOVE_FOLDER","DELETE_FOLDER","CREATE_FOLDER","SEPARATOR"]),BootcampSRPExpandParams=exports.BootcampSRPExpandParams={MESSAGES:"MAIN",IMAGES:"IMAGES",DOCUMENTS:"DOCUMENTS",PEOPLE:"PEOPLE"},OSKeys=exports.OSKeys={MAC:"mac",WINDOWS:"windows",OTHER:"other"},PrintTypes=exports.PrintTypes=(0,_object.mirrorKeys)(["MESSAGE"]),AppRefreshTypes=exports.AppRefreshTypes={NO_REFRESH:0,EMERGENCY_REFRESH:1,PERIODIC_REFRESH:2},SecureMode=exports.SecureMode={DISABLED:0,EXTENSIONLESS:1,EXTENSION:2},SecureCryptoMode=exports.SecureCryptoMode={DISABLED:0,KEYGEN:1,FULL:2},ErrorTypes=exports.ErrorTypes=(0,_object.mirrorKeys)(["LAUNCH_API_ERROR","NO_SCRIPT","UNSUPPORTED_BROWSER","DEFAULT"]),JWS_HOST=exports.JWS_HOST="internal.apis.mail.yahoo.com",CREDSTORE_HOST=exports.CREDSTORE_HOST="//ws.progrss.yahoo.com",EmailProviders=exports.EmailProviders={YAHOO:"yahoo",YAHOO_SB:"yahoosb",GOOGLE:"google",GOOGLE_APP:"googleapp",OUTLOOK:"outlook",AOL:"aol"},SocialAccounts=exports.SocialAccounts=(0,_object.mirrorKeys)(["Facebook","LinkedIn","Twitter"]),SocialAccountSPIDs=exports.SocialAccountSPIDs=(_SocialAccountSPIDs={},_SocialAccountSPIDs[SocialAccounts.Facebook]="b9ed13cc-ddec-11de-9c83-001b784d35e1",_SocialAccountSPIDs[SocialAccounts.LinkedIn]="f7e0ac2c-98e8-11df-8527-000ffef4f721",_SocialAccountSPIDs[SocialAccounts.Twitter]="1ce67640-113b-11df-a7d6-001b784d35e1",_SocialAccountSPIDs),DEFAULT_MESSAGES_TO_FETCH=exports.DEFAULT_MESSAGES_TO_FETCH=100,CARD_EXPANSION_STATES=exports.CARD_EXPANSION_STATES=(0,_object.mirrorKeys)(["STACKED","COLLAPSED","EXPANDED"]),ApiClientLoggerNames=exports.ApiClientLoggerNames={AthenaClient:"athena_client_call",BootcampClient:"bootcamp_client_call",CredstoreClient:"credstore_client_call",GeminiAPIClient:"gemini_api_client_call",GifCategories:"gif_category_content_call",HeartbeatAPIClient:"heartbeat_api_client_call",MailAPIClient:"mail_api_client_call",RapidClient:"i13n_beacon",UDBClient:"udb_client_call",XobniClient:"xobni_client_call"},YahooOfficialVerifiedDomains=exports.YahooOfficialVerifiedDomains=["communications.yahoo.com","product.communications.yahoo.com","daily.communications.yahoo.com","cc.yahoo-inc.com","yahoo-inc.com"],SUPPORTED_PROVIDERS=exports.SUPPORTED_PROVIDERS=[EmailProviders.YAHOO,EmailProviders.GOOGLE,EmailProviders.GOOGLE_APP,EmailProviders.OUTLOOK,EmailProviders.AOL],IMAP_SETTINGS=exports.IMAP_SETTINGS=(_IMAP_SETTINGS={},_IMAP_SETTINGS[EmailProviders.GOOGLE]={domainCheck:["gmail","google","googlemail"],imapServer:"imaps://gmail.com",oauthDomain:"gmail.com",profileCheck:!1,providerUrl:"https://www.gmail.com",scope:"scope=https%3A%2F%2Fmail.google.com%2F+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcontacts+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email"},_IMAP_SETTINGS[EmailProviders.YAHOO]={domainCheck:["yahoo","ymail","rocketmail"],imapServer:"imaps://yahoo.com",oauthDomain:"yahoo.com",profileCheck:!1},_IMAP_SETTINGS[EmailProviders.OUTLOOK]={domainCheck:["outlook","hotmail","live","msn"],imapServer:"imaps://outlook.com",oauthDomain:"outlook.com",profileCheck:!0,providerUrl:"https://www.outlook.com",scope:"scope=wl.imap,wl.offline_access,wl.emails"},_IMAP_SETTINGS[EmailProviders.AOL]={domainCheck:["aol","aim"],imapServer:"imaps://aol.com",oauthDomain:"aol.com",profileCheck:!0,providerUrl:"https://www.aol.com",scope:"scope=offline_access email profile addressbook opencalendar"},_IMAP_SETTINGS[EmailProviders.GOOGLE_APP]={imapServer:"imaps://gmail.com",oauthDomain:"gmail.com",profileCheck:!1,providerUrl:"https://www.gmail.com",scope:"scope=https%3A%2F%2Fmail.google.com%2F+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcontacts+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email"},_IMAP_SETTINGS[EmailProviders.YAHOO_SB]={imapServer:"imaps://yahoo.com",oauthDomain:"yahoo.com",profileCheck:!1},_IMAP_SETTINGS),PARTNER_DOMAINS=exports.PARTNER_DOMAINS=(0,_object.mirrorKeys)(["att.net","bellsouth.net","attworld.com","sky.com","frontiernet.net","frontier.com","myfrontiermail.com","citilink.net","newnorth.net","epix.net","gvni.com","frontiernet.com","ctaz.com","ctaz.net","citilink.com","evansinet.com","globalvalleynetworks.com","xtra.co.nz","mymts.in","ameritech.net","btinternet.com","btopenworld.com","demobroadband.com","ovi.com","flash.net","nl.rogers.com","nvbell.net","pacbell.net","prodigy.net","rogers.com","sbcglobal.net","snet.net","swbell.net","talk21.com","verizon.net","wans.net","ymail.com","rocketmail.com","yahoo-inc.com"]),YAHOO_COUNTRY_CODES=exports.YAHOO_COUNTRY_CODES=(0,_object.mirrorKeys)(["ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","au","aw","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bm","bn","bo","br","bs","bt","bv","bw","by","bz","ca","cc","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cs","cu","cv","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","es","et","fi","fj","fk","fm","fo","fr","fx","ga","gb","gd","ge","gh","gi","gl","gp","gq","gf","gm","gn","gr","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","in","io","iq","ir","is","it","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","mg","mh","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nt","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pt","pr","pw","py","qa","re","ro","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","st","su","sv","sy","sz","tc","td","tf","tg","th","tj","tk","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uk","um","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yu","za","zm","zr","zw"]),TLD_VALUES=exports.TLD_VALUES=(0,_object.mirrorKeys)(["aero","asia","biz","com","edu","gov","info","jobs","mil","mobi","museum","name","net","org","co"]),QUOTED_BODY_CLASS=exports.QUOTED_BODY_CLASS="qtd-body",CRUMB_NAME=exports.CRUMB_NAME="crumb",WSSID=exports.WSSID="WSSID",Features=exports.Features={IS_WIDER_MAIL_EXTN_ENABLED:"isWiderMailExtnEnabled"},Settings=exports.Settings={THEME:"theme",THEME_MODE:"themeMode",PREVIEW_PANE:"previewpane",MSG_LIST_DENSITY:"messageListDensity",SNIPPETS:"snippets",COMPOSE_FONT_FAMILY:"composeFontFamily",COMPOSE_FONT_SIZE:"composeFontSize",DESKTOP_NOTIFICATION:"desktopNotification"},OauthWindowsStatusFunction=exports.OauthWindowsStatusFunction="__setOauthStatus",FILTER_QUERY_PARAMS=exports.FILTER_QUERY_PARAMS=["fullscreen"];
},{"../utils/object":"./platform/utils/object"}],"./platform/mail_error/api":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function ApiError(t,r,e,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,ApiError):this.stack=(new Error).stack,(0,_invariant2.default)(r&&"object"===("undefined"==typeof r?"undefined":_typeof(r)),"Expected failureMap to be an object."),Object.keys(r).forEach(function(t){var e=r[t];(0,_invariant2.default)(e&&"object"===("undefined"==typeof e?"undefined":_typeof(e)),"Invalid map passed to ApiError: "+t+" had a value of "+e)}),this.token=IDENTIFIER,this.name=this.constructor.name,this.message=t,this.failureMap=r,this.extraStatusCode=this.getExtraStatusCode(),this.extraErrorCode=this.getExtraErrorCode(),this.statusCode=this.getStatusCode(),this.errorCode=this.getErrorCode(),this.isRetryable="undefined"==typeof e||e,this.errorInfo=o}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_object=require("../utils/object"),_constants=require("./constants"),IDENTIFIER="API-ERROR";ApiError.prototype=Object.create(Error.prototype),ApiError.prototype.constructor=ApiError,ApiError.prototype.getStatusCode=function(){var t=String(this.extraStatusCode).split(",")[0].split(":")[1]||_constants.NO_ERROR_CODE;return Number(t)},ApiError.prototype.getErrorCode=function(){return String(this.extraErrorCode).split(",")[0].split(":")[1]||_constants.NO_ERROR_CODE},ApiError.prototype.getExtraStatusCode=function(){var t=this,r=[];return Object.keys(this.failureMap).forEach(function(e){var o=t.failureMap[e],i=o.httpCode||_constants.NO_ERROR_CODE;r.push(e+":"+i)}),r.join(",")||_constants.NO_ERROR_CODE},ApiError.prototype.getExtraErrorCode=function(){var t=this,r=[];return Object.keys(this.failureMap).forEach(function(e){var o=t.failureMap[e],i=(0,_object.getIn)(o,"response.error.code",_constants.NO_ERROR_CODE);r.push(e+":"+i)}),r.join(",")||_constants.NO_ERROR_CODE},exports.default=ApiError,module.exports=exports.default;
},{"../invariant":"./platform/invariant","../utils/object":"./platform/utils/object","./constants":"./platform/mail_error/constants"}],"./platform/mail_error/constants":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.AUTH_FAIL_REASON=exports.LAUNCHERROR_LAUNCH_API_FAILED=exports.AUTHENTICATION_WSSID_REISSUE=exports.AUTHENTICATION_INVALID_CRUMB=exports.AUTHENTICATION_INVALID_CREDENTIALS=exports.NO_ERROR_CODE=void 0;var _object=require("../utils/object"),NO_ERROR_CODE=exports.NO_ERROR_CODE=0,AUTHENTICATION_INVALID_CREDENTIALS=exports.AUTHENTICATION_INVALID_CREDENTIALS="Authentication.InvalidCredentials",AUTHENTICATION_INVALID_CRUMB=exports.AUTHENTICATION_INVALID_CRUMB="Authentication.InvalidCrumb",AUTHENTICATION_WSSID_REISSUE=exports.AUTHENTICATION_WSSID_REISSUE="Authentication.WssidReissue",LAUNCHERROR_LAUNCH_API_FAILED=exports.LAUNCHERROR_LAUNCH_API_FAILED="LaunchError.LaunchApiFailed",AUTH_FAIL_REASON=exports.AUTH_FAIL_REASON=(0,_object.mirrorKeys)(["COOKIE_CHECK_SIGNATURE","COOKIE_CHECK_TIME_STAMP","INVALID_SSL_COOKIE","INVALID_COOKIE_SCOPE","REMOVED_YT_COOKIE","DIFFERENT_USER"]);
},{"../utils/object":"./platform/utils/object"}],"./platform/mail_error":[function(require,module,exports){
"use strict";function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}function MailError(r,e,t){if(!r)throw new Error("name is a required argument for MailError");"string"!=typeof e&&(t=e,e=null),Error.apply(this),Error.captureStackTrace&&Error.captureStackTrace(this,MailError);var o=(0,_object.getIn)(MailError.MANIFEST,r);if(!o)throw new Error("Error name ["+r+"] is not in the list of available errors. see ./manifest.js");e=e||o.description,o.requiredData&&o.requiredData.forEach(function(e){if(!t||!t[e])throw new Error("property ["+e+"] is required for ["+r+"] error. Got: "+JSON.stringify(t))}),this.token=IDENTIFIER,this.name=r,this.message=e,this.data=t||{},this.statusCode=(0,_object.getIn)(this,"data.statusCode",null),this.errorCode=(0,_object.getIn)(this,"data.body.error.code",null)||(0,_object.getIn)(this,"data.body.data.errorCode",null)||(0,_object.getIn)(this,"data.errorCode",null),this.code=o.code||_constants.NO_ERROR_CODE}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_api=require("./api"),_api2=_interopRequireDefault(_api),_object=require("../utils/object"),_manifest=require("./manifest"),_manifest2=_interopRequireDefault(_manifest),_constants=require("./constants"),IDENTIFIER="MAIL-ERROR";MailError.MANIFEST=_manifest2.default,MailError.VALIDATE_SUCCESS=123456,MailError.prototype=Object.create(Error.prototype),MailError.errorify=function(r){var e=void 0,t={};return r instanceof MailError?r:(r instanceof _api2.default?(e=new MailError("ApiError",r.message,r.failureMap),e.stack=r.stack,e.statusCode=r.statusCode,e.errorCode=r.errorCode,e.extraStatusCode=r.extraStatusCode,e.extraErrorCode=r.extraErrorCode,Object.assign(e.data,{info:r.errorInfo})):r instanceof Error?(e=new MailError("Generic",[r.name,r.message].join(": ")),e.stack=r.stack):"string"==typeof r?e=new MailError("Generic",r):(e=new MailError("Generic","Error generated from the object."),t.object=JSON.stringify(r),t.objectType="undefined"==typeof r?"undefined":_typeof(r)),e)},MailError.prototype.serialize=function(){return JSON.stringify(this.toJSON())},MailError.prototype.toJSON=function(){return{name:this.name,message:this.message,code:this.code,data:this.data,token:"MAIL-ERROR"}},MailError.jsonToError=function(r){return Object.assign(new Error,{stack:void 0},r)},module.exports=MailError;
},{"../utils/object":"./platform/utils/object","./api":"./platform/mail_error/api","./constants":"./platform/mail_error/constants","./manifest":"./platform/mail_error/manifest"}],"./platform/mail_error/manifest":[function(require,module,exports){
"use strict";module.exports={SyntaxError:{description:"Engineers messed up somewhere"},ApiError:{description:"The API layer returned an error"},HttpTransport:{NotOkStatusCode:{description:"Request returned with not-ok status code",requiredData:["statusCode"]},CrossDomainError:{description:"Origin is not allowed by Access-Control-Allow-Origin at Request.crossDomainError"},ContentTypeError:{description:"Return type does not match Request Accept type.",requiredData:["statusCode"]},ConnectionTimedOut:{description:"Request timed out."},JSONParseError:{description:"Parsing of the JSON response failed.",requiredData:["statusCode","responseText"]},OutboundError:{description:"Request fails to go to the server from the client's browser."},ServerNotFound:{description:"DNS lookup failed."},ConnectionRefused:{description:"Client was not able to connect to host."}},BaseClient:{RequestBlocked:{description:"Request is blocked"}},BootcampApiClient:{SearchError:{description:"The BootcampApiClient returned an error for the search."},SuggestionError:{description:"The BootcampApiClient returned an error for the suggestions."},SearchAdsError:{description:"The BootcampApiClient returned an error for parsing search ads."}},MailApiClient:{SaveAndSend:{description:"Both `Save` and `Send` requests have failed"}},LaunchError:{LaunchApiFailed:{description:"Launch API has failed"},NoScript:{description:"Javascript is disabled"},UnsupportedBrowser:{description:"browser is unsupported"}},Authentication:{InvalidCredentials:{description:"The user cookies are not valid anymore.",requiredData:["statusCode"]},InvalidCrumb:{description:"No valid crumb found for the given user."},WssidReissue:{description:"Request does not have a valid wssid.",requiredData:["wssid"]}},Generic:{description:"A generic error has occurred.",code:"FE-100"},AthenaApiClient:{DataError:{description:"The AthenaApiClient returned an error while parsing response."}}};
},{}],303:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function RequestQueueRejection(e){(0,_invariant2.default)(e,"No callName provided to RequestQueueRejectionError."),this.name="RequestQueueRejection",this.message="A write request was issued.  Therefore, the RequestQueue is dropping the "+e+" call.  See https://docs.google.com/document/d/1yOwsTIcXla6CeIn42W9VKfd9JjJ1ajAtfE6CH6PfjeM for more info.",this.stack=(new Error).stack}exports.__esModule=!0;var _invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant);RequestQueueRejection.prototype=Object.create(Error.prototype),RequestQueueRejection.prototype.constructor=RequestQueueRejection,exports.default=RequestQueueRejection,module.exports=exports.default;
},{"../invariant":"./platform/invariant"}],304:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.default=function(e){var u=e.boundary,t=e.headers,r=Object.keys(t).reduce(function(e,u){return""+e+u+": "+t[u]+"\n"},"");return(0,_through2.default)(function(e){this.queue("--"+u+"\n"+r+"\n"+e+"\n\n")},function(){this.queue("--"+u+"--"),this.queue(null)})};var _through=require("../../vendor/through"),_through2=_interopRequireDefault(_through);module.exports=exports.default;
},{"../../vendor/through":"./vendor/through/browser"}],305:[function(require,module,exports){
"use strict";exports.__esModule=!0;var headersRegexp=exports.headersRegexp=/^[\w\-]+:.+$/gim;
},{}],306:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.default=function(e){var t=e.boundary,r=e.useBuffer,u=void 0===r||r,o=e.consolidate,n=void 0!==o&&o,s="";return(0,_through2.default)(function(e){u||(s=""),e=s+e;for(var r=e.split(new RegExp("--"+t+"-{0,2}","gm")),o=[];r.length>1;){var a=r.shift().replace(_constants.headersRegexp,"").trim();""!==a&&(n?o.push(a):this.emit("data",a))}n&&o.length>0&&this.emit("data",o),s=r[0]})};var _through=require("../../vendor/through"),_through2=_interopRequireDefault(_through),_constants=require("./constants");module.exports=exports.default;
},{"../../vendor/through":"./vendor/through/browser","./constants":305}],307:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Mutex(){this.queue=[]}function isPromise(e){return void 0!==e&&(e instanceof Promise||!(!e.then||!e.catch))}function logQueue(e){var t="["+e.slice(0,10).map(function(e){var t=e.id;return t}).join(", ")+"]";_logger2.default.debug("Mutex: The first ten elements of the queue are "+t)}var _logger=require("./logger"),_logger2=_interopRequireDefault(_logger),ElementStates={WAITING:"WAITING",ISSUED:"ISSUED",COMPLETED:"COMPLETED"},TIMEOUT=6e4;Mutex.prototype.sync=function(e,t){var u=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("function"!=typeof e)throw new Error("Mutex.prototype.sync requires a callback function");return new Promise(function(s,n){u.queue.push({id:t,issueInParallel:r,isSafeToRejectEarly:i,timer:void 0,status:ElementStates.WAITING,callback:e,resolve:s,reject:n}),_logger2.default.debug("Mutex: "+t+" was just added to the queue."),logQueue(u.queue),u.next()})},Mutex.prototype.next=function(){if(this.queue.length){var e=!1;this.queue=this.queue.filter(function(e){return e.status!==ElementStates.COMPLETED});for(var t=0;t<this.queue.length;t++){var u=this.queue[t];switch(u.status){case ElementStates.WAITING:if(!u.issueInParallel&&e)return;u.status=ElementStates.ISSUED,e=!0;try{this.execute(u)}catch(e){this.reject(u,e)}if(!u.issueInParallel)return;break;case ElementStates.ISSUED:if(e=!0,!u.issueInParallel)return}}}},Mutex.prototype.execute=function(e){var t=this.resolve.bind(this,e),u=this.reject.bind(this,e);e.isSafeToRejectEarly&&(e.timer=setTimeout(function(){_logger2.default.debug("Mutex: clearing "+e.id+" from queue because it timed out."),_logger2.default.error("Mutex: clearing "+e.id+" from queue because it timed out."),u()},TIMEOUT));var r=e.callback(t,u);isPromise(r)&&r.then(t,u)},Mutex.prototype.resolve=function(e,t){e.resolve(t),e.status=ElementStates.COMPLETED,_logger2.default.debug("Mutex: "+e.id+" was RESOLVED."),e.timer&&clearTimeout(e.timer),this.next()},Mutex.prototype.reject=function(e,t){e.reject(t),e.status=ElementStates.COMPLETED,_logger2.default.debug("Mutex: "+e.id+" was REJECTED."),e.timer&&clearTimeout(e.timer),this.next()},module.exports=Mutex;
},{"./logger":"./platform/logger"}],"./platform/rapid_client/action_data_creators":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _getMessageIdsForAllGroups(t,e){var s,E=e(_mail2.default),_=t.messageGroupIds.map(function(t){var e=E.getMessageGroupById(t);return(0,_message_group.getMessageIds)(e)});return(s=[]).concat.apply(s,_)}function listHeaderActions(t,e){var s=e(_mail2.default);return{numMsg:s.getItemListIdsForList(t.listId).length}}function msgGroupHeaderActions(t,e){return{numMsg:_getMessageIdsForAllGroups(t,e).length}}function msgHdrActions(t){return{msgID:t.messageIds.join(",")}}function msgBodyActions(t,e){var s=e(_mail2.default);return{numMsg:s.getMessageGroupById(t.messageGroupId).messages.length}}function move(t,e){var s=e(_mail2.default);return{numMsg:_getMessageIdsForAllGroups(t,e).length,destin:(0,_folder.getI13nFolderType)(s.getFolder(t.destinationFolderId))}}function undoAction(t){var e,s=t.undoMap,E=t.destinationFolderType,_=(e={},e[_mail_constants.FolderTypes.TRASH]="del",e[_mail_constants.FolderTypes.ARCHIVE]="archve",e);return{undoAction:_[E]||"move",numMsg:Object.keys(s).reduce(function(t,e){return t+(Array.isArray(s[e])?s[e].length:0)},0)}}function documentPreview(t,e){var s=e(_mail2.default),E=s.getAttachment(t.attachmentId);return{fileType:(0,_attachments.getAttachmentType)(E.type,E.subtype),fileSize:E.size}}function downloadAttachment(t){var e=t.attachment;return{fileType:(0,_attachments.getAttachmentType)(e.type,e.subtype),fileSize:e.size,msgId:e.id&&(0,_message.getMessageIdFromAttachmentId)(e.id)}}function downloadAttachments(t){var e=t.attachments,s=void 0===e?[]:e;return s.map(function(t){var e=t.type,s=t.subtype,E=t.size;return{fileType:(0,_attachments.getAttachmentType)(e,s),fileSize:E}})}function openMessage(t,e){var s=(0,_route.getUnsavedDataFromRoute)(t.currentRoute),E=s.activeItemId;if(!E)return{};var _=e(_mail2.default),n=e(_suggestions2.default),S=t.route,A=(0,_list.getListIdFromRoute)(S),a=void 0,o=void 0;(0,_list.getListContentTypeFromListId)(A)!==_mail_constants.ListContentTypes.MESSAGES?(o=(0,_message.getMessageIdFromAttachmentId)(E),a=_.getMessageGroupIdByAttachmentId(A,E)):a=(0,_item.getGroupIdFromItemId)(E,A);var r=_.getMessageGroupById(a);if(!r)return{};var i=(0,_message_group.getMetadata)(r,{listId:A}),c=i.recipients,T=i.messageCount,N=o?o:(0,_message_group.getMessageIds)(r).join(","),C=o?r.messages.find(function(t){return t.id===o}):r.messages[T-1],u=C.headers.from[0],R=(0,_index.destructEmailAddressParts)(u.email||u.name).domainPart||"NODOMAIN.COM",O={msgID:N,sdrDomain:R,numRcpt:c.length,numMsg:T},M=n.getImportantContacts()||[];return O.importntCntct=M.some(function(t){return t.emails.indexOf(u.email)!==-1}),O.itemIdx=_.getCurrentItemIndex(a,A),S.name===_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST&&(O.query=S.params.query),O}function openMessageBodyHrefLink(t){var e=t.hrefLink,s=t.message;return{msgID:s.id,mHref:e,mSndr:s.headers.from[0].email,mFldr:(0,_folder.getI13nFolderType)(s.folder)}}function smartViewSearch(t,e){var s=e(_mail2.default),E=s.getActiveAccountId(),_={accountIds:E},n=(0,_smartview.getSmartViewSearchQuery)(t.smartViewName,_),S=(0,_list.convertSearchQueryToListId)(n),A=(0,_list.serializeListIdForRoute)(S);return{srchQry:A,srchType:(0,_list.isPeopleSearch)(S)?"cntct":"kwrd"}}function querySearch(t){var e=t.listId||(0,_list.getListIdFromRoute)(t.route),s=(0,_list.serializeListIdForRoute)(e);return Object.assign({srchQry:s,srchType:(0,_list.isPeopleSearch)(e)?"cntct":"kwrd"},(0,_object.getIn)(t,"i13nModel.actionData",{}))}function searchSuggestions(t,e){var s=t.query,E=t.suggestions,_=e(_suggestions2.default).getImportantContacts(),n=(0,_suggestions3.getReconciledSuggestions)(E,_,s),S=n.reduce(function(t,e){return e.hasOwnProperty("type")&&(t[e.type]?t[e.type]++:t[e.type]=1),t},{});return{query:s,people:S[_mail_constants.SuggestionType.PERSON]||0,keyword:S[_mail_constants.SuggestionType.KEYWORD]||0,recent:0}}function setPreviewPane(t){var e,s=t.value,E=(e={},e[_mail_constants.PreviewPaneSettings.NO]="none",e[_mail_constants.PreviewPaneSettings.RIGHT]="vrtcl",e[_mail_constants.PreviewPaneSettings.BOTTOM]="hrztl",e);if(E[s])return{setTo:E[s]}}function setMsgListDensity(t){var e,s=t.value,E=(e={},e[_mail_constants.MessageListDensity.SLIM]="slm",e[_mail_constants.MessageListDensity.NORMAL]="rglr",e[_mail_constants.MessageListDensity.RELAXED]="rlxd",e);if(E[s])return{setTo:E[s]}}function setUserSetting(t){var e=t.value,s=e?"true":"false";return{setTo:s}}function setAutomaticReplySetting(t){var e=t.payload,s=e.enabled,E=s?"true":"false";return{setTo:E}}function send(t,e){var s=e(_mail2.default),E=t.userInputtedValues,_=t.csid,n=E.to,S=E.cc,A=E.bcc,a=s.getComposeData(_);return{sttnry:a.stationeryTheme||null,to:n?n.length:0,cc:S?S.length:0,bcc:A?A.length:0,compType:a.inReplyTo?"inline":"comp",numAttchmts:a.attachments.length,sizeAttchmts:a.attachments.reduce(function(t,e){var s=e.size;return t+s},0)}}function addAttachment(t){var e=t.files,s=[],E=[];return e.forEach(function(t){var e=t.type.split("/"),_=void 0;_=e.length>1?(0,_attachments.getAttachmentType)(e[0],e[1]):(0,_attachments.getAttachmentType)(t.type,t.subtype),s.push(_),E.push(t.size)}),{attmTypes:s,attmSizes:E}}function authorizeImapAccount(t){var e=t.email;return{prvdr:(0,_account.getProvider)(e)}}exports.__esModule=!0;var _BEACON_EVENTS$SEARCH,_mail=require("../../stores/mail"),_mail2=_interopRequireDefault(_mail),_suggestions=require("../../stores/suggestions"),_suggestions2=_interopRequireDefault(_suggestions),_index=require("../utils/index"),_folder=require("../utils/folder"),_attachments=require("../utils/attachments"),_account=require("../utils/account"),_message_group=require("../utils/message_group"),_item=require("../utils/item"),_list=require("../utils/list"),_message=require("../utils/message"),_mail_constants=require("../mail_constants"),_constants=require("./constants"),_object=require("../utils/object"),_route=require("../../platform/utils/route"),_smartview=require("../utils/smartview"),_suggestions3=require("../utils/suggestions");exports.default=(_BEACON_EVENTS$SEARCH={},_BEACON_EVENTS$SEARCH[_constants.BEACON_EVENTS.SEARCH_SUGGESTION]=searchSuggestions,_BEACON_EVENTS$SEARCH[_constants.BEACON_EVENTS.SEARCH_ZERO_RESULTS]=querySearch,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MSG_REPLY]=msgBodyActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MSG_REPLY_ALL]=msgBodyActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MSG_FORWARD]=msgBodyActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_REPLY]=msgBodyActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_REPLYALL]=msgBodyActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_FORWARD]=msgBodyActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.QUICK_REPLY]=msgBodyActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.QUICK_REPLYALL]=msgBodyActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.QUICK_FORWARD]=msgBodyActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MSG_HDR_MARK_READ]=msgHdrActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MSG_HDR_MARK_UNREAD]=msgHdrActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MSG_HDR_MARK_STAR]=msgHdrActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MSG_HDR_MARK_UNSTAR]=msgHdrActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MSG_GRP_HDR_MARK_READ]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MSG_GRP_HDR_MARK_UNREAD]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MSG_GRP_HDR_MARK_STAR]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MSG_GRP_HDR_MARK_UNSTAR]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_SELECTALL_MSG]=listHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_SELECT_NONE]=listHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_BULK_CONTEXT_ALL]=listHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_BULK_CONTEXT_NONE]=listHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_BULK_CONTEXT_READ]=listHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_BULK_CONTEXT_UNREAD]=listHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_BULK_CONTEXT_STARRED]=listHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_BULK_CONTEXT_UNSTARRED]=listHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_ARCHIVE]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_DELETE]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_MOVE]=move,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_SPAM]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_NOT_SPAM]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_MARK_READ]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_MARK_UNREAD]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_MARK_STARRED]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_MARK_UNSTARRED]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_PRINT]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.TOOLBAR_VIEW_RAW]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SELECT_MSG]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MARK_MSG_READ]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MARK_MSG_UNREAD]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MARK_MSG_STARRED]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MARK_MSG_UNSTARRED]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.MSG_LIST_DEL]=msgGroupHeaderActions,_BEACON_EVENTS$SEARCH[_constants.MKEYS.UNDO_ACTION]=undoAction,_BEACON_EVENTS$SEARCH[_constants.MKEYS.OPEN_DOC_PREVIEW]=documentPreview,_BEACON_EVENTS$SEARCH[_constants.MKEYS.PHOTO_DOWNLOAD]=documentPreview,_BEACON_EVENTS$SEARCH[_constants.MKEYS.OPEN_MSG]=openMessage,_BEACON_EVENTS$SEARCH[_constants.MKEYS.RIGHT_RAIL_MSG_OPEN]=openMessage,_BEACON_EVENTS$SEARCH[_constants.MKEYS.DOC_READ_MSG]=openMessage,_BEACON_EVENTS$SEARCH[_constants.MKEYS.PHOTO_READ_MSG]=openMessage,_BEACON_EVENTS$SEARCH[_constants.MKEYS.ATTACHMENT_LIGHTBOX_DOCUMENT_MSG]=openMessage,_BEACON_EVENTS$SEARCH[_constants.MKEYS.ATTACHMENT_LIGHTBOX_IMAGE_MSG]=openMessage,_BEACON_EVENTS$SEARCH[_constants.MKEYS.OPEN_LINK]=openMessageBodyHrefLink,_BEACON_EVENTS$SEARCH[_constants.MKEYS.UNREAD_SMARTVIEW]=smartViewSearch,_BEACON_EVENTS$SEARCH[_constants.MKEYS.STARRED_SMARTVIEW]=smartViewSearch,_BEACON_EVENTS$SEARCH[_constants.MKEYS.PHOTO_SMARTVIEW]=smartViewSearch,_BEACON_EVENTS$SEARCH[_constants.MKEYS.DOCUMENT_SMARTVIEW]=smartViewSearch,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SEARCH_BUTTON]=querySearch,_BEACON_EVENTS$SEARCH[_constants.MKEYS.ADVANCED_SEARCH_BUTTON]=querySearch,_BEACON_EVENTS$SEARCH[_constants.MKEYS.CONTACT_SEARCH]=querySearch,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SUBJECT_SEARCH]=querySearch,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SEARCH_PEOPLE_SUGGEST]=querySearch,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SEARCH_KWRD_SUGGEST]=querySearch,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SEARCH_RECENT_SUGGEST]=querySearch,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SETTINGS_POPUP_PREVIEW_PANE]=setPreviewPane,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SETTINGS_PREVIEW_PANE]=setPreviewPane,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SETTINGS_POPUP_MSG_LIST_DENSITY]=setMsgListDensity,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SETTINGS_MSG_LIST_DENSITY]=setMsgListDensity,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SETTINGS_POPUP_TAB_SETTING]=setUserSetting,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SETTINGS_TAB_SETTING]=setUserSetting,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SETTINGS_POPUP_SNIPPET]=setUserSetting,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SETTINGS_SNIPPET]=setUserSetting,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SETTINGS_NOTIFICATIONS]=setUserSetting,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SETTINGS_CONVERSATION]=setUserSetting,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SETTINGS_AUTOMATIC_REPLY]=setAutomaticReplySetting,_BEACON_EVENTS$SEARCH[_constants.MKEYS.SEND]=send,_BEACON_EVENTS$SEARCH[_constants.MKEYS.COMPOSE_ADD_ATTACHMENT]=addAttachment,_BEACON_EVENTS$SEARCH[_constants.MKEYS.COMPOSE_DRAG_ATTACHMENT]=addAttachment,_BEACON_EVENTS$SEARCH[_constants.MKEYS.DOWNLOAD_ATTACHMENT]=downloadAttachment,_BEACON_EVENTS$SEARCH[_constants.MKEYS.OPEN_LIGHTBOX_ATTACHMENT_PREVIEW]=downloadAttachment,_BEACON_EVENTS$SEARCH[_constants.MKEYS.ATTACHMENT_PREVIEW_DOCUMENT_DOWNLOAD]=downloadAttachment,_BEACON_EVENTS$SEARCH[_constants.MKEYS.ATTACHMENT_PREVIEW_IMAGE_DOWNLOAD]=downloadAttachment,_BEACON_EVENTS$SEARCH[_constants.MKEYS.ATTACHMENT_LIGHTBOX_DOCUMENT_DOWNLOAD]=downloadAttachment,_BEACON_EVENTS$SEARCH[_constants.MKEYS.ATTACHMENT_LIGHTBOX_IMAGE_DOWNLOAD]=downloadAttachment,_BEACON_EVENTS$SEARCH[_constants.MKEYS.DOWNLOAD_ATTACHMENT_ALL]=downloadAttachments,_BEACON_EVENTS$SEARCH[_constants.MKEYS.AUTHORIZE_IMAP_ACCOUNT]=authorizeImapAccount,_BEACON_EVENTS$SEARCH),module.exports=exports.default;
},{"../../platform/utils/route":"./platform/utils/route","../../stores/mail":"./stores/mail","../../stores/suggestions":"./stores/suggestions","../mail_constants":"./platform/mail_constants","../utils/account":"./platform/utils/account","../utils/attachments":"./platform/utils/attachments","../utils/folder":"./platform/utils/folder","../utils/index":"./platform/utils","../utils/item":"./platform/utils/item","../utils/list":"./platform/utils/list","../utils/message":"./platform/utils/message","../utils/message_group":"./platform/utils/message_group","../utils/object":"./platform/utils/object","../utils/smartview":"./platform/utils/smartview","../utils/suggestions":"./platform/utils/suggestions","./constants":"./platform/rapid_client/constants"}],"./platform/rapid_client/constants":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.MKEY_GROUPS=exports.SEC_VALUES=exports.MKEYS=exports.BEACON_EVENTS=exports.INTERACTION_TYPES=void 0;var _object=require("../utils/object"),INTERACTION_TYPES=exports.INTERACTION_TYPES=(0,_object.mirrorKeys)(["click","nav","shortcut","keydown","callout"]),BEACON_EVENTS=exports.BEACON_EVENTS=(0,_object.mirrorKeys)(["SEARCH_SUGGESTION","SEARCH_ZERO_RESULTS"]),MKEYS=exports.MKEYS={TOOLBAR_SELECTALL_MSG:"tlbrSlctAllMsg",TOOLBAR_SELECT_NONE:"tlbrSlctNone",TOOLBAR_BULK_CONTEXT_MENU:"tlbrBlkCtxtMenu",TOOLBAR_BULK_CONTEXT_ALL:"tlbrBlkCtxtAll",TOOLBAR_BULK_CONTEXT_NONE:"tlbrBlkCtxtNone",TOOLBAR_BULK_CONTEXT_READ:"tlbrBlkCtxtRd",TOOLBAR_BULK_CONTEXT_UNREAD:"tlbrBlkCtxtUnrd",TOOLBAR_BULK_CONTEXT_STARRED:"tlbrBlkCtxtStrrd",TOOLBAR_BULK_CONTEXT_UNSTARRED:"tlbrBlkCtxtUnStrrd",TOOLBAR_REPLY:"tlbrReply",TOOLBAR_REPLYALL:"tlbrReplyAll",TOOLBAR_FORWARD:"tlbrForward",TOOLBAR_DELETE:"tlbrDel",TOOLBAR_ARCHIVE:"tlbrArchv",TOOLBAR_MOVE:"tlbrMov",TOOLBAR_MOVE_MENU:"tlbrMovMenu",TOOLBAR_SPAM:"tlbrSpam",TOOLBAR_NOT_SPAM:"tlbrNotSpam",TOOLBAR_MORE_MENU:"tlbrMoreMenu",TOOLBAR_MARK_READ:"tlbrMrkRd",TOOLBAR_MARK_UNREAD:"tlbrMrkUnRd",TOOLBAR_MARK_STARRED:"tlbrMrkStrrd",TOOLBAR_MARK_UNSTARRED:"tlbrMrkUStrrd",TOOLBAR_PRINT:"tlbrPrint",TOOLBAR_MORE_MENU_PRINT:"tlbrMoreMenuPrint",TOOLBAR_VIEW_RAW:"tlbrRaw",TOOLBAR_SORT_MENU:"tlbrSrtMenu",TOOLBAR_SORT_NEW:"tlbrSrtNew",TOOLBAR_SORT_OLD:"tlbrSrtOld",TOOLBAR_SORT_UNREAD:"tlbrSrtUnrd",TOOLBAR_SORT_STARRED:"tlbrSrtStrrd",TOOLBAR_CLOSE_MSG:"tlbrCloseMsg",QUICK_REPLY:"qckReply",QUICK_REPLYALL:"qckReplyAll",QUICK_FORWARD:"qckForward",CONTACT_SEARCH:"cntctSrch",SUBJECT_SEARCH:"subSrch",MSG_GRP_HDR_MARK_READ:"msgHdrMrkGrpRd",MSG_GRP_HDR_MARK_UNREAD:"msgHdrMrkGrpUnRd",MSG_GRP_HDR_MARK_STAR:"msgHdrMrkGrpStrrd",MSG_GRP_HDR_MARK_UNSTAR:"msgHdrMrkGrpUnStrrd",MSG_HDR_MARK_READ:"msgHdrMrkRd",MSG_HDR_MARK_UNREAD:"msgHdrMrkUnRd",MSG_HDR_MARK_STAR:"msgHdrMrkStrrd",MSG_HDR_MARK_UNSTAR:"msgHdrMrkUnStrrd",MSG_HDR_PRINT:"msgHdrPrint",MSG_REPLY:"msgReply",MSG_REPLY_ALL:"msgReplyAll",MSG_FORWARD:"msgForward",SHOW_IMG:"showImg",OPEN_LINK:"openlnk",OPEN_DOC_PREVIEW:"openDocPrvw",ZOOM_IN_ATTACHMENT_PREVIEW:"zoomInDocPrvw",ZOOM_OUT_ATTACHMENT_PREVIEW:"zoomOutDocPrvw",OPEN_LIGHTBOX_ATTACHMENT_PREVIEW:"fullscrnDocPrvw",DOWNLOAD_ATTACHMENT:"dwnldattmt",DOWNLOAD_ATTACHMENT_ALL:"dwnldattmtAll",ATTACHMENT_LIGHTBOX_OPEN:"openattmlghtbx",ATTACHMENT_LIGHTBOX_IMAGE_DOWNLOAD:"dwnldimglghtbx",ATTACHMENT_LIGHTBOX_IMAGE_SHARE:"shareimglghtbx",ATTACHMENT_LIGHTBOX_IMAGE_CLOSE:"closeimglghtbx",ATTACHMENT_LIGHTBOX_IMAGE_NEXT:"nextimglghtbx",ATTACHMENT_LIGHTBOX_IMAGE_PREV:"previmglghtbx",ATTACHMENT_LIGHTBOX_IMAGE_ZOOM:"zoomimglghtbx",ATTACHMENT_LIGHTBOX_IMAGE_OPEN:"openimglghtbx",ATTACHMENT_LIGHTBOX_IMAGE_MSG:"rdmsgimglghtbx",ATTACHMENT_LIGHTBOX_DOCUMENT_DOWNLOAD:"dwnlddoclghtbx",ATTACHMENT_LIGHTBOX_DOCUMENT_SHARE:"sharedoclghtbx",ATTACHMENT_LIGHTBOX_DOCUMENT_CLOSE:"closedoclghtbx",ATTACHMENT_LIGHTBOX_DOCUMENT_NEXT:"nextdoclghtbx",ATTACHMENT_LIGHTBOX_DOCUMENT_PREV:"prevdoclghtbx",ATTACHMENT_LIGHTBOX_DOCUMENT_ZOOM:"zoomdoclghtbx",ATTACHMENT_LIGHTBOX_DOCUMENT_OPEN:"opendoclghtbx",ATTACHMENT_LIGHTBOX_DOCUMENT_MSG:"rdmsgdoclghtbx",ATTACHMENT_PREVIEW_DOCUMENT_DOWNLOAD:"dnlwdDocPrvw",ATTACHMENT_PREVIEW_DOCUMENT_SHARE:"shareDocPrvw",ATTACHMENT_PREVIEW_DOCUMENT_CLOSE:"closeDocPrvw",ATTACHMENT_PREVIEW_DOCUMENT_NEXT:"nextDocPrvw",ATTACHMENT_PREVIEW_DOCUMENT_PREV:"prevDocPrvw",ATTACHMENT_PREVIEW_DOCUMENT_ZOOM:"zoomDocPrvw",ATTACHMENT_PREVIEW_IMAGE_DOWNLOAD:"dnlwdImgPrvw",ATTACHMENT_PREVIEW_IMAGE_SHARE:"shareImgPrvw",ATTACHMENT_PREVIEW_IMAGE_CLOSE:"closeImgPrvw",ATTACHMENT_PREVIEW_IMAGE_NEXT:"nextImgPrvw",ATTACHMENT_PREVIEW_IMAGE_PREV:"prevImgPrvw",ATTACHMENT_PREVIEW_IMAGE_ZOOM:"zoomImgPrvw",ATTACHMENT_ACTION_UNKNOWN:"attmUnknown",DOC_OPEN:"opendoc",DOC_READ_MSG:"rdmsgdoc",DOC_OPEN_LINK:"openlnkdoc",DOC_SHARE:"sharedoc",RIGHT_RAIL_DOC_OPEN:"opendocrail",RIGHT_RAIL_DOC_OPEN_ALL:"openalldocrail",PHOTO_OPEN:"openimg",PHOTO_READ_MSG:"rdmsgimg",PHOTO_DOWNLOAD:"dwnldimg",PHOTO_SHARE:"shareimg",RIGHT_RAIL_PHOTO_OPEN:"openimgrail",RIGHT_RAIL_PHOTO_OPEN_ALL:"opendocrail",OPEN_MSG:"openMsg",SELECT_MSG:"slctMsg",MARK_MSG_READ:"mrkMsgRd",MARK_MSG_UNREAD:"mrkMsgUnRd",MARK_MSG_STARRED:"mrkMsgStrrd",MARK_MSG_UNSTARRED:"mrkMsgUnStrrd",MSG_LIST_DEL:"msgLstDel",RIGHT_RAIL_MSG_OPEN:"openmsgrail",RIGHT_RAIL_MSG_OPEN_ALL:"openallmsgrail",UNDO_ACTION:"undoActn",VIEW_MSG_LINK:"viewMsgLnk",LAUNCH:"launch",YMAIL_LOGO:"logo",MAIL_ICON:"inbxBtn",CONTACTS_ICON:"cntctBtn",CALENDAR_ICON:"clndrBtn",NOTEPAD_ICON:"ntpdBtn",MESSENGER_ICON:"mssgnrBtn",SETTINGS_GEAR_ICON:"sttgsBtn",SEARCH_BAR:"clickSrchBar",ADVANCED_SEARCH:"advncdSrch",SEARCH_BUTTON:"mailSrch",SEARCH_PEOPLE_SUGGEST:"mailSrchPeopleSuggst",SEARCH_KWRD_SUGGEST:"mailSrchKwrdSuggst",SEARCH_RECENT_SUGGEST:"mailSrchRecentSuggst",ADVANCED_SEARCH_BUTTON:"advncdMailSrch",ACCOUNT_SETTINGS:"sttgsMenu",SIGNOUT:"signout",UNREAD_SMARTVIEW:"unrdSmrtvw",STARRED_SMARTVIEW:"strrdSmrtvw",PHOTO_SMARTVIEW:"photoSmrtvw",DOCUMENT_SMARTVIEW:"docSmrtvw",TUTORIAL_SMARTVIEW:"tutrlSmrtvw",INBOX_FOLDER:"inboxFldr",DRAFT_FOLDER:"draftFldr",SENT_FOLDER:"sentFldr",ARCHIVE_FOLDER:"archiveFldr",BULK_FOLDER:"spamFldr",TRASH_FOLDER:"trashFldr",USER_FOLDER:"usrFldr",ADD_FOLDER:"addFldr",FOLDER_CONTEXTMENU:"fldrContxtMenu",FOLDER_CONTEXTMENU_ALL_READ:"ctxtMenuFldrAllRd",FOLDER_CONTEXTMENU_ALL_ARCHIVE:"ctxtMenuFldrAllArch",FOLDER_CONTEXTMENU_ALL_DELETE:"ctxtMenuFldrAllDel",FOLDER_CONTEXTMENU_RENAME:"ctxtMenuFldrAllRen",FOLDER_CONTEXTMENU_MOVE:"ctxtMenuFldrAllMov",FOLDER_CONTEXTMENU_DELETE:"ctxtMenuDelFldr",FOLDER_CONTEXTMENU_EMPTY:"ctxtMenuEmpty",ACCOUNT_SWITCH:"accntSwitch",COLLAPSE_ACCOUNT_SWITCHER:"cllpsAccntSwtchr",EXPAND_ACCOUNT_SWITCHER:"expndAccntSwtchr",EDIT_IMAP_ACCOUNT:"editImapAccnt",FIX_IMAP_ACCOUNT:"fixImapAccnt",CONFIRM_DELETE_ACCOUNT:"cnfmDelAccnt",DELETE_ACCOUNT:"delAccnt",ADD_ACCOUNT:"addAccnt",SELECT_YAHOO_ACCOUNT:"slctYahooAccnt",SELECT_OUTLOOK_ACCOUNT:"slctOutlookAccnt",SELECT_AOL_ACCOUNT:"slctAolAccnt",SELECT_GOOGLE_ACCOUNT:"slctGoogleAccnt",SELECT_OTHER_ACCOUNT:"slctOtherAccnt",AUTHORIZE_IMAP_ACCOUNT:"cnnctAccnt",CONNECT_ACCOUNT_SUCCESS:"cnnctAccntSuccess",CANCEL_ADD_ACCOUNT:"cancelAddAccnt",CANCEL_EDIT_DEA:"cancelEditDea",CANCEL_ADD_DEA:"cancelAddDea",CANCEL_ADD_BASE:"cancelAddBase",SETTINGS_POPUP_THEME:"themesClrSttgsPop",SETTINGS_THEME:"themesClrSttgs",SETTINGS_POPUP_THEME_MODE:"themesModeSttgsPop",SETTINGS_THEME_MODE:"themesModeSttgs",SETTINGS_POPUP_PREVIEW_PANE:"prvpSttgsPop",SETTINGS_PREVIEW_PANE:"prvpSttgs",SETTINGS_POPUP_MSG_LIST_DENSITY:"dnstySttsPop",SETTINGS_MSG_LIST_DENSITY:"dnstyStts",SETTINGS_POPUP_TAB_SETTING:"tabSttgsPop",SETTINGS_TAB_SETTING:"tabSttgs",SETTINGS_POPUP_SNIPPET:"snpptsSttgsPop",SETTINGS_SNIPPET:"snpptsSttgs",SETTINGS_POPUP_MORE:"moreSttgsPop",SETTINGS_POPUP_SWITCH_TO_CLASSIC:"swtchSttgsPop",SETTINGS_POPUP_PRIVACY:"prvcySttgsPop",SETTINGS_POPUP_HELP:"hlpSttgsPop",SETTINGS_POPUP_FEEDBACK:"fdbckSttgsPop",SETTINGS_LEFT_RAIL_PERSONALIZE_INBOX:"inbxSttgs",SETTINGS_LEFT_RAIL_ACCOUNTS:"accntSttgs",SETTINGS_LEFT_RAIL_NOTIFICATIONS:"notfctnSttgs",SETTINGS_LEFT_RAIL_WRITING_EMAILS:"writeSttgs",SETTINGS_LEFT_RAIL_VIEWING_EMAILS:"viewSttgs",SETTINGS_LEFT_RAIL_AUTOMATIC_REPLY:"replySttgs",SETTINGS_LEFT_RAIL_FILTERS:"filtrSttgs",SETTINGS_LEFT_RAIL_ABOUT:"aboutSttgs",SETTINGS_LEFT_RAIL_ABOUT_ADS:"aboutAdsSttgs",SETTINGS_LEFT_RAIL_AD_FREE:"adFrSttgs",SETTINGS_LEFT_RAIL_PRIVACY:"privcySttgs",SETTINGS_LEFT_RAIL_SECURITY_AND_PRIVACY:"secPrivSttgs",SETTINGS_LEFT_RAIL_ENCRYPTION:"cryptSttgs",SETTINGS_LEFT_RAIL_SOCIAL_ACCOUNTS:"socialSttgs",SETTINGS_NOTIFICATIONS:"setNtfctn",SETTINGS_CONVERSATION:"setConvstn",SETTINGS_AUTOMATIC_REPLY:"setReply",SETTINGS_UNSUBSCRIBE_ENABLE:"unsub_enable",SETTINGS_UNSUBSCRIBE_DISABLE:"unsub_disable",SETTINGS_CANCEL_EDIT_ACCOUNT:"cancelEditAccnt",SETTINGS_LINK_ENHANCER:"linkEnhancerSttgs",COMPOSE_BUTTON:"cmpsBtn",CANCEL_COMPOSE:"cancelCmp",CONTACT_SUGGEST:"contctsuggst",SELECT_CONTACT:"slctcontct",SHOW_HOVER_CARD:"showHvrcrd",COMPOSE_ADD_ATTACHMENT:"compsAddAttmnt",COMPOSE_DRAG_ATTACHMENT:"dragAttmnt",DELETE_DRAFT:"delDraft",SEND:"send",COMPOSE_ADD_STATIONERY:"compsAddStnry",COMPOSE_ADD_LINK:"compAddLink",COMPOSE_BOLD:"compsBold",COMPOSE_ITALIC:"compsItalic",COMPOSE_CHOOSE_COLOR:"compsClr",COMPOSE_CHOOSE_FONT:"compsFnt",COMPOSE_OPEN_MORE_MENU:"compMoreMnu",COMPOSE_CHOOSE_LIST_TYPE:"compsLst",COMPOSE_ALIGN_TEXT:"compsAlgn",GIF_SEARCH:"compsGifSrch",GIF_CATEGORY:"compsGifCtgry",GIF_ADD:"compsAddGif",GIF_OPEN:"openGifCntxt",GIF_CHANGE_SIZE:"changeGifsz",GIF_SEND_AS_ATTACHMENT:"sendGifAttmnt",GIF_DOWNLOAD:"dnwldGif",GIF_REMOVE:"removeGif",EMOJI_CLOSE:"closeEmjiPckr",EMOJI_OPEN:"openEmjiPckr",EMOJI_ADD:"compsAddEmoji",EMERGENCY_RELOAD_ACCEPTED:"emReloadAcptd",EMERGENCY_RELOAD_CANCELED:"emReloadCncld",EMERGENCY_RELOAD_CLOSED:"emReloadClsd",PERIODIC_RELOAD_ACCEPTED:"peReloadAcptd",FILTER_MESSAGES:"fltrMsg",FILTER_IMAGES:"fltrPhoto",FILTER_DOCUMENTS:"fltrDocs",FILTER_FROM:"fltrFrom",FILTER_TO:"fltrTo",FILTER_ALL:"fltrAll",UNSUB_DISPLAYED:"unsub_disp",UNSUB_UNSUB_CLICKED:"unsub_unsub",UNSUB_HIDE:"unsub_hide",UNSUB_UNDO:"unsub_undo",UNSUB_DONE:"unsub_done",UNSUB_DISMISS:"unsub_dismiss",UNSUB_UNDO_BATCH_DELETE:"unsub_undoBatchDel",UNSUB_MAILTO_SEND:"unsub_mailToSend",UNSUB_MAILTO_CANCEL:"unsub_mailToCancel",UNSUB_TAB_GO:"unsub_tabGo",UNSUB_TAB_CANCEL:"unsub_tabCancel",UNSUB_ALL_DONE:"unsub_allDone",UNSUB_DISABLE:"unsub_disable",FEEDBACK_PANEL_GIVE_FEEDBACK:"fbpFbk",TUTORIAL_VIDEO:"tutorialVid",LOW_RESOLUTION_DIALOG_CLOSED:"lowResDiagClosed",ABNORMAL_ZOOM_DIALOG_CLOSED:"zoomDiagClosed",HIDE_RIGHT_RAIL_AD:"hideRightRailAd",ADFREE_UPSELL_ACCEPT:"adFreeAcptd",ADFREE_UPSELL_CANCEL:"adFreeCncld"},SEC_VALUES=exports.SEC_VALUES={LAUNCH:"launch",LEFTRAIL_COMPOSE:"leftr_comp",COMPOSE_CLOSE:"comp_cls",COMPOSE_CONTACTS:"comp_contcts",COMPOSE_TOOLBAR:"comp_toolbr",COMPOSE_MSG:"comp_msg",RTE_TOOLBAR:"rte_toolbr",MSG_READ_ATTACHMENT:"msgrd_attm",MSG_BODY:"msg_body",ATTM_PREVIEW:"attm_prvw",MSG_READ_TOOLBAR:"msgrd_toolbar",QUICK_COMPOSE:"quickComp",MSG_LIST_MSG:"msglst_msg",MSG_LIST_BULK_ACTION:"msglst_blkactn",MSG_LIST_SORT:"msglst_srt",MSG_LIST_NOTIFICATION:"msglst_notf",DOC_LIST:"doc_vw",PHOTO_LIST:"photo_vw",ATTACHMENT_LIGHTBOX:"attm_lghtbx",FEATURE_CUE:"feature_cue",HEADER:"hdr",HEADER_NAV:"hdr_nav",HEADER_SEARCH:"hdr_srch",HEADER_SETTINGS:"hdr_sttngs",HEADER_LIST:"hdr_list",LEFTRAIL_SMARTVIEW:"leftr_smrtvw",LEFTRAIL_SYSFOLDER:"leftr_systfldr",LEFTRAIL_USERFOLDER:"leftr_usrfldr",LEFTRAIL_CONTEXTMENU:"leftr_contxtmnu",LEFTRAIL_ACCOUNTS:"leftr_acct",RIGHT_RAIL:"rightrail",SETTINGS_POPUP:"sttgspop",SETTINGS_LEFT_RAIL:"sttgsLftr",SETTINGS_INBOX_TAB:"sttgsInbx",SETTINGS_ACCOUNTS_TAB:"sttgsAccnts",SETTINGS_NOTIFICATIONS_TAB:"sttgsNtfctn",SETTINGS_VIEWING_EMAIL_TAB:"sttgsView",SETTINGS_AUTOMATIC_REPLY_TAB:"sttgsReply",SETTINGS_WRITING_EMAIL_TAB:"sttgsWrite",PERIODIC_RELOAD:"periodic_rld",EMERGENCY_RELOAD:"emergency_rld",LOW_RESOLUTION:"low_res",ABNORMAL_ZOOM:"zoom_level",VIDEO_PLAYER:"video_player",UNSUB_PANE:"unsub_pane",FEEDBACK_PANEL:"feedback_panel",TUTORIALS:"tutorials",ADFREE_UPSELL_DIALOG:"adFreeDlg"},MKEY_GROUPS=exports.MKEY_GROUPS=(0,_object.mirrorKeys)(["reply","replyAll","forward","delete","archive","move","open_msg","dwnld_attmnt","launch","search","create_fldr","mark_read","mark_unread","mark_star","mark_unstar","mark_spam","rename_fldr","move_fldr","delete_fldr","add_attmnt","compose","send"]);
},{"../utils/object":"./platform/utils/object"}],"./platform/rapid_client":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _send(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.mKey,t=e.sec,a=e.mKeyGroup,i=e.actionData,o=void 0===i?null:i,r=e.interactionType,c=void 0===r?_constants.INTERACTION_TYPES.click:r;if(t&&n){_constants.INTERACTION_TYPES[c]||(c=_constants.INTERACTION_TYPES.click);var s={mKey:n,intrctn:c,coreActn:a||null,actnData:o?JSON.stringify(o):null},d=_logger2.default.feature(_mail_constants.ApiClientLoggerNames.RapidClient,Object.assign({},{sec:t},s)),_=RapidClient.getRapidInstance();d.logSuccess(),_.beaconClick(t,null,0,s)}}function _sendBeacon(e){var n=e.eventName,t=e.pageParams,a=e.outcome,i=RapidClient.getRapidInstance();i.beaconEvent(n,t,a)}exports.__esModule=!0,exports._send=_send;var _action_data_creators=require("./action_data_creators"),_action_data_creators2=_interopRequireDefault(_action_data_creators),_constants=require("./constants"),_logger=require("./logger"),_logger2=_interopRequireDefault(_logger),_mail_constants=require("../mail_constants"),RapidClient={init:function(e){if("undefined"!=typeof window){var n=window,t=n.rapidInstance;n.Y=n.YAHOO||{},n.Y.i13n=n.Y.i13n||{};var a=Object.assign({},e.rapid);return a&&(a.pageview_on_init=!1),n.Y.i13n.Rapid&&(t||(n.rapidInstance=new n.Y.i13n.Rapid(a))),n.rapidInstance}},getRapidInstance:function(){return"undefined"!=typeof window&&"undefined"!=typeof window.rapidInstance&&window.rapidInstance},sendI13nModel:function(e,n){var t=e.i13nModel,a=_action_data_creators2.default[t.mKey];"function"==typeof n&&"function"==typeof a&&(t.actionData=a.call(this,e,n)),_send(t)},sendBeaconEvent:function(e,n){var t=e.i13nModel,a=_action_data_creators2.default[t.eventName];"function"==typeof n&&"function"==typeof a&&(t.pageParams=a.call(this,e,n),t.pageParams.etrg=t.etrg),_sendBeacon(t)}};exports.default=RapidClient;
},{"../mail_constants":"./platform/mail_constants","./action_data_creators":"./platform/rapid_client/action_data_creators","./constants":"./platform/rapid_client/constants","./logger":"./platform/rapid_client/logger"}],"./platform/rapid_client/logger":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger);exports.default=_norrinLogger2.default.create("norrin/i13n_client"),module.exports=exports.default;
},{"norrin-logger":"./node_modules/norrin-logger/index.js"}],"./platform/react_action_constants":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.mail=void 0;var _object=require("../utils/object"),mail=exports.mail=(0,_object.mirrorKeys)(["INITIAL_STATE","WINDOW_RESIZING","WINDOW_RESIZED","APPLICATION_VISIBILITY_DID_CHANGE","CANCEL_APP_RELOAD","CONFIRM_APP_RELOAD","RESOLUTION_CHANGE","HEADER_NAVIGATION_SELECTED","ACCOUNT_MENU_SHOWN","USER_LOGGED_OUT","TIMEZONE_CHANGE_DETECTED","PREFERRED_TIMEZONE_CHANGE_REJECTED","ONLINE_STATUS_CHANGED","OPEN_PAGE_REQUESTED","CLOSE_PAGE_REQUESTED","CLOSE_ALL_PAGES_REQUESTED","REORDER_PAGE_REQUESTED","PREVIEW_MESSAGE_REQUESTED","PREVIEW_MESSAGE_CLOSED","PREVIEW_PANE_PREF_CHANGE_REQUESTED","PREVIEW_PANE_PREF_CHANGE_SUCCEEDED","PREVIEW_PANE_PREF_CHANGE_FAILED","MULTI_TASKING_PREF_CHANGE_REQUESTED","MULTI_TASKING_PREF_CHANGE_SUCCEEDED","MULTI_TASKING_PREF_CHANGE_FAILED","EXPAND_ACCOUNT_LIST","EXPANDED_FOLDERS_PREF_CHANGE_REQUESTED","EXPANDED_FOLDERS_PREF_CHANGE_SUCCEEDED","EXPANDED_FOLDERS_PREF_CHANGE_FAILED","SHOW_CUSTOM_FOLDERS_PREF_CHANGE_REQUESTED","SHOW_CUSTOM_FOLDERS_PREF_CHANGE_SUCCEEDED","SHOW_CUSTOM_FOLDERS_PREF_CHANGE_FAILED","BROWSER_NOTIFICATIONS_PREF_CHANGE_REQUESTED","BROWSER_NOTIFICATIONS_PREF_CHANGE_SUCCEEDED","BROWSER_NOTIFICATIONS_PREF_CHANGE_FAILED","CONVERSATIONS_CHANGE_REQUESTED","CONVERSATIONS_CHANGE_SUCCEEDED","CONVERSATIONS_CHANGE_FAILED","SHOW_IMAGE_PREF_CHANGE_REQUESTED","SHOW_IMAGE_PREF_CHANGE_SUCCEEDED","SHOW_IMAGE_PREF_CHANGE_FAILED","SNIPPETS_PREF_CHANGE_REQUESTED","SNIPPETS_PREF_CHANGE_SUCCEEDED","SNIPPETS_PREF_CHANGE_FAILED","HIDEAD_PREF_CHANGE_REQUESTED","HIDEAD_PREF_CHANGE_SUCCEEDED","HIDEAD_PREF_CHANGE_FAILED","MESSAGE_LIST_DENSITY_PREF_CHANGE_REQUESTED","MESSAGE_LIST_DENSITY_PREF_CHANGE_SUCCEEDED","MESSAGE_LIST_DENSITY_PREF_CHANGE_FAILED","ACTION_AFTER_MESSAGE_MOVE_CHANGE_REQUESTED","ACTION_AFTER_MESSAGE_MOVE_CHANGE_SUCCEEDED","ACTION_AFTER_MESSAGE_MOVE_CHANGE_FAILED","DEFAULT_SENDING_ADDRESS_CHANGE_REQUESTED","DEFAULT_SENDING_ADDRESS_CHANGE_SUCCEEDED","DEFAULT_SENDING_ADDRESS_CHANGE_FAILED","SIGNATURE_STATUS_CHANGE_REQUESTED","SIGNATURE_STATUS_CHANGE_SUCCEEDED","SIGNATURE_STATUS_CHANGE_FAILED","SIGNATURE_TEXT_CHANGE_REQUESTED","SIGNATURE_TEXT_CHANGE_SUCCEEDED","SIGNATURE_TEXT_CHANGE_FAILED","COMPOSE_FONT_SIZE_CHANGE_REQUESTED","COMPOSE_FONT_SIZE_CHANGE_SUCCEEDED","COMPOSE_FONT_SIZE_CHANGE_FAILED","COMPOSE_FONT_FAMILY_CHANGE_REQUESTED","COMPOSE_FONT_FAMILY_CHANGE_SUCCEEDED","COMPOSE_FONT_FAMILY_CHANGE_FAILED","LINK_ENHANCER_CHANGE_REQUESTED","LINK_ENHANCER_CHANGE_SUCCEEDED","LINK_ENHANCER_CHANGE_FAILED","DARLA_ADS_RECEIVED","DARLA_ADS_FAILED","PREFETCHED_AD_RENDERED","PREFETCHED_ADS_RENDERED","LOOK_AHEAD_ADS_PARSED","LOOK_AHEAD_ADS_RENDERED","HIDE_RIGHT_PANE_ADS","AD_RECEIVED","AD_FAILED","AD_FEEDBACK_STARTED","AD_FEEDBACK_SUBMITTED","AD_FEEDBACK_CLOSED","GEMINI_SPONSORED_ASSET_RECEIVED","GEMINI_SPONSORED_ASSET_FAILED","ADFREE_UPSELL_ACCEPT","ADFREE_UPSELL_CANCEL","KEY_DID_BIND","KEY_DID_UPDATE","KEY_DID_UNBIND","NAVIGATE_TO_COMPOSE_REQUESTED","NAVIGATE_TO_SPONSORED_FORWARD_REQUESTED","NAVIGATE_SUCCESS","FEEDBACK_PANEL_GIVE_FEEDBACK","MESSAGE_SAVE_REQUESTED","MESSAGE_SAVE_SUCCEEDED","MESSAGE_SAVE_FAILED","MESSAGE_AUTO_SAVE_REQUESTED","MESSAGE_AUTO_SAVE_SUCCEEDED","MESSAGE_AUTO_SAVE_FAILED","SPONSORED_SAVE_TO_INBOX_SUCCEEDED","SPONSORED_SAVE_TO_INBOX_FAILED","COMPOSE_OPENED","COMPOSE_CLOSED","SEND","SEND_SUCCESS","SEND_FAILURE","INLINE_IMAGE_LOAD_FAILED","REMOVE_INLINE_IMAGE","DELETE_DRAFT_REQUESTED","DELETE_DRAFT_SUCCEEDED","DELETE_DRAFT_FAILED","UPDATE_EDIT_DRAFT_STATE","DRAFT_SUBJECT_UPDATED","SEARCH_CONTACT_BEGAN","SEARCH_CONTACT_SUCCEEDED","IMPORTANT_CONTACTS_PRELOADED","CLEARED_SUGGESTIONS","CONTACT_ADDED","XOBNIFIED_RESPONDED","COMPOSE_NO_ADDRESS_DETECTED","COMPOSE_RECIPIENT_LIMIT_EXCEEDED","COMPOSE_ADDRESSING_FAILED","DRAFT_EDITED","SUBJECT_FOCUSED","RTE_MORE_MENU_SHOWN","HANDLE_RTE_TOOLBAR_ACTIONS","EMOJI_ADDED","EMOJI_INLINED_LOADED","GIF_ADDED","GIF_FETCHED","GIF_FETCH_REQUESTED","GIF_FETCH_SUCCEEDED","GIF_FETCH_FAILED","INLINED_PERMANENT_URL_IMAGE_LOADED","GIF_CATEGORIES_CONTENT_FETCH_SUCCEEDED","GIF_CATEGORIES_CONTENT_FETCH_REQUESTED","GIF_CATEGORIES_CONTENT_FETCH_FAILED","MESSAGE_GROUP_WITH_BODIES_OPENED","MESSAGE_GROUP_WITH_BODIES_RECEIVED","MESSAGE_GROUP_WITH_BODIES_FAILED","MESSAGE_GROUP_OPENED","MESSAGE_BODIES_REQUESTED","MESSAGE_BODIES_RECEIVED","MESSAGE_BODIES_FAILED","MESSAGE_BODIES_OPEN_GROUP_RECEIVED","MESSAGE_CARD_FOCUSED","AUTO_CHECK_MAIL_REQUESTED","AUTO_CHECK_MAIL_RECEIVED","AUTO_CHECK_MAIL_FAILED","MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED","MESSAGE_BODY_LINK_CLICKED","MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED","MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_SUCCEEDED","MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_FAILED","MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED","MESSAGES_RESTORE_FROM_MESSAGE_VIEW_SUCCEEDED","MESSAGES_RESTORE_FROM_MESSAGE_VIEW_FAILED","MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED","MESSAGES_DELETE_FROM_MESSAGE_VIEW_SUCCEEDED","MESSAGES_DELETE_FROM_MESSAGE_VIEW_FAILED","MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED","MESSAGES_MOVE_FROM_MESSAGE_VIEW_SUCCEEDED","MESSAGES_MOVE_FROM_MESSAGE_VIEW_FAILED","MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED","MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_SUCCEEDED","MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_FAILED","MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED","MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_SUCCEEDED","MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_FAILED","MESSAGES_ARCHIVE_REQUESTED","MESSAGES_ARCHIVE_SUCCEEDED","MESSAGES_ARCHIVE_FAILED","MESSAGES_RESTORE_REQUESTED","MESSAGES_RESTORE_SUCCEEDED","MESSAGES_RESTORE_FAILED","MESSAGES_DELETE_REQUESTED","MESSAGES_DELETE_SUCCEEDED","MESSAGES_DELETE_FAILED","MESSAGES_MOVE_REQUESTED","MESSAGES_MOVE_SUCCEEDED","MESSAGES_MOVE_FAILED","MESSAGES_MARK_READ_REQUESTED","MESSAGES_MARK_READ_SUCCEEDED","MESSAGES_MARK_READ_FAILED","MESSAGES_MARK_SPAM_REQUESTED","MESSAGES_MARK_SPAM_SUCCEEDED","MESSAGES_MARK_SPAM_FAILED","MESSAGES_MARK_NOT_SPAM_REQUESTED","MESSAGES_MARK_NOT_SPAM_SUCCEEDED","MESSAGES_MARK_NOT_SPAM_FAILED","MESSAGES_MARK_UNREAD_REQUESTED","MESSAGES_MARK_UNREAD_SUCCEEDED","MESSAGES_MARK_UNREAD_FAILED","MESSAGES_MARK_STARRED_REQUESTED","MESSAGES_MARK_STARRED_SUCCEEDED","MESSAGES_MARK_STARRED_FAILED","MESSAGES_MARK_UNSTARRED_REQUESTED","MESSAGES_MARK_UNSTARRED_SUCCEEDED","MESSAGES_MARK_UNSTARRED_FAILED","UNDO_MOVE_REQUESTED","UNDO_MOVE_SUCCEEDED","UNDO_MOVE_FAILED","FILE_ATTACHMENT_ADDED","ATTACHMENT_REMOVED","ATTACHMENT_DOWNLOADED","ALL_ATTACHMENTS_DOWNLOADED","INLINE_FILE_ATTACHMENT_ADDED","INLINE_FILE_ATTACHMENT_REMOVED","INLINE_ATTACHMENT_MOVED_TO_TRAY","ATTACHMENT_MOVED_TO_INLINE","REMOVE_NON_LOADED_ATTACHMENTS","MESSAGES_LIST_SCROLLED","ITEM_LIST_PAGE_SCROLLED","MORE_MESSAGES_REQUEST_SUCCESS","MORE_MESSAGES_REQUEST_FAILED","MESSAGE_GROUP_BY_CHANGED","LIST_SORT_ORDER_CHANGE_REQUESTED","MESSAGE_LIST_TOOLBAR_MENU_SHOWN","MESSAGES_FROM_MESSAGE_LIST_SELECTED","MESSAGES_FROM_MESSAGE_LIST_RANGE_SELECTED","MESSAGES_FROM_MESSAGE_LIST_ALL_SELECTED","MESSAGES_FROM_MESSAGE_LIST_NONE_SELECTED","MESSAGES_FROM_MESSAGE_LIST_READ_SELECTED","MESSAGES_FROM_MESSAGE_LIST_UNREAD_SELECTED","MESSAGES_FROM_MESSAGE_LIST_STARRED_SELECTED","MESSAGES_FROM_MESSAGE_LIST_UNSTARRED_SELECTED","MESSAGES_FROM_MESSAGE_LIST_SELECT_CURSOR_MOVED","MESSAGES_FROM_MESSAGE_LIST_CURSOR_MOVED","MESSAGES_SELECTION_REPLACED","ITEMS_DRAG_STARTED","ARCHIVE_FOLDER_REQUESTED","ARCHIVE_FOLDER_SUCCEEDED","ARCHIVE_FOLDER_FAILED","CHANGE_FOLDER_REQUESTED","CHANGE_FOLDER_SUCCEEDED","CHANGE_FOLDER_FAILED","CREATE_FOLDER_REQUESTED","CREATE_FOLDER_SUCCEEDED","CREATE_FOLDER_FAILED","DELETE_ACTIVE_FOLDER_REQUESTED","DELETE_FOLDER_REQUESTED","DELETE_FOLDER_SUCCEEDED","DELETE_FOLDER_FAILED","RENAME_FOLDER_REQUESTED","RENAME_FOLDER_SUCCEEDED","RENAME_FOLDER_FAILED","MARK_READ_FOLDER_REQUESTED","MARK_READ_FOLDER_SUCCEEDED","MARK_READ_FOLDER_FAILED","CLEAR_FOLDER_REQUESTED","CLEAR_FOLDER_SUCCEEDED","CLEAR_FOLDER_FAILED","FOLDER_CONTEXT_MENU_REQUESTED","CAPTCHA_BEGAN","SEARCH_INPUT_FOCUSED","SEARCH_LIST_ITEMS_REQUESTED","SEARCH_LIST_ITEMS_BLOCK_RECEIVED","SEARCH_LIST_ITEMS_RECEIVED","SEARCH_LIST_ITEMS_FAILED","MORE_SEARCH_LIST_ITEMS_REQUESTED","MORE_SEARCH_LIST_ITEMS_RECEIVED","MORE_SEARCH_LIST_ITEMS_FAILED","SUGGESTIONS_REQUESTED","SUGGESTIONS_RECEIVED","SUGGESTIONS_FROM_CONTACTS_RECEIVED","SUGGESTIONS_FAILED","ATTACHMENT_PREVIEW_OPENED","ATTACHMENT_PREVIEW_STATE_SAVE_REQUESTED","ATTACHMENT_PREVIEW_CLOSED","ATTACHMENT_PREVIEW_SWITCH_TO_FULL_SCREEN","ATTACHMENT_PREVIEW_DOWNLOADED","ATTACHMENT_OPENED","ATTACHMENT_ZOOMED","DOCUMENT_FETCH_SUCCEEDED","DOCUMENT_FETCH_FAILED","DOCUMENT_FETCH_REQUESTED","DOCUMENT_PAGE_FETCH_REQUESTED","DOCUMENT_PAGE_FETCH_SUCCEEDED","DOCUMENT_PAGE_FETCH_FAILED","SETTINGS_MAILBOX_ATTRIBUTES_RECEIVED","SETTINGS_MENU_REQUESTED","SETTINGS_SAVE_VACATION_PREFERENCES_SUCCEEDED","SETTINGS_SAVE_VACATION_PREFERENCES_FAILED","SETTINGS_SAVE_FILTERS_SUCCEEDED","SETTINGS_SAVE_FILTERS_FAILED","SETTINGS_SAVE_DELIVERYBLOCKEDSENDERS_SUCCEEDED","SETTINGS_SAVE_DELIVERYBLOCKEDSENDERS_FAILED","SETTINGS_LOCATION_CHANGE_REQUESTED","SETTINGS_LOCATION_CHANGE_SUCCEEDED","SETTINGS_LOCATION_CHANGE_FAILED","SETTINGS_SAVE_BLOCKED_SENDERS_REQUESTED","SETTINGS_SAVE_BLOCKED_SENDERS_SUCCEEDED","SETTINGS_SAVE_BLOCKED_SENDERS_FAILED","SETTINGS_CHANGE_REQUESTED","SETTINGS_CHANGE_SUCCEEDED","SETTINGS_CHANGE_FAILED","CONTACT_DETAIL_FETCH_REQUESTED","CONTACT_DETAIL_FETCH_SUCCEEDED","CONTACT_DETAIL_FETCH_FAILED","IMPORTANT_CONTACTS_FETCH_REQUESTED","IMPORTANT_CONTACTS_FETCH_SUCCEEDED","IMPORTANT_CONTACTS_FETCH_FAILED","NOTIFICATION_CLOSED","SCOUT_TIMER","FEATURE_CUE_MARK_AS_SHOWN_REQUESTED","FEATURE_CUE_MARK_AS_SHOWN_SUCCEEDED","FEATURE_CUE_MARK_AS_SHOWN_FAILED","FEATURE_TRY_NOW_REQUESTED","FEATURE_CUE_MARK_AS_SUCCESS_SUCCEEDED","FEATURE_CUE_MARK_AS_SUCCESS_FAILED","FEATURE_CUE_MARK_AS_CLOSE_SUCCEEDED","FEATURE_CUE_MARK_AS_CLOSE_FAILED","FEATURE_CLOSED","PLAY_MAIL_ONBOARDING_VIDEO","PLAY_MAIL_ONBOARDING_VIDEO_FROM_CUE","SSA_BREACH_ALERT_SHOWN","SSA_BREACH_ALERT_MARK_AS_ACTED_REQUESTED","SSA_BREACH_ALERT_MARK_AS_ACTED_SUCCEEDED","SSA_BREACH_ALERT_AS_ACTED_FAILED","BROWSER_NOTIFICATIONS_DISPLAYED","BULK_PROGRESS_REQUESTED","BULK_PROGRESS_RECEIVED","BULK_PROGRESS_FAILED","BULK_CANCEL_REQUESTED","BULK_CANCEL_SUCCEEDED","BULK_CANCEL_FAILED","MESSAGE_PRINT_REQUESTED","MESSAGE_PRINT_SUCCEEDED","MESSAGE_PRINT_FAILED","OPT_OUT_OF_NORRIN","GO_TO_PRIVACY_TERMS","GO_TO_HELP_PAGE","GIVE_FEEDBACK","GO_TO_ABOUT_YAHOO_MAIL","GO_TO_AD_FREE_MAIL","GO_TO_ABOUT_OUR_ADS","THEME_CHANGE_REQUESTED","THEME_CHANGE_SUCCEEDED","THEME_CHANGE_FAILED","THEME_MODE_CHANGE_REQUESTED","THEME_MODE_CHANGE_SUCCEEDED","THEME_MODE_CHANGE_FAILED","STATIONERY_DEFAULT_THEME_CHANGE_REQUESTED","STATIONERY_DEFAULT_THEME_CHANGE_SUCEEDED","STATIONERY_DEFAULT_THEME_CHANGE_FAILED","ACCOUNT_DETAILS_CHANGE_REQUESTED","ACCOUNT_DETAILS_CHANGE_SUCCEEDED","ACCOUNT_DETAILS_CHANGE_FAILED","ACCOUNTS_OAUTH_TOKEN_REMOVE_SUCCEEDED","ACCOUNTS_OAUTH_TOKEN_REMOVE_FAILED","ACCOUNT_DELETE_REQUESTED","ACCOUNT_DELETE_SUCCEEDED","ACCOUNT_DELETE_FAILED","ACCOUNT_ADD_REQUESTED","ACCOUNT_ADD_SUCCEEDED","ACCOUNT_ADD_FAILED","ACCOUNT_ADD_FINISHED","ACCOUNT_SETTINGS_CANCEL","ACCOUNT_ADD_WIZARD_OPENED","ACCOUNT_ADD_SELECT_PROVIDER","ACCOUNT_DELETE_OPEN_CONFIRMATION","ACCOUNT_ADD_AUTHORIZE","CONFIRM_EMAIL_RESNED_REQUESTED","CONFIRM_EMAIL_RESEND_SUCCEEDED","CONFIRM_EMAIL_RESEND_FAILED","ACCOUNT_REAUTH_REQUESTED","ACCOUNT_REAUTH_SUCCEEDED","ACCOUNT_REAUTH_FAILED","MESSAGE_CARD_EXPANSION_CHANGED","MESSAGE_GROUP_ALL_EXPANSIONS_CHANGED","SOCIAL_ACCOUNTS_STATUS_RECEIVED","SOCIAL_ACCOUNTS_DISCONNECT_REQUESTED","SOCIAL_ACCOUNTS_DISCONNECT_SUCCEEDED","SOCIAL_ACCOUNTS_DISCONNECT_FAILED","DISPOSABLE_EMAIL_BASE_NAME_CREATE_REQUESTED","DISPOSABLE_EMAIL_BASE_NAME_CREATE_SUCCEEDED","DISPOSABLE_EMAIL_BASE_NAME_CREATE_FAILED","DISPOSABLE_EMAIL_BASE_NAME_SUGGESTIONS_RECEIVED","UNSEEN_COUNT_RESET","UNSUBSCRIBE_MULTIPLE_LISTS_CLEANED","UNSUBSCRIBE_SINGLE_LIST_CLEANED","UNSUBSCRIBE_DIALOG_CLOSED","UNSUBSCRIBE_NEW_COMPOSE","UNSUBSCRIBE_DISPLAY_LIST","UNSUBSCRIBE_ACTION_TAKEN","TUTORIAL_VIDEO_PLAYED","EXCEPTION_OCCURRED","MESSAGES_UNSUBSCRIBE_CONTENT_RECEIVED","MESSAGES_UNSUBSCRIBE_CONTENT_REQUESTED","CHANNEL_CHANGED","VIDEO_PLAYER_OPENED","VIDEO_PLAYER_CLOSED","CHANNELS_FETCH_REQUESTED","CHANNELS_FETCH_RECEIVED","CHANNELS_FETCH_FAILED","VIDEO_PLAYER_PLAYED","VIDEO_PLAYER_PAUSED","UNSUBSCRIBE_NOTIFICATION_CHANGE_REQUESTED","UNSUBSCRIBE_NOTIFICATION_CHANGE_SUCCEEDED","UNSUBSCRIBE_NOTIFICATION_CHANGE_FAILED","UNSUBSCRIBE_TIMESTAMP_CHANGE_REQUESTED","UNSUBSCRIBE_TIMESTAMP_CHANGE_SUCCEEDED","UNSUBSCRIBE_TIMESTAMP_CHANGE_FAILED","NUM_UNSUBSCRIBED_ITEMS_CHANGE_REQUESTED","NUM_UNSUBSCRIBED_ITEMS_CHANGE_SUCCEEDED","NUM_UNSUBSCRIBED_ITEMS_CHANGE_FAILED","CONTACT_GROUPS_REQUESTED","CONTACT_GROUPS_RECEIVED","CONTACT_GROUPS_FAILED","MESSAGE_READ_AD_ROTATION_TIMER","EMOJI_PICKER_CLOSED","EMOJI_PICKER_OPENED","FEATURE_DISABLED"]);
},{"../utils/object":"./platform/utils/object"}],308:[function(require,module,exports){
"use strict";exports.__esModule=!0;var actionEnhancer=function(n){return function(e,t){return n.reduce(function(n,t){return t(e,n)},t)}},actionEnhancerMiddleware=function(n){var e=actionEnhancer(n);return function(n){return function(t){return function(r){return t(e(n.getState(),r))}}}};exports.default=actionEnhancerMiddleware,module.exports=exports.default;
},{}],309:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger),_react_action_constants=require("../../platform/react_action_constants"),actionLogger=_norrinLogger2.default.create("norrin/actions"),logger=function(e){return function(){return function(r){return function(n){var o=n.type,t=n.route,a=void 0===t?{}:t,i={action:o,crumb:e};o===_react_action_constants.mail.OPEN_PAGE_REQUESTED&&(i.routeName=a.name),"undefined"!=typeof performance&&performance.now&&(i.elapsedTime=performance.now());var u=actionLogger.feature("flux_action",i),c=r(n);return"undefined"!=typeof window?window.requestAnimationFrame(u.logLatency):u.logLatency(),c}}}};exports.default=logger,module.exports=exports.default;
},{"../../platform/react_action_constants":"./platform/react_action_constants","norrin-logger":"./node_modules/norrin-logger/index.js"}],310:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function RequestQueue(){this.checkMailRequestWrappers=[],this.mutex=new Mutex}exports.__esModule=!0;var _object=require("../utils/object"),_request_queue_rejection=require("../mail_error/request_queue_rejection"),_request_queue_rejection2=_interopRequireDefault(_request_queue_rejection),_through=require("../../vendor/through"),_through2=_interopRequireDefault(_through),ALL_REQUESTS=(0,_object.mirrorKeys)(["launch.skeleton","launch.folder","launch.defaultFolder","launch.message","launch.compose","launch.messageGroup","folderChange.getList","folders.get","folders.delete","folders.create","folders.rename","folderList.delete","folderList.update","messages.save","messages.send","messages.update","messages.delete","messages.getBodies","messages.prefetchBodies","messages.saveAndSend","messages.saveRawMessage","messages.undo","messages.trashAndDelete","messageGroups.get","messageGroups.getList","magicTriage.getList","undo.list","checkMail","document.fetch","task.status","task.abort","settings.get","settings.setBaseName","settings.saveMessageFilters","settings.saveBlockedSenders","settings.saveVacationPreferences","settings.saveWebMailboxAttributes","settings.addAccount","settings.updateAccount","settings.deleteAccount","settings.getAttributesToMigrate","settings.migrateSettings","settings.resendConfirmEmail","searchSuggestions","searchItems","searchGifs","getMagicTriageMessages","getContentProviders","linkContentProvider","search","unseenCount.reset","udb.read","udb.write","account.getAlerts","account.updateAlerts"]),REQUESTS_ISSUED_IN_PARALLEL=(0,_object.mirrorKeys)(["messages.send","messages.getBodies","messageGroups.get","document.fetch","searchGifs","getMagicTriageMessages","searchSuggestions","settings.get","settings.saveWebMailboxAttributes","settings.saveBlockedSenders","settings.saveVacationPreferences","settings.setBaseName","settings.addAccount","settings.updateAccount","settings.deleteAccount","settings.getAttributesToMigrate","settings.migrateSettings","settings.resendConfirmEmail","task.status","unseenCount.reset","account.getAlerts","account.updateAlerts"]),Mutex=require("../mutex");RequestQueue.prototype.add=function(e,t){return this._canGoInParallel(t)?e():this._addToRequestQueue(e,t)},RequestQueue.prototype.addStream=function(e,t){return this._canGoInParallel(t)?e():this._addStreamToRequestQueue(e,t)},RequestQueue.prototype._canGoInParallel=function(e){if(!ALL_REQUESTS[e])throw new Error(["Unknown API call name: `"+JSON.stringify(e)+"`","Make sure that all the request of the API client are added to","ALL_REQUESTS list. This is done to make sure all new API requests","are aware of the serialization logic and nothing goes out of sync and","potentially breaks application data integrity. @see","https://docs.google.com/document/d/1yOwsTIcXla6CeIn42W9VKfd9JjJ1ajAtfE6CH6PfjeM","for more info."].join("\n"));return!!REQUESTS_ISSUED_IN_PARALLEL[e]},RequestQueue.prototype._addToRequestQueue=function(e,t){var s=this;return this._isCheckMail(t)||this._rejectAndRemoveCheckMailsFromQueue(),new Promise(function(r,u){return s._isCheckMail(t)&&s.checkMailRequestWrappers.push({reject:u}),s._sync(e,t,s._isWriteToBackend(t),s._isSafeToRejectEarly(t)).then(r,u)})},RequestQueue.prototype._addStreamToRequestQueue=function(e,t){this._isCheckMail(t)||this._rejectAndRemoveCheckMailsFromQueue();var s=(0,_through2.default)();return this.mutex.sync(function(t,r){var u=e();u.pipe(s),u.on("end",t),u.on("error",function(e){s.emit("error",e),r()})},t,this._isWriteToBackend(t),this._isSafeToRejectEarly(t)),s},RequestQueue.prototype._sync=function(e,t,s,r){return this.mutex.sync(function(){return e()},t,s,r)},RequestQueue.prototype._rejectAndRemoveCheckMailsFromQueue=function(){this.checkMailRequestWrappers.forEach(function(e){e.reject(new _request_queue_rejection2.default("check mail"))}),this.checkMailRequestWrappers=[]},RequestQueue.prototype._isCheckMail=function(e){return"checkMail"===e},RequestQueue.prototype._isSafeToRejectEarly=function(e){return"messages.save"!==e&&"messages.saveAndSend"!==e},RequestQueue.prototype._isWriteToBackend=function(e){return"messages.update"===e||"messages.delete"===e||"messages.trashAndDelete"===e},exports.default=RequestQueue,module.exports=exports.default;
},{"../../vendor/through":"./vendor/through/browser","../mail_error/request_queue_rejection":303,"../mutex":307,"../utils/object":"./platform/utils/object"}],311:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_rum=require("../client/rum"),Rum=_interopRequireWildcard(_rum),_logger=require("./logger"),_logger2=_interopRequireDefault(_logger),RumComponent=_react2.default.createClass({displayName:"RumComponent",getDefaultProps:function(){return{yaftCanShowVisualReport:!1}},reduceInLimit:function(e){this.limit[e]&&this.limit[e]--},isInLimit:function(e){return 0!==this.limit[e]},fireRumMetric:function(e){var t=this;if(e){var r=!1,i=this.props.config;Object.keys(e||{}).filter(function(e){return i[e]}).forEach(function(n){var u=i[n].limit,o=i[n].metric,a=Math.round(e[n]);if(u){if(!t.isInLimit(n))return;t.reduceInLimit(n)}r=!0,_logger2.default.debug("UserPerf: "+o+":  "+a),Rum.recordPerfData("user",o,a)}),r&&Rum.firePerfData()}},componentDidMount:function(){var e=this,t=this.props.getAppInitMetrics(),r=this.props.config;this.limit=Object.keys(r).filter(function(e){return r[e].limit}).reduce(function(e,t){var i;return _extends({},e,(i={},i[t]=r[t].limit||0,i))},{}),Rum.init({yaftCanShowVisualReport:this.props.yaftCanShowVisualReport,modules:this.props.modules},function(){e.fireRumMetric(t)},!1)},componentDidUpdate:function(){this.fireRumMetric(this.props.getRumMetric())},render:function(){return null}});exports.default=RumComponent,module.exports=exports.default;
},{"../client/rum":104,"./logger":"./platform/logger","react":"./node_modules/react/react.js"}],"./platform/theming/themes":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.ThemeModes=exports.Themes=exports.ThemingValues=void 0;var _mail_ui_vars=require("../utils/mail_ui_vars"),_object=require("../utils/object"),_color=require("../utils/color"),ThemingValues=exports.ThemingValues={DEFAULT:{GRADIENT_COLOR_1:_mail_ui_vars.HEADER_COLOR_1,GRADIENT_COLOR_2:_mail_ui_vars.HEADER_COLOR_2,HIGHLIGHT:"#4faaff",COMPOSE_BUTTON_COLOR:_mail_ui_vars.PRIMARY_BUTTON_ACTIVE_COLOR,FOLDER_ACTIVED_BACKGROUND_COLOR:(0,_color.rgba)(_mail_ui_vars.PRIMARY_BUTTON_ACTIVE_COLOR,.16),FOLDER_HOVERD_BACKGROUND_COLOR:(0,_color.rgba)(_mail_ui_vars.PRIMARY_BUTTON_ACTIVE_COLOR,.08),FOLDER_ACTIVED_BORDER:"2px solid "+_mail_ui_vars.PRIMARY_BUTTON_ACTIVE_COLOR},SUNRISE:{GRADIENT_COLOR_1:"#fbc13a",GRADIENT_COLOR_2:"#d4207d",HIGHLIGHT:"#ef8f4e",COMPOSE_BUTTON_COLOR:"#ef8f4e",FOLDER_ACTIVED_BACKGROUND_COLOR:(0,_color.rgba)("#ef8f4e",.16),FOLDER_HOVERD_BACKGROUND_COLOR:(0,_color.rgba)("#ef8f4e",.08),FOLDER_ACTIVED_BORDER:"2px solid #ef8f4e"},AQUA_GREEN:{GRADIENT_COLOR_1:"#a0b952",GRADIENT_COLOR_2:"#008f88",HIGHLIGHT:"#7aaf60",COMPOSE_BUTTON_COLOR:"#7aaf60",FOLDER_ACTIVED_BACKGROUND_COLOR:(0,_color.rgba)("#7aaf60",.16),FOLDER_HOVERD_BACKGROUND_COLOR:(0,_color.rgba)("#7aaf60",.08),FOLDER_ACTIVED_BORDER:"2px solid #7aaf60"},AQUA_BLUE:{GRADIENT_COLOR_1:"#26b0b1",GRADIENT_COLOR_2:"#0034a3",HIGHLIGHT:"#1d92ae",COMPOSE_BUTTON_COLOR:"#1d92ae",FOLDER_ACTIVED_BACKGROUND_COLOR:(0,_color.rgba)("#1d92ae",.16),FOLDER_HOVERD_BACKGROUND_COLOR:(0,_color.rgba)("#1d92ae",.08),FOLDER_ACTIVED_BORDER:"2px solid #1d92ae"},DEEP_PURPLE:{GRADIENT_COLOR_1:"#8d7da2",GRADIENT_COLOR_2:"#200f35",HIGHLIGHT:"#b08ae4",COMPOSE_BUTTON_COLOR:"#b08ae4",FOLDER_ACTIVED_BACKGROUND_COLOR:(0,_color.rgba)("#b08ae4",.16),FOLDER_HOVERD_BACKGROUND_COLOR:(0,_color.rgba)("#b08ae4",.08),FOLDER_ACTIVED_BORDER:"2px solid #b08ae4"},BLUE_NIGHT:{GRADIENT_COLOR_1:"#1c3e5c",GRADIENT_COLOR_2:"#1c3e5c",HIGHLIGHT:"#4faaff",COMPOSE_BUTTON_COLOR:"#4faaff",FOLDER_ACTIVED_BACKGROUND_COLOR:(0,_color.rgba)("#4faaff",.16),FOLDER_HOVERD_BACKGROUND_COLOR:(0,_color.rgba)("#4faaff",.08),FOLDER_ACTIVED_BORDER:"2px solid #4faaff"}},Themes=exports.Themes=(0,_object.mirrorKeys)(ThemingValues),ThemeModes=exports.ThemeModes=(0,_object.mirrorKeys)(["LIGHT","MEDIUM","DARK"]);
},{"../utils/color":"./platform/utils/color","../utils/mail_ui_vars":"./platform/utils/mail_ui_vars","../utils/object":"./platform/utils/object"}],312:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_mail_constants=require("../mail_constants"),_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_logger=require("./logger"),_logger2=_interopRequireDefault(_logger),PROXY_API_ROUTE_BASE_ENDPOINT=_mail_constants.YCPI_PATH_PREFIX+"/udb",TIMEOUT=1e4,UDB_WRITE="udb.write",UDB_READ="udb.read",UDBClient=function(){function t(e){_classCallCheck(this,t),this.crumb=e.crumb,this.httpRetry=e.httpRetry,this.requestQueue=e.requestQueue}return t.prototype._sendRequest=function(t,e){(0,_invariant2.default)("read"===t||"write"===t);var r="write"===t?_http_transport.HTTP_METHODS.POST:_http_transport.HTTP_METHODS.GET,n=PROXY_API_ROUTE_BASE_ENDPOINT+("?crumb="+this.crumb),i=new _http_transport2.default(r,n,{timeout:TIMEOUT,httpRetry:this.httpRetry}),u=_logger2.default.feature(_mail_constants.ApiClientLoggerNames.UDBClient,{apiName:t,crumb:this.crumb}),a=i.send(e);return a.then(u.logSuccessAndLatency,u.logFailure),a},t.prototype.read=function(){return this.requestQueue.add(this._sendRequest.bind(this,"read"),UDB_READ)},t.prototype.write=function(t){return this.requestQueue.add(this._sendRequest.bind(this,"write",t),UDB_WRITE)},t}();exports.default=UDBClient,module.exports=exports.default;
},{"../http_transport":"./platform/http_transport","../invariant":"./platform/invariant","../mail_constants":"./platform/mail_constants","./logger":313}],"./platform/udb_client/constants":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _UDBValues,_DEFAULT_VALUES,UDBKeys=exports.UDBKeys={REG:"reg",MAIL_ADFREE:"mail_adfree",YM_MAIL_CONV:"ym_mail_conv",YM_TZ:"ym_tz",YM_LAST_OBSERVED_TZ:"ym_last_observed_tz",YM_MAIL_TABS:"ym_mail_tabs",YM_MAIL3:"ym_mail3",YM_MAIL_SCOUT:"ym_mail_scout",YM_FE_CURRENT:"ym_fe_current",YM_FE_PREVIOUS:"ym_fe_previous",YM_FE_HISTORY:"ym_fe_history",YM_MAIL_SSA_ALERT:"ym_mail_ssa_alert",YM_MAIL_COMPROMISE:"ym_mail_compromise"},UDBValues=exports.UDBValues=(_UDBValues={},_UDBValues[UDBKeys.YM_FE_CURRENT]={STORM:"4",ODIN:"5",NORRIN:"6"},_UDBValues[UDBKeys.YM_MAIL_CONV]={ON:"1",OFF:"-1"},_UDBValues[UDBKeys.YM_MAIL_TABS]={OFF:"0",ON:"1"},_UDBValues),DEFAULT_VALUES=exports.DEFAULT_VALUES=(_DEFAULT_VALUES={},_DEFAULT_VALUES[UDBKeys.YM_MAIL_CONV]=UDBValues[UDBKeys.YM_MAIL_CONV].ON,_DEFAULT_VALUES[UDBKeys.YM_MAIL_TABS]=UDBValues[UDBKeys.YM_MAIL_TABS].OFF,_DEFAULT_VALUES);
},{}],313:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger);exports.default=_norrinLogger2.default.create("norrin/udb_client"),module.exports=exports.default;
},{"norrin-logger":"./node_modules/norrin-logger/index.js"}],"./platform/utils/account":[function(require,module,exports){
"use strict";function flattenAccounts(t){return[t].concat(t.secondaryAccounts||[])}function isPartnerDomain(t){if(!t)return!1;if(_mail_constants.PARTNER_DOMAINS[t])return!0;var n=t.indexOf(".");return!(n<0)&&isPartnerDomain(t.substr(n+1))}function isYahooDomain(t){if(!t)return!1;var n=t.split(".");return n[0]===_mail_constants.EmailProviders.YAHOO&&(!(n.length>3)&&(n.length>2&&_mail_constants.YAHOO_COUNTRY_CODES[n[2]]?!!_mail_constants.TLD_VALUES[n[1]]:2===n.length&&!(!_mail_constants.TLD_VALUES[n[1]]&&!_mail_constants.YAHOO_COUNTRY_CODES[n[1]])))}function getYahooIdFromEmail(t){var n=t.toLowerCase().split("@"),e=n[0],o=n[1],r=e;if(isPartnerDomain(o))r=t;else{if(!isYahooDomain(o))return!1;"yahoo.cn"===o&&(r=t)}return!(r.length<4||r.length>32)&&!!r}function isValidDomain(t,n){var e=t.domainCheck,o=!1;if(e&&e.length>0){var r="(@"+e.join(".com$|@")+".com$)",i=new RegExp(r,"i");if(o=i.test(n),!o){var a="(@"+e.join("|@")+")\\.",s=new RegExp(a,"i");o=s.test(n)}}return o}function getProvider(t){return t?getYahooIdFromEmail(t)?_mail_constants.EmailProviders.YAHOO:_mail_constants.SUPPORTED_PROVIDERS.find(function(n){return isValidDomain(_mail_constants.IMAP_SETTINGS[n],t)}):null}function getProviderFromAccount(t){var n=t.email;return getProvider(n)}function filterSendingAccounts(t){var n=[_mail_constants2.AccountTypes.SENDAS,_mail_constants2.AccountTypes.POPIN,_mail_constants2.AccountTypes.IMAPIN];return t.filter(function(t){var e=t.isPrimary,o=t.type,r=t.accountVerified,i=t.status;return e||o===_mail_constants2.AccountTypes.ALIAS||o===_mail_constants2.AccountTypes.DEA||"ENABLED"===i&&r&&n.indexOf(o)>-1})}function getAccountProvider(t){if(t.serverUri){var n=t.serverUri.split("://")[1].split(".")[0];return"gmail"===n?"google":n}return"Your mailbox"}function getProviderName(t){return t.charAt(0).toUpperCase()+t.slice(1)}function checkSyncingState(t){var n=t.status,e=t.type,o=t.createTime,r=t.syncTime,i=void 0===r?20:r,a=Date.now();return n===_mail_constants.AccountStatus.ENABLED&&e===_mail_constants2.AccountTypes.IMAPIN&&a/1e3-o<60*i}exports.__esModule=!0,exports.flattenAccounts=flattenAccounts,exports.isPartnerDomain=isPartnerDomain,exports.isYahooDomain=isYahooDomain,exports.getYahooIdFromEmail=getYahooIdFromEmail,exports.isValidDomain=isValidDomain,exports.getProvider=getProvider,exports.getProviderFromAccount=getProviderFromAccount,exports.filterSendingAccounts=filterSendingAccounts,exports.getAccountProvider=getAccountProvider,exports.getProviderName=getProviderName,exports.checkSyncingState=checkSyncingState;var _mail_constants=require("../../platform/mail_constants"),_mail_constants2=require("../mail_constants");
},{"../../platform/mail_constants":"./platform/mail_constants","../mail_constants":"./platform/mail_constants"}],"./platform/utils/action":[function(require,module,exports){
"use strict";exports.__esModule=!0;var getUIContextFromAction=exports.getUIContextFromAction=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.uiContext,e=void 0===o?{}:o;return e};
},{}],"./platform/utils/api_logger":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function isYDOD(e,r,t){return 429===e||999===e||"BaseClient.RequestBlocked"===t||"EC-4017"===r||"EC-4018"===r}function isUDBError(e,r){return e===_mail_constants.ApiClientLoggerNames.UDBClient&&[400,401,403,404,503].indexOf(r)>-1}function isSearchError(e,r){return e===_mail_constants.ApiClientLoggerNames.BootcampClient&&r>=500}function isLaunchError(e){return 0===e.indexOf("launch.")}function isComposeError(e){return["messages.save","messageGroups.saveAndSend","messageGroups.saveRawMessage","messageGroups.send"].indexOf(e)>-1}function isMessageReadError(e){return["messages.getBodies","messageGroups.getList"].indexOf(e)>-1}function isHTTPTransportError(e){return 0===e.indexOf("HttpTransport.")}function getTAEbyErrorCode(e){var r=void 0;switch(e){case"ET-5003":r=1;break;case"ET-5004":r=4;break;case"ET-5005":case"ET-5008":case"ET-5009":case"ET-5010":case"ET-5011":r=2;break;default:r=14}return r}function getTAE(e,r,t){var a=t.apiName,o=t.statusCode,s=t.errorCode;return isYDOD(o,s,r.name)?19:isUDBError(e,o)?1:isSearchError(e,o)?20:a&&isLaunchError(a)?15:!s&&isHTTPTransportError(r.name)?18:isMessageReadError(a)?4:isComposeError(a)?13:getTAEbyErrorCode(s)}function logRapidTAE(e,r,t){if((0,_generic.isBrowser)()){var a=r||t||"",o=_rapid_client2.default.getRapidInstance();o&&o.beaconEvent(0,{etrg:"error",taeCode:e,errCode:a},"norrin_tae")}}function apiErrorLogger(e,r,t,a){var o={};if(LOG_TAE_CLIENTS[r]){var s=a.statusCode,i=a.errorCode,n=a.extraStatusCode,c=a.extraErrorCode;s&&(o.statusCode=s),i&&(o.errorCode=i),n&&(o.extraStatusCode=n),c&&(o.extraErrorCode=c);var u=getTAE(r,a,Object.assign({},t,o));o.tae=u,logRapidTAE(u,i,s)}var g=e.feature(r,Object.assign({},t,o));g.logFailure(a)}exports.__esModule=!0,exports.getTAE=getTAE,exports.logRapidTAE=logRapidTAE,exports.apiErrorLogger=apiErrorLogger;var _generic=require("./generic"),_object=require("./object"),_mail_constants=require("../mail_constants"),_rapid_client=require("../rapid_client"),_rapid_client2=_interopRequireDefault(_rapid_client),LOG_TAE_CLIENTS=(0,_object.mirrorKeys)([_mail_constants.ApiClientLoggerNames.BootcampClient,_mail_constants.ApiClientLoggerNames.MailAPIClient,_mail_constants.ApiClientLoggerNames.UDBClient,_mail_constants.ApiClientLoggerNames.XobniClient]);
},{"../mail_constants":"./platform/mail_constants","../rapid_client":"./platform/rapid_client","./generic":"./platform/utils/generic","./object":"./platform/utils/object"}],"./platform/utils/array":[function(require,module,exports){
"use strict";function findLastIndex(e,r){for(var n=e.length;n;n--)if(r(e[n-1]))return n-1;return-1}function range(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Array(e);e--;)n[e]=e+r;return n}function append(e){for(var r=arguments.length,n=Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];return e.concat(n)}function remove(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r===-1?e:e.slice(0,r).concat(e.slice(r+n))}exports.__esModule=!0,exports.findLastIndex=findLastIndex,exports.range=range,exports.append=append,exports.remove=remove;
},{}],"./platform/utils/attachments":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function extractAttachmentFromFile(e){var t=e.type.split("/"),s=t[0],i=t[1];return{downloadUrl:e.downloadLink||URL.createObjectURL(e),filename:e.name,mimeType:e.type,size:e.size,type:s,subtype:i,contentId:generateContentId(),dataId:generateContentId()}}function getAttachmentsForTray(e){return e.filter(function(e){var t=e.type,s=e.disposition;return t===Types.MESSAGE||s===Dispositions.ATTACHMENT})}function getAttachmentsForMessageListPreview(e,t){return e.filter(function(e){var s=e.type,i=e.disposition,n=e.size;return i!==Dispositions.INLINE||s!==Types.IMAGE||n>=t})}function getBestAttachmentIconKind(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map(function(e){switch(getAttachmentType(e.type,e.subtype)){case SimplifiedTypes.CAL:return _fuji_icon.Kinds.ATTACH_CAL;case SimplifiedTypes.IMAGE:return _fuji_icon.Kinds.ATTACH_IMAGE;case SimplifiedTypes.DOC:case SimplifiedTypes.PDF:case SimplifiedTypes.XLS:case SimplifiedTypes.PPT:case SimplifiedTypes.CSV:case SimplifiedTypes.TEXT:return _fuji_icon.Kinds.ATTACH_DOC;default:return _fuji_icon.Kinds.ATTACHMENT}});return 1===(0,_uniq2.default)(t).length?t[0]:_fuji_icon.Kinds.ATTACHMENT}function getAttachmentType(e,t){switch(e){case Types.IMAGE:switch(t){case SubTypes.TIFF:return SimplifiedTypes.TIFF;default:return SimplifiedTypes.IMAGE}case Types.AUDIO:return SimplifiedTypes.AUDIO;case Types.VIDEO:return SimplifiedTypes.VIDEO;case Types.APPLICATION:switch(t){case SubTypes.ACROBAT:case SubTypes.PDF:case SubTypes.VND_PDF:case SubTypes.X_PDF:return SimplifiedTypes.PDF;case SubTypes.GZIP:case SubTypes.TAR:case SubTypes.X_COMPRESSED:case SubTypes.X_ZIP:case SubTypes.ZIP:return SimplifiedTypes.COMPRESSED;case SubTypes.EXCEL:case SubTypes.GXLS:case SubTypes.MSEXCEL:case SubTypes.X_EXCEL:case SubTypes.X_MS_EXCEL:case SubTypes.XLS_M:case SubTypes.X_XLS:case SubTypes.XLS:case SubTypes.XLS_M_TEMPLATE:case SubTypes.XLS_TEMPLATE:case SubTypes.XLSX:return SimplifiedTypes.XLS;case SubTypes.DOC:case SubTypes.DOCX:case SubTypes.DOT:case SubTypes.FRAMEMAKER:case SubTypes.GDOCX:case SubTypes.MS_WORD:case SubTypes.MSTNEF:case SubTypes.RICHTEXT:case SubTypes.SC2:case SubTypes.VND_MS_WORD:case SubTypes.VND_MSWORD:case SubTypes.WINWORD:case SubTypes.WORD:case SubTypes.X_DOT:case SubTypes.X_FM:case SubTypes.X_FRAMEMAKER:case SubTypes.X_MAKER:case SubTypes.X_MS_WORD:case SubTypes.X_MSW6:case SubTypes.X_RTF:case SubTypes.X_SOFFICE:case SubTypes.ZZ_DOT:return SimplifiedTypes.DOC;case SubTypes.PPT:case SubTypes.PPTX:case SubTypes.GPPT:case SubTypes.PPTX_SLIDESHOW:case SubTypes.PPTX_TEMPLATE:return SimplifiedTypes.PPT;case SubTypes.ICS:return SimplifiedTypes.CAL;default:return SimplifiedTypes.APPLICATION}case Types.TEXT:switch(t){case SubTypes.CALENDAR:return SimplifiedTypes.CAL;case SubTypes.CSV:return SimplifiedTypes.CSV;default:return SimplifiedTypes.TEXT}default:return SimplifiedTypes.FILE}}function transformAttachments(e,t){var s=e.id;return t.map(function(e){return Object.assign({messageReference:{id:s,pid:e.partId}},e)})}function getPageRangeForDocument(e,t,s){(0,_invariant2.default)(e<=t,"You cannot have a page number greater than the last page of the document.");var i=e%s||s,n=e-i+1,a=n+(s-1);return a>t&&(a=t),{startPage:n,endPage:a}}function isPreviewable(e){var t=getAttachmentType(e.type,e.subtype);return!e.isExternal&&_mail_constants.AttachmentPreview.PreviewableTypes.indexOf(t)>-1}function getThumbnailUrl(e,t){return e?(e=e.replace(MATCH_FIRST_PARAM,"?").replace(MATCH_OTHER_PARAMS,""),e+"&size="+t+"w&w="+t+"&h="+t):""}exports.__esModule=!0,exports.generateContentId=void 0,exports.extractAttachmentFromFile=extractAttachmentFromFile,exports.getAttachmentsForTray=getAttachmentsForTray,exports.getAttachmentsForMessageListPreview=getAttachmentsForMessageListPreview,exports.getBestAttachmentIconKind=getBestAttachmentIconKind,exports.getAttachmentType=getAttachmentType,exports.transformAttachments=transformAttachments,exports.getPageRangeForDocument=getPageRangeForDocument,exports.isPreviewable=isPreviewable,exports.getThumbnailUrl=getThumbnailUrl;var _mail_constants=require("../mail_constants"),_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_uniq=require("lodash/uniq"),_uniq2=_interopRequireDefault(_uniq),_fuji_icon=require("../../atoms/constants/fuji_icon"),Types=_mail_constants.Attachments.Types,SubTypes=_mail_constants.Attachments.SubTypes,Dispositions=_mail_constants.Attachments.Dispositions,SimplifiedTypes=_mail_constants.Attachments.SimplifiedTypes,MATCH_FIRST_PARAM=/\?(size|h|w)=([^&]*)/g,MATCH_OTHER_PARAMS=/&(size|h|w)=([^&]*)/g,generateContentId=exports.generateContentId=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return"<"+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()+"@yahoo.com>"}}();
},{"../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../invariant":"./platform/invariant","../mail_constants":"./platform/mail_constants","lodash/uniq":"./node_modules/lodash/uniq.js"}],"./platform/utils/beacon":[function(require,module,exports){
"use strict";function sendBeacon(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return"";var r=new Image;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+encodeURIComponent((new Date).getTime())),r.src=e,r.src}function sendIframeBeacon(e){if(!e)return"";var n=document.createElement("iframe");n.src=e,n.width="1px",n.height="1px",n.style.display="none",document.body.appendChild(n)}exports.__esModule=!0,exports.sendBeacon=sendBeacon,exports.sendIframeBeacon=sendIframeBeacon;
},{}],"./platform/utils/binstring":[function(require,module,exports){
"use strict";var _suffix,BYTE=1,KILOBYTE=1024,MEGABYTE=1048576,GIGABYTE=1073741824,suffix=(_suffix={},_suffix[BYTE]="B",_suffix[KILOBYTE]="kB",_suffix[MEGABYTE]="MB",_suffix[GIGABYTE]="GB",_suffix);module.exports={toNBits:function(n,t){return n.length>t?n.substr(0,t):n.length<t?new Array(t-n.length+1).join("0")+n:n},binToHex:function(n){var t,r,e,f=n.length,i="";for(t=0;t<f;t+=4)e=n.substr(t,4),e=e+=new Array(1+(4-e.length)).join("0"),r=parseInt(e,2),i+=r.toString(16);return i},hexToBin:function(n){var t,r,e=n.length,f="";for(t=0;t<e;t++)r=parseInt(n[t],16).toString(2),r=new Array(1+(4-r.length)).join("0")+r,f+=r;return f},prettyPrintBytes:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("number"!=typeof n||n<=0)return"";var r=[GIGABYTE,MEGABYTE,KILOBYTE,BYTE].find(function(t){return n>=t}),e=Math.pow(10,t),f=Math.round(n/r*e)/e;return""+f+suffix[r]}};
},{}],"./platform/utils/cards":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function makeCards(e,a){var s=e.map(function(e){return{message:e,cardId:e.id}}),r=[];a.filter(function(e){var a=e.draftStatus;return a!==DraftStatus.SENT}).forEach(function(e){var a=(0,_array.findLastIndex)(s,function(a){return a.message.csid===e.csid});if(a!==-1){if(s[a].message.folder.types.indexOf(_mail_constants.FolderTypes.DRAFT)===-1)return void _logger2.default.error("The message with csid "+e.csid+" is kept in the message cards because its folder types are "+s[a].message.folder.types);s.splice(a,1),r.push({composeData:e,cardId:e.csid})}else r.push({composeData:e,cardId:e.csid})});var t=s;return r.forEach(function(e){var a=(0,_array.findLastIndex)(t,function(a){return!!a.message&&(e.composeData.inReplyTo&&a.message.headers.messageIdRfc822===e.composeData.inReplyTo.messageIdRfc822)});a===-1?t.push(e):t.splice(a+1,0,e)}),t.filter(function(e){var a=e.message;return Boolean(a)}).forEach(function(e,a,s){e.idx=a,e.total=s.length}),logDuplicateCsidsInCards(t,_logger2.default),t}function allCardsExpanded(e,a){return e.length>1&&(e=e.slice(0,e.length-1)),e.every(function(e){var s=e.cardId;return a[s]===_mail_constants.CARD_EXPANSION_STATES.EXPANDED})}function logDuplicateCsidsInCards(e,a){e.reduce(function(e,s){var r=void 0,t=void 0;return s.composeData&&(r=s.composeData.csid,t={type:"compose",folderId:s.composeData.folderId}),s.message&&(r=s.message.csid,t={type:"message",folderId:s.message.folder.id},!r)?e:(e.hasOwnProperty(r)?a.error("Duplicate csid "+r+" in message group found!  Here are the different values: "+(JSON.stringify(e[r])+", "+JSON.stringify(t))):e[r]=t,e)},{})}exports.__esModule=!0,exports.makeCards=makeCards,exports.allCardsExpanded=allCardsExpanded,exports.logDuplicateCsidsInCards=logDuplicateCsidsInCards;var _mail_constants=require("../mail_constants"),_array=require("./array"),_logger=require("../logger"),_logger2=_interopRequireDefault(_logger),DraftStatus=_mail_constants.Draft.Status;
},{"../logger":"./platform/logger","../mail_constants":"./platform/mail_constants","./array":"./platform/utils/array"}],"./platform/utils/color":[function(require,module,exports){
"use strict";function rgba(r,e){var t=0,n=[0,0,0,e];if(4!==r.length&&7!==r.length)throw new Error('The hex string has have length of 4 or 7 including the "#". We got: '+r);for(4===r.length&&(r="#"+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]),t=0;t<3;t++)n[t]=parseInt(r.slice(2*t+1,2*t+3),16);return"rgba("+n.join(", ")+")"}module.exports={rgba:rgba};
},{}],314:[function(require,module,exports){
"use strict";function getCookiePart(e,r){var o="",t=e.split("&");return t.forEach(function(e){var t=e.split("="),i=t[0],n=t[1];i===r&&(o=n)}),o}function getCookieField(e,r){var o=(0,_cookie.parse)(e);return o[r]||""}function cookieGetPart(e,r,o){var t=getCookieField(e,r);if(t){var i=getCookiePart(t,o);if(i)return i}return""}function getCurrentLoginName(e){return cookieGetPart(e,"Y","l")}function isSameUser(){if((0,_generic.isBrowser)()){var e=window.AppBootstrapData.yl,r=getCurrentLoginName(document.cookie);return e===r}return!0}exports.__esModule=!0,exports.isSameUser=isSameUser;var _generic=require("./generic"),_cookie=require("cookie");
},{"./generic":"./platform/utils/generic","cookie":"./node_modules/cookie/index.js"}],"./platform/utils/date":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function formatDate(e,t,r){return getDateFormat(t,r).format(e)}function _getTimezoneOffset(e,t){var r=formatDate(e,"en-US",{timeZone:t,hour12:!1,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}).replace(nonNumberAndDelimiters,"").split(delimiters),a=parseInt(r[2],10),n=r[0]-1,o=r[1],i=r[3],D=r[4],s=r[5],f=Date.UTC(a,n,o,i,D,s),u=new Date(e).setMilliseconds(0);return(f-u)/6e4}function memoizeGetTimezoneOffset(e,t){var r=new _lruCache2.default({max:t});return function(t,a){t instanceof Date||(t=new Date(t));var n=t.getTime()+"-"+a,o=r.get(n);return void 0===o&&(o=e(t,a),r.set(n,o)),o}}function timeShiftToUTC(e,t){var r=t.timezone,a=0;return e instanceof Date&&(e=e.getTime()),void 0!==r&&(a=getTimezoneOffset(e,r)),new Date(e+6e4*a)}function getStartOfToday(e){var t=e.timezone,r=e.offset,a=Date.now();void 0!==t&&(r=getTimezoneOffset(a,t));var n=new Date(a+6e4*r),o=n.getUTCDate(),i=n.getUTCMonth(),D=n.getUTCFullYear(),s=Date.UTC(D,i,o);return void 0!==t?(r=getTimezoneOffset(s,t),s-6e4*r):s}function getCurrentDate(){return new Date}function convertUnixTimestamp(e){return e?new Date(1e3*e):getCurrentDate()}function getEndOfDay(e){return getStartOfDay(e)+(SECONDS_IN_A_DAY-1)}function getStartOfDay(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor(+t/1e3)}function dateObjectsAreOnSameDay(e,t){return!(!isValidDate(e)||!isValidDate(t))&&(e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate())}function isToday(e){if(!(e instanceof Date))throw new Error("Expected date to be an instance of Date");return dateObjectsAreOnSameDay(new Date,e)}function isCurrentYear(e){var t=(new Date).getFullYear();if(!(e instanceof Date))throw new Error("Expected date to be an instance of Date");return e.getFullYear()===t}function isDate(e){return"[object Date]"===Object.prototype.toString.call(e)}function isValidDate(e){return isDate(e)&&!isNaN(e.getTime())}function cloneDate(e){if(!isValidDate(e))throw new Error("Expected date to be an instance of Date");return new Date(e.valueOf())}function getFirstDayofWeek(e){var t=cloneDate(e);return t.setDate(t.getDate()-t.getDay()),t}function isWeekend(e){var t=e.getDay();return 0===t||6===t}function getAllDaysInAWeek(e){for(var t=getFirstDayofWeek(e),r=[t],a=1;a<=6;a++){var n=cloneDate(t);n.setDate(n.getDate()+a),r.push(n)}return r}function getAllWeeksInAMonth(e){var t=cloneDate(e);t.setDate(1);var r=t.getMonth(),a=getFirstDayofWeek(t),n=cloneDate(a),o=[cloneDate(n)];for(n.setDate(n.getDate()+7);n.getMonth()===r;)o.push(cloneDate(n)),n.setDate(n.getDate()+7);return o}function getDateDifference(e,t){var r=new Date(t).getTime()-new Date(e).getTime();return Math.ceil(r/MILLI_SECONDS_IN_A_DAY)}exports.__esModule=!0,exports.getTimezoneOffset=exports.delimiters=exports.nonNumberAndDelimiters=exports.SECONDS_IN_A_DAY=void 0,exports.formatDate=formatDate,exports.timeShiftToUTC=timeShiftToUTC,exports.getStartOfToday=getStartOfToday,exports.getCurrentDate=getCurrentDate,exports.convertUnixTimestamp=convertUnixTimestamp,exports.getEndOfDay=getEndOfDay,exports.getStartOfDay=getStartOfDay,exports.dateObjectsAreOnSameDay=dateObjectsAreOnSameDay,exports.isToday=isToday,exports.isCurrentYear=isCurrentYear,exports.isDate=isDate,exports.isValidDate=isValidDate,exports.cloneDate=cloneDate,exports.getFirstDayofWeek=getFirstDayofWeek,exports.isWeekend=isWeekend,exports.getAllDaysInAWeek=getAllDaysInAWeek,exports.getAllWeeksInAMonth=getAllWeeksInAMonth,exports.getDateDifference=getDateDifference;var _intlFormatCache=require("intl-format-cache"),_intlFormatCache2=_interopRequireDefault(_intlFormatCache),_lruCache=require("lru-cache"),_lruCache2=_interopRequireDefault(_lruCache),getDateFormat=(0,_intlFormatCache2.default)(Intl.DateTimeFormat),SECONDS_IN_A_DAY=exports.SECONDS_IN_A_DAY=86400,nonNumberAndDelimiters=exports.nonNumberAndDelimiters=/[^0-9\/\ :]/g,delimiters=exports.delimiters=/[\/\s:]/,getTimezoneOffset=exports.getTimezoneOffset=memoizeGetTimezoneOffset(_getTimezoneOffset,1e3),MILLI_SECONDS_IN_A_DAY=1e3*SECONDS_IN_A_DAY;
},{"intl-format-cache":"./node_modules/intl-format-cache/index.js","lru-cache":"./node_modules/lru-cache/lib/lru-cache.js"}],"./platform/utils/dom":[function(require,module,exports){
"use strict";function getWinSize(e){var t=e?e.ownerDocument:document,n=t.defaultView||t.parentWindow,i=t[COMPAT_MODE],o=t[DOCUMENT_ELEMENT],r=n.innerHeight,c=n.innerWidth;return i&&("CSS1Compat"!==i&&(o=t.body),r=o.clientHeight,c=o.clientWidth),{height:r,width:c}}function findFocusableAncestor(e){for(;e=e.parentElement;)if(e.focus(),e===document.activeElement)return e}exports.__esModule=!0,exports.getWinSize=getWinSize,exports.findFocusableAncestor=findFocusableAncestor;var DOCUMENT_ELEMENT="documentElement",COMPAT_MODE="compatMode";
},{}],"./platform/utils/folder":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function categorizeFolders(e){return{systemFolders:getSystemFoldersForDisplay(e),customFolders:getCustomFoldersForDisplay(e)}}function getFolderMessageCount(e){var r=void 0;switch(getPrimaryFolderType(e)){case _mail_constants.FolderTypes.SENT:case _mail_constants.FolderTypes.BULK:case _mail_constants.FolderTypes.ARCHIVE:case _mail_constants.FolderTypes.TRASH:return 0;case _mail_constants.FolderTypes.DRAFT:return e.total;default:return r=e.unread<0?0:e.unread}}function getFolderMenuItems(e){switch(getPrimaryFolderType(e)){case _mail_constants.FolderTypes.INBOX:return[_mail_constants.FolderMenuItems.MARK_READ,_mail_constants.FolderMenuItems.ARCHIVE];case _mail_constants.FolderTypes.DRAFT:case _mail_constants.FolderTypes.SENT:case _mail_constants.FolderTypes.ARCHIVE:return[_mail_constants.FolderMenuItems.MARK_READ];case _mail_constants.FolderTypes.BULK:case _mail_constants.FolderTypes.TRASH:return[_mail_constants.FolderMenuItems.MARK_READ,_mail_constants.FolderMenuItems.DELETE];default:return[_mail_constants.FolderMenuItems.MARK_READ,_mail_constants.FolderMenuItems.ARCHIVE,_mail_constants.FolderMenuItems.DELETE,_mail_constants.FolderMenuItems.SEPARATOR,_mail_constants.FolderMenuItems.RENAME_FOLDER,_mail_constants.FolderMenuItems.DELETE_FOLDER,_mail_constants.FolderMenuItems.CREATE_FOLDER]}}function getSystemFoldersForDisplay(e){for(var r=(0,_cloneDeep2.default)(e.filter(function(e){return e.folder.isSystem&&SystemFolderTypes.hasOwnProperty(getPrimaryFolderType(e.folder))}).slice(0).sort(function(e,r){return FolderOrder[getPrimaryFolderType(e.folder)]-FolderOrder[getPrimaryFolderType(r.folder)]})),t=0;t<r.length;t++)r[t].children=[];return r}function getPrimaryFoldersAndSmartViewsForDisplay(e,r){var t=(0,_cloneDeep2.default)(e.filter(function(e){return e.folder.isSystem&&SystemFolderTypes.hasOwnProperty(getPrimaryFolderType(e.folder))}).slice(0));t=t.concat(getSystemSmartViewFolderNodes()),t.sort(function(e,r){return FolderOrder[getPrimaryFolderType(e.folder)]-FolderOrder[getPrimaryFolderType(r.folder)]});for(var o=0;o<t.length;o++)r[t[o].folder.types[0]]&&(t[o].folder.total=r[t[o].folder.types[0]]),t[o].children=[];return t}function getCustomFoldersForDisplay(e){return sortCustomFolders((0,_cloneDeep2.default)(e.filter(function(e){var r=e.folder;return r.types.indexOf(_mail_constants.FolderTypes.INVISIBLE)===-1&&!(r.isSystem&&!e.children.length)})))}function getSmartViewsForDisplay(){return Object.keys(smartViews).map(function(e){return createSmartViewFolderNode(e)})}function getSystemSmartViewFolderNodes(){return Object.keys(SystemFolderSmartViews).map(function(e){return createSmartViewFolderNode(e)})}function createSmartViewFolderNode(e){var r={folder:{name:e,id:e,types:[e],isSmartView:!0,isSystem:!1,unread:0,total:0},children:[]};return r}function customFolderCompare(e,r){var t=e.folder.name,o=r.folder.name,s=t.toLocaleLowerCase().localeCompare(o.toLocaleLowerCase());return s?s:t.localeCompare(o)||t.length-o.length}function sortCustomFolders(e){return e.sort(customFolderCompare),e.forEach(function(e){sortCustomFolders(e.children)}),e}function getPrimaryFolderType(e){return e.types.find(function(e){return primaryFoldersAndSmartViews.hasOwnProperty(e)})}function getI13nFolderType(e){var r=getPrimaryFolderType(e);if(r&&I13N_FOLDER_TYPES[r])return I13N_FOLDER_TYPES[r]}function getDefaultFolder(e,r){var t=e.find(function(e){return e.isSelected===!0});return r.find(function(e){return getPrimaryFolderType(e.folder)===_mail_constants.FolderTypes.INBOX&&e.folder.accountId===t.id}).folder}function getFolderDisplayType(e){var r=getPrimaryFolderType(e);return r===_mail_constants.FolderTypes.ARCHIVE&&e.types.indexOf(_mail_constants.FolderTypes.EXTERNAL_ALL)>-1?"ALL_MAIL":r}function getFolderPathParts(e,r){var t=_getFolderPieces(e.name),o="",s="",n=[],l=!1;return e.accountId!==DEFAULT_ACCOUNT_ID&&e.uidNext&&e.name.match(/\//)&&(o=t.shift(),o+=t.shift()),t.forEach(function(t){o+=t,l?l=!1:(s+=t,r.hasOwnProperty(o)&&r[o].accountId===e.accountId&&(n.push(s),s="",l=!0))}),n}function _getFolderPieces(e){var r=void 0,t=void 0,o="",s=[];for(r=0;r<e.length;r++)t=e.charAt(r),t===DELIMITER?(""!==o&&s.push(o),s.push(DELIMITER),o=""):o+=t;return""!==o&&s.push(o),s}function insertIntoFolderTree(e,r,t,o){var s=(0,_cloneDeep2.default)(r);if((0,_invariant2.default)(t.length>0,"folderPathParts must be populated for insert into folder tree to work."),o===t.length-1)s.name=t[o],e.push({folder:Object.assign({},s,{level:o}),children:[]});else{var n=t[o];e.forEach(function(e){e.folder.name===n&&e.folder.accountId===s.accountId&&insertIntoFolderTree(e.children,s,t,o+1)})}}function hasChildren(e,r){var t=_findNodeById(e,r);return!!t&&t.children.length>0}function _findNodeById(e,r){for(var t=null,o=0;o<r.length;o++){var s=r[o],n=s.folder;if(n.id===e){t=s;break}!t&&s.children.length>0&&(t=_findNodeById(e,s.children))}return t}function buildFolderPath(e,r){for(var t="",o=0;o<r.length;o++){var s=r[o],n=s.folder;if(n.id===e)return n.name;if(s.children.length>0&&(t=buildFolderPath(e,s.children)),t)return n.name+DELIMITER+t}return t}function getFolderName(e,r,t){var o=[];return r.isPrimary||o.push(r.folderPrefix),t&&o.push(t),o.push(e),o.join("/")}function flattenFolderTree(e){for(var r={},t=0;t<e.length;t++){var o=e[t],s=o.folder;r[s.id]=s,o.children.length>0&&Object.assign(r,flattenFolderTree(o.children))}return r}function hasFolderTreeChanged(e,r){if(e.length!==r.length)return!0;var t=flattenFolderTree(e),o=flattenFolderTree(r),s=Object.keys(o);return s.length!==Object.keys(t).length||s.some(function(e){return!t[e]||o[e].name!==t[e].name})}function groupFoldersByName(e){var r=flattenFolderTree(e);return Object.keys(r).reduce(function(e,t){var o=r[t],s=o.name;return e[s]=(e[s]||[]).concat(o),e},{})}function filterFoldersByNames(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return r.reduce(function(r,t){return r.concat(e[t]||[])},[])}function canArchiveFrom(e){return e!==_mail_constants.FolderTypes.BULK&&e!==_mail_constants.FolderTypes.DRAFT&&e!==_mail_constants.FolderTypes.ARCHIVE}function canRestoreFrom(e){return e===_mail_constants.FolderTypes.ARCHIVE}function getFolderList(e,r){var t=e.folder,o=e.children,s=r?r+"/"+t.name:t.name,n=[s];return o.length?n.concat.apply(n,o.map(function(e){return getFolderList(e,s)})):n}function getAllFolders(e){if(!e.length)return[];var r=getSystemFoldersForDisplay(e).concat(getCustomFoldersForDisplay(e));return r.reduce(function(e,r){return e.concat(getFolderList(r))},[])}function isPermDeleteFolderType(e){return e===_mail_constants.FolderTypes.TRASH||e===_mail_constants.FolderTypes.DRAFT||e===_mail_constants.FolderTypes.BULK}function getFolderById(e,r){var t=_findNodeById(r,e);return t&&t.folder}exports.__esModule=!0,exports.I13N_FOLDER_TYPES=exports.primaryFoldersAndSmartViews=exports.SystemFolderSmartViews=exports.smartViews=void 0;var _I13N_FOLDER_TYPES,_extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};exports.categorizeFolders=categorizeFolders,exports.getFolderMessageCount=getFolderMessageCount,exports.getFolderMenuItems=getFolderMenuItems,exports.getSystemFoldersForDisplay=getSystemFoldersForDisplay,exports.getPrimaryFoldersAndSmartViewsForDisplay=getPrimaryFoldersAndSmartViewsForDisplay,exports.getCustomFoldersForDisplay=getCustomFoldersForDisplay,exports.getSmartViewsForDisplay=getSmartViewsForDisplay,exports.createSmartViewFolderNode=createSmartViewFolderNode,exports.getPrimaryFolderType=getPrimaryFolderType,exports.getI13nFolderType=getI13nFolderType,exports.getDefaultFolder=getDefaultFolder,exports.getFolderDisplayType=getFolderDisplayType,exports.getFolderPathParts=getFolderPathParts,exports._getFolderPieces=_getFolderPieces,exports.insertIntoFolderTree=insertIntoFolderTree,exports.hasChildren=hasChildren,exports.buildFolderPath=buildFolderPath,exports.getFolderName=getFolderName,exports.flattenFolderTree=flattenFolderTree,exports.hasFolderTreeChanged=hasFolderTreeChanged,exports.groupFoldersByName=groupFoldersByName,exports.filterFoldersByNames=filterFoldersByNames,exports.canArchiveFrom=canArchiveFrom,exports.canRestoreFrom=canRestoreFrom,exports.getAllFolders=getAllFolders,exports.isPermDeleteFolderType=isPermDeleteFolderType,exports.getFolderById=getFolderById;var _mail_constants=require("../mail_constants"),_object=require("./object"),_invariant=require("../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_cloneDeep=require("lodash/cloneDeep"),_cloneDeep2=_interopRequireDefault(_cloneDeep),SystemFolderTypes=(0,_object.mirrorKeys)([_mail_constants.FolderTypes.INBOX,_mail_constants.FolderTypes.DRAFT,_mail_constants.FolderTypes.SENT,_mail_constants.FolderTypes.ARCHIVE,_mail_constants.FolderTypes.TRASH,_mail_constants.FolderTypes.BULK]),smartViews=exports.smartViews=(0,_object.mirrorKeys)([_mail_constants.SmartViewTypes.PHOTOS,_mail_constants.SmartViewTypes.DOCUMENTS,_mail_constants.SmartViewTypes.TUTORIAL]),SystemFolderSmartViews=exports.SystemFolderSmartViews=(0,_object.mirrorKeys)([_mail_constants.SmartViewTypes.UNREAD,_mail_constants.SmartViewTypes.STARRED]),primaryFoldersAndSmartViews=exports.primaryFoldersAndSmartViews=_extends({},_mail_constants.PrimaryFolderTypes,(0,_object.mirrorKeys)([_mail_constants.SmartViewTypes.UNREAD,_mail_constants.SmartViewTypes.STARRED])),I13N_FOLDER_TYPES=exports.I13N_FOLDER_TYPES=(_I13N_FOLDER_TYPES={},_I13N_FOLDER_TYPES[_mail_constants.FolderTypes.INBOX]="inbx",_I13N_FOLDER_TYPES[_mail_constants.FolderTypes.SENT]="sent",_I13N_FOLDER_TYPES[_mail_constants.FolderTypes.DRAFT]="drft",_I13N_FOLDER_TYPES[_mail_constants.FolderTypes.TRASH]="trsh",_I13N_FOLDER_TYPES[_mail_constants.FolderTypes.BULK]="spm",_I13N_FOLDER_TYPES[_mail_constants.FolderTypes.ARCHIVE]="archve",_I13N_FOLDER_TYPES[_mail_constants.FolderTypes.USER]="usrFldr",_I13N_FOLDER_TYPES[_mail_constants.FolderTypes.CHATS]="cht",_I13N_FOLDER_TYPES.SEARCH_KEYWORD="keywSrp",_I13N_FOLDER_TYPES.SEARCH_PEOPLE="cntctSrp",_I13N_FOLDER_TYPES.SEARCH_SMARTVIEW="smrtSrp",_I13N_FOLDER_TYPES),DEFAULT_ACCOUNT_ID="1",DELIMITER="/",FolderOrder={};FolderOrder[_mail_constants.FolderTypes.INBOX]=0,FolderOrder[_mail_constants.SmartViewTypes.UNREAD]=1,FolderOrder[_mail_constants.SmartViewTypes.STARRED]=2,FolderOrder[_mail_constants.FolderTypes.DRAFT]=3,FolderOrder[_mail_constants.FolderTypes.SENT]=4,FolderOrder[_mail_constants.FolderTypes.ARCHIVE]=5,FolderOrder[_mail_constants.FolderTypes.BULK]=6,FolderOrder[_mail_constants.FolderTypes.TRASH]=7;
},{"../../platform/invariant":"./platform/invariant","../mail_constants":"./platform/mail_constants","./object":"./platform/utils/object","lodash/cloneDeep":"./node_modules/lodash/cloneDeep.js"}],"./platform/utils/generic":[function(require,module,exports){
"use strict";function isBrowser(){return"undefined"!=typeof window}function refreshInbox(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=window.location.port,o=window.location.protocol+"//"+window.location.hostname;t&&(o+=":"+t),o+=_mail_constants.YCPI_PATH_PREFIX,"ycorp"===e&&(o+="?.partner=ycorp"),window.location.replace(o)}function supportsSetDragImage(){return isBrowser()&&"function"==typeof(0,_object.getIn)(window,"DataTransfer.prototype.setDragImage")}function setEmptyDragImage(e,t){return supportsSetDragImage()&&(t||(t=document.createElement("img"),t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",document.body.appendChild(t)),e.setDragImage(t,0,0)),t}function doneWithDragImage(e){e&&document.body.removeChild(e)}exports.__esModule=!0,exports.isBrowser=isBrowser,exports.refreshInbox=refreshInbox,exports.supportsSetDragImage=supportsSetDragImage,exports.setEmptyDragImage=setEmptyDragImage,exports.doneWithDragImage=doneWithDragImage;var _mail_constants=require("../mail_constants"),_object=require("./object");
},{"../mail_constants":"./platform/mail_constants","./object":"./platform/utils/object"}],"./platform/utils":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function generateUID(){var t=(Date.now()+Math.floor(1e9*Math.random())).toString();return t.substr(t.length-10)}function destructEmailAddressParts(t){var e=t.lastIndexOf("@"),r=t.substr(0,e),a=t.substr(e+1);return{localPart:r,domainPart:a}}function validateLocalPart(t){return!(!EMAIL_REGEX.test(t)&&!EMAIL_QUOTE_REGEX.test(t))}function validateDomainPart(t){var e=t.split("."),r=e.length;if(r<2)return!1;for(var a=0;a<r;a++)if(!EMAIL_DOMAINCHARS_REGEX.test(e[a]))return!1;return!0}function isValidEmail(t){if(!t)return!1;if(WHITELISTED_EMAILS.indexOf(t)!==-1)return!0;var e=destructEmailAddressParts(t),r=e.localPart,a=e.domainPart;return!!validateLocalPart(r)&&!!validateDomainPart(a)}function isValidFolderName(t){return void 0!==t&&FOLDER_REGEX.test(t.trim())}function getInteractionFromEvent(t){return(0,_invariant2.default)(t,"event object is required"),t.key===_mail_constants.Keys.ENTER?_constants.INTERACTION_TYPES.nav:"keydown"===t.type?_constants.INTERACTION_TYPES.shortcut:_constants.INTERACTION_TYPES.click}function getAppContainerId(t){return(0,_object.getIn)(t||{},"container.id","app-container")}var _mail_constants=require("../mail_constants"),_constants=require("../rapid_client/constants"),_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_object=require("./object"),EMAIL_REGEX=/^(\\.|[A-Za-z0-9!#%&`_=\/$'*+?^{}|~.-])+$/,EMAIL_QUOTE_REGEX=/^"(\\"|[^"])+"$/,EMAIL_DOMAINCHARS_REGEX=/^[A-Za-z0-9\-]+$/,WHITELISTED_EMAILS=["sgproxy_test_10@localhost"],NOOP=function(){},FOLDER_REGEX=/^[^\\\/%]+$/;module.exports={object:require("./object"),generic:require("./generic"),binstring:require("./binstring"),message:require("./message"),folder:require("./folder"),date:require("./date"),list:require("./list"),destructEmailAddressParts:destructEmailAddressParts,generateUID:generateUID,validateLocalPart:validateLocalPart,validateDomainPart:validateDomainPart,getInteractionFromEvent:getInteractionFromEvent,isValidEmail:isValidEmail,isValidFolderName:isValidFolderName,getAppContainerId:getAppContainerId,NOOP:NOOP};
},{"../invariant":"./platform/invariant","../mail_constants":"./platform/mail_constants","../rapid_client/constants":"./platform/rapid_client/constants","./binstring":"./platform/utils/binstring","./date":"./platform/utils/date","./folder":"./platform/utils/folder","./generic":"./platform/utils/generic","./list":"./platform/utils/list","./message":"./platform/utils/message","./object":"./platform/utils/object"}],"./platform/utils/item":[function(require,module,exports){
"use strict";function getGroupIdFromItemId(t,e){return(0,_list.getListContentTypeFromListId)(e)===_mail_constants.ListContentTypes.MESSAGES?t:null}exports.__esModule=!0,exports.getGroupIdFromItemId=getGroupIdFromItemId;var _list=require("./list"),_mail_constants=require("../mail_constants");
},{"../mail_constants":"./platform/mail_constants","./list":"./platform/utils/list"}],"./platform/utils/list":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function normalizeListDescriptor(t){var e=t.name,r=void 0===e?"":e,s=t.referrer,i=void 0===s?"":s,o=t.keyword,a=void 0===o?"":o,n=t.excludefolders,d=void 0===n?[]:n,l=t.folders,c=void 0===l?[]:l,L=t.accountIds,F=void 0===L?[]:L,m=t.emailAddresses,_=void 0===m?[]:m,u=t.listContentType,g=void 0===u?_mail_constants.ListContentTypes.MESSAGES:u,I=t.listFilter,p=void 0===I?_mail_constants.ListFilters.WITH_KEYWORD:I,E=t.sortOrder,f=void 0===E?_mail_constants.SortOrder.DATE_DESC:E;return{name:r,referrer:i,keyword:a,folders:[].concat(c),accountIds:[].concat(F),emailAddresses:[].concat(_),excludefolders:[].concat(d),listContentType:g,listFilter:p,sortOrder:f}}function getListIdFromListDescriptor(t){return JSON.stringify(normalizeListDescriptor(t))}function getListDescriptorFromListId(t){return normalizeListDescriptor(JSON.parse(t))}function getListIdFromRoute(t){var e=t.params||{},r=e.query,s=e.fid,i=e.serializedListId,o={};if(i){o=_querystring2.default.parse(i)||{};var a=parseInt(i,10)?i:o.folders;a&&(o.folders=[a])}else if(r)o=_querystring2.default.parse(r);else if(s){o=_querystring2.default.parse(s);var n=o,d=n.folders,l=void 0===d?[s]:d;o.folders=l}return getListIdFromListDescriptor(o)}function getFolderIdFromListId(t){var e=getListDescriptorFromListId(t),r=e.folders;if(1===r.length)return r[0]}function getListIdFromFolderId(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_mail_constants.SortOrder.DATE_DESC;return getListIdFromListDescriptor({folders:[t],sortOrder:e})}function listIdContainsFolderId(t,e){var r=getListDescriptorFromListId(t);return r.folders.indexOf(e)!==-1}function getListMessageFlags(t){var e=getListDescriptorFromListId(t),r=e.keyword,s=void 0===r?"":r;return s.split(" ").filter(function(t){return t.trim().match(SEARCH_QUERY_MESSAGE_FLAGS_REGEX)})}function listIdHasMessageFlags(t){return getListMessageFlags(t).length>0}function listIdContainsMessageFlags(t,e){var r=getListMessageFlags(t),s=!0;return r.forEach(function(t){if(s)switch(t){case"is:unread":s=!e.read;break;case"is:read":s=!!e.read;break;case"is:starred":case"is:flagged":s=!!e.flagged}}),s}function getMetadataCacheKey(t){if(!t)return DEFAULT_MESSAGES_METADATA_CACHEKEY;var e=getListDescriptorFromListId(t),r=e.keyword;return r?t:DEFAULT_MESSAGES_METADATA_CACHEKEY}function getSearchAdKeywordFromListId(t){var e=getListDescriptorFromListId(t);return e.name||e.keyword||""}function getBootcampApiQueryParams(t){var e=getListDescriptorFromListId(t),r=getListContentTypeFromListId(t),s=_mail_constants.BootcampSRPExpandParams.MESSAGES,i=_mail_constants.BootcampSRPExpandParams.IMAGES,o=_mail_constants.BootcampSRPExpandParams.DOCUMENTS,a=_mail_constants.BootcampSRPExpandParams.PEOPLE,n=[s,i,o,a].join(",");if(isSmartViewSearch(t))switch(r){case _mail_constants.ListContentTypes.MESSAGES:n=s;break;case _mail_constants.ListContentTypes.IMAGES:case _mail_constants.ListContentTypes.DOCUMENTS:n=[i,o].join(",")}else if(!isPeopleSearch(t))switch(r){case _mail_constants.ListContentTypes.MESSAGES:n=[s,a].join(",");break;case _mail_constants.ListContentTypes.IMAGES:n=[i,a].join(",");break;case _mail_constants.ListContentTypes.DOCUMENTS:n=[o,a].join(",")}return Object.assign(e,{expand:n})}function getSortOrderFromListId(t){return getListDescriptorFromListId(t).sortOrder}function getListFilterFromListId(t){return getListDescriptorFromListId(t).listFilter}function getListContentTypeFromListId(t){return getListDescriptorFromListId(t).listContentType}function getReferrerFromListId(t){return getListDescriptorFromListId(t).referrer}function getKeywordFromListId(t){return getListDescriptorFromListId(t).keyword}function getFolderIdNamesFromListId(t){var e=getListDescriptorFromListId(t),r=e.folders,s=e.keyword,i=(0,_search_input_parser.getSearchInputTokens)(s),o=_search_input_parser.Tokens.FOLDERS,a=i[o]||[];return r.length?{folderIds:r,folderNames:[]}:{folderIds:[],folderNames:a}}function recreateListId(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return getListIdFromListDescriptor(Object.assign({},getListDescriptorFromListId(t),e))}function serializeListIdForRoute(t){var e=getListDescriptorFromListId(t),r=normalizeListDescriptor({}),s={},i=e.emailAddresses,o=void 0===i?[]:i,a=e.listFilter,n=void 0===a?_mail_constants.ListFilters.WITH_KEYWORD:a;return o.length>0&&n===_mail_constants.ListFilters.WITH_KEYWORD&&(e.listFilter=_mail_constants.ListFilters.FROM),Object.keys(e).filter(function(t){return Array.isArray(e[t])?e[t].length>0:e[t]&&e[t]!==r[t]}).map(function(t){s[t]=e[t]}),_querystring2.default.stringify(s)}function serializeListIdForFolderRoute(t){return serializeListIdForRoute(t).replace(FOLDERS_ONLY_ROUTE_REGEX,"$1")}function convertSearchQueryToListId(t){return getListIdFromListDescriptor(t)}function isPeopleSearch(t){var e=getListDescriptorFromListId(t),r=e.emailAddresses,s=void 0===r?[]:r;return s.length>0}function isSmartViewSearch(t){return getReferrerFromListId(t)===_mail_constants.ListReferrer.SMARTVIEW}function getEmailAddressFromListId(t){var e=getListDescriptorFromListId(t),r=e.emailAddresses,s=void 0===r?[]:r;return s[0]}function listIdContainsFlag(t,e){var r=getListDescriptorFromListId(t),s=r.keyword,i=void 0===s?"":s,o=(0,_search_input_parser.getSearchInputTokens)(i),a=o.is||[];return a.indexOf(e)!==-1}function getRelevantListFilterFromListId(t){var e=getListFilterFromListId(t);switch(e){case _mail_constants.ListFilters.WITH_KEYWORD:return _mail_constants.ListFilters.WITH_KEYWORD_RELEVANCE;case _mail_constants.ListFilters.ALL:return _mail_constants.ListFilters.ALL_WITH_RELEVANCE;case _mail_constants.ListFilters.FROM:return _mail_constants.ListFilters.FROM_WITH_RELEVANCE;case _mail_constants.ListFilters.TO:return _mail_constants.ListFilters.TO_WITH_RELEVANCE}}exports.__esModule=!0,exports.DEFAULT_MESSAGES_METADATA_CACHEKEY=void 0,exports.getListIdFromRoute=getListIdFromRoute,exports.getFolderIdFromListId=getFolderIdFromListId,exports.getListIdFromFolderId=getListIdFromFolderId,exports.listIdContainsFolderId=listIdContainsFolderId,exports.listIdHasMessageFlags=listIdHasMessageFlags,exports.listIdContainsMessageFlags=listIdContainsMessageFlags,exports.getMetadataCacheKey=getMetadataCacheKey,exports.getSearchAdKeywordFromListId=getSearchAdKeywordFromListId,exports.getBootcampApiQueryParams=getBootcampApiQueryParams,exports.getSortOrderFromListId=getSortOrderFromListId,exports.getListFilterFromListId=getListFilterFromListId,exports.getListContentTypeFromListId=getListContentTypeFromListId,exports.getReferrerFromListId=getReferrerFromListId,exports.getKeywordFromListId=getKeywordFromListId,exports.getFolderIdNamesFromListId=getFolderIdNamesFromListId,exports.recreateListId=recreateListId,exports.serializeListIdForRoute=serializeListIdForRoute,exports.serializeListIdForFolderRoute=serializeListIdForFolderRoute,exports.convertSearchQueryToListId=convertSearchQueryToListId,exports.isPeopleSearch=isPeopleSearch,exports.isSmartViewSearch=isSmartViewSearch,exports.getEmailAddressFromListId=getEmailAddressFromListId,exports.listIdContainsFlag=listIdContainsFlag,exports.getRelevantListFilterFromListId=getRelevantListFilterFromListId;var _querystring=require("querystring"),_querystring2=_interopRequireDefault(_querystring),_mail_constants=require("../mail_constants"),_search_input_parser=require("../../atoms/utils/search_input_parser"),DEFAULT_MESSAGES_METADATA_CACHEKEY=exports.DEFAULT_MESSAGES_METADATA_CACHEKEY="DEFAULT_MESSAGES_METADATA_CACHEKEY",FOLDERS_ONLY_ROUTE_REGEX=/^folders=([0-9]+)$/,SEARCH_QUERY_MESSAGE_FLAGS_REGEX=/^is\:(starred|flagged|unread|read)$/gi;
},{"../../atoms/utils/search_input_parser":"./atoms/utils/search_input_parser","../mail_constants":"./platform/mail_constants","querystring":"querystring"}],315:[function(require,module,exports){
"use strict";function getLang(t){var e=digitsRe.test(t)?4:3;return"string"==typeof t&&re.test(t)?t.substring(0,t.length-e).toLowerCase():"en"}function getIntl(t){var e=digitsRe.test(t)?3:2;return"string"==typeof t&&re.test(t)?t.substring(t.length-e,t.length).toLowerCase():"us"}exports.__esModule=!0,exports.getLang=getLang,exports.getIntl=getIntl;var re=new RegExp(/^[a-zA-Z]{2}-[a-zA-Z]{4}-[a-zA-z]{2}$|^[a-zA-z]{2,3}-[a-zA-Z]{2}$|^[a-zA-Z]{2}-\d{3}$/),digitsRe=new RegExp(/^\w{2}-\d{3}$/);
},{}],"./platform/utils/mail_ui_vars":[function(require,module,exports){
"use strict";function _interopRequireDefault(_){return _&&_.__esModule?_:{default:_}}exports.__esModule=!0,exports.FEATURE_CUE_CONTAINER=exports.FEATURE_CUE_BODY_TEXT=exports.FEATURE_CUE_HEADER_TEXT=exports.FEATURE_CUE_PADDING=exports.FEATURE_CUE_BACKGROUND_COLOR=exports.SRP_RIGHT_RAIL_WIDTH=exports.AD_WIDTH_WIDE=exports.AD_WIDTH_NARROW=exports.ACCESSIBLE=exports.PillMaxWidths=exports.BREAKPOINTS=exports.FOLDER_INDENTATION=exports.WIDE_SCREEN_WIDTH=exports.NARROW_SCREEN_WIDTH=exports.APP_MAX_WIDTH=exports.APP_MIN_WIDTH=exports.APP_MIN_WIDTH_VERTICAL_VIEW=exports.NAVIGATION_MAX_WIDTH=exports.NAVIGATION_PERCENTAGE_WIDTH=exports.NAVIGATION_WIDTH=exports.TAB_MENU_WIDTH=exports.TAB_MAX_WIDTH=exports.TAB_MIN_WIDTH=exports.ZIndices=exports.TabIndices=exports.PALETTE=exports.ButtonPadding=exports.STYLELESS_BUTTON=exports.STYLELESS_INPUT=exports.HEADING_FONT_WEIGHT=exports.DOCUMENT_ITEM_HEIGHT=exports.PHOTO_ITEM_SMALL_SIZE=exports.PHOTO_SIZE_PLUS_PADDING=exports.PHOTO_ITEM_SIZE=exports.SEARCH_BAR_HEIGHT=exports.ITEM_LIST_SEPARATOR_HEIGHT=exports.PREVIEW_PANE_CONSTRAINT_RIGHT_PERCENT_OFFSET=exports.PREVIEW_PANE_CONSTRAINT_LEFT_PERCENT_OFFSET=exports.PREVIEW_PANE_CONSTRAINT_BOTTOM_PIXELS_OFFSET=exports.PREVIEW_PANE_CONSTRAINT_TOP_PIXELS_OFFSET=exports.PREVIEW_PANE_DEFAULT_TOP_PIXELS_OFFSET=exports.PREVIEW_PANE_DEFAULT_TOP_PERCENT_OFFSET=exports.PREVIEW_PANE_DEFAULT_LEFT_PERCENT_OFFSET=exports.MESSAGE_LIST_FEEDBACK_FORM_HEIGHT=exports.MESSAGE_LIST_COMPACT_FEEDBACK_FORM_HEIGHT=exports.MESSAGE_LIST_COMPACT_GEMINI_AD_HEIGHT=exports.MESSAGE_LIST_GEMINI_AD_HEIGHT=exports.MESSAGE_LIST_ITEM_LOAD_MORE_HEIGHT=exports.MESSAGE_LIST_ITEM_COMPACT_SNIPPET_RELAXED_HEIGHT=exports.MESSAGE_LIST_ITEM_COMPACT_SNIPPET_SLIM_HEIGHT=exports.MESSAGE_LIST_ITEM_COMPACT_SNIPPET_NORMAL_HEIGHT=exports.MESSAGE_LIST_ITEM_COMPACT_RELAXED_HEIGHT=void 0,exports.MESSAGE_LIST_ITEM_COMPACT_SLIM_HEIGHT=exports.MESSAGE_LIST_ITEM_COMPACT_NORMAL_HEIGHT=exports.MESSAGE_LIST_ITEM_RELAXED_HEIGHT=exports.MESSAGE_LIST_ITEM_SLIM_HEIGHT=exports.MESSAGE_LIST_ITEM_NORMAL_HEIGHT=exports.APP_HEADER_FOCUS_OUTLINE=exports.FOCUS_OUTLINE_DARK_THEME_MODE=exports.FOCUS_OUTLINE=exports.Shadows=exports.SHADOW_COLOR=exports.ShadowBlurs=exports.BOX_SHADOW_NORMAL=exports.BORDER_MEDIUM=exports.BORDER_ACTIVE=exports.BORDER_WARNING=exports.BORDER_DARK=exports.BORDER_LIGHT=exports.BORDER_SUPER_LIGHT=exports.IconColors=exports.AVATAR_SIZE_COMPACT=exports.AVATAR_SIZE_L=exports.AVATAR_SIZE_M=exports.AVATAR_SIZE_S=exports.ICON_SIZE_XL=exports.ICON_SIZE_L=exports.ICON_SIZE_M=exports.ICON_SIZE_S=exports.ICON_SIZE_XS=exports.ICON_SIZE_XXS=exports.ICON_SIZE_XXXS=exports.FONT_SIZE_XXL=exports.FONT_SIZE_XL=exports.FONT_SIZE_L=exports.FONT_SIZE_M=exports.FONT_SIZE_S=exports.FONT_SIZE_XS=exports.FONT_SIZE_XXS=exports.HIGHER_LINE_HEIGHT=exports.BASE_LINE_HEIGHT=exports.BASE_FONT_SIZE=exports.BASE_FONT_WEIGHT=exports.BASE_FONT_STACK=exports.MEDIUM=exports.BOLD=exports.SECONDARY_BUTTON_ACTIVE=exports.SECONDARY_BUTTON_NORMAL=exports.PRIMARY_BUTTON_HOVER_COLOR=exports.PRIMARY_BUTTON_INACTIVE_COLOR=exports.PRIMARY_BUTTON_INACTIVE_TEXT_COLOR=exports.PRIMARY_BUTTON_PRESSED_COLOR=exports.PRIMARY_BUTTON_TEXT_COLOR=exports.PRIMARY_BUTTON_ACTIVE_COLOR=exports.MAIN_APP_BORDER=exports.DEFAULT_BACKGROUND_COLOR=exports.PILL_SELECTED_BGCOLOR=exports.ATTACHMENT_MEDIUM_PURPLE=exports.ATTACHMENT_LIGHT_PURPLE=exports.ITEM_SELECTED_BGCOLOR=exports.ITEM_HOVER_BGCOLOR=exports.SRP_LINK_COLOR=exports.HEADER_COLOR_2=exports.HEADER_COLOR_1=exports.DODGE_95=exports.DODGE_80=exports.DODGE_60=exports.DODGE_50=exports.DODGE_20=exports.DODGE_16=exports.DODGE_12=exports.DODGE_10=exports.DODGE_8=exports.DODGE_6=exports.BURN_80=exports.BURN_70=exports.BURN_60=exports.BURN_46=exports.BURN_30=exports.BURN_20=exports.BURN_16=exports.BURN_10=exports.BURN_8=exports.FOLDER_ITEM_HOVER_BGCOLOR=exports.BORDER_MEDIUM_COLOR=exports.WORK_AREA_BACKGROUND_COLOR=exports.HEADING_PURPLE=exports.FIFTH_LEVEL_GRAY=exports.FOURTH_LEVEL_GRAY=exports.THIRD_LEVEL_GRAY=exports.SECOND_LEVEL_GRAY=exports.FIRST_LEVEL_GRAY=exports.LESS_IMPORTANT_GRAY=exports.IMPROVED_GRAY_DARK=exports.IMPROVED_GRAY=exports.BACKGROUND_COLOR=exports.BLACK=exports.WHITE=exports.TRANSPARENT=exports.SELECTED=exports.BASE_LINK_COLOR=exports.GRID_UNIT=void 0;var _fujiCss=require("fuji-css"),_fujiCss2=_interopRequireDefault(_fujiCss),GRID_UNIT=exports.GRID_UNIT=4,BASE_LINK_COLOR=exports.BASE_LINK_COLOR=_fujiCss2.default.ycolorBlue10a,SELECTED=exports.SELECTED=_fujiCss2.default.ycolorBlue10a,TRANSPARENT=exports.TRANSPARENT="transparent",WHITE=exports.WHITE="#fff",BLACK=exports.BLACK=_fujiCss2.default.ycolorGrayA,BACKGROUND_COLOR=exports.BACKGROUND_COLOR="rgba(241, 241, 245, .5)",IMPROVED_GRAY=exports.IMPROVED_GRAY="#a7acbb",IMPROVED_GRAY_DARK=exports.IMPROVED_GRAY_DARK="#5b636a",LESS_IMPORTANT_GRAY=exports.LESS_IMPORTANT_GRAY=_fujiCss2.default.ycolorGrayD,FIRST_LEVEL_GRAY=exports.FIRST_LEVEL_GRAY=_fujiCss2.default.ycolorGrayE,SECOND_LEVEL_GRAY=exports.SECOND_LEVEL_GRAY=_fujiCss2.default.ycolorGrayF,THIRD_LEVEL_GRAY=exports.THIRD_LEVEL_GRAY=_fujiCss2.default.ycolorGrayG,FOURTH_LEVEL_GRAY=exports.FOURTH_LEVEL_GRAY=_fujiCss2.default.ycolorGrayH,FIFTH_LEVEL_GRAY=exports.FIFTH_LEVEL_GRAY=_fujiCss2.default.ycolorGrayI,HEADING_PURPLE=exports.HEADING_PURPLE="#775eec",WORK_AREA_BACKGROUND_COLOR=exports.WORK_AREA_BACKGROUND_COLOR=WHITE,BORDER_MEDIUM_COLOR=exports.BORDER_MEDIUM_COLOR="#B9BDC5",FOLDER_ITEM_HOVER_BGCOLOR=exports.FOLDER_ITEM_HOVER_BGCOLOR="rgba(24, 143, 255, 0.08)",BURN_8=exports.BURN_8="rgba(0, 0, 0, .08)",BURN_10=exports.BURN_10="rgba(0, 0, 0, .1)",BURN_16=exports.BURN_16="rgba(0, 0, 0, .16)",BURN_20=exports.BURN_20="rgba(0, 0, 0, .2)",BURN_30=exports.BURN_30="rgba(0, 0, 0, .3)",BURN_46=exports.BURN_46="rgba(0, 0, 0, .46)",BURN_60=exports.BURN_60="rgba(0, 0, 0, .6)",BURN_70=exports.BURN_70="rgba(0, 0, 0, .7)",BURN_80=exports.BURN_80="rgba(039, 41, 43, .8)",DODGE_6=exports.DODGE_6="rgba(255, 255, 255, .06)",DODGE_8=exports.DODGE_8="rgba(255, 255, 255, .08)",DODGE_10=exports.DODGE_10="rgba(255, 255, 255, .10)",DODGE_12=exports.DODGE_12="rgba(255, 255, 255, .12)",DODGE_16=exports.DODGE_16="rgba(255, 255, 255, .16)",DODGE_20=exports.DODGE_20="rgba(255, 255, 255, .2)",DODGE_50=exports.DODGE_50="rgba(255, 255, 255, .5)",DODGE_60=exports.DODGE_60="rgba(255, 255, 255, .6)",DODGE_80=exports.DODGE_80="rgba(255, 255, 255, .8)",DODGE_95=exports.DODGE_95="rgba(255, 255, 255, .95)",HEADER_COLOR_1=exports.HEADER_COLOR_1="#7282fb",HEADER_COLOR_2=exports.HEADER_COLOR_2="#7934f7",SRP_LINK_COLOR=exports.SRP_LINK_COLOR=BASE_LINK_COLOR,ITEM_HOVER_BGCOLOR=exports.ITEM_HOVER_BGCOLOR="#f4f9ff",ITEM_SELECTED_BGCOLOR=exports.ITEM_SELECTED_BGCOLOR="#e9f4ff",ATTACHMENT_LIGHT_PURPLE=exports.ATTACHMENT_LIGHT_PURPLE="#7daae8",ATTACHMENT_MEDIUM_PURPLE=exports.ATTACHMENT_MEDIUM_PURPLE="#7a50ee",PILL_SELECTED_BGCOLOR=exports.PILL_SELECTED_BGCOLOR="#daedff",DEFAULT_BACKGROUND_COLOR=exports.DEFAULT_BACKGROUND_COLOR="#f4f4f7",MAIN_APP_BORDER=exports.MAIN_APP_BORDER="1px solid "+_fujiCss2.default.ycolorGrayH,PRIMARY_BUTTON_ACTIVE_COLOR=exports.PRIMARY_BUTTON_ACTIVE_COLOR=_fujiCss2.default.ycolorBlue10a,PRIMARY_BUTTON_TEXT_COLOR=exports.PRIMARY_BUTTON_TEXT_COLOR=WHITE,PRIMARY_BUTTON_PRESSED_COLOR=exports.PRIMARY_BUTTON_PRESSED_COLOR=_fujiCss2.default.ycolorBlueviolet12a,PRIMARY_BUTTON_INACTIVE_TEXT_COLOR=exports.PRIMARY_BUTTON_INACTIVE_TEXT_COLOR=_fujiCss2.default.ycolorGrayG,PRIMARY_BUTTON_INACTIVE_COLOR=exports.PRIMARY_BUTTON_INACTIVE_COLOR=_fujiCss2.default.ycolorGrayH,PRIMARY_BUTTON_HOVER_COLOR=exports.PRIMARY_BUTTON_HOVER_COLOR=_fujiCss2.default.ycolorBlue10b,SECONDARY_BUTTON_NORMAL=exports.SECONDARY_BUTTON_NORMAL=_fujiCss2.default.ycolorBlue10a,SECONDARY_BUTTON_ACTIVE=exports.SECONDARY_BUTTON_ACTIVE=_fujiCss2.default.ycolorBlueviolet12a,BOLD=exports.BOLD="bold",MEDIUM=exports.MEDIUM=500,BASE_FONT_STACK=exports.BASE_FONT_STACK='"Helvetica Neue", Helvetica, Arial, sans-serif',BASE_FONT_WEIGHT=exports.BASE_FONT_WEIGHT="regular",BASE_FONT_SIZE=exports.BASE_FONT_SIZE="13px",BASE_LINE_HEIGHT=exports.BASE_LINE_HEIGHT="18px",HIGHER_LINE_HEIGHT=exports.HIGHER_LINE_HEIGHT="20px",FONT_SIZE_XXS=exports.FONT_SIZE_XXS="11px",FONT_SIZE_XS=exports.FONT_SIZE_XS="12px",FONT_SIZE_S=exports.FONT_SIZE_S="13px",FONT_SIZE_M=exports.FONT_SIZE_M="15px",FONT_SIZE_L=exports.FONT_SIZE_L="17px",FONT_SIZE_XL=exports.FONT_SIZE_XL="24px",FONT_SIZE_XXL=exports.FONT_SIZE_XXL="30px",ICON_SIZE_XXXS=exports.ICON_SIZE_XXXS="14px",ICON_SIZE_XXS=exports.ICON_SIZE_XXS="16px",ICON_SIZE_XS=exports.ICON_SIZE_XS="20px",ICON_SIZE_S=exports.ICON_SIZE_S="24px",ICON_SIZE_M=exports.ICON_SIZE_M="48px",ICON_SIZE_L=exports.ICON_SIZE_L="72px",ICON_SIZE_XL=exports.ICON_SIZE_XL="96px",AVATAR_SIZE_S=exports.AVATAR_SIZE_S=20,AVATAR_SIZE_M=exports.AVATAR_SIZE_M=32,AVATAR_SIZE_L=exports.AVATAR_SIZE_L=48,AVATAR_SIZE_COMPACT=exports.AVATAR_SIZE_COMPACT=28,IconColors=exports.IconColors={NORMAL:BLACK,NORMAL_LESS_DIM:"rgba(38, 40, 42, 0.8)",IMPROVED_GRAY_DARK:IMPROVED_GRAY_DARK,INVERTED:WHITE,INVERTED_DIM:"rgba(255, 255, 255, 0.5)",INVERTED_LESS_DIM:"rgba(255, 255, 255, 0.8)",SELECTED:SELECTED,SELECTED_DARK_THEME_MODE:"#4faaff",DISABLED:SECOND_LEVEL_GRAY,STARRED:_fujiCss2.default.ycolorOrange4a,STARRED_DARK:"#ffb700",SMARTVIEW_DARK:"rgba(255, 255, 255, .6)",LESS_IMPORTANT:LESS_IMPORTANT_GRAY,SECOND_LEVEL_GRAY:SECOND_LEVEL_GRAY,FAINT:_fujiCss2.default.ycolorGrayH,COOL_FAINT:_fujiCss2.default.ycolorGrayFg,WARNING:_fujiCss2.default.ycolorPink1a,HEADING:HEADING_PURPLE,HOVER_BGCOLOR:"rgba(24, 143, 255, 0.08)",ACTIVE_BGCOLOR:"rgba(185, 189, 197, 0.3)",YBADGE:_fujiCss2.default.ycolorPurple14c,GREEN:"#1AC567",Attachments:{MEDIA:_fujiCss2.default.ycolorFuchsia18a,CAL:_fujiCss2.default.ycolorFuchsia18a,EXCEL:_fujiCss2.default.ycolorGreen6b,DOC:_fujiCss2.default.ycolorBlue10b,SLIDE:_fujiCss2.default.ycolorOrange4c,PDF:_fujiCss2.default.ycolorOrange4c,GENERIC:_fujiCss2.default.ycolorBlue10a,COMPRESSED:_fujiCss2.default.ycolorTurquoise8b}},BORDER_SUPER_LIGHT=exports.BORDER_SUPER_LIGHT="1px solid "+_fujiCss2.default.ycolorGrayI,BORDER_LIGHT=exports.BORDER_LIGHT="1px solid "+_fujiCss2.default.ycolorGrayH,BORDER_DARK=exports.BORDER_DARK="1px solid "+BLACK,BORDER_WARNING=exports.BORDER_WARNING="1px solid "+_fujiCss2.default.ycolorPink1a,BORDER_ACTIVE=exports.BORDER_ACTIVE="1px solid "+_fujiCss2.default.ycolorGrayF,BORDER_MEDIUM=exports.BORDER_MEDIUM="1px solid "+BORDER_MEDIUM_COLOR,BOX_SHADOW_NORMAL=exports.BOX_SHADOW_NORMAL="0 "+2*GRID_UNIT+"px "+2*GRID_UNIT+"px "+GRID_UNIT*-2+"px\n    rgba(0,0,0,.5)",ShadowBlurs=exports.ShadowBlurs={LOW:3,MEDIUM:6,HIGH:10},SHADOW_COLOR=exports.SHADOW_COLOR="rgba(0, 0, 0, .3)",Shadows=exports.Shadows={LOW:"0 0 "+ShadowBlurs.LOW+"px "+SHADOW_COLOR,MED:"0 0 "+ShadowBlurs.MEDIUM+"px "+SHADOW_COLOR,HIGH:"0 0 "+ShadowBlurs.HIGH+"px "+SHADOW_COLOR},FOCUS_OUTLINE=exports.FOCUS_OUTLINE="1px solid "+_fujiCss2.default.ycolorNeutralBlue,FOCUS_OUTLINE_DARK_THEME_MODE=exports.FOCUS_OUTLINE_DARK_THEME_MODE="1px solid #b9bdc5",APP_HEADER_FOCUS_OUTLINE=exports.APP_HEADER_FOCUS_OUTLINE="2px solid rgba(255, 255, 255, .5)",MESSAGE_LIST_ITEM_NORMAL_HEIGHT=exports.MESSAGE_LIST_ITEM_NORMAL_HEIGHT=8*GRID_UNIT,MESSAGE_LIST_ITEM_SLIM_HEIGHT=exports.MESSAGE_LIST_ITEM_SLIM_HEIGHT=6*GRID_UNIT,MESSAGE_LIST_ITEM_RELAXED_HEIGHT=exports.MESSAGE_LIST_ITEM_RELAXED_HEIGHT=11*GRID_UNIT,MESSAGE_LIST_ITEM_COMPACT_NORMAL_HEIGHT=exports.MESSAGE_LIST_ITEM_COMPACT_NORMAL_HEIGHT=14*GRID_UNIT,MESSAGE_LIST_ITEM_COMPACT_SLIM_HEIGHT=exports.MESSAGE_LIST_ITEM_COMPACT_SLIM_HEIGHT=12*GRID_UNIT,MESSAGE_LIST_ITEM_COMPACT_RELAXED_HEIGHT=exports.MESSAGE_LIST_ITEM_COMPACT_RELAXED_HEIGHT=14*GRID_UNIT+GRID_UNIT/2,MESSAGE_LIST_ITEM_COMPACT_SNIPPET_NORMAL_HEIGHT=exports.MESSAGE_LIST_ITEM_COMPACT_SNIPPET_NORMAL_HEIGHT=18*GRID_UNIT,MESSAGE_LIST_ITEM_COMPACT_SNIPPET_SLIM_HEIGHT=exports.MESSAGE_LIST_ITEM_COMPACT_SNIPPET_SLIM_HEIGHT=16*GRID_UNIT,MESSAGE_LIST_ITEM_COMPACT_SNIPPET_RELAXED_HEIGHT=exports.MESSAGE_LIST_ITEM_COMPACT_SNIPPET_RELAXED_HEIGHT=19*GRID_UNIT+GRID_UNIT/2,MESSAGE_LIST_ITEM_LOAD_MORE_HEIGHT=exports.MESSAGE_LIST_ITEM_LOAD_MORE_HEIGHT=18*GRID_UNIT,MESSAGE_LIST_GEMINI_AD_HEIGHT=exports.MESSAGE_LIST_GEMINI_AD_HEIGHT=12*GRID_UNIT,MESSAGE_LIST_COMPACT_GEMINI_AD_HEIGHT=exports.MESSAGE_LIST_COMPACT_GEMINI_AD_HEIGHT=18*GRID_UNIT,MESSAGE_LIST_COMPACT_FEEDBACK_FORM_HEIGHT=exports.MESSAGE_LIST_COMPACT_FEEDBACK_FORM_HEIGHT=3*MESSAGE_LIST_COMPACT_GEMINI_AD_HEIGHT,MESSAGE_LIST_FEEDBACK_FORM_HEIGHT=exports.MESSAGE_LIST_FEEDBACK_FORM_HEIGHT=2*MESSAGE_LIST_GEMINI_AD_HEIGHT,PREVIEW_PANE_DEFAULT_LEFT_PERCENT_OFFSET=exports.PREVIEW_PANE_DEFAULT_LEFT_PERCENT_OFFSET=32,PREVIEW_PANE_DEFAULT_TOP_PERCENT_OFFSET=exports.PREVIEW_PANE_DEFAULT_TOP_PERCENT_OFFSET=30,PREVIEW_PANE_DEFAULT_TOP_PIXELS_OFFSET=exports.PREVIEW_PANE_DEFAULT_TOP_PIXELS_OFFSET=180,PREVIEW_PANE_CONSTRAINT_TOP_PIXELS_OFFSET=exports.PREVIEW_PANE_CONSTRAINT_TOP_PIXELS_OFFSET=180,PREVIEW_PANE_CONSTRAINT_BOTTOM_PIXELS_OFFSET=exports.PREVIEW_PANE_CONSTRAINT_BOTTOM_PIXELS_OFFSET=180,PREVIEW_PANE_CONSTRAINT_LEFT_PERCENT_OFFSET=exports.PREVIEW_PANE_CONSTRAINT_LEFT_PERCENT_OFFSET=32,PREVIEW_PANE_CONSTRAINT_RIGHT_PERCENT_OFFSET=exports.PREVIEW_PANE_CONSTRAINT_RIGHT_PERCENT_OFFSET=45,ITEM_LIST_SEPARATOR_HEIGHT=exports.ITEM_LIST_SEPARATOR_HEIGHT=11*GRID_UNIT,SEARCH_BAR_HEIGHT=exports.SEARCH_BAR_HEIGHT=12*GRID_UNIT,PHOTO_ITEM_SIZE=exports.PHOTO_ITEM_SIZE=150,PHOTO_SIZE_PLUS_PADDING=exports.PHOTO_SIZE_PLUS_PADDING=PHOTO_ITEM_SIZE+8,PHOTO_ITEM_SMALL_SIZE=exports.PHOTO_ITEM_SMALL_SIZE=83,DOCUMENT_ITEM_HEIGHT=exports.DOCUMENT_ITEM_HEIGHT=16*GRID_UNIT,HEADING_FONT_WEIGHT=exports.HEADING_FONT_WEIGHT=BOLD,STYLELESS_INPUT=exports.STYLELESS_INPUT={border:0,boxShadow:"none",width:"100%",minHeight:"40px"},STYLELESS_BUTTON=exports.STYLELESS_BUTTON={fontFamily:BASE_FONT_STACK,fontSize:BASE_FONT_SIZE,border:0,backgroundColor:TRANSPARENT},ButtonPadding=exports.ButtonPadding={XXXS:.25*GRID_UNIT,XXS:.5*GRID_UNIT,XS:1*GRID_UNIT,S:2*GRID_UNIT,M:3*GRID_UNIT,L:4*GRID_UNIT,XL:4*GRID_UNIT},PALETTE=exports.PALETTE=_fujiCss2.default,TabIndices=exports.TabIndices={APP_HEADER_MAIL_APPS:0,APP_HEADER_ACCOUNT_MENU:0,APP_HEADER_SEARCHBOX:10,FOLDER_LIST:20,MESSAGE_LIST_TOOLBAR:30,MESSAGE_LIST_MAIN:40,MESSAGE_GROUP_HEADER:50,SEGMENTED_CONTROL_FILTERS:60,ATTACHMENT_PREVIEW:70,ATTACHMENT_PREVIEW_TOOLBAR:80,COMMS_PROPERTIES_BAR:90,FOLDER_SELECTION_MENU:100},ZIndices=exports.ZIndices={CURSOR:11e3,MODAL:1e4,POPOVER:{LOW:100,MEDIUM:500,HIGH:900},OVERLAY:9e3,NOTIFICATION:200},TAB_MIN_WIDTH=exports.TAB_MIN_WIDTH=108,TAB_MAX_WIDTH=exports.TAB_MAX_WIDTH=144,TAB_MENU_WIDTH=exports.TAB_MENU_WIDTH=28,NAVIGATION_WIDTH=exports.NAVIGATION_WIDTH=192,NAVIGATION_PERCENTAGE_WIDTH=exports.NAVIGATION_PERCENTAGE_WIDTH=14,NAVIGATION_MAX_WIDTH=exports.NAVIGATION_MAX_WIDTH=224,APP_MIN_WIDTH_VERTICAL_VIEW=exports.APP_MIN_WIDTH_VERTICAL_VIEW=1280,APP_MIN_WIDTH=exports.APP_MIN_WIDTH=1024,APP_MAX_WIDTH=exports.APP_MAX_WIDTH=1920,NARROW_SCREEN_WIDTH=exports.NARROW_SCREEN_WIDTH=1360,WIDE_SCREEN_WIDTH=exports.WIDE_SCREEN_WIDTH=1600,FOLDER_INDENTATION=exports.FOLDER_INDENTATION="0 0 0 8px",BREAKPOINTS=exports.BREAKPOINTS={H768:"@media (min-height: 768px)",W1280:"@media (min-width: 1280px)",W1360:"@media (min-width: 1360px)",W1360_MAX:"@media (max-width: 1360px)",W1440:"@media (min-width: 1440px)",W1600:"@media (min-width: 1600px)",W1920:"@media (min-width: 1920px)"},PillMaxWidths=exports.PillMaxWidths={S:"88px",L:"160px"},ACCESSIBLE=exports.ACCESSIBLE={position:"absolute",left:"-10000px",top:"auto",width:"1px",height:"1px",overflow:"hidden"},AD_WIDTH_NARROW=exports.AD_WIDTH_NARROW=192,AD_WIDTH_WIDE=exports.AD_WIDTH_WIDE=332,SRP_RIGHT_RAIL_WIDTH=exports.SRP_RIGHT_RAIL_WIDTH="300px",FEATURE_CUE_BACKGROUND_COLOR=exports.FEATURE_CUE_BACKGROUND_COLOR=PALETTE.ycolorBlue10a,FEATURE_CUE_PADDING=exports.FEATURE_CUE_PADDING="18px 24px 24px",FEATURE_CUE_HEADER_TEXT=exports.FEATURE_CUE_HEADER_TEXT={lineHeight:"24px",fontSize:FONT_SIZE_L,fontWeight:MEDIUM,color:BLACK},FEATURE_CUE_BODY_TEXT=exports.FEATURE_CUE_BODY_TEXT={fontSize:BASE_FONT_SIZE,lineHeight:BASE_LINE_HEIGHT,color:BLACK},FEATURE_CUE_CONTAINER=exports.FEATURE_CUE_CONTAINER={backgroundColor:WHITE,padding:FEATURE_CUE_PADDING,minWidth:"200px",maxWidth:"450px"};
},{"fuji-css":"./node_modules/fuji-css/dist/jss/colors.js"}],"./platform/utils/mailto_parser":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function extractMailtoFields(t){0===t.indexOf("mailto:")&&(t=t.substring(7));var r=this.extractEmailAddressFromMailto(t),e=t.indexOf("?");e>-1&&(t=t.substring(e+1));var i=_querystring2.default.parse(t);return r&&Object.assign(i,{to:r}),["to","cc","bcc"].forEach(function(t){var r=i[t];r&&"string"==typeof r&&(i[t]=[].concat(r))}),["subject","body"].forEach(function(t){var r=i[t];r&&Array.isArray(r)&&(i[t]=r.pop())}),i}function extractEmailAddressFromMailto(t){if(t&&t.length){var r=t.indexOf("?");if(r>-1&&(t=t.substring(0,r)),t.length){if(t=t.toLowerCase(),0===t.indexOf("http://")||0===t.indexOf("https://")||0===t.indexOf("ftp://"))return"";if((0,_index.isValidEmail)(t))return t}}return""}exports.__esModule=!0,exports.extractMailtoFields=extractMailtoFields,exports.extractEmailAddressFromMailto=extractEmailAddressFromMailto;var _querystring=require("querystring"),_querystring2=_interopRequireDefault(_querystring),_index=require("./index");
},{"./index":"./platform/utils","querystring":"querystring"}],"./platform/utils/message":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function isDraft(e){return(0,_folder.getPrimaryFolderType)(e.folder)===_mail_constants.FolderTypes.DRAFT}function isTrash(e){return(0,_folder.getPrimaryFolderType)(e.folder)===_mail_constants.FolderTypes.TRASH}function isSpam(e){return(0,_folder.getPrimaryFolderType)(e.folder)===_mail_constants.FolderTypes.BULK}function isInFolderWithId(e){return function(t){return t.folder.id===e}}function convertV2IdToV3ImmutableId(e){return e.length>27?e.split("_").pop().replace(/\+/g,"-").replace(/\//g,"_"):e}function generateAttachmentId(e,t){var r=e.partId,n=e.csid,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,_invariant2.default)(r,"`attachment` in #generateAttachmentId must have a partId."),(0,_invariant2.default)(n||t,"#generateAttachmentId must receive a messageId or csid"),n&&a?n+":"+r:t+":"+r}function getMessageIdFromAttachmentId(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split(":"),r=t[0];return r}function filterMessagesByFolderType(e,t){return e.filter(function(e){var r=e.folder;return t((0,_folder.getPrimaryFolderType)(r))})}exports.__esModule=!0,exports.isDraft=isDraft,exports.isTrash=isTrash,exports.isSpam=isSpam,exports.isInFolderWithId=isInFolderWithId,exports.convertV2IdToV3ImmutableId=convertV2IdToV3ImmutableId,exports.generateAttachmentId=generateAttachmentId,exports.getMessageIdFromAttachmentId=getMessageIdFromAttachmentId,exports.filterMessagesByFolderType=filterMessagesByFolderType;var _mail_constants=require("../mail_constants"),_folder=require("./folder"),_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant);
},{"../invariant":"./platform/invariant","../mail_constants":"./platform/mail_constants","./folder":"./platform/utils/folder"}],"./platform/utils/message_group":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getFlags(e){for(var t=e.messages,s=!0,a=!1,r=0;r<t.length;r++){var n=t[r];if(n.flags.read||(s=!1),n.flags.flagged&&(a=!0),a&&!s)break}return{read:s,flagged:a}}function getParticipants(e){return e.filter(function(e){return e.headers.from.length>0&&(e.headers.from[0].email||e.headers.from[0].name)}).map(function(e){return{email:e.headers.from[0].email,name:e.headers.from[0].name,recent:!e.flags.read}})}function getRecipients(e){return e.reduce(function(e,t){return t.headers.to.filter(function(e){return e.email||e.name}).reduce(function(e,s){return e.push({email:s.email,name:s.name,recent:!t.flags.read}),e},e)},[])}function hasAttachment(e){return e.messages.some(function(e){return e.attachments&&e.attachments.length})}function hasVerifiedYahooSource(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.some(function(e){return _mail_constants.YahooOfficialVerifiedDomains.indexOf(e.domain)!==-1})}function hasVerifiedMessage(e){return e.messages.some(function(e){return hasVerifiedYahooSource(e.verifiedDomains)})}function getAttachmentsWithFileNames(e){var t=e.messages.reduce(function(e,t){var s=t.attachments;return e.concat(s.filter(function(e){var t=e.filename;return t}))},[]),s=t.map(function(e){return e.filename+e.size});return t.filter(function(e,t){var a=e.filename,r=e.size;return t===s.indexOf(a+r)})}function hasDraft(e){return e.messages.some(_message.isDraft)}function onlyDrafts(e){return e.messages.every(_message.isDraft)}function onlyTrash(e){return e.messages.every(_message.isTrash)}function onlySpam(e){return e.messages.every(_message.isSpam)}function getMessageIds(e){return e.messages.map(function(e){return e.id})}function getLastMessageWith(e,t){for(var s=e.messages,a=void 0,r=s.length-1;r>=0;r--)if(t(s[r])){a=s[r];break}return a}function getLastMessageWithFolderId(e,t){return getLastMessageWith(e,(0,_message.isInFolderWithId)(t))}function getIdsOfMessagesToExpand(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=e.messages,a=s.some(function(e){return!e.flags.read}),r=s.filter(function(e){return!(0,_message.isDraft)(e)}).pop();if(0!==t.length){var n=s.filter(function(e){return(0,_message.isDraft)(e)}).map(function(e){return e.id});return(0,_uniq2.default)(t.concat(n))}return s.filter(function(e,t){return Boolean(!e.flags.read||(0,_message.isDraft)(e)||t===s.length-1||e===r||!a&&e.flags.flagged)}).map(function(e){return e.id})}function removeMatchTermDelimiter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=/\^_(.+?)\^_/g;return e.replace(t,"$1")}function getMessageGroupFolder(e){for(var t=e.messages,s=t.length-1;s>=0;s--){var a=t[s].folder;if(a.types[0]!==_mail_constants.FolderTypes.TRASH)return t[s].folder}return t[t.length-1].folder}function getMetadata(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t.listId,a=getFlags(e),r=getParticipants(e.messages),n=getRecipients(e.messages),i=void 0;s&&(i=(0,_list.getFolderIdFromListId)(s));var o=e.messages[e.messages.length-1],g=getLastMessageWithFolderId(e,i)||o,f=e.messages[0].headers.subject,u=o.snippet,m=removeMatchTermDelimiter(f),l=removeMatchTermDelimiter(u),c=g.headers.date,h=e.messages.length;return{flags:a,participants:r,recipients:n,subjectWithMatchDelimiter:f,snippetWithMatchDelimiter:u,subject:m,snippet:l,date:c,messageCount:h,hasAttachment:hasAttachment(e),hasVerifiedMessage:hasVerifiedMessage(e),hasDraft:hasDraft(e),folder:getMessageGroupFolder(e)}}exports.__esModule=!0,exports.getFlags=getFlags,exports.getParticipants=getParticipants,exports.getRecipients=getRecipients,exports.hasAttachment=hasAttachment,exports.hasVerifiedYahooSource=hasVerifiedYahooSource,exports.hasVerifiedMessage=hasVerifiedMessage,exports.getAttachmentsWithFileNames=getAttachmentsWithFileNames,exports.hasDraft=hasDraft,exports.onlyDrafts=onlyDrafts,exports.onlyTrash=onlyTrash,exports.onlySpam=onlySpam,exports.getMessageIds=getMessageIds,exports.getLastMessageWith=getLastMessageWith,exports.getLastMessageWithFolderId=getLastMessageWithFolderId,exports.getIdsOfMessagesToExpand=getIdsOfMessagesToExpand,exports.removeMatchTermDelimiter=removeMatchTermDelimiter,exports.getMetadata=getMetadata;var _message=require("./message"),_list=require("./list"),_mail_constants=require("../mail_constants"),_uniq=require("lodash/uniq"),_uniq2=_interopRequireDefault(_uniq);
},{"../mail_constants":"./platform/mail_constants","./list":"./platform/utils/list","./message":"./platform/utils/message","lodash/uniq":"./node_modules/lodash/uniq.js"}],"./platform/utils/message_quote_finder":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function hasQuoteAnnotations(e){if(0===e.length)return!1;var n=e[0].divIds;return 0!==n.length}function findQuoteBound(e,n){var d=n.divId,t=void 0,i=void 0,o=new RegExp("<div[^>]+id=[\"']"+ASCII_CHARS+d+ASCII_CHARS+"[\"'][^>]*>","gm"),r=o.exec(e);if(!r)return EMPTY_QUOTE;var s=e.slice(r.index),a=/<div|<\/div>/gi;for(t=0;t>0||!i||"</div>"!==i[0];){var u=a.exec(s);if(!u){i=[""],i.index=s.length;break}i=u,"<div"===i[0]?t++:t--}return{imbalancedBy:t,start:r.index,end:r.index+i.index+i[0].length}}function findQuoteBounds(e,n){var d=n.divIds,t=void 0===d?[]:d,i=[],o=EMPTY_QUOTE;return t.forEach(function(n){var d=EMPTY_QUOTE;try{d=findQuoteBound(e.slice(o.end),{divId:n})}catch(e){_logger2.default.error("Mismatched HTML tags",{divId:n,error:e})}d!==EMPTY_QUOTE&&(d.start+=o.end,d.end+=o.end,i.push(d),o=d)}),i}function separateQuote(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments[1];if(!hasQuoteAnnotations(n))return{nonQuote:e,quote:""};for(var d=findQuoteBounds(e,{divIds:n[0].divIds}),t="",i="",o=EMPTY_QUOTE,r=0;r<d.length;r++){var s=d[r],a=s.start,u=s.end,v=s.imbalancedBy;t+=r>0?e.slice(o.end,a):e.slice(0,a),i+=e.slice(a,u),v>0&&(i+=new Array(v).fill("</div>").join("")),o=d[r]}return t+=e.slice(o.end),{quote:i,nonQuote:t}}function divideMessage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments[1],d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!hasQuoteAnnotations(n))return{messageAbove:e,messageBelow:"",expandable:!1};for(var t=findQuoteBounds(e,{divIds:n[0].divIds}),i=EMPTY_QUOTE,o=!1,r=[],s=[],a=0;a<t.length;a++){var u=t[a],v=u.start,l=u.end,g=u.imbalancedBy;if((0===a?r:s).push(e.slice(i.end,v)),d){var f=e.slice(v,l);g>0&&(f+=new Array(g).fill("</div>").join("")),s.push('<div class="qtd-body">'+f+"</div>")}i=t[a]}return 0===t.length?r.push(e):(s.push(e.slice(i.end)),o=!0),{messageAbove:r.join(""),messageBelow:s.join(""),expandable:o}}function handleMessageAndQuotedText(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments[1],d=arguments[2],t=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=divideMessage(e,n,t),r=o.messageAbove,s=o.messageBelow,a=o.expandable,u=!i&&a?"<div>"+d+"</div>":"";return r+u+s}exports.__esModule=!0,exports.DEFAULT_QUOTE_CLASS=void 0,exports.separateQuote=separateQuote,exports.divideMessage=divideMessage,exports.handleMessageAndQuotedText=handleMessageAndQuotedText;var _logger=require("../../platform/logger"),_logger2=_interopRequireDefault(_logger),ASCII_CHARS="[a-zA-Z0-9-_]*",EMPTY_QUOTE={start:0,end:0},DEFAULT_QUOTE_CLASS=exports.DEFAULT_QUOTE_CLASS="yahoo_quoted";
},{"../../platform/logger":"./platform/logger"}],"./platform/utils/object":[function(require,module,exports){
"use strict";function getIn(r,e,t){if(!e||!r)throw new Error("object && nestedProp are required arguments");if("string"==typeof e&&(e=e.split(".")),1===e.length)return hasOwn.call(r,e[0])?r[e[0]]:t;var n=e.splice(0,1)[0];return r=r[n],r?getIn(r,e,t):t}function mirrorKeys(r){var e,t={};return e="[object Array]"===Object.prototype.toString.call(r)?r:Object.keys(r),e.forEach(function(r){null===r?t.null=null:void 0===r?t.undefined=void 0:t[r]=r.toString()}),t}function shallowDiff(r,e){for(var t in r)if(r.hasOwnProperty(t)&&(!e.hasOwnProperty(t)||r[t]!==e[t]))return!0;return!1}function isEmpty(r){return!r||0===Object.keys(r).length}function shallowEqual(r,e){if(!r&&!e)return!0;if(!r&&e||r&&!e)return!1;var t=Object.keys(r),n=Object.keys(e);return t.length===n.length&&t.every(function(t){return r[t]===e[t]})}function values(r){return Object.keys(r).map(function(e){return r[e]})}exports.__esModule=!0,exports.getIn=getIn,exports.mirrorKeys=mirrorKeys,exports.shallowDiff=shallowDiff,exports.isEmpty=isEmpty,exports.shallowEqual=shallowEqual,exports.values=values;var hasOwn=Object.prototype.hasOwnProperty;
},{}],"./platform/utils/path":[function(require,module,exports){
"use strict";function extname(e){if("string"!=typeof e)return"";var t=e.match(EXTNAME_REGEXP);return t?t[0]:""}function basename(e,t){void 0===e?e="undefined":"string"!=typeof e&&(e=e.toString());var n=e.split("/").pop();return t&&n.substr(-t.length)===t&&(n=n.substr(0,n.length-t.length)),n}exports.__esModule=!0,exports.extname=extname,exports.basename=basename;var EXTNAME_REGEXP=/\.\w*$/;
},{}],"./platform/utils/pgp_parser":[function(require,module,exports){
"use strict";function hasPGPAsciiArmor(e){return e.indexOf("-----BEGIN PGP")!==-1}function extractUserIds(e){var n=e.success,r={};if(!n||!n.length)return[];for(var t=0;t<n.length;t++)if(n[t].uids&&n[t].uids.length)for(var E=0;E<n[t].uids.length;E++){var s=n[t].uids[E];r[s]=!0}return Object.keys(r)}function parseMessage(e,n,r){for(var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,E=void 0,s=void 0,a=void 0,d=void 0,i=!1,N=0,o=0,_=new RegExp(RE_ARMOR,"g"),c=new RegExp(RE_NEW_LINE,"g");o++<t&&null!==(E=_.exec(e));)i="> "===E[1],d=i?function(e){return e.replace(/^> /gm,"")}:function(e){return e},s={type:E[4],headers:d(E[5]).trim().split(c),body:d(E[6]).replace(c,"\n"),checksum:E[7].trim(),start:E.index+(i?0:E[1].length),end:_.lastIndex-E[8].length,quoted:i,normalized:""},"SIGNATURE"===s.type&&void 0!==E[3]&&(s.signedHeaders=d(E[2]).trim().split(c),s.signedBody=d(E[3]).replace(/\r?\n?$/,"\n").replace(c,"\n"),s.normalized="-----BEGIN PGP SIGNED MESSAGE-----\n"+s.signedHeaders.join("\n")+"\n\n"+s.signedBody),a={start:N,end:s.start},a.start!==a.end&&n(a),s.normalized+="-----BEGIN PGP "+s.type+"-----\n"+s.headers.join("\n")+"\n\n"+s.body+"="+s.checksum+"\n-----END PGP "+s.type+"-----",r(s),N=s.end;a={start:N,end:e.length},a.start!==a.end&&n(a)}exports.__esModule=!0,exports.hasPGPAsciiArmor=hasPGPAsciiArmor,exports.extractUserIds=extractUserIds,exports.default=parseMessage;var RE_NEW_LINE="(?:[\\t\\xa0 ]?\\r?\\n)+",RE_ARMOR="(^|> |[\\t\\xa0 ]?)(?:-----BEGIN PGP SIGNED MESSAGE-----"+RE_NEW_LINE+"((?:\\1[A-Za-z]+: [^\\n]+"+RE_NEW_LINE+")*)(?:\\1"+RE_NEW_LINE+")*([\\s\\S.]*)"+RE_NEW_LINE+"\\1)?-----BEGIN PGP ([^-]+)-----"+RE_NEW_LINE+"((?:\\1[A-Za-z]+:[ ][^\\n]+"+RE_NEW_LINE+")*)(?:\\1"+RE_NEW_LINE+")*((?:\\1[a-zA-Z0-9/+]+=*"+RE_NEW_LINE+")*)(?:\\1=([a-zA-Z0-9/+]+))?"+RE_NEW_LINE+"(?:\\1"+RE_NEW_LINE+")*\\1-----END PGP \\4-----([\\t\\u00a0 ]?(?:$|\\r?\\n))";
},{}],"./platform/utils/route":[function(require,module,exports){
"use strict";function routesEqual(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.checkQuery;if(!e.name||!t.name||e.name!==t.name)return!1;var u=(0,_object.isEmpty)(e.params)&&(0,_object.isEmpty)(t.params)||(0,_object.shallowEqual)(e.params,t.params);return o&&u?(0,_object.isEmpty)(e.query)&&(0,_object.isEmpty)(t.query)||(0,_object.shallowEqual)(e.query,t.query):u}function buildMessageRouteFromFolderIdGroupId(e,t){return{name:_mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST,params:Object.assign({fid:e,mid:t})}}function buildFolderRouteFromListId(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,_list.recreateListId)(e,t),o=(0,_list.serializeListIdForFolderRoute)(r);return o?{name:_mail_constants.RouteNames.FOLDER,params:{fid:o}}:null}function buildAttachmentRouteFromListId(e,t,r){var o=(0,_list.serializeListIdForFolderRoute)(e);return o?{name:_mail_constants.RouteNames.ATTACHMENT,params:{serializedListId:o,groupId:t,attachmentId:r}}:null}function buildSearchRouteFromListId(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,_list.recreateListId)(e,t),o=(0,_list.serializeListIdForRoute)(r);return o?{name:_mail_constants.RouteNames.SEARCH,params:{query:o}}:null}function buildSearchRouteFromQuery(e){return buildSearchRouteFromListId((0,_list.convertSearchQueryToListId)(e))}function buildTutorialRoute(){return{name:_mail_constants.RouteNames.TUTORIAL}}function buildSmartViewRoute(e,t){return e===_mail_constants.SmartViewTypes.TUTORIAL?buildTutorialRoute():buildSearchRouteFromQuery((0,_smartview.getSmartViewSearchQuery)(e,t))}function buildSettingsRoute(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:_mail_constants.RouteNames.SETTINGS,params:e}}function buildComposeRouteFromCsid(e){return{name:_mail_constants.RouteNames.NEW_DRAFT,params:{csid:e}}}function getCsidFromRoute(e){var t=e.params.csid;return t}function filterQueryParams(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e.query||{}).filter(function(e){return _mail_constants.FILTER_QUERY_PARAMS.indexOf(e)===-1}).reduce(function(t,r){var o;return _extends({},t,(o={},o[r]=e.query[r],o))},{})}exports.__esModule=!0,exports.getUnsavedDataFromRoute=exports.buildSponsoredMessageRoute=exports.buildFolderRouteFromFolderId=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};exports.routesEqual=routesEqual,exports.buildMessageRouteFromFolderIdGroupId=buildMessageRouteFromFolderIdGroupId,exports.buildFolderRouteFromListId=buildFolderRouteFromListId,exports.buildAttachmentRouteFromListId=buildAttachmentRouteFromListId,exports.buildSearchRouteFromListId=buildSearchRouteFromListId,exports.buildSearchRouteFromQuery=buildSearchRouteFromQuery,exports.buildSmartViewRoute=buildSmartViewRoute,exports.buildSettingsRoute=buildSettingsRoute,exports.buildComposeRouteFromCsid=buildComposeRouteFromCsid,exports.getCsidFromRoute=getCsidFromRoute,exports.filterQueryParams=filterQueryParams;var _object=require("./object"),_list=require("./list"),_mail_constants=require("../mail_constants"),_smartview=require("./smartview"),buildFolderRouteFromFolderId=exports.buildFolderRouteFromFolderId=function(e){return buildFolderRouteFromListId((0,_list.getListIdFromFolderId)(e))},buildSponsoredMessageRoute=exports.buildSponsoredMessageRoute=function(e,t){return{name:_mail_constants.RouteNames.SPONSORED_MESSAGE,params:{fid:(0,_list.serializeListIdForFolderRoute)(e),creativeId:t}}},getUnsavedDataFromRoute=exports.getUnsavedDataFromRoute=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.unsavedData,r=void 0===t?{}:t;return r};
},{"../mail_constants":"./platform/mail_constants","./list":"./platform/utils/list","./object":"./platform/utils/object","./smartview":"./platform/utils/smartview"}],"./platform/utils/script_loader":[function(require,module,exports){
"use strict";function loadScript(e){return new Promise(function(t,r){var n=document.createElement("script"),a=document.getElementsByTagName("head")[0];n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t())}:(n.onload=function(){return t()},n.onerror=function(){return r(new Error("Failed to load script from "+e))}),n.type="text/javascript",n.setAttribute("data-origin","norrin"),n.setAttribute("data-inserted-time",Date.now()),n.src=e,a.appendChild(n),setTimeout(function(){return a.removeChild(n)},1e3)})}exports.__esModule=!0,exports.loadScript=loadScript;
},{}],"./platform/utils/smartview":[function(require,module,exports){
"use strict";function getSmartViewType(e){return e&&e.types?e.types[0]:""}function getSmartViewSearchQuery(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};switch(e){case _mail_constants.SmartViewTypes.UNREAD:r={keyword:"is:unread",excludefolders:[_mail_constants.FolderTypes.ARCHIVE],referrer:_mail_constants.ListReferrer.SMARTVIEW};break;case _mail_constants.SmartViewTypes.STARRED:r={keyword:"is:starred",referrer:_mail_constants.ListReferrer.SMARTVIEW};break;case _mail_constants.SmartViewTypes.PHOTOS:r={listContentType:"IMAGES",referrer:_mail_constants.ListReferrer.SMARTVIEW};break;case _mail_constants.SmartViewTypes.DOCUMENTS:r={listContentType:"DOCUMENTS",referrer:_mail_constants.ListReferrer.SMARTVIEW}}return Object.assign(r,t)}function getSmartViewNameFromListId(e){var t=(0,_list.getKeywordFromListId)(e),r=(0,_list.getListContentTypeFromListId)(e);if(t&&t.indexOf(":")!==-1)return t.split(":")[1].toUpperCase();if(r)switch(r){case"IMAGES":return _mail_constants.SmartViewTypes.PHOTOS;case"DOCUMENTS":return _mail_constants.SmartViewTypes.DOCUMENTS}return""}exports.__esModule=!0,exports.getSmartViewType=getSmartViewType,exports.getSmartViewSearchQuery=getSmartViewSearchQuery,exports.getSmartViewNameFromListId=getSmartViewNameFromListId;var _mail_constants=require("../mail_constants"),_list=require("./list");
},{"../mail_constants":"./platform/mail_constants","./list":"./platform/utils/list"}],"./platform/utils/string":[function(require,module,exports){
"use strict";function mightNeedJoiner(u){return u.charCodeAt(0)>=1568}function nextNeedsJoiner(u){return u=u.slice(-1),u&&mightNeedJoiner(u)&&NEXT_NEEDS_JOINER.test(u)}function previousNeedsJoiner(u){return u=u[0],u&&mightNeedJoiner(u)&&PREVIOUS_NEEDS_JOINER.test(u)}function segmentText(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",E=findPrefixIgnoreCase(u,e);if(E>0&&E++,E>=0){var n=E+e.length,r=u.substring(0,E),t=u.substring(E,n),D=u.substring(n);return addJoiners([r,t,D])}return[u]}function addJoiners(u){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ZWJ_UNICODE_CHAR;return u.forEach(function(u,E,n){0!==E&&previousNeedsJoiner(u)&&nextNeedsJoiner(n[E-1])&&(n[E-1]=n[E-1]+e,n[E]=e+n[E]),n[E+1]&&nextNeedsJoiner(u)&&previousNeedsJoiner(n[E+1])&&(n[E+1]=e+n[E+1],n[E]=n[E]+e)}),u}function escapeRegExp(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return u.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function truncateString(u,e,E){var n="";return u=u||"",e=e||0,E=void 0!==E?E:"...",n=u,u.length>e&&(n=u.substr(0,e-E.length)+E),n}exports.__esModule=!0,exports.segmentText=segmentText,exports.addJoiners=addJoiners,exports.escapeRegExp=escapeRegExp,exports.truncateString=truncateString;var ZWJ_UNICODE_CHAR="",NEXT_NEEDS_JOINER=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u08A0-\u08A9\u08AF\u08B0\u08B3\u08B4\u1807\u1820-\u1877\u1887-\u18A8\u18AA\uA840-\uA872]|\uD802[\uDEC0-\uDEC4\uDECD\uDED3-\uDEDC\uDEDE-\uDEE0\uDEEB-\uDEEE\uDF80\uDF82\uDF86-\uDF88\uDF8A\uDF8B\uDF8D\uDF90\uDFAD\uDFAE]/,PREVIOUS_NEEDS_JOINER=/[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0855\u08A0-\u08AC\u08AE-\u08B4\u1807\u1820-\u1877\u1887-\u18A8\u18AA\uA840-\uA871]|\uD802[\uDEC0-\uDEC5\uDEC7\uDEC9\uDECA\uDECE-\uDED6\uDED8-\uDEE1\uDEE4\uDEEB-\uDEEF\uDF80-\uDF91\uDFA9-\uDFAE]/,ONE_OR_MORE_SPACE=" +",findPrefixIgnoreCase=function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",E=escapeRegExp(e);return u.search(new RegExp("(^"+E+"|"+ONE_OR_MORE_SPACE+E+")","i"))};
},{}],"./platform/utils/suggestions":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function transformXobniSuggestionsToSearchSuggestions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach(function(e){Object.keys(e.entities).forEach(function(n){var i=e.entities[n],o=e.intent===_mail_constants.SuggestionIntent.ALL;t.push(Object.assign({},i,o?{name:(0,_unescape2.default)(i.name)}:null))})}),t}function transformXobniContactIntoSuggestion(e){return{emailIds:e.emails,imageUrl:"https://proddata.xobni.yahoo.com/v4/contacts/"+e.xobniId+"/photo",name:e.name,serviceId:e.xobniId,sourceService:"XOBNI",type:_mail_constants.SuggestionType.PERSON}}function filterPeopleSuggestions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return transformXobniSuggestionsToSearchSuggestions(e.filter(function(e){return e.intent===_mail_constants.SuggestionIntent.PEOPLE}).filter(function(e){var t=e.entities;return Object.keys(t).forEach(function(e){var n=t[e];n.type!==_mail_constants.SuggestionType.PERSON||n.emailIds&&0!==n.emailIds.length||delete t[e]}),Boolean(Object.keys(t).length)}))}function filterTextualSuggestions(e){return transformXobniSuggestionsToSearchSuggestions(e.filter(function(e){return e.intent===_mail_constants.SuggestionIntent.ALL}).filter(function(e){var t=e.entities;return Object.keys(t).forEach(function(e){var n=t[e];n.type!==_mail_constants.SuggestionType.KEYWORD||n.name||delete t[e]}),Boolean(Object.keys(t).length)}))}function filterImportantsSuggestions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=new RegExp("(^|\\s)"+(0,_string.escapeRegExp)(t),"gi");return e.filter(function(e){var i=e.name,o=void 0===i?"":i,s=e.backyard,r=void 0===s?"":s,u=e.emails,a=void 0===u?[]:u,g=o+" "+r+" "+a.join(" ");return t&&g.search(n)!==-1}).map(function(e){return transformXobniContactIntoSuggestion(e)}).filter(function(e,t,n){return n.findIndex(function(t){return t.serviceId===e.serviceId})===t})}function reconcileSuggestions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.map(function(e){var n=t.find(function(t){return t.serviceId===e.serviceId});return"undefined"!=typeof n?n:e}),i=t.filter(function(e){return!n.find(function(t){return t.serviceId===e.serviceId})}),o=[].concat(n,i);return o}function flattenPeopleSuggestionsByEmailId(e){var t=[];return e.forEach(function(e){e.emailIds.forEach(function(n){var i=JSON.parse(JSON.stringify(e));i.emailIds=[n],t.push(i)})}),t}function getReconciledSuggestions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2],i=filterPeopleSuggestions(e),o=filterTextualSuggestions(e).slice(0,MAX_SUGGESTIONS),s=filterImportantsSuggestions(t,n),r=reconcileSuggestions(s,i),u=[];return r.length&&(u=r.slice(0,Math.max(3,MAX_SUGGESTIONS-o.length))),u=u.concat(o.splice(0,Math.max(3,MAX_SUGGESTIONS-u.length))),u.slice(0,MAX_SUGGESTIONS)}exports.__esModule=!0,exports.filterPeopleSuggestions=filterPeopleSuggestions,exports.filterTextualSuggestions=filterTextualSuggestions,exports.filterImportantsSuggestions=filterImportantsSuggestions,exports.reconcileSuggestions=reconcileSuggestions,exports.flattenPeopleSuggestionsByEmailId=flattenPeopleSuggestionsByEmailId,exports.getReconciledSuggestions=getReconciledSuggestions;var _mail_constants=require("../../platform/mail_constants"),_string=require("../../platform/utils/string"),_unescape=require("lodash/unescape"),_unescape2=_interopRequireDefault(_unescape),MAX_SUGGESTIONS=6;
},{"../../platform/mail_constants":"./platform/mail_constants","../../platform/utils/string":"./platform/utils/string","lodash/unescape":"./node_modules/lodash/unescape.js"}],316:[function(require,module,exports){
"use strict";function getSearchTabTitleFromListId(e,t,r,i){var o=(0,_list.getBootcampApiQueryParams)(e),n=o.name,l=o.keyword,a=o.accountIds,c=void 0===a?[]:a,u=o.folders,d=void 0===u?[]:u,s=(0,_list.isPeopleSearch)(e)?n:l,f=void 0;if(!t.length||!r.length)return s;if(d.length){var m=(0,_folder.flattenFolderTree)(r),g=m[d[0]],h=g.accountId,p=t.find(function(e){return e.id===h}),_=(0,_account2.getProviderFromAccount)(p);f=1===t.length?g.name:(p.description||i[_])+"/"+g.name}else if(1===c.length){var v=t.find(function(e){return e.id===c[0]}),T=(0,_account2.getProviderFromAccount)(v);f=1===t.length?f:v.description||i[T]}return f?s?f+" "+s:f:s}exports.__esModule=!0,exports.getSearchTabTitleFromListId=getSearchTabTitleFromListId;var _account2=require("../../platform/utils/account"),_folder=require("../../platform/utils/folder"),_list=require("../../platform/utils/list");
},{"../../platform/utils/account":"./platform/utils/account","../../platform/utils/folder":"./platform/utils/folder","../../platform/utils/list":"./platform/utils/list"}],"./platform/utils/timezone":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getCurrentOffset(e){var t=offsetCache.get(e);return void 0===t&&(t=(0,_date.getTimezoneOffset)(new Date,e),offsetCache.set(e,t)),t}function getFormattedOffset(e,t){return(0,_date.formatDate)(new Date(Date.UTC(2016,0,1)+6e4*Math.abs(e)),t,{hour12:!1,timeZone:"UTC",hour:"numeric",minute:"numeric"})}function getTimezoneLongName(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,a=(0,_date.formatDate)(r,t,{timeZone:e,year:"numeric"});return(0,_date.formatDate)(r,t,{timeZone:e,year:"numeric",timeZoneName:"long"}).replace(a,"").replace(/,/g,"").trim()}exports.__esModule=!0,exports.getCurrentOffset=getCurrentOffset,exports.getFormattedOffset=getFormattedOffset,exports.getTimezoneLongName=getTimezoneLongName;var _date=require("./date"),_lruCache=require("lru-cache"),_lruCache2=_interopRequireDefault(_lruCache),offsetCache=new _lruCache2.default({max:500,maxAge:3e5});
},{"./date":"./platform/utils/date","lru-cache":"./node_modules/lru-cache/lib/lru-cache.js"}],317:[function(require,module,exports){
"use strict";function strReplace(t,e,n){return void 0===t?"undefined":null===t?"null":t.toString().replace(e,n)}function inHTMLData(t){return strReplace(t,LT,"&lt;")}function inDoubleQuotedAttr(t){return strReplace(t,QUOT,"&quot;")}exports.__esModule=!0,exports.inHTMLData=inHTMLData,exports.inDoubleQuotedAttr=inDoubleQuotedAttr;var LT=/</g,QUOT=/"/g;
},{}],"./platform/utoa/browser":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default=function(e){return btoa(unescape(encodeURIComponent(e)))},module.exports=exports.default;
},{}],318:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_mail_constants=require("../mail_constants"),_logger=require("./logger"),_logger2=_interopRequireDefault(_logger),PROXY_API_ROUTE_BASE_ENDPOINT=_mail_constants.YCPI_PATH_PREFIX+"/video_api",TIMEOUT=3e3,VideoAPIClient=function(){function t(e){_classCallCheck(this,t),this.lang=e.locale,this.region=e.region}return t.prototype.request=function(t){var e={region:this.region,lang:this.lang,dev_type:"desktop",site:"mail",sort_by:"recent",channels:t.channel_alias,count:t.count,start:t.start,image_sizes:"175x219"},r=PROXY_API_ROUTE_BASE_ENDPOINT+"/getVideos",n=new _http_transport2.default(_http_transport.HTTP_METHODS.GET,r,{timeout:TIMEOUT});n.setHeader("Accept","application/json");var o=_logger2.default.feature("video_api_client"),a=n.send(e);return a.then(o.logSuccessAndLatency,o.logFailure),a},t}();exports.default=VideoAPIClient,module.exports=exports.default;
},{"../http_transport":"./platform/http_transport","../mail_constants":"./platform/mail_constants","./logger":319}],319:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger);exports.default=_norrinLogger2.default.create("norrin/video_client"),module.exports=exports.default;
},{"norrin-logger":"./node_modules/norrin-logger/index.js"}],"./platform/web_storage":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function readFromLocalStorage(e){if("undefined"!=typeof Storage&&"string"==typeof e)return localStorage.getItem(e)}function writeToLocalStorage(e,t){if("undefined"!=typeof Storage){(0,_invariant2.default)("string"==typeof e,"key is not a string");try{localStorage.setItem(e,t)}catch(e){}}}exports.__esModule=!0,exports.readFromLocalStorage=readFromLocalStorage,exports.writeToLocalStorage=writeToLocalStorage;var _invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant);
},{"../invariant":"./platform/invariant"}],320:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Bloodhound(e){e||(e=["id"]),this.cacheableFields=this.toArray(e),this.createDb()}exports.__esModule=!0;var _uniq=require("lodash/uniq"),_uniq2=_interopRequireDefault(_uniq),_trie=require("./trie"),_trie2=_interopRequireDefault(_trie);Bloodhound.prototype={createDb:function(){this.db=new _trie2.default},add:function(e){return this.toArray(e).forEach(function(e){this.cacheableFields.forEach(function(t){this.db.insert(this.normalizeKey(e[t]),e)},this)},this),this},get:function(e){return(0,_uniq2.default)(this.db.find(this.normalizeKey(e)))},normalizeKey:function(e){return e?(e+"").toLowerCase():""},toArray:function(e){return Array.isArray(e)?e:[e]}},exports.default=Bloodhound,module.exports=exports.default;
},{"./trie":326,"lodash/uniq":"./node_modules/lodash/uniq.js"}],321:[function(require,module,exports){
"use strict";function CacheableXobniClient(){XobniClient.apply(this,arguments),this.instanceOptions=Object.assign({},{cacheableFields:["name","email"]},this.instanceOptions),this._createCaches()}var XobniClient=require("./client"),Bloodhound=require("./bloodhound");CacheableXobniClient.prototype=Object.create(XobniClient.prototype),CacheableXobniClient.prototype.search=function(t,e){var i=t.query;if(t.recipientList&&t.recipientList.length&&(i+="|"+t.recipientList.sort().join(",")),this._history[i])return e(null,{contacts:this._history[i]});var n=XobniClient.prototype.search,o=this._db.get(i),c=o&&o.length;c&&(o=o.slice(0,Math.ceil(t.limit/2)),e(null,this.normalizeResponse({contacts:o}))),n.call(this,t).then(function(t){c&&(t.contacts=this.uniqueBy("email",o,t.contacts)),e(null,t),this._db.add(t.contacts),this._history[i]=t.contacts}.bind(this)).catch(e)},CacheableXobniClient.prototype._createCaches=function(){this._history=Object.create(null),this._db=new Bloodhound(this.instanceOptions.cacheableFields)},CacheableXobniClient.prototype.uniqueBy=function(t){var e,i=Array.prototype.slice.call(arguments,1),n=Object.create(null);return i.reduce(function(i,o){return o.forEach(function(o){e=o[t],e&&!n[e]&&(n[e]=o,i.push(o))}),i},[])},module.exports=CacheableXobniClient;
},{"./bloodhound":320,"./client":322}],322:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function XobniClient(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.loginHash)throw new Error("Xobni `loginHash` is a required option");this.ymreqidGenerator=new _ymreqid2.default(t.loginHash,_mail_constants.YMREQ_CLIENT_ID,_mail_constants.SESSION_ID),this.crumb=t.crumb,this.wssid=t.wssid,this.httpRetry=t.httpRetry,this.instanceOptions=t}exports.__esModule=!0;var _logger=require("./logger"),_logger2=_interopRequireDefault(_logger),_http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_ymreqid=require("../ymreqid"),_ymreqid2=_interopRequireDefault(_ymreqid),_mail_constants=require("../mail_constants"),_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_mapper=require("./mapper"),_mapper2=_interopRequireDefault(_mapper);XobniClient.prototype.transport=function(t,e){e||(e=_http_transport.HTTP_METHODS.GET);var n=new _http_transport2.default(e,t,{httpRetry:this.httpRetry});return n.setHeader("Accept","application/json"),n.withCredentials=!0,n},XobniClient.prototype.getRequestId=function(){return this.ymreqidGenerator.generate()},XobniClient.prototype.getSearchQueries=function(t){return t=Object.assign({query:"",includeLists:!0,includeTypes:"smtp",contextFrom:"",recipientList:[],identifier:"",limit:6},t),{q:t.query,i_l:t.includeLists,i_t:t.includeTypes,c_t:t.recipientList.join(","),c_f:t.contextFrom,k:t.identifier,l:t.limit,ymreqid:this.getRequestId()}},XobniClient.prototype.getOptions=function(t){var e=Object.assign({},this.instanceOptions,t);return{host:e.host}},XobniClient.prototype.isUserXobnified=function(t){t=this.getOptions(t);var e=this.transport(t.host+"/pachinko/v2/xobnified");return e.send({ymreqid:this.getRequestId()}).then(Boolean.bind(null,!0),Boolean.bind(null,!1))},XobniClient.prototype.normalizeResponse=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&"undefined"!=typeof t[n]&&(e[n]=t[n]);return e},XobniClient.prototype.normalizeImportantContactsResponse=function(t){return(t.endpoint_info_list||[]).map(function(t){var e=t.endpoint?[t.endpoint]:[],n=e.filter(function(t){return/^smtp:(\S+)/.test(t)}).map(function(t){return t.match(/^smtp:(\S+)/)[1]});return{emails:n,name:t.c_name,xobniId:t.c_id,id:n[0]}})},XobniClient.prototype.request=function(t,e){return this.transport(t).send(e).then(function(t){return t.body})},XobniClient.prototype.search=function(t,e){var n=this;1===arguments.length&&(e=t,t={}),t=this.getOptions(t);var i=this.getSearchQueries(e),r=_logger2.default.feature(_mail_constants.ApiClientLoggerNames.XobniClient,{apiName:"search",ymreqid:i.ymreqid,crumb:this.crumb}),o=this.request(t.host+"/v4/endpoints/s",i).then(function(t){return n.normalizeResponse({identifier:t.k,contacts:t.r.map(function(t){return"LIST"===t.i?{id:t.n+t.ct,email:t.n+t.ct,name:t.n,list:t.es.map(function(t){return{id:t.e,email:t.e,name:t.n}})}:{id:t.c,email:t.e,name:t.nd}})})});return o.then(r.logSuccessAndLatency,r.logFailure),o},XobniClient.prototype.importantContacts=function(t){var e=this;if(!t)return Promise.resolve([]);var n={include_types:"smtp",context_from:t,max_count:100,ymreqid:this.getRequestId()},i=_logger2.default.feature(_mail_constants.ApiClientLoggerNames.XobniClient,{apiName:"search",ymreqid:n.ymreqid,crumb:this.crumb}),r=this.request(this.instanceOptions.host+"/v4/endpoints/important",n).then(function(t){return e.normalizeImportantContactsResponse(t)});return r.then(i.logSuccessAndLatency,i.logFailure),r},XobniClient.prototype.contactDetails=function(t){var e=t.email,n=t.isCompose;if(e){var i=_logger2.default.feature(_mail_constants.ApiClientLoggerNames.XobniClient,{apiName:"search"});(0,_invariant2.default)(this.instanceOptions.host,"host is undefined");var r="smtp:"+e,o=this.request(this.instanceOptions.host+"/v4/contacts/by/ep",{ep:r,is_composing:n,enable_tmp:!0}).then(function(t){return(0,_mapper2.default)(Object.assign({ep:r},t))});return o.then(i.logSuccessAndLatency,i.logFailure),o}},XobniClient.prototype.formatted=function(t,e){var n=this.getSearchQueries(t),i=_logger2.default.feature(_mail_constants.ApiClientLoggerNames.XobniClient,{apiName:"search"});(0,_invariant2.default)(this.instanceOptions.host,"host is undefined");var r=this.request(this.instanceOptions.host+"/v4/util/credentials/formatted",n).then(function(t){return(0,_mapper.formattedStatusMapper)(t,e)});return r.then(i.logSuccessAndLatency,i.logFailure),r},XobniClient.prototype.contactsWithGroupName=function(){var t={format:"json",view:"compact",count:7e3,ymreqid:this.getRequestId(),custId:"ymail",wssid:this.wssid},e=_logger2.default.feature("xobni_client_call",{apiName:"contactsWithGroupName",ymreqid:t.ymreqid}),n="https://data.mail.yahoo.com/classicab/v2/contacts",i=this.request(n,t).then(function(t){return(0,_mapper.formatGroupContactsToXobni)(t.contacts)});return i.then(e.logSuccessAndLatency,e.logFailure),i},XobniClient.prototype.getMagicTriageMessages=function(t){var e=t.url,n={format:"json",ymreqid:this.getRequestId(),custId:"ymail",wssid:this.wssid,url:e},i=_logger2.default.feature("xobni_client_call",{apiName:"getMagicTriageMessages",ymreqid:n.ymreqid}),r=e,o=this.request(r,n);return o.then(i.logSuccessAndLatency,i.logFailure),o},exports.default=XobniClient,module.exports=exports.default;
},{"../http_transport":"./platform/http_transport","../invariant":"./platform/invariant","../mail_constants":"./platform/mail_constants","../ymreqid":"./platform/ymreqid","./logger":324,"./mapper":325}],323:[function(require,module,exports){
"use strict";module.exports=require("./cacheable_client");
},{"./cacheable_client":321}],324:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger);exports.default=_norrinLogger2.default.create("norrin/xobni_client"),module.exports=exports.default;
},{"norrin-logger":"./node_modules/norrin-logger/index.js"}],325:[function(require,module,exports){
"use strict";function failedContactMapper(t){var e=t.ep,r=t.xobniId,n=void 0===r?"":r,a=[e].filter(function(t){return/^smtp:(\S+)/.test(t)}).map(function(t){return t.match(/^smtp:(\S+)/)[1]});return{xobniId:n,emails:a,name:"",phone:"",id:""}}function contactDetailsMapper(t){var e=t.ep,r=t.contacts_info,n=t.contacts_by_ep,a=["twitter","facebook","linkedin","flickr"];if(!n||!n[e])return failedContactMapper({ep:e});var o=n[e],i=o[0];if(!r||!r[i])return failedContactMapper({ep:e,xobniId:i});var c=r[i],s=c.name,u=c.role,p=void 0===u?{}:u,f=c.attributes,d=c.endpoints,m=p.position,l=void 0===m?"":m,v=p.company,y=void 0===v?"":v,h=d.find(function(t){var e=t.ep;return/^tel:(\+|)\d+/.test(e)}),_=f.filter(function(t){var e=t.key;return"link"===e}),g=d.filter(function(t){var e=t.ep;return/^smtp:(\S+)/.test(e)}).map(function(t){var e=t.ep;return e.match(/^smtp:(\S+)/)[1]}),C=d.filter(function(t){var e=t.ep;return/^smtp:(\S+)/.test(e)}).map(function(t){var e=t.ep,r=t.type,n=t.display;return{address:n||e.match(/^smtp:(\S+)/)[1],type:r}}),S=d.filter(function(t){var e=t.ep;return/^tel:(\+|)\d+/.test(e)}).map(function(t){var e=t.ep,r=t.type,n=t.display;return{number:n||e.match(/^tel:(\S+)/)[1],type:r}}),b=(f.find(function(t){var e=t.key,r=t.source;return"user_id"===e&&"corpdir"===r})||{}).value,A={xobniId:i,emails:g,id:g[0],name:s?s.name:"",phone:h?h.display:"",position:l,company:y,emailsWithType:C,phonesWithType:S,backyard:b};return a.forEach(function(t){var e=_.find(function(e){var r=e.source;return r===t});e&&(A[t]=e.value)}),A}function formattedStatusMapper(t,e){var r=t.results;return Object.keys(e).reduce(function(t,n){var a=e[n],o=r[a];return o&&(t[n]={spid:a,connected:!o.is_expired}),t},{})}function formatGroupContactsToXobni(t){var e=t.filter(function(t){var e=t.emails;return"undefined"!=typeof e}),r=_setupCategories(e),n={};return e.forEach(function(t){var e=t.categories,a=t.emails,o=t.name,i=[_constants.ALL_CONTACTS_KEY];Array.isArray(e)&&e.forEach(function(t){var e=t.id.toString();r.hasOwnProperty(e)&&i.push(e)});var c=a.map(function(t){return t.ep});a.forEach(function(t){var e=t.ep;n[e]={id:e,categories:i,emails:c,name:_getFullname(o)},i.forEach(function(t){return r[t].contactIds.push(e)})})}),{contacts:n,categoryIdToGroupNameAndContacts:r}}function _getFullname(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.givenName,r=t.familyName;return((e||"")+" "+(r||"")).trim()}function _setupCategories(t){var e,r=(e={},e[_constants.ALL_CONTACTS_KEY]={categoryName:"All Contacts",contactIds:[]},e);return t.forEach(function(t){var e=t.categories;Array.isArray(e)&&e.forEach(function(t){!r.hasOwnProperty(t.id.toString())&&t.name&&(r[t.id]={categoryName:t.name,contactIds:[]})})}),r}exports.__esModule=!0,exports.default=contactDetailsMapper,exports.formattedStatusMapper=formattedStatusMapper,exports.formatGroupContactsToXobni=formatGroupContactsToXobni;var _constants=require("../../molecules/contact_picker/constants");
},{"../../molecules/contact_picker/constants":"./molecules/contact_picker/constants"}],326:[function(require,module,exports){
"use strict";function Trie(n){this.key=n,this.value=null,this.descendantCount=0,this.children={}}Trie.prototype={insert:function(n,e){if(!arguments.length)throw new Error("Invalid number of arguments, requires key and value");this._insert(n,e)},_insert:function(n,e,i){var t=arguments.length;if(i===n.length)return void(null===this.value&&(this.value=e));t<3&&(i=0),this.descendantCount=this.descendantCount+1;var r=n[i];void 0===this.children[r]&&(this.children[r]=new Trie(r)),this.children[r]._insert(n,e,i+1)},find:function(n){return!n||n&&0===n.length?[]:this._find(n)},_find:function(n,e){void 0===e&&(e=0);var i=this.children[n[e]];return i?e===n.length-1?i._getChildrenValues(n):i._find(n,e+1):[]},_getChildrenValues:function(n){var e,i=[];n||(n=""),this.value&&i.push(this.value);for(var t in this.children)this.children.hasOwnProperty(t)&&(e=this.children[t],i=i.concat(e._getChildrenValues(n+t)));return i}},module.exports=Trie;
},{}],"./platform/ymreqid":[function(require,module,exports){
"use strict";function Ymreqid(t,i,n,e,r){if(!t)throw new Error("guidMd5 is required argument");if("number"!=typeof i&&"number"!=typeof n)throw new Error("clientId and sessionId are required and have to be numeric values");this.state={guiMd5Section:binstring.toNBits(binstring.hexToBin(t),64),clientIdSection:binstring.toNBits(i.toString(2),8),sessionSection:binstring.toNBits(n.toString(2),16),versionSection:binstring.toNBits(1..toString(2),8),randomClientSection:binstring.toNBits((e||Math.floor(256*Math.random())).toString(2),8),debugSection:binstring.toNBits((r||0).toString(2),8)},this._seq=0}var binstring=require("../utils").binstring;Ymreqid.prototype.generate=function(){var t=binstring.toNBits(this._getNextSeq().toString(2),16),i=[this.state.guiMd5Section,this.state.clientIdSection,this.state.sessionSection,t,this.state.versionSection,this.state.randomClientSection,this.state.debugSection].join("");return this._formatBinary(i)},Ymreqid.prototype._formatBinary=function(t){var i=[8,4,4,4,12],n=binstring.binToHex(t),e=0;return i.map(function(t){var i=n.substr(e,t);return e+=t,i}).join("-")},Ymreqid.prototype._getNextSeq=function(){return this._seq>65535&&(this._seq=0),this._seq++},Ymreqid.getSeq=function(t){var i=t.substr(26,4);return parseInt(i,16)},module.exports=Ymreqid;
},{"../utils":"./platform/utils"}],327:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _http_transport=require("../http_transport"),_http_transport2=_interopRequireDefault(_http_transport),_constants=require("./constants"),_invariant=require("../invariant"),_invariant2=_interopRequireDefault(_invariant),_logger=require("./logger"),_logger2=_interopRequireDefault(_logger),YQLClient=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.locale,r=void 0===n?"en-US":n;_classCallCheck(this,t),this.locale=r}return t.prototype.request=function(t,e){(0,_invariant2.default)("cities"===t,"Unknown apiName "+t);var n=_constants.YQL_ENDPOINT+"/"+t,r=_logger2.default.feature("yql_client_call",{apiName:t}),a=new _http_transport2.default("GET",n).send(e);return a.then(r.logSuccessAndLatency,r.logFailure),a.then(function(t){return JSON.parse(t.text)})},t}();exports.default=YQLClient,module.exports=exports.default;
},{"../http_transport":"./platform/http_transport","../invariant":"./platform/invariant","./constants":328,"./logger":329}],328:[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.CITIES_QUERY=exports.YQL_BASE_URL=exports.YQL_ENDPOINT=void 0;var _mail_constants=require("../mail_constants"),YQL_ENDPOINT=exports.YQL_ENDPOINT=_mail_constants.YCPI_PATH_PREFIX+"/yql",YQL_BASE_URL=exports.YQL_BASE_URL="https://query.yahooapis.com/v1/public/yql",CITIES_QUERY=exports.CITIES_QUERY="select * from geo.places where text=@input and placeTypeName.code=7 and lang=@locale";
},{"../mail_constants":"./platform/mail_constants"}],329:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _norrinLogger=require("norrin-logger"),_norrinLogger2=_interopRequireDefault(_norrinLogger);exports.default=_norrinLogger2.default.create("norrin/yql_client"),module.exports=exports.default;
},{"norrin-logger":"./node_modules/norrin-logger/index.js"}],"./reducers_selectors/address_book":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_react_action_constants=require("../platform/react_action_constants"),_redux=require("redux"),_mail_constants=require("../platform/mail_constants"),_string=require("../platform/utils/string"),contacts=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case _react_action_constants.mail.CONTACT_GROUPS_RECEIVED:return _extends({},t,e.response.contacts)}return t},contactCategories=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case _react_action_constants.mail.CONTACT_GROUPS_RECEIVED:return _extends({},t,e.response.categoryIdToGroupNameAndContacts)}return t},contactCategoriesStatus=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_mail_constants.RecordStates.DOES_NOT_EXIST,e=arguments[1];switch(e.type){case _react_action_constants.mail.CONTACT_GROUPS_REQUESTED:return _mail_constants.RecordStates.LOADING;case _react_action_constants.mail.CONTACT_GROUPS_RECEIVED:return _mail_constants.RecordStates.LOADED;case _react_action_constants.mail.CONTACT_GROUPS_FAILED:return _mail_constants.RecordStates.ERROR}return t},_filterContactIdsBy=function(t,e){var n=e.query,a=void 0===n?"":n,r=e.contactIds,o=void 0===r?[]:r,c=new RegExp("\\b"+(0,_string.escapeRegExp)(a.trim())+"\\w*","i");return o.filter(function(e){var n=t[e],a=n.id,r=n.name;return c.test(r+" "+a)})},addressBook=(0,_redux.combineReducers)({contacts:contacts,contactCategories:contactCategories,contactCategoriesStatus:contactCategoriesStatus});exports.default=addressBook;var selectors=exports.selectors=function(t){return{getContacts:function(){return t.contacts},getContactCategories:function(){return t.contactCategories},getContactCategoriesStatus:function(){return t.contactCategoriesStatus},filterContactIdsBy:function(e){var n=e.query,a=e.contactIds;return _filterContactIdsBy(t.contacts,{query:n,contactIds:a})},doesCategoryIdExist:function(e){return t.contactCategories.hasOwnProperty(e)},getContactIdsByCategoryId:function(e){return t.contactCategories[e].contactIds},getContactName:function(e){return t.contacts[e].name}}};
},{"../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/string":"./platform/utils/string","redux":"./node_modules/redux/lib/index.js"}],"./reducers_selectors/attachments":[function(require,module,exports){
"use strict";function attachments(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1],_=a.type,c=a.listData;switch(_){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:if(!c.attachments)return t;var e=getAttachmentsToAdd(t,c.attachments);return Object.keys(e).length?_extends({},t,e):t;default:return t}}function getAttachmentsToAdd(t,a){return Object.keys(a).reduce(function(_,c){var e=a[c];return t.hasOwnProperty(c)||(_[c]=e),_},{})}exports.__esModule=!0;var _extends=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var _=arguments[a];for(var c in _)Object.prototype.hasOwnProperty.call(_,c)&&(t[c]=_[c])}return t},_react_action_constants=require("../platform/react_action_constants");exports.default=attachments,module.exports=exports.default;
},{"../platform/react_action_constants":"./platform/react_action_constants"}],"./reducers_selectors/documents":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_redux=require("redux"),_react_action_constants=require("../platform/react_action_constants"),_mail_constants=require("../platform/mail_constants"),_invariant=require("../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),status=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_mail_constants.RecordStates.DOES_NOT_EXIST,e=arguments[1];switch(e.type){case _react_action_constants.mail.DOCUMENT_FETCH_REQUESTED:return _mail_constants.RecordStates.LOADING;case _react_action_constants.mail.DOCUMENT_FETCH_SUCCEEDED:return _mail_constants.RecordStates.LOADED;case _react_action_constants.mail.DOCUMENT_FETCH_FAILED:return _mail_constants.RecordStates.ERROR}return t},pages=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case _react_action_constants.mail.DOCUMENT_FETCH_SUCCEEDED:case _react_action_constants.mail.DOCUMENT_PAGE_FETCH_SUCCEEDED:return _extends({},t,e.response.pages)}return t},height=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments[1];switch(e.type){case _react_action_constants.mail.DOCUMENT_FETCH_SUCCEEDED:return e.response.height}return t},width=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments[1];switch(e.type){case _react_action_constants.mail.DOCUMENT_FETCH_SUCCEEDED:return e.response.width}return t},numPages=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1];switch(e.type){case _react_action_constants.mail.DOCUMENT_FETCH_SUCCEEDED:return e.response.numPages}return t},exceptions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case _react_action_constants.mail.DOCUMENT_FETCH_SUCCEEDED:return e.response.exceptions}return t},sheets=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case _react_action_constants.mail.DOCUMENT_FETCH_SUCCEEDED:return e.response.sheets}return t},error=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],a=n.error,t=void 0===a?{}:a,r=t.data||{},s=r.info,c=void 0===s?{}:s,o=c.documentError,_=void 0===o?{}:o;switch(n.type){case _react_action_constants.mail.DOCUMENT_FETCH_SUCCEEDED:case _react_action_constants.mail.DOCUMENT_FETCH_REQUESTED:return{};case _react_action_constants.mail.DOCUMENT_FETCH_FAILED:return _}return e},document=(0,_redux.combineReducers)({pages:pages,height:height,width:width,numPages:numPages,exceptions:exceptions,sheets:sheets,status:status,error:error}),documents=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];switch(n.type){case _react_action_constants.mail.DOCUMENT_FETCH_REQUESTED:case _react_action_constants.mail.DOCUMENT_FETCH_SUCCEEDED:case _react_action_constants.mail.DOCUMENT_FETCH_FAILED:case _react_action_constants.mail.DOCUMENT_PAGE_FETCH_REQUESTED:case _react_action_constants.mail.DOCUMENT_PAGE_FETCH_SUCCEEDED:return(0,_invariant2.default)(n.documentId,"action.documentId is required"),_extends({},e,(t={},t[n.documentId]=document(e[n.documentId],n),t))}return e};exports.default=documents;var selectors=exports.selectors=function(t){return{getState:function(e){return t[e]?t[e].status:_mail_constants.RecordStates.DOES_NOT_EXIST},getDocument:function(e){return t[e]},getError:function(e){return t[e].error},getNumberOfPages:function(e){return t[e].numPages},isDocumentLoaded:function(e){return!(!t[e]||t[e].status!==_mail_constants.RecordStates.LOADED)},isPageFetched:function(e,n){return!(!t[e].pages[n]||t[e].pages[n].state!==_mail_constants.RecordStates.LOADED)}}};
},{"../platform/invariant":"./platform/invariant","../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","redux":"./node_modules/redux/lib/index.js"}],"./reducers_selectors/feature_cues":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_react_action_constants=require("../platform/react_action_constants"),selectors=exports.selectors=function(t){return{isNotSeenBefore:function(e){return!t[e]}}},featureCues=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case _react_action_constants.mail.FEATURE_CLOSED:case _react_action_constants.mail.FEATURE_CUE_MARK_AS_SHOWN_REQUESTED:var r,n=e.name;return _extends({},t,(r={},r[n]=!0,r));default:return t}};exports.default=featureCues;
},{"../platform/react_action_constants":"./platform/react_action_constants"}],"./reducers_selectors/features/helpers/preview_pane_setting":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _mail_constants=require("../../../platform/mail_constants"),_list=require("../../../platform/utils/list"),getPreviewPaneSetting=function(t,e){var s=e.getRouterSelectors,i=(0,_list.getListIdFromRoute)(s().getRoute()),r=(0,_list.getListContentTypeFromListId)(i);return r===_mail_constants.ListContentTypes.MESSAGES?t:_mail_constants.PreviewPaneSettings.NO};exports.default=getPreviewPaneSetting,module.exports=exports.default;
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/list":"./platform/utils/list"}],"./reducers_selectors/features":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.selectors=void 0;var _react_action_constants=require("../../platform/react_action_constants"),_redux=require("redux"),_mail_constants=require("../../platform/mail_constants"),_themes=require("../../platform/theming/themes"),_preview_pane_setting=require("./helpers/preview_pane_setting"),_preview_pane_setting2=_interopRequireDefault(_preview_pane_setting),feature=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments[1];switch(a.type){case _react_action_constants.mail.INITIAL_STATE:return a.features[e]||n;case _react_action_constants.mail.FEATURE_CLOSED:case _react_action_constants.mail.FEATURE_DISABLED:case _react_action_constants.mail.FEATURE_TRY_NOW_REQUESTED:var s=a.fromFeature,r=a.name,i=s||r;if(i===e)return!1;var _=a.nextFeatureCues,o=void 0===_?[]:_;return o.indexOf(i)!==-1||n;case _react_action_constants.mail.SETTINGS_CHANGE_REQUESTED:var c=a.name,u=a.value;return void 0===c||void 0===u?n:c===e?u:n;default:return n}}},features=(0,_redux.combineReducers)({photosCue:feature("photosCue"),isWiderMailExtnEnabled:feature("isWiderMailExtnEnabled"),conversations:feature("conversations"),imapin:feature("imapin"),canAddImapInAccount:feature("canAddImapInAccount"),snippets:feature(_mail_constants.Settings.SNIPPETS),desktopNotification:feature(_mail_constants.Settings.DESKTOP_NOTIFICATION),theme:feature(_mail_constants.Settings.THEME,_themes.Themes.DEFAULT),themeMode:feature(_mail_constants.Settings.THEME_MODE,_themes.ThemeModes.LIGHT),previewpane:feature(_mail_constants.Settings.PREVIEW_PANE,_mail_constants.PreviewPaneSettings.NO),messageListDensity:feature(_mail_constants.Settings.MSG_LIST_DENSITY,_mail_constants.MessageListDensity.SLIM),scrollPerf:feature("scrollPerf"),composeFontSize:feature(_mail_constants.Settings.COMPOSE_FONT_SIZE,_mail_constants.DefaultFont.SIZE),composeFontFamily:feature(_mail_constants.Settings.COMPOSE_FONT_FAMILY,_mail_constants.DefaultFont.FAMILY)});exports.default=features;var selectors=exports.selectors=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return{isEnabled:function(t){return e[t]},getSetting:function(n){switch(n){case _mail_constants.Settings.PREVIEW_PANE:return(0,_preview_pane_setting2.default)(e[n],t);default:return e[n]}}}};
},{"../../platform/mail_constants":"./platform/mail_constants","../../platform/react_action_constants":"./platform/react_action_constants","../../platform/theming/themes":"./platform/theming/themes","./helpers/preview_pane_setting":"./reducers_selectors/features/helpers/preview_pane_setting","redux":"./node_modules/redux/lib/index.js"}],"./reducers_selectors/folders":[function(require,module,exports){
"use strict";function _interopRequireDefault(_){return _&&_.__esModule?_:{default:_}}function folders(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.CREATE_FOLDER_SUCCEEDED:case _react_action_constants.mail.RENAME_FOLDER_SUCCEEDED:var a=Object.keys(t.folderMap||{}).map(function(_){return t.folderMap[_]}).filter(function(t){return!(0,_isEqual2.default)(_[t.id],t)});return a.length?a.reduce(function(_,a){var E;return _extends({},_,(E={},E[a.id]=folder(_[a.id],{type:t.type,folder:a}),E))},_extends({},_)):_;case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:var E=t.folderMap,c=void 0===E?{}:E,n=Object.keys(c);if(!n.length)return _;var e=n.map(function(_){return c[_]}).filter(function(t){return!(0,_isEqual2.default)(_[t.id],t)}),s=Object.keys(_).filter(function(_){return!c[_]});return e.length||s.length?e.reduce(function(_,a){var E;return _extends({},_,(E={},E[a.id]=folder(_[a.id],{type:t.type,folder:a}),E))},(0,_omit2.default)(_,s)):_;case _react_action_constants.mail.DELETE_FOLDER_SUCCEEDED:return(0,_omit2.default)(_,[t.folder.id]);case _react_action_constants.mail.MESSAGES_MOVE_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_READ_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_UNREAD_REQUESTED:case _react_action_constants.mail.DELETE_DRAFT_REQUESTED:case _react_action_constants.mail.SEND_SUCCESS:var o=t.itemsToUpdate,i=void 0===o?[]:o,r=i.filter(function(_){return _.isAffected});return r.length?r.reduce(function(_,a){var E,c,n=a.flags,e=a.folder,s=a.destinationFolder;return _extends({},_,(E={},E[e.id]=folder(_[e.id],{type:t.type,folder:e,flags:n}),E),s?(c={},c[s.id]=folder(_[s.id],{type:t.type,folder:e,isDestinationFolder:!0,flags:n}),c):{})},_extends({},_)):_;default:return _}}exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(_){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var E in a)Object.prototype.hasOwnProperty.call(a,E)&&(_[E]=a[E])}return _},_redux=require("redux"),_react_action_constants=require("../platform/react_action_constants"),_mail_constants=require("../platform/mail_constants"),_isEqual=require("lodash/isEqual"),_isEqual2=_interopRequireDefault(_isEqual),_omit=require("lodash/omit"),_omit2=_interopRequireDefault(_omit),selectors=exports.selectors=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{doesFolderIdExist:function(t){return!!_[t]},getFolderIdsByName:function(t){return Object.keys(_).reduce(function(a,E){return _[E].name===t?a.concat(E):a},[])},getPrimaryFolderTypeByFolderId:function(t){return _[t].types.find(function(_){return _mail_constants.PrimaryFolderTypes.hasOwnProperty(_)})},getAccountIdByFolderId:function(t){return _[t].accountId},getFolderIdsFromFolderType:function(t,a){return Object.keys(_).reduce(function(E,c){return _[c].types.indexOf(t)!==-1&&_[c].accountId===a?E.concat(c):E},[])},__get__:function(t){return _[t]},__getFolderIds__:function(){return Object.keys(_)}}},id=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],a=t.type,E=t.folder;switch(a){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.CREATE_FOLDER_SUCCEEDED:return E.id}return _},name=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],a=t.type,E=t.folder;switch(a){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.CREATE_FOLDER_SUCCEEDED:case _react_action_constants.mail.RENAME_FOLDER_SUCCEEDED:return E.name}return _},accountId=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],a=t.type,E=t.folder;switch(a){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.CREATE_FOLDER_SUCCEEDED:return E.accountId}return _},types=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],a=t.type,E=t.folder;switch(a){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.CREATE_FOLDER_SUCCEEDED:return(0,_isEqual2.default)(_,E.types)?_:E.types}return _},isSystem=function(){var _=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1],a=t.type,E=t.folder;switch(a){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.CREATE_FOLDER_SUCCEEDED:return E.isSystem}return _},total=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],a=t.type,E=t.folder,c=t.isDestinationFolder;switch(a){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.CREATE_FOLDER_SUCCEEDED:return E.total;case _react_action_constants.mail.MESSAGES_MOVE_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.DELETE_DRAFT_REQUESTED:case _react_action_constants.mail.SEND_SUCCESS:return c?_+1:_-1}return _},unread=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],a=t.type,E=t.folder,c=t.isDestinationFolder,n=t.flags,e=void 0===n?{}:n;switch(a){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.CREATE_FOLDER_SUCCEEDED:return E.unread;case _react_action_constants.mail.MESSAGES_MARK_READ_REQUESTED:return _?_-1:_;case _react_action_constants.mail.MESSAGES_MARK_UNREAD_REQUESTED:return _+1;case _react_action_constants.mail.MESSAGES_MOVE_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.DELETE_DRAFT_REQUESTED:case _react_action_constants.mail.SEND_SUCCESS:return c?e.read?_:_+1:e.read?_:_-1;default:return _}},highestModSeq=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments[1],a=t.type,E=t.folder;switch(a){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.CREATE_FOLDER_SUCCEEDED:return E.highestModSeq}return _},uidNext=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments[1],a=t.type,E=t.folder;switch(a){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.CREATE_FOLDER_SUCCEEDED:return E.uidNext}return _},level=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],a=t.type,E=t.folder;switch(a){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.CREATE_FOLDER_SUCCEEDED:return E.level}return _},folder=(0,_redux.combineReducers)({id:id,name:name,accountId:accountId,types:types,isSystem:isSystem,total:total,unread:unread,highestModSeq:highestModSeq,uidNext:uidNext,level:level});exports.default=folders;
},{"../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","lodash/isEqual":"./node_modules/lodash/isEqual.js","lodash/omit":"./node_modules/lodash/omit.js","redux":"./node_modules/redux/lib/index.js"}],"./reducers_selectors/gif_categories":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},_react_action_constants=require("../platform/react_action_constants"),_redux=require("redux"),_mail_constants=require("../platform/mail_constants"),categoryIds=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];switch(e.type){case _react_action_constants.mail.GIF_CATEGORIES_CONTENT_FETCH_SUCCEEDED:return e.categories.map(function(t){return t.searchQuery});default:return t}},categoryStatus=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_mail_constants.RecordStates.DOES_NOT_EXIST,e=arguments[1];switch(e.type){case _react_action_constants.mail.GIF_FETCH_REQUESTED:return _mail_constants.RecordStates.LOADING;case _react_action_constants.mail.GIF_FETCH_SUCCEEDED:return _mail_constants.RecordStates.LOADED;default:return t}},categoriesStatus=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_mail_constants.RecordStates.DOES_NOT_EXIST,e=arguments[1];switch(e.type){case _react_action_constants.mail.GIF_CATEGORIES_CONTENT_FETCH_SUCCEEDED:return _mail_constants.RecordStates.LOADED;case _react_action_constants.mail.GIF_CATEGORIES_CONTENT_FETCH_REQUESTED:return _mail_constants.RecordStates.LOADING;case _react_action_constants.mail.GIF_CATEGORIES_CONTENT_FETCH_FAILED:return _mail_constants.RecordStates.ERROR;default:return t}},categories=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case _react_action_constants.mail.GIF_CATEGORIES_CONTENT_FETCH_SUCCEEDED:return e.categories.reduce(function(a,r){var s,n=t[r.searchQuery]||{},c=n.status;return _extends({},a,(s={},s[r.searchQuery]={status:categoryStatus(c,e),category:r},s))},{});case _react_action_constants.mail.GIF_FETCH_REQUESTED:case _react_action_constants.mail.GIF_FETCH_SUCCEEDED:var a,r=e.query;return t[r]?_extends({},t,(a={},a[r]=_extends({},t[r],{status:categoryStatus(t[r].status,e)}),a)):t;default:return t}};exports.default=(0,_redux.combineReducers)({categories:categories,categoriesStatus:categoriesStatus,categoryIds:categoryIds});var selectors=exports.selectors=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{isGifCategoryQuery:function(e){return t.categories.hasOwnProperty(e)},getGifCategoryStatus:function(e){return t.categories[e].status},getGifCategoryTopItemsUrl:function(e){return t.categories[e].category.topItemsUrl},getGifCategoriesList:function(){return t.categoryIds.map(function(e){return t.categories[e].category})},isCategoryListLoaded:function(){return t.categoriesStatus===_mail_constants.RecordStates.LOADED}}};
},{"../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","redux":"./node_modules/redux/lib/index.js"}],"./reducers_selectors/gif_items":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},_react_action_constants=require("../platform/react_action_constants"),gifItems=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case _react_action_constants.mail.GIF_FETCH_SUCCEEDED:var r=e.listData.gifItems,s=void 0===r?{}:r;return _extends({},t,s);default:return t}};exports.default=gifItems;var selectors=exports.selectors=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getGifItems:function(){return t.gifItems}}};
},{"../platform/react_action_constants":"./platform/react_action_constants"}],"./reducers_selectors":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},_redux=require("redux"),_documents=require("./documents"),_documents2=_interopRequireDefault(_documents),_subject_snippet=require("./subject_snippet"),_subject_snippet2=_interopRequireDefault(_subject_snippet),_folders=require("./folders"),_folders2=_interopRequireDefault(_folders),_message_groups=require("./message_groups"),_message_groups2=_interopRequireDefault(_message_groups),_attachments=require("./attachments"),_attachments2=_interopRequireDefault(_attachments),_message_to_attachments=require("./message_to_attachments"),_message_to_attachments2=_interopRequireDefault(_message_to_attachments),_message_bodies=require("./message_bodies"),_message_bodies2=_interopRequireDefault(_message_bodies),_router=require("./router"),_router2=_interopRequireDefault(_router),_unsubscribe_list=require("./unsubscribe_list"),_unsubscribe_list2=_interopRequireDefault(_unsubscribe_list),_features=require("./features"),_features2=_interopRequireDefault(_features),_message_metadata=require("./message_metadata"),_message_metadata2=_interopRequireDefault(_message_metadata),_feature_cues=require("./feature_cues.js"),_feature_cues2=_interopRequireDefault(_feature_cues),_lists=require("./lists"),_lists2=_interopRequireDefault(_lists),_video_players=require("./video_players"),_video_players2=_interopRequireDefault(_video_players),_address_book=require("./address_book"),_address_book2=_interopRequireDefault(_address_book),_gif_items=require("./gif_items.js"),_gif_items2=_interopRequireDefault(_gif_items),_gif_categories=require("./gif_categories.js"),_gif_categories2=_interopRequireDefault(_gif_categories),action=function e(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1]);return{type:e.type}},rootReducer=(0,_redux.combineReducers)({action:action,attachments:_attachments2.default,lists:_lists2.default,documents:_documents2.default,subjectsAndSnippets:_subject_snippet2.default,folders:_folders2.default,messageBodies:_message_bodies2.default,messageGroups:_message_groups2.default,router:_router2.default,unSubscribeList:_unsubscribe_list2.default,messages:_message_metadata2.default,videoPlayers:_video_players2.default,addressBook:_address_book2.default,messageToAttachments:_message_to_attachments2.default,features:_features2.default,featureCues:_feature_cues2.default,gifItems:_gif_items2.default,gifCategories:_gif_categories2.default});exports.default=rootReducer;var selectors=exports.selectors=function(e){var t={getAction:function(){return e.action},getListsSelectors:function(){return(0,_lists.selectors)(e.lists)},getFoldersSelectors:function(){return(0,_folders.selectors)(e.folders)},getMessageGroupsSelectors:function(){return(0,_message_groups.selectors)(e.messageGroups)},getMessagesSelectors:function(){return(0,_message_metadata.selectors)(e.messages)},getMessageBodiesSelectors:function(){return(0,_message_bodies.selectors)(e.messageBodies)},getDocumentSelectors:function(){return(0,_documents.selectors)(e.documents)},getRouterSelectors:function(){return(0,_router.selectors)(e.router)},getUnSubscribeListSelectors:function(){return(0,_unsubscribe_list.selectors)(e.unSubscribeList)},getVideoPlayerSelectors:function(){return(0,_video_players.selectors)(e.videoPlayers)},getContactSelectors:function(){return(0,_address_book.selectors)(e.addressBook)},getFeatureCueSelectors:function(){return(0,_feature_cues.selectors)(e.featureCues)},getSubjectAndSnippetSelectors:function(){return(0,_subject_snippet.selectors)(e.subjectsAndSnippets)},getGifItemsSelectors:function(){return(0,_gif_items.selectors)(e.gifItems)},getGifCategoriesSelectors:function(){return(0,_gif_categories.selectors)(e.gifCategories)}};return _extends({},t,{getFeaturesSelectors:function(){return(0,_features.selectors)(e.features,t)}})};
},{"./address_book":"./reducers_selectors/address_book","./attachments":"./reducers_selectors/attachments","./documents":"./reducers_selectors/documents","./feature_cues.js":"./reducers_selectors/feature_cues","./features":"./reducers_selectors/features","./folders":"./reducers_selectors/folders","./gif_categories.js":"./reducers_selectors/gif_categories","./gif_items.js":"./reducers_selectors/gif_items","./lists":"./reducers_selectors/lists","./message_bodies":"./reducers_selectors/message_bodies","./message_groups":"./reducers_selectors/message_groups","./message_metadata":"./reducers_selectors/message_metadata","./message_to_attachments":"./reducers_selectors/message_to_attachments","./router":"./reducers_selectors/router","./subject_snippet":"./reducers_selectors/subject_snippet","./unsubscribe_list":"./reducers_selectors/unsubscribe_list","./video_players":"./reducers_selectors/video_players","redux":"./node_modules/redux/lib/index.js"}],"./reducers_selectors/lists/cursor":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function moveCursor(t,e,_){var a=t.index,n=void 0===a?-1:a;return e===_mail_constants.CursorMovement.UP?n--:e===_mail_constants.CursorMovement.DOWN?n++:(0,_invariant2.default)(!e,"Movement not supported yet"),n<0?n=0:n>=_.length&&(n=_.length-1),{index:n,itemId:_[n]}}exports.__esModule=!0,exports.selectors=void 0,exports.moveCursor=moveCursor;var _react_action_constants=require("../../platform/react_action_constants"),_mail_constants=require("../../platform/mail_constants"),_invariant=require("../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_helpers=require("./helpers"),_isEqual=require("lodash/isEqual"),_isEqual2=_interopRequireDefault(_isEqual),cursor=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],_=e.type,a=e.cursorPayload;switch(_){case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_SELECTED:case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_RANGE_SELECTED:case _react_action_constants.mail.OPEN_PAGE_REQUESTED:if(!a)return t;var n=a||{},E=n.itemId,r=n.itemIds,i=void 0===r?[]:r,s=i.indexOf(E),o={itemId:E,index:s};return E&&s!==-1?(0,_isEqual2.default)(t,o)?t:o:{};case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_SELECT_CURSOR_MOVED:case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_CURSOR_MOVED:var c=a||{},S=c.movement,u=c.itemIds,l=void 0===u?[]:u,M=moveCursor(t,S,l);return(0,_isEqual2.default)(t,M)?t:M;case _react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.DELETE_DRAFT_REQUESTED:case _react_action_constants.mail.SEND_SUCCESS:var d=a||{},m=d.itemIds,R=void 0===m?[]:m,A=e.itemsToUpdateInfo,v=void 0===A?{}:A,f=e.listToUpdate,T=void 0===f?{}:f,I=T.folderIds,G=void 0===I?[]:I,D=void 0;if(!R.length)return{};if(!t.itemId&&!t.index)return t;var O=(0,_helpers.getItemIdsToRemove)(v,G).reduce(function(t,e){return t[e]=!0,t},{});if(!Object.keys(O).length)return t;var U=R.reduce(function(e,_,a){return a<t.index&&O[_]&&e++,e},0),p=R.filter(function(t){return!O[t]});if(!p.length)return{};if(O[t.itemId]){var C=t.index-U;C<0?C=0:C>=p.length&&(C=p.length-1),D={index:C,itemId:p[C]}}else D={itemId:t.itemId,index:p.findIndex(function(e){return e===t.itemId})};return D;default:return t}};exports.default=cursor;var selectors=exports.selectors=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getCursor:function(){return t}}};
},{"../../platform/invariant":"./platform/invariant","../../platform/mail_constants":"./platform/mail_constants","../../platform/react_action_constants":"./platform/react_action_constants","./helpers":"./reducers_selectors/lists/helpers","lodash/isEqual":"./node_modules/lodash/isEqual.js"}],"./reducers_selectors/lists/helpers":[function(require,module,exports){
"use strict";function getItemIdsToRemove(e,o){return Object.keys(e).filter(function(t){var r=e[t],n=r.originalFolderIds,s=void 0===n?[]:n,d=r.folderIds,i=void 0===d?[]:d;return!!s.some(function(e){return o.indexOf(e)!==-1})&&!i.some(function(e){return o.indexOf(e)!==-1})})}exports.__esModule=!0,exports.getItemIdsToRemove=getItemIdsToRemove;
},{}],"./reducers_selectors/lists":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var _=arguments[e];for(var s in _)Object.prototype.hasOwnProperty.call(_,s)&&(t[s]=_[s])}return t},_redux=require("redux"),_react_action_constants=require("../../platform/react_action_constants"),_list=require("../../platform/utils/list"),_item_ids=require("./item_ids"),_item_ids2=_interopRequireDefault(_item_ids),_cursor=require("./cursor"),_cursor2=_interopRequireDefault(_cursor),_next_items_url=require("./next_items_url.js"),_next_items_url2=_interopRequireDefault(_next_items_url),_offset=require("./offset.js"),_offset2=_interopRequireDefault(_offset),_status=require("./status.js"),_status2=_interopRequireDefault(_status),_selected_item_ids=require("./selected_item_ids"),_selected_item_ids2=_interopRequireDefault(_selected_item_ids),list=(0,_redux.combineReducers)({itemIds:_item_ids2.default,cursor:_cursor2.default,selectedItemIds:_selected_item_ids2.default,nextItemsUrl:_next_items_url2.default,offset:_offset2.default,status:_status2.default}),lists=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.GIF_FETCH_SUCCEEDED:return _extends({},t,Object.keys(e.listData.lists||[]).reduce(function(_,s){var a;return _extends({},_,(a={},a[s]=list(t[s],_extends({},e,{listId:s})),a))},{}));case _react_action_constants.mail.OPEN_PAGE_REQUESTED:case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_SELECTED:case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_RANGE_SELECTED:case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_SELECT_CURSOR_MOVED:case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_ALL_SELECTED:case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_NONE_SELECTED:case _react_action_constants.mail.DELETE_ACTIVE_FOLDER_REQUESTED:case _react_action_constants.mail.ARCHIVE_FOLDER_REQUESTED:case _react_action_constants.mail.CLEAR_FOLDER_REQUESTED:case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_CURSOR_MOVED:var _,s=e.listId;return _extends({},t,(_={},_[s]=list(t[s],e),_));case _react_action_constants.mail.MESSAGES_MARK_READ_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_UNREAD_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_STARRED_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_UNSTARRED_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.SEND_SUCCESS:case _react_action_constants.mail.DELETE_DRAFT_REQUESTED:var a=e.listsToUpdate,E=void 0===a?[]:a,c=e.itemsToUpdate,n=void 0===c?[]:c;if(!E.length||!n.length)return t;var i=n.reduce(function(t,e){var _,s=e.groupId,a=e.folder,E=e.destinationFolder,c=void 0===E?{}:E,n=e.flags,i=e.isAffected,r=t[s]||{},o=r.originalFolderIds,S=void 0===o?[]:o,l=r.folderIds,u=void 0===l?[]:l,d=r.flags,R=void 0===d?[]:d,M=void 0;return M=i?c.id?[c.id]:[]:[a.id],_extends({},t,(_={},_[s]={flags:i?R:R.concat(n),originalFolderIds:S.concat(a.id),folderIds:M.length?u.concat(M):u},_))},{});return _extends({},t,E.reduce(function(_,s){var a;return _extends({},_,(a={},a[s.listId]=list(t[s.listId],_extends({},e,{listToUpdate:s,itemsToUpdateInfo:i})),a))},{}));default:return t}};exports.default=lists;var selectors=exports.selectors=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{doesListExist:function(e){return!!t[e]},getListIdsByContentType:function(e){return Object.keys(t).filter(function(t){return(0,_list.getListContentTypeFromListId)(t)===e})},getItemIdsSelectors:function(e){return(0,_item_ids.selectors)(t[e].itemIds)},getSelectedItemIdsSelectors:function(e){return(0,_selected_item_ids.selectors)(t[e].selectedItemIds)},getCursorSelectors:function(e){return(0,_cursor.selectors)(t[e].cursor)},__getListIds__:function(){return Object.keys(t)},getListNextItemsUrl:function(e){return t[e].nextItemsUrl},getListOffset:function(e){return t[e].offset},getListStatus:function(e){return t[e].status}}};
},{"../../platform/react_action_constants":"./platform/react_action_constants","../../platform/utils/list":"./platform/utils/list","./cursor":"./reducers_selectors/lists/cursor","./item_ids":"./reducers_selectors/lists/item_ids","./next_items_url.js":"./reducers_selectors/lists/next_items_url","./offset.js":"./reducers_selectors/lists/offset","./selected_item_ids":"./reducers_selectors/lists/selected_item_ids","./status.js":"./reducers_selectors/lists/status","redux":"./node_modules/redux/lib/index.js"}],"./reducers_selectors/lists/item_ids":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0,exports.selectors=void 0;var _react_action_constants=require("../../platform/react_action_constants"),_list=require("../../platform/utils/list"),_helpers=require("./helpers"),_isEqual=require("lodash/isEqual"),_isEqual2=_interopRequireDefault(_isEqual),appendItemIds=function(t,e){return e.reduce(function(t,e){return t.indexOf(e)!==-1?t:[].concat(t,[e])},[].concat(t))},mergeItemIds=function(t,e){var a=t.findIndex(function(t){return t===e[e.length-1]});return appendItemIds(e,t.slice(a+1,t.length))},itemIds=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],a=e.listId,_=e.type;switch(_){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.GIF_FETCH_SUCCEEDED:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:var n=e.listData.lists[a].itemIds;return(0,_isEqual2.default)(t,n)?t:appendItemIds(t,n);case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:var E=e.listData.lists[a],s=E.itemIds,c=E.totalHits;return s.length>t.length?s:s.length<t.length&&s.length===c?s:(0,_isEqual2.default)(t.slice(0,s.length),s)?t:mergeItemIds(t,s);case _react_action_constants.mail.MESSAGES_MARK_READ_REQUESTED:var i=e.listToUpdate,r=e.itemsToUpdateInfo;if(!i)return t;var o=i.listId,S=Object.keys(r).filter(function(t){var e=r[t].flags,a=void 0===e?[]:e;return(0,_list.listIdContainsFlag)(o,"unread")&&!a.some(function(t){return!t.read})});return S.length?t.filter(function(t){return S.indexOf(t)===-1}):t;case _react_action_constants.mail.MESSAGES_MARK_UNSTARRED_REQUESTED:var l=e.listToUpdate,u=e.itemsToUpdateInfo;if(!l)return t;var d=l.listId,I=Object.keys(u).filter(function(t){var e=u[t].flags,a=void 0===e?[]:e;return["flagged","starred"].some(function(t){return(0,_list.listIdContainsFlag)(d,t)})&&!a.some(function(t){return!t.read})});return I.length?t.filter(function(t){return I.indexOf(t)===-1}):t;case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.SEND_SUCCESS:case _react_action_constants.mail.DELETE_DRAFT_REQUESTED:var R=e.listToUpdate,m=e.itemsToUpdateInfo;if(!R)return t;var M=R.folderIds,f=void 0===M?[]:M,A=(0,_helpers.getItemIdsToRemove)(m,f);return A.length?t.filter(function(t){return A.indexOf(t)===-1}):t;default:return t}};exports.default=itemIds;var selectors=exports.selectors=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{getItemIdByIndex:function(e){return t[e]},getItemIds:function(){return t}}};
},{"../../platform/react_action_constants":"./platform/react_action_constants","../../platform/utils/list":"./platform/utils/list","./helpers":"./reducers_selectors/lists/helpers","lodash/isEqual":"./node_modules/lodash/isEqual.js"}],"./reducers_selectors/lists/next_items_url":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _react_action_constants=require("../../platform/react_action_constants"),nextItemsUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments[1],s=e.listId,r=e.type;switch(r){case _react_action_constants.mail.GIF_FETCH_SUCCEEDED:return e.listData.lists[s].nextItemsUrl||"";default:return t}};exports.default=nextItemsUrl,module.exports=exports.default;
},{"../../platform/react_action_constants":"./platform/react_action_constants"}],"./reducers_selectors/lists/offset":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _react_action_constants=require("../../platform/react_action_constants"),offset=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments[1],s=e.listId,a=e.type;switch(a){case _react_action_constants.mail.GIF_FETCH_SUCCEEDED:return e.listData.lists[s].offset||"";default:return t}};exports.default=offset,module.exports=exports.default;
},{"../../platform/react_action_constants":"./platform/react_action_constants"}],"./reducers_selectors/lists/selected_item_ids":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function selectedItemIds(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],_=e.cursorPayload,E=void 0===_?{}:_,a=e.selectionPayload,c=void 0===a?{}:a,n=E.itemIds,s=void 0===n?[]:n,S=E.itemId,o=c.oldCursor;switch(e.type){case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_ALL_SELECTED:return selectItemIds(t,s);case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_SELECTED:return S?toggleSelection(t,S):t;case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_RANGE_SELECTED:if(!S||!o)return t;var r=s.indexOf(S),i=[o.index,r].sort(function(t,e){return t>e?1:0}),l=i[0],M=i[1];return selectItemIds(t,s.slice(l,M+1));case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_SELECT_CURSOR_MOVED:var m=(0,_cursor.moveCursor)(o,E.movement,s),R=!!t[m.itemId];if(!R){var u=[m.itemId];return o&&o.itemId&&u.push(o.itemId),selectItemIds(t,u)}return selectItemIds(unselectItemIds(t,[o.itemId]),[m.itemId]);case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_CURSOR_MOVED:case _react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_NONE_SELECTED:case _react_action_constants.mail.DELETE_ACTIVE_FOLDER_REQUESTED:case _react_action_constants.mail.ARCHIVE_FOLDER_REQUESTED:case _react_action_constants.mail.CLEAR_FOLDER_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.SEND_SUCCESS:case _react_action_constants.mail.DELETE_DRAFT_REQUESTED:return Object.keys(t).length?{}:t;default:return t}}function toggleSelection(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t[e]?unselectItemIds(t,[e]):selectItemIds(t,[e])}function selectItemIds(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce(function(t,e){return t[e]=!0,t},_extends({},t))}exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var _=arguments[e];for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(t[E]=_[E])}return t},_react_action_constants=require("../../platform/react_action_constants"),_cursor=require("./cursor"),_omit=require("lodash/omit"),_omit2=_interopRequireDefault(_omit),unselectItemIds=_omit2.default;exports.default=selectedItemIds;var selectors=exports.selectors=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getSelectedItemIds:function(){return t}}};
},{"../../platform/react_action_constants":"./platform/react_action_constants","./cursor":"./reducers_selectors/lists/cursor","lodash/omit":"./node_modules/lodash/omit.js"}],"./reducers_selectors/lists/status":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _react_action_constants=require("../../platform/react_action_constants"),_mail_constants=require("../../platform/mail_constants"),status=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_mail_constants.RecordStates.DOES_NOT_EXIST,a=arguments[1];switch(a.type){case _react_action_constants.mail.GIF_FETCH_SUCCEEDED:return _mail_constants.RecordStates.LOADED;case _react_action_constants.mail.GIF_FETCH_REQUESTED:return _mail_constants.RecordStates.LOADING;case _react_action_constants.mail.GIF_FETCH_FAILED:return _mail_constants.RecordStates.ERROR;default:return t}};exports.default=status,module.exports=exports.default;
},{"../../platform/mail_constants":"./platform/mail_constants","../../platform/react_action_constants":"./platform/react_action_constants"}],"./reducers_selectors/message_bodies":[function(require,module,exports){
"use strict";function body(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1],_=a.type,E=a.messageId,s=a.messageBodiesMap;switch(_){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.MESSAGE_BODIES_RECEIVED:case _react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED:case _react_action_constants.mail.MESSAGE_BODIES_OPEN_GROUP_RECEIVED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:case _react_action_constants.mail.SPONSORED_SAVE_TO_INBOX_SUCCEEDED:return s[E].body||{};default:return t}}function status(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_mail_constants.RecordStates.DOES_NOT_EXIST,a=arguments[1],_=a.type;switch(_){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.MESSAGE_BODIES_RECEIVED:case _react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED:case _react_action_constants.mail.MESSAGE_BODIES_OPEN_GROUP_RECEIVED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:case _react_action_constants.mail.SPONSORED_SAVE_TO_INBOX_SUCCEEDED:return _mail_constants.RecordStates.LOADED;case _react_action_constants.mail.MESSAGE_BODIES_REQUESTED:return _mail_constants.RecordStates.LOADING;case _react_action_constants.mail.MESSAGE_BODIES_FAILED:return _mail_constants.RecordStates.ERROR;default:return t}}function isSecure(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments[1];switch(a.type){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.MESSAGE_BODIES_RECEIVED:case _react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED:case _react_action_constants.mail.MESSAGE_BODIES_OPEN_GROUP_RECEIVED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:case _react_action_constants.mail.SPONSORED_SAVE_TO_INBOX_SUCCEEDED:case _react_action_constants.mail.MESSAGE_BODIES_REQUESTED:return!!a.secure;default:return t}}function hasFullBody(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments[1];switch(a.type){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.MESSAGE_BODIES_RECEIVED:case _react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED:case _react_action_constants.mail.MESSAGE_BODIES_OPEN_GROUP_RECEIVED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:case _react_action_constants.mail.SPONSORED_SAVE_TO_INBOX_SUCCEEDED:case _react_action_constants.mail.MESSAGE_BODIES_REQUESTED:return!!a.full;default:return t}}function messageBodies(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1];switch(a.type){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.MESSAGE_BODIES_RECEIVED:case _react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED:case _react_action_constants.mail.MESSAGE_BODIES_OPEN_GROUP_RECEIVED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:case _react_action_constants.mail.SPONSORED_SAVE_TO_INBOX_SUCCEEDED:case _react_action_constants.mail.MESSAGE_BODIES_REQUESTED:case _react_action_constants.mail.MESSAGE_BODIES_FAILED:var _=Object.keys(a.messageBodiesMap||{});if(!_.length)return t;var E=_.reduce(function(_,E){var s;return _extends({},_,(s={},s[E]=messageBodyAndStatus(t[E],_extends({},a,{messageId:E})),s))},{});return _extends({},t,E);default:return t}}exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var _=arguments[a];for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(t[E]=_[E])}return t},_redux=require("redux"),_react_action_constants=require("../platform/react_action_constants"),_mail_constants=require("../platform/mail_constants"),messageBodyAndStatus=(0,_redux.combineReducers)({body:body,status:status,isSecure:isSecure,hasFullBody:hasFullBody}),selectors=exports.selectors=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{get:function(a){return t[a].body},getState:function(a){return t[a]?t[a].status:_mail_constants.RecordStates.DOES_NOT_EXIST},doesMessageBodyExist:function(a){return!!t[a]&&[_mail_constants.RecordStates.DOES_NOT_EXIST,_mail_constants.RecordStates.ERROR].indexOf(t[a].status)===-1},hasFullBody:function(a){return t[a]&&t[a].hasFullBody},isSecureMessage:function(a){var _=t[a];if(!_)return!1;var E=_.body.htmlAnnotations,s=void 0===E?[]:E,c=_.isSecure,e=_.hasFullBody;return e?s.some(function(t){var a=t.type;return"blocked"===a}):c}}};exports.default=messageBodies;
},{"../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","redux":"./node_modules/redux/lib/index.js"}],"./reducers_selectors/message_groups":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function messageGroups(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],a=e.type,_=e.listData,n=e.itemsToUpdate;switch(a){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:var E=_.groupIdToCsmIdsMap;if(!E)return t;var s=Object.keys(E).filter(function(e){return!(0,_isEqual2.default)(E[e],t[e])}).reduce(function(e,_){var n;return _extends({},e,(n={},n[_]=messageGroup(t[_],{type:a,messageGroup:E[_]}),n))},{});return Object.keys(s).length?_extends({},t,s):t;case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:var c=_.groupIdToCsmIdsMap;if(!c)return t;var r=Object.keys(c).filter(function(e){return!(t[e]||[]).some(function(t){return c[e].indexOf(t)!==-1})}).reduce(function(e,_){var n;return _extends({},e,(n={},n[_]=messageGroup(t[_],{type:a,messageGroup:c[_]}),n))},{});return Object.keys(r).length?_extends({},t,r):t;case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.DELETE_DRAFT_REQUESTED:return n.length?n.reduce(function(t,e){var _,n=e.groupId,E=messageGroup(t[n],{type:a,itemToUpdate:e});return E.length?_extends({},t,(_={},_[n]=E,_)):(0,_omit2.default)(t,[n])},_extends({},t)):t;default:return t}}exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var _ in a)Object.prototype.hasOwnProperty.call(a,_)&&(t[_]=a[_])}return t},_react_action_constants=require("../platform/react_action_constants"),_isEqual=require("lodash/isEqual"),_isEqual2=_interopRequireDefault(_isEqual),_omit=require("lodash/omit"),_omit2=_interopRequireDefault(_omit),messageGroup=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments[1],_=a.type,n=a.messageGroup,t=void 0===n?[]:n,E=a.itemToUpdate,s=void 0===E?{}:E;switch(_){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:return(0,_isEqual2.default)(t,e)?e:t;case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:return e.some(function(e){return t.indexOf(e)!==-1})?e:e.concat(t);case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.DELETE_DRAFT_REQUESTED:return!s.destinationFolder&&s.isAffected?e.filter(function(t){return t!==s.csmId}):e;default:return e}};exports.default=messageGroups;var selectors=exports.selectors=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{doesMessageGroupIdExist:function(e){return!!t[e]},getCsmIdsFromMessageGroupId:function(e){return t[e]},__getGroupIdContainingCsmId__:function(e){return Object.keys(t).find(function(a){return t[a].indexOf(e)!==-1})}}};
},{"../platform/react_action_constants":"./platform/react_action_constants","lodash/isEqual":"./node_modules/lodash/isEqual.js","lodash/omit":"./node_modules/lodash/omit.js"}],"./reducers_selectors/message_metadata":[function(require,module,exports){
"use strict";function _interopRequireDefault(_){return _&&_.__esModule?_:{default:_}}function messagesMetadata(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1],t=a.listData,E=a.type,c=a.itemsToUpdate,s=[_react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED,_react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED,_react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED].indexOf(E)!==-1,n=E===_react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED;switch(E){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:if(!t.messages)return _;var e=Object.keys(t.messages).filter(function(a){return s||n?!(0,_isEqual2.default)(_[a],t.messages[a]):!_[a]}).reduce(function(a,c){var s;return _extends({},a,(s={},s[c]=messageMetadata(_[c],{type:E,message:t.messages[c]}),s))},{});return Object.keys(e).length?_extends({},_,e):_;case _react_action_constants.mail.MESSAGES_MARK_READ_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_UNREAD_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_STARRED_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_UNSTARRED_REQUESTED:var S=c.filter(function(_){return _.isAffected}).reduce(function(a,t){var c;return _extends({},a,(c={},c[t.csmId]=messageMetadata(_[t.csmId],{type:E,itemToUpdate:t}),c))},{});return Object.keys(S).length?_extends({},_,S):_;case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.DELETE_DRAFT_REQUESTED:case _react_action_constants.mail.SEND_SUCCESS:var i=c.filter(function(_){return _.isAffected}),o=i.filter(function(_){return!_.destinationFolder}).map(function(_){return _.csmId}),r=i.reduce(function(a,t){var c;return _extends({},a,(c={},c[t.csmId]=messageMetadata(_[t.csmId],{type:E,itemToUpdate:t}),c))},{});return Object.keys(r).length||o.length?(0,_omit2.default)(_extends({},_,r),o):_;default:return _}}exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(_){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var E in t)Object.prototype.hasOwnProperty.call(t,E)&&(_[E]=t[E])}return _},_redux=require("redux"),_react_action_constants=require("../platform/react_action_constants"),_isEqual=require("lodash/isEqual"),_isEqual2=_interopRequireDefault(_isEqual),_omit=require("lodash/omit"),_omit2=_interopRequireDefault(_omit),messageId=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments[1],t=a.type,E=a.message;switch(t){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:return E.id;default:return _}},csid=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments[1],t=a.type,E=a.message;switch(t){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:return E.csid?E.csid:_;default:return _}},conversationId=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments[1],t=a.type,E=a.message;switch(t){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:return E.conversationId?E.conversationId:_;default:return _}},flags=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1],t=a.type,E=a.message;switch(t){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:return E.flags;case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:return{read:!0,flagged:!1,recent:!0,ham:!0};case _react_action_constants.mail.MESSAGES_MARK_UNREAD_REQUESTED:return _extends({},_,{read:!1});case _react_action_constants.mail.MESSAGES_MARK_READ_REQUESTED:return _extends({},_,{read:!0});case _react_action_constants.mail.MESSAGES_MARK_STARRED_REQUESTED:return _extends({},_,{flagged:!0});case _react_action_constants.mail.MESSAGES_MARK_UNSTARRED_REQUESTED:return _extends({},_,{flagged:!1});default:return _}},folderId=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments[1],t=a.type,E=a.message,c=a.itemToUpdate;switch(t){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:return E.folder.id;case _react_action_constants.mail.MESSAGES_MOVE_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED:case _react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED:case _react_action_constants.mail.SEND_SUCCESS:return c.destinationFolder?c.destinationFolder.id:_;default:return _}},classification=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments[1],t=a.type,E=a.message;switch(t){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:return E.classification?E.classification:_;default:return _}},verifiedDomains=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments[1],t=a.type,E=a.message;switch(t){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:return(0,_isEqual2.default)(_,E.verifiedDomains)?_:E.verifiedDomains;default:return _}},replyTo=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments[1],t=a.type,E=a.message;switch(t){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:return(0,_isEqual2.default)(_,E.headers.replyTo)?_:E.headers.replyTo||[];default:return _}},from=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments[1],t=a.type,E=a.message;switch(t){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:return(0,_isEqual2.default)(_,E.headers.from)?_:E.headers.from;default:return _}},to=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments[1],t=a.type,E=a.message;switch(t){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:return(0,_isEqual2.default)(_,E.headers.to)?_:E.headers.to;default:return _}},cc=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments[1],t=a.type,E=a.message;switch(t){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:return(0,_isEqual2.default)(_,E.headers.cc)?_:E.headers.cc;default:return _}},bcc=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments[1],t=a.type,E=a.message;switch(t){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:return(0,_isEqual2.default)(_,E.headers.bcc)?_:E.headers.bcc;default:return _}},date=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments[1],t=a.type,E=a.message;switch(t){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:return E.headers.date?E.headers.date:_;default:return _}},messageIdRfc822=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments[1],t=a.type,E=a.message;switch(t){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:return E.headers.messageIdRfc822?E.headers.messageIdRfc822:_;default:return _}},headers=(0,_redux.combineReducers)({replyTo:replyTo,from:from,to:to,cc:cc,bcc:bcc,date:date,messageIdRfc822:messageIdRfc822}),messageMetadata=(0,_redux.combineReducers)({messageId:messageId,csid:csid,conversationId:conversationId,flags:flags,folderId:folderId,classification:classification,verifiedDomains:verifiedDomains,headers:headers});exports.default=messagesMetadata;var selectors=exports.selectors=function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{doesCsmIdExist:function(a){return!!_[a]},getConversationId:function(a){return _[a].conversationId},getFlags:function(a){return _[a].flags},getFolderId:function(a){return _[a].folderId},getCsid:function(a){return _[a].csid},__get__:function(a){return _[a]}}};
},{"../platform/react_action_constants":"./platform/react_action_constants","lodash/isEqual":"./node_modules/lodash/isEqual.js","lodash/omit":"./node_modules/lodash/omit.js","redux":"./node_modules/redux/lib/index.js"}],"./reducers_selectors/message_to_attachments":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function messageToAttachments(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1],e=a.type,_=a.listData;switch(e){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:var s=getCsmIdsToAttachmentIdsToAdd(t,_);return Object.keys(s).length?_extends({},t,s):t;default:return t}}function getCsmIdsToAttachmentIdsToAdd(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=a.csmIdToAttachmentIdsMap,_=void 0===e?{}:e;return Object.keys(_).reduce(function(a,e){var s=_[e];return(0,_isEqual2.default)(s,t[e])||(a[e]=s),a},{})}exports.__esModule=!0;var _extends=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var _ in e)Object.prototype.hasOwnProperty.call(e,_)&&(t[_]=e[_])}return t},_react_action_constants=require("../platform/react_action_constants"),_isEqual=require("lodash/isEqual"),_isEqual2=_interopRequireDefault(_isEqual);exports.default=messageToAttachments,module.exports=exports.default;
},{"../platform/react_action_constants":"./platform/react_action_constants","lodash/isEqual":"./node_modules/lodash/isEqual.js"}],"./reducers_selectors/router":[function(require,module,exports){
"use strict";function route(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1];switch(r.type){case _react_action_constants.mail.OPEN_PAGE_REQUESTED:case _react_action_constants.mail.NAVIGATE_SUCCESS:return r.route}return t}function hashParams(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1];switch(r.type){case _react_action_constants.mail.OPEN_PAGE_REQUESTED:return r.hashParams||t}return t}exports.__esModule=!0,exports.selectors=void 0;var _react_action_constants=require("../platform/react_action_constants"),_redux=require("redux"),router=(0,_redux.combineReducers)({route:route,hashParams:hashParams});exports.default=router;var selectors=exports.selectors=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getRoute:function(){return t.route},getRouteUrl:function(){return t.route.url},getHashParams:function(){return t.hashParams}}};
},{"../platform/react_action_constants":"./platform/react_action_constants","redux":"./node_modules/redux/lib/index.js"}],"./reducers_selectors/subject_snippet":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function subjects(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:var a=(0,_object.getIn)(e,"listData.subjects",{}),_=getSubjectSnippetsToChange(t,a);return Object.keys(_).length?_extends({},t,_):t;default:return t}}function snippets(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case _react_action_constants.mail.INITIAL_STATE:case _react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED:case _react_action_constants.mail.UNDO_MOVE_SUCCEEDED:case _react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED:case _react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED:case _react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS:case _react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED:case _react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED:case _react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED:case _react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED:var a=(0,_object.getIn)(e,"listData.snippets",{}),_=getSubjectSnippetsToChange(t,a);return Object.keys(_).length?_extends({},t,_):t;default:return t}}function getSubjectSnippetsToChange(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object.keys(e);return a.reduce(function(a,_){var s=Object.keys(e[_])[0],n=(0,_list.getMetadataCacheKey)(s);if(!t[_]||t[_][n]!==e[_][s]){var c;a[_]=_extends({},t[_],(c={},c[n]=e[_][s],c))}return a},{})}exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var _ in a)Object.prototype.hasOwnProperty.call(a,_)&&(t[_]=a[_])}return t},_react_action_constants=require("../platform/react_action_constants"),_object=require("../platform/utils/object"),_redux=require("redux"),_list=require("../platform/utils/list"),_invariant=require("../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),subjectsAndSnippets=(0,_redux.combineReducers)({subjects:subjects,snippets:snippets});exports.default=subjectsAndSnippets;var selectors=exports.selectors=function(t){return{getSubject:function(e,a){var _=(0,_list.getMetadataCacheKey)(a);return(0,_invariant2.default)(t.subjects,"You must pass a SubjectsAndSnippets state to the getSubject selector."),t.subjects[e][_]},getSnippet:function(e,a){var _=(0,_list.getMetadataCacheKey)(a);return(0,_invariant2.default)(t.snippets,"You must pass a SubjectsAndSnippets state to the getSnippet selector."),t.snippets[e][_]}}};
},{"../platform/invariant":"./platform/invariant","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/list":"./platform/utils/list","../platform/utils/object":"./platform/utils/object","redux":"./node_modules/redux/lib/index.js"}],"./reducers_selectors/unsubscribe_list":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_react_action_constants=require("../platform/react_action_constants"),_object=require("../platform/utils/object"),unSubscribeList=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],r=n.undoPayload,s=n.deleteItemCount,o=n.numListsPreviouslyCleaned,c=n.unSubscribeList,t=void 0===c?[]:c;switch(n.type){case _react_action_constants.mail.MESSAGES_UNSUBSCRIBE_CONTENT_RECEIVED:return _extends({},e,{unsubscribeItems:_extends({},t.reduce(function(t,e){var n;return _extends({},t,(n={},n[e.key]=e,n))},{})),undoPayload:r,deleteItemCount:s,numListsPreviouslyCleaned:o});case _react_action_constants.mail.MESSAGES_UNSUBSCRIBE_CONTENT_REQUESTED:case _react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_SUCCEEDED:if(!(0,_object.isEmpty)(e))return{}}return e};exports.default=unSubscribeList;var selectors=exports.selectors=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getUnSubscribeList:function(){return t},getUnSubscribeListItem:function(e){return t[e]}}};
},{"../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/object":"./platform/utils/object"}],"./reducers_selectors/video_players":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.selectors=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_react_action_constants=require("../platform/react_action_constants"),_redux=require("redux"),_constants=require("../molecules/empty_folder_video/constants"),defaultChannel=_constants.ChannelList[0],currentChannel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaultChannel,t=arguments[1];switch(t.type){case _react_action_constants.mail.CHANNEL_CHANGED:case _react_action_constants.mail.CHANNELS_FETCH_RECEIVED:return t.channel}return e},showVideoPlayer=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];switch(t.type){case _react_action_constants.mail.VIDEO_PLAYER_CLOSED:return!1;case _react_action_constants.mail.VIDEO_PLAYER_OPENED:return!0}return e},channelData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case _react_action_constants.mail.CHANNELS_FETCH_RECEIVED:var n,a=t.payload,r=a[0];return _extends({},e,(n={},n[t.channel]=r,n))}return e},isPaused=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];switch(t.type){case _react_action_constants.mail.VIDEO_PLAYER_PAUSED:return!0;case _react_action_constants.mail.VIDEO_PLAYER_PLAYED:return!1}return e},videoPlayers=(0,_redux.combineReducers)({currentChannel:currentChannel,showVideoPlayer:showVideoPlayer,channelData:channelData,isPaused:isPaused});exports.default=videoPlayers;var selectors=exports.selectors=function(e){return{getCurrentChannel:function(){return e.currentChannel},getShowVideoPlayer:function(){return e.showVideoPlayer},getChannelData:function(){return e.channelData},getIsPaused:function(){return e.isPaused}}};
},{"../molecules/empty_folder_video/constants":"./molecules/empty_folder_video/constants","../platform/react_action_constants":"./platform/react_action_constants","redux":"./node_modules/redux/lib/index.js"}],"./stores/ads":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _react_action_constants=require("../platform/react_action_constants"),_BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),_object=require("../platform/utils/object"),_pages=require("./pages"),_pages2=_interopRequireDefault(_pages),_application=require("./application"),_application2=_interopRequireDefault(_application),_mail_constants=require("../platform/mail_constants"),_constants=require("../platform/gemini_api_client/constants"),AdsStore=function(t){function e(a){_classCallCheck(this,e);var s=_possibleConstructorReturn(this,t.call(this,a));return s.adFeedbackStarted=!1,s.adFeedbackSubmitted=!1,s._adRotationId=0,s.adData={creativeId:"",pencilAd:{adHeadline:"",adSummary:"",adImg:"",adSource:"",clickUrl:"",creativeId:"",type:"",adFeedbackBeacon:""},nativeAd:{contentType:"",url:"",usageType:"",geminiSponsoredAsset:"",actionUrls:{}}},s.darlaAdData={spaceId:"",positions:[]},s.darlaLookAheadResult=null,s.darlaPrefetchResult={spaceId:"",positions:[]},s._hideRightPaneAds=!1,s.messageReadAdRotationTimeStamp=0,s._messageReadAdRotationActive=!1,s.messageReadAdRotationIdleInterval=s.getContext().config.messageReadAdRotationIdleInterval,s.ads=s.getContext().config.ads,s._searchAds={},Object.defineProperty(s,"TIME_TO_WAIT_SINCE_LAST_AD_CALL",{value:a.getContext().config.timeToWaitSinceLastAdCall}),s.isGeminiSponsoredMessageEnabled=a.getContext().config.geminiSponsoredMessage,s}return _inherits(e,t),e.prototype._startAdFeedback=function(){this.adFeedbackStarted=!0,this.adFeedbackSubmitted=!1,this.emitChange()},e.prototype._submitAdFeedback=function(){this.adFeedbackSubmitted=!0,this.adFeedbackStarted=!1,this.emitChange()},e.prototype.getAdFeedbackStarted=function(){return this.adFeedbackStarted},e.prototype.getAdFeedbackSubmitted=function(){return this.adFeedbackSubmitted},e.prototype.getAdFeedbackBeacon=function(){return this.adData.pencilAd.adFeedbackBeacon},e.prototype.getHideRightPaneAds=function(){return this._hideRightPaneAds},e.prototype._startAdRotation=function(){this.adFeedbackStarted&&!this.adFeedbackSubmitted?(this.adFeedbackStarted=!1,this._hideRightPaneAds=!1,this.emitChange()):!this.adFeedbackStarted&&this.adFeedbackSubmitted?(this.adFeedbackSubmitted=!1,this._adRotationId=Date.now(),this._hideRightPaneAds=!1,this.emitChange()):Date.now()-this._adRotationId>this.TIME_TO_WAIT_SINCE_LAST_AD_CALL&&(this._adRotationId=Date.now(),this._hideRightPaneAds=!1,this.emitChange())},e.prototype.getAdRotationId=function(){return this._adRotationId},e.prototype._setAdData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t&&t[0]&&(this.adData=t[0],this.isGeminiSponsoredMessageEnabled||this.adData.pencilAd.type!==_constants.UsageType.NativeAdType||(this.adData.pencilAd.type=_constants.UsageType.PencilAdType),this.emitChange())},e.prototype._setSponsoredAsset=function(t){var e=t.asset;this.adData.nativeAd.geminiSponsoredAsset=e,this.emitChange()},e.prototype._setDarlaAdData=function(t){this.darlaAdData=t,this.darlaErrorMessage=null,this.emitChange()},e.prototype._setDarlaErrorMessage=function(t){var e=t.error;this.darlaErrorMessage=e,this.emitChange()},e.prototype._setPrefetchedAdPos=function(t){this.darlaPrefetchResult&&this.darlaPrefetchResult.positions.push(t)},e.prototype._setDarlaAdDataWithPrefetchedData=function(t){var e=t.spaceId;this.darlaPrefetchResult.spaceId=e,this._setDarlaAdData(this.darlaPrefetchResult),this.darlaPrefetchResult=null},e.prototype._setLookAheadAdData=function(t){this.darlaLookAheadResult=t},e.prototype._setDarlaAdDataWithLookAheadAdData=function(){this._setDarlaAdData(this.darlaLookAheadResult)},e.prototype.getPencilAdData=function(t){return this._searchAds[t]?this._searchAds[t].pencilAd:this.adData.pencilAd},e.prototype.getNativeAdData=function(){return this.adData.nativeAd},e.prototype.getAdData=function(){return this.adData},e.prototype.getActionUrls=function(t){return this.adData.nativeAd.actionUrls[t]||[]},e.prototype.getDarlaAdData=function(){return this.darlaAdData},e.prototype.getDarlaErrorMessage=function(){return this.darlaErrorMessage},e.prototype.shouldUpdateDarlaPrefetchResult=function(){return null!==this.darlaPrefetchResult},e.prototype._handleWinResized=function(){var t=this;this.dispatcher.waitFor(_application2.default,function(){t._startAdRotation()})},e.prototype._init=function(t){var e=t.pencilAds,a=void 0===e?[]:e;this._setAdData(a)},e.prototype._appVisibilityChanged=function(t){var e=t.isVisible;e?(this._startAdRotation(),this._messageReadAdRotationActive&&this._startMessageReadAdRotationTimer()):(this.messageReadAdRotationTimeStamp=0,this.emitChange())},e.prototype._setSearchAds=function(t){var e=(0,_object.getIn)(t,"response.ADS.WITH_KEYWORD.items.0",null);e&&(this._searchAds[t.listId]=e,this.emitChange())},e.prototype._setHideRightPaneAds=function(){this._hideRightPaneAds=!0,this.emitChange()},e.prototype.isNativeAdCached=function(){return!!this.adData.nativeAd.geminiSponsoredAsset},e.prototype._navigateStart=function(){var t=this,e=_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST,a=_mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST,s=_mail_constants.RouteNames.SPONSORED_MESSAGE;this.dispatcher.waitFor(_pages2.default,function(){var o=t.dispatcher.getStore(_pages2.default),i=o.getActivePageRoute(),n=i.name;n!==s&&t._startAdRotation(),n===e||n===a?t._startMessageReadAdRotationTimer():t._stopMessageReadAdRotationTimer()})},e.prototype._messageReadAdRotations=function(){this._startAdRotation(),this._startMessageReadAdRotationTimer()},e.prototype._startMessageReadAdRotationTimer=function(){this.messageReadAdRotationTimeStamp=Date.now(),this._messageReadAdRotationActive=!0,this.emitChange()},e.prototype._stopMessageReadAdRotationTimer=function(){this.messageReadAdRotationTimeStamp=0,this._messageReadAdRotationActive=!1,this.emitChange()},e.prototype._updateMessageReadAdRotationTimer=function(t){var e=t.card;this._messageReadAdRotationActive&&e.composeData?this._stopMessageReadAdRotationTimer():this._messageReadAdRotationActive&&!this._isMessageReadIdle()||e.composeData||this._startMessageReadAdRotationTimer()},e.prototype._isMessageReadIdle=function(){var t=Date.now();return t>this.messageReadAdRotationTimeStamp+this.messageReadAdRotationIdleInterval},e.prototype.getMessageReadAdRotationTimeStamp=function(){return this.messageReadAdRotationTimeStamp},e.prototype.dehydrate=function(){return{adData:this.adData}},e.prototype.rehydrate=function(t){t.adData&&(this.adData=t.adData)},e}(_BaseStore3.default);AdsStore.storeName="AdsStore",AdsStore.handlers={},AdsStore.handlers[_react_action_constants.mail.INITIAL_STATE]="_init",AdsStore.handlers[_react_action_constants.mail.AD_FEEDBACK_STARTED]="_startAdFeedback",AdsStore.handlers[_react_action_constants.mail.AD_FEEDBACK_CLOSED]="_startAdRotation",AdsStore.handlers[_react_action_constants.mail.AD_FEEDBACK_SUBMITTED]="_submitAdFeedback",AdsStore.handlers[_react_action_constants.mail.AD_RECEIVED]="_setAdData",AdsStore.handlers[_react_action_constants.mail.MESSAGE_CARD_FOCUSED]="_updateMessageReadAdRotationTimer",AdsStore.handlers[_react_action_constants.mail.DARLA_ADS_RECEIVED]="_setDarlaAdData",AdsStore.handlers[_react_action_constants.mail.DARLA_ADS_FAILED]="_setDarlaErrorMessage",AdsStore.handlers[_react_action_constants.mail.PREFETCHED_AD_RENDERED]="_setPrefetchedAdPos",AdsStore.handlers[_react_action_constants.mail.PREFETCHED_ADS_RENDERED]="_setDarlaAdDataWithPrefetchedData",AdsStore.handlers[_react_action_constants.mail.LOOK_AHEAD_ADS_PARSED]="_setLookAheadAdData",AdsStore.handlers[_react_action_constants.mail.LOOK_AHEAD_ADS_RENDERED]="_setDarlaAdDataWithLookAheadAdData",AdsStore.handlers[_react_action_constants.mail.HIDE_RIGHT_PANE_ADS]="_setHideRightPaneAds",AdsStore.handlers.NAVIGATE_START="_navigateStart",AdsStore.handlers[_react_action_constants.mail.PREVIEW_MESSAGE_REQUESTED]="_startAdRotation",AdsStore.handlers[_react_action_constants.mail.CHANGE_FOLDER_REQUESTED]="_startAdRotation",AdsStore.handlers[_react_action_constants.mail.ITEM_LIST_PAGE_SCROLLED]="_startAdRotation",AdsStore.handlers[_react_action_constants.mail.MESSAGES_MOVE_REQUESTED]="_startAdRotation",AdsStore.handlers[_react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED]="_startAdRotation",AdsStore.handlers[_react_action_constants.mail.MESSAGES_RESTORE_REQUESTED]="_startAdRotation",AdsStore.handlers[_react_action_constants.mail.MESSAGES_DELETE_REQUESTED]="_startAdRotation",AdsStore.handlers[_react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED]="_startAdRotation",AdsStore.handlers[_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED]="_startAdRotation",AdsStore.handlers[_react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED]="_messageReadAdRotations",AdsStore.handlers[_react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED]="_messageReadAdRotations",AdsStore.handlers[_react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED]="_messageReadAdRotations",AdsStore.handlers[_react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED]="_messageReadAdRotations",AdsStore.handlers[_react_action_constants.mail.MESSAGE_CARD_EXPANSION_CHANGED]="_messageReadAdRotations",AdsStore.handlers[_react_action_constants.mail.SEND]="_startAdRotation",AdsStore.handlers[_react_action_constants.mail.SEARCH_LIST_ITEMS_REQUESTED]="_startAdRotation",AdsStore.handlers[_react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED]="_setSearchAds",AdsStore.handlers[_react_action_constants.mail.MESSAGE_READ_AD_ROTATION_TIMER]="_startAdRotation",AdsStore.handlers[_react_action_constants.mail.WINDOW_RESIZED]="_handleWinResized",AdsStore.handlers[_react_action_constants.mail.APPLICATION_VISIBILITY_DID_CHANGE]="_appVisibilityChanged",AdsStore.handlers[_react_action_constants.mail.GEMINI_SPONSORED_ASSET_RECEIVED]="_setSponsoredAsset",exports.default=AdsStore,module.exports=exports.default;
},{"../platform/gemini_api_client/constants":"./platform/gemini_api_client/constants","../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/object":"./platform/utils/object","./application":"./stores/application","./pages":"./stores/pages","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],"./stores/application":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _ApplicationStore$han,_debounce=require("lodash/debounce"),_debounce2=_interopRequireDefault(_debounce),_BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),_react_action_constants=require("../../platform/react_action_constants"),_generic=require("../../platform/utils/generic"),_mail_constants=require("../../platform/mail_constants"),ONE_DAY=864e5,PERIODIC_REFRESH_DAYS_LIMIT=15,ApplicationStore=function(e){function t(i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,e.call(this,i)),o=i.getContext();return n._initialized=!1,n.winDimensions={innerWidth:0,contentAndRightRailWidth:0,contentAndRightRailHeight:0},n.windowResized=!1,n.appVisible=!0,n.timezone=o.timezone&&o.timezone.name||"UTC",n._windowResizing=(0,_debounce2.default)(n._windowResizing,1e3),n.refresh=_mail_constants.AppRefreshTypes.NO_REFRESH,n.heartbeatRefresh=o.config.heartbeatRefresh,n}return _inherits(t,e),t.prototype._initialState=function(){this._initialized=!0,this.emitChange()},t.prototype._windowResizing=function(e){this.windowResized=!0,this.winDimensions=e,this.emitChange()},t.prototype._windowResized=function(){this.windowResized=!1,this.emitChange()},t.prototype._appVisibilityChanged=function(e){var t=e.isVisible,i=e.emergencyRefresh;if(this.appVisible=t,this.appVisible&&this.heartbeatRefresh){var n=(Date.now()-this.lastVisibleTimeStamp)/6e4,o=this.dispatcher.getContext().config.appRefreshIdleInterval,a=0;i&&n>o.emergencyRefresh&&(this.refresh=_mail_constants.AppRefreshTypes.EMERGENCY_REFRESH),(0,_generic.isBrowser)()&&n>o.periodicRefresh&&(a=Math.round(performance.now())/ONE_DAY,this.refresh=a>=PERIODIC_REFRESH_DAYS_LIMIT?_mail_constants.AppRefreshTypes.PERIODIC_REFRESH:this.refresh)}else this.lastVisibleTimeStamp=Date.now();this.emitChange()},t.prototype._updateTimezoneInformation=function(e){var t=e.timezone;this._updateCurrentTimezone({timezone:t})&&this.emitChange()},t.prototype._updateCurrentTimezone=function(e){var t=e.timezone;return!(!t||this.timezone===t)&&(this.timezone=t,!0)},t.prototype._updateLocation=function(e){var t=e.location,i=t.timezone.name;this._updateTimezoneInformation({timezone:i})},t.prototype._resolutionChange=function(e){var t=e.resolutionType;this.resolutionType=t,this.emitChange()},t.prototype._cancelAppReload=function(){this.refresh=_mail_constants.AppRefreshTypes.NO_REFRESH,this.emitChange()},t.prototype.getAppRefreshType=function(){return this.refresh},t.prototype.getDateFormattingOption=function(){return{timezone:this.timezone}},t.prototype.isWindowResizingDone=function(){return this.windowResized},t.prototype.hasSuccessfullyInitialized=function(){return this._initialized},t.prototype.isAppVisible=function(){return this.appVisible},t.prototype.getWindowDimensions=function(){return this.winDimensions},t.prototype.dehydrate=function(){return{initialized:this._initialized}},t.prototype.rehydrate=function(e){this._initialized=e.initialized},t}(_BaseStore3.default);exports.default=ApplicationStore,ApplicationStore.storeName="ApplicationStore",ApplicationStore.handlers=(_ApplicationStore$han={},_ApplicationStore$han[_react_action_constants.mail.INITIAL_STATE]="_initialState",_ApplicationStore$han[_react_action_constants.mail.WINDOW_RESIZING]="_windowResizing",_ApplicationStore$han[_react_action_constants.mail.WINDOW_RESIZED]="_windowResized",_ApplicationStore$han[_react_action_constants.mail.APPLICATION_VISIBILITY_DID_CHANGE]="_appVisibilityChanged",_ApplicationStore$han[_react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED]="_updateTimezoneInformation",_ApplicationStore$han[_react_action_constants.mail.SETTINGS_LOCATION_CHANGE_SUCCEEDED]="_updateLocation",_ApplicationStore$han[_react_action_constants.mail.CANCEL_APP_RELOAD]="_cancelAppReload",_ApplicationStore$han[_react_action_constants.mail.RESOLUTION_CHANGE]="_resolutionChange",_ApplicationStore$han),module.exports=exports.default;
},{"../../platform/mail_constants":"./platform/mail_constants","../../platform/react_action_constants":"./platform/react_action_constants","../../platform/utils/generic":"./platform/utils/generic","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js","lodash/debounce":"./node_modules/lodash/debounce.js"}],"./stores/checkmail":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _CheckMailStore$handl,_createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,o,a){return o&&e(t.prototype,o),a&&e(t,a),t}}(),_BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),_react_action_constants=require("../platform/react_action_constants"),_mail_constants=require("../platform/mail_constants"),_folder=require("../platform/utils/folder"),CheckMailStore=function(e){function t(o){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,e.call(this,o));return a._folders={},a._lastCheckmailTimestamp=null,a._isBlocked=!1,a._forceCheckMail=!1,a._errorCount=0,a}return _inherits(t,e),_createClass(t,null,[{key:"storeName",get:function(){return"CheckMailStore"}}]),t.prototype._init=function(e){var t=this,o=e.folders,a=(0,_folder.flattenFolderTree)(o);Object.keys(a).forEach(function(e){var o=a[e];t._folders[e]={highestModSeq:o.highestModSeq}}),this.emitChange()},t.prototype._handleCheckMailRequested=function(){this._lastCheckmailTimestamp=Date.now(),this.emitChange()},t.prototype._handleCheckMailCompleted=function(e){var t=this,o=e.folders;if(this._lastCheckmailTimestamp=Date.now(),this._forceCheckMail=!1,this._errorCount=0,o){var a=(0,_folder.flattenFolderTree)(o);Object.keys(a).forEach(function(e){var o=a[e];t._folders[e]||(t._folders[e]={}),t._folders[e].highestModSeq=o.highestModSeq}),this.emitChange()}},t.prototype._handleOpenPageRequested=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.route,o=e.force,a=void 0!==o&&o;t.name!==_mail_constants.RouteNames.NEW_DRAFT&&a&&(this._forceCheckMail=a)},t.prototype._handleCheckMailError=function(){this._errorCount++},t.prototype.getMailErrorStatus=function(){return this._errorCount},t.prototype._handlePotentialAsync=function(e){var t=e.async;t&&this._block()},t.prototype._handleAsyncRequest=function(){this._block()},t.prototype._block=function(){this._isBlocked=!0},t.prototype._unblock=function(){this._isBlocked=!1,this._lastCheckmailTimestamp=null},t.prototype._appVisibilityChanged=function(e){var t=e.isVisible;t&&(this._forceCheckMail=t)},t.prototype.shouldForceCheckMail=function(){return this._forceCheckMail},t.prototype.getFolderHighestModSeq=function(e){return(this._folders[e]||{}).highestModSeq},t.prototype.getStaleFolderIds=function(e){var t=this,o=(0,_folder.flattenFolderTree)(e),a=Object.keys(o).filter(function(e){var a=o[e],n=t.getFolderHighestModSeq(e);return n&&n!==a.highestModSeq});return a},t.prototype.isCheckMailAllowed=function(){var e=this.dispatcher.getContext().config.checkMailInterval,t=this._lastCheckmailTimestamp,o=void 0===t?0:t,a=this._isBlocked;return!a&&o<Date.now()-e},t.prototype.dehydrate=function(){var e=this,t={folders:{}};return Object.keys(this._folders).forEach(function(o){t.folders[o]={highestModSeq:e._folders[o].highestModSeq}}),t},t.prototype.rehydrate=function(e){this._folders=e.folders},t}(_BaseStore3.default);exports.default=CheckMailStore,CheckMailStore.handlers=(_CheckMailStore$handl={},_CheckMailStore$handl[_react_action_constants.mail.OPEN_PAGE_REQUESTED]="_handleOpenPageRequested",_CheckMailStore$handl[_react_action_constants.mail.AUTO_CHECK_MAIL_REQUESTED]="_handleCheckMailRequested",_CheckMailStore$handl[_react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED]="_handleCheckMailCompleted",_CheckMailStore$handl[_react_action_constants.mail.AUTO_CHECK_MAIL_FAILED]="_handleCheckMailError",_CheckMailStore$handl[_react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED]="_handleCheckMailCompleted",_CheckMailStore$handl[_react_action_constants.mail.INITIAL_STATE]="_init",_CheckMailStore$handl[_react_action_constants.mail.MARK_READ_FOLDER_REQUESTED]="_handleAsyncRequest",_CheckMailStore$handl[_react_action_constants.mail.MARK_READ_FOLDER_SUCCEEDED]="_unblock",_CheckMailStore$handl[_react_action_constants.mail.MARK_READ_FOLDER_FAILED]="_unblock",_CheckMailStore$handl[_react_action_constants.mail.ARCHIVE_FOLDER_REQUESTED]="_handleAsyncRequest",_CheckMailStore$handl[_react_action_constants.mail.ARCHIVE_FOLDER_SUCCEEDED]="_unblock",_CheckMailStore$handl[_react_action_constants.mail.ARCHIVE_FOLDER_FAILED]="_unblock",_CheckMailStore$handl[_react_action_constants.mail.CLEAR_FOLDER_REQUESTED]="_handleAsyncRequest",_CheckMailStore$handl[_react_action_constants.mail.CLEAR_FOLDER_SUCCEEDED]="_unblock",_CheckMailStore$handl[_react_action_constants.mail.CLEAR_FOLDER_FAILED]="_unblock",_CheckMailStore$handl[_react_action_constants.mail.APPLICATION_VISIBILITY_DID_CHANGE]="_appVisibilityChanged",_CheckMailStore$handl),module.exports=exports.default;
},{"../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/folder":"./platform/utils/folder","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],"./stores/document":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _DocumentStore$handle,_BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),_react_action_constants=require("../platform/react_action_constants"),DocumentStore=function(e){function t(o){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.call(this,o))}return _inherits(t,e),t.prototype._emit=function(){this.emitChange()},t}(_BaseStore3.default);DocumentStore.storeName="DocumentStore",DocumentStore.handlers=(_DocumentStore$handle={},_DocumentStore$handle[_react_action_constants.mail.DOCUMENT_PAGE_FETCH_REQUESTED]="_emit",_DocumentStore$handle[_react_action_constants.mail.DOCUMENT_PAGE_FETCH_SUCCEEDED]="_emit",_DocumentStore$handle[_react_action_constants.mail.DOCUMENT_FETCH_FAILED]="_emit",_DocumentStore$handle[_react_action_constants.mail.DOCUMENT_FETCH_SUCCEEDED]="_emit",_DocumentStore$handle[_react_action_constants.mail.DOCUMENT_FETCH_REQUESTED]="_emit",_DocumentStore$handle),exports.default=DocumentStore,module.exports=exports.default;
},{"../platform/react_action_constants":"./platform/react_action_constants","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],330:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),_generic=require("../platform/utils/generic"),_constants=require("../platform/mail_error/constants"),ErrorStore=function(e){function r(t){_classCallCheck(this,r);var o=_possibleConstructorReturn(this,e.call(this,t)),n=t.getContext();return o.partner=n.partner||"",o}return _inherits(r,e),r.prototype.handleError=function(e){if(e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))){var r=e.error||e.err||null;r&&(this._handleCrumbError(r),this._handleAuthError(r))}},r.prototype._handleCrumbError=function(e){e.name===_constants.AUTHENTICATION_INVALID_CRUMB&&(0,_generic.isBrowser)()&&(0,_generic.refreshInbox)(this.partner)},r.prototype._handleAuthError=function(e){e.name===_constants.AUTHENTICATION_INVALID_CREDENTIALS&&(0,_generic.isBrowser)()&&(0,_generic.refreshInbox)(this.partner)},r}(_BaseStore3.default);ErrorStore.storeName="ErrorStore",ErrorStore.handlers={default:"handleError"},exports.default=ErrorStore,module.exports=exports.default;
},{"../platform/mail_error/constants":"./platform/mail_error/constants","../platform/utils/generic":"./platform/utils/generic","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],"./stores/features":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _FeaturesStore$handle,_BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),_react_action_constants=require("../../platform/react_action_constants"),_mail_constants=require("../../platform/mail_constants"),_themes=require("../../platform/theming/themes.js"),_invariant=require("../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_object=require("../../platform/utils/object"),AFTER_DELAY=0,FeaturesStore=function(e){function t(a){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,e.call(this,a)),n=a.getContext();r._nextFeatureTimestamp=Date.now(),r._activeFeatureCue=null,r._features=n.__initializeFeatures__||{},r._sequence=n.config.scout?n.sequences.find(function(e){return"mail"===e.sequence}).order:[],r._singleHotspotSession=n.config.singleHotspotSession||!1,Object.keys(r._features).filter(function(e){return r._features[e].isFeatureCue}).forEach(function(e){return r._features[e].enabled=!1});var s=r._sequence.find(function(e){return r._features[e]&&r._features[e].action===_react_action_constants.mail.INITIAL_STATE});return s&&r._enableFeature(s),r}return _inherits(t,e),t.prototype.initializeStore=function(e){var t=e.mailboxAttributes;this._currentTheme=t[_mail_constants.MailboxAttributes.THEME].value,this.emitChange()},t.prototype._canShowCue=function(){return!this._activeFeatureCue&&Date.now()>=this._nextFeatureTimestamp},t.prototype._doesCueExist=function(e){return!!this._features[e]&&!this._features[e].markedAsShown},t.prototype._enableFeature=function(e){(0,_invariant2.default)(this._features[e]),this._features[e].enabled=!0,this._features[e].isFeatureCue&&(this._activeFeatureCue=e)},t.prototype._disableFeature=function(e){(0,_invariant2.default)(this._features[e]),this._features[e].enabled=!1,this._features[e].isFeatureCue&&(this._activeFeatureCue=null)},t.prototype._handleCloseFeatureCue=function(e,t){var a=e.name;if(this._disableFeature(a),this._singleHotspotSession&&t===_react_action_constants.mail.FEATURE_CLOSED)return void this.emitChange();var r=(0,_object.getIn)(this._features,a+".nextFeatureCues."+t);r&&this._enableFeature(r),this.emitChange()},t.prototype._handleMarkAsShown=function(e){var t=e.name;(0,_invariant2.default)(this._features[t]),this._features[t].markedAsShown=!0},t.prototype._handleAction=function(e,t){var a=this,r=(e.name,this._sequence.findIndex(function(e){return e in a._features&&a._features[e].action===t}));if(r===-1||!this._canShowCue())return void(this._activeFeatureCue&&this.emitChange());var n=this._sequence[r];this._sequence.splice(r,1),this._enableFeature(n),this._nextFeatureTimestamp=Date.now()+AFTER_DELAY,this.emitChange()},t.prototype._handleThemeChange=function(e){var t=e.value;this._currentTheme=t,this.emitChange()},t.prototype.dehydrate=function(){return{features:this._features,theme:this._currentTheme}},t.prototype.rehydrate=function(e){e.features&&(this._features=e.features),e.theme&&(this._currentTheme=e.theme)},t.prototype.isEnabled=function(e){return this._features[e]&&this._features[e].enabled&&(!this._features[e].dependsOnDefaultTheme||this._currentTheme===_themes.Themes.DEFAULT)||!1},t.prototype.isPersistent=function(e){return this._features[e]&&this._features[e].isPersistent||!1},t.prototype.getNextCueTimestamp=function(){return this._nextFeatureTimestamp},t}(_BaseStore3.default);FeaturesStore.storeName="FeaturesStore",FeaturesStore.handlers=(_FeaturesStore$handle={},_FeaturesStore$handle[_react_action_constants.mail.FEATURE_CLOSED]="_handleCloseFeatureCue",_FeaturesStore$handle[_react_action_constants.mail.INITIAL_STATE]="initializeStore",_FeaturesStore$handle[_react_action_constants.mail.THEME_CHANGE_REQUESTED]="_handleThemeChange",_FeaturesStore$handle[_react_action_constants.mail.FEATURE_TRY_NOW_REQUESTED]="_handleCloseFeatureCue",_FeaturesStore$handle[_react_action_constants.mail.SSA_BREACH_ALERT_MARK_AS_ACTED_REQUESTED]="_handleCloseFeatureCue",_FeaturesStore$handle[_react_action_constants.mail.FEATURE_CUE_MARK_AS_SHOWN_REQUESTED]="_handleMarkAsShown",_FeaturesStore$handle.default="_handleAction",_FeaturesStore$handle),exports.default=FeaturesStore,module.exports=exports.default;
},{"../../platform/invariant":"./platform/invariant","../../platform/mail_constants":"./platform/mail_constants","../../platform/react_action_constants":"./platform/react_action_constants","../../platform/theming/themes.js":"./platform/theming/themes","../../platform/utils/object":"./platform/utils/object","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],"./stores/i13n":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _SETTINGS_ROUTE_VIEW_,_BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),_mail_constants=require("../platform/mail_constants"),_folder=require("../platform/utils/folder"),_list=require("../platform/utils/list"),_pages=require("./pages"),_pages2=_interopRequireDefault(_pages),I13N_VIEW_TYPES={COMPOSE:"cmps",COMPOSE_REPLY:"cmpsThrd",MESSAGE_READ:"msgRd",MESSAGE_LIST:"msgLst",SETTINGS_FILTERS:"sttgs_fltr",SETTINGS_ACCOUNTS:"sttgs_accnt",SETTINGS_NOTIFICATIONS:"sttgs_not",SETTINGS_WRITING_EMAIL:"sttgs_write",SETTINGS_VIEWING_EMAIL:"sttgs_view",SETTINGS_AUTOMATIC_REPLY:"sttgs_rply",SETTINGS_PERSONALIZE_INBOX:"sttgs_per",SETTINGS_SECURITY_AND_PRIVACY:"sttgs_sec",SETTINGS_ENCRYPTION:"sttgs_crypt",SETTINGS_SOCIAL_ACCOUNTS:"sttgs_sclaccnt"},SETTINGS_ROUTE_VIEW_MAPPING=(_SETTINGS_ROUTE_VIEW_={},_SETTINGS_ROUTE_VIEW_[_mail_constants.SettingsTab.PERSONALIZE_INBOX]=I13N_VIEW_TYPES.SETTINGS_PERSONALIZE_INBOX,_SETTINGS_ROUTE_VIEW_[_mail_constants.SettingsTab.ACCOUNTS]=I13N_VIEW_TYPES.SETTINGS_ACCOUNTS,_SETTINGS_ROUTE_VIEW_[_mail_constants.SettingsTab.NOTIFICATIONS]=I13N_VIEW_TYPES.SETTINGS_NOTIFICATIONS,_SETTINGS_ROUTE_VIEW_[_mail_constants.SettingsTab.WRITING_EMAIL]=I13N_VIEW_TYPES.SETTINGS_WRITING_EMAIL,_SETTINGS_ROUTE_VIEW_[_mail_constants.SettingsTab.VIEWING_EMAIL]=I13N_VIEW_TYPES.SETTINGS_VIEWING_EMAIL,_SETTINGS_ROUTE_VIEW_[_mail_constants.SettingsTab.AUTOMATIC_REPLY]=I13N_VIEW_TYPES.SETTINGS_AUTOMATIC_REPLY,_SETTINGS_ROUTE_VIEW_[_mail_constants.SettingsTab.FILTERS]=I13N_VIEW_TYPES.SETTINGS_FILTERS,_SETTINGS_ROUTE_VIEW_[_mail_constants.SettingsTab.SECURITY_AND_PRIVACY]=I13N_VIEW_TYPES.SETTINGS_SECURITY_AND_PRIVACY,_SETTINGS_ROUTE_VIEW_[_mail_constants.SettingsTab.ENCRYPTION]=I13N_VIEW_TYPES.SETTINGS_ENCRYPTION,_SETTINGS_ROUTE_VIEW_[_mail_constants.SettingsTab.SOCIAL_ACCOUNTS]=I13N_VIEW_TYPES.SETTINGS_SOCIAL_ACCOUNTS,_SETTINGS_ROUTE_VIEW_),I13NStore=function(e){function t(s){_classCallCheck(this,t);var _=_possibleConstructorReturn(this,e.call(this,s));return Object.defineProperty(_,"SPACEIDS",{value:s.getContext().config.spaceids}),_._spaceid=null,_._activeRoute=null,_._pageViewCount=0,_}return _inherits(t,e),t.prototype.isSettingsRoute=function(){return this._activeRoute&&this._activeRoute.name===_mail_constants.RouteNames.SETTINGS},t.prototype.getCurrentSpaceId=function(){return this._spaceid},t.prototype.getActiveViewContext=function(){return this.isSettingsRoute()?this._activeViewType:this._activeViewType+"_"+(this._activeFolderType||_folder.I13N_FOLDER_TYPES.INBOX)},t.prototype.getPageViewCount=function(){return this._pageViewCount},t.prototype._getSearchSpaceId=function(e){var t=(0,_list.getListIdFromRoute)(e),s=(0,_list.getListContentTypeFromListId)(t),_=(0,_list.isSmartViewSearch)(t),i=(0,_list.isPeopleSearch)(t),a=void 0;if(e.name===_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST)a=this.SPACEIDS.searchMessageOpen;else if(_)switch(s){case _mail_constants.ListContentTypes.IMAGES:a=this.SPACEIDS.photosSmartviewSearch;break;case _mail_constants.ListContentTypes.DOCUMENTS:a=this.SPACEIDS.documentsSmartviewSearch;break;default:a=this.SPACEIDS.messageSmartviewSearch}else a=i?this.SPACEIDS.searchPeople:this.SPACEIDS.searchKeyword;return a},t.prototype._fetchFolderTypeFromRoute=function(e){var t=(0,_list.getListIdFromRoute)(e),s=(0,_list.getFolderIdFromListId)(t),_=this.dispatcher.getStore("MailStore"),i=_.getFolder(s);return i?(0,_folder.getPrimaryFolderType)(i):_mail_constants.FolderTypes.INBOX},t.prototype._trackLaunchView=function(e){switch(e.name){case _mail_constants.RouteNames.SEARCH:this._spaceid=this._getSearchSpaceId(e),this._setSearchFolderType(e),this._setMessageListViewType();break;case _mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST:this._spaceid=this._getSearchSpaceId(e),this._setSearchFolderType(e),this._setMessageViewType();break;case _mail_constants.RouteNames.NEW_DRAFT:this._spaceid=this.SPACEIDS.launchCompose,this._activeFolderType=_folder.I13N_FOLDER_TYPES.INBOX,this._activeViewType=I13N_VIEW_TYPES.COMPOSE;break;case _mail_constants.RouteNames.FOLDER:this._spaceid=this.SPACEIDS.launchFolder,this._activeFolderType=_folder.I13N_FOLDER_TYPES[this._fetchFolderTypeFromRoute(e)]||_folder.I13N_FOLDER_TYPES.USER,this._setMessageListViewType();break;case _mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST:this._spaceid=this.SPACEIDS.launchMessage,this._activeFolderType=_folder.I13N_FOLDER_TYPES[this._fetchFolderTypeFromRoute(e)]||_folder.I13N_FOLDER_TYPES.USER,this._setMessageViewType();break;case _mail_constants.RouteNames.SETTINGS:this._spaceid=this.SPACEIDS.launchFolder,this._trackSettingsView(e)}},t.prototype._trackFolderView=function(e){var t,s=this._fetchFolderTypeFromRoute(e),_=(t={},t[_mail_constants.FolderTypes.INBOX]=this.SPACEIDS.folderViewInbox,t[_mail_constants.FolderTypes.DRAFT]=this.SPACEIDS.folderViewDrafts,t[_mail_constants.FolderTypes.SENT]=this.SPACEIDS.folderViewSent,t[_mail_constants.FolderTypes.ARCHIVE]=this.SPACEIDS.folderViewArchive,t[_mail_constants.FolderTypes.TRASH]=this.SPACEIDS.folderViewTrash,t[_mail_constants.FolderTypes.BULK]=this.SPACEIDS.folderViewSpam,t[_mail_constants.FolderTypes.USER]=this.SPACEIDS.folderViewCustom,t);this._spaceid=_[s]||this.SPACEIDS.folderViewCustom,this._activeFolderType=_folder.I13N_FOLDER_TYPES[s]||_folder.I13N_FOLDER_TYPES.USER,this._setMessageListViewType()},t.prototype._trackComposeView=function(){this._spaceid=this.SPACEIDS.composeNew,this._activeViewType=I13N_VIEW_TYPES.COMPOSE},t.prototype._trackSearchView=function(e){this._spaceid=this._getSearchSpaceId(e),this._setSearchFolderType(e)},t.prototype._trackMessageView=function(){this._spaceid=this.SPACEIDS.messageViewTabPane,this._setMessageViewType()},t.prototype._trackSettingsView=function(e){this._activeViewType=SETTINGS_ROUTE_VIEW_MAPPING[e.params.settingsGroupId]||I13N_VIEW_TYPES.SETTINGS_PERSONALIZE_INBOX,this._activeFolderType=""},t.prototype._setSearchFolderType=function(e){var t=(0,_list.getListIdFromRoute)(e);(0,_list.isPeopleSearch)(t)?this._activeFolderType=_folder.I13N_FOLDER_TYPES.SEARCH_PEOPLE:(0,_list.isSmartViewSearch)(t)?this._activeFolderType=_folder.I13N_FOLDER_TYPES.SEARCH_SMARTVIEW:this._activeFolderType=_folder.I13N_FOLDER_TYPES.SEARCH_KEYWORD},t.prototype._setMessageListViewType=function(){this._activeViewType=I13N_VIEW_TYPES.MESSAGE_LIST},t.prototype._setMessageViewType=function(){this._activeViewType=I13N_VIEW_TYPES.MESSAGE_READ},t.prototype._trackView=function(){var e=this;this.dispatcher.waitFor("RouteStore",function(){var t=e.dispatcher.getStore("ApplicationStore"),s=e.dispatcher.getStore(_pages2.default).getActivePageRoute();if(s){if(e._activeRoute=s,e._pageViewCount++,t.hasSuccessfullyInitialized())switch(s.name){case _mail_constants.RouteNames.SEARCH:e._trackSearchView(s),e._setMessageListViewType();break;case _mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST:e._trackSearchView(s),e._setMessageViewType();break;case _mail_constants.RouteNames.FOLDER:e._trackFolderView(s);break;case _mail_constants.RouteNames.NEW_DRAFT:case _mail_constants.RouteNames.EDIT_DRAFT:e._trackComposeView(s);break;case _mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST:e._trackMessageView(s);break;case _mail_constants.RouteNames.SETTINGS:e._trackSettingsView(s)}else e._trackLaunchView(s);e.emitChange()}})},t.prototype._updateReplyView=function(){this._activeViewType=I13N_VIEW_TYPES.COMPOSE_REPLY,this.emitChange()},t.prototype._updateMessageReadView=function(){this._activeViewType=I13N_VIEW_TYPES.MESSAGE_READ,this.emitChange()},t.prototype._updateMessageListView=function(){this._activeViewType=I13N_VIEW_TYPES.MESSAGE_LIST,this.emitChange()},t.prototype.dehydrate=function(){return{spaceid:this._spaceid,activeFolderType:this._activeFolderType,activeViewType:this._activeViewType,pageViewCount:this._pageViewCount}},t.prototype.rehydrate=function(e){this._spaceid=e.spaceid,this._activeFolderType=e.activeFolderType,this._activeViewType=e.activeViewType,this._pageViewCount=e.pageViewCount},t}(_BaseStore3.default);I13NStore.storeName="I13NStore",I13NStore.handlers={},I13NStore.handlers.NAVIGATE_START="_trackView",I13NStore.handlers.ITEM_LIST_PAGE_SCROLLED="_trackView",I13NStore.handlers.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED="_updateReplyView",I13NStore.handlers.PREVIEW_MESSAGE_REQUESTED="_updateMessageReadView",I13NStore.handlers.PREVIEW_MESSAGE_CLOSED="_updateMessageListView",exports.default=I13NStore,module.exports=exports.default;
},{"../platform/mail_constants":"./platform/mail_constants","../platform/utils/folder":"./platform/utils/folder","../platform/utils/list":"./platform/utils/list","./pages":"./stores/pages","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],"./stores/item_list_ui":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0,exports.AUTO_OPEN_PERIOD=void 0;var _ItemListUIStore$hand,_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),_BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),_pages=require("./pages"),_pages2=_interopRequireDefault(_pages),_react_action_constants=require("../platform/react_action_constants"),_mail=require("./mail"),_mail2=_interopRequireDefault(_mail),_mail_constants=require("../platform/mail_constants"),_message_group=require("../platform/utils/message_group"),_item=require("../platform/utils/item"),_action=require("../platform/utils/action"),_constants=require("../platform/rapid_client/constants.js"),_object=require("../platform/utils/object"),_list=require("../platform/utils/list"),AUTO_OPEN_PERIOD=exports.AUTO_OPEN_PERIOD=330,ItemListUIStore=function(t){function e(n){_classCallCheck(this,e);var a=_possibleConstructorReturn(this,t.call(this,n));return a._states=Object.create(null),a}return _inherits(e,t),_createClass(e,null,[{key:"storeName",get:function(){return"ItemListUIStore"}}]),e.prototype.getSelection=function(t){var e=Object.assign({},this._getSelection(t)),n=this.dispatcher.getStore(_mail2.default),a=n.getMessageGroupIdsForList(t);return this._findInvalidGroupIds(a,e).forEach(function(t){return delete e[t]}),e},e.prototype.getCursor=function(t){return this._getUIStateIndex(t).cursorIndex},e.prototype.getOpenedGroupId=function(t){return this._getUIStateIndex(t).openedGroupId},e.prototype.getActiveAttachmentId=function(t){return this._getUIStateIndex(t).activeAttachmentId},e.prototype._getUIStateIndex=function(t){return this._states[t]||this._resetIndex(t),this._states[t]},e.prototype._getSelection=function(t){return this._getUIStateIndex(t).selection},e.prototype._resetIndex=function(t){this._states[t]={selection:Object.create(null),cursorIndex:-1,openedGroupId:""}},e.prototype._resetSelection=function(t){this._getUIStateIndex(t).selection=Object.create(null)},e.prototype._setCursor=function(t,e){return this._getUIStateIndex(t).cursorIndex=e},e.prototype._updateSelection=function(t,e,n){var a=this._getSelection(t);n.every(function(t){return Boolean(a[t])})?n.forEach(function(t){delete a[t]}):n.forEach(function(t){a[t]=!0});var o=n[n.length-1],r=e.indexOf(o);r!==-1&&this._setCursor(t,r),this._updateOpenedGroupId(t,"")},e.prototype._updateCursorMove=function(t,e){var n=e.listId,a=e.movement,o=e.unit,r=void 0===o?1:o,i=this.getCursor(n),s=void 0;switch(a){case _mail_constants.CursorMovement.FIRST:s=0;break;case _mail_constants.CursorMovement.LAST:s=t.length-1;break;case _mail_constants.CursorMovement.UP:case _mail_constants.CursorMovement.LEFT:s=i-r;break;case _mail_constants.CursorMovement.DOWN:case _mail_constants.CursorMovement.RIGHT:s=i+r}this._setCursor(n,Math.min(Math.max(s,0),t.length-1))},e.prototype._updateOpenedGroupId=function(t,e){var n=this._getUIStateIndex(t);clearTimeout(this.updateGroupIdTimer),n.openedGroupId=e||""},e.prototype._replaceOpenedGroupId=function(t){var e=t.message,n=t.previousGroupId,a=(0,_list.getListIdFromFolderId)(e.folder.id),o=this.dispatcher.getContext().config.conversations?e.conversationId:e.id;this._states[a]&&n===this._states[a].openedGroupId&&(this._updateOpenedGroupId(a,o),this.emitChange())},e.prototype._clearOpenedGroupId=function(t){var e=this._getUIStateIndex(t);clearTimeout(this.updateGroupIdTimer),e.openedGroupId=""},e.prototype._updateActiveAttachmentId=function(t,e){var n=this._getUIStateIndex(t);n.activeAttachmentId=e},e.prototype._findInvalidGroupIds=function(t,e){var n={};return t.forEach(function(t){return n[t]=!0}),Object.keys(e).filter(function(t){return!n[t]})},e.prototype._handleSelectionChange=function(t){var e=this,n=t.listId,a=t.messageGroupIds;this.dispatcher.waitFor([_mail2.default],function(){var t=e.dispatcher.getStore(_mail2.default),o=t.getMessageGroupIdsForList(n);e._updateSelection(n,o,a),e.emitChange()})},e.prototype._handleItemDrag=function(t){var e=this,n=t.listId,a=t.messageGroupIds;this.dispatcher.waitFor([_mail2.default],function(){var t=e.dispatcher.getStore(_mail2.default),o=t.getMessageGroupIdsForList(n),r=e._getSelection(n),i=[];r[a[0]]||i.push(a[0]),e._updateSelection(n,o,i),e.emitChange()})},e.prototype._handleSelectMove=function(t){var e=this,n=t.listId,a=t.movement;this.dispatcher.waitFor([_mail2.default],function(){var t=e.dispatcher.getStore(_mail2.default),o=t.getMessageGroupIdsForList(n),r=e.getCursor(n),i=r+(_mail_constants.CursorMovement.UP===a?-1:1),s=[o[r],o[i]].filter(Boolean),_=e._getSelection(n),c=s.length>0&&s.every(function(t){return Boolean(_[t])});e._updateSelection(n,o,s);var l=e._getSelection(n);if(c){var d=s[s.length-1];l[d]=!0}e.emitChange()})},e.prototype._handleSelectionByType=function(t,e){var n=this,a=t.listId;this.dispatcher.waitFor([_mail2.default],function(){n._resetSelection(a);var t=n.dispatcher.getStore(_mail2.default),o=t.getItemList(a),r=n._getSelection(a);o.filter(e).forEach(function(t){var e=t.id;return r[e]=!0}),Object.keys(r).length&&n._updateOpenedGroupId(a,""),n.emitChange()})},e.prototype._handleSelectAll=function(t){this._handleSelectionByType(t,function(){return!0})},e.prototype._handleSelectNone=function(t){this._handleSelectionByType(t,function(){return!1})},e.prototype._handleSelectRead=function(t){this._handleSelectionByType(t,function(t){return(0,_message_group.getFlags)(t).read})},e.prototype._handleSelectUnread=function(t){this._handleSelectionByType(t,function(t){return!(0,_message_group.getFlags)(t).read})},e.prototype._handleSelectStarred=function(t){this._handleSelectionByType(t,function(t){return(0,_message_group.getFlags)(t).flagged})},e.prototype._handleSelectUnstarred=function(t){this._handleSelectionByType(t,function(t){return!(0,_message_group.getFlags)(t).flagged})},e.prototype._handleSelectRange=function(t){var e=this,n=t.listId,a=t.targetGroupId;this.dispatcher.waitFor([_mail2.default],function(){var t=e.dispatcher.getStore(_mail2.default),o=t.getItemList(n),r=e._getSelection(n),i=e.getCursor(n),s=o.findIndex(function(t){var e=t.id;return a===e});if(!(s<0)){if(i<0&&(i=s),e._setCursor(n,s),s<i){var _=i;i=s,s=_}o.slice(i,s+1).forEach(function(t){var e=t.id;return r[e]=!0}),e._updateOpenedGroupId(n,""),e.emitChange()}})},e.prototype._handleCursorMove=function(t){var e=this,n=t.listId,a=t.movement,o=t.unit;clearTimeout(this.updateGroupIdTimer),this.dispatcher.waitFor([_mail2.default],function(){var t=e.dispatcher.getStore(_mail2.default),r=t.getMessageGroupIdsForList(n);e._updateCursorMove(r,{listId:n,movement:a,unit:o}),e._resetSelection(n),e.updateGroupIdTimer=setTimeout(function(){e._updateOpenedGroupId(n,r[e.getCursor(n)]),e.emitChange()},AUTO_OPEN_PERIOD),e.emitChange()})},e.prototype._handleMarkAsRead=function(){var t=this;this.dispatcher.waitFor(_pages2.default,function(){var e=t.dispatcher.getStore(_pages2.default).getActivePageRoute(),n=(0,_list.getListIdFromRoute)(e);e.name===_mail_constants.RouteNames.SEARCH&&(0,_list.listIdHasMessageFlags)(n)&&(0,_list.listIdContainsMessageFlags)(n,{read:!1})&&t._handleActiveListDestructiveOp()})},e.prototype._handleActiveListDestructiveOp=function(){this._handleDestructiveOp({forceOpenGroup:!0})},e.prototype._handleDestructiveOp=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.forceOpenGroup,a=void 0!==n&&n,o={},r=this.dispatcher.getStore(_mail2.default);Object.keys(this._states).forEach(function(t){var e=r.getMessageGroupIdsForList(t);o[t]=e}),this.dispatcher.waitFor([_mail2.default],function(){Object.keys(t._states).forEach(function(e){var n,i=r.getMessageGroupIdsForList(e),s=o[e],_=s[t.getCursor(e)],c=i.findIndex(function(t){return t===_}),l=t._getSelection(e),d=Object.assign((n={},n[_]=!0,n),l);if(t._findInvalidGroupIds(i,d).forEach(function(t){delete l[t]}),c>=0||!i.length)t._setCursor(e,c);else if(t.getCursor(e)>=0){var u=t.getCursor(e),p={};i.slice(0,u).forEach(function(t){return p[t]=!0});var S=u-s.slice(0,u).filter(function(t){return!p[t]}).length;t._setCursor(e,Math.min(Math.max(S,0),i.length-1))}(a||t.getOpenedGroupId(e))&&t._updateOpenedGroupId(e,i[t.getCursor(e)])}),t.emitChange()})},e.prototype._handlePotentialTargetedDestruction=function(t){var e=t.listId,n=t.messageGroupIds;if(1===n.length){var a=this.dispatcher.getStore(_mail2.default),o=a.getMessageGroupIdsForList(e),r=n[0];this._resetSelection(e),this._setCursor(e,o.indexOf(r))}this._handleActiveListDestructiveOp()},e.prototype._handleGroupOpen=function(t){var e=this,n=t.listId,a=t.itemId;this.dispatcher.waitFor([_mail2.default],function(){var t=e.dispatcher.getStore(_mail2.default),o=t.getMessageGroupIdsForList(n),r=(0,_item.getGroupIdFromItemId)(a,n);r&&e._updateOpenedGroupId(n,r),e._resetSelection(n),e._setCursor(n,o.indexOf(a)),e.emitChange()})},e.prototype._handleGroupClose=function(t){var e=t.listId;this._resetSelection(e),this._clearOpenedGroupId(e),this.emitChange()},e.prototype._handleAttachmentPreview=function(t){var e=t.listId,n=t.attachmentId,a=t.fullScreenMode;if(a){var o=this.dispatcher.getStore(_mail2.default),r=o.getMessageGroupIdsForList(e);this._setCursor(e,r.indexOf(n)),this._updateActiveAttachmentId(e,n),this.emitChange()}},e.prototype._handleAttachmentPreviewClose=function(t){var e=t.listId;this._updateActiveAttachmentId(e,null),this.emitChange()},e.prototype._handleReset=function(t){var e=t.listId;this._resetIndex(e)},e.prototype._handleClosePageRequested=function(){var t=this.dispatcher.getStore(_pages2.default).getActivePageRoute(),e=(0,_list.getListIdFromRoute)(t);t.name===_mail_constants.RouteNames.SEARCH&&this._handleReset({listId:e})},e.prototype._handleOpenPageRequested=function(t){var e=t.route,n=t.currentRoute,a=void 0===n?{}:n;if(e.name!==_mail_constants.RouteNames.NEW_DRAFT){var o=(0,_list.getListIdFromRoute)(e),r=(0,_object.getIn)(a,"unsavedData.activeItemId",null),i=[_constants.MKEYS.OPEN_MSG,_constants.MKEYS.DOC_READ_MSG,_constants.MKEYS.PHOTO_READ_MSG],s=(0,_action.getUIContextFromAction)(t)||{};r&&i.indexOf(s.mKey)!==-1&&this._handleGroupOpen({listId:o,itemId:r}),this._handleAttachmentPreviewClose({listId:o})}},e}(_BaseStore3.default);exports.default=ItemListUIStore,ItemListUIStore.handlers=(_ItemListUIStore$hand={},_ItemListUIStore$hand[_react_action_constants.mail.PREVIEW_MESSAGE_REQUESTED]="_handleGroupOpen",_ItemListUIStore$hand[_react_action_constants.mail.PREVIEW_MESSAGE_CLOSED]="_handleGroupClose",_ItemListUIStore$hand[_react_action_constants.mail.ATTACHMENT_PREVIEW_OPENED]="_handleAttachmentPreview",_ItemListUIStore$hand[_react_action_constants.mail.ATTACHMENT_PREVIEW_CLOSED]="_handleAttachmentPreviewClose",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_SELECTED]="_handleSelectionChange",_ItemListUIStore$hand[_react_action_constants.mail.ITEMS_DRAG_STARTED]="_handleItemDrag",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_RANGE_SELECTED]="_handleSelectRange",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_ALL_SELECTED]="_handleSelectAll",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_NONE_SELECTED]="_handleSelectNone",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_READ_SELECTED]="_handleSelectRead",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_UNREAD_SELECTED]="_handleSelectUnread",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_STARRED_SELECTED]="_handleSelectStarred",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_UNSTARRED_SELECTED]="_handleSelectUnstarred",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_SELECTION_REPLACED]="_handleSelectionReplacement",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED]="_replaceOpenedGroupId",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED]="_replaceOpenedGroupId",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_CURSOR_MOVED]="_handleCursorMove",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_FROM_MESSAGE_LIST_SELECT_CURSOR_MOVED]="_handleSelectMove",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_DELETE_REQUESTED]="_handlePotentialTargetedDestruction",_ItemListUIStore$hand[_react_action_constants.mail.DELETE_DRAFT_REQUESTED]="_handleDestructiveOp",_ItemListUIStore$hand[_react_action_constants.mail.SEND_SUCCESS]="_handleDestructiveOp",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_MOVE_REQUESTED]="_handleActiveListDestructiveOp",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED]="_handleActiveListDestructiveOp",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_RESTORE_REQUESTED]="_handleActiveListDestructiveOp",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED]="_handleActiveListDestructiveOp",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED]="_handleActiveListDestructiveOp",_ItemListUIStore$hand[_react_action_constants.mail.MESSAGES_MARK_READ_REQUESTED]="_handleMarkAsRead",_ItemListUIStore$hand[_react_action_constants.mail.DELETE_ACTIVE_FOLDER_REQUESTED]="_handleDestructiveOp",_ItemListUIStore$hand[_react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED]="_handleDestructiveOp",_ItemListUIStore$hand[_react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED]="_handleDestructiveOp",_ItemListUIStore$hand[_react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED]="_handleDestructiveOp",_ItemListUIStore$hand[_react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED]="_handleDestructiveOp",_ItemListUIStore$hand[_react_action_constants.mail.ARCHIVE_FOLDER_REQUESTED]="_handleReset",_ItemListUIStore$hand[_react_action_constants.mail.CLEAR_FOLDER_REQUESTED]="_handleReset",_ItemListUIStore$hand[_react_action_constants.mail.CLOSE_PAGE_REQUESTED]="_handleClosePageRequested",_ItemListUIStore$hand[_react_action_constants.mail.OPEN_PAGE_REQUESTED]="_handleOpenPageRequested",_ItemListUIStore$hand);
},{"../platform/mail_constants":"./platform/mail_constants","../platform/rapid_client/constants.js":"./platform/rapid_client/constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/action":"./platform/utils/action","../platform/utils/item":"./platform/utils/item","../platform/utils/list":"./platform/utils/list","../platform/utils/message_group":"./platform/utils/message_group","../platform/utils/object":"./platform/utils/object","./mail":"./stores/mail","./pages":"./stores/pages","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],331:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _KeyboardShortcutStor,_react_action_constants=require("../platform/react_action_constants"),_mail_constants=require("../platform/mail_constants"),_BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),COMBINATION_DELIMITER="+",MULTIPLE_DELIMITER=",",VALIDATION_REGEX=/^((META|CTRL|ALT|SHIFT)[+ ])*[^+, ~!@#$%^&*()_+]+$/,KeyboardShortcutStore=function(t){function e(r){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,r));return n._keyBindings={},n}return _inherits(e,t),e.prototype.getKeyboardShortcuts=function(){return this._keyBindings},e.prototype._getKeyParts=function(t){return t.split(MULTIPLE_DELIMITER).map(function(t){t=t.trim();var e=t.split(COMBINATION_DELIMITER);if(!VALIDATION_REGEX.test(t))throw new Error('"'+t+"\" contains unsanctioned character or modifier keys.\n                    Character must be consist of alphanumeric, '+', ' ', or ','.\n                    All modifier character has to be one of "+Object.keys(_mail_constants.ModifierKeys)+".");var r=e.slice(-1)[0].toUpperCase();return{char:r,modifier:e.slice(0,-1).sort()}})},e.prototype._setKeyBinding=function(t){var e=this,r=t.id,n=t.key,o=t.callback,i=this._getKeyParts(n);i.forEach(function(t){var n=t.char,i=t.modifier,a={id:r,key:n,callback:o,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1};e._keyBindings[n]||(e._keyBindings[n]=[]),i.forEach(function(t){a.key+=t,a[t.toLowerCase()+"Key"]=!0}),e._keyBindings[n].push(a),e._keyBindings[n].sort(function(t,e){if(t.key===e.key)throw new Error("\n                        Duplicate key binding found!\n                        "+JSON.stringify(t,null,2)+"\n                        vs.\n                        "+JSON.stringify(e,null,2)+"\n                    ");return t.key.length<e.key.length})})},e.prototype._removeKeyBinding=function(t){var e=this,r=t.key,n=this._getKeyParts(r);n.forEach(function(t){var n=t.char,o=t.modifier,i=e._keyBindings[n];if(!i)throw new Error("No shortcut binding with "+r+" found.");var a=i.some(function(t,r){var i=Object.keys(_mail_constants.ModifierKeys).every(function(e){return t[e.toLowerCase()+"Key"]===o.indexOf(e)>-1});if(i)return e._keyBindings[n].splice(r,1),!0});if(!a)throw new Error("No shortcut binding for "+r+" found.")})},e.prototype.keyDidUpdate=function(t){var e=this,r=t.oldKeys,n=t.newKeys;r.forEach(function(t){return e._removeKeyBinding(t)}),n.forEach(function(t){return e._setKeyBinding(t)}),this.emitChange()},e.prototype.keyDidBind=function(t){var e=this,r=t.keys;r.forEach(function(t){e._setKeyBinding(t)}),this.emitChange()},e.prototype.keyDidUnbind=function(t){var e=this,r=t.keys;r.forEach(function(t){e._removeKeyBinding(t)}),this.emitChange()},e}(_BaseStore3.default);KeyboardShortcutStore.storeName="KeyboardShortcutStore",KeyboardShortcutStore.handlers=(_KeyboardShortcutStor={},_KeyboardShortcutStor[_react_action_constants.mail.KEY_DID_BIND]="keyDidBind",_KeyboardShortcutStor[_react_action_constants.mail.KEY_DID_UPDATE]="keyDidUpdate",_KeyboardShortcutStor[_react_action_constants.mail.KEY_DID_UNBIND]="keyDidUnbind",_KeyboardShortcutStor),module.exports=KeyboardShortcutStore;
},{"../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],"./stores/mail/collections/accounts":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _mail_constants=require("../../../platform/mail_constants"),_object=require("../../../platform/utils/object"),object=_interopRequireWildcard(_object),_invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),CLIENT_ACTIONABLE_STATE=4002,CLIENT_NOTACTIONABLE_STATE=4003,PASSWORD_EXPIRED_TYPE=1,AccountsCollection=function(){function t(){_classCallCheck(this,t),this._rootAccounts={},this._activeAccountId=null,this._alerts=[]}return t.prototype.initialize=function(t){this.setAccounts(t)},t.prototype._reset=function(){this._rootAccounts={}},t.prototype.get=function(t){var n=this._rootAccounts[t];if(!n){var e=this.getPrimaryAccount(this._rootAccounts);n=object.values(e.secondaryAccounts).find(function(n){var e=n.id;return e===t})}return n},t.prototype.getByEmail=function(t){return this.getAllAccounts().find(function(n){var e=n.email;return e===t})},t.prototype.setAccounts=function(t){var n=this;this._reset();var e=[],o=[];t.forEach(function(t){t=Object.assign({},t),n._isRootAccount(t)?e.push(t):o.push(t)});var c=this._getPrimaryAccount(e);c.secondaryAccounts=o.map(function(t){return Object.assign({sendingName:c.sendingName,signature:c.signature,signatureActive:c.signatureActive},t)}),e.forEach(function(t){n._rootAccounts[t.id]=t})},t.prototype.setAccount=function(t){var n=this.getAllAccounts(),e=object.values(n).find(function(n){var e=n.id;return e===t.id});if(e){if(e.isSending!==t.isSending){var o=object.values(n).filter(function(t){var n=t.type;return n!==_mail_constants.AccountTypes.IMAPIN}).find(function(t){var n=t.isSending;return n});o.isSending=!1}else e.signature!==t.signature&&e.isPrimary?e.secondaryAccounts.map(function(n){return Object.assign(n,{signature:t.signature})}):e.signatureActive!==t.signatureActive&&e.isPrimary&&e.secondaryAccounts.map(function(n){return Object.assign(n,{signatureActive:t.signatureActive})});Object.assign(e,t)}},t.prototype.addAccount=function(t){var n=this.getPrimaryAccount();this._isRootAccount(t)?this._rootAccounts[t.id]=t:n.secondaryAccounts.push(Object.assign({sendingName:n.sendingName,signature:n.signature,signatureActive:n.signatureActive},t))},t.prototype.deleteAccount=function(t){var n=t.id,e=t.type,o=this.getPrimaryAccount(),c=o.secondaryAccounts.filter(function(t){var e=t.id;return e!==n});e===_mail_constants.AccountTypes.DEA?o.secondaryAccounts=c:this.setAccount(t),n===this.getActiveAccountId()&&this.setActiveAccountId(this.getPrimaryAccount().id)},t.prototype.getRootAccounts=function(){return object.values(this._rootAccounts).sort(function(t,n){return n.isPrimary!==t.isPrimary?n.isPrimary-t.isPrimary:t.id-n.id})},t.prototype.getAllAccounts=function(){var t=this.getPrimaryAccount(),n=[].concat(object.values(this._rootAccounts),t.secondaryAccounts);return n.sort(function(t,n){return n.isPrimary!==t.isPrimary?n.isPrimary-t.isPrimary:t.id-n.id})},t.prototype.getImapInAccounts=function(){return object.values(this._rootAccounts).filter(function(t){var n=t.type;return n===_mail_constants.AccountTypes.IMAPIN})},t.prototype._getPrimaryAccount=function(t){for(var n=void 0,e=0;e<t.length;e++){var o=t[e];if(o.isPrimary){n=o;break}}return n},t.prototype.getPrimaryAccount=function(){return this._getPrimaryAccount(object.values(this._rootAccounts))},t.prototype._isRootAccount=function(t){return _mail_constants.ROOT_ACCOUNT_TYPE.indexOf(t.type)>-1},t.prototype.setActiveAccountId=function(t){(0,_invariant2.default)(t,"accountId is required"),this._activeAccountId=t},t.prototype.getActiveAccountId=function(){return this._activeAccountId||this.getPrimaryAccount().id},t.prototype.getActiveAccount=function(){return this._rootAccounts[this.getActiveAccountId()]},t.prototype.getDefaultSendingAccount=function(){return this.getAllAccounts().find(function(t){var n=t.isSending;return!!n})||this.getActiveAccount()},t.prototype.getImapInProvider=function(){var t=this.getActiveAccount();if(t.type!==_mail_constants.AccountTypes.IMAPIN)return null;switch(t.serverUri){case"imaps://gmail.com":return"google";case"imaps://outlook.com":return"outlook";case"imaps://aol.com":return"aol";default:return"yahoo_in"}},t.prototype.getMyAddresses=function(){var t={},n=object.values(this._rootAccounts).concat(this.getPrimaryAccount().secondaryAccounts);return n.forEach(function(n){var e=n.email;t[e]=!0}),t},t.prototype.getAddressesForAccount=function(t){var n=this.get(t),e={};return e[n.email]=!0,n.secondaryAccounts&&n.secondaryAccounts.forEach(function(t){var n=t.email;e[n]=!0}),e},t.prototype.isImapInAccount=function(t){return this.get(t)&&this.get(t).type===_mail_constants.AccountTypes.IMAPIN},t.prototype.setAlerts=function(t){this._alerts=t},t.prototype.getAlerts=function(){return this._alerts},t.prototype.getAccountAlertByAccountId=function(t){return this._alerts.find(function(n){return n.accountId===t})||{}},t.prototype.getExpiredAccounts=function(){var t=this;return this.getAlerts().filter(function(n){return[CLIENT_ACTIONABLE_STATE,CLIENT_NOTACTIONABLE_STATE].indexOf(n.state)!==-1&&t.isImapInAccount(n.accountId)&&n.type===PASSWORD_EXPIRED_TYPE}).map(function(t){return t.accountId})},t.prototype.dehydrate=function(){return{accounts:this._rootAccounts,activeAccountId:this._activeAccountId,alerts:this._alerts}},t.prototype.rehydrate=function(t){t&&(this._rootAccounts=t.accounts,this._activeAccountId=t.activeAccountId,this._alerts=t.alerts)},t}();exports.default=AccountsCollection,module.exports=exports.default;
},{"../../../platform/invariant":"./platform/invariant","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/object":"./platform/utils/object"}],"./stores/mail/collections/async_task":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _STATUS_ORDER,_invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_react_action_constants=require("../../../platform/react_action_constants"),_mail_constants=require("../../../platform/mail_constants"),STATUS_ORDER=(_STATUS_ORDER={},_STATUS_ORDER[_mail_constants.BulkTaskStatus.INIT]=0,_STATUS_ORDER[_mail_constants.BulkTaskStatus.PENDING]=1,_STATUS_ORDER[_mail_constants.BulkTaskStatus.ABORTING]=2,_STATUS_ORDER[_mail_constants.BulkTaskStatus.ABORTED]=3,_STATUS_ORDER[_mail_constants.BulkTaskStatus.ABORT_FAILED]=4,_STATUS_ORDER[_mail_constants.BulkTaskStatus.COMPLETED]=5,_STATUS_ORDER[_mail_constants.BulkTaskStatus.FAILED]=6,_STATUS_ORDER),AsyncTaskCollection=function(){function t(){_classCallCheck(this,t),this._task=null,this._taskPayload=null}return t.prototype.getTask=function(){return this._task},t.prototype.getTaskActionPayload=function(){return this._taskPayload},t.prototype.set=function(t){var a=t.task;(0,_invariant2.default)(a.id,"`taskid` is a required field when setting a bulk task.");var s=STATUS_ORDER[this._task.status],_=this._task.progress,n=STATUS_ORDER[a.status],i=a.progress;n>s?this._task=a:_<=i&&(this._task=Object.assign({},this._task,{progress:a.progress}))},t.prototype.add=function(t,a){(0,_invariant2.default)(t.async,"Async tasks can only be added to asyncTaskCollection"),(0,_invariant2.default)(!this._task||this._task.status===_mail_constants.BulkTaskStatus.ABORTED||this._task.status===_mail_constants.BulkTaskStatus.COMPLETED||this._task.status===_mail_constants.BulkTaskStatus.FAILED,"Another task is already in progress"),this._task={status:_mail_constants.BulkTaskStatus.INIT,progress:0};var s=t.successActionType,_=t.failureActionType,n=void 0;switch(a){case _react_action_constants.mail.MARK_READ_FOLDER_REQUESTED:n=_mail_constants.BulkActionTypes.MARK_READ;break;case _react_action_constants.mail.ARCHIVE_FOLDER_REQUESTED:n=_mail_constants.BulkActionTypes.ARCHIVE;break;case _react_action_constants.mail.CLEAR_FOLDER_REQUESTED:n=_mail_constants.BulkActionTypes.DELETE;break;case _react_action_constants.mail.MESSAGES_DELETE_REQUESTED:n=_mail_constants.BulkActionTypes.MESSAGES_DELETE;break;case _react_action_constants.mail.MESSAGES_MOVE_REQUESTED:n=_mail_constants.BulkActionTypes.MESSAGES_MOVE;break;case _react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED:n=_mail_constants.BulkActionTypes.MESSAGES_ARCHIVE;break;case _react_action_constants.mail.MESSAGES_RESTORE_REQUESTED:n=_mail_constants.BulkActionTypes.MESSAGES_RESTORE;break;case _react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED:n=_mail_constants.BulkActionTypes.MESSAGES_MARK_SPAM;break;case _react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED:n=_mail_constants.BulkActionTypes.MESSAGES_MARK_NOT_SPAM}this._taskPayload={successActionType:s,failureActionType:_,actionPayload:t,actionType:n}},t.prototype.abort=function(){this._task=Object.assign({},this._task,{status:_mail_constants.BulkTaskStatus.ABORTING})},t.prototype.abortFailed=function(){this._task=Object.assign({},this._task,{status:_mail_constants.BulkTaskStatus.ABORT_FAILED})},t.prototype.abortSucceeded=function(){this._task=Object.assign({},this._task,{status:_mail_constants.BulkTaskStatus.COMPLETED})},t}();exports.default=AsyncTaskCollection,module.exports=exports.default;
},{"../../../platform/invariant":"./platform/invariant","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/react_action_constants":"./platform/react_action_constants"}],"./stores/mail/collections/attachment_metadata":[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mergeIntoInformation(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).filter(function(t){return"boolean"==typeof e[t]||Boolean(e[t])}).forEach(function(s){return t[s]=e[s]}),t}exports.__esModule=!0;var _mail_constants=require("../../../platform/mail_constants"),Types=_mail_constants.Attachments.Types,SubTypes=_mail_constants.Attachments.SubTypes,AttachmentCollection=function(){function t(){_classCallCheck(this,t),this.attachments={},this.messageIdToAttachmentIds={}}return t.prototype.add=function(t,e){e.subtype===SubTypes.CALENDAR&&e.type===Types.TEXT||(this.messageIdToAttachmentIds.hasOwnProperty(t)||(this.messageIdToAttachmentIds[t]=[]),this.attachments[e.id]||this.messageIdToAttachmentIds[t].push(e.id),this.attachments[e.id]=mergeIntoInformation(this.attachments[e.id],e))},t.prototype.remove=function(t){delete this.attachments[t]},t.prototype.removeByMessageId=function(t){var e=this;if(this.messageIdToAttachmentIds.hasOwnProperty(t)){var s=this.messageIdToAttachmentIds[t];s.forEach(function(t){return e.remove(t)}),delete this.messageIdToAttachmentIds[t]}},t.prototype.savePreviewerUiState=function(t,e){this.attachments[t]=mergeIntoInformation(this.attachments[t],{previewerUiState:e})},t.prototype.exists=function(t){return!!this.attachments[t]},t.prototype.get=function(t){return this.attachments[t]},t.prototype.getAttachmentIdsByMessageId=function(t){return this.messageIdToAttachmentIds.hasOwnProperty(t)?this.messageIdToAttachmentIds[t]:[]},t.prototype.getByMessageId=function(t){var e=this,s=this.getAttachmentIdsByMessageId(t);return s.map(function(t){return e.get(t)})},t.prototype.getNextAttachmentIdForMessage=function(t,e){return this._getNextPreviousAttachmentIdForMessage(t,e,1)},t.prototype.getPreviousAttachmentIdForMessage=function(t,e){return this._getNextPreviousAttachmentIdForMessage(t,e,-1)},t.prototype._getNextPreviousAttachmentIdForMessage=function(t,e,s){var n=this.getAttachmentIdsByMessageId(e),a=n.indexOf(t),o=n[a+s];return"undefined"==typeof o||a===-1?"":o},t.prototype.dehydrate=function(){return{attachments:this.attachments,messageIdToAttachmentIds:this.messageIdToAttachmentIds}},t.prototype.rehydrate=function(t){t&&(this.attachments=t.attachments,this.messageIdToAttachmentIds=t.messageIdToAttachmentIds)},t}();exports.default=AttachmentCollection,module.exports=exports.default;
},{"../../../platform/mail_constants":"./platform/mail_constants"}],"./stores/mail/collections/compose":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function createRecipientsList(t){var e=t.message,a=t.senderAddresses,o=t.composeMode,s={to:[],cc:[],bcc:[]},i=function(t){return a[t.email]!==!0},n=function(t){return a[t.email]===!0};return o===ComposeModes.REPLY?s.to=e.headers.replyTo||e.headers.from||[]:o===ComposeModes.REPLY_ALL&&(e.headers.replyTo&&e.headers.replyTo.length?s.to=participantsUniqByEmail(e.headers.replyTo.concat(e.headers.to).filter(function(t){return i(t)||e.headers.replyTo.find(n)&&e.headers.to.find(n)})):s.to=participantsUniqByEmail(e.headers.from.concat(e.headers.to).filter(function(t){return i(t)||e.headers.from.find(n)&&e.headers.to.find(n)})),s.cc=participantsUniqByEmail(e.headers.cc).filter(i).filter(function(t){return!s.to.find(function(e){return e.email===t.email})})),s}function participantsUniqByEmail(t){var e={},a=[];return t.forEach(function(t){e[t.email]||(e[t.email]=!0,a.push(t))}),a}function validateAttributes(t){Object.keys(t).forEach(function(t){(0,_invariant2.default)(ATTRIBUTES.hasOwnProperty(t),"composeData contains unknown attribute: "+t)})}function createSubject(t){var e=t.message,a=t.composeMode,o="",s="";switch(a){case ComposeModes.REPLY:case ComposeModes.REPLY_ALL:o="Re: ";break;case ComposeModes.FORWARD:o="Fw: "}return e.headers.subject&&(s=(0,_message_group.removeMatchTermDelimiter)(e.headers.subject),0!==e.headers.subject.indexOf(o)&&(s=o+s)),s}function createBody(t){var e=t.signature,a=t.signatureActive,o=t.message,s={content:createSignature({signature:e,signatureActive:a})||""};if(o&&o.body.html&&o.headers.from){var i=o.headers.from[0],n=i.name,r=void 0===n?"":n,c=i.email;s.content+=HTML_EMPTY_LINE,s.date=o.date,s.quotedName=r,s.quotedAddress=c,s.quote=o.body.html}return s}function createSignature(t){var e=t.signature,a=t.signatureActive,o="";return e&&a&&(o+=HTML_EMPTY_LINE+HTML_EMPTY_LINE,o+="<div>"+e+"</div>"),o}exports.__esModule=!0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t};exports.createBody=createBody;var _invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_object=require("../../../platform/utils/object"),_attachments=require("../../../platform/utils/attachments"),_message_quote_finder=require("../../../platform/utils/message_quote_finder"),_mail_constants=require("../../../platform/mail_constants"),_without=require("lodash/without"),_without2=_interopRequireDefault(_without),_message_group=require("../../../platform/utils/message_group"),DraftStatus=_mail_constants.Draft.Status,ComposeModes=_mail_constants.Compose.Modes,Dispositions=_mail_constants.Attachments.Dispositions,ATTRIBUTES=(0,_object.mirrorKeys)(["accountId","captcha","csid","groupId","folderId","draftStatus","initialBcc","initialBody","initialCc","initialFrom","initialSubject","initialTo","lastSavedMessageId","lastSavedTime","spame","attachments","files","inReplyTo","htmlAnnotations","focusSubject","composeMode","originalFrom","originalTo","originalCc","originalSubject","originalSentDate","attachFiles","secureMode"]),HTML_EMPTY_LINE="<div><br/></div>",ComposeCollection=function(){function t(){_classCallCheck(this,t),this.rfcToComposeData={},this.messageIdToComposeData={},this.composeData={},this.states={},this.byGroupId={}}return t.prototype.create=function(t){var e=t.composeMode,a=t.csid,o=t.account,s=t.senderAddresses,i=t.message,n=t.files,r=void 0===n?[]:n,c=t.groupId,d=void 0===c?null:c,u=t.initialSubject,m=t.initialBody,p=t.folderId;(0,_invariant2.default)(a,"csid is required"),(0,_invariant2.default)(o,"account is required when creating a composeData"),(0,_invariant2.default)(e===ComposeModes.NEW||e===ComposeModes.SPONSORED_FORWARD||i&&i.body,"message is required and has to be full (including body), if not a new draft"),(0,_invariant2.default)(o.id,"account id should be present"),(0,_invariant2.default)(p,"folder id should be present");var l=_message_quote_finder.DEFAULT_QUOTE_CLASS+"_"+a,f=o.signature,h=o.signatureActive,g={accountId:o.id,folderId:p,csid:a,groupId:d,initialBcc:[],initialBody:{},initialCc:[],initialFrom:[],initialSubject:"",initialTo:[],attachments:[],files:{},inReplyTo:{},lastSavedMessageId:"",htmlAnnotations:[{divIds:[l]}],draftStatus:DraftStatus.INIT,composeMode:e,originalFrom:[],originalTo:[],originalCc:[],originalSubject:"",originalSentDate:"",focusSubject:!1,attachFiles:r,secureMode:_mail_constants.SecureMode.DISABLED};switch((0,_invariant2.default)("string"==typeof a,"csid has to be a string. csid: "+a),e){case ComposeModes.NEW:case ComposeModes.SPONSORED_FORWARD:if(Object.assign(g,{initialBody:m&&m.content?m:createBody({signature:f,signatureActive:h}),initialSubject:u||""}),i&&i.attachments){var _="",v=[],I=new RegExp(/^http*/);i.attachments.forEach(function(t){var e=t.dataId,a=void 0===e?(0,_attachments.generateContentId)():e,o=t.contentId,s=void 0===o?(0,_attachments.generateContentId)():o,n=t.downloadUrl,r=void 0===n?"":n,c=t.isExternal,d=t.disposition;if(t.dataId=a,t.contentId=s,c)_+="<div><a href="+r+">"+r+"</a></div>";else if("inline"===d){var u=_extends({},t,{state:_mail_constants.RecordStates.LOADING,hasPermanentUrl:I.test(r)});v=v.concat((0,_attachments.transformAttachments)(i,[u]))}else v=v.concat((0,_attachments.transformAttachments)(i,[t]))}),g.initialBody.content=g.initialBody.content?_+g.initialBody.content:_,g.attachments=v}break;case ComposeModes.REPLY:case ComposeModes.REPLY_ALL:(0,_invariant2.default)(i.body,"at this point message body should be loaded");var y=createRecipientsList({message:i,senderAddresses:s,composeMode:e}),D=y.to,S=y.cc,b=y.bcc;this.setState(a,_mail_constants.RecordStates.LOADED),g.initialTo=D,g.initialCc=S,g.initialBcc=b,g.initialSubject=createSubject({message:i,composeMode:e}),g.initialBody=createBody({signature:f,signatureActive:h,message:i}),g.inReplyTo={id:i.id,messageIdRfc822:i.headers.messageIdRfc822},g.originalFrom=i.headers.from,g.originalTo=i.headers.to,g.originalCc=i.headers.cc,g.originalSubject=i.headers.subject,g.originalSentDate=i.headers.date;break;case ComposeModes.FORWARD:(0,_invariant2.default)(i.body,"at this point message body should be loaded"),this.setState(a,_mail_constants.RecordStates.LOADED),g.initialSubject=createSubject({message:i,composeMode:e}),g.initialBody=createBody({signature:f,signatureActive:h,message:i}),g.inReplyTo={id:i.id,messageIdRfc822:i.headers.messageIdRfc822},g.originalFrom=i.headers.from,g.originalTo=i.headers.to,g.originalCc=i.headers.cc,g.originalSubject=i.headers.subject,g.originalSentDate=i.headers.date,g.attachments=(0,_attachments.transformAttachments)(i,i.attachments);break;case ComposeModes.EDIT:(0,_invariant2.default)(i.body,"at this point message body should be loaded"),this.setState(a,_mail_constants.RecordStates.LOADED),g.initialBcc=i.headers.bcc||[],g.initialBody.content=i.body.html,g.htmlAnnotations=i.body.htmlAnnotations,g.initialSubject=i.headers.subject||"",g.initialCc=i.headers.cc||[],g.initialFrom=i.headers.from||[],g.initialTo=i.headers.to||[],g.draftStatus=DraftStatus.SAVED,g.lastSavedMessageId=i.id,g.inReplyTo={id:i.id,messageIdRfc822:i.headers.inReplyTo},g.attachments=(0,_attachments.transformAttachments)(i,i.attachments);break;default:(0,_invariant2.default)(!1,"composeMode is invalid. composeMode: "+e)}if(validateAttributes(g),this.setState(a,_mail_constants.RecordStates.LOADED),this.composeData[a]=g,d){var T=this.byGroupId[d]||(this.byGroupId[d]=[]);T.push(g)}this._addToRfcToCsidMap(g.inReplyTo,a),g.lastSavedMessageId&&(this.messageIdToComposeData[g.lastSavedMessageId]=g)},t.prototype.hasUnsavedData=function(){return(0,_object.values)(this.composeData).some(function(t){var e=t.draftStatus;return e!==DraftStatus.INIT&&e!==DraftStatus.SAVED_PARTIAL&&e!==DraftStatus.SAVED})},t.prototype.get=function(t){return this.composeData[t]},t.prototype.getByMessageId=function(t){return this.messageIdToComposeData[t]},t.prototype.getByGroupId=function(t){return this.byGroupId[t]||[]},t.prototype.getByInReplyTo=function(t){var e=this,a=this.rfcToComposeData[t]||[];return a.map(function(t){return e.composeData[t]})},t.prototype.getState=function(t){return this.states[t]||_mail_constants.RecordStates.DOES_NOT_EXIST},t.prototype.getDraftStatus=function(t){return(0,_invariant2.default)("string"==typeof t,"csid has to be a string. csid: "+t),(0,_invariant2.default)(this.composeData[t],"Invalid csid"),this.composeData[t].draftStatus},t.prototype.setState=function(t,e){(0,_invariant2.default)(_mail_constants.RecordStates.hasOwnProperty(e),"unknown state '"+e+"'.\n                  available states: "+JSON.stringify(_mail_constants.RecordStates)),(0,_invariant2.default)(!this.composeData[t],"can't change state of existing 'composeData' that has been LOADED.\n                  use #remove first"),this.states[t]=e},t.prototype.update=function(t,e){validateAttributes(e);var a=this.byGroupId,o=this.composeData[t],s=o.draftStatus,i=e.draftStatus;if(s!==DraftStatus.SENDING&&s!==DraftStatus.SENT||i!==DraftStatus.EDITED){var n=Object.assign({},o,e);(0,_invariant2.default)(o,"compose data for csid: '"+t+"' does not exist"),this.composeData[t]=n,this._addToRfcToCsidMap(n.inReplyTo,t),n.groupId&&(this._cleanByGroupIdMap(t,o.groupId),a[n.groupId]||(a[n.groupId]=[]),a[n.groupId].push(n)),o.lastSavedMessageId&&delete this.messageIdToComposeData[o.lastSavedMessageId],this.messageIdToComposeData[n.lastSavedMessageId]=n}},t.prototype._addToRfcToCsidMap=function(t,e){if(t){var a=t.messageIdRfc822;this.rfcToComposeData.hasOwnProperty(a)||(this.rfcToComposeData[a]=[]);var o=this.rfcToComposeData[a];o.indexOf(e)===-1&&o.push(e)}},t.prototype._removeFromRfcToCsidMap=function(t,e){if(t){var a=this.rfcToComposeData[t.messageIdRfc822];if(a){var o=a.indexOf(e);o!==-1&&a.splice(o,1)}}},t.prototype._cleanByGroupIdMap=function(t,e){if(e){var a=this.getByGroupId(e),o=a.findIndex(function(e){return e.csid===t});a.splice(o,1)}},t.prototype.focusSubject=function(t){this.composeData[t].focusSubject=!0},t.prototype.unfocusSubject=function(t){this.composeData[t].focusSubject=!1},t.prototype.removeGroupId=function(t){var e=this.composeData[t];(0,_invariant2.default)(e,"compose data for csid: '"+t+"' does not exist"),this._cleanByGroupIdMap(t,e.groupId),this.composeData[t].groupId=null},t.prototype.updateComposeMode=function(t){var e=t.csid,a=t.message,o=t.senderAddresses,s=t.composeMode,i=createRecipientsList({message:a,senderAddresses:o,composeMode:s}),n=i.to,r=i.cc,c=i.bcc;this.update(e,{composeMode:s,initialSubject:createSubject({message:a,composeMode:s}),initialTo:n,initialCc:r,initialBcc:c})},t.prototype.addAttachments=function(t,e,a){var o=this.get(t);(0,_invariant2.default)(o,"compose data for csid: '"+t+"' does not exist"),e.forEach(function(t,e){var s=a[e],i=void 0;(0,_invariant2.default)(s,"disposition for '"+t+"' is missing."),t instanceof Blob?(i=Object.assign({},(0,_attachments.extractAttachmentFromFile)(t),{state:_mail_constants.RecordStates.LOADING,disposition:s}),o.files[i.contentId]=t):i=t.fromEmojiPicker?Object.assign({},(0,_attachments.extractAttachmentFromFile)({name:t.source,type:"image/png",size:0,downloadLink:t.downloadLink}),{state:_mail_constants.RecordStates.LOADING,disposition:s,fromEmojiPicker:!0,width:t.width,height:t.height}):_extends({},(0,_attachments.extractAttachmentFromFile)({name:t.source,type:"image/gif",size:0,downloadLink:t.downloadLink}),{state:_mail_constants.RecordStates.LOADING,disposition:s,fromGifPicker:!0,hasPermanentUrl:!0,ownerId:t.ownerId,source:t.source,onlineContentLink:t.onlineContentLink}),o.attachments.push(i)})},t.prototype.inlinePermanentUrlImgLoaded=function(t){var e=this.get(t);e.attachments.forEach(function(t){t.hasPermanentUrl&&(t.state=_mail_constants.RecordStates.LOADED)})},t.prototype.inlinedEmojiLoaded=function(t){var e=this.get(t);e.attachments.forEach(function(t){t.fromEmojiPicker&&(t.state=_mail_constants.RecordStates.LOADED)})},t.prototype.removeAttachment=function(t,e){var a=this.get(t);(0,_invariant2.default)(a,"compose data for csid: '"+t+"' does not exist");for(var o=0;o<a.attachments.length;o++)if(a.attachments[o].contentId===e){a.attachments.splice(o,1),delete a.files[e];break}},t.prototype.removeNonloadedAttachments=function(t){var e=this.get(t),a=[];(0,_invariant2.default)(e,"compose data for csid: '"+t+"' does not exist"),e.attachments.forEach(function(t){t.state!==_mail_constants.RecordStates.LOADED?delete e.files[t.contentId]:a.push(t)}),e.attachments=a},t.prototype.removeInlineImage=function(t){var e=t.csid,a=t.dataId,o=this.get(e);(0,_invariant2.default)(o,"compose data for csid: '"+e+"' does not exist");var s=o.attachments.find(function(t){return t.dataId===a});s&&(s.state=_mail_constants.RecordStates.DOES_NOT_EXIST)},t.prototype.updateInlineAttachmentDisposition=function(t,e,a,o){var s=this.get(t);(0,_invariant2.default)(s,"compose data for csid: '"+t+"' does not exist");var i=void 0;i=a?s.attachments.find(function(t){return t.dataId===e}):s.attachments.find(function(t){return t.partId===o}),i.disposition=Dispositions.ATTACHMENT},t.prototype.updateRegularAttachmentDisposition=function(t,e){var a=this.get(t);(0,_invariant2.default)(a,"compose data for csid: '"+t+"' does not exist");var o=a.attachments.find(function(t){return t.contentId===e});o.disposition=Dispositions.INLINE,o.state=_mail_constants.RecordStates.LOADING},t.prototype.updateAttachments=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=this.get(t);(0,_invariant2.default)(a,"compose data for csid: '"+t+"' does not exist"),a.attachments=a.attachments.map(function(t){var a=e.find(function(e){var a=e.contentId;return a===t.contentId}),o=_extends({},t,a,{disposition:t.disposition});return a&&(o.state=_mail_constants.RecordStates.LOADED,o.hasPermanentUrl=!0),o})},t.prototype.setNotLoadedAttachmentAsError=function(t){var e=this.get(t);(0,_invariant2.default)(e,"compose data for csid: '"+t+"' does not exist"),e.attachments.filter(function(t){var e=t.state;return e!==_mail_constants.RecordStates.LOADED}).forEach(function(t){t.state=_mail_constants.RecordStates.ERROR})},t.prototype.remove=function(t){(0,_invariant2.default)(t);var e=this.composeData[t];e.lastSavedMessageId&&delete this.messageIdToComposeData[e.lastSavedMessageId],this._removeFromRfcToCsidMap(e.inReplyTo,t),delete this.states[t],delete this.composeData[t];var a=this.byGroupId[e.groupId];a&&(this.byGroupId[e.groupId]=(0,_without2.default)(a,e))},t.prototype.dehydrate=function(){return{composeData:this.composeData,states:this.states}},t.prototype.rehydrate=function(t){var e=this;this.composeData=t.composeData,this.states=t.states,this.rfcToComposeData={},this.messageIdToComposeData={},(0,_object.values)(this.composeData).forEach(function(t){e._addToRfcToCsidMap(t.inReplyTo,t.csid),t.lastSavedMessageId&&(e.messageIdToComposeData[t.lastSavedMessageId]=t),t.groupId&&(e.byGroupId[t.groupId]||(e.byGroupId[t.groupId]=[]),e.byGroupId[t.groupId].push(t))})},t}();exports.default=ComposeCollection;
},{"../../../platform/invariant":"./platform/invariant","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/attachments":"./platform/utils/attachments","../../../platform/utils/message_group":"./platform/utils/message_group","../../../platform/utils/message_quote_finder":"./platform/utils/message_quote_finder","../../../platform/utils/object":"./platform/utils/object","lodash/without":"./node_modules/lodash/without.js"}],"./stores/mail/collections/contact":[function(require,module,exports){
"use strict";function _classCallCheck(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _mail_constants=require("../../../platform/mail_constants"),_react_action_constants=require("../../../platform/react_action_constants"),ContactCollection=function(){function t(){_classCallCheck(this,t),this._recordStates={},this._emailToXobniId={},this._contacts={}}return t.prototype.getContactByEmail=function(t){var o=this._emailToXobniId[t];return this.getContact(o)},t.prototype.getContact=function(t){return this._contacts[t]},t.prototype.getRecordState=function(t){return this._recordStates[t]||_mail_constants.RecordStates.DOES_NOT_EXIST},t.prototype.setRecordState=function(t,o){this._recordStates[t]=o},t.prototype.saveContact=function(t,o){var e=this,a=t.xobniId;this._contacts[a]=t,t.emails.forEach(function(t){o===_react_action_constants.mail.IMPORTANT_CONTACTS_FETCH_SUCCEEDED||e._emailToXobniId[t]||(e.setRecordState(t,_mail_constants.RecordStates.LOADED),e._emailToXobniId[t]=a)})},t.prototype.dehydrate=function(){return{recordStates:this._recordStates,contacts:this._contacts,emailToXobniId:this._emailToXobniId}},t.prototype.rehydrate=function(t){t&&(this._recordStates=t.recordStates,this._contacts=t.contacts,this._emailToXobniId=t.emailToXobniId)},t}();exports.default=ContactCollection,module.exports=exports.default;
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/react_action_constants":"./platform/react_action_constants"}],"./stores/mail/collections/folders":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _folder=require("../../../platform/utils/folder"),_invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_mail_constants=require("../../../platform/mail_constants"),_reducers_selectors=require("../../../reducers_selectors"),_cloneDeep=require("lodash/cloneDeep"),_cloneDeep2=_interopRequireDefault(_cloneDeep),DEFAULT_ACCOUNT_ID="1",FoldersCollection=function(){function e(t,r){_classCallCheck(this,e),this._folderTreeNodes=[],this._folderMap={},this._defaultId=null,this.useReduxState=t,this.reduxStore=r}return e.prototype.initialize=function(e,t){this._defaultId=t,this._folderTreeNodes=this._buildFolderTree(e),this._folderMap=(0,_folder.flattenFolderTree)(this._folderTreeNodes)},e.prototype.reset=function(e){this._folderTreeNodes=this._buildFolderTree(e),this._folderMap=(0,_folder.flattenFolderTree)(this._folderTreeNodes)},e.prototype._buildFolderTree=function(e,t){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t||[];return e.forEach(function(e){var t={folder:Object.assign({},e.folder,{level:o}),children:[]};n.push(t),e.children.length>0&&r._buildFolderTree(e.children,t.children,o+1)}),n},e.prototype.get=function(e){if(this.useReduxState){var t=(0,_reducers_selectors.selectors)(this.reduxStore.getState()),r=t.getFoldersSelectors,o=r(),n=o.__get__;return(0,_cloneDeep2.default)(n(e))}return this._folderMap[e]},e.prototype.getDefaultId=function(){return this._defaultId},e.prototype.getFolderIdsByType=function(e,t){var r=this;return this._getAllFolderIds().reduce(function(o,n){var d=r.get(n);return d.accountId===e&&d.types.indexOf(t)>-1&&o.push(d.id),o},[])},e.prototype.has=function(e){if(this.useReduxState){var t=(0,_reducers_selectors.selectors)(this.reduxStore.getState()),r=t.getFoldersSelectors,o=r(),n=o.doesFolderIdExist;return n(e)}return!!this._folderMap[e]},e.prototype.getTreeNodesForAccount=function(e){var t=this._folderTreeNodes.filter(function(t){var r=t.folder;return r.accountId===e});if(this.useReduxState){var r=(0,_cloneDeep2.default)(t);return this.__getReduxTreeNodes__(r)}return t},e.prototype.__getReduxTreeNodes__=function(e){var t=this;return e.forEach(function(e){var r=e.folder;e.folder=t.get(r.id),e.children=e.children.length?t.__getReduxTreeNodes__(e.children):[]}),e},e.prototype.getDefaultFolderForAccount=function(e){var t=this.getTreeNodesForAccount(e).find(function(e){var t=e.folder;return t.types.indexOf(_mail_constants.FolderTypes.INBOX)>-1})||{};return t.folder},e.prototype.add=function(e){var t=e.name,r=e.accountId;DEFAULT_ACCOUNT_ID!==r&&(e.name=t.substring(t.indexOf("/")+1,t.length)),this._folderMap[e.id]=e;var o=this._buildFolderNameMap(this._folderMap,r),n=(0,_folder.getFolderPathParts)(e,o);(0,_folder.insertIntoFolderTree)(this._folderTreeNodes,e,n,0);var d=(0,_folder.getFolderById)(this._folderTreeNodes,e.id);(0,_invariant2.default)(null!==d,"newly created folder is missing"),this._folderMap[e.id]=d},e.prototype.update=function(e,t){this._folderMap[e].name=t},e.prototype._buildFolderNameMap=function(e,t){var r=this,o={};return Object.keys(e).forEach(function(n){var d=e[n];if(d.accountId===t){var l=(0,_folder.buildFolderPath)(n,r.getTreeNodesForAccount(d.accountId))||d.name;o[l]=d}}),o},e.prototype.delete=function(e){delete this._folderMap[e],this._deleteFolderFromTree(e,this._folderTreeNodes)},e.prototype._deleteFolderFromTree=function(e,t){var r=-1;t.forEach(function(t,o){var n=t.folder;n.id===e&&(r=o),r===-1&&t.children.length>0&&this._deleteFolderFromTree(e,t.children)},this),r!==-1&&t.splice(r,1)},e.prototype.addUnreadCount=function(e,t){this._folderMap[e].unread+=t},e.prototype.subtractUnreadCount=function(e,t){this._folderMap[e].unread-=t},e.prototype.addTotalCount=function(e,t){this._folderMap[e].total+=t},e.prototype.subtractTotalCount=function(e,t){this._folderMap[e].total-=t},e.prototype.getCustomFoldersUnreadCount=function(){var e=this;return this._getAllFolderIds().reduce(function(t,r){var o=e.get(r);return o.isSystem||o.types.indexOf(_mail_constants.FolderTypes.INVISIBLE)!==-1||(t+=e.getFolderUnreadCount(r)),t},0)},e.prototype.getUnreadCountForAccount=function(e){var t=this,r=0;return this._getAllFolderIds().forEach(function(o){var n=t.get(o);n.accountId!==e||n.types[0]!==_mail_constants.FolderTypes.INBOX&&n.types[0]!==_mail_constants.FolderTypes.SENT&&(n.isSystem||n.types.indexOf(_mail_constants.FolderTypes.INVISIBLE)!==-1)||(r+=t.getFolderUnreadCount(o))}),r},e.prototype._getAllFolderIds=function(){if(this.useReduxState){var e=(0,_reducers_selectors.selectors)(this.reduxStore.getState()),t=e.getFoldersSelectors,r=t(),o=r.__getFolderIds__;return o()}return Object.keys(this._folderMap)},e.prototype.getFolderUnreadCount=function(e){return this.get(e).unread<0?0:this.get(e).unread},e.prototype.getFolderIdForAccount=function(e,t){var r=this;switch(e){case _mail_constants.FolderTypes.INVISIBLE:case _mail_constants.FolderTypes.NOT_SEARCHABLE:case _mail_constants.FolderTypes.EXTERNAL_ALL:throw new Error("Cannot get a folder id for a secondary folder type.");case _mail_constants.FolderTypes.USER:throw new Error("Cannot get a folder id for account if there are multiple folders with the same type.")}var o=this._getAllFolderIds().find(function(o){var n=r.get(o);return n.accountId===t&&(0,_folder.getPrimaryFolderType)(n)===e});if(!o)throw new Error("The folder id for type: "+e+" and account "+t+" was not found.");return o},e.prototype.dehydrate=function(){return{folderTreeNodes:this._folderTreeNodes}},e.prototype.rehydrate=function(e){e&&(this._folderTreeNodes=e.folderTreeNodes,this._folderMap=(0,_folder.flattenFolderTree)(this._folderTreeNodes))},e}();module.exports=FoldersCollection;
},{"../../../platform/invariant":"./platform/invariant","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/folder":"./platform/utils/folder","../../../reducers_selectors":"./reducers_selectors","lodash/cloneDeep":"./node_modules/lodash/cloneDeep.js"}],"./stores/mail/collections/gif":[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _index=require("../../../platform/mail_constants/index"),GifCollection=function(){function t(){_classCallCheck(this,t),this.gifCategories=[],this.categoriesStateLookup={}}return t.prototype.setGifCategories=function(t){var e=this;this.gifCategories=t,t.forEach(function(t){return e.categoriesStateLookup[t.searchQuery]={state:_index.RecordStates.DOES_NOT_EXIST,category:t}})},t.prototype.getGifCategories=function(){return this.gifCategories},t.prototype.getGifCategoryState=function(t){return this.categoriesStateLookup[t]||null},t.prototype.setCategoryState=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_index.RecordStates.DOES_NOT_EXIST,o=this.categoriesStateLookup[t];o&&(o.state=e)},t}();exports.default=GifCollection,module.exports=exports.default;
},{"../../../platform/mail_constants/index":"./platform/mail_constants"}],"./stores/mail/collections/item_list":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},_mail_constants=require("../../../platform/mail_constants"),_invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_reducers_selectors=require("../../../reducers_selectors"),_cloneDeep=require("lodash/cloneDeep"),_cloneDeep2=_interopRequireDefault(_cloneDeep),ItemListCollection=function(){function t(s,e){_classCallCheck(this,t),this._init(),this.useReduxState=s,this.reduxStore=e}return t.prototype._init=function(){this.lists={}},t.prototype.isListStale=function(t){(0,_invariant2.default)(t,"list id is required");var s=this.lists[t]||{},e=s.isStale,i=void 0===e||e;return!!i},t.prototype.markListStale=function(t){return(0,_invariant2.default)(t,"list id is required"),this.lists[t].isStale=!0},t.prototype.getListIds=function(){if(this.useReduxState){var t=(0,_reducers_selectors.selectors)(this.reduxStore.getState()),s=t.getListsSelectors,e=s(),i=e.__getListIds__;return i()}return Object.keys(this.lists)},t.prototype.getListItems=function(t){if(this.useReduxState){var s=(0,_reducers_selectors.selectors)(this.reduxStore.getState()),e=s.getListsSelectors,i=e(),r=i.doesListExist,n=i.getItemIdsSelectors;if(!r(t))return null;var o=n(t),a=o.getItemIds;return(0,_cloneDeep2.default)(a())}return this.lists.hasOwnProperty(t)?this.lists[t].items:null},t.prototype.getListItemCount=function(t){return(this.getListItems(t)||[]).length},t.prototype.getListData=function(t){return this.useReduxState?_extends({},this.lists[t],{items:this.getListItems(t)}):this.lists[t]},t.prototype.getNewListItems=function(t){return this.lists.hasOwnProperty(t)?this.lists[t].newItems:[]},t.prototype.getTotalNewListItemCount=function(t){return this.lists.hasOwnProperty(t)?this.lists[t].totalNewItemCount:0},t.prototype.clearNewListItems=function(t){this.lists[t].newItems=[]},t.prototype.clearAllNewListItems=function(){for(var t in this.lists)this.clearNewListItems(t),this.lists[t].totalNewItemCount=0},t.prototype.isItemInList=function(t,s){return(0,_invariant2.default)(t,"list id is required"),(0,_invariant2.default)(this.lists[t],"Invalid list"),this.getListItems(t).indexOf(s)!==-1},t.prototype.hasMoreItems=function(t){return(0,_invariant2.default)(t,"list id is required"),!!this.lists[t]&&this.lists[t].hasMoreItems},t.prototype.getNextItemsUrl=function(t){return(0,_invariant2.default)(t,"list id is required"),this.lists[t]&&this.lists[t].nextItemsUrl},t.prototype.getState=function(t){return this.lists[t]?this.lists[t].state:_mail_constants.RecordStates.DOES_NOT_EXIST},t.prototype.setLoading=function(t){this._createNewCollectionIfNecessary(t),this.lists[t].state=_mail_constants.RecordStates.LOADING},t.prototype.setRefreshing=function(t){(0,_invariant2.default)(this.lists[t],"list is not valid"),this.lists[t].state=_mail_constants.RecordStates.REFRESHING},t.prototype.setLoaded=function(t){this.lists[t]&&(this.lists[t].state=_mail_constants.RecordStates.LOADED)},t.prototype.setError=function(t){this.lists[t].state=_mail_constants.RecordStates.ERROR,this.lists[t].isStale=!0},t.prototype.setNewListItems=function(t,s,e){this.lists[t].newItems=s,this.lists[t].totalNewItemCount=e},t.prototype.remove=function(t,s){var e=Array.isArray(s)?s:[s];this.lists.hasOwnProperty(t)&&(this.lists[t].items=this.lists[t].items.filter(function(t){return e.indexOf(t)===-1}),this.lists[t].isStale=!0)},t.prototype.add=function(t,s){var e=s.items,i=s.hasMoreItems,r=void 0!==i&&i,n=s.nextItemsUrl,o=void 0===n?"":n;(0,_invariant2.default)("boolean"==typeof r,"Expected hasMoreItems to be a boolean");var a=Array.isArray(e)?e:[e];this._createNewCollectionIfNecessary(t),this.lists[t].items=this.lists[t].items.concat(a),this.lists[t].newItems=[],this.lists[t].totalNewItemCount=0,this.lists[t].state=_mail_constants.RecordStates.LOADED,this.lists[t].hasMoreItems=r,this.lists[t].nextItemsUrl=o,this.lists[t].isStale=!1},t.prototype.replace=function(t,s,e){(0,_invariant2.default)(t,"list id is required"),(0,_invariant2.default)(this.lists[t],"Invalid list");var i=this.lists[t].items.indexOf(s);i>-1&&(this.lists[t].items[i]=e)},t.prototype.reset=function(t){this._createNewCollectionIfNecessary(t),this.lists[t].items=[],this.lists[t].newItems=[],this.lists[t].totalNewItemCount=0,this.lists[t].state=_mail_constants.RecordStates.DOES_NOT_EXIST,this.lists[t].hasMoreItems=void 0,this.lists[t].isStale=!0},t.prototype.merge=function(t){var s=t.listId,e=t.newList,i=t.count,r=t.hasMoreItems,n=t.lastExistingIdPositionInExistingList;this._createNewCollectionIfNecessary(s);var o=this.lists[s].items;e.length<i?(this.reset(s),this.add(s,{items:e,hasMoreItems:r})):(this.lists[s].items=e.concat(o.slice(n+1,o.length)),this.lists[s].isStale=!1)},t.prototype.compareListWithNewList=function(t,s){this._createNewCollectionIfNecessary(t);var e=this.lists[t].items,i=this.lists[t].newItems,r=this.lists[t].totalNewItemCount,n=-1,o=-1,a={};s.forEach(function(t){a[t]=!0}),e.forEach(function(t,s){a[t]&&(o=s,n===-1&&(n=s))});var l=o!==-1?s.indexOf(e[n]):s.length,c=r+l,u=s.slice(0,l).concat(i);return{lastExistingIdPositionInExistingList:o,totalNewItemCount:c,newItems:u}},t.prototype._createNewCollectionIfNecessary=function(t){this.lists.hasOwnProperty(t)||(this.lists[t]={items:[],newItems:[],totalNewItemCount:0,state:_mail_constants.RecordStates.DOES_NOT_EXIST,hasMoreItems:!1,nextItemsUrl:null})},t.prototype.clear=function(){this._init()},t.prototype.exists=function(t){if(this.useReduxState){var s=(0,_reducers_selectors.selectors)(this.reduxStore.getState()),e=s.getListsSelectors,i=e(),r=i.doesListExist;return r(t)&&(this.lists[t].state===_mail_constants.RecordStates.LOADED||this.lists[t].state===_mail_constants.RecordStates.REFRESHING)}return!!this.lists[t]&&(this.lists[t].state===_mail_constants.RecordStates.LOADED||this.lists[t].state===_mail_constants.RecordStates.REFRESHING)},t.prototype.dehydrate=function(){return{lists:this.lists}},t.prototype.rehydrate=function(t){t&&(this.lists=t.lists)},t}();module.exports=ItemListCollection;
},{"../../../platform/invariant":"./platform/invariant","../../../platform/mail_constants":"./platform/mail_constants","../../../reducers_selectors":"./reducers_selectors","lodash/cloneDeep":"./node_modules/lodash/cloneDeep.js"}],"./stores/mail/collections/message_group":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _mail_constants=require("../../../platform/mail_constants"),_invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_reducers_selectors=require("../../../reducers_selectors"),_cloneDeep=require("lodash/cloneDeep"),_cloneDeep2=_interopRequireDefault(_cloneDeep),MessageGroupsCollection=function(){function e(s,t){_classCallCheck(this,e),this.messageGroups={},this.messageIdsToGroup={},this.messageGroupStates={},this.useReduxState=s,this.reduxStore=t}return e.prototype.exists=function(e){if(this.useReduxState){var s=(0,_reducers_selectors.selectors)(this.reduxStore.getState()),t=s.getMessageGroupsSelectors,o=t(),r=o.doesMessageGroupIdExist;return r(e)}return!!this.messageGroups[e]},e.prototype.getMessageIds=function(e){if(this.useReduxState){var s=(0,_reducers_selectors.selectors)(this.reduxStore.getState()),t=s.getMessageGroupsSelectors,o=t(),r=o.getCsmIdsFromMessageGroupId;return(0,_cloneDeep2.default)(r(e))}return(0,_invariant2.default)(this.messageGroups[e],"messageGroup not found in MessageGroupsCollection"),this.messageGroups[e].messageIds},e.prototype.getListIdToGroupIdMap=function(e){return this.messageIdsToGroup[e]||{}},e.prototype.getGroupId=function(e,s,t){if(this.useReduxState){var o=(0,_reducers_selectors.selectors)(this.reduxStore.getState()),r=o.getMessageGroupsSelectors,a=r(),u=a.__getGroupIdContainingCsmId__,i=t||s;return u(i)}return this.messageIdsToGroup[s]?this.messageIdsToGroup[s][e]||null:null},e.prototype._updateMessageIdsToGroup=function(e,s,t){var o=this;t.forEach(function(t){o.messageIdsToGroup[t]||(o.messageIdsToGroup[t]={}),o.messageIdsToGroup[t][e]=s})},e.prototype.add=function(e,s,t){(0,_invariant2.default)(e,"listId is missing"),this.messageGroups[s]={id:s,messageIds:t},this._updateMessageIdsToGroup(e,s,t),this.messageGroupStates[s]=_mail_constants.RecordStates.LOADED},e.prototype.addMessageToGroup=function(e,s,t){var o=this.messageGroups[s];(0,_invariant2.default)(e,"listId is missing"),(0,_invariant2.default)(o,"can't add a message id to non-existing message group. groupId: "+s),o.messageIds=o.messageIds.concat(t.filter(function(e){return o.messageIds.indexOf(e)<0})),this._updateMessageIdsToGroup(e,s,t)},e.prototype.remove=function(e){var s=this,t=Array.isArray(e)?e:[e];t.forEach(function(e){var t=s.messageGroups[e].messageIds.some(function(e){return s.messageIdsToGroup[e]&&Object.keys(s.messageIdsToGroup[e]).length>0});t||(delete s.messageGroups[e],delete s.messageGroupStates[e])})},e.prototype.removeMessageIdAndRemoveGroupIfItHasNoMessageIds=function(e,s,t){var o=this.messageGroups[s];o&&(o.messageIds=o.messageIds.filter(function(e){return e!==t}),this.messageIdsToGroup[t]&&delete this.messageIdsToGroup[t][e],o.messageIds.length||this.remove(s))},e.prototype.getState=function(e){return this.messageGroupStates[e]||_mail_constants.RecordStates.DOES_NOT_EXIST},e.prototype.setLoading=function(e){this.messageGroupStates[e]=_mail_constants.RecordStates.LOADING},e.prototype.setState=function(e,s){this.messageGroupStates[e]=s},e.prototype.dehydrate=function(){return{messageGroups:this.messageGroups,messageIdsToGroup:this.messageIdsToGroup,messageGroupStates:this.messageGroupStates}},e.prototype.rehydrate=function(e){this.messageGroups=e.messageGroups,this.messageIdsToGroup=e.messageIdsToGroup,this.messageGroupStates=e.messageGroupStates},e}();exports.default=MessageGroupsCollection,module.exports=exports.default;
},{"../../../platform/invariant":"./platform/invariant","../../../platform/mail_constants":"./platform/mail_constants","../../../reducers_selectors":"./reducers_selectors","lodash/cloneDeep":"./node_modules/lodash/cloneDeep.js"}],"./stores/mail/collections/message_metadata":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _mail_constants=require("../../../platform/mail_constants"),_invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_omit=require("lodash/omit"),_omit2=_interopRequireDefault(_omit),_reducers_selectors=require("../../../reducers_selectors"),_cloneDeep=require("lodash/cloneDeep"),_cloneDeep2=_interopRequireDefault(_cloneDeep),MessagesMetadataCollection=function(){function e(a,t){_classCallCheck(this,e),this.messagesMetadata={},this.useReduxState=a,this.reduxStore=t}return e.prototype.get=function(e){if(this.useReduxState){var a=(0,_reducers_selectors.selectors)(this.reduxStore.getState()),t=a.getMessagesSelectors,s=t(),r=s.__get__,o=this.messagesMetadata[e]?this.messagesMetadata[e].csid:"",n=o?(0,_cloneDeep2.default)(r(o)):(0,_cloneDeep2.default)(r(e));return n.id=n.messageId,n.folder={id:n.folderId},n}return(0,_invariant2.default)(this.messagesMetadata[e],"MessageMetadata should always be present "+e),this.messagesMetadata[e]},e.prototype.updateFolderId=function(e,a){(0,_invariant2.default)(this.messagesMetadata[e],"MessageMetadata should always be present"),this.messagesMetadata[e].folder.id=a},e.prototype.add=function(e,a){var t=this,s=Array.isArray(a)?a:[a];s.forEach(function(e){var a=e.id,s=Object.assign((0,_omit2.default)(e,["snippet","attachments"]));s=Object.assign(s,{headers:(0,_omit2.default)(e.headers,["subject"])}),t.messagesMetadata[a]?Object.assign(t.messagesMetadata[a].headers,s.headers):t.messagesMetadata[a]=s})},e.prototype.sync=function(e,a){var t=this,s=Array.isArray(a)?a:[a];s.forEach(function(s){var r=s.id;t.messagesMetadata[r]?(t.messagesMetadata[r].flags=s.flags,t.messagesMetadata[r].folder=s.folder):t.add(e,a)})},e.prototype.getState=function(e){var a=this.messagesMetadata[e];return a?_mail_constants.RecordStates.LOADED:_mail_constants.RecordStates.DOES_NOT_EXIST},e.prototype.remove=function(e){var a=this,t=Array.isArray(e)?e:[e];t.forEach(function(e){delete a.messagesMetadata[e]})},e.prototype.markStarred=function(e){var a=this;e.forEach(function(e){return a.messagesMetadata[e].flags.flagged=!0})},e.prototype.markUnstarred=function(e){var a=this;e.forEach(function(e){return a.messagesMetadata[e].flags.flagged=!1})},e.prototype.isUnread=function(e){return!this.messagesMetadata[e].flags.read},e.prototype.isRead=function(e){return this.messagesMetadata[e].flags.read},e.prototype.markRead=function(e){var a=this;e.forEach(function(e){return a.messagesMetadata[e].flags=Object.assign({},a.messagesMetadata[e].flags,{read:!0})})},e.prototype.markUnread=function(e){var a=this;e.forEach(function(e){return a.messagesMetadata[e].flags=Object.assign({},a.messagesMetadata[e].flags,{read:!1})})},e.prototype.dehydrate=function(){return{messagesMetadata:this.messagesMetadata}},e.prototype.rehydrate=function(e){e&&(this.messagesMetadata=e.messagesMetadata)},e}();exports.default=MessagesMetadataCollection,module.exports=exports.default;
},{"../../../platform/invariant":"./platform/invariant","../../../platform/mail_constants":"./platform/mail_constants","../../../reducers_selectors":"./reducers_selectors","lodash/cloneDeep":"./node_modules/lodash/cloneDeep.js","lodash/omit":"./node_modules/lodash/omit.js"}],"./stores/mail/collections/print_message":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),PrintCollection=function(){function t(){_classCallCheck(this,t),this.printItems=[]}return t.prototype.addPrintItem=function(t){(0,_invariant2.default)(t.printId,"printId is required"),(0,_invariant2.default)(t.type,"print item type is required"),this.printItems.findIndex(function(n){var i=n.printId;return i===t.printId})>-1||this.printItems.push(t)},t.prototype.removePrintItemById=function(t){this.printItems=this.printItems.filter(function(n){return n.printId!==t})},t.prototype.getPrintItemById=function(t){var n=this.printItems.filter(function(n){return n.printId===t});return n&&n[0]},t.prototype.getPrintItem=function(){return this.printItems&&this.printItems[0]||void 0},t}();exports.default=PrintCollection,module.exports=exports.default;
},{"../../../platform/invariant":"./platform/invariant"}],"./stores/mail/collections/subject_and_snippet":[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _list=require("../../../platform/utils/list"),_utils=require("../../../platform/utils"),_reducers_selectors=require("../../../reducers_selectors"),SubjectAndSnippetCollection=function(){function t(e,s){_classCallCheck(this,t),this.subjects={},this.snippets={},this.useReduxState=e,this.reduxStore=s}return t.prototype.get=function(t,e,s){if(this.useReduxState){var i=(0,_reducers_selectors.selectors)(this.reduxStore.getState()),r=i.getSubjectAndSnippetSelectors,p=r(),n=p.getSubject,u=p.getSnippet,c=s||t;return{subject:n(c,e),snippet:u(c,e)}}return{subject:this._getSubject(t,e),snippet:this._getSnippet(t,e)}},t.prototype._getSubject=function(t,e){var s=(0,_list.getMetadataCacheKey)(e),i=this.subjects[t];if(i){var r=i[s];if(r||(r=i[_list.DEFAULT_MESSAGES_METADATA_CACHEKEY]),!r){var p=_utils.object.values(i);r=p[0]}return r}},t.prototype._getSnippet=function(t,e){var s=(0,_list.getMetadataCacheKey)(e),i=this.snippets[t];if(i){var r=i[s];if(r||(r=i[_list.DEFAULT_MESSAGES_METADATA_CACHEKEY]),!r){var p=_utils.object.values(i);r=p[0]}return r}},t.prototype.add=function(t,e){var s=t.id,i=t.subject,r=t.snippet;"undefined"!=typeof i&&this._addSubject(s,e,i),"undefined"!=typeof r&&this._addSnippet(s,e,r)},t.prototype._addSubject=function(t,e,s){var i=(0,_list.getMetadataCacheKey)(e);this.subjects[t]||(this.subjects[t]={}),this.subjects[t][i]=s},t.prototype._addSnippet=function(t,e,s){var i=(0,_list.getMetadataCacheKey)(e);this.snippets[t]||(this.snippets[t]={}),this.snippets[t][i]=s},t.prototype.dehydrate=function(){return{subjects:this.subjects,snippets:this.snippets}},t.prototype.rehydrate=function(t){t&&(this.subjects=t.subjects,this.snippets=t.snippets)},t}();exports.default=SubjectAndSnippetCollection,module.exports=exports.default;
},{"../../../platform/utils":"./platform/utils","../../../platform/utils/list":"./platform/utils/list","../../../reducers_selectors":"./reducers_selectors"}],"./stores/mail/collections/suggested_words":[function(require,module,exports){
"use strict";function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var SuggestedWordsCollection=function(){function t(){_classCallCheck(this,t),this.suggestedWords={}}return t.prototype.add=function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=s[0];!this.suggestedWords[t]&&e&&(this.suggestedWords[t]=e.suggested)},t.prototype.get=function(t){return this.suggestedWords[t]||[]},t}();exports.default=SuggestedWordsCollection,module.exports=exports.default;
},{}],"./stores/mail/handlers":[function(require,module,exports){
"use strict";function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _emitAfter(t){return function(){t.apply(this,arguments),this.emitChange()}}function handleFolderChangeSucceeded(t){this.doesListExist(t.listId)?checkMailReceived.call(this,t):addNewMessageGroupList.call(this,t)}function handleFolderChangeError(t){this.doesListExist(t.listId)?checkMailFailed.call(this,t):handleListLoadingError.call(this,t)}function addNewMessageGroupList(t){var e=t.listId,s=t.messageGroupList,i=t.hasMoreItems,a=t.nextItemsUrl;s&&(this.itemListCollection.reset(e),appendMessageGroupsForList.call(this,{listId:e,messageGroupList:s,hasMoreItems:i,nextItemsUrl:a}))}function appendMessageGroupsForList(t){var e=t.listId,s=t.messageGroupList,i=t.hasMoreItems,a=t.nextItemsUrl;s&&(this.normalizeDataFromGroupList(e,s,i,a),this.itemListCollection.setLoaded(e))}function appendPeopleForList(t){var e=t.listId,s=t.items;s&&(this.normalizeDataFromPeople(e,s),this.itemListCollection.setLoaded(e))}function appendAttachmentsForList(t){var e=t.listId,s=t.attachmentsList,i=t.hasMoreItems,a=t.nextItemsUrl;this.normalizeDataFromAttachmentsList(e,s,i,a),this.itemListCollection.setLoaded(e)}function initializeSearchList(t){var e=this,s=t.listId,i=t.response,a=void 0===i?{}:i,o=t.folders;o&&this.folderCollection.reset(o),Object.keys(_mail_constants.ListContentTypes).forEach(function(t){Object.keys(_mail_constants.ListFilters).forEach(function(i){var o=_utils.object.getIn(a,[t,i].join("."));if(o){var n=(0,_list.recreateListId)(s,{listContentType:t,listFilter:i}),c=o.suggestedWords;c&&c.length&&e.suggestedWordsCollection.add(n,c),e.itemListCollection.reset(n),appendListItemsByContentTypeAndFilter.call(e,{listId:n,listContentBlock:o}),e.itemListCollection.setLoaded(n)}})})}function appendListItemsByContentTypeAndFilter(t){var e=t.listId,s=t.listContentBlock,i=s&&s.items,a=(0,_list.getListContentTypeFromListId)(e);if(i)switch(a){case _mail_constants.ListContentTypes.PEOPLE:appendPeopleForList.call(this,{listId:e,items:i});break;case _mail_constants.ListContentTypes.MESSAGES:appendMessageGroupsForList.call(this,{listId:e,messageGroupList:i,hasMoreItems:!!s.offset,nextItemsUrl:s.nextItemsUrl});break;case _mail_constants.ListContentTypes.IMAGES:case _mail_constants.ListContentTypes.DOCUMENTS:appendAttachmentsForList.call(this,{listId:e,attachmentsList:i,hasMoreItems:!!s.offset,nextItemsUrl:s.nextItemsUrl})}}function attachmentAdded(t){var e=t.files,s=t.csid,i=t.dispositions;this.composeCollection.addAttachments(s,e,i),updateEditDraftState.call(this,{csid:s})}function setSearchLoading(t){var e=t.listId;this.getRecordState(e)===_mail_constants.RecordStates.DOES_NOT_EXIST&&this.itemListCollection.setLoading(e)}function moveMessages(t,e){t.async&&this.asyncTaskCollection.add(t,e),_moveMessages.call(this,t)}function _moveMessages(t){var e=this,s=t.messageIds,i=t.destinationFolderType,a=t.destinationFolderId;if((0,_invariant2.default)(i&&!a||!i&&a,"Either destinationFolderType or destinationFolderId should be present but not both"),a)_moveOrDeleteMessages.call(this,s,a);else if(i){var o=this.getFolderIdMapFromFolderType(s,i);Object.keys(o).forEach(function(t){_moveOrDeleteMessages.call(e,o[t],t)})}}function archiveMessages(t,e){t.async&&this.asyncTaskCollection.add(t,e),_archiveMessages.call(this,t)}function _archiveMessages(t){var e=t.messageIds;_moveMessages.call(this,{messageIds:e,destinationFolderType:_mail_constants.FolderTypes.ARCHIVE})}function restoreMessages(t,e){var s=t.messageIds;t.async&&this.asyncTaskCollection.add(t,e),_moveMessages.call(this,{messageIds:s,destinationFolderType:_mail_constants.FolderTypes.INBOX})}function _moveOrDeleteMessages(t,e){var s=this;t.forEach(function(t){var i=s.messagesMetadataCollection.get(t),a=i.folder.id;updateFolderCountsOnMove.call(s,t,a,e),e&&s.messagesMetadataCollection.updateFolderId(t,e)});var i=!e;updateListCollectionOnAction.call(this,t,i),i&&t.forEach(function(t){_message2.removeMessageMetadata.call(s,t);var e=s.messageGroupsCollection.getListIdToGroupIdMap(t);Object.keys(e).forEach(function(i){var a=e[i];s.messageGroupsCollection.removeMessageIdAndRemoveGroupIfItHasNoMessageIds(i,a,t)})})}function deleteMessages(t,e){t.async&&this.asyncTaskCollection.add(t,e),_deleteMessages.call(this,t)}function _deleteMessages(t){var e=t.messageIds,s=t.permanent;s?_moveOrDeleteMessages.call(this,e):_moveMessages.call(this,{destinationFolderType:_mail_constants.FolderTypes.TRASH,messageIds:e})}function updateFolderCountsOnMove(t,e,s){this.folderCollection.subtractTotalCount(e,1),s&&this.folderCollection.addTotalCount(s,1),this.messagesMetadataCollection.isUnread(t)&&(this.folderCollection.subtractUnreadCount(e,1),s&&this.folderCollection.addUnreadCount(s,1))}function updateListCollectionOnAction(t,e){var s=this,i={};t.forEach(function(t){var e=s.messageGroupsCollection.getListIdToGroupIdMap(t),a=s.attachmentCollection.getAttachmentIdsByMessageId(t);Object.keys(e).forEach(function(t){return i[e[t]]=!0}),a.forEach(function(t){return i[t]=!0})});var a=this.itemListCollection.getListIds();a.forEach(function(a){var o=Object.keys(i).filter(function(i){var o=void 0,n=void 0;switch((0,_list.getListContentTypeFromListId)(a)){case _mail_constants.ListContentTypes.IMAGES:case _mail_constants.ListContentTypes.DOCUMENTS:return!(s.attachmentCollection.exists(i)&&!e)||(o=s.messagesMetadataCollection.get((0,_message.getMessageIdFromAttachmentId)(i)),!isMessageValidInList.call(s,o,a));case _mail_constants.ListContentTypes.MESSAGES:return!s.messageGroupsCollection.exists(i)||(n=s.getMessageGroupById(i),!isMessageGroupValidInList.call(s,n,a,t,e))}});o.forEach(function(t){return s.itemListCollection.remove(a,t)})}),a.forEach(function(t){return s.itemListCollection.markListStale(t)})}function isMessageGroupValidInList(t,e,s,i){var a=this;return t.messages.some(function(t){var o=i&&s.indexOf(t.id)!==-1;return!o&&isMessageValidInList.call(a,t,e)})}function isMessageValidInList(t,e){var s=(0,_list.getFolderIdFromListId)(e),i=!0;return i=s?(0,_list.listIdContainsFolderId)(e,t.folder.id):!this.isTrashMessage(t.id)&&!this.isSpamMessage(t.id),i&&(0,_list.listIdHasMessageFlags)(e)&&(i=(0,_list.listIdContainsMessageFlags)(e,t.flags)),i}function markRead(t){var e=this,s=t.messageIds;s.filter(function(t){return e.messagesMetadataCollection.isUnread(t)}).forEach(function(t){var s=e.messagesMetadataCollection.get(t);e.folderCollection.subtractUnreadCount(s.folder.id,1)}),this.messagesMetadataCollection.markRead(s),updateListCollectionOnAction.call(this,s)}function getMessagesIdsInList(t){var e=this,s=[],i=this.itemListCollection.getListItems(t);return i&&(s=i.reduce(function(t,s){return t.concat(e.messageGroupsCollection.getMessageIds(s))},[])),s}function markListRead(t,e){var s=t.listId,i=getMessagesIdsInList.call(this,s);return t.async&&this.asyncTaskCollection.add(t,e),i.length?void markRead.call(this,{messageIds:i}):void clearFolderUnreadCount.call(this,s)}function deleteList(t,e){var s=t.listId,i=t.permanent,a=getMessagesIdsInList.call(this,s);return t.async&&this.asyncTaskCollection.add(t,e),a.length?void _deleteMessages.call(this,{messageIds:a,permanent:i}):void clearFolderUnreadCount.call(this,s)}function clearFolderUnreadCount(t){var e=(0,_list.getFolderIdFromListId)(t),s=this.folderCollection.getFolderUnreadCount(e);return this.folderCollection.subtractUnreadCount(e,s),s}function archiveList(t,e){var s=t.listId,i=t.destinationFolderType,a=getMessagesIdsInList.call(this,s);if(t.async&&this.asyncTaskCollection.add(t,e),!a.length){var o=clearFolderUnreadCount.call(this,s),n=this.getActiveAccountId(),c=this.getFolderIdForAccount(i,n);return void this.folderCollection.addUnreadCount(c,o)}_archiveMessages.call(this,{messageIds:a})}function markSpam(t,e){var s=this;t.async&&this.asyncTaskCollection.add(t,e);var i=t.messageIds,a=t.destinationFolderType,o=this.getFolderIdMapFromFolderType(i,a);Object.keys(o).forEach(function(t){var e=o[t];markRead.call(s,{messageIds:e}),_moveOrDeleteMessages.call(s,e,t)})}function markNotSpam(t,e){var s=this;t.async&&this.asyncTaskCollection.add(t,e);var i=t.messageIds,a=t.destinationFolderType,o=this.getFolderIdMapFromFolderType(i,a);Object.keys(o).forEach(function(t){var e=o[t];_moveOrDeleteMessages.call(s,e,t)})}function updateEditDraftState(t){var e=t.csid;this.composeCollection.update(e,{draftStatus:_mail_constants.Draft.Status.EDITED})}function updateDraftSubject(t){var e=t.csid,s=t.subject;this.composeCollection.update(e,{initialSubject:s}),updateEditDraftState.call(this,{csid:e})}function handleEditSubjectRequested(t){var e=t.csid,s=t.userInputtedValues,i=this.composeCollection.get(e),a=i.groupId,o=i.lastSavedMessageId,n=i.initialBody;if(a&&o){var c=(0,_list.getListIdFromFolderId)(this.messagesMetadataCollection.get(o).folder.id);1===this.messageGroupsCollection.getMessageIds(a).length&&this.itemListCollection.remove(c,a),this.messageGroupsCollection.removeMessageIdAndRemoveGroupIfItHasNoMessageIds(c,a,o)}this.composeCollection.removeGroupId(e),this.composeCollection.update(e,{initialTo:s.to,initialCc:s.cc,initialBcc:s.bcc,initialFrom:s.from,initialSubject:s.subject,initialBody:Object.assign({},n,{content:s.html}),draftStatus:_mail_constants.Draft.Status.EDITED}),this.composeCollection.focusSubject(e)}function handleMailtoRequested(t){var e=t.mailtoAttr,s=t.csid,i=t.message;(0,_invariant2.default)(s,"csid is required"),(0,_invariant2.default)(i,"message is required"),(0,_invariant2.default)(e,"mailtoAttr is required");var a=_mail_constants.Compose.Modes.NEW,o=this.folderCollection.get(i.folder.id).accountId,n=this.accountsCollection.get(o),c=this.getFolderIdForAccount(_mail_constants.FolderTypes.DRAFT,n.id);(0,_invariant2.default)(n,"account should be present");var l=mailtoParser.extractMailtoFields(e),r=this.accountsCollection.getAddressesForAccount(n.id),_={};l.subject&&Object.assign(_,{initialSubject:l.subject}),l.body&&Object.assign(_,{initialBody:{content:l.body}}),[{field:"to",draftDataField:"initialTo"},{field:"cc",draftDataField:"initialCc"},{field:"bcc",draftDataField:"initialBcc"}].filter(function(t){var e=t.field;return l[e]}).forEach(function(t){var e=t.field,s=t.draftDataField;_[s]=l[e].map(function(t){return{email:t}})}),this.composeCollection.create({csid:s,composeMode:a,account:n,senderAddresses:r,folderId:c}),this.composeCollection.update(s,_)}function unfocusSubject(t){var e=t.csid;this.composeCollection.unfocusSubject(e)}function updateListStaleState(t){var e=this,s=this.itemListCollection.getListIds().filter(function(e){var s=(0,_list.getFolderIdFromListId)(e);return!s||t.indexOf(s)!==-1});s.forEach(function(t){return e.itemListCollection.markListStale(t)})}function checkMailReceived(t){var e=this,s=t.listId,i=t.messageGroupList,a=t.hasMoreItems,o=t.folders,n=t.count,c=t.staleFolderIds,l=t.accountAlerts;if(this.folderCollection.reset(o),this.itemListCollection.setLoaded(s),updateListStaleState.call(this,c),l&&l.length>0&&this.accountsCollection.setAlerts(l),i){var r=i.map(function(t){return t.id});i.forEach(function(t){_message2.syncMessageMetadata.call(e,s,t.messages),e.messageGroupsCollection.add(s,t.id,t.messages.map(function(t){return t.id}))}),this.dispatcher.waitFor([_application2.default],function(){var t=e.dispatcher.getStore(_application2.default).isAppVisible(),i=e.itemListCollection.compareListWithNewList(s,r),o=i.lastExistingIdPositionInExistingList,c=i.totalNewItemCount,l=i.newItems;e.itemListCollection.merge({listId:s,newList:r,count:n,hasMoreItems:a,lastExistingIdPositionInExistingList:o}),t||e.itemListCollection.setNewListItems(s,l,c),e.emitChange()})}}function checkMailFailed(t){var e=t.listId;this.itemListCollection.setLoaded(e)}function messageBodiesAndMetadataReceived(t){var e=t.listId,s=t.messageBodiesMap,i=t.messageMetadataMap;Object.keys(i).forEach(function(t){return i[t].id=t}),_message2.addMessageMetadata.call(this,e,_utils.object.values(i)),this._addMessageBodies(e,s)}function handleListLoadingError(t){var e=t.listId;this.itemListCollection.getState(e)===_mail_constants.RecordStates.LOADING&&this.itemListCollection.setError(e)}function normalizeComposeData(t){var e=t.route,s=t.currentRoute,i=(0,_route.getUnsavedDataFromRoute)(s),a=i.attachments,o=i.files,n=void 0===o?[]:o,c=i.initialSubject,l=void 0===c?"":c,r=i.initialBody,_=void 0===r?"":r,d=(0,_omit2.default)((0,_route.getUnsavedDataFromRoute)(s),["attachments","files","initialSubject","initialBody"]),m=(0,_route.getCsidFromRoute)(e);if(a&&a.length){var I=(0,_message.getMessageIdFromAttachmentId)(a[0].id);return{csid:m,composeMode:_mail_constants.Compose.Modes.NEW,message:{id:I,attachments:a}}}return Object.assign({csid:m,files:n,initialSubject:l,initialBody:{content:_}},d)}function createComposeData(t){var e=t.csid,s=t.composeMode,i=t.message,a=t.files,o=void 0===a?[]:a,n=t.initialSubject,c=t.initialBody;(0,_invariant2.default)(e,"csid is required"),(0,_invariant2.default)([_mail_constants.Compose.Modes.NEW,_mail_constants.Compose.Modes.EDIT,_mail_constants.Compose.Modes.SPONSORED_FORWARD].indexOf(s)!==-1,"composeMode should be one of\n        "+JSON.stringify([_mail_constants.Compose.Modes.NEW,_mail_constants.Compose.Modes.EDIT,_mail_constants.Compose.Modes.SPONSORED_FORWARD])+".\n        was: "+s);var l=this.composeCollection.get(e);if(l)this.accountsCollection.setActiveAccountId(l.accountId);else{var r=this.accountsCollection.getActiveAccount(),_=this.accountsCollection.getAddressesForAccount(r.id),d=this.getFolderIdForAccount(_mail_constants.FolderTypes.DRAFT,r.id);this.composeCollection.create({csid:e,composeMode:s,account:r,senderAddresses:_,message:i,files:o,folderId:d,initialSubject:n,initialBody:c})}}function removeComposeData(t){var e=t.csid,s=this.composeCollection.get(e),i=s.accountId,a=this.folderCollection.get(this.getFolderIdForAccount(_mail_constants.FolderTypes.DRAFT,i));this.folderCollection.subtractTotalCount(a.id,1),this.composeCollection.remove(e)}function saveMessage(t){var e=t.csid;this.composeCollection.update(e,{draftStatus:_mail_constants.Draft.Status.SAVING})}function saveMessageSuccess(t){var e=t.csid,s=t.message,i=t.isPartial,a=t.simpleBody,o=(0,_list.getListIdFromFolderId)(s.folder.id),n=(new Date).getTime()/1e3,c=s.captcha,l=s.spame,r=s.headers,_=s.id,d=this.composeCollection.get(e),m=d.lastSavedMessageId,I=d.draftStatus,A=d.groupId,u=d.accountId,E=I,f=this.dispatcher.getContext().config.conversations?s.conversationId:s.id;if(I===_mail_constants.Draft.Status.SAVING&&(E=i?_mail_constants.Draft.Status.SAVED_PARTIAL:_mail_constants.Draft.Status.SAVED),this.messageGroupsCollection.exists(f)?this.messageGroupsCollection.addMessageToGroup((0,_list.getListIdFromFolderId)(s.folder.id),f,[s.id]):this.messageGroupsCollection.add((0,_list.getListIdFromFolderId)(s.folder.id),f,[s.id]),m)m&&m!==s.id&&this.messageGroupsCollection.removeMessageIdAndRemoveGroupIfItHasNoMessageIds((0,_list.getListIdFromFolderId)(s.folder.id),A,m);else{var h=this.folderCollection.get(this.getFolderIdForAccount(_mail_constants.FolderTypes.DRAFT,u));this.folderCollection.addTotalCount(h.id,1)}this.itemListCollection.exists(o)&&A&&A!==f&&this.itemListCollection.replace(o,A,f),this.composeCollection.update(e,{initialFrom:r.from,initialTo:r.to,initialCc:r.cc,initialBcc:r.bcc,initialSubject:r.subject,initialBody:{content:a.html},draftStatus:E,lastSavedTime:n,lastSavedMessageId:_,captcha:c,spame:l,groupId:f,htmlAnnotations:a.htmlAnnotations}),this.composeCollection.updateAttachments(e,s.attachments),_message2.addMessageMetadata.call(this,o,s),this.emitChange()}function saveMessageFailure(t){var e=t.csid;this.composeCollection.update(e,{draftStatus:_mail_constants.Draft.Status.SAVE_FAILED}),this.composeCollection.setNotLoadedAttachmentAsError(e)}function saveSponsoredMessageSuccess(t){var e=t.message;this.folderCollection.addTotalCount(e.folder.id,1),this.emitChange()}function clearNewListItems(t){var e=t.listId;this.itemListCollection.clearNewListItems(e),this.emitChange()}function saveAttachmentPreviewState(t){var e=t.attachmentId,s=t.uiState;this.attachmentCollection.savePreviewerUiState(e,s)}function clearAllNewListItems(){this.itemListCollection.clearAllNewListItems()}function updateUndoActionMessageMetadata(t){var e=this,s=t.undoMap;Object.keys(s).forEach(function(t){var i=s[t];i.forEach(function(s){e.messagesMetadataCollection.updateFolderId(s,t)})})}function updateAccount(t){var e=t.updatedAccount;this.accountsCollection.setAccount(e)}function addAccount(t){var e=t.accounts,s=t.inboxFID;this.accountsCollection.setAccounts(e),updateListStaleState.call(this,s)}function deleteAccount(t){var e=t.updatedAccount;this.accountsCollection.deleteAccount(e)}exports.__esModule=!0;var _MailActions$INITIAL_;exports.normalizeComposeData=normalizeComposeData;var _react_action_constants=require("../../platform/react_action_constants"),_invariant=require("../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_mail_constants=require("../../platform/mail_constants"),_utils=require("../../platform/utils"),_folder=require("../../platform/utils/folder"),_list=require("../../platform/utils/list"),_message=require("../../platform/utils/message"),_attachments=require("../../platform/utils/attachments"),_mailto_parser=require("../../platform/utils/mailto_parser"),mailtoParser=_interopRequireWildcard(_mailto_parser),_omit=require("lodash/omit"),_omit2=_interopRequireDefault(_omit),_message2=require("./helpers/message"),_application=require("../application"),_application2=_interopRequireDefault(_application),_route=require("../../platform/utils/route");exports.default=(_MailActions$INITIAL_={},_MailActions$INITIAL_[_react_action_constants.mail.INITIAL_STATE]=function(t){var e=this,s=t.listId,i=t.messageGroupList,a=t.hasMoreItems,o=t.messageGroups,n=t.message,c=t.messageBodiesMap,l=t.messageMetadataMap,r=t.folders,_=t.accounts,d=t.draftData,m=t.accountAlerts;if((0,_invariant2.default)(_,"accounts are required"),this.accountsCollection.initialize(_),r){var I=(0,_folder.getDefaultFolder)(_,r).id;this.folderCollection.initialize(r,I)}if(n&&((0,_invariant2.default)(s,"List ID is required"),_message2.addMessageMetadata.call(this,s,n)),i&&((0,_invariant2.default)(s,"List ID is required"),(0,_invariant2.default)("undefined"!=typeof a,"hasMoreItems is required"),this.normalizeDataFromGroupList(s,i,a),this.itemListCollection.setLoaded(s)),o&&((0,_invariant2.default)(s,"List ID is required"),o.forEach(function(t){var i=t.id,a=t.messages;e.messageGroupsCollection.add(s,i,a.map(function(t){var e=t.id;return e})),_message2.addMessageMetadata.call(e,s,a)})),s){var A=(0,_list.getFolderIdFromListId)(s);A&&this.accountsCollection.setActiveAccountId(this.getAccountIdForFolder(A))}if(c&&((0,_invariant2.default)(s,"List ID is required"),this._addMessageBodies(s,c)),l&&((0,_invariant2.default)(s,"List ID is required"),_message2.addMessageMetadata.call(this,s,_utils.object.values(l))),d){var u=_mail_constants.Compose.Modes.NEW,E=this.accountsCollection.getPrimaryAccount(),f=this.accountsCollection.getAddressesForAccount(E.id),h=d.csid,C=d.initialTo,M=void 0===C?"":C,g=d.initialCc,S=void 0===g?"":g,p=d.initialBcc,T=void 0===p?"":p,L=d.initialSubject,D=d.initialBody,v=this.getFolderIdForAccount(_mail_constants.FolderTypes.DRAFT,E.id);this.composeCollection.create({csid:h,composeMode:u,initialSubject:L,initialBody:D,account:E,senderAddresses:f,folderId:v}),this.composeCollection.update(h,{initialTo:M,initialCc:S,initialBcc:T})}m&&m.length>0&&this.accountsCollection.setAlerts(m),this.emitChange()},_MailActions$INITIAL_[_react_action_constants.mail.CHANGE_FOLDER_REQUESTED]=function(t){var e=t.listId,s=this.getRecordState(e);s===_mail_constants.RecordStates.DOES_NOT_EXIST||s===_mail_constants.RecordStates.ERROR?this.itemListCollection.setLoading(e):this.itemListCollection.isListStale(e)&&this.itemListCollection.setRefreshing(e);var i=(0,_list.getFolderIdFromListId)(e);i&&this.accountsCollection.setActiveAccountId(this.getAccountIdForFolder(i)),this.emitChange()},_MailActions$INITIAL_[_react_action_constants.mail.CREATE_FOLDER_SUCCEEDED]=_emitAfter(function(t){var e=t.folder;this.folderCollection.add(e)}),_MailActions$INITIAL_[_react_action_constants.mail.RENAME_FOLDER_SUCCEEDED]=_emitAfter(function(t){var e=t.folderId,s=t.newFolderName;this.folderCollection.update(e,s)}),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED]=function(t){var e=t.messageGroupId,s=t.composeMode,i=t.csid,a=t.message;(0,_invariant2.default)(e,"messageGroupId is required"),(0,_invariant2.default)(i,"csid is required"),(0,_invariant2.default)(a,"message is required"),(0,_invariant2.default)([_mail_constants.Compose.Modes.REPLY,_mail_constants.Compose.Modes.REPLY_ALL,_mail_constants.Compose.Modes.FORWARD].indexOf(s)!==-1,"composeMode should be one of REPLY, REPLY_ALL, FORWARD. was "+s);var o=this.folderCollection.get(a.folder.id).accountId,n=this.accountsCollection.get(o),c=this.getFolderIdForAccount(_mail_constants.FolderTypes.DRAFT,n.id);(0,_invariant2.default)(n,"account should be present");var l=this.dispatcher.getContext().config.conversations,r=l?e:null,_=this.accountsCollection.getAddressesForAccount(n.id);this.composeCollection.get(i)?this.composeCollection.updateComposeMode({csid:i,composeMode:s,senderAddresses:_,message:a}):this.composeCollection.create({csid:i,composeMode:s,account:n,senderAddresses:_,message:a,groupId:r,folderId:c}),this.emitChange()},_MailActions$INITIAL_[_react_action_constants.mail.OPEN_PAGE_REQUESTED]=_emitAfter(function(t,e){var s=t.route,i=t.currentRoute;if(s.name===_mail_constants.RouteNames.NEW_DRAFT){var a=(0,_route.getUnsavedDataFromRoute)(i),o=a.userInputtedValues,n=a.mailtoAttr,c=a.message,l=(0,_route.getCsidFromRoute)(s);o&&(handleEditSubjectRequested.call(this,{csid:l,userInputtedValues:o}),this.emitChange()),n&&(handleMailtoRequested.call(this,{csid:l,mailtoAttr:n,message:c}),this.emitChange()),createComposeData.call(this,Object.assign({},normalizeComposeData(t),{composeMode:_mail_constants.Compose.Modes.NEW}),e)}}),_MailActions$INITIAL_[_react_action_constants.mail.NAVIGATE_TO_SPONSORED_FORWARD_REQUESTED]=_emitAfter(function(t,e){createComposeData.call(this,Object.assign({composeMode:_mail_constants.Compose.Modes.SPONSORED_FORWARD},t),e)}),_MailActions$INITIAL_[_react_action_constants.mail.COMPOSE_OPENED]=_emitAfter(createComposeData),_MailActions$INITIAL_[_react_action_constants.mail.UNSUBSCRIBE_NEW_COMPOSE]=_emitAfter(createComposeData),_MailActions$INITIAL_[_react_action_constants.mail.DELETE_DRAFT_REQUESTED]=function(t){var e=t.csid,s=t.messageId;s&&_moveOrDeleteMessages.call(this,[s]),this.composeCollection.remove(e),this.emitChange()},_MailActions$INITIAL_[_react_action_constants.mail.SEND_SUCCESS]=_emitAfter(function(t){var e=this,s=t.csid,i=this.composeCollection.get(s),a=i.groupId,o=i.lastSavedMessageId,n=i.accountId,c=this.getFolderIdForAccount(_mail_constants.FolderTypes.SENT,n);this.messagesMetadataCollection.updateFolderId(o,c),a&&(updateListCollectionOnAction.call(this,[o]),this.messageGroupsCollection.exists(a)?this.messageGroupsCollection.addMessageToGroup((0,_list.getListIdFromFolderId)(c),a,[o]):this.messageGroupsCollection.add((0,_list.getListIdFromFolderId)(c),a,[o])),removeComposeData.call(this,{csid:s}),this.itemListCollection.getListIds().forEach(function(t){return e.itemListCollection.markListStale(t)})}),_MailActions$INITIAL_[_react_action_constants.mail.SEND_FAILURE]=_emitAfter(function(t){var e=t.csid;this.composeCollection.update(e,{draftStatus:_mail_constants.Draft.Status.SEND_FAILED})}),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_SAVE_REQUESTED]=_emitAfter(saveMessage),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_AUTO_SAVE_REQUESTED]=_emitAfter(saveMessage),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_SAVE_SUCCEEDED]=saveMessageSuccess,_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_AUTO_SAVE_SUCCEEDED]=saveMessageSuccess,_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_SAVE_FAILED]=_emitAfter(saveMessageFailure),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_AUTO_SAVE_FAILED]=_emitAfter(saveMessageFailure),_MailActions$INITIAL_[_react_action_constants.mail.SPONSORED_SAVE_TO_INBOX_SUCCEEDED]=saveSponsoredMessageSuccess,_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_MARK_READ_REQUESTED]=_emitAfter(markRead),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_MARK_UNREAD_REQUESTED]=function(t){var e=this,s=t.messageIds;s.filter(function(t){return!e.messagesMetadataCollection.isUnread(t)}).forEach(function(t){var s=e.messagesMetadataCollection.get(t);e.folderCollection.addUnreadCount(s.folder.id,1)}),this.messagesMetadataCollection.markUnread(s),updateListCollectionOnAction.call(this,s),this.emitChange()},_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_GROUP_OPENED]=_emitAfter(function(t){var e=t.messageGroupId;(0,_invariant2.default)(e,"messageGroupId is required"),this.accountsCollection.setActiveAccountId(this.getAccountIdForMessageGroup(e))}),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_OPENED]=_emitAfter(function(t){var e=t.messageGroupId;(0,_invariant2.default)(e,"messageGroupId is required"),this.messageGroupsCollection.getState(e)!==_mail_constants.RecordStates.DOES_NOT_EXIST?this.accountsCollection.setActiveAccountId(this.getAccountIdForMessageGroup(e)):this.messageGroupsCollection.setLoading(e)}),_MailActions$INITIAL_[_react_action_constants.mail.EMOJI_ADDED]=_emitAfter(function(t){var e=t.csid,s=t.emoji;attachmentAdded.call(this,{csid:e,files:[s],dispositions:[_mail_constants.Attachments.Dispositions.INLINE]})}),_MailActions$INITIAL_[_react_action_constants.mail.EMOJI_INLINED_LOADED]=_emitAfter(function(t){var e=t.csid;this.composeCollection.inlinedEmojiLoaded(e)}),_MailActions$INITIAL_[_react_action_constants.mail.GIF_ADDED]=_emitAfter(function(t){var e=t.csid,s=t.gif;attachmentAdded.call(this,{csid:e,files:[s],dispositions:[_mail_constants.Attachments.Dispositions.INLINE]})}),_MailActions$INITIAL_[_react_action_constants.mail.INLINED_PERMANENT_URL_IMAGE_LOADED]=_emitAfter(function(t){var e=t.csid;this.composeCollection.inlinePermanentUrlImgLoaded(e)}),_MailActions$INITIAL_[_react_action_constants.mail.INLINE_FILE_ATTACHMENT_ADDED]=_emitAfter(function(t){var e=t.csid,s=t.files,i=void 0;i=this.dispatcher.getContext().config.inlineAttachment?s.map(function(t){var e=t.type.split("/"),s=void 0;return s=e.length>1?(0,_attachments.getAttachmentType)(e[0],e[1]):(0,_attachments.getAttachmentType)(t.type,t.subtype),s===_mail_constants.Attachments.SimplifiedTypes.IMAGE?_mail_constants.Attachments.Dispositions.INLINE:_mail_constants.Attachments.Dispositions.ATTACHMENT}):s.map(function(){return _mail_constants.Attachments.Dispositions.ATTACHMENT}),attachmentAdded.call(this,{csid:e,files:s,dispositions:i})}),_MailActions$INITIAL_[_react_action_constants.mail.INLINE_FILE_ATTACHMENT_REMOVED]=_emitAfter(function(t){var e=t.csid,s=t.contentId;this.composeCollection.removeAttachment(e,s),updateEditDraftState.call(this,{csid:e})}),_MailActions$INITIAL_[_react_action_constants.mail.REMOVE_INLINE_IMAGE]=_emitAfter(function(t){var e=t.csid,s=t.dataId;this.composeCollection.removeInlineImage({csid:e,dataId:s}),updateEditDraftState.call(this,{csid:e})}),_MailActions$INITIAL_[_react_action_constants.mail.FILE_ATTACHMENT_ADDED]=_emitAfter(function(t){var e=t.files,s=t.csid,i=e.map(function(){return _mail_constants.Attachments.Dispositions.ATTACHMENT});attachmentAdded.call(this,{csid:s,files:e,dispositions:i})}),_MailActions$INITIAL_[_react_action_constants.mail.ATTACHMENT_REMOVED]=function(t){var e=t.csid,s=t.contentId;this.composeCollection.removeAttachment(e,s),updateEditDraftState.call(this,{csid:e}),this.emitChange()},_MailActions$INITIAL_[_react_action_constants.mail.REMOVE_NON_LOADED_ATTACHMENTS]=function(t){var e=t.csid;this.composeCollection.removeNonloadedAttachments(e)},_MailActions$INITIAL_[_react_action_constants.mail.INLINE_ATTACHMENT_MOVED_TO_TRAY]=_emitAfter(function(t){var e=t.csid,s=t.dataId,i=t.isNewCompose,a=t.pid;this.composeCollection.updateInlineAttachmentDisposition(e,s,i,a),updateEditDraftState.call(this,{csid:e})}),_MailActions$INITIAL_[_react_action_constants.mail.ATTACHMENT_MOVED_TO_INLINE]=_emitAfter(function(t){var e=t.csid,s=t.contentId;this.composeCollection.updateRegularAttachmentDisposition(e,s),updateEditDraftState.call(this,{csid:e})}),_MailActions$INITIAL_[_react_action_constants.mail.SEND]=_emitAfter(function(t){var e=t.csid;this.composeCollection.update(e,{draftStatus:_mail_constants.Draft.Status.SENDING})}),_MailActions$INITIAL_[_react_action_constants.mail.CAPTCHA_BEGAN]=_emitAfter(function(t){var e=t.csid;this.composeCollection.update(e,{draftStatus:_mail_constants.Draft.Status.CAPTCHAING})}),_MailActions$INITIAL_[_react_action_constants.mail.DELETE_FOLDER_SUCCEEDED]=_emitAfter(function(t){var e=t.folder;this.folderCollection.delete(e.id)}),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_MARK_STARRED_REQUESTED]=_emitAfter(function(t){var e=t.messageIds;this.messagesMetadataCollection.markStarred(e),updateListCollectionOnAction.call(this,e)}),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_MARK_UNSTARRED_REQUESTED]=_emitAfter(function(t){var e=t.messageIds;this.messagesMetadataCollection.markUnstarred(e),updateListCollectionOnAction.call(this,e)}),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_BODIES_REQUESTED]=_emitAfter(function(t){var e=this,s=t.messageIds;s.forEach(function(t){e.isDraftMessage(t)&&e.composeCollection.setState(e.getCsidByMessageId(t),_mail_constants.RecordStates.LOADING)})}),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_RECEIVED]=_emitAfter(function(t){var e=t.messageGroup,s=t.messageBodiesMap,i=t.listId;this.messageGroupsCollection.add(i,e.id,e.messages.map(function(t){return t.id})),_message2.addMessageMetadata.call(this,i,e.messages),this._addMessageBodies(i,s),this.accountsCollection.setActiveAccountId(this.getAccountIdForMessageGroup(e.id))}),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_GROUP_WITH_BODIES_FAILED]=_emitAfter(function(t){var e=t.messageGroupId;this.messageGroupsCollection.setState(e,_mail_constants.RecordStates.ERROR)}),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_BODIES_FAILED]=_emitAfter(function(t){var e=this,s=t.messageIds;s.forEach(function(t){e.isDraftMessage(t)&&e.composeCollection.setState(e.getCsidByMessageId(t),_mail_constants.RecordStates.ERROR)})}),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_BODIES_RECEIVED]=_emitAfter(messageBodiesAndMetadataReceived),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_BODIES_OPEN_GROUP_RECEIVED]=_emitAfter(messageBodiesAndMetadataReceived),_MailActions$INITIAL_[_react_action_constants.mail.UNDO_MOVE_REQUESTED]=_emitAfter(updateUndoActionMessageMetadata),_MailActions$INITIAL_[_react_action_constants.mail.UNDO_MOVE_SUCCEEDED]=_emitAfter(checkMailReceived),_MailActions$INITIAL_[_react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED]=_emitAfter(checkMailReceived),_MailActions$INITIAL_[_react_action_constants.mail.AUTO_CHECK_MAIL_FAILED]=_emitAfter(checkMailFailed),_MailActions$INITIAL_[_react_action_constants.mail.UPDATE_EDIT_DRAFT_STATE]=_emitAfter(updateEditDraftState),_MailActions$INITIAL_[_react_action_constants.mail.DRAFT_SUBJECT_UPDATED]=_emitAfter(updateDraftSubject),_MailActions$INITIAL_[_react_action_constants.mail.SUBJECT_FOCUSED]=_emitAfter(unfocusSubject),_MailActions$INITIAL_[_react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED]=_emitAfter(handleFolderChangeSucceeded),_MailActions$INITIAL_[_react_action_constants.mail.CHANGE_FOLDER_FAILED]=_emitAfter(handleFolderChangeError),_MailActions$INITIAL_[_react_action_constants.mail.SEARCH_LIST_ITEMS_REQUESTED]=_emitAfter(setSearchLoading),
_MailActions$INITIAL_[_react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED]=_emitAfter(initializeSearchList),_MailActions$INITIAL_[_react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED]=_emitAfter(initializeSearchList),_MailActions$INITIAL_[_react_action_constants.mail.SEARCH_LIST_ITEMS_FAILED]=_emitAfter(handleListLoadingError),_MailActions$INITIAL_[_react_action_constants.mail.MORE_MESSAGES_REQUEST_SUCCESS]=_emitAfter(appendMessageGroupsForList),_MailActions$INITIAL_[_react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_RECEIVED]=_emitAfter(appendListItemsByContentTypeAndFilter),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED]=_emitAfter(deleteMessages),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_DELETE_REQUESTED]=_emitAfter(deleteMessages),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_REQUESTED]=_emitAfter(moveMessages),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_MOVE_REQUESTED]=_emitAfter(moveMessages),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED]=_emitAfter(archiveMessages),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED]=_emitAfter(archiveMessages),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_RESTORE_REQUESTED]=_emitAfter(restoreMessages),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED]=_emitAfter(restoreMessages),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED]=_emitAfter(markSpam),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED]=_emitAfter(markSpam),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED]=_emitAfter(markNotSpam),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED]=_emitAfter(markNotSpam),_MailActions$INITIAL_[_react_action_constants.mail.CONTACT_DETAIL_FETCH_REQUESTED]=_emitAfter(function(t){var e=t.email;this.contactCollection.setRecordState(e,_mail_constants.RecordStates.LOADING)}),_MailActions$INITIAL_[_react_action_constants.mail.CONTACT_DETAIL_FETCH_SUCCEEDED]=_emitAfter(function(t){this.contactCollection.saveContact(t)}),_MailActions$INITIAL_[_react_action_constants.mail.IMPORTANT_CONTACTS_FETCH_SUCCEEDED]=_emitAfter(function(t){var e=this,s=t.contacts,i=t.actionType;s.forEach(function(t){e.contactCollection.getContactByEmail(t.id)||e.contactCollection.saveContact(t,i)})}),_MailActions$INITIAL_[_react_action_constants.mail.CONTACT_DETAIL_FETCH_FAILED]=_emitAfter(function(t){var e=t.email;this.contactCollection.setRecordState(e,_mail_constants.RecordStates.ERROR)}),_MailActions$INITIAL_[_react_action_constants.mail.MARK_READ_FOLDER_REQUESTED]=_emitAfter(markListRead),_MailActions$INITIAL_[_react_action_constants.mail.ARCHIVE_FOLDER_REQUESTED]=_emitAfter(archiveList),_MailActions$INITIAL_[_react_action_constants.mail.CLEAR_FOLDER_REQUESTED]=_emitAfter(deleteList),_MailActions$INITIAL_[_react_action_constants.mail.BROWSER_NOTIFICATIONS_DISPLAYED]=_emitAfter(clearNewListItems),_MailActions$INITIAL_[_react_action_constants.mail.APPLICATION_VISIBILITY_DID_CHANGE]=_emitAfter(clearAllNewListItems),_MailActions$INITIAL_[_react_action_constants.mail.ATTACHMENT_PREVIEW_STATE_SAVE_REQUESTED]=_emitAfter(saveAttachmentPreviewState),_MailActions$INITIAL_[_react_action_constants.mail.BULK_PROGRESS_RECEIVED]=_emitAfter(function(t){this.asyncTaskCollection.set(t)}),_MailActions$INITIAL_[_react_action_constants.mail.BULK_CANCEL_REQUESTED]=_emitAfter(function(t){this.asyncTaskCollection.abort(t)}),_MailActions$INITIAL_[_react_action_constants.mail.BULK_CANCEL_FAILED]=_emitAfter(function(t){this.asyncTaskCollection.abortFailed(t)}),_MailActions$INITIAL_[_react_action_constants.mail.BULK_CANCEL_SUCCEEDED]=_emitAfter(function(t){this.asyncTaskCollection.abortSucceeded(t)}),_MailActions$INITIAL_[_react_action_constants.mail.SIGNATURE_TEXT_CHANGE_SUCCEEDED]=_emitAfter(updateAccount),_MailActions$INITIAL_[_react_action_constants.mail.SIGNATURE_STATUS_CHANGE_REQUESTED]=_emitAfter(updateAccount),_MailActions$INITIAL_[_react_action_constants.mail.DEFAULT_SENDING_ADDRESS_CHANGE_REQUESTED]=_emitAfter(updateAccount),_MailActions$INITIAL_[_react_action_constants.mail.ACCOUNT_DETAILS_CHANGE_REQUESTED]=_emitAfter(updateAccount),_MailActions$INITIAL_[_react_action_constants.mail.ACCOUNT_ADD_SUCCEEDED]=_emitAfter(addAccount),_MailActions$INITIAL_[_react_action_constants.mail.ACCOUNT_DELETE_REQUESTED]=_emitAfter(deleteAccount),_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_PRINT_REQUESTED]=function(t){var e=t.messageGroupId,s=t.mId,i=t.listId;(0,_invariant2.default)(e,"messageGroupId is required");var a=s?e+"-"+s:e,o=e,n=this.getMessageGroupState(o),c=this.hasMessageGroup(o);if(n!==_mail_constants.RecordStates.ERROR&&n!==_mail_constants.RecordStates.DOES_NOT_EXIST&&c){var l=this.getContextualMessageGroupById(o,i),r=l.messages,_=r.find(function(t){return t.id&&t.id===s})||r.slice(-1)[0],d={printId:a,type:_mail_constants.PrintTypes.MESSAGE,printTitle:_.headers.subject,groupId:e,mId:s};this.printCollection.addPrintItem(d),this.emitChange()}},_MailActions$INITIAL_[_react_action_constants.mail.MESSAGE_PRINT_SUCCEEDED]=function(t){var e=t.printId;(0,_invariant2.default)(e,"printId is required"),this.printCollection.removePrintItemById(e),this.emitChange()},_MailActions$INITIAL_[_react_action_constants.mail.GIF_FETCH_REQUESTED]=function(t){var e=t.listId,s=t.query;this.gifCollection.setCategoryState(s,_mail_constants.RecordStates.LOADING),this.itemListCollection.setLoading(e),this.emitChange()},_MailActions$INITIAL_[_react_action_constants.mail.GIF_FETCH_SUCCEEDED]=function(t){var e=t.listId,s=t.results,i=t.query;if(s){var a=s.nextItemsUrl,o=1===Object.keys(s).length;o?(this.gifCollection.setCategoryState(i,_mail_constants.RecordStates.LOADED),s.hasMoreItems=!0):a&&(s.hasMoreItems=!0)}var n=this.itemListCollection.getListItems(e);if(n){var c=new Set;n.forEach(function(t){return c.add(t.id)}),s.items=s.items.filter(function(t){return!c.has(t.id)})}this.itemListCollection.add(e,s),this.itemListCollection.setLoaded(e),this.emitChange()},_MailActions$INITIAL_[_react_action_constants.mail.GIF_FETCH_FAILED]=function(t){var e=t.listId;this.itemListCollection.setError(e),this.emitChange()},_MailActions$INITIAL_[_react_action_constants.mail.GIF_CATEGORIES_CONTENT_FETCH_SUCCEEDED]=function(t){var e=t.categories;this.gifCollection.setGifCategories(e),this.emitChange()},_MailActions$INITIAL_[_react_action_constants.mail.ACCOUNT_REAUTH_SUCCEEDED]=function(t){var e=t.accountAlerts;this.accountsCollection.setAlerts(e),this.emitChange()},_MailActions$INITIAL_);
},{"../../platform/invariant":"./platform/invariant","../../platform/mail_constants":"./platform/mail_constants","../../platform/react_action_constants":"./platform/react_action_constants","../../platform/utils":"./platform/utils","../../platform/utils/attachments":"./platform/utils/attachments","../../platform/utils/folder":"./platform/utils/folder","../../platform/utils/list":"./platform/utils/list","../../platform/utils/mailto_parser":"./platform/utils/mailto_parser","../../platform/utils/message":"./platform/utils/message","../../platform/utils/route":"./platform/utils/route","../application":"./stores/application","./helpers/message":"./stores/mail/helpers/message","lodash/omit":"./node_modules/lodash/omit.js"}],"./stores/mail/helpers/message":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function addMessageMetadata(t,a){var e=this;(0,_invariant2.default)(t,"You must use a listId to add message metadata."),(0,_invariant2.default)(a,"You pass metadata to add it.");var s=Array.isArray(a)?a:[a];s.forEach(function(a){a.attachments.forEach(function(t){e.attachmentCollection.add(a.id,t)}),e.subjectAndSnippetCollection.add({id:a.id,subject:a.headers.subject,snippet:a.snippet},t)}),this.messagesMetadataCollection.add(t,s)}function syncMessageMetadata(t,a){var e=this;(0,_invariant2.default)(t,"You must use a listId to add message metadata."),(0,_invariant2.default)(a,"You pass metadata to add it.");var s=Array.isArray(a)?a:[a];s.forEach(function(a){var s=a.attachments,n=a.id,i=a.headers,o=a.snippet,d=a.csid,r=a.conversationId;if(s.forEach(function(t){e.attachmentCollection.add(n,t)}),e.subjectAndSnippetCollection.add({id:n,subject:i.subject,snippet:o},t),d&&e.composeCollection.get(d)){var c=e.composeCollection.get(d),l=c.lastSavedMessageId,u=c.draftStatus,p=e.dispatcher.getContext().config.conversations,m=p?r:n,g=l!==n?_mail_constants.Draft.Status.EDITED:u;e.composeCollection.update(d,{groupId:m,lastSavedMessageId:n,draftStatus:g})}}),this.messagesMetadataCollection.sync(t,s)}function removeMessageMetadata(t){this.messagesMetadataCollection.remove(t),this.attachmentCollection.removeByMessageId(t)}function getMessageMetadata(t,a){var e=this.messagesMetadataCollection.get(t);(0,_invariant2.default)(e,"metadata for "+t+" was not found within the messagesMetadataCollection.");var s=a?(0,_list.getListContentTypeFromListId)(a):_mail_constants.ListContentTypes.MESSAGES,n=this.attachmentCollection.getByMessageId(t).filter(function(t){return!(s===_mail_constants.ListContentTypes.MESSAGES&&t.isExternal)}),i=this.subjectAndSnippetCollection.get(t,a,e.csid),o=i.subject,d=i.snippet;return e.headers=Object.assign({},e.headers,{subject:o}),e=Object.assign({},e,{attachments:n,snippet:d})}exports.__esModule=!0,exports.addMessageMetadata=addMessageMetadata,exports.syncMessageMetadata=syncMessageMetadata,exports.removeMessageMetadata=removeMessageMetadata,exports.getMessageMetadata=getMessageMetadata;var _invariant=require("../../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_list=require("../../../platform/utils/list"),_mail_constants=require("../../../platform/mail_constants");
},{"../../../platform/invariant":"./platform/invariant","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/list":"./platform/utils/list"}],"./stores/mail":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),_accounts=require("./collections/accounts"),_accounts2=_interopRequireDefault(_accounts),_compose=require("./collections/compose"),_compose2=_interopRequireDefault(_compose),_folders=require("./collections/folders"),_folders2=_interopRequireDefault(_folders),_item_list=require("./collections/item_list"),_item_list2=_interopRequireDefault(_item_list),_message_group=require("./collections/message_group"),_message_group2=_interopRequireDefault(_message_group),_message_metadata=require("./collections/message_metadata"),_message_metadata2=_interopRequireDefault(_message_metadata),_attachment_metadata=require("./collections/attachment_metadata"),_attachment_metadata2=_interopRequireDefault(_attachment_metadata),_gif=require("./collections/gif"),_gif2=_interopRequireDefault(_gif),_subject_and_snippet=require("./collections/subject_and_snippet"),_subject_and_snippet2=_interopRequireDefault(_subject_and_snippet),_suggested_words=require("./collections/suggested_words"),_suggested_words2=_interopRequireDefault(_suggested_words),_async_task=require("./collections/async_task"),_async_task2=_interopRequireDefault(_async_task),_contact=require("./collections/contact"),_contact2=_interopRequireDefault(_contact),_print_message=require("./collections/print_message"),_print_message2=_interopRequireDefault(_print_message),_invariant=require("../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_generic=require("../../platform/utils/generic"),_folder=require("../../platform/utils/folder"),_list=require("../../platform/utils/list"),_message=require("../../platform/utils/message"),_handlers=require("./handlers"),_handlers2=_interopRequireDefault(_handlers),_message2=require("./helpers/message"),_mail_constants=require("../../platform/mail_constants"),_object=require("../../platform/utils/object"),MailStore=function(t){function e(o){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,o));n.useReduxState=(0,_generic.isBrowser)()&&o.getContext().config.useReduxState;var s=(0,_generic.isBrowser)()&&n.useReduxState&&window.context.store;return n.accountsCollection=new _accounts2.default,n.composeCollection=new _compose2.default,n.folderCollection=new _folders2.default(n.useReduxState,s),n.itemListCollection=new _item_list2.default(n.useReduxState,s),n.messageGroupsCollection=new _message_group2.default(n.useReduxState,s),n.messagesMetadataCollection=new _message_metadata2.default(n.useReduxState,s),n.attachmentCollection=new _attachment_metadata2.default,n.gifCollection=new _gif2.default,n.subjectAndSnippetCollection=new _subject_and_snippet2.default(n.useReduxState,s),n.contactCollection=new _contact2.default,n.printCollection=new _print_message2.default,n.suggestedWordsCollection=new _suggested_words2.default,n.asyncTaskCollection=new _async_task2.default,n}return _inherits(e,t),e.prototype.isFolder=function(t){return!!this.getFolder(t)},e.prototype.normalizeDataFromGroupList=function(t,e,o,n){var s=this;this.itemListCollection.add(t,{items:e.map(function(t){return t.id}),hasMoreItems:o,nextItemsUrl:n}),e.forEach(function(e){_message2.addMessageMetadata.call(s,t,e.messages),s.messageGroupsCollection.add(t,e.id,e.messages.map(function(t){return t.id}))})},e.prototype.normalizeDataFromPeople=function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=o.map(function(t){return t.contactDetails});n.forEach(function(t){e.contactCollection.saveContact(t)}),this.itemListCollection.add(t,{items:n.map(function(t){return t.xobniId})})},e.prototype.normalizeDataFromAttachmentsList=function(t,e,o,n){var s=this;this.itemListCollection.add(t,{items:e.map(function(t){var e=t.attachment;return e.id}),hasMoreItems:o,nextItemsUrl:n}),e.forEach(function(e){var o=e.attachment,n=e.message;s.attachmentCollection.add(n.id,o),s.subjectAndSnippetCollection.add(n,t)})},e.prototype._addMessageBodies=function(t,e){var o=this;Object.keys(e).forEach(function(n){if(o.isDraftMessage(n)){var s=_message2.getMessageMetadata.call(o,n),r=s.csid,i=e[n],a=Object.assign({},s,{body:i}),c=o.getAccountIdForFolder(a.folder.id),u=o.accountsCollection.get(c),l=o.accountsCollection.getAddressesForAccount(c),p=_mail_constants.Compose.Modes.EDIT,d=void 0;d=o.useReduxState?o.messageGroupsCollection.getGroupId(t,n,r):o.messageGroupsCollection.getGroupId(t,n),o.composeCollection.create({csid:r,composeMode:p,account:u,senderAddresses:l,message:a,groupId:d,folderId:a.folder.id})}})},e.prototype.isListStale=function(t){return this.itemListCollection.isListStale(t)},e.prototype.doesListExist=function(t){return this.itemListCollection.exists(t)},e.prototype.getItemListIdsForList=function(t){return this.itemListCollection.getListItems(t)||[]},e.prototype.getMessageGroupIdsForList=function(t){return this.getItemListIdsForList(t)},e.prototype.getSuggestedWordsForList=function(t){return this.suggestedWordsCollection.get(t)},e.prototype.getAttachmentListItem=function(t,e){var o=this.attachmentCollection.get(t),n=(0,_message.getMessageIdFromAttachmentId)(t),s="";this.useReduxState&&(s=this.messagesMetadataCollection.get(n).csid);var r=this.subjectAndSnippetCollection.get(n,e,s);return{partialMessage:r,attachment:o}},e.prototype.getItem=function(t,e){var o=(0,_list.getListContentTypeFromListId)(e);switch(o){case _mail_constants.ListContentTypes.DOCUMENTS:case _mail_constants.ListContentTypes.IMAGES:return this.getAttachmentListItem(t,e);case _mail_constants.ListContentTypes.PEOPLE:return this.getContact(t,e);case _mail_constants.ListContentTypes.MESSAGES:default:return this.getContextualMessageGroupById(t,e)}},e.prototype.getItemList=function(t){var e=this,o=this.getItemListIdsForList(t);return o.map(function(o){return e.getItem(o,t)})},e.prototype.getItemListState=function(t){return this.itemListCollection.getState(t)},e.prototype.getNextItemsUrl=function(t){return this.itemListCollection.getNextItemsUrl(t)},e.prototype.getItemListData=function(t){return this.itemListCollection.getListData(t)},e.prototype.getFolder=function(t){return this.folderCollection.get(t)},e.prototype.hasFolder=function(t){return this.folderCollection.has(t)},e.prototype.getDefaultFolderId=function(){return this.folderCollection.getDefaultId()},e.prototype.getRootAccounts=function(){return this.accountsCollection.getRootAccounts()},e.prototype.getAllAccounts=function(){return this.accountsCollection.getAllAccounts()},e.prototype.getAccountById=function(t){return this.accountsCollection.get(t)},e.prototype.getAccountByEmail=function(t){return this.accountsCollection.getByEmail(t)},e.prototype.getPrimaryAccount=function(){return this.accountsCollection.getPrimaryAccount()},e.prototype.getImapInAccounts=function(){return this.accountsCollection.getImapInAccounts()},e.prototype.getAccountIdForFolder=function(t){var e=this.getFolder(t);return(0,_invariant2.default)(e,"folder with id "+t+" was not found in the collection"),e.accountId},e.prototype.getAccountIdForMessage=function(t){return this.getAccountIdForFolder(this.getFolderIdForMessage(t))},e.prototype.getAccountIdForMessageGroup=function(t){var e=this.messageGroupsCollection.getMessageIds(t);return this.getAccountIdForMessage(e[0])},e.prototype.getMyAddresses=function(){return this.accountsCollection.getMyAddresses()},e.prototype.getFolderTypeForMessage=function(t){var e=this.getFolderIdForMessage(t),o=this.folderCollection.get(e);return(0,_folder.getPrimaryFolderType)(o)},e.prototype.getFolderIdForMessage=function(t){return this.messagesMetadataCollection.get(t).folder.id},e.prototype.isDraftMessage=function(t){return this.getFolderTypeForMessage(t)===_mail_constants.FolderTypes.DRAFT},e.prototype.isTrashMessage=function(t){return this.getFolderTypeForMessage(t)===_mail_constants.FolderTypes.TRASH},e.prototype.isSpamMessage=function(t){return this.getFolderTypeForMessage(t)===_mail_constants.FolderTypes.BULK},e.prototype.getFolderIdForAccount=function(t,e){return this.folderCollection.getFolderIdForAccount(t,e)},e.prototype.getDefaultFolderForAccount=function(t){return this.folderCollection.getDefaultFolderForAccount(t)},e.prototype.getAllFoldersForAccount=function(t){return this.folderCollection.getTreeNodesForAccount(t)},e.prototype.getAllFoldersForAllAccounts=function(){var t=this;return this.getRootAccounts().reduce(function(e,o){return e.concat(t.getAllFoldersForAccount(o.id))},[])},e.prototype.getCustomFoldersUnreadCount=function(){return this.folderCollection.getCustomFoldersUnreadCount()},e.prototype.getUnreadCountForAccount=function(t){return this.folderCollection.getUnreadCountForAccount(t)},e.prototype.getFolderUnreadCount=function(t){return this.folderCollection.getFolderUnreadCount(t)},e.prototype.getMessageGroupById=function(t){var e=this;if(!this.hasMessageGroup(t))return null;var o=this.messageGroupsCollection.getMessageIds(t),n=o.map(function(t){return e.getMessageById(t)});return{id:t,messages:n}},e.prototype.getOriginalMessageGroupSender=function(t){var e=this;if(!this.hasMessageGroup(t))return null;var o=this.messageGroupsCollection.getMessageIds(t),n=o.map(function(t){return e.getMessageById(t)}),s=(0,_object.getIn)(n,"0.headers.from.0");return s?s:null},e.prototype.getContextualMessageGroupById=function(t,e){var o=this,n=this.messageGroupsCollection.getMessageIds(t),s=n.map(function(t){return o.getContextualMessageById(t,e)});return{id:t,messages:s}},e.prototype.getCurrentItemIndex=function(t,e){var o=this.getItemListIdsForList(e);return o.findIndex(function(e){return e===t})},e.prototype.getNextOrPreviousGroupId=function(t,e){var o=this.getCurrentItemIndex(t,e),n=this.getItemListIdsForList(e);return n[o+1]||n[o-1]||null},e.prototype.getPreviousOrNextGroupId=function(t,e){var o=this.getCurrentItemIndex(t,e),n=this.getItemListIdsForList(e);return n[o-1]||n[o+1]||null},e.prototype.getNextGroupId=function(t,e){var o=this.getCurrentItemIndex(t,e),n=this.getItemListIdsForList(e);return n[o+1]||null},e.prototype.getPreviousGroupId=function(t,e){var o=this.getCurrentItemIndex(t,e),n=this.getItemListIdsForList(e);return n[o-1]||null},e.prototype.getListIdToGroupIdMap=function(t){return this.messageGroupsCollection.getListIdToGroupIdMap(t)},e.prototype.getMessageGroupIdByMessageId=function(t,e){if(this.useReduxState){var o=this.messagesMetadataCollection.get(e).csid;return this.messageGroupsCollection.getGroupId(t,e,o)}return this.messageGroupsCollection.getGroupId(t,e)},e.prototype.getMessageGroupIdByAttachmentId=function(t,e){var o=this.dispatcher.getContext().config.conversations,n=(0,_message.getMessageIdFromAttachmentId)(e);if(!o)return n;var s=this.getAttachmentListItem(e,t),r=this.getMessageGroupIdByMessageId(t,n)||(0,_object.getIn)(s,"attachment.conversationId","");return r},e.prototype.hasMessageGroup=function(t){return this.messageGroupsCollection.exists(t)},e.prototype.getLastNonDraftMessageByGroupId=function(t){var e=this,o=this.messageGroupsCollection.getMessageIds(t),n=o.filter(function(t){return!e.isDraftMessage(t)}).pop();return n?this.getMessageById(n):null},e.prototype.getMessageById=function(t){var e=_message2.getMessageMetadata.call(this,t);return Object.assign({},e,{folder:this.folderCollection.get(e.folder.id)})},e.prototype.getContextualMessageById=function(t,e){var o=_message2.getMessageMetadata.call(this,t,e);return Object.assign({},o,{folder:this.folderCollection.get(o.folder.id)})},e.prototype.hasMoreItems=function(t){return(0,_invariant2.default)(t,"Folder ID is required"),this.itemListCollection.hasMoreItems(t)},e.prototype.isItemInList=function(t,e){return this.itemListCollection.isItemInList(t,e)},e.prototype.getRecordState=function(t){return this.itemListCollection.getState(t)},e.prototype.getMessageMetaRecordState=function(t){return this.messagesMetadataCollection.getState(t)},e.prototype.getMessageGroupState=function(t){return this.messageGroupsCollection.getState(t)},e.prototype.getComposeData=function(t){return this.composeCollection.get(t)},e.prototype.hasUnsavedData=function(){return this.composeCollection.hasUnsavedData()},e.prototype.getComposeDataByGroupId=function(t){return this.composeCollection.getByGroupId(t)},e.prototype.getComposeDataMatchingInReplyTo=function(t){return this.composeCollection.getByInReplyTo(t)},e.prototype.getCsidByMessageId=function(t){var e=this.messagesMetadataCollection.get(t);if(e)return e.csid},e.prototype.getComposeDataState=function(t){return this.composeCollection.getState(t)},e.prototype.getDraftStatus=function(t){return this.composeCollection.getDraftStatus(t)},e.prototype.getActiveAccountId=function(){return this.accountsCollection.getActiveAccountId()},e.prototype.getActiveAccount=function(){return this.accountsCollection.getActiveAccount()},e.prototype.getDefaultSendingAccount=function(){return this.accountsCollection.getDefaultSendingAccount()},e.prototype.getImapInProvider=function(){return this.accountsCollection.getImapInProvider()},e.prototype.getFolderIdFromFolderType=function(t,e){var o=this.getAccountIdForMessage(t);return this.getFolderIdForAccount(e,o)},e.prototype.getFolderIdMapFromFolderType=function(t,e){var o=this,n={};return t.forEach(function(t){var s=o.getFolderIdFromFolderType(t,e);n.hasOwnProperty(s)||(n[s]=[]),n[s].push(t)}),n},e.prototype.getAttachment=function(t){return this.attachmentCollection.get(t)},e.prototype._getAttachmentIdOnDirection=function(t,e,o){for(var n=this.getItemList(e),s=n.findIndex(function(e){return e.attachment.id===t}),r=s+o,i=null;r>=0&&r<n.length;){if(!n[r].attachment.isExternal){i=n[r].attachment;break}r+=o}return i?i.id:null},e.prototype.getNextAttachmentIdForItemList=function(t,e){return this._getAttachmentIdOnDirection(t,e,1)},e.prototype.getPreviousAttachmentIdForItemList=function(t,e){return this._getAttachmentIdOnDirection(t,e,-1)},e.prototype.getNextAttachmentIdForMessage=function(t,e){return this.attachmentCollection.getNextAttachmentIdForMessage(t,e)},e.prototype.getPreviousAttachmentIdForMessage=function(t,e){return this.attachmentCollection.getPreviousAttachmentIdForMessage(t,e)},e.prototype._getAttachmentIdsByMessageGroupId=function(t){var e=this,o=this.messageGroupsCollection.getMessageIds(t),n=[];return o.forEach(function(t){n=n.concat(e.attachmentCollection.getAttachmentIdsByMessageId(t))}),n},e.prototype.getNextAttachmentIdForMessageGroup=function(t,e){var o=this._getAttachmentIdsByMessageGroupId(e),n=o.indexOf(t),s=n+1;return n<0||s>=o.length?"":o[s]},e.prototype.getPreviousAttachmentIdForMessageGroup=function(t,e){var o=this._getAttachmentIdsByMessageGroupId(e),n=o.indexOf(t),s=n-1;return n<0||s<0?"":o[s]},e.prototype.getContactByEmail=function(t){return this.contactCollection.getContactByEmail(t)},e.prototype.getContact=function(t){return this.contactCollection.getContact(t)},e.prototype.getContactRecordState=function(t){return this.contactCollection.getRecordState(t)},e.prototype.getNewListItems=function(t){return this.itemListCollection.getNewListItems(t)},e.prototype.getTotalNewListItemCount=function(t){return this.itemListCollection.getTotalNewListItemCount(t)},e.prototype.getGifCategories=function(){return this.gifCollection.getGifCategories()},e.prototype.getGifCategoryState=function(t){return this.gifCollection.getGifCategoryState(t)},e.prototype.groupMessagesByFolder=function(t){var e=this,o={};return t.forEach(function(t){var n=e.messagesMetadataCollection.get(t),s=n.folder.id;o.hasOwnProperty(s)||(o[s]=[]),o[s].push(t)}),o},e.prototype.getAsyncTask=function(){return this.asyncTaskCollection.getTask()},e.prototype.isAsyncTaskPending=function(){var t=this.getAsyncTask();return t&&[_mail_constants.BulkTaskStatus.COMPLETED,_mail_constants.BulkTaskStatus.ABORTED,_mail_constants.BulkTaskStatus.FAILED].indexOf(t.status)===-1||!1},e.prototype.getAsyncTaskPayload=function(){return this.asyncTaskCollection.getTaskActionPayload()},e.prototype.getPrintItem=function(){return this.printCollection.getPrintItem()},e.prototype.getPrintItemById=function(t){return this.printCollection.getPrintItemById(t)},e.prototype.getExpiredAccounts=function(){return this.accountsCollection.getExpiredAccounts()},e.prototype.getAccountAlertByAccountId=function(t){return this.accountsCollection.getAccountAlertByAccountId(t)},e.prototype.getFolderIdsByType=function(t,e){return this.folderCollection.getFolderIdsByType(t,e)},e.prototype.dehydrate=function(){return{accountsCollectionData:this.accountsCollection.dehydrate(),composeCollectionData:this.composeCollection.dehydrate(),folderCollectionData:this.folderCollection.dehydrate(),itemListCollectionData:this.itemListCollection.dehydrate(),messageGroupsCollectionData:this.messageGroupsCollection.dehydrate(),messagesMetadataCollectionData:this.messagesMetadataCollection.dehydrate(),attachmentCollectionData:this.attachmentCollection.dehydrate(),subjectAndSnippetCollectionData:this.subjectAndSnippetCollection.dehydrate()}},e.prototype.rehydrate=function(t){this.accountsCollection.rehydrate(t.accountsCollectionData),this.composeCollection.rehydrate(t.composeCollectionData),this.folderCollection.rehydrate(t.folderCollectionData),this.itemListCollection.rehydrate(t.itemListCollectionData),this.messageGroupsCollection.rehydrate(t.messageGroupsCollectionData),this.messagesMetadataCollection.rehydrate(t.messagesMetadataCollectionData),this.attachmentCollection.rehydrate(t.attachmentCollectionData),this.subjectAndSnippetCollection.rehydrate(t.subjectAndSnippetCollectionData)},e}(_BaseStore3.default);MailStore.storeName="MailStore",MailStore.handlers={},Object.assign(MailStore.handlers,_handlers2.default),exports.default=MailStore,module.exports=exports.default;
},{"../../platform/invariant":"./platform/invariant","../../platform/mail_constants":"./platform/mail_constants","../../platform/utils/folder":"./platform/utils/folder","../../platform/utils/generic":"./platform/utils/generic","../../platform/utils/list":"./platform/utils/list","../../platform/utils/message":"./platform/utils/message","../../platform/utils/object":"./platform/utils/object","./collections/accounts":"./stores/mail/collections/accounts","./collections/async_task":"./stores/mail/collections/async_task","./collections/attachment_metadata":"./stores/mail/collections/attachment_metadata","./collections/compose":"./stores/mail/collections/compose","./collections/contact":"./stores/mail/collections/contact","./collections/folders":"./stores/mail/collections/folders","./collections/gif":"./stores/mail/collections/gif","./collections/item_list":"./stores/mail/collections/item_list","./collections/message_group":"./stores/mail/collections/message_group","./collections/message_metadata":"./stores/mail/collections/message_metadata","./collections/print_message":"./stores/mail/collections/print_message","./collections/subject_and_snippet":"./stores/mail/collections/subject_and_snippet","./collections/suggested_words":"./stores/mail/collections/suggested_words","./handlers":"./stores/mail/handlers","./helpers/message":"./stores/mail/helpers/message","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],"./stores/message_group_ui":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _getExpansionForCards(e){var t=e.messageGroup,a=e.cards,s=e.prevExpansionStates,n=void 0===s?{}:s,r=e.expandMessageIds,o=void 0===r?[]:r,i=Object.assign({},n);return(0,_message_group.getIdsOfMessagesToExpand)(t,o).forEach(function(e){i[e]=_mail_constants.CARD_EXPANSION_STATES.EXPANDED}),a.forEach(function(e){var t=e.cardId,a=e.composeData;a&&(i[t]=_mail_constants.CARD_EXPANSION_STATES.EXPANDED)}),a.forEach(function(e,t,a){var s=e.message,n=e.cardId;if(i[n]!==_mail_constants.CARD_EXPANSION_STATES.EXPANDED&&s)if(0===t||t===a.length-2)i[n]=_mail_constants.CARD_EXPANSION_STATES.COLLAPSED;else{var r=a[t+1];r&&i[r.cardId]===_mail_constants.CARD_EXPANSION_STATES.EXPANDED?i[n]=_mail_constants.CARD_EXPANSION_STATES.COLLAPSED:i[n]=_mail_constants.CARD_EXPANSION_STATES.STACKED}}),i}function buildUiId(e,t){return t?""+e+MESSAGE_GROUP_UI_ID_DELIMITER+t:""}function buildUiIdFromRoute(e){if(e.name===_mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST||e.name===_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST){var t=(0,_list.getListIdFromRoute)(e),a=e.params.mid;return buildUiId(t,a)}return null}function getGroupIdFromUiId(e){return e.split(MESSAGE_GROUP_UI_ID_DELIMITER)[1]}function getListIdFromUiId(e){return e.split(MESSAGE_GROUP_UI_ID_DELIMITER)[0]}exports.__esModule=!0,exports.MESSAGE_GROUP_UI_ID_DELIMITER=void 0;var _MessageGroupUIStore$;exports._getExpansionForCards=_getExpansionForCards;var _BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),_mail=require("./mail"),_mail2=_interopRequireDefault(_mail),_pages=require("./pages"),_pages2=_interopRequireDefault(_pages),_lruCache=require("lru-cache"),_lruCache2=_interopRequireDefault(_lruCache),_list=require("../platform/utils/list"),_cards=require("../platform/utils/cards"),_mail_constants=require("../platform/mail_constants"),_message=require("../platform/utils/message"),_message_group=require("../platform/utils/message_group"),_invariant=require("../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_react_action_constants=require("../platform/react_action_constants"),MESSAGE_GROUP_UI_ID_DELIMITER=exports.MESSAGE_GROUP_UI_ID_DELIMITER="$$",MessageGroupUIStore=function(e){function t(a){_classCallCheck(this,t);var s=_possibleConstructorReturn(this,e.call(this,a));return s.uiIdToAttachmentId={},s.expansionStates=new _lruCache2.default({max:50}),s}return _inherits(t,e),t.prototype.handleExpansionStateChange=function(e){var t=e.listId,a=e.messageGroupId,s=e.cardIds,n=e.newState,r=buildUiId(t,a);(0,_invariant2.default)(this.expansionStates.get(r),"Expansion states not present for listId and groupId: ("+t+", "+a+")");var o=Object.assign({},this.expansionStates.get(r));s.forEach(function(e){return o[e]=n}),this.expansionStates.set(r,o),this.emitChange()},t.prototype.handleCloseAll=function(){this.expansionStates.reset()},t.prototype.handleTotalExpansionChange=function(e){var t=this,a=e.listId,s=e.messageGroupId,n=e.newState;this.dispatcher.waitFor(_mail2.default,function(){var e=buildUiId(a,s),r=t.dispatcher.getStore(_mail2.default),o=r.getContextualMessageGroupById(s,a),i=t.getCards(o),u=t.expansionStates.get(e)||Object.create(null),_=Object.create(null);if(i.forEach(function(e){var t=e.cardId;_[t]=n}),n!==_mail_constants.CARD_EXPANSION_STATES.EXPANDED){var c=i[i.length-1].cardId;_[c]=u[c]}t.expansionStates.set(e,_),t.emitChange()})},t.prototype.handleClosePage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.route;t=t||this.dispatcher.getStore(_pages2.default).getActivePageRoute();var a=buildUiIdFromRoute(t);a&&(this.expansionStates.del(a),this.emitChange())},t.prototype.setActiveAttachmentId=function(e){var t=e.attachmentId,a=e.listId,s=e.groupId,n=e.fullScreenMode,r=buildUiId(a,s);if(r&&!n){var o,i=(0,_message.getMessageIdFromAttachmentId)(t),u=this.expansionStates.get(r);this.expansionStates.set(r,Object.assign({},u,(o={},o[i]=_mail_constants.CARD_EXPANSION_STATES.EXPANDED,o))),this.uiIdToAttachmentId[r]=t,this.emitChange()}},t.prototype.unsetActiveAttachmentId=function(e){var t=e.listId,a=e.groupId,s=buildUiId(t,a);s&&(delete this.uiIdToAttachmentId[s],this.emitChange())},t.prototype._handleGroupChangeForAttachments=function(e){var t=this,a=!1;return Object.keys(this.uiIdToAttachmentId).forEach(function(s){var n=getGroupIdFromUiId(s),r=(0,_message.getMessageIdFromAttachmentId)(t.uiIdToAttachmentId[s]),o=e.getMessageGroupById(n),i=o.messages.some(function(e){return e.id===r});i||(delete t.uiIdToAttachmentId[s],a=!0)}),a},t.prototype._handleGroupChangeForExpansionStates=function(e){var t=this,a=Object.create(null);this.expansionStates.forEach(function(s,n){var r=getGroupIdFromUiId(n),o=getListIdFromUiId(n);if(!e.hasMessageGroup(r))return void(a[n]=null);var i=e.getContextualMessageGroupById(r,o),u=t.getCards(i),_=u.some(function(e){return!s.hasOwnProperty(e.cardId)});_&&(a[n]=_getExpansionForCards({messageGroup:i,cards:u,prevExpansionStates:s}))});var s=Object.keys(a);return s.forEach(function(e){null===a[e]?t.expansionStates.del(e):t.expansionStates.set(e,a[e])}),Boolean(s.length)},t.prototype.handleMessageGroupChange=function(){var e=this;this.dispatcher.waitFor(_mail2.default,function(){var t=e.dispatcher.getStore(_mail2.default),a=e._handleGroupChangeForAttachments(t),s=e._handleGroupChangeForExpansionStates(t);(a||s)&&e.emitChange()})},t.prototype.getActiveAttachmentId=function(e,t){return this.uiIdToAttachmentId[buildUiId(e,t)]||""},t.prototype.getCardExpansionStates=function(e,t,a){var s=buildUiId(e,t),n=this.expansionStates.get(s)||Object.create(null),r=this.dispatcher.getStore(_mail2.default);if(!r.hasMessageGroup(t))return n;var o=r.getContextualMessageGroupById(t,e),i=this.getCards(o),u=i.some(function(e){var t=e.cardId;return!n[t]});if(!u)return n;var _=a?[a]:[];return n=_getExpansionForCards({messageGroup:o,cards:i,prevExpansionStates:n,expandMessageIds:_}),this.expansionStates.set(s,n),n},t.prototype.getCards=function(e){var t=this.dispatcher.getStore(_mail2.default);return(0,_cards.makeCards)(e.messages,t.getComposeDataByGroupId(e.id))},t}(_BaseStore3.default);MessageGroupUIStore.storeName="MessageGroupUIStore",MessageGroupUIStore.handlers=(_MessageGroupUIStore$={},_MessageGroupUIStore$[_react_action_constants.mail.ATTACHMENT_PREVIEW_OPENED]="setActiveAttachmentId",_MessageGroupUIStore$[_react_action_constants.mail.ATTACHMENT_PREVIEW_CLOSED]="unsetActiveAttachmentId",_MessageGroupUIStore$[_react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED]="handleMessageGroupChange",_MessageGroupUIStore$[_react_action_constants.mail.MESSAGE_CARD_EXPANSION_CHANGED]="handleExpansionStateChange",_MessageGroupUIStore$[_react_action_constants.mail.CLOSE_ALL_PAGES_REQUESTED]="handleCloseAll",_MessageGroupUIStore$[_react_action_constants.mail.MESSAGE_GROUP_ALL_EXPANSIONS_CHANGED]="handleTotalExpansionChange",_MessageGroupUIStore$[_react_action_constants.mail.CLOSE_PAGE_REQUESTED]="handleClosePage",_MessageGroupUIStore$),exports.default=MessageGroupUIStore;
},{"../platform/invariant":"./platform/invariant","../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","../platform/utils/cards":"./platform/utils/cards","../platform/utils/list":"./platform/utils/list","../platform/utils/message":"./platform/utils/message","../platform/utils/message_group":"./platform/utils/message_group","./mail":"./stores/mail","./pages":"./stores/pages","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js","lru-cache":"./node_modules/lru-cache/lib/lru-cache.js"}],332:[function(require,module,exports){
"use strict";function handleCompletion(t,a,n){var i=t.task;i.status!==_mail_constants.BulkTaskStatus.ABORTED&&i.status!==_mail_constants.BulkTaskStatus.COMPLETED&&i.status!==_mail_constants.BulkTaskStatus.FAILED||n({type:_mail_constants.NotificationTypes.ADVISORY,messageId:_mail_constants.NotificationIds.BULK_PROGRESS,requireInteraction:!1,sticky:!1,modal:!0,data:t})}function handleTaskInitiation(t,a,n){t.async&&n({type:_mail_constants.NotificationTypes.ADVISORY,messageId:_mail_constants.NotificationIds.BULK_PROGRESS,requireInteraction:!0,sticky:!0,modal:!0})}exports.__esModule=!0;var _MailActions$BULK_PRO,_react_action_constants=require("../../../platform/react_action_constants"),_mail_constants=require("../../../platform/mail_constants");exports.default=(_MailActions$BULK_PRO={},_MailActions$BULK_PRO[_react_action_constants.mail.BULK_PROGRESS_RECEIVED]=handleCompletion,_MailActions$BULK_PRO[_react_action_constants.mail.MARK_READ_FOLDER_REQUESTED]=handleTaskInitiation,_MailActions$BULK_PRO[_react_action_constants.mail.ARCHIVE_FOLDER_REQUESTED]=handleTaskInitiation,_MailActions$BULK_PRO[_react_action_constants.mail.CLEAR_FOLDER_REQUESTED]=handleTaskInitiation,_MailActions$BULK_PRO[_react_action_constants.mail.MESSAGES_DELETE_REQUESTED]=handleTaskInitiation,_MailActions$BULK_PRO[_react_action_constants.mail.MESSAGES_MOVE_REQUESTED]=handleTaskInitiation,_MailActions$BULK_PRO[_react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED]=handleTaskInitiation,_MailActions$BULK_PRO[_react_action_constants.mail.MESSAGES_RESTORE_REQUESTED]=handleTaskInitiation,_MailActions$BULK_PRO[_react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED]=handleTaskInitiation,_MailActions$BULK_PRO[_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED]=handleTaskInitiation,_MailActions$BULK_PRO),module.exports=exports.default;
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/react_action_constants":"./platform/react_action_constants"}],333:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function handleFailure(t,a,i){var _,n;switch(a){case _react_action_constants.mail.COMPOSE_NO_ADDRESS_DETECTED:_=_mail_constants.NotificationIds.COMPOSE_NO_ADDRESS_DETECTED;break;case _react_action_constants.mail.COMPOSE_ADDRESSING_FAILED:_=_mail_constants.NotificationIds.COMPOSE_ADDRESSING_FAILED,n={invalidAddresses:t.invalids};break;case _react_action_constants.mail.COMPOSE_RECIPIENT_LIMIT_EXCEEDED:_=_mail_constants.NotificationIds.COMPOSE_RECIPIENT_LIMIT_EXCEEDED}i({type:_mail_constants.NotificationTypes.WARNING,messageId:_,data:n})}function createComposeHandler(t,a){return function(i,_,n){n({type:t,messageId:a,data:i})}}function handleInlineImageUploadFailure(t,a,i){i({type:_mail_constants.NotificationTypes.WARNING,messageId:_mail_constants.NotificationIds.INLINE_IMAGE_LOAD_FAILURE,data:t})}function handleSend(t,a,i){i({type:_mail_constants.NotificationTypes.NORMAL,requireInteraction:!0,messageId:_mail_constants.NotificationIds.COMPOSE_SEND})}function handleSaveDraftFailure(t,a,i){i({type:_mail_constants.NotificationTypes.WARNING,messageId:_mail_constants.NotificationIds.SAVE_DRAFT_FAILURE,priority:_mail_constants.NotificationPriorities.MEDIUM})}function handleSendSuccess(t,a,i){var _=t.messageId,n=t.currentRoute,s=this;this.dispatcher.waitFor([_mail2.default,_pages2.default],function(){var t=s.dispatcher.getStore(_pages2.default),a=s.dispatcher.getStore(_mail2.default),e=a.getMessageById(_),o=s.dispatcher.getContext().config.conversations?e.conversationId:e.id,c=a.getFolderIdForAccount(_mail_constants.FolderTypes.SENT,a.getActiveAccountId()),E={fid:n.params.fid||c,mid:o};i({type:_mail_constants.NotificationTypes.NORMAL,messageId:_mail_constants.NotificationIds.COMPOSE_SEND_SUCCEEDED,data:{nextUrl:t.getURL({name:_mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST,params:E,query:n.query})}})})}exports.__esModule=!0;var _MailActions$COMPOSE_,_react_action_constants=require("../../../platform/react_action_constants"),_mail_constants=require("../../../platform/mail_constants"),_mail=require("../../mail"),_mail2=_interopRequireDefault(_mail),_pages=require("../../pages"),_pages2=_interopRequireDefault(_pages);exports.default=(_MailActions$COMPOSE_={},_MailActions$COMPOSE_[_react_action_constants.mail.COMPOSE_NO_ADDRESS_DETECTED]=handleFailure,_MailActions$COMPOSE_[_react_action_constants.mail.COMPOSE_ADDRESSING_FAILED]=handleFailure,_MailActions$COMPOSE_[_react_action_constants.mail.COMPOSE_RECIPIENT_LIMIT_EXCEEDED]=handleFailure,_MailActions$COMPOSE_[_react_action_constants.mail.SEND]=handleSend,_MailActions$COMPOSE_[_react_action_constants.mail.SEND_SUCCESS]=handleSendSuccess,_MailActions$COMPOSE_[_react_action_constants.mail.SEND_FAILURE]=createComposeHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.COMPOSE_SEND_FAILED),_MailActions$COMPOSE_[_react_action_constants.mail.INLINE_IMAGE_LOAD_FAILED]=handleInlineImageUploadFailure,_MailActions$COMPOSE_[_react_action_constants.mail.MESSAGE_SAVE_FAILED]=handleSaveDraftFailure,_MailActions$COMPOSE_[_react_action_constants.mail.SPONSORED_SAVE_TO_INBOX_FAILED]=createComposeHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.SAVE_TO_INBOX_FAILURE),_MailActions$COMPOSE_[_react_action_constants.mail.SPONSORED_SAVE_TO_INBOX_SUCCEEDED]=createComposeHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.SAVE_TO_INBOX_SUCCESS),_MailActions$COMPOSE_[_react_action_constants.mail.DELETE_DRAFT_SUCCEEDED]=createComposeHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.DELETE_DRAFT_SUCCESS),_MailActions$COMPOSE_[_react_action_constants.mail.DELETE_DRAFT_FAILED]=createComposeHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.DELETE_DRAFT_FAILURE),_MailActions$COMPOSE_[_react_action_constants.mail.GEMINI_SPONSORED_ASSET_FAILED]=createComposeHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.GEMINI_SPONSORED_ASSET_FAILED),_MailActions$COMPOSE_),module.exports=exports.default;
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/react_action_constants":"./platform/react_action_constants","../../mail":"./stores/mail","../../pages":"./stores/pages"}],334:[function(require,module,exports){
"use strict";function handleExceptionOccurred(t,a,o){o({type:_mail_constants.NotificationTypes.WARNING,messageId:_mail_constants.NotificationIds.EXCEPTION_OCCURRED,modal:!0,data:t})}exports.__esModule=!0;var _MailActions$EXCEPTIO,_react_action_constants=require("../../../platform/react_action_constants"),_mail_constants=require("../../../platform/mail_constants");exports.default=(_MailActions$EXCEPTIO={},_MailActions$EXCEPTIO[_react_action_constants.mail.EXCEPTION_OCCURRED]=handleExceptionOccurred,_MailActions$EXCEPTIO),module.exports=exports.default;
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/react_action_constants":"./platform/react_action_constants"}],335:[function(require,module,exports){
"use strict";function createFolderActionHandler(t,a){return function(_,i,n){n({type:t,messageId:a,data:{folderName:_.folder.name}})}}function handleRenameFolderSucceeded(t,a,_){_({type:_mail_constants.NotificationTypes.NORMAL,messageId:_mail_constants.NotificationIds.RENAME_FOLDER_SUCCEEDED,data:t})}function handleRenameFolderFailed(t,a,_){_({type:_mail_constants.NotificationTypes.WARNING,messageId:_mail_constants.NotificationIds.RENAME_FOLDER_FAILED,data:t})}exports.__esModule=!0;var _MailActions$RENAME_F,_react_action_constants=require("../../../platform/react_action_constants"),_mail_constants=require("../../../platform/mail_constants");exports.default=(_MailActions$RENAME_F={},_MailActions$RENAME_F[_react_action_constants.mail.RENAME_FOLDER_SUCCEEDED]=handleRenameFolderSucceeded,_MailActions$RENAME_F[_react_action_constants.mail.RENAME_FOLDER_FAILED]=handleRenameFolderFailed,_MailActions$RENAME_F[_react_action_constants.mail.CREATE_FOLDER_SUCCEEDED]=createFolderActionHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.CREATE_FOLDER_SUCCEEDED),_MailActions$RENAME_F[_react_action_constants.mail.CREATE_FOLDER_FAILED]=createFolderActionHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.CREATE_FOLDER_FAILED),_MailActions$RENAME_F[_react_action_constants.mail.DELETE_FOLDER_SUCCEEDED]=createFolderActionHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.DELETE_FOLDER_SUCCEEDED),_MailActions$RENAME_F[_react_action_constants.mail.DELETE_FOLDER_FAILED]=createFolderActionHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.DELETE_FOLDER_FAILED),_MailActions$RENAME_F[_react_action_constants.mail.MARK_READ_FOLDER_SUCCEEDED]=createFolderActionHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.MARK_READ_FOLDER_SUCCEEDED),_MailActions$RENAME_F[_react_action_constants.mail.MARK_READ_FOLDER_FAILED]=createFolderActionHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.MARK_READ_FOLDER_FAILED),_MailActions$RENAME_F[_react_action_constants.mail.ARCHIVE_FOLDER_SUCCEEDED]=createFolderActionHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.ARCHIVE_FOLDER_SUCCEEDED),_MailActions$RENAME_F[_react_action_constants.mail.ARCHIVE_FOLDER_FAILED]=createFolderActionHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.ARCHIVE_FOLDER_FAILED),_MailActions$RENAME_F[_react_action_constants.mail.CLEAR_FOLDER_SUCCEEDED]=createFolderActionHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.CLEAR_FOLDER_SUCCEEDED),_MailActions$RENAME_F[_react_action_constants.mail.CLEAR_FOLDER_FAILED]=createFolderActionHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.CLEAR_FOLDER_FAILED),_MailActions$RENAME_F),module.exports=exports.default;
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/react_action_constants":"./platform/react_action_constants"}],336:[function(require,module,exports){
"use strict";function createMessageHandler(t,_){return function(a,E,i){i({type:t,messageId:_,data:a})}}exports.__esModule=!0;var _MailActions$MESSAGES,_react_action_constants=require("../../../platform/react_action_constants"),_mail_constants=require("../../../platform/mail_constants");exports.default=(_MailActions$MESSAGES={},_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_MARK_SPAM_SUCCEEDED]=createMessageHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.MESSAGES_MARK_SPAM_SUCCEEDED),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_SUCCEEDED]=createMessageHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.MESSAGES_MARK_SPAM_SUCCEEDED),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_MARK_SPAM_FAILED]=createMessageHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.MESSAGES_MARK_SPAM_FAILED),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_FAILED]=createMessageHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.MESSAGES_MARK_SPAM_FAILED),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_SUCCEEDED]=createMessageHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.MESSAGES_MARK_NOT_SPAM_SUCCEEDED),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_SUCCEEDED]=createMessageHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.MESSAGES_MARK_NOT_SPAM_SUCCEEDED),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FAILED]=createMessageHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.MESSAGES_MARK_NOT_SPAM_FAILED),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_FAILED]=createMessageHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.MESSAGES_MARK_NOT_SPAM_FAILED),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_MOVE_SUCCEEDED]=createMessageHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.MESSAGES_MOVE_SUCCEEDED),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_SUCCEEDED]=createMessageHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.MESSAGES_MOVE_SUCCEEDED),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_MOVE_FAILED]=createMessageHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.MESSAGES_MOVE_FAILED),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_MOVE_FROM_MESSAGE_VIEW_FAILED]=createMessageHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.MESSAGES_MOVE_FAILED),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_ARCHIVE_SUCCEEDED]=createMessageHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.ARCHIVE_MESSAGES_SUCCESS),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_SUCCEEDED]=createMessageHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.ARCHIVE_MESSAGES_SUCCESS),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_ARCHIVE_FAILED]=createMessageHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.ARCHIVE_MESSAGES_FAILURE),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_FAILED]=createMessageHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.ARCHIVE_MESSAGES_FAILURE),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_RESTORE_SUCCEEDED]=createMessageHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.RESTORE_INBOX_MESSAGES_SUCCESS),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_SUCCEEDED]=createMessageHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.RESTORE_INBOX_MESSAGES_SUCCESS),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_RESTORE_FAILED]=createMessageHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.RESTORE_INBOX_MESSAGES_FAILURE),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_FAILED]=createMessageHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.RESTORE_INBOX_MESSAGES_FAILURE),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_DELETE_SUCCEEDED]=createMessageHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.DELETE_MESSAGES_SUCCESS),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_SUCCEEDED]=createMessageHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.DELETE_MESSAGES_SUCCESS),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_DELETE_FAILED]=createMessageHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.DELETE_MESSAGES_FAILURE),_MailActions$MESSAGES[_react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_FAILED]=createMessageHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.DELETE_MESSAGES_FAILURE),_MailActions$MESSAGES[_react_action_constants.mail.UNDO_MOVE_SUCCEEDED]=createMessageHandler(_mail_constants.NotificationTypes.NORMAL,_mail_constants.NotificationIds.UNDO_MOVE_SUCCESS),_MailActions$MESSAGES[_react_action_constants.mail.UNDO_MOVE_FAILED]=createMessageHandler(_mail_constants.NotificationTypes.WARNING,_mail_constants.NotificationIds.UNDO_MOVE_FAILURE),_MailActions$MESSAGES),module.exports=exports.default;
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/react_action_constants":"./platform/react_action_constants"}],337:[function(require,module,exports){
"use strict";function handleOfflineOnline(t,i,n){if(t.online===!1)n({icon:_fuji_icon.Kinds.NO_INTERNET,type:_mail_constants.NotificationTypes.WARNING,messageId:_mail_constants.NotificationIds.OFFLINE,data:t,sticky:!0,requireInteraction:!0,priority:_mail_constants.NotificationPriorities.HIGH});else{var a=this.get();a&&a.messageId===_mail_constants.NotificationIds.OFFLINE&&this.remove()}}exports.__esModule=!0;var _MailActions$ONLINE_S,_react_action_constants=require("../../../platform/react_action_constants"),_mail_constants=require("../../../platform/mail_constants"),_fuji_icon=require("../../../atoms/constants/fuji_icon");exports.default=(_MailActions$ONLINE_S={},_MailActions$ONLINE_S[_react_action_constants.mail.ONLINE_STATUS_CHANGED]=handleOfflineOnline,_MailActions$ONLINE_S),module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/react_action_constants":"./platform/react_action_constants"}],338:[function(require,module,exports){
"use strict";function settingsFilterSaved(t,a,i){i({type:_mail_constants.NotificationTypes.NORMAL,messageId:_mail_constants.NotificationIds.SETTINGS_SAVE_FILTERS_SUCCEEDED})}function settingsVacationResponseSaved(t,a,i){i({type:_mail_constants.NotificationTypes.NORMAL,messageId:_mail_constants.NotificationIds.SETTINGS_SAVE_VACATION_PREFERENCES_SUCCEEDED})}function resendConfirmEmailSucceed(t,a,i){i({type:_mail_constants.NotificationTypes.NORMAL,messageId:_mail_constants.NotificationIds.RESEND_CONFIRM_EMAIL_SUCCEEDED})}function resendConfirmEmailFailed(t,a,i){i({type:_mail_constants.NotificationTypes,messageId:_mail_constants.NotificationIds.RESEND_CONFIRM_EMAIL_FAILED})}function accountReauthSucceed(t,a,i){i({type:_mail_constants.NotificationTypes.NORMAL,messageId:_mail_constants.NotificationIds.REAUTH_ACCOUNT_SUCCEEDED})}function accountReauthFailed(t,a,i){i({type:_mail_constants.NotificationTypes.WARNING,messageId:_mail_constants.NotificationIds.REAUTH_ACCOUNT_FAILED,data:{error:t.error,email:t.email,provider:t.provider}})}exports.__esModule=!0;var _MailActions$SETTINGS,_react_action_constants=require("../../../platform/react_action_constants"),_mail_constants=require("../../../platform/mail_constants");exports.default=(_MailActions$SETTINGS={},_MailActions$SETTINGS[_react_action_constants.mail.SETTINGS_SAVE_FILTERS_SUCCEEDED]=settingsFilterSaved,_MailActions$SETTINGS[_react_action_constants.mail.SETTINGS_SAVE_VACATION_PREFERENCES_SUCCEEDED]=settingsVacationResponseSaved,_MailActions$SETTINGS[_react_action_constants.mail.CONFIRM_EMAIL_RESEND_SUCCEEDED]=resendConfirmEmailSucceed,_MailActions$SETTINGS[_react_action_constants.mail.CONFIRM_EMAIL_RESEND_FAILED]=resendConfirmEmailFailed,_MailActions$SETTINGS[_react_action_constants.mail.ACCOUNT_REAUTH_SUCCEEDED]=accountReauthSucceed,_MailActions$SETTINGS[_react_action_constants.mail.ACCOUNT_REAUTH_FAILED]=accountReauthFailed,_MailActions$SETTINGS),module.exports=exports.default;
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/react_action_constants":"./platform/react_action_constants"}],339:[function(require,module,exports){
"use strict";function handleTimezoneChangeRequested(t,a,i){i({icon:_fuji_icon.Kinds.CLOCK,type:_mail_constants.NotificationTypes.ADVISORY,messageId:_mail_constants.NotificationIds.TIMEZONE_CHANGE_REQUESTED,data:t,sticky:!0,requireInteraction:!0,modal:!0})}function removeTimezoneNotification(){var t=this.get();t&&t.messageId===_mail_constants.NotificationIds.TIMEZONE_CHANGE_REQUESTED&&this.remove()}function handleRouteChange(t){var a=t.route;a.name===_mail_constants.RouteNames.SETTINGS&&a.params&&a.params.settingsGroupId===_mail_constants.SettingsTab.VIEWING_EMAIL&&removeTimezoneNotification.call(this)}exports.__esModule=!0;var _MailActions$TIMEZONE,_react_action_constants=require("../../../platform/react_action_constants"),_mail_constants=require("../../../platform/mail_constants"),_fuji_icon=require("../../../atoms/constants/fuji_icon");exports.default=(_MailActions$TIMEZONE={},_MailActions$TIMEZONE[_react_action_constants.mail.TIMEZONE_CHANGE_DETECTED]=handleTimezoneChangeRequested,_MailActions$TIMEZONE[_react_action_constants.mail.OPEN_PAGE_REQUESTED]=handleRouteChange,_MailActions$TIMEZONE[_react_action_constants.mail.PREFERRED_TIMEZONE_CHANGE_REJECTED]=removeTimezoneNotification,_MailActions$TIMEZONE),module.exports=exports.default;
},{"../../../atoms/constants/fuji_icon":"./atoms/constants/fuji_icon","../../../platform/mail_constants":"./platform/mail_constants","../../../platform/react_action_constants":"./platform/react_action_constants"}],340:[function(require,module,exports){
"use strict";function unsubscribeMultipleListsCleaned(t,i,s){s({type:_mail_constants.NotificationTypes.NORMAL,messageId:_mail_constants.NotificationIds.UNSUBSCRIBE_MULTIPLE_LISTS_CLEANED,priority:2})}function unsubscribeSingleListCleaned(t,i,s){s({type:_mail_constants.NotificationTypes.NORMAL,messageId:_mail_constants.NotificationIds.UNSUBSCRIBE_SINGLE_LIST_CLEANED,priority:2})}function unsubscribeDialogClosed(t,i,s){s({type:_mail_constants.NotificationTypes.NORMAL,messageId:_mail_constants.NotificationIds.UNSUBSCRIBE_DIALOG_CLOSED,priority:2})}exports.__esModule=!0;var _MailActions$UNSUBSCR,_react_action_constants=require("../../../platform/react_action_constants"),_mail_constants=require("../../../platform/mail_constants");exports.default=(_MailActions$UNSUBSCR={},_MailActions$UNSUBSCR[_react_action_constants.mail.UNSUBSCRIBE_MULTIPLE_LISTS_CLEANED]=unsubscribeMultipleListsCleaned,_MailActions$UNSUBSCR[_react_action_constants.mail.UNSUBSCRIBE_SINGLE_LIST_CLEANED]=unsubscribeSingleListCleaned,_MailActions$UNSUBSCR[_react_action_constants.mail.UNSUBSCRIBE_DIALOG_CLOSED]=unsubscribeDialogClosed,_MailActions$UNSUBSCR),module.exports=exports.default;
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/react_action_constants":"./platform/react_action_constants"}],341:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),_invariant=require("../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_compose=require("./handlers/compose"),_compose2=_interopRequireDefault(_compose),_exception=require("./handlers/exception"),_exception2=_interopRequireDefault(_exception),_message=require("./handlers/message"),_message2=_interopRequireDefault(_message),_folder=require("./handlers/folder"),_folder2=_interopRequireDefault(_folder),_timezone=require("./handlers/timezone"),_timezone2=_interopRequireDefault(_timezone),_offline=require("./handlers/offline"),_offline2=_interopRequireDefault(_offline),_async=require("./handlers/async"),_async2=_interopRequireDefault(_async),_react_action_constants=require("../../platform/react_action_constants"),_settings=require("./handlers/settings"),_settings2=_interopRequireDefault(_settings),_unsubscribe=require("./handlers/unsubscribe"),_unsubscribe2=_interopRequireDefault(_unsubscribe),_mail_constants=require("../../platform/mail_constants"),staticActionNameToHandler={},NotificationStore=function(e){function t(i){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,e.call(this,i));return o._notification=null,o._timeout=null,o._defaultTTL=Number(i.getContext().config.notificationTTL),o}return _inherits(t,e),t.prototype.get=function(){return this._notification},t.prototype.remove=function(){this._notification&&(this._notification=null,clearTimeout(this._timeout),this.emitChange())},t.prototype.set=function(e){var t=this;if((0,_invariant2.default)(e.messageId,"`messageId` is a required field when setting a notification."),e.priority||(e.priority=_mail_constants.NotificationPriorities.LOW),this._notification){if(e.priority<this._notification.priority)return;clearTimeout(this._timeout)}this._notification=e,this._defaultTTL>=0&&!e.requireInteraction&&(this._timeout=setTimeout(function(){return t.remove()},this._defaultTTL)),this.emitChange()},t.prototype._callHandler=function(e,t){var i=staticActionNameToHandler[t];if("function"!=typeof i)throw new Error("Handler for `"+t+"` is not a function");i.call(this,e,t,this.set.bind(this))},t}(_BaseStore3.default);NotificationStore.storeName="NotificationStore",NotificationStore.handlers={},NotificationStore.setHandlers=function(e){Object.keys(e).forEach(function(t){staticActionNameToHandler[t]=e[t],NotificationStore.handlers[t]="_callHandler"})},NotificationStore.setHandlers(_compose2.default),NotificationStore.setHandlers(_exception2.default),NotificationStore.setHandlers(_folder2.default),NotificationStore.setHandlers(_timezone2.default),NotificationStore.setHandlers(_message2.default),NotificationStore.setHandlers(_async2.default),NotificationStore.setHandlers(_settings2.default),NotificationStore.setHandlers(_offline2.default),NotificationStore.setHandlers(_unsubscribe2.default),NotificationStore.handlers[_react_action_constants.mail.NOTIFICATION_CLOSED]="remove",exports.default=NotificationStore,module.exports=exports.default;
},{"../../platform/invariant":"./platform/invariant","../../platform/mail_constants":"./platform/mail_constants","../../platform/react_action_constants":"./platform/react_action_constants","./handlers/async":332,"./handlers/compose":333,"./handlers/exception":334,"./handlers/folder":335,"./handlers/message":336,"./handlers/offline":337,"./handlers/settings":338,"./handlers/timezone":339,"./handlers/unsubscribe":340,"fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],"./stores/pages/collections/multi_task":[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _REUSABLE_ACTIVE_ROUT,_SINGLETON_ROUTES,_route=require("../../../platform/utils/route"),_mail_constants=require("../../../platform/mail_constants"),REUSABLE_ACTIVE_ROUTES=(_REUSABLE_ACTIVE_ROUT={},_REUSABLE_ACTIVE_ROUT[_mail_constants.RouteNames.SEARCH]=!0,_REUSABLE_ACTIVE_ROUT),SINGLETON_ROUTES=(_SINGLETON_ROUTES={},_SINGLETON_ROUTES[_mail_constants.RouteNames.SETTINGS]=!0,_SINGLETON_ROUTES),MultiTaskPagesCollection=function(){function t(e){_classCallCheck(this,t),this._defaultRoute=e,this._pageRoutes=[e],this._activeIdx=0,this._nextPage=null}return t.prototype.addInitialPageRoute=function(t){this.addPage(this.createNextPage(t))},t.prototype.replaceInitialPageRoute=function(t){this._pageRoutes.length=1,this._activeIdx=0,this.addInitialPageRoute(t)},t.prototype.addPage=function(t){var e=t.route,i=t.replacePage;if(e.name===this._defaultRoute.name)this._pageRoutes[0]=e,this._activeIdx=0;else{var o=this._findRouteIndex(e);if(o>-1)this._activeIdx=o;else{if(SINGLETON_ROUTES[e.name]){var a=this._findRouteIndexByName(e.name);if(a>-1)return this._pageRoutes[a]=e,void(this._activeIdx=a)}else if(REUSABLE_ACTIVE_ROUTES[e.name]&&this._getActivePage().route.name===e.name||i)return void(this._pageRoutes[this._activeIdx]=e);this._pageRoutes[this._pageRoutes.length]=e,this._activeIdx=this._pageRoutes.length-1}}},t.prototype._findRouteIndex=function(t){return this._pageRoutes.findIndex(function(e){return(0,_route.routesEqual)(e,t)})},t.prototype._findRouteIndexByName=function(t){return this._pageRoutes.findIndex(function(e){return e.name===t})},t.prototype.setActivePage=function(t,e){t?this.addPage(t):this.addPage(this.createNextPage(e))},t.prototype.closeActivePage=function(){return this._removeFromList(this._activeIdx)},t.prototype.createNextPage=function(t,e){return{route:t,replacePage:e}},t.prototype.validatePages=function(t){for(var e=null,i=this._pageRoutes.length-1;i>=0;i--)t(this._pageRoutes[i])||(e=this._removeFromList(i)||e);return e},t.prototype.closePage=function(t){return this._removeFromList(this._findRouteIndex(t.route))},t.prototype.closeAllPages=function(){return this._pageRoutes.length=1,this.setActivePage(null,this._pageRoutes[0]),this._getActivePage()},t.prototype._getActivePage=function(){return{route:this._pageRoutes[this._activeIdx]}},t.prototype._findSearchRoute=function(t){return this._findRouteIndex({name:_mail_constants.RouteNames.SEARCH,params:{query:t}})},t.prototype._removeFromListHelper=function(t){if(0===t)return void this._pageRoutes.splice(t,1,this._defaultRoute);var e=this._pageRoutes[t],i=-1;this._activeIdx===t&&e.name===_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST&&(i=this._findSearchRoute(e.params.query))!==-1&&(this._activeIdx=i),this._activeIdx===t?this._activeIdx=0:this._activeIdx<t||(this._activeIdx-=1),this._pageRoutes.splice(t,1)},t.prototype._removeFromList=function(t){if(t<0)return null;var e=this._pageRoutes[this._activeIdx];return this._removeFromListHelper(t),(0,_route.routesEqual)(e,this._pageRoutes[this._activeIdx])?null:this._getActivePage()},t.prototype.getDefaultRoute=function(){return this._defaultRoute},t.prototype.pushPageToFront=function(t){var e=t.route,i=this._findRouteIndex(e);this._removeFromList(i),REUSABLE_ACTIVE_ROUTES[e.name]&&e.name!==this._defaultRoute.name?(this._pageRoutes[this._pageRoutes.length]=e,this._activeIdx=this._pageRoutes.length-1):this.addPage(t)},t.prototype.getPageRoutes=function(){return this._pageRoutes.slice(0)},t.prototype.rehydrate=function(t){this._pageRoutes=t.pageRoutes,this._defaultRoute=t.defaultRoute,this._activeIdx=t.activeIdx},t.prototype.dehydrate=function(){return{activeIdx:this._activeIdx,defaultRoute:this._defaultRoute,pageRoutes:this._pageRoutes}},t}();exports.default=MultiTaskPagesCollection,module.exports=exports.default;
},{"../../../platform/mail_constants":"./platform/mail_constants","../../../platform/utils/route":"./platform/utils/route"}],"./stores/pages/collections/single_task":[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var OPEN_PAGE_ACTION="OPEN_PAGE_ACTION",CLOSE_PAGE_ACTION="CLOSE_PAGE_ACTION",REPLACE_PAGE_ACTION="REPLACE_PAGE_ACTION",SingleTaskPagesCollection=function(){function t(e){_classCallCheck(this,t),this._defaultRoute=e,this._pageRoutes=[],this._activeIdx=-1}return t.prototype.getDefaultRoute=function(){return this._defaultRoute},t.prototype.closeActivePage=function(){if(this._activeIdx<1)return{route:this._defaultRoute,metadata:{idx:0,type:CLOSE_PAGE_ACTION}};var t=this._activeIdx-1;return{route:this._pageRoutes[t],metadata:{idx:t,type:CLOSE_PAGE_ACTION}}},t.prototype.createNextPage=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{route:t,metadata:{idx:this._activeIdx+(e?0:1),type:e?REPLACE_PAGE_ACTION:OPEN_PAGE_ACTION}}},t.prototype.addInitialPageRoute=function(t){this.addPage({route:t,metadata:{idx:0,type:OPEN_PAGE_ACTION}})},t.prototype.replaceInitialPageRoute=function(t){this.addPage({route:t,metadata:{idx:0,type:REPLACE_PAGE_ACTION}})},t.prototype.addPage=function(t){var e=t.route,a=t.metadata,i=a.type,o=a.idx;i===OPEN_PAGE_ACTION?(this._activeIdx<this._pageRoutes.length-1&&this._pageRoutes.splice(this._activeIdx+1),this._pageRoutes.push(e)):i===REPLACE_PAGE_ACTION&&(t.metadata.type=OPEN_PAGE_ACTION,this._pageRoutes.splice(this._activeIdx,1,e)),this._activeIdx=o},t.prototype.validatePages=function(t){return t(this._pageRoutes[this._activeIdx])?null:this.closeActivePage()},t.prototype.setActivePage=function(t){t?this._activeIdx=t.metadata.idx:this._activeIdx=0},t.prototype.dehydrate=function(){return{pageRoutes:this._pageRoutes,activeIdx:this._activeIdx,defaultRoute:this._defaultRoute}},t.prototype.rehydrate=function(t){this._pageRoutes=t.pageRoutes,this._activeIdx=t.activeIdx,this._defaultRoute=t.defaultRoute},t}();exports.default=SingleTaskPagesCollection,module.exports=exports.default;
},{}],"./stores/pages":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _PageStore$handlers,_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),_BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),_fluxibleRouter=require("fluxible-router"),_mail_constants=require("../../platform/mail_constants"),_route=require("../../platform/utils/route"),_react_action_constants=require("../../platform/react_action_constants"),_list=require("../../platform/utils/list"),_invariant=require("../../platform/invariant"),_invariant2=_interopRequireDefault(_invariant),_utils=require("../../apps/mail/controller_views/utils"),_single_task=require("./collections/single_task"),_single_task2=_interopRequireDefault(_single_task),_multi_task=require("./collections/multi_task"),_multi_task2=_interopRequireDefault(_multi_task),_mail=require("../mail"),_mail2=_interopRequireDefault(_mail),_user_preferences=require("../user_preferences"),_user_preferences2=_interopRequireDefault(_user_preferences),_application=require("../application"),_application2=_interopRequireDefault(_application),_logger=require("../../platform/logger"),_logger2=_interopRequireDefault(_logger),PageStore=function(e){function t(a){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,e.call(this,a));return o._nextPage=null,o._multiTaskPagesCollection=new _multi_task2.default(_mail_constants.MAIL_DEFAULT_ROUTE),o._singleTaskPagesCollection=new _single_task2.default(_mail_constants.MAIL_DEFAULT_ROUTE),o._folderRouteSortOrder=_mail_constants.SortOrder.DATE_DESC,o._routeStore=o.dispatcher.getStore(_fluxibleRouter.RouteStore),o._userPreferenceStore=o.dispatcher.getStore(_user_preferences2.default),o}return _inherits(t,e),t.prototype._initialize=function(){var e=this,t=this._routeStore.getCurrentRoute(),a=(0,_list.getSortOrderFromListId)((0,_list.getListIdFromRoute)(t));t.name!==_mail_constants.RouteNames.FOLDER&&t.name!==_mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST||!a||(this._folderRouteSortOrder=a),t.name===_mail_constants.RouteNames.BASE&&this.dispatcher.waitFor(_mail2.default,function(){e.launchOverrideUrl=e.getURL({name:_mail_constants.RouteNames.FOLDER,params:{fid:e.dispatcher.getStore(_mail2.default).getDefaultFolderId()},query:t.query})}),t.name===_mail_constants.RouteNames.NEW_DRAFT&&(this.launchOverrideUrl=t.url)},t.prototype._pageAdded=function(e){var t=this,a=e.url,o=e.type,r=e.page;this.dispatcher.waitFor([_fluxibleRouter.RouteStore],function(){if(t._setNextPage(null),"pageload"===o)t._pagesCollection.replaceInitialPageRoute(t._routeStore.getRoute(a));else if("popstate"===o)t._pagesCollection.setActivePage(r,t._routeStore.getRoute(a));else if(t.dispatcher.getStore(_application2.default).hasSuccessfullyInitialized())t._pagesCollection.addPage(r);else{var e=t._routeStore.getRoute(a);t._multiTaskPagesCollection.addInitialPageRoute(e),t._singleTaskPagesCollection.addInitialPageRoute(e)}t.emitChange()})},t.prototype._openPageRequested=function(e){var t=e.route,a=e.force,o=void 0!==a&&a,r=e.replacePage;if(t.name===_mail_constants.RouteNames.FOLDER){var s=(0,_list.getListIdFromRoute)(t);t={name:_mail_constants.RouteNames.FOLDER,params:{fid:(0,_list.serializeListIdForFolderRoute)((0,_list.recreateListId)(s,{sortOrder:this._folderRouteSortOrder}))},query:t.query}}this._setNextPage(this._pagesCollection.createNextPage(t,r),o),this.emitChange()},t.prototype._reorderPageRequested=function(e){var t=e.route;(0,_invariant2.default)(this.isMultiTaskMode,"Cannot change page order in single task mode"),this._pagesCollection.pushPageToFront({route:t}),this._openPageRequested({route:t})},t.prototype._changeMultiTaskMode=function(e){var t=this,a=e.value;this.dispatcher.waitFor(_user_preferences2.default,function(){if(a){var e=t._routeStore.getCurrentRoute();t._pagesCollection.addPage({route:e}),t.emitChange()}})},t.prototype.getNextPage=function(){return this._nextPage},t.prototype.getDefaultRoute=function(){return this._pagesCollection.getDefaultRoute()},t.prototype._closePageRequested=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.route,a=void 0;if(this.isMultiTaskMode&&t)a=this._pagesCollection.closePage({route:t});else{if(!this.isMultiTaskMode&&t)throw new Error("Cannot close specific page in single task mode");a=this._pagesCollection.closeActivePage()}this._setNextPage(a),this.emitChange()},t.prototype._closeAllPagesRequested=function(){this._setNextPage(this._pagesCollection.closeAllPages()),this.emitChange()},t.prototype._setNextPage=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return void(this._nextPage=null);if(t||!(0,_route.routesEqual)(this._routeStore.getCurrentRoute(),e.route)){if(this._nextPage){if((0,_route.routesEqual)(this._nextPage.route,e.route))return;if(!this._routeStore._currentNavigate.isComplete)return void _logger2.default.error("page_store/_setNextPage",{error:'Cannot open a new page before the previous "page open" operation was handled',action:"_nextpage"});throw new Error('Cannot open a new page before the previous "page open" operation was handled')}this._nextPage=this._addQueryParams(e)}},t.prototype._addQueryParams=function(e){var t=this._routeStore.getCurrentRoute();if(t.query){var a=(0,_route.filterQueryParams)(t);e.route.query=_extends({},a,e.route.query)}return e},t.prototype._sortOrderChangeRequested=function(e){var t=e.sortOrder,a=this._routeStore.getCurrentRoute();a.name!==_mail_constants.RouteNames.FOLDER&&a.name!==_mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST||!t||(this._folderRouteSortOrder=t)},t.prototype.getSortOrderForFolderRoute=function(){return this._folderRouteSortOrder},t.prototype.getActivePageRoute=function(){var e=this._routeStore.getCurrentRoute();return e.name===_mail_constants.RouteNames.BASE?{name:_mail_constants.RouteNames.FOLDER,params:{fid:this.dispatcher.getStore(_mail2.default).getDefaultFolderId()},query:e.query}:e},t.prototype._openNewDraftRequested=function(e){var t=e.csid;this._openPageRequested({route:{name:_mail_constants.RouteNames.NEW_DRAFT,params:{csid:t}}})},t.prototype._openDraftRequested=function(e){var t=this,a=e.csid,o=!this.dispatcher.getContext().config.conversations;o&&this.dispatcher.waitFor([_mail2.default],function(){t._openPageRequested({route:{name:_mail_constants.RouteNames.NEW_DRAFT,params:{csid:a}}})})},t.prototype._activeFolderDeleteRequested=function(e){var t=e.defaultFolderId;this._openPageRequested({route:{name:_mail_constants.RouteNames.FOLDER,params:{fid:t}}})},t.prototype._openAttachmentPreview=function(e){var t=e.groupId,a=e.fullScreenMode,o=this.getActivePageRoute(),r=(0,_list.getListIdFromRoute)(o);if(!a)switch(o.name){case _mail_constants.RouteNames.FOLDER:this._openPageRequested({route:{name:_mail_constants.RouteNames.MESSAGE_FROM_FOLDER_LIST,params:{mid:t,fid:(0,_list.getFolderIdFromListId)(r)}}});break;case _mail_constants.RouteNames.SEARCH:this._openMessageGroupRequested({listId:r,itemId:t,replacePage:!1})}},t.prototype._openMessageGroupRequested=function(e){var t=e.listId,a=e.itemId,o=e.replacePage,r=this.dispatcher.getContext().config.conversations,s=this._routeStore.getCurrentRoute().name===_mail_constants.RouteNames.SEARCH||this._routeStore.getCurrentRoute().name===_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST,n=this.dispatcher.getStore(_mail2.default),i=n.getItem(a,t);this._openPageRequested({route:(0,_utils.getMessageGroupViewRoute)({item:i,listId:t,isSearch:s,isConversationMode:r}),replacePage:o})},t.prototype.getURL=function(e){var t=e.name,a=e.params,o=e.query;return this._routeStore.makePath(t,a,o)},t.prototype._validatePages=function(){var e=this,t=[].concat(Array.prototype.slice.call(arguments)).pop();this.dispatcher.waitFor([_mail2.default],function(){e._setNextPage(e._pagesCollection.validatePages(function(a){return e._isValidRoute(a,t)})),e.emitChange()})},t.prototype._isValidRoute=function(e,t){var a=this.dispatcher.getStore(_mail2.default),o=(0,_list.getListIdFromRoute)(e),r=(0,_list.getFolderIdFromListId)(o),s=e.params||{},n=s.mid,i=s.csid,_="page_store/invalid_route";if(r&&!a.getFolder(decodeURIComponent(r)))return _logger2.default.info(_,{reason:"FOLDER_NOT_PRESENT",action:t,routeURL:this.getURL(e)}),!1;if(e.name===_mail_constants.RouteNames.EDIT_DRAFT||i){var l=decodeURIComponent(i);if(n){var u=decodeURIComponent(n);if(a.getMessageMetaRecordState(u)===_mail_constants.RecordStates.DOES_NOT_EXIST)return _logger2.default.info(_,{action:t,reason:"MESSAGE_ID_DOES_NOT_MATCH_DRAFT",routeURL:this.getURL(e)}),!1;l=a.getCsidByMessageId(u)}if(a.getComposeDataState(l)===_mail_constants.RecordStates.ERROR)return!0;if(a.getComposeDataState(l)===_mail_constants.RecordStates.DOES_NOT_EXIST||a.getDraftStatus(l)===_mail_constants.Draft.Status.SENT)return _logger2.default.info(_,{action:t,reason:"MESSAGE_NOT_PRESENT_FOR_DRAFT",routeURL:this.getURL(e)}),!1}else if(n){if(a.getMessageGroupState(n)===_mail_constants.RecordStates.DOES_NOT_EXIST)return _logger2.default.info(_,{action:t,reason:"GROUP_DOES_NOT_EXIST",routeURL:this.getURL(e)}),!1;var c=(0,_list.getSortOrderFromListId)(o);if(c!==_mail_constants.SortOrder.UNREAD&&c!==_mail_constants.SortOrder.STARRED&&c!==_mail_constants.SortOrder.SUBJECT&&e.name!==_mail_constants.RouteNames.MESSAGE_FROM_SEARCH_LIST&&(a.getRecordState(o)===_mail_constants.RecordStates.LOADED||a.getRecordState(o)===_mail_constants.RecordStates.REFRESHING)&&!a.isItemInList(o,n))return _logger2.default.info(_,{action:t,reason:"GROUP_NOT_PRESENT_IN_LIST",routeURL:this.getURL(e)}),!1}return!0},t.prototype.getPageRoutes=function(){var e=this;return this._pagesCollection.getPageRoutes().filter(function(t){return e._isValidRoute(t)})},t.prototype.dehydrate=function(){return{launchOverrideUrl:this.launchOverrideUrl,pagesCollection:this._pagesCollection.dehydrate()}},t.prototype.rehydrate=function(e){this._pagesCollection.rehydrate(e.pagesCollection)},_createClass(t,[{key:"isMultiTaskMode",get:function(){return this._userPreferenceStore.getMultiTaskModeSetting()}},{key:"_pagesCollection",get:function(){return this.isMultiTaskMode?this._multiTaskPagesCollection:this._singleTaskPagesCollection}}]),t}(_BaseStore3.default);PageStore.storeName="PageStore",PageStore.handlers=(_PageStore$handlers={},_PageStore$handlers[_react_action_constants.mail.MULTI_TASKING_PREF_CHANGE_REQUESTED]="_changeMultiTaskMode",_PageStore$handlers[_react_action_constants.mail.OPEN_PAGE_REQUESTED]="_openPageRequested",_PageStore$handlers[_react_action_constants.mail.CLOSE_PAGE_REQUESTED]="_closePageRequested",_PageStore$handlers[_react_action_constants.mail.CLOSE_ALL_PAGES_REQUESTED]="_closeAllPagesRequested",_PageStore$handlers[_react_action_constants.mail.REORDER_PAGE_REQUESTED]="_reorderPageRequested",_PageStore$handlers[_react_action_constants.mail.ATTACHMENT_PREVIEW_OPENED]="_openAttachmentPreview",_PageStore$handlers[_react_action_constants.mail.NAVIGATE_TO_SPONSORED_FORWARD_REQUESTED]="_openNewDraftRequested",_PageStore$handlers[_react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED]="_openDraftRequested",_PageStore$handlers[_react_action_constants.mail.DELETE_ACTIVE_FOLDER_REQUESTED]="_activeFolderDeleteRequested",_PageStore$handlers[_react_action_constants.mail.LIST_SORT_ORDER_CHANGE_REQUESTED]="_sortOrderChangeRequested",_PageStore$handlers[_react_action_constants.mail.SPONSORED_SAVE_TO_INBOX_SUCCEEDED]="_closePageRequested",_PageStore$handlers[_react_action_constants.mail.DELETE_DRAFT_REQUESTED]="_validatePages",_PageStore$handlers[_react_action_constants.mail.MESSAGES_DELETE_REQUESTED]="_validatePages",_PageStore$handlers[_react_action_constants.mail.MESSAGES_MOVE_REQUESTED]="_validatePages",_PageStore$handlers[_react_action_constants.mail.MESSAGES_MARK_SPAM_REQUESTED]="_validatePages",_PageStore$handlers[_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_REQUESTED]="_validatePages",_PageStore$handlers[_react_action_constants.mail.MESSAGES_ARCHIVE_REQUESTED]="_validatePages",_PageStore$handlers[_react_action_constants.mail.MESSAGES_RESTORE_REQUESTED]="_validatePages",_PageStore$handlers[_react_action_constants.mail.DELETE_ACTIVE_FOLDER_REQUESTED]="_validatePages",_PageStore$handlers[_react_action_constants.mail.DELETE_FOLDER_SUCCEEDED]="_validatePages",_PageStore$handlers[_react_action_constants.mail.DELETE_DRAFT_REQUESTED]="_validatePages",_PageStore$handlers[_react_action_constants.mail.AUTO_CHECK_MAIL_RECEIVED]="_validatePages",_PageStore$handlers[_react_action_constants.mail.CHANGE_FOLDER_SUCCEEDED]="_validatePages",_PageStore$handlers[_react_action_constants.mail.SEND_SUCCESS]="_validatePages",_PageStore$handlers[_react_action_constants.mail.INITIAL_STATE]="_initialize",_PageStore$handlers.NAVIGATE_START="_pageAdded",_PageStore$handlers),exports.default=PageStore,module.exports=exports.default;
},{"../../apps/mail/controller_views/utils":"./apps/mail/controller_views/utils","../../platform/invariant":"./platform/invariant","../../platform/logger":"./platform/logger","../../platform/mail_constants":"./platform/mail_constants","../../platform/react_action_constants":"./platform/react_action_constants","../../platform/utils/list":"./platform/utils/list","../../platform/utils/route":"./platform/utils/route","../application":"./stores/application","../mail":"./stores/mail","../user_preferences":"./stores/user_preferences","./collections/multi_task":"./stores/pages/collections/multi_task","./collections/single_task":"./stores/pages/collections/single_task","fluxible-router":"./node_modules/fluxible-router/index.js","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],342:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _RumStore$handlers,_react_action_constants=require("../platform/react_action_constants"),_BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),RumStore=function(t){function e(_){_classCallCheck(this,e);var r=_possibleConstructorReturn(this,t.call(this,_));return r.payload={},r.action="",r.startTimer=0,r}return _inherits(e,t),e.prototype.getData=function(){return{action:this.action,payload:this.payload,startTimer:this.startTimer}},e.prototype._handleEndTimes=function(t,e){this.payload=t,this.action=e,this.emitChange()},e.prototype._setStartTimer=function(t,e){this.action=e,this.payload=t,this.startTimer=Date.now()},e.prototype._resetStartTimer=function(t,e){this.action=e,this.payload=t,this.startTimer=0},e}(_BaseStore3.default);RumStore.storeName="RumStore",RumStore.handlers=(_RumStore$handlers={},_RumStore$handlers[_react_action_constants.mail.OPEN_PAGE_REQUESTED]="_setStartTimer",_RumStore$handlers[_react_action_constants.mail.SEND]="_setStartTimer",_RumStore$handlers[_react_action_constants.mail.PREVIEW_MESSAGE_REQUESTED]="_setStartTimer",_RumStore$handlers[_react_action_constants.mail.MESSAGE_GROUP_OPENED]="_handleEndTimes",_RumStore$handlers[_react_action_constants.mail.MESSAGE_BODIES_OPEN_GROUP_RECEIVED]="_handleEndTimes",_RumStore$handlers[_react_action_constants.mail.COMPOSE_OPENED]="_handleEndTimes",_RumStore$handlers[_react_action_constants.mail.SEND_SUCCESS]="_handleEndTimes",_RumStore$handlers[_react_action_constants.mail.CLOSE_PAGE_REQUESTED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.AUTO_CHECK_MAIL_REQUESTED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.MESSAGES_DELETE_FROM_MESSAGE_VIEW_REQUESTED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.APPLICATION_VISIBILITY_DID_CHANGE]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.MESSAGE_LIST_TOOLBAR_MENU_SHOWN]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.MESSAGES_ARCHIVE_FROM_MESSAGE_VIEW_REQUESTED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.MESSAGES_RESTORE_FROM_MESSAGE_VIEW_REQUESTED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.MESSAGES_MARK_NOT_SPAM_FROM_MESSAGE_VIEW_REQUESTED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.MESSAGES_MARK_SPAM_FROM_MESSAGE_VIEW_REQUESTED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.MESSAGE_CARD_EXPANSION_CHANGED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.MESSAGE_REPLY_REPLY_ALL_FORWARD_REQUESTED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.WINDOW_RESIZED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.SETTINGS_MENU_REQUESTED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.ITEM_LIST_PAGE_SCROLLED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.MESSAGES_DELETE_REQUESTED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.PREVIEW_MESSAGE_CLOSED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.SEARCH_LIST_ITEMS_RECEIVED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.MORE_SEARCH_LIST_ITEMS_REQUESTED]="_resetStartTimer",_RumStore$handlers[_react_action_constants.mail.SEARCH_LIST_ITEMS_BLOCK_RECEIVED]="_handleEndTimes",_RumStore$handlers.NAVIGATE_SUCCESS="_handleEndTimes",_RumStore$handlers),exports.default=RumStore,module.exports=exports.default;
},{"../platform/react_action_constants":"./platform/react_action_constants","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],"./stores/suggestions":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _SuggestionStore$hand,_react_action_constants=require("../platform/react_action_constants"),_BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),SuggestionStore=function(t){function e(o){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,o));return n.suggestions={},n.importantContacts=[],n}return _inherits(e,t),e.prototype.setSuggestions=function(t){var e=t.query,o=t.suggestions;this.suggestions[e]=o,this.emitChange()},e.prototype.getSuggestions=function(){return this.suggestions},e.prototype.setImportantContacts=function(t){var e=t.contacts;this.importantContacts=e,this.emitChange()},e.prototype.getImportantContacts=function(){return this.importantContacts},e}(_BaseStore3.default);SuggestionStore.storeName="SuggestionStore",SuggestionStore.handlers=(_SuggestionStore$hand={},_SuggestionStore$hand[_react_action_constants.mail.SUGGESTIONS_RECEIVED]="setSuggestions",_SuggestionStore$hand[_react_action_constants.mail.IMPORTANT_CONTACTS_FETCH_SUCCEEDED]="setImportantContacts",_SuggestionStore$hand),exports.default=SuggestionStore,module.exports=exports.default;
},{"../platform/react_action_constants":"./platform/react_action_constants","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],"./stores/user_preferences":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _UserPreferencesStore,_react_action_constants=require("../platform/react_action_constants"),_mail_constants=require("../platform/mail_constants"),_BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),MailboxAttributeSettings=Object.keys(_mail_constants.MailboxAttributes).reduce(function(e,t){var s=["PREVIEW_PANE","THEME","THEME_MODE","MAIL_TABS","EXPANDED_FOLDERS","SHOW_CUSTOM_FOLDERS","HIDE_AD","SNIPPETS","MSG_LIST_DENSITY","DESKTOP_NOTIFICATION","LINK_ENHANCR","VACATION_PREFERENCES","MESSAGE_FILTERS","MAILBOX_SIZE","COMPOSE_FONT_FAMILY","COMPOSE_FONT_SIZE","STATIONERY_DEFAULT_THEME","ACTION_AFTER_MSG_MOVE","BLOCK_IMAGES","DELIVERY_BLOCKED_SENDERS","DEA_BASE_NAME","UNSUBSCRIBE_NOTIFICATION","UNSUBSCRIBE_TIMESTAMP","NUM_UNSUBSCRIBED_ITEMS"];return s.indexOf(t)>-1&&(e[t]=_mail_constants.MailboxAttributes[t]),e},{}),PREVIEW_PANE=MailboxAttributeSettings.PREVIEW_PANE,THEME=MailboxAttributeSettings.THEME,THEME_MODE=MailboxAttributeSettings.THEME_MODE,MAIL_TABS=MailboxAttributeSettings.MAIL_TABS,EXPANDED_FOLDERS=MailboxAttributeSettings.EXPANDED_FOLDERS,SHOW_CUSTOM_FOLDERS=MailboxAttributeSettings.SHOW_CUSTOM_FOLDERS,HIDE_AD=MailboxAttributeSettings.HIDE_AD,SNIPPETS=MailboxAttributeSettings.SNIPPETS,MSG_LIST_DENSITY=MailboxAttributeSettings.MSG_LIST_DENSITY,DESKTOP_NOTIFICATION=MailboxAttributeSettings.DESKTOP_NOTIFICATION,LINK_ENHANCR=MailboxAttributeSettings.LINK_ENHANCR,VACATION_PREFERENCES=MailboxAttributeSettings.VACATION_PREFERENCES,MESSAGE_FILTERS=MailboxAttributeSettings.MESSAGE_FILTERS,MAILBOX_SIZE=MailboxAttributeSettings.MAILBOX_SIZE,COMPOSE_FONT_FAMILY=MailboxAttributeSettings.COMPOSE_FONT_FAMILY,COMPOSE_FONT_SIZE=MailboxAttributeSettings.COMPOSE_FONT_SIZE,STATIONERY_DEFAULT_THEME=MailboxAttributeSettings.STATIONERY_DEFAULT_THEME,ACTION_AFTER_MSG_MOVE=MailboxAttributeSettings.ACTION_AFTER_MSG_MOVE,BLOCK_IMAGES=MailboxAttributeSettings.BLOCK_IMAGES,DELIVERY_BLOCKED_SENDERS=MailboxAttributeSettings.DELIVERY_BLOCKED_SENDERS,DEA_BASE_NAME=MailboxAttributeSettings.DEA_BASE_NAME,UNSUBSCRIBE_NOTIFICATION=MailboxAttributeSettings.UNSUBSCRIBE_NOTIFICATION,UNSUBSCRIBE_TIMESTAMP=MailboxAttributeSettings.UNSUBSCRIBE_TIMESTAMP,NUM_UNSUBSCRIBED_ITEMS=MailboxAttributeSettings.NUM_UNSUBSCRIBED_ITEMS,UserPreferencesStore=function(e){function t(s){var n;_classCallCheck(this,t);var i=_possibleConstructorReturn(this,e.call(this,s)),r=i.dispatcher.getContext().config,_=r.multiTask,o=r.messageListDensity,E=r.previewpane,S=r.theme,a=r.themeMode,c=r.conversations,u=r.browserNotifications,A=r.linkEnhancer;return i._preferences={name:{first:"",last:""}},i._mailboxes=[],i._sortOrder=_mail_constants.SortOrder.DATE_DESC,i._conversations=c,i._userMetaData={},i._userSettings=(n={},n[MESSAGE_FILTERS]=[],n[EXPANDED_FOLDERS]=[],n[VACATION_PREFERENCES]={},n[MAILBOX_SIZE]=0,n[SNIPPETS]=!0,n[PREVIEW_PANE]=E,n[THEME]=S,n[THEME_MODE]=a,n[MAIL_TABS]=_,n[MSG_LIST_DENSITY]=o,n[DESKTOP_NOTIFICATION]=u,n[LINK_ENHANCR]=A,n[COMPOSE_FONT_FAMILY]="Helvetica Neue",n[COMPOSE_FONT_SIZE]="3",n[SHOW_CUSTOM_FOLDERS]=!0,n[HIDE_AD]=!1,n[STATIONERY_DEFAULT_THEME]="",n[ACTION_AFTER_MSG_MOVE]=_mail_constants.ActionAfterMessageMove.GO_BACK_TO_FOLDER,n[BLOCK_IMAGES]=_mail_constants.ShowImageSettings.NEVER,n[DELIVERY_BLOCKED_SENDERS]=[],n[DEA_BASE_NAME]={},n[UNSUBSCRIBE_NOTIFICATION]=!0,n[UNSUBSCRIBE_TIMESTAMP]=0,n[NUM_UNSUBSCRIBED_ITEMS]=0,n),i._socialAccountStatus={},i._baseNameSuggestions=[],i._newAccount=null,i._accountSyncFailed=!1,i._sendingConfirmEmail=!1,i}return _inherits(t,e),t.prototype.initializeStore=function(e){var t=e.mailboxes,s=e.mailboxAttributes,n=e.userPreferences,i=e.userMetaData,r=this.getContext().config,_=r.useV3SettingsData,o=r.previewpane,E=r.multiTask,S=r.linkEnhancer;t&&(this._mailboxes=t),n&&(this._preferences=n),i&&(this._userMetaData=i),_&&s?this.setMailboxAttributes(s):(this._userSettings[MAIL_TABS]=E,this._userSettings[PREVIEW_PANE]=parseInt(o,10),this._userSettings[LINK_ENHANCR]=S),this.emitChange()},t.prototype.setMailboxAttributes=function(e){var t=this;Object.keys(MailboxAttributeSettings).forEach(function(s){var n=MailboxAttributeSettings[s];if(void 0!==e[n]){var i=t._getQueryStringOverrideForSetting(n);void 0!==i?t._userSettings[n]=i:(t._userSettings[n]=t._getValueForSetting(s,e),n===DESKTOP_NOTIFICATION&&(t._userSettings[n]=!!t._userSettings[n]))}}),this.emitChange()},t.prototype._getQueryStringOverrideForSetting=function(e){var t,s=this.getContext().queryStringOverrides,n=s.previewpane,i=s.multiTask,r=s.messageListDensity,_=s.linkEnhancer,o=(t={},t[PREVIEW_PANE]=n,t[MAIL_TABS]=i,t[MSG_LIST_DENSITY]=r,t[LINK_ENHANCR]=_,t);return o[e]},t.prototype._getValueForSetting=function(e,t){var s=MailboxAttributeSettings[e],n=t[s];return Object.keys(_mail_constants.MailboxWebAttributes).indexOf(e)>-1?n=n.value:s===MESSAGE_FILTERS?n=n.filters:s===DELIVERY_BLOCKED_SENDERS&&(n=n.senders),n},t.prototype.setStationeryDefaultTheme=function(e){var t=e.value,s=t||"none";this._userSettings[STATIONERY_DEFAULT_THEME]=s,this.emitChange()},t.prototype.getAll=function(){return{mailboxes:this._mailboxes,preferences:this._preferences}},t.prototype.getMailboxes=function(){return this._mailboxes.filter(function(e){return e.isSelected})},t.prototype.getPreferences=function(){return this._preferences},t.prototype.getSortOrder=function(){return this._sortOrder},t.prototype.getSocialAccountStatus=function(){return this._socialAccountStatus},t.prototype.setBaseNameSuggestions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.suggestions;this._baseNameSuggestions=t||[],this.emitChange()},t.prototype.clearBaseNameSuggestions=function(){this.setBaseNameSuggestions({suggestions:[]})},t.prototype.getBaseNameSuggestions=function(){return this._baseNameSuggestions},t.prototype.setBaseName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseName,s=e.domain;this._baseNameSuggestions=[],this._userSettings[DEA_BASE_NAME]={deaPrefix:t,deaDomain:s},this.emitChange()},t.prototype.getDEAbaseName=function(){return this._userSettings[DEA_BASE_NAME]},t.prototype.setSocialAccountStatus=function(e){e&&(this._socialAccountStatus=e,this.emitChange())},t.prototype.updateSocialAccountStatus=function(e){var t=e.key;t&&(delete this._socialAccountStatus[t],this.emitChange())},t.prototype.getHideAdSetting=function(){return this._userSettings[HIDE_AD]},t.prototype.setHideAdSetting=function(e){var t=e.value;this._userSettings[HIDE_AD]=t,this.emitChange()},t.prototype.getBlockedSenders=function(){return this._userSettings[DELIVERY_BLOCKED_SENDERS]},t.prototype.setBlockedSenders=function(e){var t=e.senders;this._userSettings[DELIVERY_BLOCKED_SENDERS]=t,this.emitChange()},t.prototype.getShowImageSetting=function(){return this._userSettings[BLOCK_IMAGES]},t.prototype.setShowImageSetting=function(e){var t=e.value;this._userSettings[BLOCK_IMAGES]=t,this.emitChange()},t.prototype.getBrowserNotificationSetting=function(){return this._userSettings[DESKTOP_NOTIFICATION]},t.prototype.setBrowserNotificationSetting=function(e){var t=e.value;this._userSettings[DESKTOP_NOTIFICATION]=!!t,this.emitChange()},t.prototype.getMultiTaskModeSetting=function(){return this._userSettings[MAIL_TABS]},t.prototype.setMultiTaskModeSetting=function(e){var t=e.value;this._userSettings[MAIL_TABS]=t,this.emitChange()},t.prototype.getActionAfterMessageMove=function(){return this._userSettings[ACTION_AFTER_MSG_MOVE]},t.prototype.setActionAfterMessageMove=function(e){var t=e.value;this._userSettings[ACTION_AFTER_MSG_MOVE]=t,this.emitChange()},t.prototype.getExpandedFoldersSetting=function(){return this._userSettings[EXPANDED_FOLDERS]},t.prototype.setExpandedFoldersSetting=function(e){var t=e.value;this._userSettings[EXPANDED_FOLDERS]=t,this.emitChange()},t.prototype.getShowCustomFoldersSetting=function(){return this._userSettings[SHOW_CUSTOM_FOLDERS]},t.prototype.setShowCustomFoldersSetting=function(e){var t=e.value;this._userSettings[SHOW_CUSTOM_FOLDERS]=t,this.emitChange()},t.prototype.getMessageFilters=function(){return this._userSettings[MESSAGE_FILTERS]},t.prototype.getMailboxSize=function(){return this._userSettings[MAILBOX_SIZE]},t.prototype.getVacationPreferences=function(){return this._userSettings[VACATION_PREFERENCES]},t.prototype.getStationeryDefaultTheme=function(){var e=this._userSettings[STATIONERY_DEFAULT_THEME];return"none"!==e?e:""},t.prototype.getAccountFailStatus=function(){return this._accountSyncFailed},t.prototype.setMessageFilters=function(e){var t=e.blob;this._userSettings[MESSAGE_FILTERS]=t,this.emitChange()},t.prototype.setVacationPreferences=function(e){var t=e.blob;this._userSettings[VACATION_PREFERENCES]=t,this.emitChange()},t.prototype.getConversationSetting=function(){return this._conversations},t.prototype.getLinkEnhancerSetting=function(){return this._userSettings[LINK_ENHANCR]},t.prototype.setLinkEnhancerSetting=function(e){var t=e.value;this._userSettings[LINK_ENHANCR]=t,this.emitChange()},t.prototype.getUnsubscribePreferences=function(){return{showUnsubscribeNotification:this._userSettings[UNSUBSCRIBE_NOTIFICATION],unsubscribeTimestamp:this._userSettings[UNSUBSCRIBE_TIMESTAMP],numUnsubscribedItems:this._userSettings[NUM_UNSUBSCRIBED_ITEMS]}},t.prototype.setUnsubscribeNotification=function(e){var t=e.value;this._userSettings[UNSUBSCRIBE_NOTIFICATION]=t,this.emitChange()},t.prototype.setUnsubscribeTimestamp=function(e){var t=e.value;this._userSettings[UNSUBSCRIBE_TIMESTAMP]=t,this.emitChange()},t.prototype.setNumUnsubscribedItems=function(e){var t=e.value;this._userSettings[NUM_UNSUBSCRIBED_ITEMS]=t,this.emitChange()},t.prototype.getNewAccount=function(){return this._newAccount},t.prototype.handleNewAccountAdded=function(e){var t=e.newAccount;this._newAccount=t,this._accountSyncFailed=!1,this.emitChange()},t.prototype.handleNewAccountAddFailed=function(){this._accountSyncFailed=!0,this.emitChange()},t.prototype.handleNewAccountAddFinished=function(){this._newAccount=null,this._accountSyncFailed=!1,this.emitChange()},t.prototype.getConfirmEmailSendingState=function(){return this._sendingConfirmEmail},t.prototype.setConfirmEmailSendingState=function(e){var t=e.sending;this._sendingConfirmEmail=t,this.emitChange()},t.prototype.dehydrate=function(){var e=this._userSettings;return{mailboxes:this._mailboxes,multiTaskMode:e[MAIL_TABS],preferences:this._preferences,previewPane:e[PREVIEW_PANE],theme:e[THEME],themeMode:e[THEME_MODE],snippets:e[SNIPPETS],messageListDensity:e[MSG_LIST_DENSITY],mailboxSize:e[MAILBOX_SIZE],filters:e[MESSAGE_FILTERS],expandedFolders:e[EXPANDED_FOLDERS],showCustomFolders:e[SHOW_CUSTOM_FOLDERS],hideAd:e[HIDE_AD],vacationPreferences:e[VACATION_PREFERENCES],stationeryDefaultTheme:e[STATIONERY_DEFAULT_THEME],browserNotifications:e[DESKTOP_NOTIFICATION],linkEnhancer:e[LINK_ENHANCR],composeFontFamily:e[COMPOSE_FONT_FAMILY],composeFontSize:e[COMPOSE_FONT_SIZE],actionAfterMsgMove:e[ACTION_AFTER_MSG_MOVE],deaBaseName:e[DEA_BASE_NAME],userMetaData:this._userMetaData,socialAccountStatus:this._socialAccountStatus,blockImages:e[BLOCK_IMAGES],blockedSenders:e[DELIVERY_BLOCKED_SENDERS],showUnsubscribeNotification:e[UNSUBSCRIBE_NOTIFICATION],unsubscribeTimestamp:e[UNSUBSCRIBE_TIMESTAMP],numUnsubscribedItems:e[NUM_UNSUBSCRIBED_ITEMS]}},t.prototype.rehydrate=function(e){var t;this._mailboxes=e.mailboxes,this._preferences=e.preferences,this._userMetaData=e.userMetaData,this._socialAccountStatus=e.socialAccountStatus,this._userSettings=(t={},t[MAIL_TABS]=e.multiTaskMode,t[PREVIEW_PANE]=e.previewPane,t[THEME]=e.theme,t[THEME_MODE]=e.themeMode,t[MSG_LIST_DENSITY]=e.messageListDensity,t[SNIPPETS]=e.snippets,t[MAILBOX_SIZE]=e.mailboxSize,t[MESSAGE_FILTERS]=e.filters,t[EXPANDED_FOLDERS]=e.expandedFolders,t[SHOW_CUSTOM_FOLDERS]=e.showCustomFolders,t[HIDE_AD]=e.hideAd,t[VACATION_PREFERENCES]=e.vacationPreferences,t[DESKTOP_NOTIFICATION]=e.browserNotifications,t[LINK_ENHANCR]=e.linkEnhancer,t[COMPOSE_FONT_FAMILY]=e.composeFontFamily,t[COMPOSE_FONT_SIZE]=e.composeFontSize,t[STATIONERY_DEFAULT_THEME]=e.stationeryDefaultTheme,t[ACTION_AFTER_MSG_MOVE]=e.actionAfterMsgMove,t[BLOCK_IMAGES]=e.blockImages,t[DELIVERY_BLOCKED_SENDERS]=e.blockedSenders,t[DEA_BASE_NAME]=e.deaBaseName,t[UNSUBSCRIBE_NOTIFICATION]=e.showUnsubscribeNotification,t[UNSUBSCRIBE_TIMESTAMP]=e.unsubscribeTimestamp,t[NUM_UNSUBSCRIBED_ITEMS]=e.numUnsubscribedItems,t)},t.prototype._emit=function(){this.emitChange()},t}(_BaseStore3.default);UserPreferencesStore.storeName="UserPreferencesStore",UserPreferencesStore.handlers=(_UserPreferencesStore={},_UserPreferencesStore[_react_action_constants.mail.INITIAL_STATE]="initializeStore",_UserPreferencesStore[_react_action_constants.mail.SETTINGS_MAILBOX_ATTRIBUTES_RECEIVED]="setMailboxAttributes",_UserPreferencesStore[_react_action_constants.mail.MULTI_TASKING_PREF_CHANGE_REQUESTED]="setMultiTaskModeSetting",_UserPreferencesStore[_react_action_constants.mail.EXPANDED_FOLDERS_PREF_CHANGE_REQUESTED]="setExpandedFoldersSetting",_UserPreferencesStore[_react_action_constants.mail.SHOW_CUSTOM_FOLDERS_PREF_CHANGE_REQUESTED]="setShowCustomFoldersSetting",_UserPreferencesStore[_react_action_constants.mail.HIDEAD_PREF_CHANGE_REQUESTED]="setHideAdSetting",_UserPreferencesStore[_react_action_constants.mail.SNIPPETS_PREF_CHANGE_REQUESTED]="setSnippetsSetting",_UserPreferencesStore[_react_action_constants.mail.SHOW_IMAGE_PREF_CHANGE_REQUESTED]="setShowImageSetting",_UserPreferencesStore[_react_action_constants.mail.SETTINGS_SAVE_FILTERS_SUCCEEDED]="setMessageFilters",_UserPreferencesStore[_react_action_constants.mail.SETTINGS_SAVE_VACATION_PREFERENCES_SUCCEEDED]="setVacationPreferences",_UserPreferencesStore[_react_action_constants.mail.BROWSER_NOTIFICATIONS_PREF_CHANGE_REQUESTED]="setBrowserNotificationSetting",_UserPreferencesStore[_react_action_constants.mail.LINK_ENHANCER_CHANGE_REQUESTED]="setLinkEnhancerSetting",_UserPreferencesStore[_react_action_constants.mail.STATIONERY_DEFAULT_THEME_CHANGE_REQUESTED]="setStationeryDefaultTheme",_UserPreferencesStore[_react_action_constants.mail.SOCIAL_ACCOUNTS_STATUS_RECEIVED]="setSocialAccountStatus",_UserPreferencesStore[_react_action_constants.mail.SOCIAL_ACCOUNTS_DISCONNECT_SUCCEEDED]="updateSocialAccountStatus",_UserPreferencesStore[_react_action_constants.mail.ACTION_AFTER_MESSAGE_MOVE_CHANGE_REQUESTED]="setActionAfterMessageMove",_UserPreferencesStore[_react_action_constants.mail.SETTINGS_SAVE_BLOCKED_SENDERS_REQUESTED]="setBlockedSenders",_UserPreferencesStore[_react_action_constants.mail.DISPOSABLE_EMAIL_BASE_NAME_SUGGESTIONS_RECEIVED]="setBaseNameSuggestions",_UserPreferencesStore[_react_action_constants.mail.DISPOSABLE_EMAIL_BASE_NAME_CREATE_REQUESTED]="clearBaseNameSuggestions",_UserPreferencesStore[_react_action_constants.mail.DISPOSABLE_EMAIL_BASE_NAME_CREATE_SUCCEEDED]="setBaseName",_UserPreferencesStore[_react_action_constants.mail.ACCOUNT_ADD_SUCCEEDED]="handleNewAccountAdded",_UserPreferencesStore[_react_action_constants.mail.ACCOUNT_ADD_FAILED]="handleNewAccountAddFailed",_UserPreferencesStore[_react_action_constants.mail.ACCOUNT_ADD_FINISHED]="handleNewAccountAddFinished",_UserPreferencesStore[_react_action_constants.mail.CONFIRM_EMAIL_RESNED_REQUESTED]="setConfirmEmailSendingState",_UserPreferencesStore[_react_action_constants.mail.CONFIRM_EMAIL_RESEND_SUCCEEDED]="setConfirmEmailSendingState",_UserPreferencesStore[_react_action_constants.mail.CONFIRM_EMAIL_RESEND_FAILED]="setConfirmEmailSendingState",_UserPreferencesStore[_react_action_constants.mail.UNSUBSCRIBE_NOTIFICATION_CHANGE_REQUESTED]="setUnsubscribeNotification",_UserPreferencesStore[_react_action_constants.mail.UNSUBSCRIBE_TIMESTAMP_CHANGE_REQUESTED]="setUnsubscribeTimestamp",_UserPreferencesStore[_react_action_constants.mail.NUM_UNSUBSCRIBED_ITEMS_CHANGE_REQUESTED]="setNumUnsubscribedItems",_UserPreferencesStore[_react_action_constants.mail.SETTINGS_CHANGE_REQUESTED]="_emit",_UserPreferencesStore[_react_action_constants.mail.SETTINGS_CHANGE_SUCCEEDED]="_emit",_UserPreferencesStore[_react_action_constants.mail.SETTINGS_CHANGE_FAILED]="_emit",_UserPreferencesStore),exports.default=UserPreferencesStore,module.exports=exports.default;
},{"../platform/mail_constants":"./platform/mail_constants","../platform/react_action_constants":"./platform/react_action_constants","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],"./stores/xobni":[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _react_action_constants=require("../platform/react_action_constants"),_BaseStore2=require("fluxible/addons/BaseStore"),_BaseStore3=_interopRequireDefault(_BaseStore2),XobniStore=function(t){function e(o){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,o));return n.isXobnified=!1,n.currentToken=null,n.suggestions={},n.preloadedContacts={},n}return _inherits(e,t),e.prototype.setIsXobnified=function(t){var e=t.isXobnified;this.isXobnified=e,this.emitChange()},e.prototype.getIsXobnified=function(){return this.isXobnified},e.prototype.setSuggestions=function(t){if(t.token===this.currentToken){var e=t.data,o=t.csid;this.suggestions[o]=e.contacts,this.emitChange()}},e.prototype.clearSuggestionsForGroup=function(t){var e=t.csid;this.suggestions[e]=[],this.emitChange()},e.prototype.setPreloadedContacts=function(t){var e=t.contacts;this.preloadedContacts=e},e.prototype.setToken=function(t){this.currentToken=t.token},e.prototype.getSuggestions=function(){return this.suggestions},e.prototype.contactPickerReceived=function(){this.emitChange()},e}(_BaseStore3.default);XobniStore.storeName="XobniStore",XobniStore.handlers={},XobniStore.handlers[_react_action_constants.mail.IMPORTANT_CONTACTS_PRELOADED]="setPreloadedContacts",XobniStore.handlers[_react_action_constants.mail.CONTACT_ADDED]="clearSuggestionsForGroup",XobniStore.handlers[_react_action_constants.mail.CLEARED_SUGGESTIONS]="clearSuggestionsForGroup",XobniStore.handlers[_react_action_constants.mail.XOBNIFIED_RESPONDED]="setIsXobnified",XobniStore.handlers[_react_action_constants.mail.SEARCH_CONTACT_SUCCEEDED]="setSuggestions",XobniStore.handlers[_react_action_constants.mail.SEARCH_CONTACT_BEGAN]="setToken",XobniStore.handlers[_react_action_constants.mail.CONTACT_GROUPS_RECEIVED]="contactPickerReceived",module.exports=XobniStore;
},{"../platform/react_action_constants":"./platform/react_action_constants","fluxible/addons/BaseStore":"./node_modules/fluxible/addons/BaseStore.js"}],"./types":[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r.default=e,r}exports.__esModule=!0,exports.EmojiType=exports.LinkEnhancerDomainStylesType=exports.LinkEnhancerClientType=exports.PlayerConfigType=exports.TweetType=exports.StringType=exports.LocationType=exports.CredstoreClientType=exports.YQLClientType=exports.ToolbarActionsType=exports.BulkTask=exports.BrowserNotificationType=exports.AttachmentErrorType=exports.NotificationDescriptor=exports.XobniContact=exports.LocaleShape=exports.LoaderType=exports.VacationResponseType=exports.DomainSpecificResponseType=exports.FilterType=exports.FilterCriterionType=exports.FilterActionType=exports.FilterFolderActionTypes=exports.DocumentType=exports.DocumentPageType=exports.DarlaAdCallResultType=exports.DarlaAdResultType=exports.AdType=exports.NativeAdType=exports.PencilAdType=exports.PeopleSuggestionType=exports.SpaceIdType=exports.AccountType=exports.SenderType=exports.ImageType=exports.MessageGroupType=exports.MessageType=exports.HeadersType=exports.PageType=exports.RouteType=exports.BodyType=exports.HtmlAnnotationType=exports.GroupedFoldersType=exports.FolderType2=exports.SuggestionsByHeaderType=exports.AccountsType=exports.FolderNodeListType=exports.FolderNodeType=exports.FolderType=exports.FlagsType2=exports.AttachmentType=exports.ContactType=exports.UserType=exports.AddressType=exports.TimezoneType=exports.arrayOf=exports.oneOf=exports.shape=exports.any=exports.object=exports.array=exports.bool=exports.number=exports.string=void 0;var _react=require("react"),_mail_constants=require("../platform/mail_constants"),Constants=_interopRequireWildcard(_mail_constants),_object=require("../platform/utils/object"),string=_react.PropTypes.string,number=_react.PropTypes.number,bool=_react.PropTypes.bool,array=_react.PropTypes.array,object=_react.PropTypes.object,any=_react.PropTypes.any,shape=_react.PropTypes.shape,oneOf=_react.PropTypes.oneOf,oneOfType=_react.PropTypes.oneOfType,arrayOf=_react.PropTypes.arrayOf,func=_react.PropTypes.func;exports.string=string,exports.number=number,exports.bool=bool,exports.array=array,exports.object=object,exports.any=any,exports.shape=shape,exports.oneOf=oneOf,exports.arrayOf=arrayOf;var TimezoneType=exports.TimezoneType=shape({name:string.isRequired,lastObservedTimezone:shape({client:string,server:string}),location:shape({city:string,state:string,country:string}),geoLocation:shape({city:string,state:string,country:string}),longName:string,formattedOffset:string,currentOffset:number}),AddressType=exports.AddressType=shape({name:string,email:string}),UserType=exports.UserType=shape({first:string.isRequired,last:string.isRequired}),ContactType=exports.ContactType=shape({id:string,name:string,email:string}),AttachmentType=exports.AttachmentType=shape({virus:string,filename:string,size:number,partId:string,mimeType:string,type:oneOf((0,_object.values)(Constants.Attachments.Types)),messageReference:shape({mid:string,pid:string}),disposition:string,downloadUrl:string,thumbnailUrl:string,contentId:string,dataId:string}),FlagsType2=exports.FlagsType2=shape({isSpam:bool,isRead:bool,isFlagged:bool}),FolderType=exports.FolderType=shape({id:string.isRequired,name:string.isRequired,isSystem:bool.isRequired,types:arrayOf(string).isRequired}),FolderNodeType=exports.FolderNodeType=shape({folder:FolderType.isRequired,children:arrayOf(object).isRequired}),FolderNodeListType=exports.FolderNodeListType=arrayOf(FolderNodeType),AccountsType=exports.AccountsType=shape({default:array.isRequired}),SuggestionsByHeaderType=exports.SuggestionsByHeaderType=shape({to:array,cc:array,bcc:array}),FolderType2=exports.FolderType2=shape({id:string.isRequired,accountId:string.isRequired,name:string.isRequired,isSystem:bool,types:arrayOf(string).isRequired,total:number,unread:number}),GroupedFoldersType=exports.GroupedFoldersType=shape({systemFolders:array.isRequired,customFolders:array.isRequired}),HtmlAnnotationType=exports.HtmlAnnotationType=shape({divIds:arrayOf(string).isRequired,classId:string}),BodyType=exports.BodyType=shape({html:string,text:string,htmlAnnotations:arrayOf(HtmlAnnotationType),attachments:arrayOf(AttachmentType),bidi:arrayOf(string)}),RouteType=exports.RouteType=shape({name:string.isRequired,params:object,query:object}),PageType=exports.PageType=shape({route:RouteType.isRequired,metadata:object}),HeadersType=exports.HeadersType=shape({subject:string.isRequired,cc:arrayOf(AddressType).isRequired,bcc:arrayOf(AddressType).isRequired,to:arrayOf(AddressType).isRequired,from:arrayOf(AddressType).isRequired,date:number.isRequired}),MessageType=exports.MessageType=shape({id:string.isRequired,folder:FolderType2.isRequired,flags:shape({flagged:bool,read:bool}).isRequired,headers:HeadersType.isRequired,snippet:string.isRequired,attachments:arrayOf(AttachmentType).isRequired,body:BodyType,verifiedDomains:_react.PropTypes.array.isRequired,composeProps:_react.PropTypes.object}),MessageGroupType=exports.MessageGroupType=shape({id:string.isRequired,messages:arrayOf(MessageType).isRequired}),ImageType=exports.ImageType=shape({url:string,width:number,height:number}),SenderType=exports.SenderType=shape({name:string,email:string.isRequired,recent:bool.isRequired}),AccountType=exports.AccountType=shape({id:string.isRequired,isPrimary:bool.isRequired,email:string.isRequired,accountVerified:bool.isRequired,sendingName:string,status:oneOf((0,_object.values)(Constants.AccountStatus)).isRequired,type:oneOf((0,_object.values)(Constants.AccountTypes)).isRequired,serverUri:string,signature:string,signatureActive:bool,secondaryAccounts:array,replyToAddress:string}),SpaceIdType=exports.SpaceIdType=oneOfType([number,string]),PeopleSuggestionType=exports.PeopleSuggestionType=shape({type:_react.PropTypes.oneOf((0,_object.values)(Constants.SuggestionType)),serviceId:_react.PropTypes.string,name:_react.PropTypes.string,emailIds:_react.PropTypes.arrayOf(_react.PropTypes.string)}),PencilAdType=exports.PencilAdType=shape({adHeadline:string.isRequired,adSummary:string.isRequired,adImg:string.isRequired,adSource:string.isRequired,clickUrl:string.isRequired,type:string.isRequired,creativeId:string,beacon:string,impressionTrackingUrls:array}),NativeAdType=exports.NativeAdType=shape({contentType:string.isRequired,url:string.isRequired,usageType:string.isRequired}),AdType=exports.AdType=shape({creativeId:string.isRequired,pencilAd:PencilAdType,nativeAd:NativeAdType}),DarlaAdResultType=exports.DarlaAdResultType=shape({position:string.isRequired,bookId:number.isRequired}),DarlaAdCallResultType=exports.DarlaAdCallResultType=shape({spaceId:string.isRequired,positions:arrayOf(DarlaAdResultType).isRequired}),DocumentPageType=exports.DocumentPageType=shape({content:object,state:oneOf((0,_object.values)(Constants.RecordStates))}),DocumentType=exports.DocumentType=shape({pages:DocumentPageType.isRequired,numPages:number.isRequired,height:number.isRequired,width:number.isRequired,exceptions:object.isRequired,sheets:object.isRequired}),FilterFolderActionTypes=exports.FilterFolderActionTypes=shape({folderActionValueBean:shape({folder:shape({name:string.isRequired})}).isRequired}),FilterActionType=exports.FilterActionType=shape({type:oneOf((0,_object.values)(Constants.FilterActionTypes)),value:FilterFolderActionTypes}),FilterCriterionType=exports.FilterCriterionType=shape({field:oneOf((0,_object.values)(Constants.FilterFieldTypes)),operator:oneOf((0,_object.values)(Constants.FilterOperatorTypes)),matchCase:bool,value:string.isRequired}),FilterType=exports.FilterType=shape({index:number.isRequired,name:string.isRequired,matchType:oneOf((0,_object.values)(Constants.FilterMatchTypes)),actions:arrayOf(FilterActionType).isRequired,criterions:arrayOf(FilterCriterionType).isRequired}),DomainSpecificResponseType=exports.DomainSpecificResponseType=shape({domains:arrayOf(string).isRequired,domainMessageBody:string.isRequired}),VacationResponseType=exports.VacationResponseType=shape({enabled:bool.isRequired,startDate:number,endDate:number,messageBody:string,domainSpecificResponse:DomainSpecificResponseType}),LoaderType=exports.LoaderType=shape({loadModule:func.isRequired}),LocaleShape=exports.LocaleShape=shape({firstDay:number,name:string,utcName:string}),XobniContact=exports.XobniContact=shape({id:string.isRequired,xobniId:string,categories:array,emails:arrayOf(string).isRequired,name:string,phone:string,position:string,company:string,flickr:string,facebook:string,twitter:string,linkedIn:string}),NotificationDescriptor=exports.NotificationDescriptor=shape({requireInteraction:bool,sticky:bool,modal:bool,icon:string,type:oneOf((0,_object.values)(Constants.NotificationTypes))}),AttachmentErrorType=exports.AttachmentErrorType=shape({code:number,isRetryable:bool}),BrowserNotificationType=exports.BrowserNotificationType=shape({title:string.isRequired,options:shape({body:string.isRequired,icon:string.isRequired,lang:string.isRequired,tag:string.isRequired,timestamp:number.isRequired}).isRequired,onClick:func}),BulkTask=exports.BulkTask=shape({id:string,status:oneOf((0,_object.values)(Constants.BulkTaskStatus)).isRequired,progress:number.isRequired,expires:number}),ToolbarActionsType=exports.ToolbarActionsType=shape({spam:bool,ham:bool,move:bool,archive:bool,restore:bool,delete:bool,permDelete:bool,raf:bool}),YQLClientType=exports.YQLClientType=shape({request:func}),CredstoreClientType=exports.CredstoreClientType=shape({getAuthorizationURL:func}),LocationType=exports.LocationType=shape({city:string,state:string,country:string,timezone:shape({name:string.isRequired,longName:string,currentOffset:string,offsetPositive:bool}).isRequired}),StringType=exports.StringType=shape({id:string,defaultMessage:string,description:string}),TweetType=exports.TweetType=shape({id:number.isRequired,name:string.isRequired,text:string.isRequired,imgUrl:string.isRequired,handle:string.isRequired,creationTime:_react.PropTypes.instanceOf(Date).isRequired}),PlayerConfigType=exports.PlayerConfigType=shape({playlist:object.isRequired}),LinkEnhancerClientType=exports.LinkEnhancerClientType=shape({get:func}),LinkEnhancerDomainStylesType=exports.LinkEnhancerDomainStylesType=shape({domainLogo:string.isRequired,domainColor:string.isRequired}),EmojiType=exports.EmojiType=shape({unicode:string.isRequired,unicode_alt:string.isRequired,code_decimal:string.isRequired,name:string.isRequired,shortname:string.isRequired,category:string.isRequired,emoji_order:string.isRequired,aliases:array.isRequired,aliases_ascii:array.isRequired,keywords:array.isRequired});
},{"../platform/mail_constants":"./platform/mail_constants","../platform/utils/object":"./platform/utils/object","react":"./node_modules/react/react.js"}],"./vendor/through/browser":[function(require,module,exports){
function through(e,t,u){function r(){for(;i.length&&!l.paused;){var e=i.shift();if(null===e)return l.emit("end");l.emit("data",e)}}function n(){l.writable=!1,t.call(l),!l.readable&&l.autoDestroy&&l.destroy()}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var a=!1,o=!1,i=[],s=!1,l=new Stream;return l.readable=l.writable=!0,l.paused=!1,l.autoDestroy=!(u&&u.autoDestroy===!1),l.write=function(t){return e.call(this,t),!l.paused},l.queue=l.push=function(e){return s?l:(null===e&&(s=!0),i.push(e),r(),l)},l.on("end",function(){l.readable=!1,!l.writable&&l.autoDestroy&&setTimeout(function(){l.destroy()})}),l.end=function(e){if(!a)return a=!0,arguments.length&&l.write(e),n(),l},l.destroy=function(){if(!o)return o=!0,a=!0,i.length=0,l.writable=l.readable=!1,l.emit("close"),l},l.pause=function(){if(!l.paused)return l.paused=!0,l},l.resume=function(){return l.paused&&(l.paused=!1,l.emit("resume")),r(),l.paused||l.emit("drain"),l},l}var Stream=require("./stream");exports=module.exports=through,through.through=through;
},{"./stream":"./vendor/through/stream"}],"./vendor/through/stream":[function(require,module,exports){
function Stream(){Emitter.call(this)}var Emitter=require("jvent");Stream.prototype=new Emitter,module.exports=Stream,Stream.Stream=Stream,Stream.prototype.pipe=function(e,o){function r(o){e.writable&&!1===e.write(o)&&s.pause&&s.pause()}function t(){s.readable&&s.resume&&s.resume()}function n(){d||(d=!0,e.end())}function f(){d||(d=!0,"function"==typeof e.destroy&&e.destroy())}function i(e){a();var o=this.listeners("error");if(!o||!o.length)throw e}function a(){s.off("data",r),e.off("drain",t),s.off("end",n),s.off("close",f),s.off("error",i),e.off("error",i),s.off("end",a),s.off("close",a),e.off("end",a),e.off("close",a)}var s=this;s.on("data",r),e.on("drain",t),e._isStdio||o&&o.end===!1||(s.on("end",n),s.on("close",f));var d=!1;return s.on("error",i),e.on("error",i),s.on("end",a),s.on("close",a),e.on("end",a),e.on("close",a),e.emit("pipe",s),e};
},{"jvent":"./node_modules/jvent/index.js"}]},{},[51]);
